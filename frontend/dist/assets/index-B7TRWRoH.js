var my=Object.defineProperty;var gy=(n,s,i)=>s in n?my(n,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[s]=i;var Wo=(n,s,i)=>gy(n,typeof s!="symbol"?s+"":s,i);function xy(n,s){for(var i=0;i<s.length;i++){const l=s[i];if(typeof l!="string"&&!Array.isArray(l)){for(const c in l)if(c!=="default"&&!(c in n)){const u=Object.getOwnPropertyDescriptor(l,c);u&&Object.defineProperty(n,c,u.get?u:{enumerable:!0,get:()=>l[c]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const p of u.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&l(p)}).observe(document,{childList:!0,subtree:!0});function i(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(c){if(c.ep)return;c.ep=!0;const u=i(c);fetch(c.href,u)}})();var Gf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function aa(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function gx(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var s=n.default;if(typeof s=="function"){var i=function l(){return this instanceof l?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};i.prototype=s.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(n).forEach(function(l){var c=Object.getOwnPropertyDescriptor(n,l);Object.defineProperty(i,l,c.get?c:{enumerable:!0,get:function(){return n[l]}})}),i}var $f={exports:{}},el={},Kf={exports:{}},At={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $p;function Ay(){if($p)return At;$p=1;var n=Symbol.for("react.element"),s=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),p=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),A=Symbol.iterator;function _(N){return N===null||typeof N!="object"?null:(N=A&&N[A]||N["@@iterator"],typeof N=="function"?N:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,C={};function w(N,U,K){this.props=N,this.context=U,this.refs=C,this.updater=K||k}w.prototype.isReactComponent={},w.prototype.setState=function(N,U){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,U,"setState")},w.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function B(){}B.prototype=w.prototype;function S(N,U,K){this.props=N,this.context=U,this.refs=C,this.updater=K||k}var T=S.prototype=new B;T.constructor=S,R(T,w.prototype),T.isPureReactComponent=!0;var F=Array.isArray,M=Object.prototype.hasOwnProperty,z={current:null},H={key:!0,ref:!0,__self:!0,__source:!0};function j(N,U,K){var Y,fe={},me=null,Se=null;if(U!=null)for(Y in U.ref!==void 0&&(Se=U.ref),U.key!==void 0&&(me=""+U.key),U)M.call(U,Y)&&!H.hasOwnProperty(Y)&&(fe[Y]=U[Y]);var we=arguments.length-2;if(we===1)fe.children=K;else if(1<we){for(var de=Array(we),he=0;he<we;he++)de[he]=arguments[he+2];fe.children=de}if(N&&N.defaultProps)for(Y in we=N.defaultProps,we)fe[Y]===void 0&&(fe[Y]=we[Y]);return{$$typeof:n,type:N,key:me,ref:Se,props:fe,_owner:z.current}}function X(N,U){return{$$typeof:n,type:N.type,key:U,ref:N.ref,props:N.props,_owner:N._owner}}function V(N){return typeof N=="object"&&N!==null&&N.$$typeof===n}function $(N){var U={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(K){return U[K]})}var ee=/\/+/g;function W(N,U){return typeof N=="object"&&N!==null&&N.key!=null?$(""+N.key):U.toString(36)}function re(N,U,K,Y,fe){var me=typeof N;(me==="undefined"||me==="boolean")&&(N=null);var Se=!1;if(N===null)Se=!0;else switch(me){case"string":case"number":Se=!0;break;case"object":switch(N.$$typeof){case n:case s:Se=!0}}if(Se)return Se=N,fe=fe(Se),N=Y===""?"."+W(Se,0):Y,F(fe)?(K="",N!=null&&(K=N.replace(ee,"$&/")+"/"),re(fe,U,K,"",function(he){return he})):fe!=null&&(V(fe)&&(fe=X(fe,K+(!fe.key||Se&&Se.key===fe.key?"":(""+fe.key).replace(ee,"$&/")+"/")+N)),U.push(fe)),1;if(Se=0,Y=Y===""?".":Y+":",F(N))for(var we=0;we<N.length;we++){me=N[we];var de=Y+W(me,we);Se+=re(me,U,K,de,fe)}else if(de=_(N),typeof de=="function")for(N=de.call(N),we=0;!(me=N.next()).done;)me=me.value,de=Y+W(me,we++),Se+=re(me,U,K,de,fe);else if(me==="object")throw U=String(N),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return Se}function pe(N,U,K){if(N==null)return N;var Y=[],fe=0;return re(N,Y,"","",function(me){return U.call(K,me,fe++)}),Y}function ie(N){if(N._status===-1){var U=N._result;U=U(),U.then(function(K){(N._status===0||N._status===-1)&&(N._status=1,N._result=K)},function(K){(N._status===0||N._status===-1)&&(N._status=2,N._result=K)}),N._status===-1&&(N._status=0,N._result=U)}if(N._status===1)return N._result.default;throw N._result}var Ae={current:null},G={transition:null},xe={ReactCurrentDispatcher:Ae,ReactCurrentBatchConfig:G,ReactCurrentOwner:z};function Z(){throw Error("act(...) is not supported in production builds of React.")}return At.Children={map:pe,forEach:function(N,U,K){pe(N,function(){U.apply(this,arguments)},K)},count:function(N){var U=0;return pe(N,function(){U++}),U},toArray:function(N){return pe(N,function(U){return U})||[]},only:function(N){if(!V(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},At.Component=w,At.Fragment=i,At.Profiler=c,At.PureComponent=S,At.StrictMode=l,At.Suspense=g,At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xe,At.act=Z,At.cloneElement=function(N,U,K){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var Y=R({},N.props),fe=N.key,me=N.ref,Se=N._owner;if(U!=null){if(U.ref!==void 0&&(me=U.ref,Se=z.current),U.key!==void 0&&(fe=""+U.key),N.type&&N.type.defaultProps)var we=N.type.defaultProps;for(de in U)M.call(U,de)&&!H.hasOwnProperty(de)&&(Y[de]=U[de]===void 0&&we!==void 0?we[de]:U[de])}var de=arguments.length-2;if(de===1)Y.children=K;else if(1<de){we=Array(de);for(var he=0;he<de;he++)we[he]=arguments[he+2];Y.children=we}return{$$typeof:n,type:N.type,key:fe,ref:me,props:Y,_owner:Se}},At.createContext=function(N){return N={$$typeof:p,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:u,_context:N},N.Consumer=N},At.createElement=j,At.createFactory=function(N){var U=j.bind(null,N);return U.type=N,U},At.createRef=function(){return{current:null}},At.forwardRef=function(N){return{$$typeof:d,render:N}},At.isValidElement=V,At.lazy=function(N){return{$$typeof:x,_payload:{_status:-1,_result:N},_init:ie}},At.memo=function(N,U){return{$$typeof:m,type:N,compare:U===void 0?null:U}},At.startTransition=function(N){var U=G.transition;G.transition={};try{N()}finally{G.transition=U}},At.unstable_act=Z,At.useCallback=function(N,U){return Ae.current.useCallback(N,U)},At.useContext=function(N){return Ae.current.useContext(N)},At.useDebugValue=function(){},At.useDeferredValue=function(N){return Ae.current.useDeferredValue(N)},At.useEffect=function(N,U){return Ae.current.useEffect(N,U)},At.useId=function(){return Ae.current.useId()},At.useImperativeHandle=function(N,U,K){return Ae.current.useImperativeHandle(N,U,K)},At.useInsertionEffect=function(N,U){return Ae.current.useInsertionEffect(N,U)},At.useLayoutEffect=function(N,U){return Ae.current.useLayoutEffect(N,U)},At.useMemo=function(N,U){return Ae.current.useMemo(N,U)},At.useReducer=function(N,U,K){return Ae.current.useReducer(N,U,K)},At.useRef=function(N){return Ae.current.useRef(N)},At.useState=function(N){return Ae.current.useState(N)},At.useSyncExternalStore=function(N,U,K){return Ae.current.useSyncExternalStore(N,U,K)},At.useTransition=function(){return Ae.current.useTransition()},At.version="18.3.1",At}var Kp;function M0(){return Kp||(Kp=1,Kf.exports=Ay()),Kf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qp;function vy(){if(Qp)return el;Qp=1;var n=M0(),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,c=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function p(d,g,m){var x,A={},_=null,k=null;m!==void 0&&(_=""+m),g.key!==void 0&&(_=""+g.key),g.ref!==void 0&&(k=g.ref);for(x in g)l.call(g,x)&&!u.hasOwnProperty(x)&&(A[x]=g[x]);if(d&&d.defaultProps)for(x in g=d.defaultProps,g)A[x]===void 0&&(A[x]=g[x]);return{$$typeof:s,type:d,key:_,ref:k,props:A,_owner:c.current}}return el.Fragment=i,el.jsx=p,el.jsxs=p,el}var Yp;function yy(){return Yp||(Yp=1,$f.exports=vy()),$f.exports}var b=yy(),D=M0();const Te=aa(D),I0=xy({__proto__:null,default:Te},[D]);var Vc={},Qf={exports:{}},Kn={},Yf={exports:{}},Xf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xp;function _y(){return Xp||(Xp=1,(function(n){function s(G,xe){var Z=G.length;G.push(xe);e:for(;0<Z;){var N=Z-1>>>1,U=G[N];if(0<c(U,xe))G[N]=xe,G[Z]=U,Z=N;else break e}}function i(G){return G.length===0?null:G[0]}function l(G){if(G.length===0)return null;var xe=G[0],Z=G.pop();if(Z!==xe){G[0]=Z;e:for(var N=0,U=G.length,K=U>>>1;N<K;){var Y=2*(N+1)-1,fe=G[Y],me=Y+1,Se=G[me];if(0>c(fe,Z))me<U&&0>c(Se,fe)?(G[N]=Se,G[me]=Z,N=me):(G[N]=fe,G[Y]=Z,N=Y);else if(me<U&&0>c(Se,Z))G[N]=Se,G[me]=Z,N=me;else break e}}return xe}function c(G,xe){var Z=G.sortIndex-xe.sortIndex;return Z!==0?Z:G.id-xe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var p=Date,d=p.now();n.unstable_now=function(){return p.now()-d}}var g=[],m=[],x=1,A=null,_=3,k=!1,R=!1,C=!1,w=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(G){for(var xe=i(m);xe!==null;){if(xe.callback===null)l(m);else if(xe.startTime<=G)l(m),xe.sortIndex=xe.expirationTime,s(g,xe);else break;xe=i(m)}}function F(G){if(C=!1,T(G),!R)if(i(g)!==null)R=!0,ie(M);else{var xe=i(m);xe!==null&&Ae(F,xe.startTime-G)}}function M(G,xe){R=!1,C&&(C=!1,B(j),j=-1),k=!0;var Z=_;try{for(T(xe),A=i(g);A!==null&&(!(A.expirationTime>xe)||G&&!$());){var N=A.callback;if(typeof N=="function"){A.callback=null,_=A.priorityLevel;var U=N(A.expirationTime<=xe);xe=n.unstable_now(),typeof U=="function"?A.callback=U:A===i(g)&&l(g),T(xe)}else l(g);A=i(g)}if(A!==null)var K=!0;else{var Y=i(m);Y!==null&&Ae(F,Y.startTime-xe),K=!1}return K}finally{A=null,_=Z,k=!1}}var z=!1,H=null,j=-1,X=5,V=-1;function $(){return!(n.unstable_now()-V<X)}function ee(){if(H!==null){var G=n.unstable_now();V=G;var xe=!0;try{xe=H(!0,G)}finally{xe?W():(z=!1,H=null)}}else z=!1}var W;if(typeof S=="function")W=function(){S(ee)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,pe=re.port2;re.port1.onmessage=ee,W=function(){pe.postMessage(null)}}else W=function(){w(ee,0)};function ie(G){H=G,z||(z=!0,W())}function Ae(G,xe){j=w(function(){G(n.unstable_now())},xe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){R||k||(R=!0,ie(M))},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_getFirstCallbackNode=function(){return i(g)},n.unstable_next=function(G){switch(_){case 1:case 2:case 3:var xe=3;break;default:xe=_}var Z=_;_=xe;try{return G()}finally{_=Z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,xe){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Z=_;_=G;try{return xe()}finally{_=Z}},n.unstable_scheduleCallback=function(G,xe,Z){var N=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?N+Z:N):Z=N,G){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=Z+U,G={id:x++,callback:xe,priorityLevel:G,startTime:Z,expirationTime:U,sortIndex:-1},Z>N?(G.sortIndex=Z,s(m,G),i(g)===null&&G===i(m)&&(C?(B(j),j=-1):C=!0,Ae(F,Z-N))):(G.sortIndex=U,s(g,G),R||k||(R=!0,ie(M))),G},n.unstable_shouldYield=$,n.unstable_wrapCallback=function(G){var xe=_;return function(){var Z=_;_=xe;try{return G.apply(this,arguments)}finally{_=Z}}}})(Xf)),Xf}var Jp;function wy(){return Jp||(Jp=1,Yf.exports=_y()),Yf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var em;function by(){if(em)return Kn;em=1;var n=M0(),s=wy();function i(e){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=new Set,c={};function u(e,r){p(e,r),p(e+"Capture",r)}function p(e,r){for(c[e]=r,e=0;e<r.length;e++)l.add(r[e])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},A={};function _(e){return g.call(A,e)?!0:g.call(x,e)?!1:m.test(e)?A[e]=!0:(x[e]=!0,!1)}function k(e,r,a,h){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function R(e,r,a,h){if(r===null||typeof r>"u"||k(e,r,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function C(e,r,a,h,y,E,I){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=h,this.attributeNamespace=y,this.mustUseProperty=a,this.propertyName=e,this.type=r,this.sanitizeURL=E,this.removeEmptyString=I}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){w[e]=new C(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var r=e[0];w[r]=new C(r,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){w[e]=new C(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){w[e]=new C(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){w[e]=new C(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){w[e]=new C(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){w[e]=new C(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){w[e]=new C(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){w[e]=new C(e,5,!1,e.toLowerCase(),null,!1,!1)});var B=/[\-:]([a-z])/g;function S(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var r=e.replace(B,S);w[r]=new C(r,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var r=e.replace(B,S);w[r]=new C(r,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var r=e.replace(B,S);w[r]=new C(r,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){w[e]=new C(e,1,!1,e.toLowerCase(),null,!1,!1)}),w.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){w[e]=new C(e,1,!1,e.toLowerCase(),null,!0,!0)});function T(e,r,a,h){var y=w.hasOwnProperty(r)?w[r]:null;(y!==null?y.type!==0:h||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(R(r,a,y,h)&&(a=null),h||y===null?_(r)&&(a===null?e.removeAttribute(r):e.setAttribute(r,""+a)):y.mustUseProperty?e[y.propertyName]=a===null?y.type===3?!1:"":a:(r=y.attributeName,h=y.attributeNamespace,a===null?e.removeAttribute(r):(y=y.type,a=y===3||y===4&&a===!0?"":""+a,h?e.setAttributeNS(h,r,a):e.setAttribute(r,a))))}var F=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),z=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),$=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),pe=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),Ae=Symbol.for("react.offscreen"),G=Symbol.iterator;function xe(e){return e===null||typeof e!="object"?null:(e=G&&e[G]||e["@@iterator"],typeof e=="function"?e:null)}var Z=Object.assign,N;function U(e){if(N===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);N=r&&r[1]||""}return`
`+N+e}var K=!1;function Y(e,r){if(!e||K)return"";K=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(ue){var h=ue}Reflect.construct(e,[],r)}else{try{r.call()}catch(ue){h=ue}e.call(r.prototype)}else{try{throw Error()}catch(ue){h=ue}e()}}catch(ue){if(ue&&h&&typeof ue.stack=="string"){for(var y=ue.stack.split(`
`),E=h.stack.split(`
`),I=y.length-1,q=E.length-1;1<=I&&0<=q&&y[I]!==E[q];)q--;for(;1<=I&&0<=q;I--,q--)if(y[I]!==E[q]){if(I!==1||q!==1)do if(I--,q--,0>q||y[I]!==E[q]){var J=`
`+y[I].replace(" at new "," at ");return e.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",e.displayName)),J}while(1<=I&&0<=q);break}}}finally{K=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?U(e):""}function fe(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=Y(e.type,!1),e;case 11:return e=Y(e.type.render,!1),e;case 1:return e=Y(e.type,!0),e;default:return""}}function me(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case H:return"Fragment";case z:return"Portal";case X:return"Profiler";case j:return"StrictMode";case W:return"Suspense";case re:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case $:return(e.displayName||"Context")+".Consumer";case V:return(e._context.displayName||"Context")+".Provider";case ee:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case pe:return r=e.displayName||null,r!==null?r:me(e.type)||"Memo";case ie:r=e._payload,e=e._init;try{return me(e(r))}catch{}}return null}function Se(e){var r=e.type;switch(e.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=r.render,e=e.displayName||e.name||"",r.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return me(r);case 8:return r===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function we(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function de(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function he(e){var r=de(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),h=""+e[r];if(!e.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var y=a.get,E=a.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return y.call(this)},set:function(I){h=""+I,E.call(this,I)}}),Object.defineProperty(e,r,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(I){h=""+I},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function Ze(e){e._valueTracker||(e._valueTracker=he(e))}function Fe(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var a=r.getValue(),h="";return e&&(h=de(e)?e.checked?"true":"false":e.value),e=h,e!==a?(r.setValue(e),!0):!1}function ge(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Le(e,r){var a=r.checked;return Z({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??e._wrapperState.initialChecked})}function We(e,r){var a=r.defaultValue==null?"":r.defaultValue,h=r.checked!=null?r.checked:r.defaultChecked;a=we(r.value!=null?r.value:a),e._wrapperState={initialChecked:h,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function lt(e,r){r=r.checked,r!=null&&T(e,"checked",r,!1)}function et(e,r){lt(e,r);var a=we(r.value),h=r.type;if(a!=null)h==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if(h==="submit"||h==="reset"){e.removeAttribute("value");return}r.hasOwnProperty("value")?Ue(e,r.type,a):r.hasOwnProperty("defaultValue")&&Ue(e,r.type,we(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(e.defaultChecked=!!r.defaultChecked)}function Ne(e,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var h=r.type;if(!(h!=="submit"&&h!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+e._wrapperState.initialValue,a||r===e.value||(e.value=r),e.defaultValue=r}a=e.name,a!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,a!==""&&(e.name=a)}function Ue(e,r,a){(r!=="number"||ge(e.ownerDocument)!==e)&&(a==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var ot=Array.isArray;function tt(e,r,a,h){if(e=e.options,r){r={};for(var y=0;y<a.length;y++)r["$"+a[y]]=!0;for(a=0;a<e.length;a++)y=r.hasOwnProperty("$"+e[a].value),e[a].selected!==y&&(e[a].selected=y),y&&h&&(e[a].defaultSelected=!0)}else{for(a=""+we(a),r=null,y=0;y<e.length;y++){if(e[y].value===a){e[y].selected=!0,h&&(e[y].defaultSelected=!0);return}r!==null||e[y].disabled||(r=e[y])}r!==null&&(r.selected=!0)}}function oe(e,r){if(r.dangerouslySetInnerHTML!=null)throw Error(i(91));return Z({},r,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Re(e,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(i(92));if(ot(a)){if(1<a.length)throw Error(i(93));a=a[0]}r=a}r==null&&(r=""),a=r}e._wrapperState={initialValue:we(a)}}function qe(e,r){var a=we(r.value),h=we(r.defaultValue);a!=null&&(a=""+a,a!==e.value&&(e.value=a),r.defaultValue==null&&e.defaultValue!==a&&(e.defaultValue=a)),h!=null&&(e.defaultValue=""+h)}function ve(e){var r=e.textContent;r===e._wrapperState.initialValue&&r!==""&&r!==null&&(e.value=r)}function Me(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yt(e,r){return e==null||e==="http://www.w3.org/1999/xhtml"?Me(r):e==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Pt,Nt=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,h,y){MSApp.execUnsafeLocalFunction(function(){return e(r,a,h,y)})}:e})(function(e,r){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=r;else{for(Pt=Pt||document.createElement("div"),Pt.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Pt.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;r.firstChild;)e.appendChild(r.firstChild)}});function Wt(e,r){if(r){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=r;return}}e.textContent=r}var Ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Et=["Webkit","ms","Moz","O"];Object.keys(Ft).forEach(function(e){Et.forEach(function(r){r=r+e.charAt(0).toUpperCase()+e.substring(1),Ft[r]=Ft[e]})});function An(e,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||Ft.hasOwnProperty(e)&&Ft[e]?(""+r).trim():r+"px"}function Cn(e,r){e=e.style;for(var a in r)if(r.hasOwnProperty(a)){var h=a.indexOf("--")===0,y=An(a,r[a],h);a==="float"&&(a="cssFloat"),h?e.setProperty(a,y):e[a]=y}}var ye=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pe(e,r){if(r){if(ye[e]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(i(137,e));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(i(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(i(61))}if(r.style!=null&&typeof r.style!="object")throw Error(i(62))}}function ze(e,r){if(e.indexOf("-")===-1)return typeof r.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mt=null;function ne(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _e=null,Ee=null,Oe=null;function st(e){if(e=xi(e)){if(typeof _e!="function")throw Error(i(280));var r=e.stateNode;r&&(r=Ns(r),_e(e.stateNode,e.type,r))}}function He(e){Ee?Oe?Oe.push(e):Oe=[e]:Ee=e}function kt(){if(Ee){var e=Ee,r=Oe;if(Oe=Ee=null,st(e),r)for(e=0;e<r.length;e++)st(r[e])}}function Ot(e,r){return e(r)}function qt(){}var Hn=!1;function gt(e,r,a){if(Hn)return e(r,a);Hn=!0;try{return Ot(e,r,a)}finally{Hn=!1,(Ee!==null||Oe!==null)&&(qt(),kt())}}function Lt(e,r){var a=e.stateNode;if(a===null)return null;var h=Ns(a);if(h===null)return null;a=h[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(e=e.type,h=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!h;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var Yn=!1;if(d)try{var St={};Object.defineProperty(St,"passive",{get:function(){Yn=!0}}),window.addEventListener("test",St,St),window.removeEventListener("test",St,St)}catch{Yn=!1}function Gt(e,r,a,h,y,E,I,q,J){var ue=Array.prototype.slice.call(arguments,3);try{r.apply(a,ue)}catch(ke){this.onError(ke)}}var Jt=!1,je=null,Ri=!1,ls=null,Pl={onError:function(e){Jt=!0,je=e}};function Tl(e,r,a,h,y,E,I,q,J){Jt=!1,je=null,Gt.apply(Pl,arguments)}function da(e,r,a,h,y,E,I,q,J){if(Tl.apply(this,arguments),Jt){if(Jt){var ue=je;Jt=!1,je=null}else throw Error(i(198));Ri||(Ri=!0,ls=ue)}}function Vr(e){var r=e,a=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,(r.flags&4098)!==0&&(a=r.return),e=r.return;while(e)}return r.tag===3?a:null}function si(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function fa(e){if(Vr(e)!==e)throw Error(i(188))}function Cd(e){var r=e.alternate;if(!r){if(r=Vr(e),r===null)throw Error(i(188));return r!==e?null:e}for(var a=e,h=r;;){var y=a.return;if(y===null)break;var E=y.alternate;if(E===null){if(h=y.return,h!==null){a=h;continue}break}if(y.child===E.child){for(E=y.child;E;){if(E===a)return fa(y),e;if(E===h)return fa(y),r;E=E.sibling}throw Error(i(188))}if(a.return!==h.return)a=y,h=E;else{for(var I=!1,q=y.child;q;){if(q===a){I=!0,a=y,h=E;break}if(q===h){I=!0,h=y,a=E;break}q=q.sibling}if(!I){for(q=E.child;q;){if(q===a){I=!0,a=E,h=y;break}if(q===h){I=!0,h=E,a=y;break}q=q.sibling}if(!I)throw Error(i(189))}}if(a.alternate!==h)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?e:r}function Dl(e){return e=Cd(e),e!==null?Rl(e):null}function Rl(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var r=Rl(e);if(r!==null)return r;e=e.sibling}return null}var Nl=s.unstable_scheduleCallback,ha=s.unstable_cancelCallback,Ed=s.unstable_shouldYield,cs=s.unstable_requestPaint,Kt=s.unstable_now,kd=s.unstable_getCurrentPriorityLevel,pa=s.unstable_ImmediatePriority,Fl=s.unstable_UserBlockingPriority,us=s.unstable_NormalPriority,ma=s.unstable_LowPriority,Ni=s.unstable_IdlePriority,yo=null,Xn=null;function _o(e){if(Xn&&typeof Xn.onCommitFiberRoot=="function")try{Xn.onCommitFiberRoot(yo,e,void 0,(e.current.flags&128)===128)}catch{}}var ft=Math.clz32?Math.clz32:Fi,Vt=Math.log,ds=Math.LN2;function Fi(e){return e>>>=0,e===0?32:31-(Vt(e)/ds|0)|0}var kr=64,Li=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function zt(e,r){var a=e.pendingLanes;if(a===0)return 0;var h=0,y=e.suspendedLanes,E=e.pingedLanes,I=a&268435455;if(I!==0){var q=I&~y;q!==0?h=ut(q):(E&=I,E!==0&&(h=ut(E)))}else I=a&~y,I!==0?h=ut(I):E!==0&&(h=ut(E));if(h===0)return 0;if(r!==0&&r!==h&&(r&y)===0&&(y=h&-h,E=r&-r,y>=E||y===16&&(E&4194240)!==0))return r;if((h&4)!==0&&(h|=a&16),r=e.entangledLanes,r!==0)for(e=e.entanglements,r&=h;0<r;)a=31-ft(r),y=1<<a,h|=e[a],r&=~y;return h}function ga(e,r){switch(e){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fs(e,r){for(var a=e.suspendedLanes,h=e.pingedLanes,y=e.expirationTimes,E=e.pendingLanes;0<E;){var I=31-ft(E),q=1<<I,J=y[I];J===-1?((q&a)===0||(q&h)!==0)&&(y[I]=ga(q,r)):J<=r&&(e.expiredLanes|=q),E&=~q}}function En(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ll(){var e=kr;return kr<<=1,(kr&4194240)===0&&(kr=64),e}function Mi(e){for(var r=[],a=0;31>a;a++)r.push(e);return r}function Jn(e,r,a){e.pendingLanes|=r,r!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,r=31-ft(r),e[r]=a}function en(e,r){var a=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;var h=e.eventTimes;for(e=e.expirationTimes;0<a;){var y=31-ft(a),E=1<<y;r[y]=0,h[y]=-1,e[y]=-1,a&=~E}}function Sr(e,r){var a=e.entangledLanes|=r;for(e=e.entanglements;a;){var h=31-ft(a),y=1<<h;y&r|e[h]&r&&(e[h]|=r),a&=~y}}var Ct=0;function Ii(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var hs,ai,ps,ms,wo,bo=!1,Oi=[],er=null,Br=null,dr=null,Co=new Map,at=new Map,an=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xa(e,r){switch(e){case"focusin":case"focusout":er=null;break;case"dragenter":case"dragleave":Br=null;break;case"mouseover":case"mouseout":dr=null;break;case"pointerover":case"pointerout":Co.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":at.delete(r.pointerId)}}function li(e,r,a,h,y,E){return e===null||e.nativeEvent!==E?(e={blockedOn:r,domEventName:a,eventSystemFlags:h,nativeEvent:E,targetContainers:[y]},r!==null&&(r=xi(r),r!==null&&ai(r)),e):(e.eventSystemFlags|=h,r=e.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),e)}function Aa(e,r,a,h,y){switch(r){case"focusin":return er=li(er,e,r,a,h,y),!0;case"dragenter":return Br=li(Br,e,r,a,h,y),!0;case"mouseover":return dr=li(dr,e,r,a,h,y),!0;case"pointerover":var E=y.pointerId;return Co.set(E,li(Co.get(E)||null,e,r,a,h,y)),!0;case"gotpointercapture":return E=y.pointerId,at.set(E,li(at.get(E)||null,e,r,a,h,y)),!0}return!1}function gs(e){var r=gi(e.target);if(r!==null){var a=Vr(r);if(a!==null){if(r=a.tag,r===13){if(r=si(a),r!==null){e.blockedOn=r,wo(e.priority,function(){ps(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fr(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var a=vs(e.domEventName,e.eventSystemFlags,r[0],e.nativeEvent);if(a===null){a=e.nativeEvent;var h=new a.constructor(a.type,a);mt=h,a.target.dispatchEvent(h),mt=null}else return r=xi(a),r!==null&&ai(r),e.blockedOn=a,!1;r.shift()}return!0}function xs(e,r,a){fr(e)&&a.delete(r)}function Eo(){bo=!1,er!==null&&fr(er)&&(er=null),Br!==null&&fr(Br)&&(Br=null),dr!==null&&fr(dr)&&(dr=null),Co.forEach(xs),at.forEach(xs)}function Qt(e,r){e.blockedOn===r&&(e.blockedOn=null,bo||(bo=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Eo)))}function tr(e){function r(y){return Qt(y,e)}if(0<Oi.length){Qt(Oi[0],e);for(var a=1;a<Oi.length;a++){var h=Oi[a];h.blockedOn===e&&(h.blockedOn=null)}}for(er!==null&&Qt(er,e),Br!==null&&Qt(Br,e),dr!==null&&Qt(dr,e),Co.forEach(r),at.forEach(r),a=0;a<an.length;a++)h=an[a],h.blockedOn===e&&(h.blockedOn=null);for(;0<an.length&&(a=an[0],a.blockedOn===null);)gs(a),a.blockedOn===null&&an.shift()}var ci=F.ReactCurrentBatchConfig,ko=!0;function Sd(e,r,a,h){var y=Ct,E=ci.transition;ci.transition=null;try{Ct=1,So(e,r,a,h)}finally{Ct=y,ci.transition=E}}function Ml(e,r,a,h){var y=Ct,E=ci.transition;ci.transition=null;try{Ct=4,So(e,r,a,h)}finally{Ct=y,ci.transition=E}}function So(e,r,a,h){if(ko){var y=vs(e,r,a,h);if(y===null)t(e,r,h,As,a),xa(e,h);else if(Aa(y,e,r,a,h))h.stopPropagation();else if(xa(e,h),r&4&&-1<Mt.indexOf(e)){for(;y!==null;){var E=xi(y);if(E!==null&&hs(E),E=vs(e,r,a,h),E===null&&t(e,r,h,As,a),E===y)break;y=E}y!==null&&h.stopPropagation()}else t(e,r,h,null,a)}}var As=null;function vs(e,r,a,h){if(As=null,e=ne(h),e=gi(e),e!==null)if(r=Vr(e),r===null)e=null;else if(a=r.tag,a===13){if(e=si(r),e!==null)return e;e=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null);return As=e,null}function _t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kd()){case pa:return 1;case Fl:return 4;case us:case ma:return 16;case Ni:return 536870912;default:return 16}default:return 16}}var Ur=null,Nn=null,Zr=null;function va(){if(Zr)return Zr;var e,r=Nn,a=r.length,h,y="value"in Ur?Ur.value:Ur.textContent,E=y.length;for(e=0;e<a&&r[e]===y[e];e++);var I=a-e;for(h=1;h<=I&&r[a-h]===y[E-h];h++);return Zr=y.slice(e,1<h?1-h:void 0)}function ys(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function ji(){return!0}function Il(){return!1}function kn(e){function r(a,h,y,E,I){this._reactName=a,this._targetInst=y,this.type=h,this.nativeEvent=E,this.target=I,this.currentTarget=null;for(var q in e)e.hasOwnProperty(q)&&(a=e[q],this[q]=a?a(E):E[q]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?ji:Il,this.isPropagationStopped=Il,this}return Z(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ji)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ji)},persist:function(){},isPersistent:ji}),r}var zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ya=kn(zi),ui=Z({},zi,{view:0,detail:0}),Bd=kn(ui),Vn,_a,Hi,nr=Z({},ui,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Hi&&(Hi&&e.type==="mousemove"?(Vn=e.screenX-Hi.screenX,_a=e.screenY-Hi.screenY):_a=Vn=0,Hi=e),Vn)},movementY:function(e){return"movementY"in e?e.movementY:_a}}),wa=kn(nr),Ol=Z({},nr,{dataTransfer:0}),ba=kn(Ol),Pd=Z({},ui,{relatedTarget:0}),_s=kn(Pd),jl=Z({},zi,{animationName:0,elapsedTime:0,pseudoElement:0}),Td=kn(jl),Dd=Z({},zi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ca=kn(Dd),Rd=Z({},zi,{data:0}),Ea=kn(Rd),zl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ws={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},di={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nd(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=di[e])?!!r[e]:!1}function fi(){return Nd}var Un=Z({},ui,{key:function(e){if(e.key){var r=zl[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=ys(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ws[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fi,charCode:function(e){return e.type==="keypress"?ys(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ys(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hl=kn(Un),Vl=Z({},nr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ul=kn(Vl),ka=Z({},ui,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fi}),Sa=kn(ka),Fd=Z({},zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ld=kn(Fd),Zl=Z({},nr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Md=kn(Zl),rr=[9,13,27,32],Wr=d&&"CompositionEvent"in window,Bo=null;d&&"documentMode"in document&&(Bo=document.documentMode);var Pr=d&&"TextEvent"in window&&!Bo,Wl=d&&(!Wr||Bo&&8<Bo&&11>=Bo),hi=" ",ql=!1;function Vi(e,r){switch(e){case"keyup":return rr.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ba(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Tr=!1;function Id(e,r){switch(e){case"compositionend":return Ba(r);case"keypress":return r.which!==32?null:(ql=!0,hi);case"textInput":return e=r.data,e===hi&&ql?null:e;default:return null}}function qr(e,r){if(Tr)return e==="compositionend"||!Wr&&Vi(e,r)?(e=va(),Zr=Nn=Ur=null,Tr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Wl&&r.locale!=="ko"?null:r.data;default:return null}}var bs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gl(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!bs[e.type]:r==="textarea"}function Cs(e,r,a,h){He(h),r=f(r,"onChange"),0<r.length&&(a=new ya("onChange","change",null,a,h),e.push({event:a,listeners:r}))}var Po=null,Fn=null;function Od(e){Ia(e,0)}function Dr(e){var r=Ai(e);if(Fe(r))return e}function jd(e,r){if(e==="change")return r}var hr=!1;if(d){var Ui;if(d){var Es="oninput"in document;if(!Es){var ks=document.createElement("div");ks.setAttribute("oninput","return;"),Es=typeof ks.oninput=="function"}Ui=Es}else Ui=!1;hr=Ui&&(!document.documentMode||9<document.documentMode)}function To(){Po&&(Po.detachEvent("onpropertychange",Ss),Fn=Po=null)}function Ss(e){if(e.propertyName==="value"&&Dr(Fn)){var r=[];Cs(r,Fn,e,ne(e)),gt(Od,r)}}function Bs(e,r,a){e==="focusin"?(To(),Po=r,Fn=a,Po.attachEvent("onpropertychange",Ss)):e==="focusout"&&To()}function Zi(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Dr(Fn)}function Ps(e,r){if(e==="click")return Dr(r)}function Pa(e,r){if(e==="input"||e==="change")return Dr(r)}function $l(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var ir=typeof Object.is=="function"?Object.is:$l;function Gr(e,r){if(ir(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var a=Object.keys(e),h=Object.keys(r);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var y=a[h];if(!g.call(r,y)||!ir(e[y],r[y]))return!1}return!0}function Kl(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ta(e,r){var a=Kl(e);e=0;for(var h;a;){if(a.nodeType===3){if(h=e+a.textContent.length,e<=r&&h>=r)return{node:a,offset:r-e};e=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Kl(a)}}function Ql(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?Ql(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function Da(){for(var e=window,r=ge();r instanceof e.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)e=r.contentWindow;else break;r=ge(e.document)}return r}function Ra(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}function pr(e){var r=Da(),a=e.focusedElem,h=e.selectionRange;if(r!==a&&a&&a.ownerDocument&&Ql(a.ownerDocument.documentElement,a)){if(h!==null&&Ra(a)){if(r=h.start,e=h.end,e===void 0&&(e=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(e,a.value.length);else if(e=(r=a.ownerDocument||document)&&r.defaultView||window,e.getSelection){e=e.getSelection();var y=a.textContent.length,E=Math.min(h.start,y);h=h.end===void 0?E:Math.min(h.end,y),!e.extend&&E>h&&(y=h,h=E,E=y),y=Ta(a,E);var I=Ta(a,h);y&&I&&(e.rangeCount!==1||e.anchorNode!==y.node||e.anchorOffset!==y.offset||e.focusNode!==I.node||e.focusOffset!==I.offset)&&(r=r.createRange(),r.setStart(y.node,y.offset),e.removeAllRanges(),E>h?(e.addRange(r),e.extend(I.node,I.offset)):(r.setEnd(I.node,I.offset),e.addRange(r)))}}for(r=[],e=a;e=e.parentNode;)e.nodeType===1&&r.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)e=r[a],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ts=d&&"documentMode"in document&&11>=document.documentMode,Wi=null,qi=null,Do=null,Ds=!1;function Yl(e,r,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ds||Wi==null||Wi!==ge(h)||(h=Wi,"selectionStart"in h&&Ra(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Do&&Gr(Do,h)||(Do=h,h=f(qi,"onSelect"),0<h.length&&(r=new ya("onSelect","select",null,r,a),e.push({event:r,listeners:h}),r.target=Wi)))}function $r(e,r){var a={};return a[e.toLowerCase()]=r.toLowerCase(),a["Webkit"+e]="webkit"+r,a["Moz"+e]="moz"+r,a}var Gi={animationend:$r("Animation","AnimationEnd"),animationiteration:$r("Animation","AnimationIteration"),animationstart:$r("Animation","AnimationStart"),transitionend:$r("Transition","TransitionEnd")},Kr={},Na={};d&&(Na=document.createElement("div").style,"AnimationEvent"in window||(delete Gi.animationend.animation,delete Gi.animationiteration.animation,delete Gi.animationstart.animation),"TransitionEvent"in window||delete Gi.transitionend.transition);function Ro(e){if(Kr[e])return Kr[e];if(!Gi[e])return e;var r=Gi[e],a;for(a in r)if(r.hasOwnProperty(a)&&a in Na)return Kr[e]=r[a];return e}var Xl=Ro("animationend"),mr=Ro("animationiteration"),Fa=Ro("animationstart"),La=Ro("transitionend"),$i=new Map,Jl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function or(e,r){$i.set(e,r),u(r,[e])}for(var pi=0;pi<Jl.length;pi++){var Rs=Jl[pi],ec=Rs.toLowerCase(),zd=Rs[0].toUpperCase()+Rs.slice(1);or(ec,"on"+zd)}or(Xl,"onAnimationEnd"),or(mr,"onAnimationIteration"),or(Fa,"onAnimationStart"),or("dblclick","onDoubleClick"),or("focusin","onFocus"),or("focusout","onBlur"),or(La,"onTransitionEnd"),p("onMouseEnter",["mouseout","mouseover"]),p("onMouseLeave",["mouseout","mouseover"]),p("onPointerEnter",["pointerout","pointerover"]),p("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ki="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tc=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ki));function Ma(e,r,a){var h=e.type||"unknown-event";e.currentTarget=a,da(h,r,void 0,e),e.currentTarget=null}function Ia(e,r){r=(r&4)!==0;for(var a=0;a<e.length;a++){var h=e[a],y=h.event;h=h.listeners;e:{var E=void 0;if(r)for(var I=h.length-1;0<=I;I--){var q=h[I],J=q.instance,ue=q.currentTarget;if(q=q.listener,J!==E&&y.isPropagationStopped())break e;Ma(y,q,ue),E=J}else for(I=0;I<h.length;I++){if(q=h[I],J=q.instance,ue=q.currentTarget,q=q.listener,J!==E&&y.isPropagationStopped())break e;Ma(y,q,ue),E=J}}}if(Ri)throw e=ls,Ri=!1,ls=null,e}function It(e,r){var a=r[Ji];a===void 0&&(a=r[Ji]=new Set);var h=e+"__bubble";a.has(h)||(nc(r,e,2,!1),a.add(h))}function Oa(e,r,a){var h=0;r&&(h|=4),nc(a,e,h,r)}var No="_reactListening"+Math.random().toString(36).slice(2);function Qi(e){if(!e[No]){e[No]=!0,l.forEach(function(a){a!=="selectionchange"&&(tc.has(a)||Oa(a,!1,e),Oa(a,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[No]||(r[No]=!0,Oa("selectionchange",!1,r))}}function nc(e,r,a,h){switch(_t(r)){case 1:var y=Sd;break;case 4:y=Ml;break;default:y=So}a=y.bind(null,r,a,e),y=void 0,!Yn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),h?y!==void 0?e.addEventListener(r,a,{capture:!0,passive:y}):e.addEventListener(r,a,!0):y!==void 0?e.addEventListener(r,a,{passive:y}):e.addEventListener(r,a,!1)}function t(e,r,a,h,y){var E=h;if((r&1)===0&&(r&2)===0&&h!==null)e:for(;;){if(h===null)return;var I=h.tag;if(I===3||I===4){var q=h.stateNode.containerInfo;if(q===y||q.nodeType===8&&q.parentNode===y)break;if(I===4)for(I=h.return;I!==null;){var J=I.tag;if((J===3||J===4)&&(J=I.stateNode.containerInfo,J===y||J.nodeType===8&&J.parentNode===y))return;I=I.return}for(;q!==null;){if(I=gi(q),I===null)return;if(J=I.tag,J===5||J===6){h=E=I;continue e}q=q.parentNode}}h=h.return}gt(function(){var ue=E,ke=ne(a),Be=[];e:{var Ce=$i.get(e);if(Ce!==void 0){var Ve=ya,$e=e;switch(e){case"keypress":if(ys(a)===0)break e;case"keydown":case"keyup":Ve=Hl;break;case"focusin":$e="focus",Ve=_s;break;case"focusout":$e="blur",Ve=_s;break;case"beforeblur":case"afterblur":Ve=_s;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ve=wa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ve=ba;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ve=Sa;break;case Xl:case mr:case Fa:Ve=Td;break;case La:Ve=Ld;break;case"scroll":Ve=Bd;break;case"wheel":Ve=Md;break;case"copy":case"cut":case"paste":Ve=Ca;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ve=Ul}var Xe=(r&4)!==0,nn=!Xe&&e==="scroll",ae=Xe?Ce!==null?Ce+"Capture":null:Ce;Xe=[];for(var te=ue,le;te!==null;){le=te;var De=le.stateNode;if(le.tag===5&&De!==null&&(le=De,ae!==null&&(De=Lt(te,ae),De!=null&&Xe.push(o(te,De,le)))),nn)break;te=te.return}0<Xe.length&&(Ce=new Ve(Ce,$e,null,a,ke),Be.push({event:Ce,listeners:Xe}))}}if((r&7)===0){e:{if(Ce=e==="mouseover"||e==="pointerover",Ve=e==="mouseout"||e==="pointerout",Ce&&a!==mt&&($e=a.relatedTarget||a.fromElement)&&(gi($e)||$e[Dt]))break e;if((Ve||Ce)&&(Ce=ke.window===ke?ke:(Ce=ke.ownerDocument)?Ce.defaultView||Ce.parentWindow:window,Ve?($e=a.relatedTarget||a.toElement,Ve=ue,$e=$e?gi($e):null,$e!==null&&(nn=Vr($e),$e!==nn||$e.tag!==5&&$e.tag!==6)&&($e=null)):(Ve=null,$e=ue),Ve!==$e)){if(Xe=wa,De="onMouseLeave",ae="onMouseEnter",te="mouse",(e==="pointerout"||e==="pointerover")&&(Xe=Ul,De="onPointerLeave",ae="onPointerEnter",te="pointer"),nn=Ve==null?Ce:Ai(Ve),le=$e==null?Ce:Ai($e),Ce=new Xe(De,te+"leave",Ve,a,ke),Ce.target=nn,Ce.relatedTarget=le,De=null,gi(ke)===ue&&(Xe=new Xe(ae,te+"enter",$e,a,ke),Xe.target=le,Xe.relatedTarget=nn,De=Xe),nn=De,Ve&&$e)t:{for(Xe=Ve,ae=$e,te=0,le=Xe;le;le=v(le))te++;for(le=0,De=ae;De;De=v(De))le++;for(;0<te-le;)Xe=v(Xe),te--;for(;0<le-te;)ae=v(ae),le--;for(;te--;){if(Xe===ae||ae!==null&&Xe===ae.alternate)break t;Xe=v(Xe),ae=v(ae)}Xe=null}else Xe=null;Ve!==null&&P(Be,Ce,Ve,Xe,!1),$e!==null&&nn!==null&&P(Be,nn,$e,Xe,!0)}}e:{if(Ce=ue?Ai(ue):window,Ve=Ce.nodeName&&Ce.nodeName.toLowerCase(),Ve==="select"||Ve==="input"&&Ce.type==="file")var Je=jd;else if(Gl(Ce))if(hr)Je=Pa;else{Je=Zi;var rt=Bs}else(Ve=Ce.nodeName)&&Ve.toLowerCase()==="input"&&(Ce.type==="checkbox"||Ce.type==="radio")&&(Je=Ps);if(Je&&(Je=Je(e,ue))){Cs(Be,Je,a,ke);break e}rt&&rt(e,Ce,ue),e==="focusout"&&(rt=Ce._wrapperState)&&rt.controlled&&Ce.type==="number"&&Ue(Ce,"number",Ce.value)}switch(rt=ue?Ai(ue):window,e){case"focusin":(Gl(rt)||rt.contentEditable==="true")&&(Wi=rt,qi=ue,Do=null);break;case"focusout":Do=qi=Wi=null;break;case"mousedown":Ds=!0;break;case"contextmenu":case"mouseup":case"dragend":Ds=!1,Yl(Be,a,ke);break;case"selectionchange":if(Ts)break;case"keydown":case"keyup":Yl(Be,a,ke)}var it;if(Wr)e:{switch(e){case"compositionstart":var ct="onCompositionStart";break e;case"compositionend":ct="onCompositionEnd";break e;case"compositionupdate":ct="onCompositionUpdate";break e}ct=void 0}else Tr?Vi(e,a)&&(ct="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(ct="onCompositionStart");ct&&(Wl&&a.locale!=="ko"&&(Tr||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&Tr&&(it=va()):(Ur=ke,Nn="value"in Ur?Ur.value:Ur.textContent,Tr=!0)),rt=f(ue,ct),0<rt.length&&(ct=new Ea(ct,e,null,a,ke),Be.push({event:ct,listeners:rt}),it?ct.data=it:(it=Ba(a),it!==null&&(ct.data=it)))),(it=Pr?Id(e,a):qr(e,a))&&(ue=f(ue,"onBeforeInput"),0<ue.length&&(ke=new Ea("onBeforeInput","beforeinput",null,a,ke),Be.push({event:ke,listeners:ue}),ke.data=it))}Ia(Be,r)})}function o(e,r,a){return{instance:e,listener:r,currentTarget:a}}function f(e,r){for(var a=r+"Capture",h=[];e!==null;){var y=e,E=y.stateNode;y.tag===5&&E!==null&&(y=E,E=Lt(e,a),E!=null&&h.unshift(o(e,E,y)),E=Lt(e,r),E!=null&&h.push(o(e,E,y))),e=e.return}return h}function v(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function P(e,r,a,h,y){for(var E=r._reactName,I=[];a!==null&&a!==h;){var q=a,J=q.alternate,ue=q.stateNode;if(J!==null&&J===h)break;q.tag===5&&ue!==null&&(q=ue,y?(J=Lt(a,E),J!=null&&I.unshift(o(a,J,q))):y||(J=Lt(a,E),J!=null&&I.push(o(a,J,q)))),a=a.return}I.length!==0&&e.push({event:r,listeners:I})}var O=/\r\n?/g,Q=/\u0000|\uFFFD/g;function se(e){return(typeof e=="string"?e:""+e).replace(O,`
`).replace(Q,"")}function ce(e,r,a){if(r=se(r),se(e)!==r&&a)throw Error(i(425))}function be(){}var Ie=null,nt=null;function ht(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ln=typeof setTimeout=="function"?setTimeout:void 0,on=typeof clearTimeout=="function"?clearTimeout:void 0,Ln=typeof Promise=="function"?Promise:void 0,Sn=typeof queueMicrotask=="function"?queueMicrotask:typeof Ln<"u"?function(e){return Ln.resolve(null).then(e).catch(Yi)}:ln;function Yi(e){setTimeout(function(){throw e})}function ja(e,r){var a=r,h=0;do{var y=a.nextSibling;if(e.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"){if(h===0){e.removeChild(y),tr(r);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=y}while(a);tr(r)}function Qr(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return e}function rc(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return e;r--}else a==="/$"&&r++}e=e.previousSibling}return null}var mi=Math.random().toString(36).slice(2),gr="__reactFiber$"+mi,Xi="__reactProps$"+mi,Dt="__reactContainer$"+mi,Ji="__reactEvents$"+mi,Hd="__reactListeners$"+mi,Vd="__reactHandles$"+mi;function gi(e){var r=e[gr];if(r)return r;for(var a=e.parentNode;a;){if(r=a[Dt]||a[gr]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(e=rc(e);e!==null;){if(a=e[gr])return a;e=rc(e)}return r}e=a,a=e.parentNode}return null}function xi(e){return e=e[gr]||e[Dt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ai(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(i(33))}function Ns(e){return e[Xi]||null}var Ud=[],Fs=-1;function eo(e){return{current:e}}function Ut(e){0>Fs||(e.current=Ud[Fs],Ud[Fs]=null,Fs--)}function Ht(e,r){Fs++,Ud[Fs]=e.current,e.current=r}var to={},Bn=eo(to),Zn=eo(!1),Fo=to;function Ls(e,r){var a=e.type.contextTypes;if(!a)return to;var h=e.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===r)return h.__reactInternalMemoizedMaskedChildContext;var y={},E;for(E in a)y[E]=r[E];return h&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=y),y}function Wn(e){return e=e.childContextTypes,e!=null}function ic(){Ut(Zn),Ut(Bn)}function gh(e,r,a){if(Bn.current!==to)throw Error(i(168));Ht(Bn,r),Ht(Zn,a)}function xh(e,r,a){var h=e.stateNode;if(r=r.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var y in h)if(!(y in r))throw Error(i(108,Se(e)||"Unknown",y));return Z({},a,h)}function oc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||to,Fo=Bn.current,Ht(Bn,e),Ht(Zn,Zn.current),!0}function Ah(e,r,a){var h=e.stateNode;if(!h)throw Error(i(169));a?(e=xh(e,r,Fo),h.__reactInternalMemoizedMergedChildContext=e,Ut(Zn),Ut(Bn),Ht(Bn,e)):Ut(Zn),Ht(Zn,a)}var vi=null,sc=!1,Zd=!1;function vh(e){vi===null?vi=[e]:vi.push(e)}function Fv(e){sc=!0,vh(e)}function no(){if(!Zd&&vi!==null){Zd=!0;var e=0,r=Ct;try{var a=vi;for(Ct=1;e<a.length;e++){var h=a[e];do h=h(!0);while(h!==null)}vi=null,sc=!1}catch(y){throw vi!==null&&(vi=vi.slice(e+1)),Nl(pa,no),y}finally{Ct=r,Zd=!1}}return null}var Ms=[],Is=0,ac=null,lc=0,xr=[],Ar=0,Lo=null,yi=1,_i="";function Mo(e,r){Ms[Is++]=lc,Ms[Is++]=ac,ac=e,lc=r}function yh(e,r,a){xr[Ar++]=yi,xr[Ar++]=_i,xr[Ar++]=Lo,Lo=e;var h=yi;e=_i;var y=32-ft(h)-1;h&=~(1<<y),a+=1;var E=32-ft(r)+y;if(30<E){var I=y-y%5;E=(h&(1<<I)-1).toString(32),h>>=I,y-=I,yi=1<<32-ft(r)+y|a<<y|h,_i=E+e}else yi=1<<E|a<<y|h,_i=e}function Wd(e){e.return!==null&&(Mo(e,1),yh(e,1,0))}function qd(e){for(;e===ac;)ac=Ms[--Is],Ms[Is]=null,lc=Ms[--Is],Ms[Is]=null;for(;e===Lo;)Lo=xr[--Ar],xr[Ar]=null,_i=xr[--Ar],xr[Ar]=null,yi=xr[--Ar],xr[Ar]=null}var sr=null,ar=null,$t=!1,Rr=null;function _h(e,r){var a=wr(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=e,r=e.deletions,r===null?(e.deletions=[a],e.flags|=16):r.push(a)}function wh(e,r){switch(e.tag){case 5:var a=e.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(e.stateNode=r,sr=e,ar=Qr(r.firstChild),!0):!1;case 6:return r=e.pendingProps===""||r.nodeType!==3?null:r,r!==null?(e.stateNode=r,sr=e,ar=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=Lo!==null?{id:yi,overflow:_i}:null,e.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=wr(18,null,null,0),a.stateNode=r,a.return=e,e.child=a,sr=e,ar=null,!0):!1;default:return!1}}function Gd(e){return(e.mode&1)!==0&&(e.flags&128)===0}function $d(e){if($t){var r=ar;if(r){var a=r;if(!wh(e,r)){if(Gd(e))throw Error(i(418));r=Qr(a.nextSibling);var h=sr;r&&wh(e,r)?_h(h,a):(e.flags=e.flags&-4097|2,$t=!1,sr=e)}}else{if(Gd(e))throw Error(i(418));e.flags=e.flags&-4097|2,$t=!1,sr=e}}}function bh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;sr=e}function cc(e){if(e!==sr)return!1;if(!$t)return bh(e),$t=!0,!1;var r;if((r=e.tag!==3)&&!(r=e.tag!==5)&&(r=e.type,r=r!=="head"&&r!=="body"&&!ht(e.type,e.memoizedProps)),r&&(r=ar)){if(Gd(e))throw Ch(),Error(i(418));for(;r;)_h(e,r),r=Qr(r.nextSibling)}if(bh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,r=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"){if(r===0){ar=Qr(e.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}e=e.nextSibling}ar=null}}else ar=sr?Qr(e.stateNode.nextSibling):null;return!0}function Ch(){for(var e=ar;e;)e=Qr(e.nextSibling)}function Os(){ar=sr=null,$t=!1}function Kd(e){Rr===null?Rr=[e]:Rr.push(e)}var Lv=F.ReactCurrentBatchConfig;function za(e,r,a){if(e=a.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(i(309));var h=a.stateNode}if(!h)throw Error(i(147,e));var y=h,E=""+e;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===E?r.ref:(r=function(I){var q=y.refs;I===null?delete q[E]:q[E]=I},r._stringRef=E,r)}if(typeof e!="string")throw Error(i(284));if(!a._owner)throw Error(i(290,e))}return e}function uc(e,r){throw e=Object.prototype.toString.call(r),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}function Eh(e){var r=e._init;return r(e._payload)}function kh(e){function r(ae,te){if(e){var le=ae.deletions;le===null?(ae.deletions=[te],ae.flags|=16):le.push(te)}}function a(ae,te){if(!e)return null;for(;te!==null;)r(ae,te),te=te.sibling;return null}function h(ae,te){for(ae=new Map;te!==null;)te.key!==null?ae.set(te.key,te):ae.set(te.index,te),te=te.sibling;return ae}function y(ae,te){return ae=uo(ae,te),ae.index=0,ae.sibling=null,ae}function E(ae,te,le){return ae.index=le,e?(le=ae.alternate,le!==null?(le=le.index,le<te?(ae.flags|=2,te):le):(ae.flags|=2,te)):(ae.flags|=1048576,te)}function I(ae){return e&&ae.alternate===null&&(ae.flags|=2),ae}function q(ae,te,le,De){return te===null||te.tag!==6?(te=Hf(le,ae.mode,De),te.return=ae,te):(te=y(te,le),te.return=ae,te)}function J(ae,te,le,De){var Je=le.type;return Je===H?ke(ae,te,le.props.children,De,le.key):te!==null&&(te.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===ie&&Eh(Je)===te.type)?(De=y(te,le.props),De.ref=za(ae,te,le),De.return=ae,De):(De=Fc(le.type,le.key,le.props,null,ae.mode,De),De.ref=za(ae,te,le),De.return=ae,De)}function ue(ae,te,le,De){return te===null||te.tag!==4||te.stateNode.containerInfo!==le.containerInfo||te.stateNode.implementation!==le.implementation?(te=Vf(le,ae.mode,De),te.return=ae,te):(te=y(te,le.children||[]),te.return=ae,te)}function ke(ae,te,le,De,Je){return te===null||te.tag!==7?(te=Zo(le,ae.mode,De,Je),te.return=ae,te):(te=y(te,le),te.return=ae,te)}function Be(ae,te,le){if(typeof te=="string"&&te!==""||typeof te=="number")return te=Hf(""+te,ae.mode,le),te.return=ae,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case M:return le=Fc(te.type,te.key,te.props,null,ae.mode,le),le.ref=za(ae,null,te),le.return=ae,le;case z:return te=Vf(te,ae.mode,le),te.return=ae,te;case ie:var De=te._init;return Be(ae,De(te._payload),le)}if(ot(te)||xe(te))return te=Zo(te,ae.mode,le,null),te.return=ae,te;uc(ae,te)}return null}function Ce(ae,te,le,De){var Je=te!==null?te.key:null;if(typeof le=="string"&&le!==""||typeof le=="number")return Je!==null?null:q(ae,te,""+le,De);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case M:return le.key===Je?J(ae,te,le,De):null;case z:return le.key===Je?ue(ae,te,le,De):null;case ie:return Je=le._init,Ce(ae,te,Je(le._payload),De)}if(ot(le)||xe(le))return Je!==null?null:ke(ae,te,le,De,null);uc(ae,le)}return null}function Ve(ae,te,le,De,Je){if(typeof De=="string"&&De!==""||typeof De=="number")return ae=ae.get(le)||null,q(te,ae,""+De,Je);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case M:return ae=ae.get(De.key===null?le:De.key)||null,J(te,ae,De,Je);case z:return ae=ae.get(De.key===null?le:De.key)||null,ue(te,ae,De,Je);case ie:var rt=De._init;return Ve(ae,te,le,rt(De._payload),Je)}if(ot(De)||xe(De))return ae=ae.get(le)||null,ke(te,ae,De,Je,null);uc(te,De)}return null}function $e(ae,te,le,De){for(var Je=null,rt=null,it=te,ct=te=0,mn=null;it!==null&&ct<le.length;ct++){it.index>ct?(mn=it,it=null):mn=it.sibling;var Tt=Ce(ae,it,le[ct],De);if(Tt===null){it===null&&(it=mn);break}e&&it&&Tt.alternate===null&&r(ae,it),te=E(Tt,te,ct),rt===null?Je=Tt:rt.sibling=Tt,rt=Tt,it=mn}if(ct===le.length)return a(ae,it),$t&&Mo(ae,ct),Je;if(it===null){for(;ct<le.length;ct++)it=Be(ae,le[ct],De),it!==null&&(te=E(it,te,ct),rt===null?Je=it:rt.sibling=it,rt=it);return $t&&Mo(ae,ct),Je}for(it=h(ae,it);ct<le.length;ct++)mn=Ve(it,ae,ct,le[ct],De),mn!==null&&(e&&mn.alternate!==null&&it.delete(mn.key===null?ct:mn.key),te=E(mn,te,ct),rt===null?Je=mn:rt.sibling=mn,rt=mn);return e&&it.forEach(function(fo){return r(ae,fo)}),$t&&Mo(ae,ct),Je}function Xe(ae,te,le,De){var Je=xe(le);if(typeof Je!="function")throw Error(i(150));if(le=Je.call(le),le==null)throw Error(i(151));for(var rt=Je=null,it=te,ct=te=0,mn=null,Tt=le.next();it!==null&&!Tt.done;ct++,Tt=le.next()){it.index>ct?(mn=it,it=null):mn=it.sibling;var fo=Ce(ae,it,Tt.value,De);if(fo===null){it===null&&(it=mn);break}e&&it&&fo.alternate===null&&r(ae,it),te=E(fo,te,ct),rt===null?Je=fo:rt.sibling=fo,rt=fo,it=mn}if(Tt.done)return a(ae,it),$t&&Mo(ae,ct),Je;if(it===null){for(;!Tt.done;ct++,Tt=le.next())Tt=Be(ae,Tt.value,De),Tt!==null&&(te=E(Tt,te,ct),rt===null?Je=Tt:rt.sibling=Tt,rt=Tt);return $t&&Mo(ae,ct),Je}for(it=h(ae,it);!Tt.done;ct++,Tt=le.next())Tt=Ve(it,ae,ct,Tt.value,De),Tt!==null&&(e&&Tt.alternate!==null&&it.delete(Tt.key===null?ct:Tt.key),te=E(Tt,te,ct),rt===null?Je=Tt:rt.sibling=Tt,rt=Tt);return e&&it.forEach(function(py){return r(ae,py)}),$t&&Mo(ae,ct),Je}function nn(ae,te,le,De){if(typeof le=="object"&&le!==null&&le.type===H&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case M:e:{for(var Je=le.key,rt=te;rt!==null;){if(rt.key===Je){if(Je=le.type,Je===H){if(rt.tag===7){a(ae,rt.sibling),te=y(rt,le.props.children),te.return=ae,ae=te;break e}}else if(rt.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===ie&&Eh(Je)===rt.type){a(ae,rt.sibling),te=y(rt,le.props),te.ref=za(ae,rt,le),te.return=ae,ae=te;break e}a(ae,rt);break}else r(ae,rt);rt=rt.sibling}le.type===H?(te=Zo(le.props.children,ae.mode,De,le.key),te.return=ae,ae=te):(De=Fc(le.type,le.key,le.props,null,ae.mode,De),De.ref=za(ae,te,le),De.return=ae,ae=De)}return I(ae);case z:e:{for(rt=le.key;te!==null;){if(te.key===rt)if(te.tag===4&&te.stateNode.containerInfo===le.containerInfo&&te.stateNode.implementation===le.implementation){a(ae,te.sibling),te=y(te,le.children||[]),te.return=ae,ae=te;break e}else{a(ae,te);break}else r(ae,te);te=te.sibling}te=Vf(le,ae.mode,De),te.return=ae,ae=te}return I(ae);case ie:return rt=le._init,nn(ae,te,rt(le._payload),De)}if(ot(le))return $e(ae,te,le,De);if(xe(le))return Xe(ae,te,le,De);uc(ae,le)}return typeof le=="string"&&le!==""||typeof le=="number"?(le=""+le,te!==null&&te.tag===6?(a(ae,te.sibling),te=y(te,le),te.return=ae,ae=te):(a(ae,te),te=Hf(le,ae.mode,De),te.return=ae,ae=te),I(ae)):a(ae,te)}return nn}var js=kh(!0),Sh=kh(!1),dc=eo(null),fc=null,zs=null,Qd=null;function Yd(){Qd=zs=fc=null}function Xd(e){var r=dc.current;Ut(dc),e._currentValue=r}function Jd(e,r,a){for(;e!==null;){var h=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,h!==null&&(h.childLanes|=r)):h!==null&&(h.childLanes&r)!==r&&(h.childLanes|=r),e===a)break;e=e.return}}function Hs(e,r){fc=e,Qd=zs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&r)!==0&&(qn=!0),e.firstContext=null)}function vr(e){var r=e._currentValue;if(Qd!==e)if(e={context:e,memoizedValue:r,next:null},zs===null){if(fc===null)throw Error(i(308));zs=e,fc.dependencies={lanes:0,firstContext:e}}else zs=zs.next=e;return r}var Io=null;function ef(e){Io===null?Io=[e]:Io.push(e)}function Bh(e,r,a,h){var y=r.interleaved;return y===null?(a.next=a,ef(r)):(a.next=y.next,y.next=a),r.interleaved=a,wi(e,h)}function wi(e,r){e.lanes|=r;var a=e.alternate;for(a!==null&&(a.lanes|=r),a=e,e=e.return;e!==null;)e.childLanes|=r,a=e.alternate,a!==null&&(a.childLanes|=r),a=e,e=e.return;return a.tag===3?a.stateNode:null}var ro=!1;function tf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ph(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bi(e,r){return{eventTime:e,lane:r,tag:0,payload:null,callback:null,next:null}}function io(e,r,a){var h=e.updateQueue;if(h===null)return null;if(h=h.shared,(Bt&2)!==0){var y=h.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),h.pending=r,wi(e,a)}return y=h.interleaved,y===null?(r.next=r,ef(h)):(r.next=y.next,y.next=r),h.interleaved=r,wi(e,a)}function hc(e,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var h=r.lanes;h&=e.pendingLanes,a|=h,r.lanes=a,Sr(e,a)}}function Th(e,r){var a=e.updateQueue,h=e.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var y=null,E=null;if(a=a.firstBaseUpdate,a!==null){do{var I={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};E===null?y=E=I:E=E.next=I,a=a.next}while(a!==null);E===null?y=E=r:E=E.next=r}else y=E=r;a={baseState:h.baseState,firstBaseUpdate:y,lastBaseUpdate:E,shared:h.shared,effects:h.effects},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=r:e.next=r,a.lastBaseUpdate=r}function pc(e,r,a,h){var y=e.updateQueue;ro=!1;var E=y.firstBaseUpdate,I=y.lastBaseUpdate,q=y.shared.pending;if(q!==null){y.shared.pending=null;var J=q,ue=J.next;J.next=null,I===null?E=ue:I.next=ue,I=J;var ke=e.alternate;ke!==null&&(ke=ke.updateQueue,q=ke.lastBaseUpdate,q!==I&&(q===null?ke.firstBaseUpdate=ue:q.next=ue,ke.lastBaseUpdate=J))}if(E!==null){var Be=y.baseState;I=0,ke=ue=J=null,q=E;do{var Ce=q.lane,Ve=q.eventTime;if((h&Ce)===Ce){ke!==null&&(ke=ke.next={eventTime:Ve,lane:0,tag:q.tag,payload:q.payload,callback:q.callback,next:null});e:{var $e=e,Xe=q;switch(Ce=r,Ve=a,Xe.tag){case 1:if($e=Xe.payload,typeof $e=="function"){Be=$e.call(Ve,Be,Ce);break e}Be=$e;break e;case 3:$e.flags=$e.flags&-65537|128;case 0:if($e=Xe.payload,Ce=typeof $e=="function"?$e.call(Ve,Be,Ce):$e,Ce==null)break e;Be=Z({},Be,Ce);break e;case 2:ro=!0}}q.callback!==null&&q.lane!==0&&(e.flags|=64,Ce=y.effects,Ce===null?y.effects=[q]:Ce.push(q))}else Ve={eventTime:Ve,lane:Ce,tag:q.tag,payload:q.payload,callback:q.callback,next:null},ke===null?(ue=ke=Ve,J=Be):ke=ke.next=Ve,I|=Ce;if(q=q.next,q===null){if(q=y.shared.pending,q===null)break;Ce=q,q=Ce.next,Ce.next=null,y.lastBaseUpdate=Ce,y.shared.pending=null}}while(!0);if(ke===null&&(J=Be),y.baseState=J,y.firstBaseUpdate=ue,y.lastBaseUpdate=ke,r=y.shared.interleaved,r!==null){y=r;do I|=y.lane,y=y.next;while(y!==r)}else E===null&&(y.shared.lanes=0);zo|=I,e.lanes=I,e.memoizedState=Be}}function Dh(e,r,a){if(e=r.effects,r.effects=null,e!==null)for(r=0;r<e.length;r++){var h=e[r],y=h.callback;if(y!==null){if(h.callback=null,h=a,typeof y!="function")throw Error(i(191,y));y.call(h)}}}var Ha={},Yr=eo(Ha),Va=eo(Ha),Ua=eo(Ha);function Oo(e){if(e===Ha)throw Error(i(174));return e}function nf(e,r){switch(Ht(Ua,r),Ht(Va,e),Ht(Yr,Ha),e=r.nodeType,e){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:yt(null,"");break;default:e=e===8?r.parentNode:r,r=e.namespaceURI||null,e=e.tagName,r=yt(r,e)}Ut(Yr),Ht(Yr,r)}function Vs(){Ut(Yr),Ut(Va),Ut(Ua)}function Rh(e){Oo(Ua.current);var r=Oo(Yr.current),a=yt(r,e.type);r!==a&&(Ht(Va,e),Ht(Yr,a))}function rf(e){Va.current===e&&(Ut(Yr),Ut(Va))}var Yt=eo(0);function mc(e){for(var r=e;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var of=[];function sf(){for(var e=0;e<of.length;e++)of[e]._workInProgressVersionPrimary=null;of.length=0}var gc=F.ReactCurrentDispatcher,af=F.ReactCurrentBatchConfig,jo=0,Xt=null,cn=null,hn=null,xc=!1,Za=!1,Wa=0,Mv=0;function Pn(){throw Error(i(321))}function lf(e,r){if(r===null)return!1;for(var a=0;a<r.length&&a<e.length;a++)if(!ir(e[a],r[a]))return!1;return!0}function cf(e,r,a,h,y,E){if(jo=E,Xt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,gc.current=e===null||e.memoizedState===null?zv:Hv,e=a(h,y),Za){E=0;do{if(Za=!1,Wa=0,25<=E)throw Error(i(301));E+=1,hn=cn=null,r.updateQueue=null,gc.current=Vv,e=a(h,y)}while(Za)}if(gc.current=yc,r=cn!==null&&cn.next!==null,jo=0,hn=cn=Xt=null,xc=!1,r)throw Error(i(300));return e}function uf(){var e=Wa!==0;return Wa=0,e}function Xr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?Xt.memoizedState=hn=e:hn=hn.next=e,hn}function yr(){if(cn===null){var e=Xt.alternate;e=e!==null?e.memoizedState:null}else e=cn.next;var r=hn===null?Xt.memoizedState:hn.next;if(r!==null)hn=r,cn=e;else{if(e===null)throw Error(i(310));cn=e,e={memoizedState:cn.memoizedState,baseState:cn.baseState,baseQueue:cn.baseQueue,queue:cn.queue,next:null},hn===null?Xt.memoizedState=hn=e:hn=hn.next=e}return hn}function qa(e,r){return typeof r=="function"?r(e):r}function df(e){var r=yr(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=e;var h=cn,y=h.baseQueue,E=a.pending;if(E!==null){if(y!==null){var I=y.next;y.next=E.next,E.next=I}h.baseQueue=y=E,a.pending=null}if(y!==null){E=y.next,h=h.baseState;var q=I=null,J=null,ue=E;do{var ke=ue.lane;if((jo&ke)===ke)J!==null&&(J=J.next={lane:0,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),h=ue.hasEagerState?ue.eagerState:e(h,ue.action);else{var Be={lane:ke,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null};J===null?(q=J=Be,I=h):J=J.next=Be,Xt.lanes|=ke,zo|=ke}ue=ue.next}while(ue!==null&&ue!==E);J===null?I=h:J.next=q,ir(h,r.memoizedState)||(qn=!0),r.memoizedState=h,r.baseState=I,r.baseQueue=J,a.lastRenderedState=h}if(e=a.interleaved,e!==null){y=e;do E=y.lane,Xt.lanes|=E,zo|=E,y=y.next;while(y!==e)}else y===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function ff(e){var r=yr(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=e;var h=a.dispatch,y=a.pending,E=r.memoizedState;if(y!==null){a.pending=null;var I=y=y.next;do E=e(E,I.action),I=I.next;while(I!==y);ir(E,r.memoizedState)||(qn=!0),r.memoizedState=E,r.baseQueue===null&&(r.baseState=E),a.lastRenderedState=E}return[E,h]}function Nh(){}function Fh(e,r){var a=Xt,h=yr(),y=r(),E=!ir(h.memoizedState,y);if(E&&(h.memoizedState=y,qn=!0),h=h.queue,hf(Ih.bind(null,a,h,e),[e]),h.getSnapshot!==r||E||hn!==null&&hn.memoizedState.tag&1){if(a.flags|=2048,Ga(9,Mh.bind(null,a,h,y,r),void 0,null),pn===null)throw Error(i(349));(jo&30)!==0||Lh(a,r,y)}return y}function Lh(e,r,a){e.flags|=16384,e={getSnapshot:r,value:a},r=Xt.updateQueue,r===null?(r={lastEffect:null,stores:null},Xt.updateQueue=r,r.stores=[e]):(a=r.stores,a===null?r.stores=[e]:a.push(e))}function Mh(e,r,a,h){r.value=a,r.getSnapshot=h,Oh(r)&&jh(e)}function Ih(e,r,a){return a(function(){Oh(r)&&jh(e)})}function Oh(e){var r=e.getSnapshot;e=e.value;try{var a=r();return!ir(e,a)}catch{return!0}}function jh(e){var r=wi(e,1);r!==null&&Mr(r,e,1,-1)}function zh(e){var r=Xr();return typeof e=="function"&&(e=e()),r.memoizedState=r.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:e},r.queue=e,e=e.dispatch=jv.bind(null,Xt,e),[r.memoizedState,e]}function Ga(e,r,a,h){return e={tag:e,create:r,destroy:a,deps:h,next:null},r=Xt.updateQueue,r===null?(r={lastEffect:null,stores:null},Xt.updateQueue=r,r.lastEffect=e.next=e):(a=r.lastEffect,a===null?r.lastEffect=e.next=e:(h=a.next,a.next=e,e.next=h,r.lastEffect=e)),e}function Hh(){return yr().memoizedState}function Ac(e,r,a,h){var y=Xr();Xt.flags|=e,y.memoizedState=Ga(1|r,a,void 0,h===void 0?null:h)}function vc(e,r,a,h){var y=yr();h=h===void 0?null:h;var E=void 0;if(cn!==null){var I=cn.memoizedState;if(E=I.destroy,h!==null&&lf(h,I.deps)){y.memoizedState=Ga(r,a,E,h);return}}Xt.flags|=e,y.memoizedState=Ga(1|r,a,E,h)}function Vh(e,r){return Ac(8390656,8,e,r)}function hf(e,r){return vc(2048,8,e,r)}function Uh(e,r){return vc(4,2,e,r)}function Zh(e,r){return vc(4,4,e,r)}function Wh(e,r){if(typeof r=="function")return e=e(),r(e),function(){r(null)};if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function qh(e,r,a){return a=a!=null?a.concat([e]):null,vc(4,4,Wh.bind(null,r,e),a)}function pf(){}function Gh(e,r){var a=yr();r=r===void 0?null:r;var h=a.memoizedState;return h!==null&&r!==null&&lf(r,h[1])?h[0]:(a.memoizedState=[e,r],e)}function $h(e,r){var a=yr();r=r===void 0?null:r;var h=a.memoizedState;return h!==null&&r!==null&&lf(r,h[1])?h[0]:(e=e(),a.memoizedState=[e,r],e)}function Kh(e,r,a){return(jo&21)===0?(e.baseState&&(e.baseState=!1,qn=!0),e.memoizedState=a):(ir(a,r)||(a=Ll(),Xt.lanes|=a,zo|=a,e.baseState=!0),r)}function Iv(e,r){var a=Ct;Ct=a!==0&&4>a?a:4,e(!0);var h=af.transition;af.transition={};try{e(!1),r()}finally{Ct=a,af.transition=h}}function Qh(){return yr().memoizedState}function Ov(e,r,a){var h=lo(e);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},Yh(e))Xh(r,a);else if(a=Bh(e,r,a,h),a!==null){var y=In();Mr(a,e,h,y),Jh(a,r,h)}}function jv(e,r,a){var h=lo(e),y={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(Yh(e))Xh(r,y);else{var E=e.alternate;if(e.lanes===0&&(E===null||E.lanes===0)&&(E=r.lastRenderedReducer,E!==null))try{var I=r.lastRenderedState,q=E(I,a);if(y.hasEagerState=!0,y.eagerState=q,ir(q,I)){var J=r.interleaved;J===null?(y.next=y,ef(r)):(y.next=J.next,J.next=y),r.interleaved=y;return}}catch{}finally{}a=Bh(e,r,y,h),a!==null&&(y=In(),Mr(a,e,h,y),Jh(a,r,h))}}function Yh(e){var r=e.alternate;return e===Xt||r!==null&&r===Xt}function Xh(e,r){Za=xc=!0;var a=e.pending;a===null?r.next=r:(r.next=a.next,a.next=r),e.pending=r}function Jh(e,r,a){if((a&4194240)!==0){var h=r.lanes;h&=e.pendingLanes,a|=h,r.lanes=a,Sr(e,a)}}var yc={readContext:vr,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useInsertionEffect:Pn,useLayoutEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useMutableSource:Pn,useSyncExternalStore:Pn,useId:Pn,unstable_isNewReconciler:!1},zv={readContext:vr,useCallback:function(e,r){return Xr().memoizedState=[e,r===void 0?null:r],e},useContext:vr,useEffect:Vh,useImperativeHandle:function(e,r,a){return a=a!=null?a.concat([e]):null,Ac(4194308,4,Wh.bind(null,r,e),a)},useLayoutEffect:function(e,r){return Ac(4194308,4,e,r)},useInsertionEffect:function(e,r){return Ac(4,2,e,r)},useMemo:function(e,r){var a=Xr();return r=r===void 0?null:r,e=e(),a.memoizedState=[e,r],e},useReducer:function(e,r,a){var h=Xr();return r=a!==void 0?a(r):r,h.memoizedState=h.baseState=r,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},h.queue=e,e=e.dispatch=Ov.bind(null,Xt,e),[h.memoizedState,e]},useRef:function(e){var r=Xr();return e={current:e},r.memoizedState=e},useState:zh,useDebugValue:pf,useDeferredValue:function(e){return Xr().memoizedState=e},useTransition:function(){var e=zh(!1),r=e[0];return e=Iv.bind(null,e[1]),Xr().memoizedState=e,[r,e]},useMutableSource:function(){},useSyncExternalStore:function(e,r,a){var h=Xt,y=Xr();if($t){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),pn===null)throw Error(i(349));(jo&30)!==0||Lh(h,r,a)}y.memoizedState=a;var E={value:a,getSnapshot:r};return y.queue=E,Vh(Ih.bind(null,h,E,e),[e]),h.flags|=2048,Ga(9,Mh.bind(null,h,E,a,r),void 0,null),a},useId:function(){var e=Xr(),r=pn.identifierPrefix;if($t){var a=_i,h=yi;a=(h&~(1<<32-ft(h)-1)).toString(32)+a,r=":"+r+"R"+a,a=Wa++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=Mv++,r=":"+r+"r"+a.toString(32)+":";return e.memoizedState=r},unstable_isNewReconciler:!1},Hv={readContext:vr,useCallback:Gh,useContext:vr,useEffect:hf,useImperativeHandle:qh,useInsertionEffect:Uh,useLayoutEffect:Zh,useMemo:$h,useReducer:df,useRef:Hh,useState:function(){return df(qa)},useDebugValue:pf,useDeferredValue:function(e){var r=yr();return Kh(r,cn.memoizedState,e)},useTransition:function(){var e=df(qa)[0],r=yr().memoizedState;return[e,r]},useMutableSource:Nh,useSyncExternalStore:Fh,useId:Qh,unstable_isNewReconciler:!1},Vv={readContext:vr,useCallback:Gh,useContext:vr,useEffect:hf,useImperativeHandle:qh,useInsertionEffect:Uh,useLayoutEffect:Zh,useMemo:$h,useReducer:ff,useRef:Hh,useState:function(){return ff(qa)},useDebugValue:pf,useDeferredValue:function(e){var r=yr();return cn===null?r.memoizedState=e:Kh(r,cn.memoizedState,e)},useTransition:function(){var e=ff(qa)[0],r=yr().memoizedState;return[e,r]},useMutableSource:Nh,useSyncExternalStore:Fh,useId:Qh,unstable_isNewReconciler:!1};function Nr(e,r){if(e&&e.defaultProps){r=Z({},r),e=e.defaultProps;for(var a in e)r[a]===void 0&&(r[a]=e[a]);return r}return r}function mf(e,r,a,h){r=e.memoizedState,a=a(h,r),a=a==null?r:Z({},r,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var _c={isMounted:function(e){return(e=e._reactInternals)?Vr(e)===e:!1},enqueueSetState:function(e,r,a){e=e._reactInternals;var h=In(),y=lo(e),E=bi(h,y);E.payload=r,a!=null&&(E.callback=a),r=io(e,E,y),r!==null&&(Mr(r,e,y,h),hc(r,e,y))},enqueueReplaceState:function(e,r,a){e=e._reactInternals;var h=In(),y=lo(e),E=bi(h,y);E.tag=1,E.payload=r,a!=null&&(E.callback=a),r=io(e,E,y),r!==null&&(Mr(r,e,y,h),hc(r,e,y))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var a=In(),h=lo(e),y=bi(a,h);y.tag=2,r!=null&&(y.callback=r),r=io(e,y,h),r!==null&&(Mr(r,e,h,a),hc(r,e,h))}};function ep(e,r,a,h,y,E,I){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(h,E,I):r.prototype&&r.prototype.isPureReactComponent?!Gr(a,h)||!Gr(y,E):!0}function tp(e,r,a){var h=!1,y=to,E=r.contextType;return typeof E=="object"&&E!==null?E=vr(E):(y=Wn(r)?Fo:Bn.current,h=r.contextTypes,E=(h=h!=null)?Ls(e,y):to),r=new r(a,E),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=_c,e.stateNode=r,r._reactInternals=e,h&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=y,e.__reactInternalMemoizedMaskedChildContext=E),r}function np(e,r,a,h){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,h),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,h),r.state!==e&&_c.enqueueReplaceState(r,r.state,null)}function gf(e,r,a,h){var y=e.stateNode;y.props=a,y.state=e.memoizedState,y.refs={},tf(e);var E=r.contextType;typeof E=="object"&&E!==null?y.context=vr(E):(E=Wn(r)?Fo:Bn.current,y.context=Ls(e,E)),y.state=e.memoizedState,E=r.getDerivedStateFromProps,typeof E=="function"&&(mf(e,r,E,a),y.state=e.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(r=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),r!==y.state&&_c.enqueueReplaceState(y,y.state,null),pc(e,a,y,h),y.state=e.memoizedState),typeof y.componentDidMount=="function"&&(e.flags|=4194308)}function Us(e,r){try{var a="",h=r;do a+=fe(h),h=h.return;while(h);var y=a}catch(E){y=`
Error generating stack: `+E.message+`
`+E.stack}return{value:e,source:r,stack:y,digest:null}}function xf(e,r,a){return{value:e,source:null,stack:a??null,digest:r??null}}function Af(e,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var Uv=typeof WeakMap=="function"?WeakMap:Map;function rp(e,r,a){a=bi(-1,a),a.tag=3,a.payload={element:null};var h=r.value;return a.callback=function(){Bc||(Bc=!0,Nf=h),Af(e,r)},a}function ip(e,r,a){a=bi(-1,a),a.tag=3;var h=e.type.getDerivedStateFromError;if(typeof h=="function"){var y=r.value;a.payload=function(){return h(y)},a.callback=function(){Af(e,r)}}var E=e.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(a.callback=function(){Af(e,r),typeof h!="function"&&(so===null?so=new Set([this]):so.add(this));var I=r.stack;this.componentDidCatch(r.value,{componentStack:I!==null?I:""})}),a}function op(e,r,a){var h=e.pingCache;if(h===null){h=e.pingCache=new Uv;var y=new Set;h.set(r,y)}else y=h.get(r),y===void 0&&(y=new Set,h.set(r,y));y.has(a)||(y.add(a),e=ry.bind(null,e,r,a),r.then(e,e))}function sp(e){do{var r;if((r=e.tag===13)&&(r=e.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return e;e=e.return}while(e!==null);return null}function ap(e,r,a,h,y){return(e.mode&1)===0?(e===r?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=bi(-1,1),r.tag=2,io(a,r,1))),a.lanes|=1),e):(e.flags|=65536,e.lanes=y,e)}var Zv=F.ReactCurrentOwner,qn=!1;function Mn(e,r,a,h){r.child=e===null?Sh(r,null,a,h):js(r,e.child,a,h)}function lp(e,r,a,h,y){a=a.render;var E=r.ref;return Hs(r,y),h=cf(e,r,a,h,E,y),a=uf(),e!==null&&!qn?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~y,Ci(e,r,y)):($t&&a&&Wd(r),r.flags|=1,Mn(e,r,h,y),r.child)}function cp(e,r,a,h,y){if(e===null){var E=a.type;return typeof E=="function"&&!zf(E)&&E.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=E,up(e,r,E,h,y)):(e=Fc(a.type,null,h,r,r.mode,y),e.ref=r.ref,e.return=r,r.child=e)}if(E=e.child,(e.lanes&y)===0){var I=E.memoizedProps;if(a=a.compare,a=a!==null?a:Gr,a(I,h)&&e.ref===r.ref)return Ci(e,r,y)}return r.flags|=1,e=uo(E,h),e.ref=r.ref,e.return=r,r.child=e}function up(e,r,a,h,y){if(e!==null){var E=e.memoizedProps;if(Gr(E,h)&&e.ref===r.ref)if(qn=!1,r.pendingProps=h=E,(e.lanes&y)!==0)(e.flags&131072)!==0&&(qn=!0);else return r.lanes=e.lanes,Ci(e,r,y)}return vf(e,r,a,h,y)}function dp(e,r,a){var h=r.pendingProps,y=h.children,E=e!==null?e.memoizedState:null;if(h.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ht(Ws,lr),lr|=a;else{if((a&1073741824)===0)return e=E!==null?E.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:e,cachePool:null,transitions:null},r.updateQueue=null,Ht(Ws,lr),lr|=e,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=E!==null?E.baseLanes:a,Ht(Ws,lr),lr|=h}else E!==null?(h=E.baseLanes|a,r.memoizedState=null):h=a,Ht(Ws,lr),lr|=h;return Mn(e,r,y,a),r.child}function fp(e,r){var a=r.ref;(e===null&&a!==null||e!==null&&e.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function vf(e,r,a,h,y){var E=Wn(a)?Fo:Bn.current;return E=Ls(r,E),Hs(r,y),a=cf(e,r,a,h,E,y),h=uf(),e!==null&&!qn?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~y,Ci(e,r,y)):($t&&h&&Wd(r),r.flags|=1,Mn(e,r,a,y),r.child)}function hp(e,r,a,h,y){if(Wn(a)){var E=!0;oc(r)}else E=!1;if(Hs(r,y),r.stateNode===null)bc(e,r),tp(r,a,h),gf(r,a,h,y),h=!0;else if(e===null){var I=r.stateNode,q=r.memoizedProps;I.props=q;var J=I.context,ue=a.contextType;typeof ue=="object"&&ue!==null?ue=vr(ue):(ue=Wn(a)?Fo:Bn.current,ue=Ls(r,ue));var ke=a.getDerivedStateFromProps,Be=typeof ke=="function"||typeof I.getSnapshotBeforeUpdate=="function";Be||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(q!==h||J!==ue)&&np(r,I,h,ue),ro=!1;var Ce=r.memoizedState;I.state=Ce,pc(r,h,I,y),J=r.memoizedState,q!==h||Ce!==J||Zn.current||ro?(typeof ke=="function"&&(mf(r,a,ke,h),J=r.memoizedState),(q=ro||ep(r,a,q,h,Ce,J,ue))?(Be||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(r.flags|=4194308)):(typeof I.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=h,r.memoizedState=J),I.props=h,I.state=J,I.context=ue,h=q):(typeof I.componentDidMount=="function"&&(r.flags|=4194308),h=!1)}else{I=r.stateNode,Ph(e,r),q=r.memoizedProps,ue=r.type===r.elementType?q:Nr(r.type,q),I.props=ue,Be=r.pendingProps,Ce=I.context,J=a.contextType,typeof J=="object"&&J!==null?J=vr(J):(J=Wn(a)?Fo:Bn.current,J=Ls(r,J));var Ve=a.getDerivedStateFromProps;(ke=typeof Ve=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(q!==Be||Ce!==J)&&np(r,I,h,J),ro=!1,Ce=r.memoizedState,I.state=Ce,pc(r,h,I,y);var $e=r.memoizedState;q!==Be||Ce!==$e||Zn.current||ro?(typeof Ve=="function"&&(mf(r,a,Ve,h),$e=r.memoizedState),(ue=ro||ep(r,a,ue,h,Ce,$e,J)||!1)?(ke||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(h,$e,J),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(h,$e,J)),typeof I.componentDidUpdate=="function"&&(r.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof I.componentDidUpdate!="function"||q===e.memoizedProps&&Ce===e.memoizedState||(r.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||q===e.memoizedProps&&Ce===e.memoizedState||(r.flags|=1024),r.memoizedProps=h,r.memoizedState=$e),I.props=h,I.state=$e,I.context=J,h=ue):(typeof I.componentDidUpdate!="function"||q===e.memoizedProps&&Ce===e.memoizedState||(r.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||q===e.memoizedProps&&Ce===e.memoizedState||(r.flags|=1024),h=!1)}return yf(e,r,a,h,E,y)}function yf(e,r,a,h,y,E){fp(e,r);var I=(r.flags&128)!==0;if(!h&&!I)return y&&Ah(r,a,!1),Ci(e,r,E);h=r.stateNode,Zv.current=r;var q=I&&typeof a.getDerivedStateFromError!="function"?null:h.render();return r.flags|=1,e!==null&&I?(r.child=js(r,e.child,null,E),r.child=js(r,null,q,E)):Mn(e,r,q,E),r.memoizedState=h.state,y&&Ah(r,a,!0),r.child}function pp(e){var r=e.stateNode;r.pendingContext?gh(e,r.pendingContext,r.pendingContext!==r.context):r.context&&gh(e,r.context,!1),nf(e,r.containerInfo)}function mp(e,r,a,h,y){return Os(),Kd(y),r.flags|=256,Mn(e,r,a,h),r.child}var _f={dehydrated:null,treeContext:null,retryLane:0};function wf(e){return{baseLanes:e,cachePool:null,transitions:null}}function gp(e,r,a){var h=r.pendingProps,y=Yt.current,E=!1,I=(r.flags&128)!==0,q;if((q=I)||(q=e!==null&&e.memoizedState===null?!1:(y&2)!==0),q?(E=!0,r.flags&=-129):(e===null||e.memoizedState!==null)&&(y|=1),Ht(Yt,y&1),e===null)return $d(r),e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((r.mode&1)===0?r.lanes=1:e.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(I=h.children,e=h.fallback,E?(h=r.mode,E=r.child,I={mode:"hidden",children:I},(h&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=I):E=Lc(I,h,0,null),e=Zo(e,h,a,null),E.return=r,e.return=r,E.sibling=e,r.child=E,r.child.memoizedState=wf(a),r.memoizedState=_f,e):bf(r,I));if(y=e.memoizedState,y!==null&&(q=y.dehydrated,q!==null))return Wv(e,r,I,h,q,y,a);if(E){E=h.fallback,I=r.mode,y=e.child,q=y.sibling;var J={mode:"hidden",children:h.children};return(I&1)===0&&r.child!==y?(h=r.child,h.childLanes=0,h.pendingProps=J,r.deletions=null):(h=uo(y,J),h.subtreeFlags=y.subtreeFlags&14680064),q!==null?E=uo(q,E):(E=Zo(E,I,a,null),E.flags|=2),E.return=r,h.return=r,h.sibling=E,r.child=h,h=E,E=r.child,I=e.child.memoizedState,I=I===null?wf(a):{baseLanes:I.baseLanes|a,cachePool:null,transitions:I.transitions},E.memoizedState=I,E.childLanes=e.childLanes&~a,r.memoizedState=_f,h}return E=e.child,e=E.sibling,h=uo(E,{mode:"visible",children:h.children}),(r.mode&1)===0&&(h.lanes=a),h.return=r,h.sibling=null,e!==null&&(a=r.deletions,a===null?(r.deletions=[e],r.flags|=16):a.push(e)),r.child=h,r.memoizedState=null,h}function bf(e,r){return r=Lc({mode:"visible",children:r},e.mode,0,null),r.return=e,e.child=r}function wc(e,r,a,h){return h!==null&&Kd(h),js(r,e.child,null,a),e=bf(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function Wv(e,r,a,h,y,E,I){if(a)return r.flags&256?(r.flags&=-257,h=xf(Error(i(422))),wc(e,r,I,h)):r.memoizedState!==null?(r.child=e.child,r.flags|=128,null):(E=h.fallback,y=r.mode,h=Lc({mode:"visible",children:h.children},y,0,null),E=Zo(E,y,I,null),E.flags|=2,h.return=r,E.return=r,h.sibling=E,r.child=h,(r.mode&1)!==0&&js(r,e.child,null,I),r.child.memoizedState=wf(I),r.memoizedState=_f,E);if((r.mode&1)===0)return wc(e,r,I,null);if(y.data==="$!"){if(h=y.nextSibling&&y.nextSibling.dataset,h)var q=h.dgst;return h=q,E=Error(i(419)),h=xf(E,h,void 0),wc(e,r,I,h)}if(q=(I&e.childLanes)!==0,qn||q){if(h=pn,h!==null){switch(I&-I){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(h.suspendedLanes|I))!==0?0:y,y!==0&&y!==E.retryLane&&(E.retryLane=y,wi(e,y),Mr(h,e,y,-1))}return jf(),h=xf(Error(i(421))),wc(e,r,I,h)}return y.data==="$?"?(r.flags|=128,r.child=e.child,r=iy.bind(null,e),y._reactRetry=r,null):(e=E.treeContext,ar=Qr(y.nextSibling),sr=r,$t=!0,Rr=null,e!==null&&(xr[Ar++]=yi,xr[Ar++]=_i,xr[Ar++]=Lo,yi=e.id,_i=e.overflow,Lo=r),r=bf(r,h.children),r.flags|=4096,r)}function xp(e,r,a){e.lanes|=r;var h=e.alternate;h!==null&&(h.lanes|=r),Jd(e.return,r,a)}function Cf(e,r,a,h,y){var E=e.memoizedState;E===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:y}:(E.isBackwards=r,E.rendering=null,E.renderingStartTime=0,E.last=h,E.tail=a,E.tailMode=y)}function Ap(e,r,a){var h=r.pendingProps,y=h.revealOrder,E=h.tail;if(Mn(e,r,h.children,a),h=Yt.current,(h&2)!==0)h=h&1|2,r.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&xp(e,a,r);else if(e.tag===19)xp(e,a,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}h&=1}if(Ht(Yt,h),(r.mode&1)===0)r.memoizedState=null;else switch(y){case"forwards":for(a=r.child,y=null;a!==null;)e=a.alternate,e!==null&&mc(e)===null&&(y=a),a=a.sibling;a=y,a===null?(y=r.child,r.child=null):(y=a.sibling,a.sibling=null),Cf(r,!1,y,a,E);break;case"backwards":for(a=null,y=r.child,r.child=null;y!==null;){if(e=y.alternate,e!==null&&mc(e)===null){r.child=y;break}e=y.sibling,y.sibling=a,a=y,y=e}Cf(r,!0,a,null,E);break;case"together":Cf(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function bc(e,r){(r.mode&1)===0&&e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2)}function Ci(e,r,a){if(e!==null&&(r.dependencies=e.dependencies),zo|=r.lanes,(a&r.childLanes)===0)return null;if(e!==null&&r.child!==e.child)throw Error(i(153));if(r.child!==null){for(e=r.child,a=uo(e,e.pendingProps),r.child=a,a.return=r;e.sibling!==null;)e=e.sibling,a=a.sibling=uo(e,e.pendingProps),a.return=r;a.sibling=null}return r.child}function qv(e,r,a){switch(r.tag){case 3:pp(r),Os();break;case 5:Rh(r);break;case 1:Wn(r.type)&&oc(r);break;case 4:nf(r,r.stateNode.containerInfo);break;case 10:var h=r.type._context,y=r.memoizedProps.value;Ht(dc,h._currentValue),h._currentValue=y;break;case 13:if(h=r.memoizedState,h!==null)return h.dehydrated!==null?(Ht(Yt,Yt.current&1),r.flags|=128,null):(a&r.child.childLanes)!==0?gp(e,r,a):(Ht(Yt,Yt.current&1),e=Ci(e,r,a),e!==null?e.sibling:null);Ht(Yt,Yt.current&1);break;case 19:if(h=(a&r.childLanes)!==0,(e.flags&128)!==0){if(h)return Ap(e,r,a);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Ht(Yt,Yt.current),h)break;return null;case 22:case 23:return r.lanes=0,dp(e,r,a)}return Ci(e,r,a)}var vp,Ef,yp,_p;vp=function(e,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Ef=function(){},yp=function(e,r,a,h){var y=e.memoizedProps;if(y!==h){e=r.stateNode,Oo(Yr.current);var E=null;switch(a){case"input":y=Le(e,y),h=Le(e,h),E=[];break;case"select":y=Z({},y,{value:void 0}),h=Z({},h,{value:void 0}),E=[];break;case"textarea":y=oe(e,y),h=oe(e,h),E=[];break;default:typeof y.onClick!="function"&&typeof h.onClick=="function"&&(e.onclick=be)}Pe(a,h);var I;a=null;for(ue in y)if(!h.hasOwnProperty(ue)&&y.hasOwnProperty(ue)&&y[ue]!=null)if(ue==="style"){var q=y[ue];for(I in q)q.hasOwnProperty(I)&&(a||(a={}),a[I]="")}else ue!=="dangerouslySetInnerHTML"&&ue!=="children"&&ue!=="suppressContentEditableWarning"&&ue!=="suppressHydrationWarning"&&ue!=="autoFocus"&&(c.hasOwnProperty(ue)?E||(E=[]):(E=E||[]).push(ue,null));for(ue in h){var J=h[ue];if(q=y!=null?y[ue]:void 0,h.hasOwnProperty(ue)&&J!==q&&(J!=null||q!=null))if(ue==="style")if(q){for(I in q)!q.hasOwnProperty(I)||J&&J.hasOwnProperty(I)||(a||(a={}),a[I]="");for(I in J)J.hasOwnProperty(I)&&q[I]!==J[I]&&(a||(a={}),a[I]=J[I])}else a||(E||(E=[]),E.push(ue,a)),a=J;else ue==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,q=q?q.__html:void 0,J!=null&&q!==J&&(E=E||[]).push(ue,J)):ue==="children"?typeof J!="string"&&typeof J!="number"||(E=E||[]).push(ue,""+J):ue!=="suppressContentEditableWarning"&&ue!=="suppressHydrationWarning"&&(c.hasOwnProperty(ue)?(J!=null&&ue==="onScroll"&&It("scroll",e),E||q===J||(E=[])):(E=E||[]).push(ue,J))}a&&(E=E||[]).push("style",a);var ue=E;(r.updateQueue=ue)&&(r.flags|=4)}},_p=function(e,r,a,h){a!==h&&(r.flags|=4)};function $a(e,r){if(!$t)switch(e.tailMode){case"hidden":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:h.sibling=null}}function Tn(e){var r=e.alternate!==null&&e.alternate.child===e.child,a=0,h=0;if(r)for(var y=e.child;y!==null;)a|=y.lanes|y.childLanes,h|=y.subtreeFlags&14680064,h|=y.flags&14680064,y.return=e,y=y.sibling;else for(y=e.child;y!==null;)a|=y.lanes|y.childLanes,h|=y.subtreeFlags,h|=y.flags,y.return=e,y=y.sibling;return e.subtreeFlags|=h,e.childLanes=a,r}function Gv(e,r,a){var h=r.pendingProps;switch(qd(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tn(r),null;case 1:return Wn(r.type)&&ic(),Tn(r),null;case 3:return h=r.stateNode,Vs(),Ut(Zn),Ut(Bn),sf(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(e===null||e.child===null)&&(cc(r)?r.flags|=4:e===null||e.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Rr!==null&&(Mf(Rr),Rr=null))),Ef(e,r),Tn(r),null;case 5:rf(r);var y=Oo(Ua.current);if(a=r.type,e!==null&&r.stateNode!=null)yp(e,r,a,h,y),e.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!h){if(r.stateNode===null)throw Error(i(166));return Tn(r),null}if(e=Oo(Yr.current),cc(r)){h=r.stateNode,a=r.type;var E=r.memoizedProps;switch(h[gr]=r,h[Xi]=E,e=(r.mode&1)!==0,a){case"dialog":It("cancel",h),It("close",h);break;case"iframe":case"object":case"embed":It("load",h);break;case"video":case"audio":for(y=0;y<Ki.length;y++)It(Ki[y],h);break;case"source":It("error",h);break;case"img":case"image":case"link":It("error",h),It("load",h);break;case"details":It("toggle",h);break;case"input":We(h,E),It("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!E.multiple},It("invalid",h);break;case"textarea":Re(h,E),It("invalid",h)}Pe(a,E),y=null;for(var I in E)if(E.hasOwnProperty(I)){var q=E[I];I==="children"?typeof q=="string"?h.textContent!==q&&(E.suppressHydrationWarning!==!0&&ce(h.textContent,q,e),y=["children",q]):typeof q=="number"&&h.textContent!==""+q&&(E.suppressHydrationWarning!==!0&&ce(h.textContent,q,e),y=["children",""+q]):c.hasOwnProperty(I)&&q!=null&&I==="onScroll"&&It("scroll",h)}switch(a){case"input":Ze(h),Ne(h,E,!0);break;case"textarea":Ze(h),ve(h);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(h.onclick=be)}h=y,r.updateQueue=h,h!==null&&(r.flags|=4)}else{I=y.nodeType===9?y:y.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Me(a)),e==="http://www.w3.org/1999/xhtml"?a==="script"?(e=I.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof h.is=="string"?e=I.createElement(a,{is:h.is}):(e=I.createElement(a),a==="select"&&(I=e,h.multiple?I.multiple=!0:h.size&&(I.size=h.size))):e=I.createElementNS(e,a),e[gr]=r,e[Xi]=h,vp(e,r,!1,!1),r.stateNode=e;e:{switch(I=ze(a,h),a){case"dialog":It("cancel",e),It("close",e),y=h;break;case"iframe":case"object":case"embed":It("load",e),y=h;break;case"video":case"audio":for(y=0;y<Ki.length;y++)It(Ki[y],e);y=h;break;case"source":It("error",e),y=h;break;case"img":case"image":case"link":It("error",e),It("load",e),y=h;break;case"details":It("toggle",e),y=h;break;case"input":We(e,h),y=Le(e,h),It("invalid",e);break;case"option":y=h;break;case"select":e._wrapperState={wasMultiple:!!h.multiple},y=Z({},h,{value:void 0}),It("invalid",e);break;case"textarea":Re(e,h),y=oe(e,h),It("invalid",e);break;default:y=h}Pe(a,y),q=y;for(E in q)if(q.hasOwnProperty(E)){var J=q[E];E==="style"?Cn(e,J):E==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,J!=null&&Nt(e,J)):E==="children"?typeof J=="string"?(a!=="textarea"||J!=="")&&Wt(e,J):typeof J=="number"&&Wt(e,""+J):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(c.hasOwnProperty(E)?J!=null&&E==="onScroll"&&It("scroll",e):J!=null&&T(e,E,J,I))}switch(a){case"input":Ze(e),Ne(e,h,!1);break;case"textarea":Ze(e),ve(e);break;case"option":h.value!=null&&e.setAttribute("value",""+we(h.value));break;case"select":e.multiple=!!h.multiple,E=h.value,E!=null?tt(e,!!h.multiple,E,!1):h.defaultValue!=null&&tt(e,!!h.multiple,h.defaultValue,!0);break;default:typeof y.onClick=="function"&&(e.onclick=be)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Tn(r),null;case 6:if(e&&r.stateNode!=null)_p(e,r,e.memoizedProps,h);else{if(typeof h!="string"&&r.stateNode===null)throw Error(i(166));if(a=Oo(Ua.current),Oo(Yr.current),cc(r)){if(h=r.stateNode,a=r.memoizedProps,h[gr]=r,(E=h.nodeValue!==a)&&(e=sr,e!==null))switch(e.tag){case 3:ce(h.nodeValue,a,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ce(h.nodeValue,a,(e.mode&1)!==0)}E&&(r.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[gr]=r,r.stateNode=h}return Tn(r),null;case 13:if(Ut(Yt),h=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if($t&&ar!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Ch(),Os(),r.flags|=98560,E=!1;else if(E=cc(r),h!==null&&h.dehydrated!==null){if(e===null){if(!E)throw Error(i(318));if(E=r.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(i(317));E[gr]=r}else Os(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Tn(r),E=!1}else Rr!==null&&(Mf(Rr),Rr=null),E=!0;if(!E)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=a,r):(h=h!==null,h!==(e!==null&&e.memoizedState!==null)&&h&&(r.child.flags|=8192,(r.mode&1)!==0&&(e===null||(Yt.current&1)!==0?un===0&&(un=3):jf())),r.updateQueue!==null&&(r.flags|=4),Tn(r),null);case 4:return Vs(),Ef(e,r),e===null&&Qi(r.stateNode.containerInfo),Tn(r),null;case 10:return Xd(r.type._context),Tn(r),null;case 17:return Wn(r.type)&&ic(),Tn(r),null;case 19:if(Ut(Yt),E=r.memoizedState,E===null)return Tn(r),null;if(h=(r.flags&128)!==0,I=E.rendering,I===null)if(h)$a(E,!1);else{if(un!==0||e!==null&&(e.flags&128)!==0)for(e=r.child;e!==null;){if(I=mc(e),I!==null){for(r.flags|=128,$a(E,!1),h=I.updateQueue,h!==null&&(r.updateQueue=h,r.flags|=4),r.subtreeFlags=0,h=a,a=r.child;a!==null;)E=a,e=h,E.flags&=14680066,I=E.alternate,I===null?(E.childLanes=0,E.lanes=e,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=I.childLanes,E.lanes=I.lanes,E.child=I.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=I.memoizedProps,E.memoizedState=I.memoizedState,E.updateQueue=I.updateQueue,E.type=I.type,e=I.dependencies,E.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return Ht(Yt,Yt.current&1|2),r.child}e=e.sibling}E.tail!==null&&Kt()>qs&&(r.flags|=128,h=!0,$a(E,!1),r.lanes=4194304)}else{if(!h)if(e=mc(I),e!==null){if(r.flags|=128,h=!0,a=e.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),$a(E,!0),E.tail===null&&E.tailMode==="hidden"&&!I.alternate&&!$t)return Tn(r),null}else 2*Kt()-E.renderingStartTime>qs&&a!==1073741824&&(r.flags|=128,h=!0,$a(E,!1),r.lanes=4194304);E.isBackwards?(I.sibling=r.child,r.child=I):(a=E.last,a!==null?a.sibling=I:r.child=I,E.last=I)}return E.tail!==null?(r=E.tail,E.rendering=r,E.tail=r.sibling,E.renderingStartTime=Kt(),r.sibling=null,a=Yt.current,Ht(Yt,h?a&1|2:a&1),r):(Tn(r),null);case 22:case 23:return Of(),h=r.memoizedState!==null,e!==null&&e.memoizedState!==null!==h&&(r.flags|=8192),h&&(r.mode&1)!==0?(lr&1073741824)!==0&&(Tn(r),r.subtreeFlags&6&&(r.flags|=8192)):Tn(r),null;case 24:return null;case 25:return null}throw Error(i(156,r.tag))}function $v(e,r){switch(qd(r),r.tag){case 1:return Wn(r.type)&&ic(),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return Vs(),Ut(Zn),Ut(Bn),sf(),e=r.flags,(e&65536)!==0&&(e&128)===0?(r.flags=e&-65537|128,r):null;case 5:return rf(r),null;case 13:if(Ut(Yt),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Os()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return Ut(Yt),null;case 4:return Vs(),null;case 10:return Xd(r.type._context),null;case 22:case 23:return Of(),null;case 24:return null;default:return null}}var Cc=!1,Dn=!1,Kv=typeof WeakSet=="function"?WeakSet:Set,Ge=null;function Zs(e,r){var a=e.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){tn(e,r,h)}else a.current=null}function kf(e,r,a){try{a()}catch(h){tn(e,r,h)}}var wp=!1;function Qv(e,r){if(Ie=ko,e=Da(),Ra(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var y=h.anchorOffset,E=h.focusNode;h=h.focusOffset;try{a.nodeType,E.nodeType}catch{a=null;break e}var I=0,q=-1,J=-1,ue=0,ke=0,Be=e,Ce=null;t:for(;;){for(var Ve;Be!==a||y!==0&&Be.nodeType!==3||(q=I+y),Be!==E||h!==0&&Be.nodeType!==3||(J=I+h),Be.nodeType===3&&(I+=Be.nodeValue.length),(Ve=Be.firstChild)!==null;)Ce=Be,Be=Ve;for(;;){if(Be===e)break t;if(Ce===a&&++ue===y&&(q=I),Ce===E&&++ke===h&&(J=I),(Ve=Be.nextSibling)!==null)break;Be=Ce,Ce=Be.parentNode}Be=Ve}a=q===-1||J===-1?null:{start:q,end:J}}else a=null}a=a||{start:0,end:0}}else a=null;for(nt={focusedElem:e,selectionRange:a},ko=!1,Ge=r;Ge!==null;)if(r=Ge,e=r.child,(r.subtreeFlags&1028)!==0&&e!==null)e.return=r,Ge=e;else for(;Ge!==null;){r=Ge;try{var $e=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if($e!==null){var Xe=$e.memoizedProps,nn=$e.memoizedState,ae=r.stateNode,te=ae.getSnapshotBeforeUpdate(r.elementType===r.type?Xe:Nr(r.type,Xe),nn);ae.__reactInternalSnapshotBeforeUpdate=te}break;case 3:var le=r.stateNode.containerInfo;le.nodeType===1?le.textContent="":le.nodeType===9&&le.documentElement&&le.removeChild(le.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(De){tn(r,r.return,De)}if(e=r.sibling,e!==null){e.return=r.return,Ge=e;break}Ge=r.return}return $e=wp,wp=!1,$e}function Ka(e,r,a){var h=r.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var y=h=h.next;do{if((y.tag&e)===e){var E=y.destroy;y.destroy=void 0,E!==void 0&&kf(r,a,E)}y=y.next}while(y!==h)}}function Ec(e,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var h=a.create;a.destroy=h()}a=a.next}while(a!==r)}}function Sf(e){var r=e.ref;if(r!==null){var a=e.stateNode;switch(e.tag){case 5:e=a;break;default:e=a}typeof r=="function"?r(e):r.current=e}}function bp(e){var r=e.alternate;r!==null&&(e.alternate=null,bp(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&(delete r[gr],delete r[Xi],delete r[Ji],delete r[Hd],delete r[Vd])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Cp(e){return e.tag===5||e.tag===3||e.tag===4}function Ep(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Cp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Bf(e,r,a){var h=e.tag;if(h===5||h===6)e=e.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(e,r):a.insertBefore(e,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(e,a)):(r=a,r.appendChild(e)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=be));else if(h!==4&&(e=e.child,e!==null))for(Bf(e,r,a),e=e.sibling;e!==null;)Bf(e,r,a),e=e.sibling}function Pf(e,r,a){var h=e.tag;if(h===5||h===6)e=e.stateNode,r?a.insertBefore(e,r):a.appendChild(e);else if(h!==4&&(e=e.child,e!==null))for(Pf(e,r,a),e=e.sibling;e!==null;)Pf(e,r,a),e=e.sibling}var vn=null,Fr=!1;function oo(e,r,a){for(a=a.child;a!==null;)kp(e,r,a),a=a.sibling}function kp(e,r,a){if(Xn&&typeof Xn.onCommitFiberUnmount=="function")try{Xn.onCommitFiberUnmount(yo,a)}catch{}switch(a.tag){case 5:Dn||Zs(a,r);case 6:var h=vn,y=Fr;vn=null,oo(e,r,a),vn=h,Fr=y,vn!==null&&(Fr?(e=vn,a=a.stateNode,e.nodeType===8?e.parentNode.removeChild(a):e.removeChild(a)):vn.removeChild(a.stateNode));break;case 18:vn!==null&&(Fr?(e=vn,a=a.stateNode,e.nodeType===8?ja(e.parentNode,a):e.nodeType===1&&ja(e,a),tr(e)):ja(vn,a.stateNode));break;case 4:h=vn,y=Fr,vn=a.stateNode.containerInfo,Fr=!0,oo(e,r,a),vn=h,Fr=y;break;case 0:case 11:case 14:case 15:if(!Dn&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){y=h=h.next;do{var E=y,I=E.destroy;E=E.tag,I!==void 0&&((E&2)!==0||(E&4)!==0)&&kf(a,r,I),y=y.next}while(y!==h)}oo(e,r,a);break;case 1:if(!Dn&&(Zs(a,r),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(q){tn(a,r,q)}oo(e,r,a);break;case 21:oo(e,r,a);break;case 22:a.mode&1?(Dn=(h=Dn)||a.memoizedState!==null,oo(e,r,a),Dn=h):oo(e,r,a);break;default:oo(e,r,a)}}function Sp(e){var r=e.updateQueue;if(r!==null){e.updateQueue=null;var a=e.stateNode;a===null&&(a=e.stateNode=new Kv),r.forEach(function(h){var y=oy.bind(null,e,h);a.has(h)||(a.add(h),h.then(y,y))})}}function Lr(e,r){var a=r.deletions;if(a!==null)for(var h=0;h<a.length;h++){var y=a[h];try{var E=e,I=r,q=I;e:for(;q!==null;){switch(q.tag){case 5:vn=q.stateNode,Fr=!1;break e;case 3:vn=q.stateNode.containerInfo,Fr=!0;break e;case 4:vn=q.stateNode.containerInfo,Fr=!0;break e}q=q.return}if(vn===null)throw Error(i(160));kp(E,I,y),vn=null,Fr=!1;var J=y.alternate;J!==null&&(J.return=null),y.return=null}catch(ue){tn(y,r,ue)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Bp(r,e),r=r.sibling}function Bp(e,r){var a=e.alternate,h=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Lr(r,e),Jr(e),h&4){try{Ka(3,e,e.return),Ec(3,e)}catch(Xe){tn(e,e.return,Xe)}try{Ka(5,e,e.return)}catch(Xe){tn(e,e.return,Xe)}}break;case 1:Lr(r,e),Jr(e),h&512&&a!==null&&Zs(a,a.return);break;case 5:if(Lr(r,e),Jr(e),h&512&&a!==null&&Zs(a,a.return),e.flags&32){var y=e.stateNode;try{Wt(y,"")}catch(Xe){tn(e,e.return,Xe)}}if(h&4&&(y=e.stateNode,y!=null)){var E=e.memoizedProps,I=a!==null?a.memoizedProps:E,q=e.type,J=e.updateQueue;if(e.updateQueue=null,J!==null)try{q==="input"&&E.type==="radio"&&E.name!=null&&lt(y,E),ze(q,I);var ue=ze(q,E);for(I=0;I<J.length;I+=2){var ke=J[I],Be=J[I+1];ke==="style"?Cn(y,Be):ke==="dangerouslySetInnerHTML"?Nt(y,Be):ke==="children"?Wt(y,Be):T(y,ke,Be,ue)}switch(q){case"input":et(y,E);break;case"textarea":qe(y,E);break;case"select":var Ce=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!E.multiple;var Ve=E.value;Ve!=null?tt(y,!!E.multiple,Ve,!1):Ce!==!!E.multiple&&(E.defaultValue!=null?tt(y,!!E.multiple,E.defaultValue,!0):tt(y,!!E.multiple,E.multiple?[]:"",!1))}y[Xi]=E}catch(Xe){tn(e,e.return,Xe)}}break;case 6:if(Lr(r,e),Jr(e),h&4){if(e.stateNode===null)throw Error(i(162));y=e.stateNode,E=e.memoizedProps;try{y.nodeValue=E}catch(Xe){tn(e,e.return,Xe)}}break;case 3:if(Lr(r,e),Jr(e),h&4&&a!==null&&a.memoizedState.isDehydrated)try{tr(r.containerInfo)}catch(Xe){tn(e,e.return,Xe)}break;case 4:Lr(r,e),Jr(e);break;case 13:Lr(r,e),Jr(e),y=e.child,y.flags&8192&&(E=y.memoizedState!==null,y.stateNode.isHidden=E,!E||y.alternate!==null&&y.alternate.memoizedState!==null||(Rf=Kt())),h&4&&Sp(e);break;case 22:if(ke=a!==null&&a.memoizedState!==null,e.mode&1?(Dn=(ue=Dn)||ke,Lr(r,e),Dn=ue):Lr(r,e),Jr(e),h&8192){if(ue=e.memoizedState!==null,(e.stateNode.isHidden=ue)&&!ke&&(e.mode&1)!==0)for(Ge=e,ke=e.child;ke!==null;){for(Be=Ge=ke;Ge!==null;){switch(Ce=Ge,Ve=Ce.child,Ce.tag){case 0:case 11:case 14:case 15:Ka(4,Ce,Ce.return);break;case 1:Zs(Ce,Ce.return);var $e=Ce.stateNode;if(typeof $e.componentWillUnmount=="function"){h=Ce,a=Ce.return;try{r=h,$e.props=r.memoizedProps,$e.state=r.memoizedState,$e.componentWillUnmount()}catch(Xe){tn(h,a,Xe)}}break;case 5:Zs(Ce,Ce.return);break;case 22:if(Ce.memoizedState!==null){Dp(Be);continue}}Ve!==null?(Ve.return=Ce,Ge=Ve):Dp(Be)}ke=ke.sibling}e:for(ke=null,Be=e;;){if(Be.tag===5){if(ke===null){ke=Be;try{y=Be.stateNode,ue?(E=y.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(q=Be.stateNode,J=Be.memoizedProps.style,I=J!=null&&J.hasOwnProperty("display")?J.display:null,q.style.display=An("display",I))}catch(Xe){tn(e,e.return,Xe)}}}else if(Be.tag===6){if(ke===null)try{Be.stateNode.nodeValue=ue?"":Be.memoizedProps}catch(Xe){tn(e,e.return,Xe)}}else if((Be.tag!==22&&Be.tag!==23||Be.memoizedState===null||Be===e)&&Be.child!==null){Be.child.return=Be,Be=Be.child;continue}if(Be===e)break e;for(;Be.sibling===null;){if(Be.return===null||Be.return===e)break e;ke===Be&&(ke=null),Be=Be.return}ke===Be&&(ke=null),Be.sibling.return=Be.return,Be=Be.sibling}}break;case 19:Lr(r,e),Jr(e),h&4&&Sp(e);break;case 21:break;default:Lr(r,e),Jr(e)}}function Jr(e){var r=e.flags;if(r&2){try{e:{for(var a=e.return;a!==null;){if(Cp(a)){var h=a;break e}a=a.return}throw Error(i(160))}switch(h.tag){case 5:var y=h.stateNode;h.flags&32&&(Wt(y,""),h.flags&=-33);var E=Ep(e);Pf(e,E,y);break;case 3:case 4:var I=h.stateNode.containerInfo,q=Ep(e);Bf(e,q,I);break;default:throw Error(i(161))}}catch(J){tn(e,e.return,J)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function Yv(e,r,a){Ge=e,Pp(e)}function Pp(e,r,a){for(var h=(e.mode&1)!==0;Ge!==null;){var y=Ge,E=y.child;if(y.tag===22&&h){var I=y.memoizedState!==null||Cc;if(!I){var q=y.alternate,J=q!==null&&q.memoizedState!==null||Dn;q=Cc;var ue=Dn;if(Cc=I,(Dn=J)&&!ue)for(Ge=y;Ge!==null;)I=Ge,J=I.child,I.tag===22&&I.memoizedState!==null?Rp(y):J!==null?(J.return=I,Ge=J):Rp(y);for(;E!==null;)Ge=E,Pp(E),E=E.sibling;Ge=y,Cc=q,Dn=ue}Tp(e)}else(y.subtreeFlags&8772)!==0&&E!==null?(E.return=y,Ge=E):Tp(e)}}function Tp(e){for(;Ge!==null;){var r=Ge;if((r.flags&8772)!==0){var a=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Dn||Ec(5,r);break;case 1:var h=r.stateNode;if(r.flags&4&&!Dn)if(a===null)h.componentDidMount();else{var y=r.elementType===r.type?a.memoizedProps:Nr(r.type,a.memoizedProps);h.componentDidUpdate(y,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var E=r.updateQueue;E!==null&&Dh(r,E,h);break;case 3:var I=r.updateQueue;if(I!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}Dh(r,I,a)}break;case 5:var q=r.stateNode;if(a===null&&r.flags&4){a=q;var J=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":J.autoFocus&&a.focus();break;case"img":J.src&&(a.src=J.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var ue=r.alternate;if(ue!==null){var ke=ue.memoizedState;if(ke!==null){var Be=ke.dehydrated;Be!==null&&tr(Be)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}Dn||r.flags&512&&Sf(r)}catch(Ce){tn(r,r.return,Ce)}}if(r===e){Ge=null;break}if(a=r.sibling,a!==null){a.return=r.return,Ge=a;break}Ge=r.return}}function Dp(e){for(;Ge!==null;){var r=Ge;if(r===e){Ge=null;break}var a=r.sibling;if(a!==null){a.return=r.return,Ge=a;break}Ge=r.return}}function Rp(e){for(;Ge!==null;){var r=Ge;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{Ec(4,r)}catch(J){tn(r,a,J)}break;case 1:var h=r.stateNode;if(typeof h.componentDidMount=="function"){var y=r.return;try{h.componentDidMount()}catch(J){tn(r,y,J)}}var E=r.return;try{Sf(r)}catch(J){tn(r,E,J)}break;case 5:var I=r.return;try{Sf(r)}catch(J){tn(r,I,J)}}}catch(J){tn(r,r.return,J)}if(r===e){Ge=null;break}var q=r.sibling;if(q!==null){q.return=r.return,Ge=q;break}Ge=r.return}}var Xv=Math.ceil,kc=F.ReactCurrentDispatcher,Tf=F.ReactCurrentOwner,_r=F.ReactCurrentBatchConfig,Bt=0,pn=null,sn=null,yn=0,lr=0,Ws=eo(0),un=0,Qa=null,zo=0,Sc=0,Df=0,Ya=null,Gn=null,Rf=0,qs=1/0,Ei=null,Bc=!1,Nf=null,so=null,Pc=!1,ao=null,Tc=0,Xa=0,Ff=null,Dc=-1,Rc=0;function In(){return(Bt&6)!==0?Kt():Dc!==-1?Dc:Dc=Kt()}function lo(e){return(e.mode&1)===0?1:(Bt&2)!==0&&yn!==0?yn&-yn:Lv.transition!==null?(Rc===0&&(Rc=Ll()),Rc):(e=Ct,e!==0||(e=window.event,e=e===void 0?16:_t(e.type)),e)}function Mr(e,r,a,h){if(50<Xa)throw Xa=0,Ff=null,Error(i(185));Jn(e,a,h),((Bt&2)===0||e!==pn)&&(e===pn&&((Bt&2)===0&&(Sc|=a),un===4&&co(e,yn)),$n(e,h),a===1&&Bt===0&&(r.mode&1)===0&&(qs=Kt()+500,sc&&no()))}function $n(e,r){var a=e.callbackNode;fs(e,r);var h=zt(e,e===pn?yn:0);if(h===0)a!==null&&ha(a),e.callbackNode=null,e.callbackPriority=0;else if(r=h&-h,e.callbackPriority!==r){if(a!=null&&ha(a),r===1)e.tag===0?Fv(Fp.bind(null,e)):vh(Fp.bind(null,e)),Sn(function(){(Bt&6)===0&&no()}),a=null;else{switch(Ii(h)){case 1:a=pa;break;case 4:a=Fl;break;case 16:a=us;break;case 536870912:a=Ni;break;default:a=us}a=Vp(a,Np.bind(null,e))}e.callbackPriority=r,e.callbackNode=a}}function Np(e,r){if(Dc=-1,Rc=0,(Bt&6)!==0)throw Error(i(327));var a=e.callbackNode;if(Gs()&&e.callbackNode!==a)return null;var h=zt(e,e===pn?yn:0);if(h===0)return null;if((h&30)!==0||(h&e.expiredLanes)!==0||r)r=Nc(e,h);else{r=h;var y=Bt;Bt|=2;var E=Mp();(pn!==e||yn!==r)&&(Ei=null,qs=Kt()+500,Vo(e,r));do try{ty();break}catch(q){Lp(e,q)}while(!0);Yd(),kc.current=E,Bt=y,sn!==null?r=0:(pn=null,yn=0,r=un)}if(r!==0){if(r===2&&(y=En(e),y!==0&&(h=y,r=Lf(e,y))),r===1)throw a=Qa,Vo(e,0),co(e,h),$n(e,Kt()),a;if(r===6)co(e,h);else{if(y=e.current.alternate,(h&30)===0&&!Jv(y)&&(r=Nc(e,h),r===2&&(E=En(e),E!==0&&(h=E,r=Lf(e,E))),r===1))throw a=Qa,Vo(e,0),co(e,h),$n(e,Kt()),a;switch(e.finishedWork=y,e.finishedLanes=h,r){case 0:case 1:throw Error(i(345));case 2:Uo(e,Gn,Ei);break;case 3:if(co(e,h),(h&130023424)===h&&(r=Rf+500-Kt(),10<r)){if(zt(e,0)!==0)break;if(y=e.suspendedLanes,(y&h)!==h){In(),e.pingedLanes|=e.suspendedLanes&y;break}e.timeoutHandle=ln(Uo.bind(null,e,Gn,Ei),r);break}Uo(e,Gn,Ei);break;case 4:if(co(e,h),(h&4194240)===h)break;for(r=e.eventTimes,y=-1;0<h;){var I=31-ft(h);E=1<<I,I=r[I],I>y&&(y=I),h&=~E}if(h=y,h=Kt()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*Xv(h/1960))-h,10<h){e.timeoutHandle=ln(Uo.bind(null,e,Gn,Ei),h);break}Uo(e,Gn,Ei);break;case 5:Uo(e,Gn,Ei);break;default:throw Error(i(329))}}}return $n(e,Kt()),e.callbackNode===a?Np.bind(null,e):null}function Lf(e,r){var a=Ya;return e.current.memoizedState.isDehydrated&&(Vo(e,r).flags|=256),e=Nc(e,r),e!==2&&(r=Gn,Gn=a,r!==null&&Mf(r)),e}function Mf(e){Gn===null?Gn=e:Gn.push.apply(Gn,e)}function Jv(e){for(var r=e;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var y=a[h],E=y.getSnapshot;y=y.value;try{if(!ir(E(),y))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function co(e,r){for(r&=~Df,r&=~Sc,e.suspendedLanes|=r,e.pingedLanes&=~r,e=e.expirationTimes;0<r;){var a=31-ft(r),h=1<<a;e[a]=-1,r&=~h}}function Fp(e){if((Bt&6)!==0)throw Error(i(327));Gs();var r=zt(e,0);if((r&1)===0)return $n(e,Kt()),null;var a=Nc(e,r);if(e.tag!==0&&a===2){var h=En(e);h!==0&&(r=h,a=Lf(e,h))}if(a===1)throw a=Qa,Vo(e,0),co(e,r),$n(e,Kt()),a;if(a===6)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=r,Uo(e,Gn,Ei),$n(e,Kt()),null}function If(e,r){var a=Bt;Bt|=1;try{return e(r)}finally{Bt=a,Bt===0&&(qs=Kt()+500,sc&&no())}}function Ho(e){ao!==null&&ao.tag===0&&(Bt&6)===0&&Gs();var r=Bt;Bt|=1;var a=_r.transition,h=Ct;try{if(_r.transition=null,Ct=1,e)return e()}finally{Ct=h,_r.transition=a,Bt=r,(Bt&6)===0&&no()}}function Of(){lr=Ws.current,Ut(Ws)}function Vo(e,r){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(a!==-1&&(e.timeoutHandle=-1,on(a)),sn!==null)for(a=sn.return;a!==null;){var h=a;switch(qd(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&ic();break;case 3:Vs(),Ut(Zn),Ut(Bn),sf();break;case 5:rf(h);break;case 4:Vs();break;case 13:Ut(Yt);break;case 19:Ut(Yt);break;case 10:Xd(h.type._context);break;case 22:case 23:Of()}a=a.return}if(pn=e,sn=e=uo(e.current,null),yn=lr=r,un=0,Qa=null,Df=Sc=zo=0,Gn=Ya=null,Io!==null){for(r=0;r<Io.length;r++)if(a=Io[r],h=a.interleaved,h!==null){a.interleaved=null;var y=h.next,E=a.pending;if(E!==null){var I=E.next;E.next=y,h.next=I}a.pending=h}Io=null}return e}function Lp(e,r){do{var a=sn;try{if(Yd(),gc.current=yc,xc){for(var h=Xt.memoizedState;h!==null;){var y=h.queue;y!==null&&(y.pending=null),h=h.next}xc=!1}if(jo=0,hn=cn=Xt=null,Za=!1,Wa=0,Tf.current=null,a===null||a.return===null){un=1,Qa=r,sn=null;break}e:{var E=e,I=a.return,q=a,J=r;if(r=yn,q.flags|=32768,J!==null&&typeof J=="object"&&typeof J.then=="function"){var ue=J,ke=q,Be=ke.tag;if((ke.mode&1)===0&&(Be===0||Be===11||Be===15)){var Ce=ke.alternate;Ce?(ke.updateQueue=Ce.updateQueue,ke.memoizedState=Ce.memoizedState,ke.lanes=Ce.lanes):(ke.updateQueue=null,ke.memoizedState=null)}var Ve=sp(I);if(Ve!==null){Ve.flags&=-257,ap(Ve,I,q,E,r),Ve.mode&1&&op(E,ue,r),r=Ve,J=ue;var $e=r.updateQueue;if($e===null){var Xe=new Set;Xe.add(J),r.updateQueue=Xe}else $e.add(J);break e}else{if((r&1)===0){op(E,ue,r),jf();break e}J=Error(i(426))}}else if($t&&q.mode&1){var nn=sp(I);if(nn!==null){(nn.flags&65536)===0&&(nn.flags|=256),ap(nn,I,q,E,r),Kd(Us(J,q));break e}}E=J=Us(J,q),un!==4&&(un=2),Ya===null?Ya=[E]:Ya.push(E),E=I;do{switch(E.tag){case 3:E.flags|=65536,r&=-r,E.lanes|=r;var ae=rp(E,J,r);Th(E,ae);break e;case 1:q=J;var te=E.type,le=E.stateNode;if((E.flags&128)===0&&(typeof te.getDerivedStateFromError=="function"||le!==null&&typeof le.componentDidCatch=="function"&&(so===null||!so.has(le)))){E.flags|=65536,r&=-r,E.lanes|=r;var De=ip(E,q,r);Th(E,De);break e}}E=E.return}while(E!==null)}Op(a)}catch(Je){r=Je,sn===a&&a!==null&&(sn=a=a.return);continue}break}while(!0)}function Mp(){var e=kc.current;return kc.current=yc,e===null?yc:e}function jf(){(un===0||un===3||un===2)&&(un=4),pn===null||(zo&268435455)===0&&(Sc&268435455)===0||co(pn,yn)}function Nc(e,r){var a=Bt;Bt|=2;var h=Mp();(pn!==e||yn!==r)&&(Ei=null,Vo(e,r));do try{ey();break}catch(y){Lp(e,y)}while(!0);if(Yd(),Bt=a,kc.current=h,sn!==null)throw Error(i(261));return pn=null,yn=0,un}function ey(){for(;sn!==null;)Ip(sn)}function ty(){for(;sn!==null&&!Ed();)Ip(sn)}function Ip(e){var r=Hp(e.alternate,e,lr);e.memoizedProps=e.pendingProps,r===null?Op(e):sn=r,Tf.current=null}function Op(e){var r=e;do{var a=r.alternate;if(e=r.return,(r.flags&32768)===0){if(a=Gv(a,r,lr),a!==null){sn=a;return}}else{if(a=$v(a,r),a!==null){a.flags&=32767,sn=a;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{un=6,sn=null;return}}if(r=r.sibling,r!==null){sn=r;return}sn=r=e}while(r!==null);un===0&&(un=5)}function Uo(e,r,a){var h=Ct,y=_r.transition;try{_r.transition=null,Ct=1,ny(e,r,a,h)}finally{_r.transition=y,Ct=h}return null}function ny(e,r,a,h){do Gs();while(ao!==null);if((Bt&6)!==0)throw Error(i(327));a=e.finishedWork;var y=e.finishedLanes;if(a===null)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var E=a.lanes|a.childLanes;if(en(e,E),e===pn&&(sn=pn=null,yn=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Pc||(Pc=!0,Vp(us,function(){return Gs(),null})),E=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||E){E=_r.transition,_r.transition=null;var I=Ct;Ct=1;var q=Bt;Bt|=4,Tf.current=null,Qv(e,a),Bp(a,e),pr(nt),ko=!!Ie,nt=Ie=null,e.current=a,Yv(a),cs(),Bt=q,Ct=I,_r.transition=E}else e.current=a;if(Pc&&(Pc=!1,ao=e,Tc=y),E=e.pendingLanes,E===0&&(so=null),_o(a.stateNode),$n(e,Kt()),r!==null)for(h=e.onRecoverableError,a=0;a<r.length;a++)y=r[a],h(y.value,{componentStack:y.stack,digest:y.digest});if(Bc)throw Bc=!1,e=Nf,Nf=null,e;return(Tc&1)!==0&&e.tag!==0&&Gs(),E=e.pendingLanes,(E&1)!==0?e===Ff?Xa++:(Xa=0,Ff=e):Xa=0,no(),null}function Gs(){if(ao!==null){var e=Ii(Tc),r=_r.transition,a=Ct;try{if(_r.transition=null,Ct=16>e?16:e,ao===null)var h=!1;else{if(e=ao,ao=null,Tc=0,(Bt&6)!==0)throw Error(i(331));var y=Bt;for(Bt|=4,Ge=e.current;Ge!==null;){var E=Ge,I=E.child;if((Ge.flags&16)!==0){var q=E.deletions;if(q!==null){for(var J=0;J<q.length;J++){var ue=q[J];for(Ge=ue;Ge!==null;){var ke=Ge;switch(ke.tag){case 0:case 11:case 15:Ka(8,ke,E)}var Be=ke.child;if(Be!==null)Be.return=ke,Ge=Be;else for(;Ge!==null;){ke=Ge;var Ce=ke.sibling,Ve=ke.return;if(bp(ke),ke===ue){Ge=null;break}if(Ce!==null){Ce.return=Ve,Ge=Ce;break}Ge=Ve}}}var $e=E.alternate;if($e!==null){var Xe=$e.child;if(Xe!==null){$e.child=null;do{var nn=Xe.sibling;Xe.sibling=null,Xe=nn}while(Xe!==null)}}Ge=E}}if((E.subtreeFlags&2064)!==0&&I!==null)I.return=E,Ge=I;else e:for(;Ge!==null;){if(E=Ge,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:Ka(9,E,E.return)}var ae=E.sibling;if(ae!==null){ae.return=E.return,Ge=ae;break e}Ge=E.return}}var te=e.current;for(Ge=te;Ge!==null;){I=Ge;var le=I.child;if((I.subtreeFlags&2064)!==0&&le!==null)le.return=I,Ge=le;else e:for(I=te;Ge!==null;){if(q=Ge,(q.flags&2048)!==0)try{switch(q.tag){case 0:case 11:case 15:Ec(9,q)}}catch(Je){tn(q,q.return,Je)}if(q===I){Ge=null;break e}var De=q.sibling;if(De!==null){De.return=q.return,Ge=De;break e}Ge=q.return}}if(Bt=y,no(),Xn&&typeof Xn.onPostCommitFiberRoot=="function")try{Xn.onPostCommitFiberRoot(yo,e)}catch{}h=!0}return h}finally{Ct=a,_r.transition=r}}return!1}function jp(e,r,a){r=Us(a,r),r=rp(e,r,1),e=io(e,r,1),r=In(),e!==null&&(Jn(e,1,r),$n(e,r))}function tn(e,r,a){if(e.tag===3)jp(e,e,a);else for(;r!==null;){if(r.tag===3){jp(r,e,a);break}else if(r.tag===1){var h=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(so===null||!so.has(h))){e=Us(a,e),e=ip(r,e,1),r=io(r,e,1),e=In(),r!==null&&(Jn(r,1,e),$n(r,e));break}}r=r.return}}function ry(e,r,a){var h=e.pingCache;h!==null&&h.delete(r),r=In(),e.pingedLanes|=e.suspendedLanes&a,pn===e&&(yn&a)===a&&(un===4||un===3&&(yn&130023424)===yn&&500>Kt()-Rf?Vo(e,0):Df|=a),$n(e,r)}function zp(e,r){r===0&&((e.mode&1)===0?r=1:(r=Li,Li<<=1,(Li&130023424)===0&&(Li=4194304)));var a=In();e=wi(e,r),e!==null&&(Jn(e,r,a),$n(e,a))}function iy(e){var r=e.memoizedState,a=0;r!==null&&(a=r.retryLane),zp(e,a)}function oy(e,r){var a=0;switch(e.tag){case 13:var h=e.stateNode,y=e.memoizedState;y!==null&&(a=y.retryLane);break;case 19:h=e.stateNode;break;default:throw Error(i(314))}h!==null&&h.delete(r),zp(e,a)}var Hp;Hp=function(e,r,a){if(e!==null)if(e.memoizedProps!==r.pendingProps||Zn.current)qn=!0;else{if((e.lanes&a)===0&&(r.flags&128)===0)return qn=!1,qv(e,r,a);qn=(e.flags&131072)!==0}else qn=!1,$t&&(r.flags&1048576)!==0&&yh(r,lc,r.index);switch(r.lanes=0,r.tag){case 2:var h=r.type;bc(e,r),e=r.pendingProps;var y=Ls(r,Bn.current);Hs(r,a),y=cf(null,r,h,e,y,a);var E=uf();return r.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Wn(h)?(E=!0,oc(r)):E=!1,r.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,tf(r),y.updater=_c,r.stateNode=y,y._reactInternals=r,gf(r,h,e,a),r=yf(null,r,h,!0,E,a)):(r.tag=0,$t&&E&&Wd(r),Mn(null,r,y,a),r=r.child),r;case 16:h=r.elementType;e:{switch(bc(e,r),e=r.pendingProps,y=h._init,h=y(h._payload),r.type=h,y=r.tag=ay(h),e=Nr(h,e),y){case 0:r=vf(null,r,h,e,a);break e;case 1:r=hp(null,r,h,e,a);break e;case 11:r=lp(null,r,h,e,a);break e;case 14:r=cp(null,r,h,Nr(h.type,e),a);break e}throw Error(i(306,h,""))}return r;case 0:return h=r.type,y=r.pendingProps,y=r.elementType===h?y:Nr(h,y),vf(e,r,h,y,a);case 1:return h=r.type,y=r.pendingProps,y=r.elementType===h?y:Nr(h,y),hp(e,r,h,y,a);case 3:e:{if(pp(r),e===null)throw Error(i(387));h=r.pendingProps,E=r.memoizedState,y=E.element,Ph(e,r),pc(r,h,null,a);var I=r.memoizedState;if(h=I.element,E.isDehydrated)if(E={element:h,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},r.updateQueue.baseState=E,r.memoizedState=E,r.flags&256){y=Us(Error(i(423)),r),r=mp(e,r,h,a,y);break e}else if(h!==y){y=Us(Error(i(424)),r),r=mp(e,r,h,a,y);break e}else for(ar=Qr(r.stateNode.containerInfo.firstChild),sr=r,$t=!0,Rr=null,a=Sh(r,null,h,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Os(),h===y){r=Ci(e,r,a);break e}Mn(e,r,h,a)}r=r.child}return r;case 5:return Rh(r),e===null&&$d(r),h=r.type,y=r.pendingProps,E=e!==null?e.memoizedProps:null,I=y.children,ht(h,y)?I=null:E!==null&&ht(h,E)&&(r.flags|=32),fp(e,r),Mn(e,r,I,a),r.child;case 6:return e===null&&$d(r),null;case 13:return gp(e,r,a);case 4:return nf(r,r.stateNode.containerInfo),h=r.pendingProps,e===null?r.child=js(r,null,h,a):Mn(e,r,h,a),r.child;case 11:return h=r.type,y=r.pendingProps,y=r.elementType===h?y:Nr(h,y),lp(e,r,h,y,a);case 7:return Mn(e,r,r.pendingProps,a),r.child;case 8:return Mn(e,r,r.pendingProps.children,a),r.child;case 12:return Mn(e,r,r.pendingProps.children,a),r.child;case 10:e:{if(h=r.type._context,y=r.pendingProps,E=r.memoizedProps,I=y.value,Ht(dc,h._currentValue),h._currentValue=I,E!==null)if(ir(E.value,I)){if(E.children===y.children&&!Zn.current){r=Ci(e,r,a);break e}}else for(E=r.child,E!==null&&(E.return=r);E!==null;){var q=E.dependencies;if(q!==null){I=E.child;for(var J=q.firstContext;J!==null;){if(J.context===h){if(E.tag===1){J=bi(-1,a&-a),J.tag=2;var ue=E.updateQueue;if(ue!==null){ue=ue.shared;var ke=ue.pending;ke===null?J.next=J:(J.next=ke.next,ke.next=J),ue.pending=J}}E.lanes|=a,J=E.alternate,J!==null&&(J.lanes|=a),Jd(E.return,a,r),q.lanes|=a;break}J=J.next}}else if(E.tag===10)I=E.type===r.type?null:E.child;else if(E.tag===18){if(I=E.return,I===null)throw Error(i(341));I.lanes|=a,q=I.alternate,q!==null&&(q.lanes|=a),Jd(I,a,r),I=E.sibling}else I=E.child;if(I!==null)I.return=E;else for(I=E;I!==null;){if(I===r){I=null;break}if(E=I.sibling,E!==null){E.return=I.return,I=E;break}I=I.return}E=I}Mn(e,r,y.children,a),r=r.child}return r;case 9:return y=r.type,h=r.pendingProps.children,Hs(r,a),y=vr(y),h=h(y),r.flags|=1,Mn(e,r,h,a),r.child;case 14:return h=r.type,y=Nr(h,r.pendingProps),y=Nr(h.type,y),cp(e,r,h,y,a);case 15:return up(e,r,r.type,r.pendingProps,a);case 17:return h=r.type,y=r.pendingProps,y=r.elementType===h?y:Nr(h,y),bc(e,r),r.tag=1,Wn(h)?(e=!0,oc(r)):e=!1,Hs(r,a),tp(r,h,y),gf(r,h,y,a),yf(null,r,h,!0,e,a);case 19:return Ap(e,r,a);case 22:return dp(e,r,a)}throw Error(i(156,r.tag))};function Vp(e,r){return Nl(e,r)}function sy(e,r,a,h){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wr(e,r,a,h){return new sy(e,r,a,h)}function zf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ay(e){if(typeof e=="function")return zf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ee)return 11;if(e===pe)return 14}return 2}function uo(e,r){var a=e.alternate;return a===null?(a=wr(e.tag,r,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=r,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&14680064,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,r=e.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function Fc(e,r,a,h,y,E){var I=2;if(h=e,typeof e=="function")zf(e)&&(I=1);else if(typeof e=="string")I=5;else e:switch(e){case H:return Zo(a.children,y,E,r);case j:I=8,y|=8;break;case X:return e=wr(12,a,r,y|2),e.elementType=X,e.lanes=E,e;case W:return e=wr(13,a,r,y),e.elementType=W,e.lanes=E,e;case re:return e=wr(19,a,r,y),e.elementType=re,e.lanes=E,e;case Ae:return Lc(a,y,E,r);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case V:I=10;break e;case $:I=9;break e;case ee:I=11;break e;case pe:I=14;break e;case ie:I=16,h=null;break e}throw Error(i(130,e==null?e:typeof e,""))}return r=wr(I,a,r,y),r.elementType=e,r.type=h,r.lanes=E,r}function Zo(e,r,a,h){return e=wr(7,e,h,r),e.lanes=a,e}function Lc(e,r,a,h){return e=wr(22,e,h,r),e.elementType=Ae,e.lanes=a,e.stateNode={isHidden:!1},e}function Hf(e,r,a){return e=wr(6,e,null,r),e.lanes=a,e}function Vf(e,r,a){return r=wr(4,e.children!==null?e.children:[],e.key,r),r.lanes=a,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}function ly(e,r,a,h,y){this.tag=r,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mi(0),this.expirationTimes=Mi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mi(0),this.identifierPrefix=h,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Uf(e,r,a,h,y,E,I,q,J){return e=new ly(e,r,a,q,J),r===1?(r=1,E===!0&&(r|=8)):r=0,E=wr(3,null,null,r),e.current=E,E.stateNode=e,E.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},tf(E),e}function cy(e,r,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:h==null?null:""+h,children:e,containerInfo:r,implementation:a}}function Up(e){if(!e)return to;e=e._reactInternals;e:{if(Vr(e)!==e||e.tag!==1)throw Error(i(170));var r=e;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Wn(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(i(171))}if(e.tag===1){var a=e.type;if(Wn(a))return xh(e,a,r)}return r}function Zp(e,r,a,h,y,E,I,q,J){return e=Uf(a,h,!0,e,y,E,I,q,J),e.context=Up(null),a=e.current,h=In(),y=lo(a),E=bi(h,y),E.callback=r??null,io(a,E,y),e.current.lanes=y,Jn(e,y,h),$n(e,h),e}function Mc(e,r,a,h){var y=r.current,E=In(),I=lo(y);return a=Up(a),r.context===null?r.context=a:r.pendingContext=a,r=bi(E,I),r.payload={element:e},h=h===void 0?null:h,h!==null&&(r.callback=h),e=io(y,r,I),e!==null&&(Mr(e,y,I,E),hc(e,y,I)),I}function Ic(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Wp(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<r?a:r}}function Zf(e,r){Wp(e,r),(e=e.alternate)&&Wp(e,r)}function uy(){return null}var qp=typeof reportError=="function"?reportError:function(e){console.error(e)};function Wf(e){this._internalRoot=e}Oc.prototype.render=Wf.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(i(409));Mc(e,r,null,null)},Oc.prototype.unmount=Wf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;Ho(function(){Mc(null,e,null,null)}),r[Dt]=null}};function Oc(e){this._internalRoot=e}Oc.prototype.unstable_scheduleHydration=function(e){if(e){var r=ms();e={blockedOn:null,target:e,priority:r};for(var a=0;a<an.length&&r!==0&&r<an[a].priority;a++);an.splice(a,0,e),a===0&&gs(e)}};function qf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function jc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Gp(){}function dy(e,r,a,h,y){if(y){if(typeof h=="function"){var E=h;h=function(){var ue=Ic(I);E.call(ue)}}var I=Zp(r,h,e,0,null,!1,!1,"",Gp);return e._reactRootContainer=I,e[Dt]=I.current,Qi(e.nodeType===8?e.parentNode:e),Ho(),I}for(;y=e.lastChild;)e.removeChild(y);if(typeof h=="function"){var q=h;h=function(){var ue=Ic(J);q.call(ue)}}var J=Uf(e,0,!1,null,null,!1,!1,"",Gp);return e._reactRootContainer=J,e[Dt]=J.current,Qi(e.nodeType===8?e.parentNode:e),Ho(function(){Mc(r,J,a,h)}),J}function zc(e,r,a,h,y){var E=a._reactRootContainer;if(E){var I=E;if(typeof y=="function"){var q=y;y=function(){var J=Ic(I);q.call(J)}}Mc(r,I,e,y)}else I=dy(a,r,e,y,h);return Ic(I)}hs=function(e){switch(e.tag){case 3:var r=e.stateNode;if(r.current.memoizedState.isDehydrated){var a=ut(r.pendingLanes);a!==0&&(Sr(r,a|1),$n(r,Kt()),(Bt&6)===0&&(qs=Kt()+500,no()))}break;case 13:Ho(function(){var h=wi(e,1);if(h!==null){var y=In();Mr(h,e,1,y)}}),Zf(e,1)}},ai=function(e){if(e.tag===13){var r=wi(e,134217728);if(r!==null){var a=In();Mr(r,e,134217728,a)}Zf(e,134217728)}},ps=function(e){if(e.tag===13){var r=lo(e),a=wi(e,r);if(a!==null){var h=In();Mr(a,e,r,h)}Zf(e,r)}},ms=function(){return Ct},wo=function(e,r){var a=Ct;try{return Ct=e,r()}finally{Ct=a}},_e=function(e,r,a){switch(r){case"input":if(et(e,a),r=a.name,a.type==="radio"&&r!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var h=a[r];if(h!==e&&h.form===e.form){var y=Ns(h);if(!y)throw Error(i(90));Fe(h),et(h,y)}}}break;case"textarea":qe(e,a);break;case"select":r=a.value,r!=null&&tt(e,!!a.multiple,r,!1)}},Ot=If,qt=Ho;var fy={usingClientEntryPoint:!1,Events:[xi,Ai,Ns,He,kt,If]},Ja={findFiberByHostInstance:gi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hy={bundleType:Ja.bundleType,version:Ja.version,rendererPackageName:Ja.rendererPackageName,rendererConfig:Ja.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Dl(e),e===null?null:e.stateNode},findFiberByHostInstance:Ja.findFiberByHostInstance||uy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hc.isDisabled&&Hc.supportsFiber)try{yo=Hc.inject(hy),Xn=Hc}catch{}}return Kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fy,Kn.createPortal=function(e,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qf(r))throw Error(i(200));return cy(e,r,null,a)},Kn.createRoot=function(e,r){if(!qf(e))throw Error(i(299));var a=!1,h="",y=qp;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onRecoverableError!==void 0&&(y=r.onRecoverableError)),r=Uf(e,1,!1,null,null,a,!1,h,y),e[Dt]=r.current,Qi(e.nodeType===8?e.parentNode:e),new Wf(r)},Kn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=Dl(r),e=e===null?null:e.stateNode,e},Kn.flushSync=function(e){return Ho(e)},Kn.hydrate=function(e,r,a){if(!jc(r))throw Error(i(200));return zc(null,e,r,!0,a)},Kn.hydrateRoot=function(e,r,a){if(!qf(e))throw Error(i(405));var h=a!=null&&a.hydratedSources||null,y=!1,E="",I=qp;if(a!=null&&(a.unstable_strictMode===!0&&(y=!0),a.identifierPrefix!==void 0&&(E=a.identifierPrefix),a.onRecoverableError!==void 0&&(I=a.onRecoverableError)),r=Zp(r,null,e,1,a??null,y,!1,E,I),e[Dt]=r.current,Qi(e),h)for(e=0;e<h.length;e++)a=h[e],y=a._getVersion,y=y(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,y]:r.mutableSourceEagerHydrationData.push(a,y);return new Oc(r)},Kn.render=function(e,r,a){if(!jc(r))throw Error(i(200));return zc(null,e,r,!1,a)},Kn.unmountComponentAtNode=function(e){if(!jc(e))throw Error(i(40));return e._reactRootContainer?(Ho(function(){zc(null,null,e,!1,function(){e._reactRootContainer=null,e[Dt]=null})}),!0):!1},Kn.unstable_batchedUpdates=If,Kn.unstable_renderSubtreeIntoContainer=function(e,r,a,h){if(!jc(a))throw Error(i(200));if(e==null||e._reactInternals===void 0)throw Error(i(38));return zc(e,r,a,!1,h)},Kn.version="18.3.1-next-f1338f8080-20240426",Kn}var tm;function xx(){if(tm)return Qf.exports;tm=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(s){console.error(s)}}return n(),Qf.exports=by(),Qf.exports}var nm;function Cy(){if(nm)return Vc;nm=1;var n=xx();return Vc.createRoot=n.createRoot,Vc.hydrateRoot=n.hydrateRoot,Vc}var Ey=Cy();const ky="/api",O0=100;async function vt(n,s){const i=await fetch(`${ky}${n}`,{...s,headers:{"Content-Type":"application/json",...s==null?void 0:s.headers}});if(!i.ok){const l=await i.text();let c=l||i.statusText;try{const u=JSON.parse(l);u.detail&&(c=u.detail)}catch{}throw new Error(c)}return i.json()}function Sy(n){return n instanceof DOMException&&n.name==="AbortError"?!0:n instanceof Error&&n.name==="AbortError"}const dt={getHealth:()=>vt("/health"),getRadioConfig:()=>vt("/radio/config"),updateRadioConfig:n=>vt("/radio/config",{method:"PATCH",body:JSON.stringify(n)}),setPrivateKey:n=>vt("/radio/private-key",{method:"PUT",body:JSON.stringify({private_key:n})}),sendAdvertisement:(n=!0)=>vt(`/radio/advertise?flood=${n}`,{method:"POST"}),rebootRadio:()=>vt("/radio/reboot",{method:"POST"}),reconnectRadio:()=>vt("/radio/reconnect",{method:"POST"}),getContacts:(n=100,s=0)=>vt(`/contacts?limit=${n}&offset=${s}`),getContact:n=>vt(`/contacts/${n}`),syncContacts:()=>vt("/contacts/sync",{method:"POST"}),addContactToRadio:n=>vt(`/contacts/${n}/add-to-radio`,{method:"POST"}),removeContactFromRadio:n=>vt(`/contacts/${n}/remove-from-radio`,{method:"POST"}),deleteContact:n=>vt(`/contacts/${n}`,{method:"DELETE"}),createContact:(n,s,i)=>vt("/contacts",{method:"POST",body:JSON.stringify({public_key:n,name:s,try_historical:i})}),markContactRead:n=>vt(`/contacts/${n}/mark-read`,{method:"POST"}),requestTelemetry:(n,s)=>vt(`/contacts/${n}/telemetry`,{method:"POST",body:JSON.stringify({password:s})}),sendRepeaterCommand:(n,s)=>vt(`/contacts/${n}/command`,{method:"POST",body:JSON.stringify({command:s})}),getChannels:()=>vt("/channels"),getChannel:n=>vt(`/channels/${n}`),createChannel:(n,s)=>vt("/channels",{method:"POST",body:JSON.stringify({name:n,key:s})}),syncChannels:()=>vt("/channels/sync",{method:"POST"}),deleteChannel:n=>vt(`/channels/${n}`,{method:"DELETE"}),markChannelRead:n=>vt(`/channels/${n}/mark-read`,{method:"POST"}),getMessages:(n,s)=>{const i=new URLSearchParams;n!=null&&n.limit&&i.set("limit",n.limit.toString()),n!=null&&n.offset&&i.set("offset",n.offset.toString()),n!=null&&n.type&&i.set("type",n.type),n!=null&&n.conversation_key&&i.set("conversation_key",n.conversation_key);const l=i.toString();return vt(`/messages${l?`?${l}`:""}`,{signal:s})},getMessagesBulk:(n,s=O0)=>vt(`/messages/bulk?limit_per_conversation=${s}`,{method:"POST",body:JSON.stringify(n)}),sendDirectMessage:(n,s)=>vt("/messages/direct",{method:"POST",body:JSON.stringify({destination:n,text:s})}),sendChannelMessage:(n,s)=>vt("/messages/channel",{method:"POST",body:JSON.stringify({channel_key:n,text:s})}),getUndecryptedPacketCount:()=>vt("/packets/undecrypted/count"),decryptHistoricalPackets:n=>vt("/packets/decrypt/historical",{method:"POST",body:JSON.stringify(n)}),runMaintenance:n=>vt("/packets/maintenance",{method:"POST",body:JSON.stringify({prune_undecrypted_days:n})}),markAllRead:()=>vt("/read-state/mark-all-read",{method:"POST"}),getSettings:()=>vt("/settings"),updateSettings:n=>vt("/settings",{method:"PATCH",body:JSON.stringify(n)}),addFavorite:(n,s)=>vt("/settings/favorites",{method:"POST",body:JSON.stringify({type:n,id:s})}),removeFavorite:(n,s)=>vt("/settings/favorites",{method:"DELETE",body:JSON.stringify({type:n,id:s})}),toggleFavorite:(n,s)=>vt("/settings/favorites/toggle",{method:"POST",body:JSON.stringify({type:n,id:s})}),updateLastMessageTime:(n,s)=>vt("/settings/last-message-time",{method:"POST",body:JSON.stringify({state_key:n,timestamp:s})}),migratePreferences:n=>vt("/settings/migrate",{method:"POST",body:JSON.stringify(n)})};function By(n){const s=D.useRef(null),i=D.useRef(null),[l,c]=D.useState(!1),u=D.useRef(n);D.useEffect(()=>{u.current=n},[n]);const p=D.useCallback(()=>{const d=window.location.protocol==="https:"?"wss:":"ws:",m=window.location.port==="5173"?"ws://localhost:8000/api/ws":`${d}//${window.location.host}/api/ws`,x=new WebSocket(m);x.onopen=()=>{console.log("WebSocket connected"),c(!0)},x.onclose=()=>{console.log("WebSocket disconnected"),c(!1),s.current=null,i.current=window.setTimeout(()=>{console.log("Attempting WebSocket reconnect..."),p()},3e3)},x.onerror=A=>{console.error("WebSocket error:",A)},x.onmessage=A=>{var _,k,R,C,w,B,S,T,F;try{const M=JSON.parse(A.data),z=u.current;switch(M.type){case"health":(_=z.onHealth)==null||_.call(z,M.data);break;case"contacts":(k=z.onContacts)==null||k.call(z,M.data);break;case"channels":(R=z.onChannels)==null||R.call(z,M.data);break;case"message":(C=z.onMessage)==null||C.call(z,M.data);break;case"contact":(w=z.onContact)==null||w.call(z,M.data);break;case"raw_packet":(B=z.onRawPacket)==null||B.call(z,M.data);break;case"message_acked":{const H=M.data;(S=z.onMessageAcked)==null||S.call(z,H.message_id,H.ack_count,H.paths);break}case"error":(T=z.onError)==null||T.call(z,M.data);break;case"success":(F=z.onSuccess)==null||F.call(z,M.data);break;case"pong":break;default:console.log("Unknown WebSocket message type:",M.type)}}catch(M){console.error("Failed to parse WebSocket message:",M)}},s.current=x},[]);return D.useEffect(()=>{p();const d=setInterval(()=>{var g;((g=s.current)==null?void 0:g.readyState)===WebSocket.OPEN&&s.current.send("ping")},3e4);return()=>{clearInterval(d),i.current&&clearTimeout(i.current),s.current&&s.current.close()}},[p]),{connected:l}}const td=2,Py=300*1e3;function rm(n){const s=Math.floor(n/3600),i=Math.floor(n%3600/60),l=Math.floor(n%60);return`${s}h${i}m${l}s`}function Ty(n){return n<=5?"":n<=10?"":n<=25?"":n<=50?"":""}function Dy(n,s){const l=Math.floor(Date.now()/1e3)-n.startTime,c=s.uptime_seconds-n.uptime,u=s.airtime_seconds-n.txAirtime,p=s.rx_airtime_seconds-n.rxAirtime,d=s.sent_flood-n.sentFlood,g=s.sent_direct-n.sentDirect,m=s.recv_flood-n.recvFlood,x=s.recv_direct-n.recvDirect,A=c>0?u/c*100:0,_=c>0?p/c*100:0,k=d+g,R=m+x,C=k>0?A*(d/k):0,w=k>0?A*(g/k):0,B=R>0?_*(m/R):0,S=R>0?_*(x/R):0,T=Ty(A),F=Math.max(0,100-A-_);return["Airtime/Duty Cycle Statistics",`Duration: ${rm(l)} (uptime delta: ${rm(c)})`,"",`${T} TX Airtime: ${A.toFixed(3)}% (${k.toLocaleString()} pkts)`,`  Flood: ${C.toFixed(3)}% (${d.toLocaleString()} pkts)`,`  Direct: ${w.toFixed(3)}% (${g.toLocaleString()} pkts)`,"",`RX Airtime: ${_.toFixed(3)}% (${R.toLocaleString()} pkts)`,`  Flood: ${B.toFixed(3)}% (${m.toLocaleString()} pkts)`,`  Direct: ${S.toFixed(3)}% (${x.toLocaleString()} pkts)`,"",`Idle: ${F.toFixed(3)}%`].join(`
`)}function $s(n,s,i){const l=Math.floor(Date.now()/1e3);return{id:-Date.now(),type:"PRIV",conversation_key:n,text:s,sender_timestamp:l,received_at:l,paths:null,txt_type:0,signature:null,outgoing:i,acked:1}}function Ry(n){const s=D.useRef(null),i=D.useRef(null),l=D.useCallback(()=>{i.current!==null&&(clearInterval(i.current),i.current=null),s.current=null},[]),c=D.useCallback(async()=>{const p=s.current;if(!p)return;let d=null,g=null;for(let m=0;m<2;m++)try{d=await dt.requestTelemetry(p.conversationId,"");break}catch(x){g=x instanceof Error?x:new Error("Unknown error"),m===0&&await new Promise(A=>setTimeout(A,2e3))}if(d){const m=$s(p.conversationId,Dy(p,d),!1);n(x=>[...x,m])}else{const m=$s(p.conversationId,`Duty cycle poll failed after retry: ${(g==null?void 0:g.message)??"Unknown error"}`,!1);n(x=>[...x,m])}},[n]),u=D.useCallback(async(p,d)=>{const g=p.trim().toLowerCase();if(g==="dutycycle_start"){l();let m=null,x=null;for(let k=0;k<2;k++)try{m=await dt.requestTelemetry(d,"");break}catch(R){x=R instanceof Error?R:new Error("Unknown error"),k===0&&await new Promise(C=>setTimeout(C,2e3))}if(!m){const k=$s(d,`Failed to start duty cycle tracking after retry: ${(x==null?void 0:x.message)??"Unknown error"}`,!1);return n(R=>[...R,k]),!0}const A=Math.floor(Date.now()/1e3);s.current={startTime:A,uptime:m.uptime_seconds,txAirtime:m.airtime_seconds,rxAirtime:m.rx_airtime_seconds,sentFlood:m.sent_flood,sentDirect:m.sent_direct,recvFlood:m.recv_flood,recvDirect:m.recv_direct,conversationId:d};const _=$s(d,`Airtime/duty cycle statistics gathering begins at ${A}. Logs will follow every 5 minutes. To stop, run dutycycle_stop or navigate away from this conversation.`,!1);return n(k=>[...k,_]),i.current=window.setInterval(c,Py),!0}if(g==="dutycycle_stop"){if(s.current&&s.current.conversationId===d){await c(),l();const m=$s(d,"Airtime/duty cycle statistics gathering stopped.",!1);n(x=>[...x,m])}else{const m=$s(d,"Duty cycle tracking is not active.",!1);n(x=>[...x,m])}return!0}return!1},[n,l,c]);return D.useEffect(()=>()=>{i.current!==null&&clearInterval(i.current)},[]),{handleAirtimeCommand:u,stopTracking:l}}function eu(n){if(n<60)return`${n}s`;const s=Math.floor(n/86400),i=Math.floor(n%86400/3600),l=Math.floor(n%3600/60);return s>0?i>0&&l>0?`${s}d${i}h${l}m`:i>0?`${s}d${i}h`:l>0?`${s}d${l}m`:`${s}d`:i>0?l>0?`${i}h${l}m`:`${i}h`:`${l}m`}function Ny(n){return["Telemetry",`Battery Voltage: ${n.battery_volts.toFixed(3)}V`,`Uptime: ${eu(n.uptime_seconds)}`,`TX Airtime: ${eu(n.airtime_seconds)}`,`RX Airtime: ${eu(n.rx_airtime_seconds)}`,"",`Noise Floor: ${n.noise_floor_dbm} dBm`,`Last RSSI: ${n.last_rssi_dbm} dBm`,`Last SNR: ${n.last_snr_db.toFixed(1)} dB`,"",`Packets: ${n.packets_received.toLocaleString()} rx / ${n.packets_sent.toLocaleString()} tx`,`Flood: ${n.recv_flood.toLocaleString()} rx / ${n.sent_flood.toLocaleString()} tx`,`Direct: ${n.recv_direct.toLocaleString()} rx / ${n.sent_direct.toLocaleString()} tx`,`Duplicates: ${n.flood_dups.toLocaleString()} flood / ${n.direct_dups.toLocaleString()} direct`,"",`TX Queue: ${n.tx_queue_len}`,`Debug Flags: ${n.full_events}`].join(`
`)}function Fy(n){if(n.length===0)return`Neighbors
No neighbors reported`;const s=[...n].sort((l,c)=>c.snr-l.snr),i=[`Neighbors (${s.length})`];for(const l of s){const c=l.name||l.pubkey_prefix,u=l.snr>=0?`+${l.snr.toFixed(1)}`:l.snr.toFixed(1);i.push(`${c}, ${u} dB [${eu(l.last_heard_seconds)} ago]`)}return i.join(`
`)}function Ly(n){if(n.length===0)return`ACL
No ACL entries`;const s=[`ACL (${n.length})`];for(const i of n){const l=i.name||i.pubkey_prefix;s.push(`${l}: ${i.permission_name}`)}return s.join(`
`)}function qo(n,s,i,l=0){const c=Math.floor(Date.now()/1e3);return{id:-Date.now()-l,type:"PRIV",conversation_key:n,text:s,sender_timestamp:c,received_at:c,paths:null,txt_type:0,signature:null,outgoing:i,acked:1}}function My(n,s,i){const[l,c]=D.useState(!1),{handleAirtimeCommand:u,stopTracking:p}=Ry(i);D.useEffect(()=>{c(!1),p()},[n==null?void 0:n.id,p]);const d=D.useMemo(()=>{if(!n||n.type!=="contact")return!1;const x=s.find(A=>A.public_key===n.id);return(x==null?void 0:x.type)===td},[n,s]),g=D.useCallback(async x=>{if(!(!n||n.type!=="contact")&&d)try{const A=await dt.requestTelemetry(n.id,x),_=qo(n.id,Ny(A),!1,0),k=qo(n.id,Fy(A.neighbors),!1,1),R=qo(n.id,Ly(A.acl),!1,2);i(C=>[...C,_,k,R]),c(!0)}catch(A){const _=qo(n.id,`Telemetry request failed: ${A instanceof Error?A.message:"Unknown error"}`,!1,0);i(k=>[...k,_])}},[n,d,i]),m=D.useCallback(async x=>{if(!n||n.type!=="contact"||!d||!l||await u(x,n.id))return;const _=qo(n.id,`> ${x}`,!0,0);i(k=>[...k,_]);try{const k=await dt.sendRepeaterCommand(n.id,x),R=qo(n.id,k.response,!1,1);k.sender_timestamp&&(R.sender_timestamp=k.sender_timestamp),i(C=>[...C,R])}catch(k){const R=qo(n.id,`Command failed: ${k instanceof Error?k.message:"Unknown error"}`,!1,1);i(C=>[...C,R])}},[n,d,l,i,u]);return{repeaterLoggedIn:l,activeContactIsRepeater:d,handleTelemetryRequest:g,handleRepeaterCommand:m}}const Ax="remoteterm-lastMessageTime",vx="remoteterm-sortOrder";let Wu={};function im(n){Wu={...n}}function om(){return{...Wu}}function Jf(n,s){return Wu[n]=s,{...Wu}}function Or(n,s){return`${n}-${s}`}function Iy(){try{const n=localStorage.getItem(Ax);return n?JSON.parse(n):{}}catch{return{}}}function Oy(){try{return localStorage.getItem(vx)==="alpha"?"alpha":"recent"}catch{return"recent"}}function sm(){try{localStorage.removeItem(Ax),localStorage.removeItem(vx)}catch{}}function am(n,s){if(!s)return!1;const i=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return new RegExp(`@\\[${i}\\]`,"i").test(n)}function jy(n,s,i,l=null){const[c,u]=D.useState({}),[p,d]=D.useState({}),[g,m]=D.useState(om),x=D.useRef(l);D.useEffect(()=>{x.current=l},[l]);const A=D.useRef(new Set),_=D.useRef(new Set);D.useEffect(()=>{const B=n.filter(F=>!A.current.has(F.key)),S=s.filter(F=>F.public_key&&!_.current.has(F.public_key));if(B.length===0&&S.length===0)return;B.forEach(F=>A.current.add(F.key)),S.forEach(F=>_.current.add(F.public_key)),(async()=>{const F=[...B.map(M=>({type:"CHAN",conversation_key:M.key})),...S.map(M=>({type:"PRIV",conversation_key:M.public_key}))];if(F.length!==0)try{const z={};for(let V=0;V<F.length;V+=200){const $=F.slice(V,V+200),ee=await dt.getMessagesBulk($,O0);Object.assign(z,ee)}const H={},j={},X={};for(const V of B){const $=z[`CHAN:${V.key}`]||[];if($.length>0){const ee=Or("channel",V.key),W=V.last_read_at||0,re=$.filter(ie=>!ie.outgoing&&ie.received_at>W);re.length>0&&(H[ee]=re.length,re.some(ie=>am(ie.text,x.current))&&(j[ee]=!0));const pe=Math.max(...$.map(ie=>ie.received_at));X[ee]=pe,Jf(ee,pe)}}for(const V of S){const $=z[`PRIV:${V.public_key}`]||[];if($.length>0){const ee=Or("contact",V.public_key),W=V.last_read_at||0,re=$.filter(ie=>!ie.outgoing&&ie.received_at>W);re.length>0&&(H[ee]=re.length,re.some(ie=>am(ie.text,x.current))&&(j[ee]=!0));const pe=Math.max(...$.map(ie=>ie.received_at));X[ee]=pe,Jf(ee,pe)}}Object.keys(H).length>0&&u(V=>({...V,...H})),Object.keys(j).length>0&&d(V=>({...V,...j})),m(om())}catch(M){console.error("Failed to fetch messages bulk:",M)}})()},[n,s]),D.useEffect(()=>{if(i&&i.type!=="raw"&&i.type!=="map"){const B=Or(i.type,i.id);u(S=>{if(S[B]){const T={...S};return delete T[B],T}return S}),d(S=>{if(S[B]){const T={...S};return delete T[B],T}return S}),i.type==="channel"?dt.markChannelRead(i.id).catch(S=>{console.error("Failed to mark channel as read on server:",S)}):i.type==="contact"&&dt.markContactRead(i.id).catch(S=>{console.error("Failed to mark contact as read on server:",S)})}},[i]);const k=D.useCallback((B,S)=>{u(T=>({...T,[B]:(T[B]||0)+1})),S&&d(T=>({...T,[B]:!0}))},[]),R=D.useCallback(()=>{u({}),d({}),dt.markAllRead().catch(B=>{console.error("Failed to mark all as read on server:",B)})},[]),C=D.useCallback(B=>{if(B.type==="raw"||B.type==="map")return;const S=Or(B.type,B.id);u(T=>{if(T[S]){const F={...T};return delete F[S],F}return T}),d(T=>{if(T[S]){const F={...T};return delete F[S],F}return T}),B.type==="channel"?dt.markChannelRead(B.id).catch(T=>{console.error("Failed to mark channel as read on server:",T)}):B.type==="contact"&&dt.markContactRead(B.id).catch(T=>{console.error("Failed to mark contact as read on server:",T)})},[]),w=D.useCallback(B=>{let S=null;if(B.type==="CHAN"&&B.conversation_key?S=Or("channel",B.conversation_key):B.type==="PRIV"&&B.conversation_key&&(S=Or("contact",B.conversation_key)),S){const T=B.received_at||Math.floor(Date.now()/1e3),F=Jf(S,T);m(F)}},[]);return{unreadCounts:c,mentions:p,lastMessageTimes:g,incrementUnread:k,markAllRead:R,markConversationRead:C,trackNewMessage:w}}var j0=xx();const yx=aa(j0);function zy(n){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",s.appendChild(i),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n))}const Hy=n=>{switch(n){case"success":return Zy;case"info":return qy;case"warning":return Wy;case"error":return Gy;default:return null}},Vy=Array(12).fill(0),Uy=({visible:n,className:s})=>Te.createElement("div",{className:["sonner-loading-wrapper",s].filter(Boolean).join(" "),"data-visible":n},Te.createElement("div",{className:"sonner-spinner"},Vy.map((i,l)=>Te.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${l}`})))),Zy=Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Te.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Wy=Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Te.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),qy=Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Te.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Gy=Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Te.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),$y=Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Te.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Te.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Ky=()=>{const[n,s]=Te.useState(document.hidden);return Te.useEffect(()=>{const i=()=>{s(document.hidden)};return document.addEventListener("visibilitychange",i),()=>window.removeEventListener("visibilitychange",i)},[]),n};let A0=1;class Qy{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{const i=this.subscribers.indexOf(s);this.subscribers.splice(i,1)}),this.publish=s=>{this.subscribers.forEach(i=>i(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var i;const{message:l,...c}=s,u=typeof(s==null?void 0:s.id)=="number"||((i=s.id)==null?void 0:i.length)>0?s.id:A0++,p=this.toasts.find(g=>g.id===u),d=s.dismissible===void 0?!0:s.dismissible;return this.dismissedToasts.has(u)&&this.dismissedToasts.delete(u),p?this.toasts=this.toasts.map(g=>g.id===u?(this.publish({...g,...s,id:u,title:l}),{...g,...s,id:u,dismissible:d,title:l}):g):this.addToast({title:l,...c,dismissible:d,id:u}),u},this.dismiss=s=>(s?(this.dismissedToasts.add(s),requestAnimationFrame(()=>this.subscribers.forEach(i=>i({id:s,dismiss:!0})))):this.toasts.forEach(i=>{this.subscribers.forEach(l=>l({id:i.id,dismiss:!0}))}),s),this.message=(s,i)=>this.create({...i,message:s}),this.error=(s,i)=>this.create({...i,message:s,type:"error"}),this.success=(s,i)=>this.create({...i,type:"success",message:s}),this.info=(s,i)=>this.create({...i,type:"info",message:s}),this.warning=(s,i)=>this.create({...i,type:"warning",message:s}),this.loading=(s,i)=>this.create({...i,type:"loading",message:s}),this.promise=(s,i)=>{if(!i)return;let l;i.loading!==void 0&&(l=this.create({...i,promise:s,type:"loading",message:i.loading,description:typeof i.description!="function"?i.description:void 0}));const c=Promise.resolve(s instanceof Function?s():s);let u=l!==void 0,p;const d=c.then(async m=>{if(p=["resolve",m],Te.isValidElement(m))u=!1,this.create({id:l,type:"default",message:m});else if(Xy(m)&&!m.ok){u=!1;const A=typeof i.error=="function"?await i.error(`HTTP error! status: ${m.status}`):i.error,_=typeof i.description=="function"?await i.description(`HTTP error! status: ${m.status}`):i.description,R=typeof A=="object"&&!Te.isValidElement(A)?A:{message:A};this.create({id:l,type:"error",description:_,...R})}else if(m instanceof Error){u=!1;const A=typeof i.error=="function"?await i.error(m):i.error,_=typeof i.description=="function"?await i.description(m):i.description,R=typeof A=="object"&&!Te.isValidElement(A)?A:{message:A};this.create({id:l,type:"error",description:_,...R})}else if(i.success!==void 0){u=!1;const A=typeof i.success=="function"?await i.success(m):i.success,_=typeof i.description=="function"?await i.description(m):i.description,R=typeof A=="object"&&!Te.isValidElement(A)?A:{message:A};this.create({id:l,type:"success",description:_,...R})}}).catch(async m=>{if(p=["reject",m],i.error!==void 0){u=!1;const x=typeof i.error=="function"?await i.error(m):i.error,A=typeof i.description=="function"?await i.description(m):i.description,k=typeof x=="object"&&!Te.isValidElement(x)?x:{message:x};this.create({id:l,type:"error",description:A,...k})}}).finally(()=>{u&&(this.dismiss(l),l=void 0),i.finally==null||i.finally.call(i)}),g=()=>new Promise((m,x)=>d.then(()=>p[0]==="reject"?x(p[1]):m(p[1])).catch(x));return typeof l!="string"&&typeof l!="number"?{unwrap:g}:Object.assign(l,{unwrap:g})},this.custom=(s,i)=>{const l=(i==null?void 0:i.id)||A0++;return this.create({jsx:s(l),id:l,...i}),l},this.getActiveToasts=()=>this.toasts.filter(s=>!this.dismissedToasts.has(s.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Qn=new Qy,Yy=(n,s)=>{const i=(s==null?void 0:s.id)||A0++;return Qn.addToast({title:n,...s,id:i}),i},Xy=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",Jy=Yy,e_=()=>Qn.toasts,t_=()=>Qn.getActiveToasts(),bt=Object.assign(Jy,{success:Qn.success,info:Qn.info,warning:Qn.warning,error:Qn.error,custom:Qn.custom,message:Qn.message,promise:Qn.promise,dismiss:Qn.dismiss,loading:Qn.loading},{getHistory:e_,getToasts:t_});zy("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Uc(n){return n.label!==void 0}const n_=3,r_="24px",i_="16px",lm=4e3,o_=356,s_=14,a_=45,l_=200;function ei(...n){return n.filter(Boolean).join(" ")}function c_(n){const[s,i]=n.split("-"),l=[];return s&&l.push(s),i&&l.push(i),l}const u_=n=>{var s,i,l,c,u,p,d,g,m;const{invert:x,toast:A,unstyled:_,interacting:k,setHeights:R,visibleToasts:C,heights:w,index:B,toasts:S,expanded:T,removeToast:F,defaultRichColors:M,closeButton:z,style:H,cancelButtonStyle:j,actionButtonStyle:X,className:V="",descriptionClassName:$="",duration:ee,position:W,gap:re,expandByDefault:pe,classNames:ie,icons:Ae,closeButtonAriaLabel:G="Close toast"}=n,[xe,Z]=Te.useState(null),[N,U]=Te.useState(null),[K,Y]=Te.useState(!1),[fe,me]=Te.useState(!1),[Se,we]=Te.useState(!1),[de,he]=Te.useState(!1),[Ze,Fe]=Te.useState(!1),[ge,Le]=Te.useState(0),[We,lt]=Te.useState(0),et=Te.useRef(A.duration||ee||lm),Ne=Te.useRef(null),Ue=Te.useRef(null),ot=B===0,tt=B+1<=C,oe=A.type,Re=A.dismissible!==!1,qe=A.className||"",ve=A.descriptionClassName||"",Me=Te.useMemo(()=>w.findIndex(He=>He.toastId===A.id)||0,[w,A.id]),yt=Te.useMemo(()=>{var He;return(He=A.closeButton)!=null?He:z},[A.closeButton,z]),Pt=Te.useMemo(()=>A.duration||ee||lm,[A.duration,ee]),Nt=Te.useRef(0),Wt=Te.useRef(0),Ft=Te.useRef(0),Et=Te.useRef(null),[An,Cn]=W.split("-"),ye=Te.useMemo(()=>w.reduce((He,kt,Ot)=>Ot>=Me?He:He+kt.height,0),[w,Me]),Pe=Ky(),ze=A.invert||x,mt=oe==="loading";Wt.current=Te.useMemo(()=>Me*re+ye,[Me,ye]),Te.useEffect(()=>{et.current=Pt},[Pt]),Te.useEffect(()=>{Y(!0)},[]),Te.useEffect(()=>{const He=Ue.current;if(He){const kt=He.getBoundingClientRect().height;return lt(kt),R(Ot=>[{toastId:A.id,height:kt,position:A.position},...Ot]),()=>R(Ot=>Ot.filter(qt=>qt.toastId!==A.id))}},[R,A.id]),Te.useLayoutEffect(()=>{if(!K)return;const He=Ue.current,kt=He.style.height;He.style.height="auto";const Ot=He.getBoundingClientRect().height;He.style.height=kt,lt(Ot),R(qt=>qt.find(gt=>gt.toastId===A.id)?qt.map(gt=>gt.toastId===A.id?{...gt,height:Ot}:gt):[{toastId:A.id,height:Ot,position:A.position},...qt])},[K,A.title,A.description,R,A.id,A.jsx,A.action,A.cancel]);const ne=Te.useCallback(()=>{me(!0),Le(Wt.current),R(He=>He.filter(kt=>kt.toastId!==A.id)),setTimeout(()=>{F(A)},l_)},[A,F,R,Wt]);Te.useEffect(()=>{if(A.promise&&oe==="loading"||A.duration===1/0||A.type==="loading")return;let He;return T||k||Pe?(()=>{if(Ft.current<Nt.current){const qt=new Date().getTime()-Nt.current;et.current=et.current-qt}Ft.current=new Date().getTime()})():(()=>{et.current!==1/0&&(Nt.current=new Date().getTime(),He=setTimeout(()=>{A.onAutoClose==null||A.onAutoClose.call(A,A),ne()},et.current))})(),()=>clearTimeout(He)},[T,k,A,oe,Pe,ne]),Te.useEffect(()=>{A.delete&&(ne(),A.onDismiss==null||A.onDismiss.call(A,A))},[ne,A.delete]);function _e(){var He;if(Ae!=null&&Ae.loading){var kt;return Te.createElement("div",{className:ei(ie==null?void 0:ie.loader,A==null||(kt=A.classNames)==null?void 0:kt.loader,"sonner-loader"),"data-visible":oe==="loading"},Ae.loading)}return Te.createElement(Uy,{className:ei(ie==null?void 0:ie.loader,A==null||(He=A.classNames)==null?void 0:He.loader),visible:oe==="loading"})}const Ee=A.icon||(Ae==null?void 0:Ae[oe])||Hy(oe);var Oe,st;return Te.createElement("li",{tabIndex:0,ref:Ue,className:ei(V,qe,ie==null?void 0:ie.toast,A==null||(s=A.classNames)==null?void 0:s.toast,ie==null?void 0:ie.default,ie==null?void 0:ie[oe],A==null||(i=A.classNames)==null?void 0:i[oe]),"data-sonner-toast":"","data-rich-colors":(Oe=A.richColors)!=null?Oe:M,"data-styled":!(A.jsx||A.unstyled||_),"data-mounted":K,"data-promise":!!A.promise,"data-swiped":Ze,"data-removed":fe,"data-visible":tt,"data-y-position":An,"data-x-position":Cn,"data-index":B,"data-front":ot,"data-swiping":Se,"data-dismissible":Re,"data-type":oe,"data-invert":ze,"data-swipe-out":de,"data-swipe-direction":N,"data-expanded":!!(T||pe&&K),"data-testid":A.testId,style:{"--index":B,"--toasts-before":B,"--z-index":S.length-B,"--offset":`${fe?ge:Wt.current}px`,"--initial-height":pe?"auto":`${We}px`,...H,...A.style},onDragEnd:()=>{we(!1),Z(null),Et.current=null},onPointerDown:He=>{He.button!==2&&(mt||!Re||(Ne.current=new Date,Le(Wt.current),He.target.setPointerCapture(He.pointerId),He.target.tagName!=="BUTTON"&&(we(!0),Et.current={x:He.clientX,y:He.clientY})))},onPointerUp:()=>{var He,kt,Ot;if(de||!Re)return;Et.current=null;const qt=Number(((He=Ue.current)==null?void 0:He.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Hn=Number(((kt=Ue.current)==null?void 0:kt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),gt=new Date().getTime()-((Ot=Ne.current)==null?void 0:Ot.getTime()),Lt=xe==="x"?qt:Hn,Yn=Math.abs(Lt)/gt;if(Math.abs(Lt)>=a_||Yn>.11){Le(Wt.current),A.onDismiss==null||A.onDismiss.call(A,A),U(xe==="x"?qt>0?"right":"left":Hn>0?"down":"up"),ne(),he(!0);return}else{var St,Gt;(St=Ue.current)==null||St.style.setProperty("--swipe-amount-x","0px"),(Gt=Ue.current)==null||Gt.style.setProperty("--swipe-amount-y","0px")}Fe(!1),we(!1),Z(null)},onPointerMove:He=>{var kt,Ot,qt;if(!Et.current||!Re||((kt=window.getSelection())==null?void 0:kt.toString().length)>0)return;const gt=He.clientY-Et.current.y,Lt=He.clientX-Et.current.x;var Yn;const St=(Yn=n.swipeDirections)!=null?Yn:c_(W);!xe&&(Math.abs(Lt)>1||Math.abs(gt)>1)&&Z(Math.abs(Lt)>Math.abs(gt)?"x":"y");let Gt={x:0,y:0};const Jt=je=>1/(1.5+Math.abs(je)/20);if(xe==="y"){if(St.includes("top")||St.includes("bottom"))if(St.includes("top")&&gt<0||St.includes("bottom")&&gt>0)Gt.y=gt;else{const je=gt*Jt(gt);Gt.y=Math.abs(je)<Math.abs(gt)?je:gt}}else if(xe==="x"&&(St.includes("left")||St.includes("right")))if(St.includes("left")&&Lt<0||St.includes("right")&&Lt>0)Gt.x=Lt;else{const je=Lt*Jt(Lt);Gt.x=Math.abs(je)<Math.abs(Lt)?je:Lt}(Math.abs(Gt.x)>0||Math.abs(Gt.y)>0)&&Fe(!0),(Ot=Ue.current)==null||Ot.style.setProperty("--swipe-amount-x",`${Gt.x}px`),(qt=Ue.current)==null||qt.style.setProperty("--swipe-amount-y",`${Gt.y}px`)}},yt&&!A.jsx&&oe!=="loading"?Te.createElement("button",{"aria-label":G,"data-disabled":mt,"data-close-button":!0,onClick:mt||!Re?()=>{}:()=>{ne(),A.onDismiss==null||A.onDismiss.call(A,A)},className:ei(ie==null?void 0:ie.closeButton,A==null||(l=A.classNames)==null?void 0:l.closeButton)},(st=Ae==null?void 0:Ae.close)!=null?st:$y):null,(oe||A.icon||A.promise)&&A.icon!==null&&((Ae==null?void 0:Ae[oe])!==null||A.icon)?Te.createElement("div",{"data-icon":"",className:ei(ie==null?void 0:ie.icon,A==null||(c=A.classNames)==null?void 0:c.icon)},A.promise||A.type==="loading"&&!A.icon?A.icon||_e():null,A.type!=="loading"?Ee:null):null,Te.createElement("div",{"data-content":"",className:ei(ie==null?void 0:ie.content,A==null||(u=A.classNames)==null?void 0:u.content)},Te.createElement("div",{"data-title":"",className:ei(ie==null?void 0:ie.title,A==null||(p=A.classNames)==null?void 0:p.title)},A.jsx?A.jsx:typeof A.title=="function"?A.title():A.title),A.description?Te.createElement("div",{"data-description":"",className:ei($,ve,ie==null?void 0:ie.description,A==null||(d=A.classNames)==null?void 0:d.description)},typeof A.description=="function"?A.description():A.description):null),Te.isValidElement(A.cancel)?A.cancel:A.cancel&&Uc(A.cancel)?Te.createElement("button",{"data-button":!0,"data-cancel":!0,style:A.cancelButtonStyle||j,onClick:He=>{Uc(A.cancel)&&Re&&(A.cancel.onClick==null||A.cancel.onClick.call(A.cancel,He),ne())},className:ei(ie==null?void 0:ie.cancelButton,A==null||(g=A.classNames)==null?void 0:g.cancelButton)},A.cancel.label):null,Te.isValidElement(A.action)?A.action:A.action&&Uc(A.action)?Te.createElement("button",{"data-button":!0,"data-action":!0,style:A.actionButtonStyle||X,onClick:He=>{Uc(A.action)&&(A.action.onClick==null||A.action.onClick.call(A.action,He),!He.defaultPrevented&&ne())},className:ei(ie==null?void 0:ie.actionButton,A==null||(m=A.classNames)==null?void 0:m.actionButton)},A.action.label):null)};function cm(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function d_(n,s){const i={};return[n,s].forEach((l,c)=>{const u=c===1,p=u?"--mobile-offset":"--offset",d=u?i_:r_;function g(m){["top","right","bottom","left"].forEach(x=>{i[`${p}-${x}`]=typeof m=="number"?`${m}px`:m})}typeof l=="number"||typeof l=="string"?g(l):typeof l=="object"?["top","right","bottom","left"].forEach(m=>{l[m]===void 0?i[`${p}-${m}`]=d:i[`${p}-${m}`]=typeof l[m]=="number"?`${l[m]}px`:l[m]}):g(d)}),i}const f_=Te.forwardRef(function(s,i){const{id:l,invert:c,position:u="bottom-right",hotkey:p=["altKey","KeyT"],expand:d,closeButton:g,className:m,offset:x,mobileOffset:A,theme:_="light",richColors:k,duration:R,style:C,visibleToasts:w=n_,toastOptions:B,dir:S=cm(),gap:T=s_,icons:F,containerAriaLabel:M="Notifications"}=s,[z,H]=Te.useState([]),j=Te.useMemo(()=>l?z.filter(K=>K.toasterId===l):z.filter(K=>!K.toasterId),[z,l]),X=Te.useMemo(()=>Array.from(new Set([u].concat(j.filter(K=>K.position).map(K=>K.position)))),[j,u]),[V,$]=Te.useState([]),[ee,W]=Te.useState(!1),[re,pe]=Te.useState(!1),[ie,Ae]=Te.useState(_!=="system"?_:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),G=Te.useRef(null),xe=p.join("+").replace(/Key/g,"").replace(/Digit/g,""),Z=Te.useRef(null),N=Te.useRef(!1),U=Te.useCallback(K=>{H(Y=>{var fe;return(fe=Y.find(me=>me.id===K.id))!=null&&fe.delete||Qn.dismiss(K.id),Y.filter(({id:me})=>me!==K.id)})},[]);return Te.useEffect(()=>Qn.subscribe(K=>{if(K.dismiss){requestAnimationFrame(()=>{H(Y=>Y.map(fe=>fe.id===K.id?{...fe,delete:!0}:fe))});return}setTimeout(()=>{yx.flushSync(()=>{H(Y=>{const fe=Y.findIndex(me=>me.id===K.id);return fe!==-1?[...Y.slice(0,fe),{...Y[fe],...K},...Y.slice(fe+1)]:[K,...Y]})})})}),[z]),Te.useEffect(()=>{if(_!=="system"){Ae(_);return}if(_==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Ae("dark"):Ae("light")),typeof window>"u")return;const K=window.matchMedia("(prefers-color-scheme: dark)");try{K.addEventListener("change",({matches:Y})=>{Ae(Y?"dark":"light")})}catch{K.addListener(({matches:fe})=>{try{Ae(fe?"dark":"light")}catch(me){console.error(me)}})}},[_]),Te.useEffect(()=>{z.length<=1&&W(!1)},[z]),Te.useEffect(()=>{const K=Y=>{var fe;if(p.every(we=>Y[we]||Y.code===we)){var Se;W(!0),(Se=G.current)==null||Se.focus()}Y.code==="Escape"&&(document.activeElement===G.current||(fe=G.current)!=null&&fe.contains(document.activeElement))&&W(!1)};return document.addEventListener("keydown",K),()=>document.removeEventListener("keydown",K)},[p]),Te.useEffect(()=>{if(G.current)return()=>{Z.current&&(Z.current.focus({preventScroll:!0}),Z.current=null,N.current=!1)}},[G.current]),Te.createElement("section",{ref:i,"aria-label":`${M} ${xe}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},X.map((K,Y)=>{var fe;const[me,Se]=K.split("-");return j.length?Te.createElement("ol",{key:K,dir:S==="auto"?cm():S,tabIndex:-1,ref:G,className:m,"data-sonner-toaster":!0,"data-sonner-theme":ie,"data-y-position":me,"data-x-position":Se,style:{"--front-toast-height":`${((fe=V[0])==null?void 0:fe.height)||0}px`,"--width":`${o_}px`,"--gap":`${T}px`,...C,...d_(x,A)},onBlur:we=>{N.current&&!we.currentTarget.contains(we.relatedTarget)&&(N.current=!1,Z.current&&(Z.current.focus({preventScroll:!0}),Z.current=null))},onFocus:we=>{we.target instanceof HTMLElement&&we.target.dataset.dismissible==="false"||N.current||(N.current=!0,Z.current=we.relatedTarget)},onMouseEnter:()=>W(!0),onMouseMove:()=>W(!0),onMouseLeave:()=>{re||W(!1)},onDragEnd:()=>W(!1),onPointerDown:we=>{we.target instanceof HTMLElement&&we.target.dataset.dismissible==="false"||pe(!0)},onPointerUp:()=>pe(!1)},j.filter(we=>!we.position&&Y===0||we.position===K).map((we,de)=>{var he,Ze;return Te.createElement(u_,{key:we.id,icons:F,index:de,toast:we,defaultRichColors:k,duration:(he=B==null?void 0:B.duration)!=null?he:R,className:B==null?void 0:B.className,descriptionClassName:B==null?void 0:B.descriptionClassName,invert:c,visibleToasts:w,closeButton:(Ze=B==null?void 0:B.closeButton)!=null?Ze:g,interacting:re,position:K,style:B==null?void 0:B.style,unstyled:B==null?void 0:B.unstyled,classNames:B==null?void 0:B.classNames,cancelButtonStyle:B==null?void 0:B.cancelButtonStyle,actionButtonStyle:B==null?void 0:B.actionButtonStyle,closeButtonAriaLabel:B==null?void 0:B.closeButtonAriaLabel,removeToast:U,toasts:j.filter(Fe=>Fe.position==we.position),heights:V.filter(Fe=>Fe.position==we.position),setHeights:$,expandByDefault:d,gap:T,expanded:ee,swipeDirections:s.swipeDirections})})):null}))}),h_=({...n})=>b.jsx(f_,{theme:"dark",className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-card group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground",error:"group-[.toaster]:bg-[#2a1a1a] group-[.toaster]:text-[#e8a0a0] group-[.toaster]:border-[#4a2a2a] [&_[data-description]]:text-[#b08080]"}},...n}),Zc=200;function tu(n){return`${n.type}-${n.conversation_key}-${n.text}-${n.sender_timestamp}`}function p_(n){const[s,i]=D.useState([]),[l,c]=D.useState(!1),[u,p]=D.useState(!1),[d,g]=D.useState(!1),m=D.useRef(new Set),x=D.useRef(null),A=D.useRef(null),_=D.useCallback(async(w=!1,B)=>{if(!n||n.type==="raw"){i([]),g(!1);return}const S=n.id;w&&(c(!0),i([]));try{const T=await dt.getMessages({type:n.type==="channel"?"CHAN":"PRIV",conversation_key:n.id,limit:Zc},B);if(A.current!==S)return;i(T),m.current.clear();for(const F of T)m.current.add(tu(F));g(T.length>=Zc)}catch(T){if(Sy(T))return;console.error("Failed to fetch messages:",T),bt.error("Failed to load messages",{description:T instanceof Error?T.message:"Check your connection"})}finally{w&&c(!1)}},[n]),k=D.useCallback(async()=>{if(!(!n||n.type==="raw"||u||!d)){p(!0);try{const w=await dt.getMessages({type:n.type==="channel"?"CHAN":"PRIV",conversation_key:n.id,limit:Zc,offset:s.length});if(w.length>0){i(B=>[...B,...w]);for(const B of w)m.current.add(tu(B))}g(w.length>=Zc)}catch(w){console.error("Failed to fetch older messages:",w),bt.error("Failed to load older messages",{description:w instanceof Error?w.message:"Check your connection"})}finally{p(!1)}}},[n,u,d,s.length]);D.useEffect(()=>{if(x.current&&x.current.abort(),A.current=(n==null?void 0:n.id)??null,!n||n.type==="raw"){i([]),g(!1);return}const w=new AbortController;return x.current=w,_(!0,w.signal),()=>{w.abort()}},[n==null?void 0:n.id,n==null?void 0:n.type]);const R=D.useCallback(w=>{const B=tu(w);if(m.current.has(B))return console.debug("Duplicate message content ignored:",B.slice(0,50)),!1;if(m.current.add(B),m.current.size>1e3){const S=Array.from(m.current);m.current=new Set(S.slice(-500))}return i(S=>S.some(T=>T.id===w.id)?S:[...S,w]),!0},[]),C=D.useCallback((w,B,S)=>{i(T=>{const F=T.findIndex(M=>M.id===w);if(F>=0){const M=[...T];return M[F]={...T[F],acked:B,...S!==void 0&&{paths:S}},M}return T})},[]);return{messages:s,messagesLoading:l,loadingOlder:u,hasOlderMessages:d,setMessages:i,fetchMessages:_,fetchOlderMessages:k,addMessageIfNew:R,updateMessageAck:C}}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),g_=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,i,l)=>l?l.toUpperCase():i.toLowerCase()),um=n=>{const s=g_(n);return s.charAt(0).toUpperCase()+s.slice(1)},_x=(...n)=>n.filter((s,i,l)=>!!s&&s.trim()!==""&&l.indexOf(s)===i).join(" ").trim(),x_=n=>{for(const s in n)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var A_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_=D.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:c="",children:u,iconNode:p,...d},g)=>D.createElement("svg",{ref:g,...A_,width:s,height:s,stroke:n,strokeWidth:l?Number(i)*24/Number(s):i,className:_x("lucide",c),...!u&&!x_(d)&&{"aria-hidden":"true"},...d},[...p.map(([m,x])=>D.createElement(m,x)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=(n,s)=>{const i=D.forwardRef(({className:l,...c},u)=>D.createElement(v_,{ref:u,iconNode:s,className:_x(`lucide-${m_(um(n))}`,`lucide-${n}`,l),...c}));return i.displayName=um(n),i};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],__=z0("check",y_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],b_=z0("menu",w_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],wx=z0("x",C_);function E_({health:n,config:s,onSettingsClick:i,onMenuClick:l}){const c=(n==null?void 0:n.radio_connected)??!1,[u,p]=D.useState(!1),d=async()=>{p(!0);try{const g=await dt.reconnectRadio();g.connected&&bt.success("Reconnected",{description:g.message})}catch(g){bt.error("Reconnection failed",{description:g instanceof Error?g.message:"Check radio connection and power"})}finally{p(!1)}};return b.jsxs("div",{className:"flex items-center gap-4 px-4 py-2 bg-[#252525] border-b border-[#333] text-xs",children:[l&&b.jsx("button",{onClick:l,className:"md:hidden p-1 bg-transparent border-none text-[#e0e0e0] cursor-pointer","aria-label":"Open menu",children:b.jsx(b_,{className:"h-5 w-5"})}),b.jsx("h1",{className:"text-base font-semibold mr-auto",children:"RemoteTerm"}),b.jsxs("div",{className:"flex items-center gap-1 text-[#888]",children:[b.jsx("div",{className:`w-2 h-2 rounded-full ${c?"bg-[#4caf50]":"bg-[#666]"}`}),b.jsx("span",{className:"hidden lg:inline text-[#e0e0e0]",children:c?"Connected":"Disconnected"})]}),s&&b.jsxs("div",{className:"hidden lg:flex items-center gap-2 text-[#888]",children:[b.jsx("span",{className:"text-[#e0e0e0]",children:s.name||"Unnamed"}),b.jsx("span",{className:"font-mono text-[#888] cursor-pointer hover:text-[#4a9eff]",onClick:()=>{navigator.clipboard.writeText(s.public_key),bt.success("Public key copied!")},title:"Click to copy public key",children:s.public_key.toLowerCase()})]}),!c&&b.jsx("button",{onClick:d,disabled:u,className:"px-3 py-1 bg-[#4a3000] border border-[#6b4500] text-[#ffa500] rounded text-xs cursor-pointer hover:bg-[#5a3a00] disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Reconnecting...":"Reconnect"}),b.jsxs("button",{onClick:i,className:"px-3 py-1 bg-[#333] border border-[#444] text-[#e0e0e0] rounded text-xs cursor-pointer hover:bg-[#444]",children:[b.jsx("span",{role:"img","aria-label":"Settings",children:""})," ","Radio & Config"]})]})}const k_=12;function S_(n){return n.slice(0,k_)}function Ti(n,s){return n||S_(s)}const mo=2,B_={text:"",background:"#444444",textColor:"#ffffff"};function P_(n){let s=0;for(let i=0;i<n.length;i++){const l=n.charCodeAt(i);s=(s<<5)-s+l,s=s&s}return Math.abs(s)}const T_=/[\u{1F300}-\u{1F9FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]|[\u{1F600}-\u{1F64F}]|[\u{1F680}-\u{1F6FF}]|[\u{1F1E0}-\u{1F1FF}]/u;function D_(n,s){if(!n)return s.slice(0,2).toUpperCase();const i=n.match(T_);if(i)return i[0];const l=n.match(/[a-zA-Z]/g);if(!l||l.length===0)return s.slice(0,2).toUpperCase();const c=n.indexOf(" ");if(c!==-1){const u=l[0],p=n.slice(c+1).match(/[a-zA-Z]/);if(p)return(u+p[0]).toUpperCase()}return l[0].toUpperCase()}function R_(n){const s=P_(n),i=s%360,l=50+(s>>8)%30,c=35+(s>>16)%20,u=`hsl(${i}, ${l}%, ${c}%)`,p=c<45?"#ffffff":"#000000";return{background:u,text:p}}function N_(n,s,i){if(i===mo)return B_;const l=D_(n,s),c=R_(s);return{text:l,background:c.background,textColor:c.text}}function v0({name:n,publicKey:s,size:i=28,contactType:l}){const c=N_(n,s,l);return b.jsx("div",{className:"flex items-center justify-center rounded-full font-semibold flex-shrink-0 select-none",style:{backgroundColor:c.background,color:c.textColor,width:i,height:i,fontSize:i*.45},children:c.text})}const bx="remoteterm-favorites";function ts(n,s,i){return n.some(l=>l.type===s&&l.id===i)}function F_(){try{const n=localStorage.getItem(bx);return n?JSON.parse(n):[]}catch{return[]}}function dm(){try{localStorage.removeItem(bx)}catch{}}function Cx(n){var s,i,l="";if(typeof n=="string"||typeof n=="number")l+=n;else if(typeof n=="object")if(Array.isArray(n)){var c=n.length;for(s=0;s<c;s++)n[s]&&(i=Cx(n[s]))&&(l&&(l+=" "),l+=i)}else for(i in n)n[i]&&(l&&(l+=" "),l+=i);return l}function Ex(){for(var n,s,i=0,l="",c=arguments.length;i<c;i++)(n=arguments[i])&&(s=Cx(n))&&(l&&(l+=" "),l+=s);return l}const L_=(n,s)=>{const i=new Array(n.length+s.length);for(let l=0;l<n.length;l++)i[l]=n[l];for(let l=0;l<s.length;l++)i[n.length+l]=s[l];return i},M_=(n,s)=>({classGroupId:n,validator:s}),kx=(n=new Map,s=null,i)=>({nextPart:n,validators:s,classGroupId:i}),qu="-",fm=[],I_="arbitrary..",O_=n=>{const s=z_(n),{conflictingClassGroups:i,conflictingClassGroupModifiers:l}=n;return{getClassGroupId:p=>{if(p.startsWith("[")&&p.endsWith("]"))return j_(p);const d=p.split(qu),g=d[0]===""&&d.length>1?1:0;return Sx(d,g,s)},getConflictingClassGroupIds:(p,d)=>{if(d){const g=l[p],m=i[p];return g?m?L_(m,g):g:m||fm}return i[p]||fm}}},Sx=(n,s,i)=>{if(n.length-s===0)return i.classGroupId;const c=n[s],u=i.nextPart.get(c);if(u){const m=Sx(n,s+1,u);if(m)return m}const p=i.validators;if(p===null)return;const d=s===0?n.join(qu):n.slice(s).join(qu),g=p.length;for(let m=0;m<g;m++){const x=p[m];if(x.validator(d))return x.classGroupId}},j_=n=>n.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const s=n.slice(1,-1),i=s.indexOf(":"),l=s.slice(0,i);return l?I_+l:void 0})(),z_=n=>{const{theme:s,classGroups:i}=n;return H_(i,s)},H_=(n,s)=>{const i=kx();for(const l in n){const c=n[l];H0(c,i,l,s)}return i},H0=(n,s,i,l)=>{const c=n.length;for(let u=0;u<c;u++){const p=n[u];V_(p,s,i,l)}},V_=(n,s,i,l)=>{if(typeof n=="string"){U_(n,s,i);return}if(typeof n=="function"){Z_(n,s,i,l);return}W_(n,s,i,l)},U_=(n,s,i)=>{const l=n===""?s:Bx(s,n);l.classGroupId=i},Z_=(n,s,i,l)=>{if(q_(n)){H0(n(l),s,i,l);return}s.validators===null&&(s.validators=[]),s.validators.push(M_(i,n))},W_=(n,s,i,l)=>{const c=Object.entries(n),u=c.length;for(let p=0;p<u;p++){const[d,g]=c[p];H0(g,Bx(s,d),i,l)}},Bx=(n,s)=>{let i=n;const l=s.split(qu),c=l.length;for(let u=0;u<c;u++){const p=l[u];let d=i.nextPart.get(p);d||(d=kx(),i.nextPart.set(p,d)),i=d}return i},q_=n=>"isThemeGetter"in n&&n.isThemeGetter===!0,G_=n=>{if(n<1)return{get:()=>{},set:()=>{}};let s=0,i=Object.create(null),l=Object.create(null);const c=(u,p)=>{i[u]=p,s++,s>n&&(s=0,l=i,i=Object.create(null))};return{get(u){let p=i[u];if(p!==void 0)return p;if((p=l[u])!==void 0)return c(u,p),p},set(u,p){u in i?i[u]=p:c(u,p)}}},y0="!",hm=":",$_=[],pm=(n,s,i,l,c)=>({modifiers:n,hasImportantModifier:s,baseClassName:i,maybePostfixModifierPosition:l,isExternal:c}),K_=n=>{const{prefix:s,experimentalParseClassName:i}=n;let l=c=>{const u=[];let p=0,d=0,g=0,m;const x=c.length;for(let C=0;C<x;C++){const w=c[C];if(p===0&&d===0){if(w===hm){u.push(c.slice(g,C)),g=C+1;continue}if(w==="/"){m=C;continue}}w==="["?p++:w==="]"?p--:w==="("?d++:w===")"&&d--}const A=u.length===0?c:c.slice(g);let _=A,k=!1;A.endsWith(y0)?(_=A.slice(0,-1),k=!0):A.startsWith(y0)&&(_=A.slice(1),k=!0);const R=m&&m>g?m-g:void 0;return pm(u,k,_,R)};if(s){const c=s+hm,u=l;l=p=>p.startsWith(c)?u(p.slice(c.length)):pm($_,!1,p,void 0,!0)}if(i){const c=l;l=u=>i({className:u,parseClassName:c})}return l},Q_=n=>{const s=new Map;return n.orderSensitiveModifiers.forEach((i,l)=>{s.set(i,1e6+l)}),i=>{const l=[];let c=[];for(let u=0;u<i.length;u++){const p=i[u],d=p[0]==="[",g=s.has(p);d||g?(c.length>0&&(c.sort(),l.push(...c),c=[]),l.push(p)):c.push(p)}return c.length>0&&(c.sort(),l.push(...c)),l}},Y_=n=>({cache:G_(n.cacheSize),parseClassName:K_(n),sortModifiers:Q_(n),...O_(n)}),X_=/\s+/,J_=(n,s)=>{const{parseClassName:i,getClassGroupId:l,getConflictingClassGroupIds:c,sortModifiers:u}=s,p=[],d=n.trim().split(X_);let g="";for(let m=d.length-1;m>=0;m-=1){const x=d[m],{isExternal:A,modifiers:_,hasImportantModifier:k,baseClassName:R,maybePostfixModifierPosition:C}=i(x);if(A){g=x+(g.length>0?" "+g:g);continue}let w=!!C,B=l(w?R.substring(0,C):R);if(!B){if(!w){g=x+(g.length>0?" "+g:g);continue}if(B=l(R),!B){g=x+(g.length>0?" "+g:g);continue}w=!1}const S=_.length===0?"":_.length===1?_[0]:u(_).join(":"),T=k?S+y0:S,F=T+B;if(p.indexOf(F)>-1)continue;p.push(F);const M=c(B,w);for(let z=0;z<M.length;++z){const H=M[z];p.push(T+H)}g=x+(g.length>0?" "+g:g)}return g},e1=(...n)=>{let s=0,i,l,c="";for(;s<n.length;)(i=n[s++])&&(l=Px(i))&&(c&&(c+=" "),c+=l);return c},Px=n=>{if(typeof n=="string")return n;let s,i="";for(let l=0;l<n.length;l++)n[l]&&(s=Px(n[l]))&&(i&&(i+=" "),i+=s);return i},t1=(n,...s)=>{let i,l,c,u;const p=g=>{const m=s.reduce((x,A)=>A(x),n());return i=Y_(m),l=i.cache.get,c=i.cache.set,u=d,d(g)},d=g=>{const m=l(g);if(m)return m;const x=J_(g,i);return c(g,x),x};return u=p,(...g)=>u(e1(...g))},n1=[],dn=n=>{const s=i=>i[n]||n1;return s.isThemeGetter=!0,s},Tx=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Dx=/^\((?:(\w[\w-]*):)?(.+)\)$/i,r1=/^\d+\/\d+$/,i1=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,o1=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,s1=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,a1=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,l1=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ks=n=>r1.test(n),xt=n=>!!n&&!Number.isNaN(Number(n)),ho=n=>!!n&&Number.isInteger(Number(n)),e0=n=>n.endsWith("%")&&xt(n.slice(0,-1)),ki=n=>i1.test(n),c1=()=>!0,u1=n=>o1.test(n)&&!s1.test(n),Rx=()=>!1,d1=n=>a1.test(n),f1=n=>l1.test(n),h1=n=>!Ke(n)&&!Qe(n),p1=n=>la(n,Lx,Rx),Ke=n=>Tx.test(n),Go=n=>la(n,Mx,u1),t0=n=>la(n,v1,xt),mm=n=>la(n,Nx,Rx),m1=n=>la(n,Fx,f1),Wc=n=>la(n,Ix,d1),Qe=n=>Dx.test(n),tl=n=>ca(n,Mx),g1=n=>ca(n,y1),gm=n=>ca(n,Nx),x1=n=>ca(n,Lx),A1=n=>ca(n,Fx),qc=n=>ca(n,Ix,!0),la=(n,s,i)=>{const l=Tx.exec(n);return l?l[1]?s(l[1]):i(l[2]):!1},ca=(n,s,i=!1)=>{const l=Dx.exec(n);return l?l[1]?s(l[1]):i:!1},Nx=n=>n==="position"||n==="percentage",Fx=n=>n==="image"||n==="url",Lx=n=>n==="length"||n==="size"||n==="bg-size",Mx=n=>n==="length",v1=n=>n==="number",y1=n=>n==="family-name",Ix=n=>n==="shadow",_1=()=>{const n=dn("color"),s=dn("font"),i=dn("text"),l=dn("font-weight"),c=dn("tracking"),u=dn("leading"),p=dn("breakpoint"),d=dn("container"),g=dn("spacing"),m=dn("radius"),x=dn("shadow"),A=dn("inset-shadow"),_=dn("text-shadow"),k=dn("drop-shadow"),R=dn("blur"),C=dn("perspective"),w=dn("aspect"),B=dn("ease"),S=dn("animate"),T=()=>["auto","avoid","all","avoid-page","page","left","right","column"],F=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],M=()=>[...F(),Qe,Ke],z=()=>["auto","hidden","clip","visible","scroll"],H=()=>["auto","contain","none"],j=()=>[Qe,Ke,g],X=()=>[Ks,"full","auto",...j()],V=()=>[ho,"none","subgrid",Qe,Ke],$=()=>["auto",{span:["full",ho,Qe,Ke]},ho,Qe,Ke],ee=()=>[ho,"auto",Qe,Ke],W=()=>["auto","min","max","fr",Qe,Ke],re=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],pe=()=>["start","end","center","stretch","center-safe","end-safe"],ie=()=>["auto",...j()],Ae=()=>[Ks,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...j()],G=()=>[n,Qe,Ke],xe=()=>[...F(),gm,mm,{position:[Qe,Ke]}],Z=()=>["no-repeat",{repeat:["","x","y","space","round"]}],N=()=>["auto","cover","contain",x1,p1,{size:[Qe,Ke]}],U=()=>[e0,tl,Go],K=()=>["","none","full",m,Qe,Ke],Y=()=>["",xt,tl,Go],fe=()=>["solid","dashed","dotted","double"],me=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Se=()=>[xt,e0,gm,mm],we=()=>["","none",R,Qe,Ke],de=()=>["none",xt,Qe,Ke],he=()=>["none",xt,Qe,Ke],Ze=()=>[xt,Qe,Ke],Fe=()=>[Ks,"full",...j()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ki],breakpoint:[ki],color:[c1],container:[ki],"drop-shadow":[ki],ease:["in","out","in-out"],font:[h1],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ki],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ki],shadow:[ki],spacing:["px",xt],text:[ki],"text-shadow":[ki],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ks,Ke,Qe,w]}],container:["container"],columns:[{columns:[xt,Ke,Qe,d]}],"break-after":[{"break-after":T()}],"break-before":[{"break-before":T()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:M()}],overflow:[{overflow:z()}],"overflow-x":[{"overflow-x":z()}],"overflow-y":[{"overflow-y":z()}],overscroll:[{overscroll:H()}],"overscroll-x":[{"overscroll-x":H()}],"overscroll-y":[{"overscroll-y":H()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:X()}],"inset-x":[{"inset-x":X()}],"inset-y":[{"inset-y":X()}],start:[{start:X()}],end:[{end:X()}],top:[{top:X()}],right:[{right:X()}],bottom:[{bottom:X()}],left:[{left:X()}],visibility:["visible","invisible","collapse"],z:[{z:[ho,"auto",Qe,Ke]}],basis:[{basis:[Ks,"full","auto",d,...j()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[xt,Ks,"auto","initial","none",Ke]}],grow:[{grow:["",xt,Qe,Ke]}],shrink:[{shrink:["",xt,Qe,Ke]}],order:[{order:[ho,"first","last","none",Qe,Ke]}],"grid-cols":[{"grid-cols":V()}],"col-start-end":[{col:$()}],"col-start":[{"col-start":ee()}],"col-end":[{"col-end":ee()}],"grid-rows":[{"grid-rows":V()}],"row-start-end":[{row:$()}],"row-start":[{"row-start":ee()}],"row-end":[{"row-end":ee()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":W()}],"auto-rows":[{"auto-rows":W()}],gap:[{gap:j()}],"gap-x":[{"gap-x":j()}],"gap-y":[{"gap-y":j()}],"justify-content":[{justify:[...re(),"normal"]}],"justify-items":[{"justify-items":[...pe(),"normal"]}],"justify-self":[{"justify-self":["auto",...pe()]}],"align-content":[{content:["normal",...re()]}],"align-items":[{items:[...pe(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...pe(),{baseline:["","last"]}]}],"place-content":[{"place-content":re()}],"place-items":[{"place-items":[...pe(),"baseline"]}],"place-self":[{"place-self":["auto",...pe()]}],p:[{p:j()}],px:[{px:j()}],py:[{py:j()}],ps:[{ps:j()}],pe:[{pe:j()}],pt:[{pt:j()}],pr:[{pr:j()}],pb:[{pb:j()}],pl:[{pl:j()}],m:[{m:ie()}],mx:[{mx:ie()}],my:[{my:ie()}],ms:[{ms:ie()}],me:[{me:ie()}],mt:[{mt:ie()}],mr:[{mr:ie()}],mb:[{mb:ie()}],ml:[{ml:ie()}],"space-x":[{"space-x":j()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":j()}],"space-y-reverse":["space-y-reverse"],size:[{size:Ae()}],w:[{w:[d,"screen",...Ae()]}],"min-w":[{"min-w":[d,"screen","none",...Ae()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[p]},...Ae()]}],h:[{h:["screen","lh",...Ae()]}],"min-h":[{"min-h":["screen","lh","none",...Ae()]}],"max-h":[{"max-h":["screen","lh",...Ae()]}],"font-size":[{text:["base",i,tl,Go]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[l,Qe,t0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",e0,Ke]}],"font-family":[{font:[g1,Ke,s]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[c,Qe,Ke]}],"line-clamp":[{"line-clamp":[xt,"none",Qe,t0]}],leading:[{leading:[u,...j()]}],"list-image":[{"list-image":["none",Qe,Ke]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Qe,Ke]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:G()}],"text-color":[{text:G()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...fe(),"wavy"]}],"text-decoration-thickness":[{decoration:[xt,"from-font","auto",Qe,Go]}],"text-decoration-color":[{decoration:G()}],"underline-offset":[{"underline-offset":[xt,"auto",Qe,Ke]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Qe,Ke]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Qe,Ke]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:xe()}],"bg-repeat":[{bg:Z()}],"bg-size":[{bg:N()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ho,Qe,Ke],radial:["",Qe,Ke],conic:[ho,Qe,Ke]},A1,m1]}],"bg-color":[{bg:G()}],"gradient-from-pos":[{from:U()}],"gradient-via-pos":[{via:U()}],"gradient-to-pos":[{to:U()}],"gradient-from":[{from:G()}],"gradient-via":[{via:G()}],"gradient-to":[{to:G()}],rounded:[{rounded:K()}],"rounded-s":[{"rounded-s":K()}],"rounded-e":[{"rounded-e":K()}],"rounded-t":[{"rounded-t":K()}],"rounded-r":[{"rounded-r":K()}],"rounded-b":[{"rounded-b":K()}],"rounded-l":[{"rounded-l":K()}],"rounded-ss":[{"rounded-ss":K()}],"rounded-se":[{"rounded-se":K()}],"rounded-ee":[{"rounded-ee":K()}],"rounded-es":[{"rounded-es":K()}],"rounded-tl":[{"rounded-tl":K()}],"rounded-tr":[{"rounded-tr":K()}],"rounded-br":[{"rounded-br":K()}],"rounded-bl":[{"rounded-bl":K()}],"border-w":[{border:Y()}],"border-w-x":[{"border-x":Y()}],"border-w-y":[{"border-y":Y()}],"border-w-s":[{"border-s":Y()}],"border-w-e":[{"border-e":Y()}],"border-w-t":[{"border-t":Y()}],"border-w-r":[{"border-r":Y()}],"border-w-b":[{"border-b":Y()}],"border-w-l":[{"border-l":Y()}],"divide-x":[{"divide-x":Y()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Y()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...fe(),"hidden","none"]}],"divide-style":[{divide:[...fe(),"hidden","none"]}],"border-color":[{border:G()}],"border-color-x":[{"border-x":G()}],"border-color-y":[{"border-y":G()}],"border-color-s":[{"border-s":G()}],"border-color-e":[{"border-e":G()}],"border-color-t":[{"border-t":G()}],"border-color-r":[{"border-r":G()}],"border-color-b":[{"border-b":G()}],"border-color-l":[{"border-l":G()}],"divide-color":[{divide:G()}],"outline-style":[{outline:[...fe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[xt,Qe,Ke]}],"outline-w":[{outline:["",xt,tl,Go]}],"outline-color":[{outline:G()}],shadow:[{shadow:["","none",x,qc,Wc]}],"shadow-color":[{shadow:G()}],"inset-shadow":[{"inset-shadow":["none",A,qc,Wc]}],"inset-shadow-color":[{"inset-shadow":G()}],"ring-w":[{ring:Y()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:G()}],"ring-offset-w":[{"ring-offset":[xt,Go]}],"ring-offset-color":[{"ring-offset":G()}],"inset-ring-w":[{"inset-ring":Y()}],"inset-ring-color":[{"inset-ring":G()}],"text-shadow":[{"text-shadow":["none",_,qc,Wc]}],"text-shadow-color":[{"text-shadow":G()}],opacity:[{opacity:[xt,Qe,Ke]}],"mix-blend":[{"mix-blend":[...me(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":me()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[xt]}],"mask-image-linear-from-pos":[{"mask-linear-from":Se()}],"mask-image-linear-to-pos":[{"mask-linear-to":Se()}],"mask-image-linear-from-color":[{"mask-linear-from":G()}],"mask-image-linear-to-color":[{"mask-linear-to":G()}],"mask-image-t-from-pos":[{"mask-t-from":Se()}],"mask-image-t-to-pos":[{"mask-t-to":Se()}],"mask-image-t-from-color":[{"mask-t-from":G()}],"mask-image-t-to-color":[{"mask-t-to":G()}],"mask-image-r-from-pos":[{"mask-r-from":Se()}],"mask-image-r-to-pos":[{"mask-r-to":Se()}],"mask-image-r-from-color":[{"mask-r-from":G()}],"mask-image-r-to-color":[{"mask-r-to":G()}],"mask-image-b-from-pos":[{"mask-b-from":Se()}],"mask-image-b-to-pos":[{"mask-b-to":Se()}],"mask-image-b-from-color":[{"mask-b-from":G()}],"mask-image-b-to-color":[{"mask-b-to":G()}],"mask-image-l-from-pos":[{"mask-l-from":Se()}],"mask-image-l-to-pos":[{"mask-l-to":Se()}],"mask-image-l-from-color":[{"mask-l-from":G()}],"mask-image-l-to-color":[{"mask-l-to":G()}],"mask-image-x-from-pos":[{"mask-x-from":Se()}],"mask-image-x-to-pos":[{"mask-x-to":Se()}],"mask-image-x-from-color":[{"mask-x-from":G()}],"mask-image-x-to-color":[{"mask-x-to":G()}],"mask-image-y-from-pos":[{"mask-y-from":Se()}],"mask-image-y-to-pos":[{"mask-y-to":Se()}],"mask-image-y-from-color":[{"mask-y-from":G()}],"mask-image-y-to-color":[{"mask-y-to":G()}],"mask-image-radial":[{"mask-radial":[Qe,Ke]}],"mask-image-radial-from-pos":[{"mask-radial-from":Se()}],"mask-image-radial-to-pos":[{"mask-radial-to":Se()}],"mask-image-radial-from-color":[{"mask-radial-from":G()}],"mask-image-radial-to-color":[{"mask-radial-to":G()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":F()}],"mask-image-conic-pos":[{"mask-conic":[xt]}],"mask-image-conic-from-pos":[{"mask-conic-from":Se()}],"mask-image-conic-to-pos":[{"mask-conic-to":Se()}],"mask-image-conic-from-color":[{"mask-conic-from":G()}],"mask-image-conic-to-color":[{"mask-conic-to":G()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:xe()}],"mask-repeat":[{mask:Z()}],"mask-size":[{mask:N()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Qe,Ke]}],filter:[{filter:["","none",Qe,Ke]}],blur:[{blur:we()}],brightness:[{brightness:[xt,Qe,Ke]}],contrast:[{contrast:[xt,Qe,Ke]}],"drop-shadow":[{"drop-shadow":["","none",k,qc,Wc]}],"drop-shadow-color":[{"drop-shadow":G()}],grayscale:[{grayscale:["",xt,Qe,Ke]}],"hue-rotate":[{"hue-rotate":[xt,Qe,Ke]}],invert:[{invert:["",xt,Qe,Ke]}],saturate:[{saturate:[xt,Qe,Ke]}],sepia:[{sepia:["",xt,Qe,Ke]}],"backdrop-filter":[{"backdrop-filter":["","none",Qe,Ke]}],"backdrop-blur":[{"backdrop-blur":we()}],"backdrop-brightness":[{"backdrop-brightness":[xt,Qe,Ke]}],"backdrop-contrast":[{"backdrop-contrast":[xt,Qe,Ke]}],"backdrop-grayscale":[{"backdrop-grayscale":["",xt,Qe,Ke]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[xt,Qe,Ke]}],"backdrop-invert":[{"backdrop-invert":["",xt,Qe,Ke]}],"backdrop-opacity":[{"backdrop-opacity":[xt,Qe,Ke]}],"backdrop-saturate":[{"backdrop-saturate":[xt,Qe,Ke]}],"backdrop-sepia":[{"backdrop-sepia":["",xt,Qe,Ke]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":j()}],"border-spacing-x":[{"border-spacing-x":j()}],"border-spacing-y":[{"border-spacing-y":j()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Qe,Ke]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[xt,"initial",Qe,Ke]}],ease:[{ease:["linear","initial",B,Qe,Ke]}],delay:[{delay:[xt,Qe,Ke]}],animate:[{animate:["none",S,Qe,Ke]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[C,Qe,Ke]}],"perspective-origin":[{"perspective-origin":M()}],rotate:[{rotate:de()}],"rotate-x":[{"rotate-x":de()}],"rotate-y":[{"rotate-y":de()}],"rotate-z":[{"rotate-z":de()}],scale:[{scale:he()}],"scale-x":[{"scale-x":he()}],"scale-y":[{"scale-y":he()}],"scale-z":[{"scale-z":he()}],"scale-3d":["scale-3d"],skew:[{skew:Ze()}],"skew-x":[{"skew-x":Ze()}],"skew-y":[{"skew-y":Ze()}],transform:[{transform:[Qe,Ke,"","none","gpu","cpu"]}],"transform-origin":[{origin:M()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Fe()}],"translate-x":[{"translate-x":Fe()}],"translate-y":[{"translate-y":Fe()}],"translate-z":[{"translate-z":Fe()}],"translate-none":["translate-none"],accent:[{accent:G()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:G()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Qe,Ke]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Qe,Ke]}],fill:[{fill:["none",...G()]}],"stroke-w":[{stroke:[xt,tl,Go,t0]}],stroke:[{stroke:["none",...G()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},w1=t1(_1);function pt(...n){return w1(Ex(n))}const rn=D.forwardRef(({className:n,type:s,...i},l)=>b.jsx("input",{type:s,className:pt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:l,...i}));rn.displayName="Input";function xm(n,s){if(typeof n=="function")return n(s);n!=null&&(n.current=s)}function El(...n){return s=>{let i=!1;const l=n.map(c=>{const u=xm(c,s);return!i&&typeof u=="function"&&(i=!0),u});if(i)return()=>{for(let c=0;c<l.length;c++){const u=l[c];typeof u=="function"?u():xm(n[c],null)}}}}function Er(...n){return D.useCallback(El(...n),n)}var b1=Symbol.for("react.lazy"),Gu=I0[" use ".trim().toString()];function C1(n){return typeof n=="object"&&n!==null&&"then"in n}function Ox(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===b1&&"_payload"in n&&C1(n._payload)}function V0(n){const s=k1(n),i=D.forwardRef((l,c)=>{let{children:u,...p}=l;Ox(u)&&typeof Gu=="function"&&(u=Gu(u._payload));const d=D.Children.toArray(u),g=d.find(B1);if(g){const m=g.props.children,x=d.map(A=>A===g?D.Children.count(m)>1?D.Children.only(null):D.isValidElement(m)?m.props.children:null:A);return b.jsx(s,{...p,ref:c,children:D.isValidElement(m)?D.cloneElement(m,void 0,x):null})}return b.jsx(s,{...p,ref:c,children:u})});return i.displayName=`${n}.Slot`,i}var E1=V0("Slot");function k1(n){const s=D.forwardRef((i,l)=>{let{children:c,...u}=i;if(Ox(c)&&typeof Gu=="function"&&(c=Gu(c._payload)),D.isValidElement(c)){const p=T1(c),d=P1(u,c.props);return c.type!==D.Fragment&&(d.ref=l?El(l,p):p),D.cloneElement(c,d)}return D.Children.count(c)>1?D.Children.only(null):null});return s.displayName=`${n}.SlotClone`,s}var S1=Symbol("radix.slottable");function B1(n){return D.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===S1}function P1(n,s){const i={...s};for(const l in s){const c=n[l],u=s[l];/^on[A-Z]/.test(l)?c&&u?i[l]=(...d)=>{const g=u(...d);return c(...d),g}:c&&(i[l]=c):l==="style"?i[l]={...c,...u}:l==="className"&&(i[l]=[c,u].filter(Boolean).join(" "))}return{...n,...i}}function T1(n){var l,c;let s=(l=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:l.get,i=s&&"isReactWarning"in s&&s.isReactWarning;return i?n.ref:(s=(c=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:c.get,i=s&&"isReactWarning"in s&&s.isReactWarning,i?n.props.ref:n.props.ref||n.ref)}const Am=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,vm=Ex,U0=(n,s)=>i=>{var l;if((s==null?void 0:s.variants)==null)return vm(n,i==null?void 0:i.class,i==null?void 0:i.className);const{variants:c,defaultVariants:u}=s,p=Object.keys(c).map(m=>{const x=i==null?void 0:i[m],A=u==null?void 0:u[m];if(x===null)return null;const _=Am(x)||Am(A);return c[m][_]}),d=i&&Object.entries(i).reduce((m,x)=>{let[A,_]=x;return _===void 0||(m[A]=_),m},{}),g=s==null||(l=s.compoundVariants)===null||l===void 0?void 0:l.reduce((m,x)=>{let{class:A,className:_,...k}=x;return Object.entries(k).every(R=>{let[C,w]=R;return Array.isArray(w)?w.includes({...u,...d}[C]):{...u,...d}[C]===w})?[...m,A,_]:m},[]);return vm(n,p,g,i==null?void 0:i.class,i==null?void 0:i.className)},D1=U0("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),wn=D.forwardRef(({className:n,variant:s,size:i,asChild:l=!1,...c},u)=>{const p=l?E1:"button";return b.jsx(p,{className:pt(D1({variant:s,size:i,className:n})),ref:u,...c})});wn.displayName="Button";function Gc(n){return n>=O0?`${n}+`:`${n}`}function R1({contacts:n,channels:s,activeConversation:i,onSelectConversation:l,onNewMessage:c,lastMessageTimes:u,unreadCounts:p,mentions:d,showCracker:g,crackerRunning:m,onToggleCracker:x,onMarkAllRead:A,favorites:_,sortOrder:k="recent",onSortOrderChange:R}){const C=k,[w,B]=D.useState(""),S=()=>{const Z=C==="alpha"?"recent":"alpha";R==null||R(Z)},T=Z=>{B(""),l(Z)},F=(Z,N)=>(i==null?void 0:i.type)===Z&&(i==null?void 0:i.id)===N,M=(Z,N)=>{const U=Or(Z,N);return p[U]||0},z=(Z,N)=>{const U=Or(Z,N);return d[U]||!1},H=(Z,N)=>{const U=Or(Z,N);return u[U]||0},j=s.reduce((Z,N)=>(Z.some(U=>U.name===N.name)||Z.push(N),Z),[]),X=n.filter(Z=>Z.public_key&&Z.public_key.length>0).sort((Z,N)=>Z.name&&!N.name?-1:!Z.name&&N.name?1:(Z.name||"").localeCompare(N.name||"")).reduce((Z,N)=>(Z.some(U=>U.public_key===N.public_key)||Z.push(N),Z),[]),V=[...j].sort((Z,N)=>{if(Z.name==="Public")return-1;if(N.name==="Public")return 1;if(C==="recent"){const U=H("channel",Z.key),K=H("channel",N.key);if(U&&K)return K-U;if(U&&!K)return-1;if(!U&&K)return 1}return Z.name.localeCompare(N.name)}),$=[...X].sort((Z,N)=>{const U=Z.type===mo,K=N.type===mo;if(U&&!K)return 1;if(!U&&K)return-1;if(U&&K)return(Z.name||Z.public_key).localeCompare(N.name||N.public_key);if(C==="recent"){const Y=H("contact",Z.public_key),fe=H("contact",N.public_key);if(Y&&fe)return fe-Y;if(Y&&!fe)return-1;if(!Y&&fe)return 1}return(Z.name||Z.public_key).localeCompare(N.name||N.public_key)}),ee=w.toLowerCase().trim(),W=ee?V.filter(Z=>Z.name.toLowerCase().includes(ee)||Z.key.toLowerCase().includes(ee)):V,re=ee?$.filter(Z=>{var N;return((N=Z.name)==null?void 0:N.toLowerCase().includes(ee))||Z.public_key.toLowerCase().includes(ee)}):$,pe=W.filter(Z=>ts(_,"channel",Z.key)),ie=re.filter(Z=>ts(_,"contact",Z.public_key)),Ae=W.filter(Z=>!ts(_,"channel",Z.key)),G=re.filter(Z=>!ts(_,"contact",Z.public_key)),xe=[...pe.map(Z=>({type:"channel",channel:Z})),...ie.map(Z=>({type:"contact",contact:Z}))].sort((Z,N)=>{const U=Z.type==="channel"?H("channel",Z.channel.key):H("contact",Z.contact.public_key),K=N.type==="channel"?H("channel",N.channel.key):H("contact",N.contact.public_key);if(U&&K)return K-U;if(U&&!K)return-1;if(!U&&K)return 1;const Y=Z.type==="channel"?Z.channel.name:Z.contact.name||Z.contact.public_key,fe=N.type==="channel"?N.channel.name:N.contact.name||N.contact.public_key;return Y.localeCompare(fe)});return b.jsxs("div",{className:"sidebar w-60 h-full min-h-0 bg-card border-r border-border flex flex-col",children:[b.jsxs("div",{className:"flex justify-between items-center px-3 py-3 border-b border-border",children:[b.jsx("h2",{className:"text-xs uppercase text-muted-foreground font-medium",children:"Conversations"}),b.jsx(wn,{variant:"ghost",size:"sm",onClick:c,title:"New Message",className:"h-6 w-6 p-0 text-muted-foreground hover:text-foreground",children:"+"})]}),b.jsxs("div",{className:"relative px-3 py-2 border-b border-border",children:[b.jsx(rn,{type:"text",placeholder:"Search...",value:w,onChange:Z=>B(Z.target.value),className:"h-8 text-sm pr-8"}),w&&b.jsx("button",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground text-lg leading-none",onClick:()=>B(""),title:"Clear search",children:""})]}),b.jsxs("div",{className:"flex-1 overflow-y-auto",children:[!ee&&b.jsxs("div",{className:pt("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",F("raw","raw")&&"bg-accent border-l-primary"),onClick:()=>T({type:"raw",id:"raw",name:"Raw Packet Feed"}),children:[b.jsx("span",{className:"text-muted-foreground text-xs",children:""}),b.jsx("span",{className:"flex-1 truncate",children:"Packet Feed"})]}),!ee&&b.jsxs("div",{className:pt("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",F("map","map")&&"bg-accent border-l-primary"),onClick:()=>T({type:"map",id:"map",name:"Node Map"}),children:[b.jsx("span",{className:"text-muted-foreground text-xs",children:""}),b.jsx("span",{className:"flex-1 truncate",children:"Node Map"})]}),!ee&&b.jsxs("div",{className:pt("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",F("visualizer","visualizer")&&"bg-accent border-l-primary"),onClick:()=>T({type:"visualizer",id:"visualizer",name:"Mesh Visualizer"}),children:[b.jsx("span",{className:"text-muted-foreground text-xs",children:""}),b.jsx("span",{className:"flex-1 truncate",children:"Mesh Visualizer"})]}),!ee&&b.jsxs("div",{className:pt("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",g&&"bg-accent border-l-primary"),onClick:x,children:[b.jsx("span",{className:"text-muted-foreground text-xs",children:""}),b.jsxs("span",{className:"flex-1 truncate",children:[g?"Hide":"Show"," Room Finder",b.jsxs("span",{className:pt("ml-1 text-xs",m?"text-green-500":"text-muted-foreground"),children:["(",m?"running":"stopped",")"]})]})]}),!ee&&Object.keys(p).length>0&&b.jsxs("div",{className:"px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",onClick:A,children:[b.jsx("span",{className:"text-muted-foreground text-xs",children:""}),b.jsx("span",{className:"flex-1 truncate text-muted-foreground",children:"Mark all as read"})]}),xe.length>0&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"flex justify-between items-center px-3 py-2 pt-3",children:b.jsx("span",{className:"text-[11px] uppercase text-muted-foreground",children:"Favorites"})}),xe.map(Z=>{if(Z.type==="channel"){const N=Z.channel,U=M("channel",N.key),K=z("channel",N.key);return b.jsxs("div",{className:pt("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",F("channel",N.key)&&"bg-accent border-l-primary",U>0&&"[&_.name]:font-bold [&_.name]:text-foreground"),onClick:()=>T({type:"channel",id:N.key,name:N.name}),children:[b.jsx("span",{className:"name flex-1 truncate",children:N.name}),U>0&&b.jsx("span",{className:pt("text-[10px] font-semibold px-1.5 py-0.5 rounded-full min-w-[18px] text-center",K?"bg-destructive text-destructive-foreground":"bg-primary text-primary-foreground"),children:Gc(U)})]},`fav-chan-${N.key}`)}else{const N=Z.contact,U=M("contact",N.public_key),K=z("contact",N.public_key);return b.jsxs("div",{className:pt("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",F("contact",N.public_key)&&"bg-accent border-l-primary",U>0&&"[&_.name]:font-bold [&_.name]:text-foreground"),onClick:()=>T({type:"contact",id:N.public_key,name:Ti(N.name,N.public_key)}),children:[b.jsx(v0,{name:N.name,publicKey:N.public_key,size:24,contactType:N.type}),b.jsx("span",{className:"name flex-1 truncate",children:Ti(N.name,N.public_key)}),U>0&&b.jsx("span",{className:pt("text-[10px] font-semibold px-1.5 py-0.5 rounded-full min-w-[18px] text-center",K?"bg-destructive text-destructive-foreground":"bg-primary text-primary-foreground"),children:Gc(U)})]},`fav-contact-${N.public_key}`)}})]}),Ae.length>0&&b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"flex justify-between items-center px-3 py-2 pt-3",children:[b.jsx("span",{className:"text-[11px] uppercase text-muted-foreground",children:"Channels"}),b.jsx("button",{className:"bg-transparent border border-border text-muted-foreground px-1.5 py-0.5 text-[10px] rounded hover:bg-accent hover:text-foreground",onClick:S,title:C==="alpha"?"Sort by recent":"Sort alphabetically",children:C==="alpha"?"A-Z":""})]}),Ae.map(Z=>{const N=M("channel",Z.key),U=z("channel",Z.key);return b.jsxs("div",{className:pt("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",F("channel",Z.key)&&"bg-accent border-l-primary",N>0&&"[&_.name]:font-bold [&_.name]:text-foreground"),onClick:()=>T({type:"channel",id:Z.key,name:Z.name}),children:[b.jsx("span",{className:"name flex-1 truncate",children:Z.name}),N>0&&b.jsx("span",{className:pt("text-[10px] font-semibold px-1.5 py-0.5 rounded-full min-w-[18px] text-center",U?"bg-destructive text-destructive-foreground":"bg-primary text-primary-foreground"),children:Gc(N)})]},`chan-${Z.key}`)})]}),G.length>0&&b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"flex justify-between items-center px-3 py-2 pt-3",children:[b.jsx("span",{className:"text-[11px] uppercase text-muted-foreground",children:"Contacts"}),Ae.length===0&&b.jsx("button",{className:"bg-transparent border border-border text-muted-foreground px-1.5 py-0.5 text-[10px] rounded hover:bg-accent hover:text-foreground",onClick:S,title:C==="alpha"?"Sort by recent":"Sort alphabetically",children:C==="alpha"?"A-Z":""})]}),G.map(Z=>{const N=M("contact",Z.public_key),U=z("contact",Z.public_key);return b.jsxs("div",{className:pt("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",F("contact",Z.public_key)&&"bg-accent border-l-primary",N>0&&"[&_.name]:font-bold [&_.name]:text-foreground"),onClick:()=>T({type:"contact",id:Z.public_key,name:Ti(Z.name,Z.public_key)}),children:[b.jsx(v0,{name:Z.name,publicKey:Z.public_key,size:24,contactType:Z.type}),b.jsx("span",{className:"name flex-1 truncate",children:Ti(Z.name,Z.public_key)}),N>0&&b.jsx("span",{className:pt("text-[10px] font-semibold px-1.5 py-0.5 rounded-full min-w-[18px] text-center",U?"bg-destructive text-destructive-foreground":"bg-primary text-primary-foreground"),children:Gc(N)})]},Z.public_key)})]}),G.length===0&&Ae.length===0&&xe.length===0&&b.jsx("div",{className:"p-5 text-center text-muted-foreground",children:ee?"No matches found":"No conversations yet"})]})]})}function ym(n){const s=n.indexOf(": ");if(s>0&&s<50){const i=n.substring(0,s);if(!i.includes(":"))return{sender:i,content:n.substring(s+2)}}return{sender:null,content:n}}function ra(n){const s=new Date(n*1e3),i=new Date,l=s.toDateString()===i.toDateString(),c=s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return l?c:`${s.toLocaleDateString([],{month:"short",day:"numeric"})} ${c}`}function N1(n){if(!n||n.length===0)return[];const s=n.toUpperCase(),i=[];for(let l=0;l<s.length;l+=2)l+1<s.length&&i.push(s.slice(l,l+2));return i}function F1(n,s,i=!0){const l=n.toUpperCase();return s.filter(c=>i&&c.type!==td?!1:c.public_key.toUpperCase().startsWith(l))}function jr(n,s,i,l){if(n===null||s===null||i===null||l===null)return null;const c=6371,u=$c(i-n),p=$c(l-s),d=Math.sin(u/2)*Math.sin(u/2)+Math.cos($c(n))*Math.cos($c(i))*Math.sin(p/2)*Math.sin(p/2),g=2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d));return c*g}function $c(n){return n*Math.PI/180}function Rt(n,s){return!(n===null||s===null||n===0&&s===0)}function ns(n){return n<1?`${Math.round(n*1e3)}m`:`${n.toFixed(1)}km`}function L1(n,s,i){return s===null||i===null?n:[...n].sort((l,c)=>{const u=jr(s,i,l.lat,l.lon),p=jr(s,i,c.lat,c.lon);return u===null&&p===null?0:u===null?1:p===null?-1:u-p})}function M1(n){return!n||n.length===0?0:Math.floor(n.length/2)}function I1(n){if(!n||n.length===0)return{display:"",allDirect:!0,hasMultiple:!1};const s=n.map(p=>M1(p.path)).sort((p,d)=>p-d),i=s.every(p=>p===0),l=n.length>1;return{display:s.map(p=>p===0?"d":p.toString()).join("/"),allDirect:i,hasMultiple:l}}function O1(n,s,i,l){var C;const c=N1(n),u=s.publicKeyOrPrefix.toUpperCase().slice(0,2),p={name:s.name,prefix:u,lat:s.lat,lon:s.lon},d=((C=l==null?void 0:l.public_key)==null?void 0:C.toUpperCase().slice(0,2))||"??",g={name:(l==null?void 0:l.name)||"Unknown",prefix:d,lat:(l==null?void 0:l.lat)??null,lon:(l==null?void 0:l.lon)??null,publicKey:(l==null?void 0:l.public_key)??null},m=[];let x=s.lat,A=s.lon,_=!Rt(s.lat,s.lon);for(const w of c){const B=F1(w,i,!0),S=L1(B,x,A);let T=null;const F=S.length===1&&Rt(S[0].lat,S[0].lon);!_&&F&&(T=jr(x,A,S[0].lat,S[0].lon)),m.push({prefix:w,matches:S,distanceFromPrev:T}),S.length===0?(_=!0,x=null,A=null):S.length>1?(_=!0,Rt(S[0].lat,S[0].lon)?(x=S[0].lat,A=S[0].lon):(x=null,A=null)):Rt(S[0].lat,S[0].lon)?(_=!1,x=S[0].lat,A=S[0].lon):(_=!0,x=null,A=null)}const k=j1(p,m,g),R=!Rt(p.lat,p.lon)||!Rt(g.lat,g.lon)||m.some(w=>w.matches.length!==1||!Rt(w.matches[0].lat,w.matches[0].lon));return{sender:p,hops:m,receiver:g,totalDistances:k,hasGaps:R}}function j1(n,s,i){if(s.length===0){if(!Rt(n.lat,n.lon)||!Rt(i.lat,i.lon))return null;const m=jr(n.lat,n.lon,i.lat,i.lon);return m!==null?[m]:null}let l=n.lat,c=n.lon,u=0;if(!Rt(l,c)){for(let m=0;m<s.length;m++){const x=s[m];if(x.matches.length===1&&Rt(x.matches[0].lat,x.matches[0].lon)){l=x.matches[0].lat,c=x.matches[0].lon,u=m+1;break}}if(!Rt(l,c))return null}let p=0,d=!1,g=-1;for(let m=u;m<s.length;m++){const x=s[m];if(x.matches.length!==1||!Rt(x.matches[0].lat,x.matches[0].lon)){l=null,c=null;continue}if(l!==null&&c!==null){const A=jr(l,c,x.matches[0].lat,x.matches[0].lon);A!==null&&(p+=A,d=!0)}l=x.matches[0].lat,c=x.matches[0].lon,g=m}if(g===s.length-1&&l!==null&&c!==null&&Rt(i.lat,i.lon)){const m=jr(l,c,i.lat,i.lon);m!==null&&(p+=m,d=!0)}return d?[p]:null}function fn(n,s,{checkForDefaultPrevented:i=!0}={}){return function(c){if(n==null||n(c),i===!1||!c.defaultPrevented)return s==null?void 0:s(c)}}function z1(n,s){const i=D.createContext(s),l=u=>{const{children:p,...d}=u,g=D.useMemo(()=>d,Object.values(d));return b.jsx(i.Provider,{value:g,children:p})};l.displayName=n+"Provider";function c(u){const p=D.useContext(i);if(p)return p;if(s!==void 0)return s;throw new Error(`\`${u}\` must be used within \`${n}\``)}return[l,c]}function kl(n,s=[]){let i=[];function l(u,p){const d=D.createContext(p),g=i.length;i=[...i,p];const m=A=>{var B;const{scope:_,children:k,...R}=A,C=((B=_==null?void 0:_[n])==null?void 0:B[g])||d,w=D.useMemo(()=>R,Object.values(R));return b.jsx(C.Provider,{value:w,children:k})};m.displayName=u+"Provider";function x(A,_){var C;const k=((C=_==null?void 0:_[n])==null?void 0:C[g])||d,R=D.useContext(k);if(R)return R;if(p!==void 0)return p;throw new Error(`\`${A}\` must be used within \`${u}\``)}return[m,x]}const c=()=>{const u=i.map(p=>D.createContext(p));return function(d){const g=(d==null?void 0:d[n])||u;return D.useMemo(()=>({[`__scope${n}`]:{...d,[n]:g}}),[d,g])}};return c.scopeName=n,[l,H1(c,...s)]}function H1(...n){const s=n[0];if(n.length===1)return s;const i=()=>{const l=n.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(u){const p=l.reduce((d,{useScope:g,scopeName:m})=>{const A=g(u)[`__scope${m}`];return{...d,...A}},{});return D.useMemo(()=>({[`__scope${s.scopeName}`]:p}),[p])}};return i.scopeName=s.scopeName,i}var ia=globalThis!=null&&globalThis.document?D.useLayoutEffect:()=>{},V1=I0[" useId ".trim().toString()]||(()=>{}),U1=0;function yl(n){const[s,i]=D.useState(V1());return ia(()=>{i(l=>l??String(U1++))},[n]),s?`radix-${s}`:""}var Z1=I0[" useInsertionEffect ".trim().toString()]||ia;function nd({prop:n,defaultProp:s,onChange:i=()=>{},caller:l}){const[c,u,p]=W1({defaultProp:s,onChange:i}),d=n!==void 0,g=d?n:c;{const x=D.useRef(n!==void 0);D.useEffect(()=>{const A=x.current;A!==d&&console.warn(`${l} is changing from ${A?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),x.current=d},[d,l])}const m=D.useCallback(x=>{var A;if(d){const _=q1(x)?x(n):x;_!==n&&((A=p.current)==null||A.call(p,_))}else u(x)},[d,n,u,p]);return[g,m]}function W1({defaultProp:n,onChange:s}){const[i,l]=D.useState(n),c=D.useRef(i),u=D.useRef(s);return Z1(()=>{u.current=s},[s]),D.useEffect(()=>{var p;c.current!==i&&((p=u.current)==null||p.call(u,i),c.current=i)},[i,c]),[i,l,u]}function q1(n){return typeof n=="function"}function G1(n){const s=$1(n),i=D.forwardRef((l,c)=>{const{children:u,...p}=l,d=D.Children.toArray(u),g=d.find(Q1);if(g){const m=g.props.children,x=d.map(A=>A===g?D.Children.count(m)>1?D.Children.only(null):D.isValidElement(m)?m.props.children:null:A);return b.jsx(s,{...p,ref:c,children:D.isValidElement(m)?D.cloneElement(m,void 0,x):null})}return b.jsx(s,{...p,ref:c,children:u})});return i.displayName=`${n}.Slot`,i}function $1(n){const s=D.forwardRef((i,l)=>{const{children:c,...u}=i;if(D.isValidElement(c)){const p=X1(c),d=Y1(u,c.props);return c.type!==D.Fragment&&(d.ref=l?El(l,p):p),D.cloneElement(c,d)}return D.Children.count(c)>1?D.Children.only(null):null});return s.displayName=`${n}.SlotClone`,s}var K1=Symbol("radix.slottable");function Q1(n){return D.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===K1}function Y1(n,s){const i={...s};for(const l in s){const c=n[l],u=s[l];/^on[A-Z]/.test(l)?c&&u?i[l]=(...d)=>{const g=u(...d);return c(...d),g}:c&&(i[l]=c):l==="style"?i[l]={...c,...u}:l==="className"&&(i[l]=[c,u].filter(Boolean).join(" "))}return{...n,...i}}function X1(n){var l,c;let s=(l=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:l.get,i=s&&"isReactWarning"in s&&s.isReactWarning;return i?n.ref:(s=(c=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:c.get,i=s&&"isReactWarning"in s&&s.isReactWarning,i?n.props.ref:n.props.ref||n.ref)}var J1=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],gn=J1.reduce((n,s)=>{const i=G1(`Primitive.${s}`),l=D.forwardRef((c,u)=>{const{asChild:p,...d}=c,g=p?i:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(g,{...d,ref:u})});return l.displayName=`Primitive.${s}`,{...n,[s]:l}},{});function ew(n,s){n&&j0.flushSync(()=>n.dispatchEvent(s))}function oa(n){const s=D.useRef(n);return D.useEffect(()=>{s.current=n}),D.useMemo(()=>(...i)=>{var l;return(l=s.current)==null?void 0:l.call(s,...i)},[])}function tw(n,s=globalThis==null?void 0:globalThis.document){const i=oa(n);D.useEffect(()=>{const l=c=>{c.key==="Escape"&&i(c)};return s.addEventListener("keydown",l,{capture:!0}),()=>s.removeEventListener("keydown",l,{capture:!0})},[i,s])}var nw="DismissableLayer",_0="dismissableLayer.update",rw="dismissableLayer.pointerDownOutside",iw="dismissableLayer.focusOutside",_m,jx=D.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),zx=D.forwardRef((n,s)=>{const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:p,onDismiss:d,...g}=n,m=D.useContext(jx),[x,A]=D.useState(null),_=(x==null?void 0:x.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,k]=D.useState({}),R=Er(s,H=>A(H)),C=Array.from(m.layers),[w]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),B=C.indexOf(w),S=x?C.indexOf(x):-1,T=m.layersWithOutsidePointerEventsDisabled.size>0,F=S>=B,M=aw(H=>{const j=H.target,X=[...m.branches].some(V=>V.contains(j));!F||X||(c==null||c(H),p==null||p(H),H.defaultPrevented||d==null||d())},_),z=lw(H=>{const j=H.target;[...m.branches].some(V=>V.contains(j))||(u==null||u(H),p==null||p(H),H.defaultPrevented||d==null||d())},_);return tw(H=>{S===m.layers.size-1&&(l==null||l(H),!H.defaultPrevented&&d&&(H.preventDefault(),d()))},_),D.useEffect(()=>{if(x)return i&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(_m=_.body.style.pointerEvents,_.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(x)),m.layers.add(x),wm(),()=>{i&&m.layersWithOutsidePointerEventsDisabled.size===1&&(_.body.style.pointerEvents=_m)}},[x,_,i,m]),D.useEffect(()=>()=>{x&&(m.layers.delete(x),m.layersWithOutsidePointerEventsDisabled.delete(x),wm())},[x,m]),D.useEffect(()=>{const H=()=>k({});return document.addEventListener(_0,H),()=>document.removeEventListener(_0,H)},[]),b.jsx(gn.div,{...g,ref:R,style:{pointerEvents:T?F?"auto":"none":void 0,...n.style},onFocusCapture:fn(n.onFocusCapture,z.onFocusCapture),onBlurCapture:fn(n.onBlurCapture,z.onBlurCapture),onPointerDownCapture:fn(n.onPointerDownCapture,M.onPointerDownCapture)})});zx.displayName=nw;var ow="DismissableLayerBranch",sw=D.forwardRef((n,s)=>{const i=D.useContext(jx),l=D.useRef(null),c=Er(s,l);return D.useEffect(()=>{const u=l.current;if(u)return i.branches.add(u),()=>{i.branches.delete(u)}},[i.branches]),b.jsx(gn.div,{...n,ref:c})});sw.displayName=ow;function aw(n,s=globalThis==null?void 0:globalThis.document){const i=oa(n),l=D.useRef(!1),c=D.useRef(()=>{});return D.useEffect(()=>{const u=d=>{if(d.target&&!l.current){let g=function(){Hx(rw,i,m,{discrete:!0})};const m={originalEvent:d};d.pointerType==="touch"?(s.removeEventListener("click",c.current),c.current=g,s.addEventListener("click",c.current,{once:!0})):g()}else s.removeEventListener("click",c.current);l.current=!1},p=window.setTimeout(()=>{s.addEventListener("pointerdown",u)},0);return()=>{window.clearTimeout(p),s.removeEventListener("pointerdown",u),s.removeEventListener("click",c.current)}},[s,i]),{onPointerDownCapture:()=>l.current=!0}}function lw(n,s=globalThis==null?void 0:globalThis.document){const i=oa(n),l=D.useRef(!1);return D.useEffect(()=>{const c=u=>{u.target&&!l.current&&Hx(iw,i,{originalEvent:u},{discrete:!1})};return s.addEventListener("focusin",c),()=>s.removeEventListener("focusin",c)},[s,i]),{onFocusCapture:()=>l.current=!0,onBlurCapture:()=>l.current=!1}}function wm(){const n=new CustomEvent(_0);document.dispatchEvent(n)}function Hx(n,s,i,{discrete:l}){const c=i.originalEvent.target,u=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:i});s&&c.addEventListener(n,s,{once:!0}),l?ew(c,u):c.dispatchEvent(u)}var n0="focusScope.autoFocusOnMount",r0="focusScope.autoFocusOnUnmount",bm={bubbles:!1,cancelable:!0},cw="FocusScope",Vx=D.forwardRef((n,s)=>{const{loop:i=!1,trapped:l=!1,onMountAutoFocus:c,onUnmountAutoFocus:u,...p}=n,[d,g]=D.useState(null),m=oa(c),x=oa(u),A=D.useRef(null),_=Er(s,C=>g(C)),k=D.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;D.useEffect(()=>{if(l){let C=function(T){if(k.paused||!d)return;const F=T.target;d.contains(F)?A.current=F:po(A.current,{select:!0})},w=function(T){if(k.paused||!d)return;const F=T.relatedTarget;F!==null&&(d.contains(F)||po(A.current,{select:!0}))},B=function(T){if(document.activeElement===document.body)for(const M of T)M.removedNodes.length>0&&po(d)};document.addEventListener("focusin",C),document.addEventListener("focusout",w);const S=new MutationObserver(B);return d&&S.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",C),document.removeEventListener("focusout",w),S.disconnect()}}},[l,d,k.paused]),D.useEffect(()=>{if(d){Em.add(k);const C=document.activeElement;if(!d.contains(C)){const B=new CustomEvent(n0,bm);d.addEventListener(n0,m),d.dispatchEvent(B),B.defaultPrevented||(uw(mw(Ux(d)),{select:!0}),document.activeElement===C&&po(d))}return()=>{d.removeEventListener(n0,m),setTimeout(()=>{const B=new CustomEvent(r0,bm);d.addEventListener(r0,x),d.dispatchEvent(B),B.defaultPrevented||po(C??document.body,{select:!0}),d.removeEventListener(r0,x),Em.remove(k)},0)}}},[d,m,x,k]);const R=D.useCallback(C=>{if(!i&&!l||k.paused)return;const w=C.key==="Tab"&&!C.altKey&&!C.ctrlKey&&!C.metaKey,B=document.activeElement;if(w&&B){const S=C.currentTarget,[T,F]=dw(S);T&&F?!C.shiftKey&&B===F?(C.preventDefault(),i&&po(T,{select:!0})):C.shiftKey&&B===T&&(C.preventDefault(),i&&po(F,{select:!0})):B===S&&C.preventDefault()}},[i,l,k.paused]);return b.jsx(gn.div,{tabIndex:-1,...p,ref:_,onKeyDown:R})});Vx.displayName=cw;function uw(n,{select:s=!1}={}){const i=document.activeElement;for(const l of n)if(po(l,{select:s}),document.activeElement!==i)return}function dw(n){const s=Ux(n),i=Cm(s,n),l=Cm(s.reverse(),n);return[i,l]}function Ux(n){const s=[],i=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:l=>{const c=l.tagName==="INPUT"&&l.type==="hidden";return l.disabled||l.hidden||c?NodeFilter.FILTER_SKIP:l.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)s.push(i.currentNode);return s}function Cm(n,s){for(const i of n)if(!fw(i,{upTo:s}))return i}function fw(n,{upTo:s}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(s!==void 0&&n===s)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function hw(n){return n instanceof HTMLInputElement&&"select"in n}function po(n,{select:s=!1}={}){if(n&&n.focus){const i=document.activeElement;n.focus({preventScroll:!0}),n!==i&&hw(n)&&s&&n.select()}}var Em=pw();function pw(){let n=[];return{add(s){const i=n[0];s!==i&&(i==null||i.pause()),n=km(n,s),n.unshift(s)},remove(s){var i;n=km(n,s),(i=n[0])==null||i.resume()}}}function km(n,s){const i=[...n],l=i.indexOf(s);return l!==-1&&i.splice(l,1),i}function mw(n){return n.filter(s=>s.tagName!=="A")}var gw="Portal",Zx=D.forwardRef((n,s)=>{var d;const{container:i,...l}=n,[c,u]=D.useState(!1);ia(()=>u(!0),[]);const p=i||c&&((d=globalThis==null?void 0:globalThis.document)==null?void 0:d.body);return p?yx.createPortal(b.jsx(gn.div,{...l,ref:s}),p):null});Zx.displayName=gw;function xw(n,s){return D.useReducer((i,l)=>s[i][l]??i,n)}var ua=n=>{const{present:s,children:i}=n,l=Aw(s),c=typeof i=="function"?i({present:l.isPresent}):D.Children.only(i),u=Er(l.ref,vw(c));return typeof i=="function"||l.isPresent?D.cloneElement(c,{ref:u}):null};ua.displayName="Presence";function Aw(n){const[s,i]=D.useState(),l=D.useRef(null),c=D.useRef(n),u=D.useRef("none"),p=n?"mounted":"unmounted",[d,g]=xw(p,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return D.useEffect(()=>{const m=Kc(l.current);u.current=d==="mounted"?m:"none"},[d]),ia(()=>{const m=l.current,x=c.current;if(x!==n){const _=u.current,k=Kc(m);n?g("MOUNT"):k==="none"||(m==null?void 0:m.display)==="none"?g("UNMOUNT"):g(x&&_!==k?"ANIMATION_OUT":"UNMOUNT"),c.current=n}},[n,g]),ia(()=>{if(s){let m;const x=s.ownerDocument.defaultView??window,A=k=>{const C=Kc(l.current).includes(CSS.escape(k.animationName));if(k.target===s&&C&&(g("ANIMATION_END"),!c.current)){const w=s.style.animationFillMode;s.style.animationFillMode="forwards",m=x.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=w)})}},_=k=>{k.target===s&&(u.current=Kc(l.current))};return s.addEventListener("animationstart",_),s.addEventListener("animationcancel",A),s.addEventListener("animationend",A),()=>{x.clearTimeout(m),s.removeEventListener("animationstart",_),s.removeEventListener("animationcancel",A),s.removeEventListener("animationend",A)}}else g("ANIMATION_END")},[s,g]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:D.useCallback(m=>{l.current=m?getComputedStyle(m):null,i(m)},[])}}function Kc(n){return(n==null?void 0:n.animationName)||"none"}function vw(n){var l,c;let s=(l=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:l.get,i=s&&"isReactWarning"in s&&s.isReactWarning;return i?n.ref:(s=(c=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:c.get,i=s&&"isReactWarning"in s&&s.isReactWarning,i?n.props.ref:n.props.ref||n.ref)}var i0=0;function yw(){D.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??Sm()),document.body.insertAdjacentElement("beforeend",n[1]??Sm()),i0++,()=>{i0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),i0--}},[])}function Sm(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var ii=function(){return ii=Object.assign||function(s){for(var i,l=1,c=arguments.length;l<c;l++){i=arguments[l];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(s[u]=i[u])}return s},ii.apply(this,arguments)};function Wx(n,s){var i={};for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&s.indexOf(l)<0&&(i[l]=n[l]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,l=Object.getOwnPropertySymbols(n);c<l.length;c++)s.indexOf(l[c])<0&&Object.prototype.propertyIsEnumerable.call(n,l[c])&&(i[l[c]]=n[l[c]]);return i}function _w(n,s,i){if(i||arguments.length===2)for(var l=0,c=s.length,u;l<c;l++)(u||!(l in s))&&(u||(u=Array.prototype.slice.call(s,0,l)),u[l]=s[l]);return n.concat(u||Array.prototype.slice.call(s))}var nu="right-scroll-bar-position",ru="width-before-scroll-bar",ww="with-scroll-bars-hidden",bw="--removed-body-scroll-bar-size";function o0(n,s){return typeof n=="function"?n(s):n&&(n.current=s),n}function Cw(n,s){var i=D.useState(function(){return{value:n,callback:s,facade:{get current(){return i.value},set current(l){var c=i.value;c!==l&&(i.value=l,i.callback(l,c))}}}})[0];return i.callback=s,i.facade}var Ew=typeof window<"u"?D.useLayoutEffect:D.useEffect,Bm=new WeakMap;function kw(n,s){var i=Cw(null,function(l){return n.forEach(function(c){return o0(c,l)})});return Ew(function(){var l=Bm.get(i);if(l){var c=new Set(l),u=new Set(n),p=i.current;c.forEach(function(d){u.has(d)||o0(d,null)}),u.forEach(function(d){c.has(d)||o0(d,p)})}Bm.set(i,n)},[n]),i}function Sw(n){return n}function Bw(n,s){s===void 0&&(s=Sw);var i=[],l=!1,c={read:function(){if(l)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return i.length?i[i.length-1]:n},useMedium:function(u){var p=s(u,l);return i.push(p),function(){i=i.filter(function(d){return d!==p})}},assignSyncMedium:function(u){for(l=!0;i.length;){var p=i;i=[],p.forEach(u)}i={push:function(d){return u(d)},filter:function(){return i}}},assignMedium:function(u){l=!0;var p=[];if(i.length){var d=i;i=[],d.forEach(u),p=i}var g=function(){var x=p;p=[],x.forEach(u)},m=function(){return Promise.resolve().then(g)};m(),i={push:function(x){p.push(x),m()},filter:function(x){return p=p.filter(x),i}}}};return c}function Pw(n){n===void 0&&(n={});var s=Bw(null);return s.options=ii({async:!0,ssr:!1},n),s}var qx=function(n){var s=n.sideCar,i=Wx(n,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var l=s.read();if(!l)throw new Error("Sidecar medium not found");return D.createElement(l,ii({},i))};qx.isSideCarExport=!0;function Tw(n,s){return n.useMedium(s),qx}var Gx=Pw(),s0=function(){},rd=D.forwardRef(function(n,s){var i=D.useRef(null),l=D.useState({onScrollCapture:s0,onWheelCapture:s0,onTouchMoveCapture:s0}),c=l[0],u=l[1],p=n.forwardProps,d=n.children,g=n.className,m=n.removeScrollBar,x=n.enabled,A=n.shards,_=n.sideCar,k=n.noRelative,R=n.noIsolation,C=n.inert,w=n.allowPinchZoom,B=n.as,S=B===void 0?"div":B,T=n.gapMode,F=Wx(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=_,z=kw([i,s]),H=ii(ii({},F),c);return D.createElement(D.Fragment,null,x&&D.createElement(M,{sideCar:Gx,removeScrollBar:m,shards:A,noRelative:k,noIsolation:R,inert:C,setCallbacks:u,allowPinchZoom:!!w,lockRef:i,gapMode:T}),p?D.cloneElement(D.Children.only(d),ii(ii({},H),{ref:z})):D.createElement(S,ii({},H,{className:g,ref:z}),d))});rd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};rd.classNames={fullWidth:ru,zeroRight:nu};var Dw=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Rw(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var s=Dw();return s&&n.setAttribute("nonce",s),n}function Nw(n,s){n.styleSheet?n.styleSheet.cssText=s:n.appendChild(document.createTextNode(s))}function Fw(n){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(n)}var Lw=function(){var n=0,s=null;return{add:function(i){n==0&&(s=Rw())&&(Nw(s,i),Fw(s)),n++},remove:function(){n--,!n&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},Mw=function(){var n=Lw();return function(s,i){D.useEffect(function(){return n.add(s),function(){n.remove()}},[s&&i])}},$x=function(){var n=Mw(),s=function(i){var l=i.styles,c=i.dynamic;return n(l,c),null};return s},Iw={left:0,top:0,right:0,gap:0},a0=function(n){return parseInt(n||"",10)||0},Ow=function(n){var s=window.getComputedStyle(document.body),i=s[n==="padding"?"paddingLeft":"marginLeft"],l=s[n==="padding"?"paddingTop":"marginTop"],c=s[n==="padding"?"paddingRight":"marginRight"];return[a0(i),a0(l),a0(c)]},jw=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return Iw;var s=Ow(n),i=document.documentElement.clientWidth,l=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,l-i+s[2]-s[0])}},zw=$x(),ea="data-scroll-locked",Hw=function(n,s,i,l){var c=n.left,u=n.top,p=n.right,d=n.gap;return i===void 0&&(i="margin"),`
  .`.concat(ww,` {
   overflow: hidden `).concat(l,`;
   padding-right: `).concat(d,"px ").concat(l,`;
  }
  body[`).concat(ea,`] {
    overflow: hidden `).concat(l,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(l,";"),i==="margin"&&`
    padding-left: `.concat(c,`px;
    padding-top: `).concat(u,`px;
    padding-right: `).concat(p,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(l,`;
    `),i==="padding"&&"padding-right: ".concat(d,"px ").concat(l,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(nu,` {
    right: `).concat(d,"px ").concat(l,`;
  }
  
  .`).concat(ru,` {
    margin-right: `).concat(d,"px ").concat(l,`;
  }
  
  .`).concat(nu," .").concat(nu,` {
    right: 0 `).concat(l,`;
  }
  
  .`).concat(ru," .").concat(ru,` {
    margin-right: 0 `).concat(l,`;
  }
  
  body[`).concat(ea,`] {
    `).concat(bw,": ").concat(d,`px;
  }
`)},Pm=function(){var n=parseInt(document.body.getAttribute(ea)||"0",10);return isFinite(n)?n:0},Vw=function(){D.useEffect(function(){return document.body.setAttribute(ea,(Pm()+1).toString()),function(){var n=Pm()-1;n<=0?document.body.removeAttribute(ea):document.body.setAttribute(ea,n.toString())}},[])},Uw=function(n){var s=n.noRelative,i=n.noImportant,l=n.gapMode,c=l===void 0?"margin":l;Vw();var u=D.useMemo(function(){return jw(c)},[c]);return D.createElement(zw,{styles:Hw(u,!s,c,i?"":"!important")})},w0=!1;if(typeof window<"u")try{var Qc=Object.defineProperty({},"passive",{get:function(){return w0=!0,!0}});window.addEventListener("test",Qc,Qc),window.removeEventListener("test",Qc,Qc)}catch{w0=!1}var Qs=w0?{passive:!1}:!1,Zw=function(n){return n.tagName==="TEXTAREA"},Kx=function(n,s){if(!(n instanceof Element))return!1;var i=window.getComputedStyle(n);return i[s]!=="hidden"&&!(i.overflowY===i.overflowX&&!Zw(n)&&i[s]==="visible")},Ww=function(n){return Kx(n,"overflowY")},qw=function(n){return Kx(n,"overflowX")},Tm=function(n,s){var i=s.ownerDocument,l=s;do{typeof ShadowRoot<"u"&&l instanceof ShadowRoot&&(l=l.host);var c=Qx(n,l);if(c){var u=Yx(n,l),p=u[1],d=u[2];if(p>d)return!0}l=l.parentNode}while(l&&l!==i.body);return!1},Gw=function(n){var s=n.scrollTop,i=n.scrollHeight,l=n.clientHeight;return[s,i,l]},$w=function(n){var s=n.scrollLeft,i=n.scrollWidth,l=n.clientWidth;return[s,i,l]},Qx=function(n,s){return n==="v"?Ww(s):qw(s)},Yx=function(n,s){return n==="v"?Gw(s):$w(s)},Kw=function(n,s){return n==="h"&&s==="rtl"?-1:1},Qw=function(n,s,i,l,c){var u=Kw(n,window.getComputedStyle(s).direction),p=u*l,d=i.target,g=s.contains(d),m=!1,x=p>0,A=0,_=0;do{if(!d)break;var k=Yx(n,d),R=k[0],C=k[1],w=k[2],B=C-w-u*R;(R||B)&&Qx(n,d)&&(A+=B,_+=R);var S=d.parentNode;d=S&&S.nodeType===Node.DOCUMENT_FRAGMENT_NODE?S.host:S}while(!g&&d!==document.body||g&&(s.contains(d)||s===d));return(x&&Math.abs(A)<1||!x&&Math.abs(_)<1)&&(m=!0),m},Yc=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},Dm=function(n){return[n.deltaX,n.deltaY]},Rm=function(n){return n&&"current"in n?n.current:n},Yw=function(n,s){return n[0]===s[0]&&n[1]===s[1]},Xw=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},Jw=0,Ys=[];function e2(n){var s=D.useRef([]),i=D.useRef([0,0]),l=D.useRef(),c=D.useState(Jw++)[0],u=D.useState($x)[0],p=D.useRef(n);D.useEffect(function(){p.current=n},[n]),D.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(c));var C=_w([n.lockRef.current],(n.shards||[]).map(Rm),!0).filter(Boolean);return C.forEach(function(w){return w.classList.add("allow-interactivity-".concat(c))}),function(){document.body.classList.remove("block-interactivity-".concat(c)),C.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(c))})}}},[n.inert,n.lockRef.current,n.shards]);var d=D.useCallback(function(C,w){if("touches"in C&&C.touches.length===2||C.type==="wheel"&&C.ctrlKey)return!p.current.allowPinchZoom;var B=Yc(C),S=i.current,T="deltaX"in C?C.deltaX:S[0]-B[0],F="deltaY"in C?C.deltaY:S[1]-B[1],M,z=C.target,H=Math.abs(T)>Math.abs(F)?"h":"v";if("touches"in C&&H==="h"&&z.type==="range")return!1;var j=window.getSelection(),X=j&&j.anchorNode,V=X?X===z||X.contains(z):!1;if(V)return!1;var $=Tm(H,z);if(!$)return!0;if($?M=H:(M=H==="v"?"h":"v",$=Tm(H,z)),!$)return!1;if(!l.current&&"changedTouches"in C&&(T||F)&&(l.current=M),!M)return!0;var ee=l.current||M;return Qw(ee,w,C,ee==="h"?T:F)},[]),g=D.useCallback(function(C){var w=C;if(!(!Ys.length||Ys[Ys.length-1]!==u)){var B="deltaY"in w?Dm(w):Yc(w),S=s.current.filter(function(M){return M.name===w.type&&(M.target===w.target||w.target===M.shadowParent)&&Yw(M.delta,B)})[0];if(S&&S.should){w.cancelable&&w.preventDefault();return}if(!S){var T=(p.current.shards||[]).map(Rm).filter(Boolean).filter(function(M){return M.contains(w.target)}),F=T.length>0?d(w,T[0]):!p.current.noIsolation;F&&w.cancelable&&w.preventDefault()}}},[]),m=D.useCallback(function(C,w,B,S){var T={name:C,delta:w,target:B,should:S,shadowParent:t2(B)};s.current.push(T),setTimeout(function(){s.current=s.current.filter(function(F){return F!==T})},1)},[]),x=D.useCallback(function(C){i.current=Yc(C),l.current=void 0},[]),A=D.useCallback(function(C){m(C.type,Dm(C),C.target,d(C,n.lockRef.current))},[]),_=D.useCallback(function(C){m(C.type,Yc(C),C.target,d(C,n.lockRef.current))},[]);D.useEffect(function(){return Ys.push(u),n.setCallbacks({onScrollCapture:A,onWheelCapture:A,onTouchMoveCapture:_}),document.addEventListener("wheel",g,Qs),document.addEventListener("touchmove",g,Qs),document.addEventListener("touchstart",x,Qs),function(){Ys=Ys.filter(function(C){return C!==u}),document.removeEventListener("wheel",g,Qs),document.removeEventListener("touchmove",g,Qs),document.removeEventListener("touchstart",x,Qs)}},[]);var k=n.removeScrollBar,R=n.inert;return D.createElement(D.Fragment,null,R?D.createElement(u,{styles:Xw(c)}):null,k?D.createElement(Uw,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function t2(n){for(var s=null;n!==null;)n instanceof ShadowRoot&&(s=n.host,n=n.host),n=n.parentNode;return s}const n2=Tw(Gx,e2);var Xx=D.forwardRef(function(n,s){return D.createElement(rd,ii({},n,{ref:s,sideCar:n2}))});Xx.classNames=rd.classNames;var r2=function(n){if(typeof document>"u")return null;var s=Array.isArray(n)?n[0]:n;return s.ownerDocument.body},Xs=new WeakMap,Xc=new WeakMap,Jc={},l0=0,Jx=function(n){return n&&(n.host||Jx(n.parentNode))},i2=function(n,s){return s.map(function(i){if(n.contains(i))return i;var l=Jx(i);return l&&n.contains(l)?l:(console.error("aria-hidden",i,"in not contained inside",n,". Doing nothing"),null)}).filter(function(i){return!!i})},o2=function(n,s,i,l){var c=i2(s,Array.isArray(n)?n:[n]);Jc[i]||(Jc[i]=new WeakMap);var u=Jc[i],p=[],d=new Set,g=new Set(c),m=function(A){!A||d.has(A)||(d.add(A),m(A.parentNode))};c.forEach(m);var x=function(A){!A||g.has(A)||Array.prototype.forEach.call(A.children,function(_){if(d.has(_))x(_);else try{var k=_.getAttribute(l),R=k!==null&&k!=="false",C=(Xs.get(_)||0)+1,w=(u.get(_)||0)+1;Xs.set(_,C),u.set(_,w),p.push(_),C===1&&R&&Xc.set(_,!0),w===1&&_.setAttribute(i,"true"),R||_.setAttribute(l,"true")}catch(B){console.error("aria-hidden: cannot operate on ",_,B)}})};return x(s),d.clear(),l0++,function(){p.forEach(function(A){var _=Xs.get(A)-1,k=u.get(A)-1;Xs.set(A,_),u.set(A,k),_||(Xc.has(A)||A.removeAttribute(l),Xc.delete(A)),k||A.removeAttribute(i)}),l0--,l0||(Xs=new WeakMap,Xs=new WeakMap,Xc=new WeakMap,Jc={})}},s2=function(n,s,i){i===void 0&&(i="data-aria-hidden");var l=Array.from(Array.isArray(n)?n:[n]),c=r2(n);return c?(l.push.apply(l,Array.from(c.querySelectorAll("[aria-live], script"))),o2(l,c,i,"aria-hidden")):function(){return null}};function a2(n){const s=l2(n),i=D.forwardRef((l,c)=>{const{children:u,...p}=l,d=D.Children.toArray(u),g=d.find(u2);if(g){const m=g.props.children,x=d.map(A=>A===g?D.Children.count(m)>1?D.Children.only(null):D.isValidElement(m)?m.props.children:null:A);return b.jsx(s,{...p,ref:c,children:D.isValidElement(m)?D.cloneElement(m,void 0,x):null})}return b.jsx(s,{...p,ref:c,children:u})});return i.displayName=`${n}.Slot`,i}function l2(n){const s=D.forwardRef((i,l)=>{const{children:c,...u}=i;if(D.isValidElement(c)){const p=f2(c),d=d2(u,c.props);return c.type!==D.Fragment&&(d.ref=l?El(l,p):p),D.cloneElement(c,d)}return D.Children.count(c)>1?D.Children.only(null):null});return s.displayName=`${n}.SlotClone`,s}var c2=Symbol("radix.slottable");function u2(n){return D.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===c2}function d2(n,s){const i={...s};for(const l in s){const c=n[l],u=s[l];/^on[A-Z]/.test(l)?c&&u?i[l]=(...d)=>{const g=u(...d);return c(...d),g}:c&&(i[l]=c):l==="style"?i[l]={...c,...u}:l==="className"&&(i[l]=[c,u].filter(Boolean).join(" "))}return{...n,...i}}function f2(n){var l,c;let s=(l=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:l.get,i=s&&"isReactWarning"in s&&s.isReactWarning;return i?n.ref:(s=(c=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:c.get,i=s&&"isReactWarning"in s&&s.isReactWarning,i?n.props.ref:n.props.ref||n.ref)}var id="Dialog",[eA]=kl(id),[h2,Hr]=eA(id),tA=n=>{const{__scopeDialog:s,children:i,open:l,defaultOpen:c,onOpenChange:u,modal:p=!0}=n,d=D.useRef(null),g=D.useRef(null),[m,x]=nd({prop:l,defaultProp:c??!1,onChange:u,caller:id});return b.jsx(h2,{scope:s,triggerRef:d,contentRef:g,contentId:yl(),titleId:yl(),descriptionId:yl(),open:m,onOpenChange:x,onOpenToggle:D.useCallback(()=>x(A=>!A),[x]),modal:p,children:i})};tA.displayName=id;var nA="DialogTrigger",p2=D.forwardRef((n,s)=>{const{__scopeDialog:i,...l}=n,c=Hr(nA,i),u=Er(s,c.triggerRef);return b.jsx(gn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":c.open,"aria-controls":c.contentId,"data-state":q0(c.open),...l,ref:u,onClick:fn(n.onClick,c.onOpenToggle)})});p2.displayName=nA;var Z0="DialogPortal",[m2,rA]=eA(Z0,{forceMount:void 0}),iA=n=>{const{__scopeDialog:s,forceMount:i,children:l,container:c}=n,u=Hr(Z0,s);return b.jsx(m2,{scope:s,forceMount:i,children:D.Children.map(l,p=>b.jsx(ua,{present:i||u.open,children:b.jsx(Zx,{asChild:!0,container:c,children:p})}))})};iA.displayName=Z0;var $u="DialogOverlay",oA=D.forwardRef((n,s)=>{const i=rA($u,n.__scopeDialog),{forceMount:l=i.forceMount,...c}=n,u=Hr($u,n.__scopeDialog);return u.modal?b.jsx(ua,{present:l||u.open,children:b.jsx(x2,{...c,ref:s})}):null});oA.displayName=$u;var g2=a2("DialogOverlay.RemoveScroll"),x2=D.forwardRef((n,s)=>{const{__scopeDialog:i,...l}=n,c=Hr($u,i);return b.jsx(Xx,{as:g2,allowPinchZoom:!0,shards:[c.contentRef],children:b.jsx(gn.div,{"data-state":q0(c.open),...l,ref:s,style:{pointerEvents:"auto",...l.style}})})}),rs="DialogContent",sA=D.forwardRef((n,s)=>{const i=rA(rs,n.__scopeDialog),{forceMount:l=i.forceMount,...c}=n,u=Hr(rs,n.__scopeDialog);return b.jsx(ua,{present:l||u.open,children:u.modal?b.jsx(A2,{...c,ref:s}):b.jsx(v2,{...c,ref:s})})});sA.displayName=rs;var A2=D.forwardRef((n,s)=>{const i=Hr(rs,n.__scopeDialog),l=D.useRef(null),c=Er(s,i.contentRef,l);return D.useEffect(()=>{const u=l.current;if(u)return s2(u)},[]),b.jsx(aA,{...n,ref:c,trapFocus:i.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:fn(n.onCloseAutoFocus,u=>{var p;u.preventDefault(),(p=i.triggerRef.current)==null||p.focus()}),onPointerDownOutside:fn(n.onPointerDownOutside,u=>{const p=u.detail.originalEvent,d=p.button===0&&p.ctrlKey===!0;(p.button===2||d)&&u.preventDefault()}),onFocusOutside:fn(n.onFocusOutside,u=>u.preventDefault())})}),v2=D.forwardRef((n,s)=>{const i=Hr(rs,n.__scopeDialog),l=D.useRef(!1),c=D.useRef(!1);return b.jsx(aA,{...n,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:u=>{var p,d;(p=n.onCloseAutoFocus)==null||p.call(n,u),u.defaultPrevented||(l.current||(d=i.triggerRef.current)==null||d.focus(),u.preventDefault()),l.current=!1,c.current=!1},onInteractOutside:u=>{var g,m;(g=n.onInteractOutside)==null||g.call(n,u),u.defaultPrevented||(l.current=!0,u.detail.originalEvent.type==="pointerdown"&&(c.current=!0));const p=u.target;((m=i.triggerRef.current)==null?void 0:m.contains(p))&&u.preventDefault(),u.detail.originalEvent.type==="focusin"&&c.current&&u.preventDefault()}})}),aA=D.forwardRef((n,s)=>{const{__scopeDialog:i,trapFocus:l,onOpenAutoFocus:c,onCloseAutoFocus:u,...p}=n,d=Hr(rs,i),g=D.useRef(null),m=Er(s,g);return yw(),b.jsxs(b.Fragment,{children:[b.jsx(Vx,{asChild:!0,loop:!0,trapped:l,onMountAutoFocus:c,onUnmountAutoFocus:u,children:b.jsx(zx,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":q0(d.open),...p,ref:m,onDismiss:()=>d.onOpenChange(!1)})}),b.jsxs(b.Fragment,{children:[b.jsx(y2,{titleId:d.titleId}),b.jsx(w2,{contentRef:g,descriptionId:d.descriptionId})]})]})}),W0="DialogTitle",lA=D.forwardRef((n,s)=>{const{__scopeDialog:i,...l}=n,c=Hr(W0,i);return b.jsx(gn.h2,{id:c.titleId,...l,ref:s})});lA.displayName=W0;var cA="DialogDescription",uA=D.forwardRef((n,s)=>{const{__scopeDialog:i,...l}=n,c=Hr(cA,i);return b.jsx(gn.p,{id:c.descriptionId,...l,ref:s})});uA.displayName=cA;var dA="DialogClose",fA=D.forwardRef((n,s)=>{const{__scopeDialog:i,...l}=n,c=Hr(dA,i);return b.jsx(gn.button,{type:"button",...l,ref:s,onClick:fn(n.onClick,()=>c.onOpenChange(!1))})});fA.displayName=dA;function q0(n){return n?"open":"closed"}var hA="DialogTitleWarning",[aS,pA]=z1(hA,{contentName:rs,titleName:W0,docsSlug:"dialog"}),y2=({titleId:n})=>{const s=pA(hA),i=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return D.useEffect(()=>{n&&(document.getElementById(n)||console.error(i))},[i,n]),null},_2="DialogDescriptionWarning",w2=({contentRef:n,descriptionId:s})=>{const l=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${pA(_2).contentName}}.`;return D.useEffect(()=>{var u;const c=(u=n.current)==null?void 0:u.getAttribute("aria-describedby");s&&c&&(document.getElementById(s)||console.warn(l))},[l,n,s]),null},mA=tA,gA=iA,od=oA,sd=sA,ad=lA,ld=uA,xA=fA;const G0=mA,b2=gA,AA=D.forwardRef(({className:n,...s},i)=>b.jsx(od,{ref:i,className:pt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...s}));AA.displayName=od.displayName;const cd=D.forwardRef(({className:n,children:s,...i},l)=>b.jsxs(b2,{children:[b.jsx(AA,{}),b.jsxs(sd,{ref:l,className:pt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...i,children:[s,b.jsxs(xA,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[b.jsx(wx,{className:"h-4 w-4"}),b.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));cd.displayName=sd.displayName;const ud=({className:n,...s})=>b.jsx("div",{className:pt("flex flex-col space-y-1.5 text-center sm:text-left",n),...s});ud.displayName="DialogHeader";const $0=({className:n,...s})=>b.jsx("div",{className:pt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...s});$0.displayName="DialogFooter";const dd=D.forwardRef(({className:n,...s},i)=>b.jsx(ad,{ref:i,className:pt("text-lg font-semibold leading-none tracking-tight",n),...s}));dd.displayName=ad.displayName;const fd=D.forwardRef(({className:n,...s},i)=>b.jsx(ld,{ref:i,className:pt("text-sm text-muted-foreground",n),...s}));fd.displayName=ld.displayName;function C2(){const n=window.location.hash.slice(1);if(!n)return null;if(n==="raw")return{type:"raw",name:"raw"};if(n==="map")return{type:"map",name:"map"};if(n==="visualizer")return{type:"visualizer",name:"visualizer"};if(n.startsWith("map/focus/")){const c=n.slice(10);return c?{type:"map",name:"map",mapFocusKey:decodeURIComponent(c)}:{type:"map",name:"map"}}const s=n.indexOf("/");if(s===-1)return null;const i=n.slice(0,s),l=decodeURIComponent(n.slice(s+1));return(i==="channel"||i==="contact")&&l?{type:i,name:l}:null}function vA(n){return`#map/focus/${encodeURIComponent(n)}`}function E2(n){if(!n)return"";if(n.type==="raw")return"#raw";if(n.type==="map")return"#map";if(n.type==="visualizer")return"#visualizer";const s=n.type==="channel"&&n.name.startsWith("#")?n.name.slice(1):n.name;return`#${n.type}/${encodeURIComponent(s)}`}function k2(n){const s=E2(n);s!==window.location.hash&&window.history.replaceState(null,"",s||window.location.pathname)}function S2({open:n,onClose:s,paths:i,senderInfo:l,contacts:c,config:u}){const p=i.map(g=>({...g,resolved:O1(g.path,l,c,u)})),d=i.length===1;return b.jsx(G0,{open:n,onOpenChange:g=>!g&&s(),children:b.jsxs(cd,{className:"max-w-md max-h-[80vh] flex flex-col",children:[b.jsxs(ud,{children:[b.jsxs(dd,{children:["Message Path",!d&&`s (${i.length})`]}),b.jsx(fd,{children:d?b.jsxs(b.Fragment,{children:["This shows ",b.jsx("em",{children:"one route"})," that this message traveled through the mesh network. Routers may be incorrectly identified due to prefix collisions between heard and non-heard router advertisements."]}):b.jsxs(b.Fragment,{children:["This message was received via ",b.jsxs("strong",{children:[i.length," different routes"]}),". Routers may be incorrectly identified due to prefix collisions."]})})]}),b.jsxs("div",{className:"flex-1 overflow-y-auto py-2 space-y-4",children:[p.map((g,m)=>b.jsxs("div",{children:[!d&&b.jsxs("div",{className:"text-xs text-muted-foreground font-medium mb-2 pb-1 border-b border-border",children:["Path ",m+1,"  received ",ra(g.received_at)]}),b.jsx(B2,{resolved:g.resolved,senderInfo:l,hideStraightLine:!d})]},m)),!d&&p.length>0&&(()=>{const g=p[0].resolved;return Rt(g.sender.lat,g.sender.lon)&&Rt(g.receiver.lat,g.receiver.lon)?b.jsxs("div",{className:"pt-3 mt-1 border-t border-border",children:[b.jsx("span",{className:"text-sm text-muted-foreground",children:"Straight-line distance: "}),b.jsx("span",{className:"text-sm font-medium",children:ns(jr(g.sender.lat,g.sender.lon,g.receiver.lat,g.receiver.lon))})]}):null})()]}),b.jsx($0,{children:b.jsx(wn,{onClick:s,children:"Close"})})]})})}function B2({resolved:n,senderInfo:s,hideStraightLine:i}){const l=c=>{if(c===0)return Rt(n.sender.lat,n.sender.lon)?{lat:n.sender.lat,lon:n.sender.lon}:null;const u=n.hops[c-1];return u.matches.length>1||u.matches.length===0?null:Rt(u.matches[0].lat,u.matches[0].lon)?{lat:u.matches[0].lat,lon:u.matches[0].lon}:null};return b.jsxs("div",{className:"space-y-0",children:[b.jsx(Nm,{label:"Sender",name:n.sender.name,prefix:n.sender.prefix,distance:null,isFirst:!0,lat:n.sender.lat,lon:n.sender.lon,publicKey:s.publicKeyOrPrefix}),n.hops.map((c,u)=>b.jsx(P2,{hop:c,hopNumber:u+1,prevLocation:l(u)},u)),b.jsx(Nm,{label:"Receiver (me)",name:n.receiver.name,prefix:n.receiver.prefix,distance:T2(n),isLast:!0,lat:n.receiver.lat,lon:n.receiver.lon,publicKey:n.receiver.publicKey??void 0}),n.totalDistances&&n.totalDistances.length>0&&b.jsxs("div",{className:"pt-3 mt-3 border-t border-border",children:[b.jsxs("span",{className:"text-sm text-muted-foreground",children:["Presumed unambiguous distance covered:"," "]}),b.jsxs("span",{className:"text-sm font-medium",children:[n.hasGaps?">":"",ns(n.totalDistances[0])]})]}),!i&&Rt(n.sender.lat,n.sender.lon)&&Rt(n.receiver.lat,n.receiver.lon)&&b.jsxs("div",{className:n.totalDistances&&n.totalDistances.length>0?"pt-1":"pt-3 mt-3 border-t border-border",children:[b.jsx("span",{className:"text-sm text-muted-foreground",children:"Straight-line distance: "}),b.jsx("span",{className:"text-sm font-medium",children:ns(jr(n.sender.lat,n.sender.lon,n.receiver.lat,n.receiver.lon))})]})]})}function Nm({label:n,name:s,prefix:i,distance:l,isFirst:c,isLast:u,lat:p,lon:d,publicKey:g}){const m=Rt(p??null,d??null)&&g;return b.jsxs("div",{className:"flex gap-3",children:[b.jsxs("div",{className:"flex flex-col items-center w-4 flex-shrink-0",children:[!c&&b.jsx("div",{className:"w-0.5 h-3 bg-border"}),b.jsx("div",{className:"w-3 h-3 rounded-full bg-primary flex-shrink-0"}),!u&&b.jsx("div",{className:"w-0.5 flex-1 bg-border"})]}),b.jsxs("div",{className:"pb-3 flex-1 min-w-0",children:[b.jsx("div",{className:"text-xs text-muted-foreground font-medium",children:n}),b.jsxs("div",{className:"font-medium truncate",children:[s," ",b.jsxs("span",{className:"text-muted-foreground font-mono text-sm",children:["(",i,")"]}),l!==null&&b.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["- ",ns(l)]}),m&&b.jsx(b0,{lat:p,lon:d,publicKey:g})]})]})]})}function P2({hop:n,hopNumber:s,prevLocation:i}){const l=n.matches.length>1,c=n.matches.length===0,u=p=>!i||i.lat===null||i.lon===null||!Rt(p.lat,p.lon)?null:jr(i.lat,i.lon,p.lat,p.lon);return b.jsxs("div",{className:"flex gap-3",children:[b.jsxs("div",{className:"flex flex-col items-center w-4 flex-shrink-0",children:[b.jsx("div",{className:"w-0.5 h-3 bg-border"}),b.jsx("div",{className:"w-3 h-3 rounded-full bg-muted-foreground flex-shrink-0"}),b.jsx("div",{className:"w-0.5 flex-1 bg-border"})]}),b.jsxs("div",{className:"pb-3 flex-1 min-w-0",children:[b.jsxs("div",{className:"text-xs text-muted-foreground font-medium",children:["Hop ",s,l&&b.jsx("span",{className:"text-yellow-500 ml-1",children:"(ambiguous)"})]}),c?b.jsxs("div",{className:"font-medium text-muted-foreground/70",children:["<UNKNOWN ",b.jsx("span",{className:"font-mono text-sm",children:n.prefix}),">"]}):l?b.jsx("div",{children:n.matches.map(p=>{const d=u(p),g=Rt(p.lat,p.lon);return b.jsxs("div",{className:"font-medium truncate",children:[p.name||p.public_key.slice(0,12)," ",b.jsxs("span",{className:"text-muted-foreground font-mono text-sm",children:["(",p.public_key.slice(0,2).toUpperCase(),")"]}),d!==null&&b.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["- ",ns(d)]}),g&&b.jsx(b0,{lat:p.lat,lon:p.lon,publicKey:p.public_key})]},p.public_key)})}):b.jsxs("div",{className:"font-medium truncate",children:[n.matches[0].name||n.matches[0].public_key.slice(0,12)," ",b.jsxs("span",{className:"text-muted-foreground font-mono text-sm",children:["(",n.prefix,")"]}),n.distanceFromPrev!==null&&b.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["- ",ns(n.distanceFromPrev)]}),Rt(n.matches[0].lat,n.matches[0].lon)&&b.jsx(b0,{lat:n.matches[0].lat,lon:n.matches[0].lon,publicKey:n.matches[0].public_key})]})]})]})}function b0({lat:n,lon:s,publicKey:i}){const l=c=>{c.preventDefault(),c.stopPropagation();const u=window.location.origin+window.location.pathname+vA(i);window.open(u,"_blank")};return b.jsxs("span",{className:"text-xs text-muted-foreground/70 font-mono cursor-pointer hover:text-primary hover:underline ml-1",onClick:l,title:"View on map",children:["(",n.toFixed(4),", ",s.toFixed(4),")"]})}function T2(n){let s=null,i=null;if(n.hops.length>0){const l=n.hops[n.hops.length-1];l.matches.length===1&&Rt(l.matches[0].lat,l.matches[0].lon)&&(s=l.matches[0].lat,i=l.matches[0].lon)}else Rt(n.sender.lat,n.sender.lon)&&(s=n.sender.lat,i=n.sender.lon);return s===null||i===null||!Rt(n.receiver.lat,n.receiver.lon)?null:jr(s,i,n.receiver.lat,n.receiver.lon)}function D2(n,s){if(!s)return n;const i=/@\[([^\]]+)\]/g,l=[];let c=0,u,p=0;for(;(u=i.exec(n))!==null;){u.index>c&&l.push(n.slice(c,u.index));const d=u[1],g=d===s;l.push(b.jsxs("span",{className:pt("rounded px-0.5",g?"bg-primary/30 text-primary font-medium":"bg-muted-foreground/20"),children:["@[",d,"]"]},p++)),c=u.index+u[0].length}return c<n.length&&l.push(n.slice(c)),l.length>0?l:n}function Fm({paths:n,onClick:s,variant:i}){const c=`(${I1(n).display})`,u=i==="header"?"font-normal text-muted-foreground/70 ml-1 text-[11px] cursor-pointer hover:text-primary hover:underline":"text-[10px] text-muted-foreground/50 ml-1 cursor-pointer hover:text-primary hover:underline";return b.jsx("span",{className:u,onClick:p=>{p.stopPropagation(),s()},title:"View message path",children:c})}function R2({messages:n,contacts:s,loading:i,loadingOlder:l=!1,hasOlderMessages:c=!1,onSenderClick:u,onLoadOlder:p,radioName:d,config:g}){const m=D.useRef(null),x=D.useRef(0),A=D.useRef(!0),[_,k]=D.useState(!1),[R,C]=D.useState(null),w=D.useRef({scrollTop:0,scrollHeight:0,clientHeight:0,wasNearTop:!1,wasNearBottom:!0});D.useLayoutEffect(()=>{if(!m.current)return;const j=m.current,X=n.length-x.current;if(A.current&&n.length>0)j.scrollTop=j.scrollHeight,A.current=!1;else if(X>0&&x.current>0){const V=j.scrollHeight-w.current.scrollHeight;w.current.wasNearTop&&V>0?j.scrollTop=w.current.scrollTop+V:w.current.wasNearBottom&&(j.scrollTop=j.scrollHeight)}x.current=n.length},[n]),D.useEffect(()=>{n.length===0&&(A.current=!0,x.current=0,w.current={scrollTop:0,scrollHeight:0,clientHeight:0,wasNearTop:!1,wasNearBottom:!0})},[n.length]);const B=D.useCallback(()=>{if(!m.current)return;const{scrollTop:j,scrollHeight:X,clientHeight:V}=m.current,$=X-j-V;w.current={scrollTop:j,scrollHeight:X,clientHeight:V,wasNearTop:j<150,wasNearBottom:$<100},k($>100),!(!p||l||!c)&&j<100&&p()},[p,l,c]),S=D.useCallback(()=>{m.current&&(m.current.scrollTop=m.current.scrollHeight)},[]),T=j=>j&&s.find(X=>X.public_key===j)||null,F=j=>s.find(X=>X.name===j)||null,M=(j,X,V)=>{if(j.type==="PRIV"&&X)return{name:X.name||X.public_key.slice(0,12),publicKeyOrPrefix:X.public_key,lat:X.lat,lon:X.lon};if(V){const $=F(V);if($)return{name:V,publicKeyOrPrefix:$.public_key,lat:$.lat,lon:$.lon}}return{name:V||"Unknown",publicKeyOrPrefix:j.conversation_key||"",lat:null,lon:null}};if(i)return b.jsx("div",{className:"flex-1 overflow-y-auto p-5 text-center text-muted-foreground",children:"Loading messages..."});if(n.length===0)return b.jsx("div",{className:"flex-1 overflow-y-auto p-5 text-center text-muted-foreground",children:"No messages yet"});const z=[...n].sort((j,X)=>j.received_at-X.received_at),H=(j,X)=>j.outgoing?"__outgoing__":j.type==="PRIV"&&j.conversation_key?j.conversation_key:X||"__unknown__";return b.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[b.jsxs("div",{className:"h-full overflow-y-auto p-4 flex flex-col gap-0.5",ref:m,onScroll:B,children:[l&&b.jsx("div",{className:"text-center py-2 text-muted-foreground text-sm",children:"Loading older messages..."}),!l&&c&&b.jsx("div",{className:"text-center py-2 text-muted-foreground text-xs",children:"Scroll up for older messages"}),z.map((j,X)=>{var K;const V=j.type==="PRIV"?T(j.conversation_key):null,$=(V==null?void 0:V.type)===td,{sender:ee,content:W}=$?{sender:null,content:j.text}:ym(j.text),re=j.outgoing?"You":(V==null?void 0:V.name)||ee||((K=j.conversation_key)==null?void 0:K.slice(0,8))||"Unknown",pe=!j.outgoing&&u&&re!=="Unknown",ie=H(j,ee),Ae=z[X-1],G=Ae?H(Ae,ym(Ae.text).sender):null,xe=!j.outgoing&&ie!==G,Z=X===0;let N=null,U="";if(!j.outgoing){if(j.type==="PRIV"&&j.conversation_key)N=(V==null?void 0:V.name)||null,U=j.conversation_key;else if(ee){const Y=F(ee);N=ee,U=(Y==null?void 0:Y.public_key)||`name:${ee}`}}return b.jsxs("div",{className:pt("flex items-start max-w-[85%]",j.outgoing&&"flex-row-reverse self-end",xe&&!Z&&"mt-3"),children:[!j.outgoing&&b.jsx("div",{className:"w-10 flex-shrink-0 flex items-start pt-0.5",children:xe&&U&&b.jsx(v0,{name:N,publicKey:U,size:32})}),b.jsxs("div",{className:pt("py-1.5 px-3 rounded-lg min-w-0",j.outgoing?"bg-[#1e3a29]":"bg-muted"),children:[xe&&b.jsxs("div",{className:"text-[13px] font-semibold text-muted-foreground mb-0.5",children:[pe?b.jsx("span",{className:"cursor-pointer hover:text-primary hover:underline",onClick:()=>u(re),title:`Mention ${re}`,children:re}):re,b.jsx("span",{className:"font-normal text-muted-foreground/70 ml-2 text-[11px]",children:ra(j.sender_timestamp||j.received_at)}),!j.outgoing&&j.paths&&j.paths.length>0&&b.jsx(Fm,{paths:j.paths,variant:"header",onClick:()=>C({paths:j.paths,senderInfo:M(j,V,ee)})})]}),b.jsxs("div",{className:"break-words whitespace-pre-wrap",children:[W.split(`
`).map((Y,fe,me)=>b.jsxs("span",{children:[D2(Y,d),fe<me.length-1&&b.jsx("br",{})]},fe)),!xe&&b.jsxs(b.Fragment,{children:[b.jsx("span",{className:"text-[10px] text-muted-foreground/50 ml-2",children:ra(j.sender_timestamp||j.received_at)}),!j.outgoing&&j.paths&&j.paths.length>0&&b.jsx(Fm,{paths:j.paths,variant:"inline",onClick:()=>C({paths:j.paths,senderInfo:M(j,V,ee)})})]}),j.outgoing&&(j.acked>0?` ${j.acked>1?j.acked:""}`:" ?")]})]})]},j.id)})]}),_&&b.jsx("button",{onClick:S,className:"absolute bottom-4 right-4 w-10 h-10 rounded-full bg-muted hover:bg-accent border border-border flex items-center justify-center shadow-lg transition-opacity",title:"Scroll to bottom",children:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-muted-foreground",children:b.jsx("polyline",{points:"6 9 12 15 18 9"})})}),R&&b.jsx(S2,{open:!0,onClose:()=>C(null),paths:R.paths,senderInfo:R.senderInfo,contacts:s,config:g??null})]})}const Lm=156,N2=140,F2=156,L2=120,M2=8,I2=D.forwardRef(function({onSend:s,disabled:i,placeholder:l,isRepeaterMode:c,conversationType:u,senderName:p},d){const[g,m]=D.useState(""),[x,A]=D.useState(!1),_=D.useRef(null);D.useImperativeHandle(d,()=>({appendText:M=>{var z;m(H=>H+M),(z=_.current)==null||z.focus()}}));const k=D.useMemo(()=>{if(u==="contact")return{warningAt:N2,dangerAt:Lm,hardLimit:Lm};if(u==="channel"){const M=(p==null?void 0:p.length)??10,z=Math.max(1,F2-M-2);return{warningAt:L2,dangerAt:Math.max(1,z-M2),hardLimit:z}}return null},[u,p]),{limitState:R,warningMessage:C}=D.useMemo(()=>{if(!k)return{limitState:"normal",warningMessage:null};const M=g.length;return M>=k.hardLimit?{limitState:"error",warningMessage:"likely truncated by radio"}:M>=k.dangerAt?{limitState:"danger",warningMessage:"may impact multi-repeater hop delivery"}:M>=k.warningAt?{limitState:"warning",warningMessage:"may impact multi-repeater hop delivery"}:{limitState:"normal",warningMessage:null}},[g.length,k]),w=k?k.hardLimit-g.length:0,B=D.useCallback(async M=>{M.preventDefault();const z=g.trim();if(c){if(x||i)return;A(!0);try{await s(z),m("")}catch(H){console.error("Failed to request telemetry:",H),bt.error("Failed to request telemetry",{description:H instanceof Error?H.message:"Check radio connection"});return}finally{A(!1)}setTimeout(()=>{var H;return(H=_.current)==null?void 0:H.focus()},0)}else{if(!z||x||i)return;A(!0);try{await s(z),m("")}catch(H){console.error("Failed to send message:",H),bt.error("Failed to send message",{description:H instanceof Error?H.message:"Check radio connection"});return}finally{A(!1)}setTimeout(()=>{var H;return(H=_.current)==null?void 0:H.focus()},0)}},[g,x,i,s,c]),S=D.useCallback(M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),B(M))},[B]),T=c?!0:g.trim().length>0,F=!c&&k!==null;return b.jsxs("form",{className:"px-4 py-3 border-t border-border flex flex-col gap-1",onSubmit:B,children:[b.jsxs("div",{className:"flex gap-2",children:[b.jsx(rn,{ref:_,type:c?"password":"text",autoComplete:c?"off":void 0,value:g,onChange:M=>m(M.target.value),onKeyDown:S,placeholder:l||(c?"Enter password for admin login...":"Type a message..."),disabled:i||x,className:"flex-1 min-w-0"}),b.jsx(wn,{type:"submit",disabled:i||x||!T,className:"flex-shrink-0",children:x?c?"Logging in...":"Sending...":c?g.trim()?"Log in with password":"Log in as guest/use repeater ACLs":"Send"})]}),F&&b.jsxs("div",{className:"flex items-center justify-end gap-2 text-xs",children:[b.jsxs("span",{className:pt("tabular-nums",R==="error"||R==="danger"?"text-red-500 font-medium":R==="warning"?"text-yellow-500":"text-muted-foreground"),children:[g.length,"/",k.hardLimit,w<0&&` (${w})`]}),C&&b.jsxs("span",{className:pt(R==="error"?"text-red-500":"text-yellow-500"),children:[" ",C]})]})]})});function Mm(n){const s=O2(n),i=D.forwardRef((l,c)=>{const{children:u,...p}=l,d=D.Children.toArray(u),g=d.find(z2);if(g){const m=g.props.children,x=d.map(A=>A===g?D.Children.count(m)>1?D.Children.only(null):D.isValidElement(m)?m.props.children:null:A);return b.jsx(s,{...p,ref:c,children:D.isValidElement(m)?D.cloneElement(m,void 0,x):null})}return b.jsx(s,{...p,ref:c,children:u})});return i.displayName=`${n}.Slot`,i}function O2(n){const s=D.forwardRef((i,l)=>{const{children:c,...u}=i;if(D.isValidElement(c)){const p=V2(c),d=H2(u,c.props);return c.type!==D.Fragment&&(d.ref=l?El(l,p):p),D.cloneElement(c,d)}return D.Children.count(c)>1?D.Children.only(null):null});return s.displayName=`${n}.SlotClone`,s}var j2=Symbol("radix.slottable");function z2(n){return D.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===j2}function H2(n,s){const i={...s};for(const l in s){const c=n[l],u=s[l];/^on[A-Z]/.test(l)?c&&u?i[l]=(...d)=>{const g=u(...d);return c(...d),g}:c&&(i[l]=c):l==="style"?i[l]={...c,...u}:l==="className"&&(i[l]=[c,u].filter(Boolean).join(" "))}return{...n,...i}}function V2(n){var l,c;let s=(l=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:l.get,i=s&&"isReactWarning"in s&&s.isReactWarning;return i?n.ref:(s=(c=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:c.get,i=s&&"isReactWarning"in s&&s.isReactWarning,i?n.props.ref:n.props.ref||n.ref)}function U2(n){const s=n+"CollectionProvider",[i,l]=kl(s),[c,u]=i(s,{collectionRef:{current:null},itemMap:new Map}),p=C=>{const{scope:w,children:B}=C,S=Te.useRef(null),T=Te.useRef(new Map).current;return b.jsx(c,{scope:w,itemMap:T,collectionRef:S,children:B})};p.displayName=s;const d=n+"CollectionSlot",g=Mm(d),m=Te.forwardRef((C,w)=>{const{scope:B,children:S}=C,T=u(d,B),F=Er(w,T.collectionRef);return b.jsx(g,{ref:F,children:S})});m.displayName=d;const x=n+"CollectionItemSlot",A="data-radix-collection-item",_=Mm(x),k=Te.forwardRef((C,w)=>{const{scope:B,children:S,...T}=C,F=Te.useRef(null),M=Er(w,F),z=u(x,B);return Te.useEffect(()=>(z.itemMap.set(F,{ref:F,...T}),()=>void z.itemMap.delete(F))),b.jsx(_,{[A]:"",ref:M,children:S})});k.displayName=x;function R(C){const w=u(n+"CollectionConsumer",C);return Te.useCallback(()=>{const S=w.collectionRef.current;if(!S)return[];const T=Array.from(S.querySelectorAll(`[${A}]`));return Array.from(w.itemMap.values()).sort((z,H)=>T.indexOf(z.ref.current)-T.indexOf(H.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:p,Slot:m,ItemSlot:k},R,l]}var Z2=D.createContext(void 0);function yA(n){const s=D.useContext(Z2);return n||s||"ltr"}var c0="rovingFocusGroup.onEntryFocus",W2={bubbles:!1,cancelable:!0},Sl="RovingFocusGroup",[C0,_A,q2]=U2(Sl),[G2,wA]=kl(Sl,[q2]),[$2,K2]=G2(Sl),bA=D.forwardRef((n,s)=>b.jsx(C0.Provider,{scope:n.__scopeRovingFocusGroup,children:b.jsx(C0.Slot,{scope:n.__scopeRovingFocusGroup,children:b.jsx(Q2,{...n,ref:s})})}));bA.displayName=Sl;var Q2=D.forwardRef((n,s)=>{const{__scopeRovingFocusGroup:i,orientation:l,loop:c=!1,dir:u,currentTabStopId:p,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:g,onEntryFocus:m,preventScrollOnEntryFocus:x=!1,...A}=n,_=D.useRef(null),k=Er(s,_),R=yA(u),[C,w]=nd({prop:p,defaultProp:d??null,onChange:g,caller:Sl}),[B,S]=D.useState(!1),T=oa(m),F=_A(i),M=D.useRef(!1),[z,H]=D.useState(0);return D.useEffect(()=>{const j=_.current;if(j)return j.addEventListener(c0,T),()=>j.removeEventListener(c0,T)},[T]),b.jsx($2,{scope:i,orientation:l,dir:R,loop:c,currentTabStopId:C,onItemFocus:D.useCallback(j=>w(j),[w]),onItemShiftTab:D.useCallback(()=>S(!0),[]),onFocusableItemAdd:D.useCallback(()=>H(j=>j+1),[]),onFocusableItemRemove:D.useCallback(()=>H(j=>j-1),[]),children:b.jsx(gn.div,{tabIndex:B||z===0?-1:0,"data-orientation":l,...A,ref:k,style:{outline:"none",...n.style},onMouseDown:fn(n.onMouseDown,()=>{M.current=!0}),onFocus:fn(n.onFocus,j=>{const X=!M.current;if(j.target===j.currentTarget&&X&&!B){const V=new CustomEvent(c0,W2);if(j.currentTarget.dispatchEvent(V),!V.defaultPrevented){const $=F().filter(ie=>ie.focusable),ee=$.find(ie=>ie.active),W=$.find(ie=>ie.id===C),pe=[ee,W,...$].filter(Boolean).map(ie=>ie.ref.current);kA(pe,x)}}M.current=!1}),onBlur:fn(n.onBlur,()=>S(!1))})})}),CA="RovingFocusGroupItem",EA=D.forwardRef((n,s)=>{const{__scopeRovingFocusGroup:i,focusable:l=!0,active:c=!1,tabStopId:u,children:p,...d}=n,g=yl(),m=u||g,x=K2(CA,i),A=x.currentTabStopId===m,_=_A(i),{onFocusableItemAdd:k,onFocusableItemRemove:R,currentTabStopId:C}=x;return D.useEffect(()=>{if(l)return k(),()=>R()},[l,k,R]),b.jsx(C0.ItemSlot,{scope:i,id:m,focusable:l,active:c,children:b.jsx(gn.span,{tabIndex:A?0:-1,"data-orientation":x.orientation,...d,ref:s,onMouseDown:fn(n.onMouseDown,w=>{l?x.onItemFocus(m):w.preventDefault()}),onFocus:fn(n.onFocus,()=>x.onItemFocus(m)),onKeyDown:fn(n.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){x.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const B=J2(w,x.orientation,x.dir);if(B!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let T=_().filter(F=>F.focusable).map(F=>F.ref.current);if(B==="last")T.reverse();else if(B==="prev"||B==="next"){B==="prev"&&T.reverse();const F=T.indexOf(w.currentTarget);T=x.loop?eb(T,F+1):T.slice(F+1)}setTimeout(()=>kA(T))}}),children:typeof p=="function"?p({isCurrentTabStop:A,hasTabStop:C!=null}):p})})});EA.displayName=CA;var Y2={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function X2(n,s){return s!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function J2(n,s,i){const l=X2(n.key,i);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(l))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(l)))return Y2[l]}function kA(n,s=!1){const i=document.activeElement;for(const l of n)if(l===i||(l.focus({preventScroll:s}),document.activeElement!==i))return}function eb(n,s){return n.map((i,l)=>n[(s+l)%n.length])}var tb=bA,nb=EA,hd="Tabs",[rb]=kl(hd,[wA]),SA=wA(),[ib,K0]=rb(hd),BA=D.forwardRef((n,s)=>{const{__scopeTabs:i,value:l,onValueChange:c,defaultValue:u,orientation:p="horizontal",dir:d,activationMode:g="automatic",...m}=n,x=yA(d),[A,_]=nd({prop:l,onChange:c,defaultProp:u??"",caller:hd});return b.jsx(ib,{scope:i,baseId:yl(),value:A,onValueChange:_,orientation:p,dir:x,activationMode:g,children:b.jsx(gn.div,{dir:x,"data-orientation":p,...m,ref:s})})});BA.displayName=hd;var PA="TabsList",TA=D.forwardRef((n,s)=>{const{__scopeTabs:i,loop:l=!0,...c}=n,u=K0(PA,i),p=SA(i);return b.jsx(tb,{asChild:!0,...p,orientation:u.orientation,dir:u.dir,loop:l,children:b.jsx(gn.div,{role:"tablist","aria-orientation":u.orientation,...c,ref:s})})});TA.displayName=PA;var DA="TabsTrigger",RA=D.forwardRef((n,s)=>{const{__scopeTabs:i,value:l,disabled:c=!1,...u}=n,p=K0(DA,i),d=SA(i),g=LA(p.baseId,l),m=MA(p.baseId,l),x=l===p.value;return b.jsx(nb,{asChild:!0,...d,focusable:!c,active:x,children:b.jsx(gn.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":m,"data-state":x?"active":"inactive","data-disabled":c?"":void 0,disabled:c,id:g,...u,ref:s,onMouseDown:fn(n.onMouseDown,A=>{!c&&A.button===0&&A.ctrlKey===!1?p.onValueChange(l):A.preventDefault()}),onKeyDown:fn(n.onKeyDown,A=>{[" ","Enter"].includes(A.key)&&p.onValueChange(l)}),onFocus:fn(n.onFocus,()=>{const A=p.activationMode!=="manual";!x&&!c&&A&&p.onValueChange(l)})})})});RA.displayName=DA;var NA="TabsContent",FA=D.forwardRef((n,s)=>{const{__scopeTabs:i,value:l,forceMount:c,children:u,...p}=n,d=K0(NA,i),g=LA(d.baseId,l),m=MA(d.baseId,l),x=l===d.value,A=D.useRef(x);return D.useEffect(()=>{const _=requestAnimationFrame(()=>A.current=!1);return()=>cancelAnimationFrame(_)},[]),b.jsx(ua,{present:c||x,children:({present:_})=>b.jsx(gn.div,{"data-state":x?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":g,hidden:!_,id:m,tabIndex:0,...p,ref:s,style:{...n.style,animationDuration:A.current?"0s":void 0},children:_&&u})})});FA.displayName=NA;function LA(n,s){return`${n}-trigger-${s}`}function MA(n,s){return`${n}-content-${s}`}var ob=BA,IA=TA,OA=RA,jA=FA;const Q0=ob,pd=D.forwardRef(({className:n,...s},i)=>b.jsx(IA,{ref:i,className:pt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...s}));pd.displayName=IA.displayName;const br=D.forwardRef(({className:n,...s},i)=>b.jsx(OA,{ref:i,className:pt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...s}));br.displayName=OA.displayName;const Cr=D.forwardRef(({className:n,...s},i)=>b.jsx(jA,{ref:i,className:pt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...s}));Cr.displayName=jA.displayName;var sb=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ab=sb.reduce((n,s)=>{const i=V0(`Primitive.${s}`),l=D.forwardRef((c,u)=>{const{asChild:p,...d}=c,g=p?i:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(g,{...d,ref:u})});return l.displayName=`Primitive.${s}`,{...n,[s]:l}},{}),lb="Label",zA=D.forwardRef((n,s)=>b.jsx(ab.label,{...n,ref:s,onMouseDown:i=>{var c;i.target.closest("button, input, select, textarea")||((c=n.onMouseDown)==null||c.call(n,i),!i.defaultPrevented&&i.detail>1&&i.preventDefault())}}));zA.displayName=lb;var HA=zA;const cb=U0("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Zt=D.forwardRef(({className:n,...s},i)=>b.jsx(HA,{ref:i,className:pt(cb(),n),...s}));Zt.displayName=HA.displayName;function ub(n){const s=D.useRef({value:n,previous:n});return D.useMemo(()=>(s.current.value!==n&&(s.current.previous=s.current.value,s.current.value=n),s.current.previous),[n])}function db(n){const[s,i]=D.useState(void 0);return ia(()=>{if(n){i({width:n.offsetWidth,height:n.offsetHeight});const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const u=c[0];let p,d;if("borderBoxSize"in u){const g=u.borderBoxSize,m=Array.isArray(g)?g[0]:g;p=m.inlineSize,d=m.blockSize}else p=n.offsetWidth,d=n.offsetHeight;i({width:p,height:d})});return l.observe(n,{box:"border-box"}),()=>l.unobserve(n)}else i(void 0)},[n]),s}var md="Checkbox",[fb]=kl(md),[hb,Y0]=fb(md);function pb(n){const{__scopeCheckbox:s,checked:i,children:l,defaultChecked:c,disabled:u,form:p,name:d,onCheckedChange:g,required:m,value:x="on",internal_do_not_use_render:A}=n,[_,k]=nd({prop:i,defaultProp:c??!1,onChange:g,caller:md}),[R,C]=D.useState(null),[w,B]=D.useState(null),S=D.useRef(!1),T=R?!!p||!!R.closest("form"):!0,F={checked:_,disabled:u,setChecked:k,control:R,setControl:C,name:d,form:p,value:x,hasConsumerStoppedPropagationRef:S,required:m,defaultChecked:xo(c)?!1:c,isFormControl:T,bubbleInput:w,setBubbleInput:B};return b.jsx(hb,{scope:s,...F,children:mb(A)?A(F):l})}var VA="CheckboxTrigger",UA=D.forwardRef(({__scopeCheckbox:n,onKeyDown:s,onClick:i,...l},c)=>{const{control:u,value:p,disabled:d,checked:g,required:m,setControl:x,setChecked:A,hasConsumerStoppedPropagationRef:_,isFormControl:k,bubbleInput:R}=Y0(VA,n),C=Er(c,x),w=D.useRef(g);return D.useEffect(()=>{const B=u==null?void 0:u.form;if(B){const S=()=>A(w.current);return B.addEventListener("reset",S),()=>B.removeEventListener("reset",S)}},[u,A]),b.jsx(gn.button,{type:"button",role:"checkbox","aria-checked":xo(g)?"mixed":g,"aria-required":m,"data-state":$A(g),"data-disabled":d?"":void 0,disabled:d,value:p,...l,ref:C,onKeyDown:fn(s,B=>{B.key==="Enter"&&B.preventDefault()}),onClick:fn(i,B=>{A(S=>xo(S)?!0:!S),R&&k&&(_.current=B.isPropagationStopped(),_.current||B.stopPropagation())})})});UA.displayName=VA;var X0=D.forwardRef((n,s)=>{const{__scopeCheckbox:i,name:l,checked:c,defaultChecked:u,required:p,disabled:d,value:g,onCheckedChange:m,form:x,...A}=n;return b.jsx(pb,{__scopeCheckbox:i,checked:c,defaultChecked:u,disabled:d,required:p,onCheckedChange:m,name:l,form:x,value:g,internal_do_not_use_render:({isFormControl:_})=>b.jsxs(b.Fragment,{children:[b.jsx(UA,{...A,ref:s,__scopeCheckbox:i}),_&&b.jsx(GA,{__scopeCheckbox:i})]})})});X0.displayName=md;var ZA="CheckboxIndicator",WA=D.forwardRef((n,s)=>{const{__scopeCheckbox:i,forceMount:l,...c}=n,u=Y0(ZA,i);return b.jsx(ua,{present:l||xo(u.checked)||u.checked===!0,children:b.jsx(gn.span,{"data-state":$A(u.checked),"data-disabled":u.disabled?"":void 0,...c,ref:s,style:{pointerEvents:"none",...n.style}})})});WA.displayName=ZA;var qA="CheckboxBubbleInput",GA=D.forwardRef(({__scopeCheckbox:n,...s},i)=>{const{control:l,hasConsumerStoppedPropagationRef:c,checked:u,defaultChecked:p,required:d,disabled:g,name:m,value:x,form:A,bubbleInput:_,setBubbleInput:k}=Y0(qA,n),R=Er(i,k),C=ub(u),w=db(l);D.useEffect(()=>{const S=_;if(!S)return;const T=window.HTMLInputElement.prototype,M=Object.getOwnPropertyDescriptor(T,"checked").set,z=!c.current;if(C!==u&&M){const H=new Event("click",{bubbles:z});S.indeterminate=xo(u),M.call(S,xo(u)?!1:u),S.dispatchEvent(H)}},[_,C,u,c]);const B=D.useRef(xo(u)?!1:u);return b.jsx(gn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:p??B.current,required:d,disabled:g,name:m,value:x,form:A,...s,tabIndex:-1,ref:R,style:{...s.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});GA.displayName=qA;function mb(n){return typeof n=="function"}function xo(n){return n==="indeterminate"}function $A(n){return xo(n)?"indeterminate":n?"checked":"unchecked"}const ta=D.forwardRef(({className:n,...s},i)=>b.jsx(X0,{ref:i,className:pt("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...s,children:b.jsx(WA,{className:pt("flex items-center justify-center text-current"),children:b.jsx(__,{className:"h-4 w-4"})})}));ta.displayName=X0.displayName;function gb({open:n,contacts:s,undecryptedCount:i,onClose:l,onSelectConversation:c,onCreateContact:u,onCreateChannel:p,onCreateHashtagChannel:d}){const[g,m]=D.useState("existing"),[x,A]=D.useState(""),[_,k]=D.useState(""),[R,C]=D.useState(""),[w,B]=D.useState(!1),[S,T]=D.useState(!1),[F,M]=D.useState(""),[z,H]=D.useState(!1),j=D.useRef(null),X=async()=>{M(""),H(!0);try{if(g==="new-contact"){if(!x.trim()||!_.trim()){M("Name and public key are required");return}await u(x.trim(),_.trim(),w)}else if(g==="new-room"){if(!x.trim()||!R.trim()){M("Room name and key are required");return}await p(x.trim(),R.trim(),w)}else if(g==="hashtag"){const W=x.trim(),re=V(W);if(re){M(re);return}const pe=S?W:W.toLowerCase();await d(`#${pe}`,w)}l()}catch(W){M(W instanceof Error?W.message:"Failed to create")}finally{H(!1)}},V=W=>W?/^[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*$/.test(W)?null:"Use letters, numbers, and single dashes (no leading/trailing dashes)":"Channel name is required",$=async()=>{var pe;M("");const W=x.trim(),re=V(W);if(re){M(re);return}H(!0);try{const ie=S?W:W.toLowerCase();await d(`#${ie}`,w),A(""),(pe=j.current)==null||pe.focus()}catch(ie){M(ie instanceof Error?ie.message:"Failed to create")}finally{H(!1)}},ee=g!=="existing"&&i>0;return b.jsx(G0,{open:n,onOpenChange:W=>!W&&l(),children:b.jsxs(cd,{className:"sm:max-w-[500px]",children:[b.jsxs(ud,{children:[b.jsx(dd,{children:"New Conversation"}),b.jsxs(fd,{className:"sr-only",children:[g==="existing"&&"Select an existing contact to start a conversation",g==="new-contact"&&"Add a new contact by entering their name and public key",g==="new-room"&&"Create a private room with a shared encryption key",g==="hashtag"&&"Join a public hashtag channel"]})]}),b.jsxs(Q0,{value:g,onValueChange:W=>m(W),className:"w-full",children:[b.jsxs(pd,{className:"grid w-full grid-cols-4",children:[b.jsx(br,{value:"existing",children:"Existing"}),b.jsx(br,{value:"new-contact",children:"Contact"}),b.jsx(br,{value:"new-room",children:"Room"}),b.jsx(br,{value:"hashtag",children:"Hashtag"})]}),b.jsx(Cr,{value:"existing",className:"mt-4",children:b.jsx("div",{className:"max-h-[300px] overflow-y-auto rounded-md border",children:s.length===0?b.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No contacts available"}):s.map(W=>b.jsx("div",{className:"cursor-pointer px-4 py-2 hover:bg-accent",onClick:()=>{c({type:"contact",id:W.public_key,name:Ti(W.name,W.public_key)}),l()},children:Ti(W.name,W.public_key)},W.public_key))})}),b.jsxs(Cr,{value:"new-contact",className:"mt-4 space-y-4",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(Zt,{htmlFor:"contact-name",children:"Name"}),b.jsx(rn,{id:"contact-name",value:x,onChange:W=>A(W.target.value),placeholder:"Contact name"})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(Zt,{htmlFor:"contact-key",children:"Public Key"}),b.jsx(rn,{id:"contact-key",value:_,onChange:W=>k(W.target.value),placeholder:"64-character hex public key"})]})]}),b.jsxs(Cr,{value:"new-room",className:"mt-4 space-y-4",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(Zt,{htmlFor:"room-name",children:"Room Name"}),b.jsx(rn,{id:"room-name",value:x,onChange:W=>A(W.target.value),placeholder:"Room name"})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(Zt,{htmlFor:"room-key",children:"Room Key"}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx(rn,{id:"room-key",value:R,onChange:W=>C(W.target.value),placeholder:"Pre-shared key (hex)",className:"flex-1"}),b.jsx(wn,{type:"button",variant:"outline",size:"icon",onClick:()=>{const W=new Uint8Array(16);crypto.getRandomValues(W);const re=Array.from(W).map(pe=>pe.toString(16).padStart(2,"0")).join("");C(re)},title:"Generate random key",children:""})]})]})]}),b.jsxs(Cr,{value:"hashtag",className:"mt-4",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(Zt,{htmlFor:"hashtag-name",children:"Hashtag Channel"}),b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsx("span",{className:"text-sm text-muted-foreground",children:"#"}),b.jsx(rn,{ref:j,id:"hashtag-name",value:x,onChange:W=>A(W.target.value),placeholder:"channel-name",className:"flex-1"})]})]}),b.jsxs("div",{className:"mt-3 space-y-1",children:[b.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[b.jsx("input",{type:"checkbox",checked:S,onChange:W=>T(W.target.checked),className:"w-4 h-4 rounded border-input accent-primary"}),b.jsx("span",{className:"text-sm",children:"Permit capitals in room key derivation"})]}),b.jsx("p",{className:"text-xs text-muted-foreground pl-7",children:"Not recommended; most companions normalize to lowercase"})]})]})]}),ee&&b.jsxs("div",{className:"space-y-1",children:[b.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[b.jsxs(Zt,{htmlFor:"try-historical",className:"text-sm text-muted-foreground cursor-pointer",children:["Try decrypting ",i.toLocaleString()," stored packet",i!==1?"s":""]}),b.jsx(ta,{id:"try-historical",checked:w,onCheckedChange:W=>B(W===!0)})]}),w&&b.jsx("p",{className:"text-xs text-muted-foreground text-right",children:"Messages will stream in as they decrypt in the background"})]}),F&&b.jsx("div",{className:"text-sm text-destructive",children:F}),b.jsxs($0,{children:[b.jsx(wn,{variant:"outline",onClick:l,children:"Cancel"}),g==="hashtag"&&b.jsx(wn,{variant:"secondary",onClick:$,disabled:z,children:z?"Creating...":"Create & Add Another"}),g!=="existing"&&b.jsx(wn,{onClick:X,disabled:z,children:z?"Creating...":"Create"})]})]})})}var xb=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ab=xb.reduce((n,s)=>{const i=V0(`Primitive.${s}`),l=D.forwardRef((c,u)=>{const{asChild:p,...d}=c,g=p?i:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(g,{...d,ref:u})});return l.displayName=`Primitive.${s}`,{...n,[s]:l}},{}),vb="Separator",Im="horizontal",yb=["horizontal","vertical"],KA=D.forwardRef((n,s)=>{const{decorative:i,orientation:l=Im,...c}=n,u=_b(l)?l:Im,d=i?{role:"none"}:{"aria-orientation":u==="vertical"?u:void 0,role:"separator"};return b.jsx(Ab.div,{"data-orientation":u,...d,...c,ref:s})});KA.displayName=vb;function _b(n){return yb.includes(n)}var QA=KA;const Xo=D.forwardRef(({className:n,orientation:s="horizontal",decorative:i=!0,...l},c)=>b.jsx(QA,{ref:c,decorative:i,orientation:s,className:pt("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",n),...l}));Xo.displayName=QA.displayName;const u0=[{name:"USA/Canada",freq:910.525,bw:62.5,sf:7,cr:5},{name:"Australia",freq:915.8,bw:250,sf:10,cr:5},{name:"Australia (narrow)",freq:916.575,bw:62.5,sf:7,cr:8},{name:"Australia SA, WA",freq:923.125,bw:62.5,sf:8,cr:8},{name:"Australia QLD",freq:923.125,bw:62.5,sf:8,cr:5},{name:"New Zealand",freq:917.375,bw:250,sf:11,cr:5},{name:"New Zealand (narrow)",freq:917.375,bw:62.5,sf:7,cr:5},{name:"EU/UK/Switzerland Long Range",freq:869.525,bw:250,sf:11,cr:5},{name:"EU/UK/Switzerland Medium Range",freq:869.525,bw:250,sf:10,cr:5},{name:"EU/UK/Switzerland Narrow",freq:869.618,bw:62.5,sf:8,cr:8},{name:"Czech Republic (Narrow)",freq:869.432,bw:62.5,sf:7,cr:5},{name:"EU 433MHz Long Range",freq:433.65,bw:250,sf:11,cr:5},{name:"Portugal 433MHz",freq:433.375,bw:62.5,sf:9,cr:6},{name:"Portugal 868MHz",freq:869.618,bw:62.5,sf:7,cr:6},{name:"Vietnam",freq:920.25,bw:250,sf:11,cr:5}];function wb({open:n,config:s,health:i,appSettings:l,onClose:c,onSave:u,onSaveAppSettings:p,onSetPrivateKey:d,onReboot:g,onAdvertise:m,onHealthRefresh:x,onRefreshAppSettings:A}){const[_,k]=D.useState("radio"),[R,C]=D.useState(""),[w,B]=D.useState(""),[S,T]=D.useState(""),[F,M]=D.useState(""),[z,H]=D.useState(""),[j,X]=D.useState(""),[V,$]=D.useState(""),[ee,W]=D.useState(""),[re,pe]=D.useState(""),[ie,Ae]=D.useState(""),[G,xe]=D.useState(!1),[Z,N]=D.useState(!1),[U,K]=D.useState(!1),[Y,fe]=D.useState(!1),[me,Se]=D.useState(""),[we,de]=D.useState("14"),[he,Ze]=D.useState(!1),[Fe,ge]=D.useState(!1);D.useEffect(()=>{s&&(C(s.name),B(String(s.lat)),T(String(s.lon)),M(String(s.tx_power)),H(String(s.radio.freq)),X(String(s.radio.bw)),$(String(s.radio.sf)),W(String(s.radio.cr)))},[s]),D.useEffect(()=>{l&&(Ae(String(l.max_radio_contacts)),ge(l.auto_decrypt_dm_on_advert))},[l]),D.useEffect(()=>{n&&A()},[n,A]);const Le=D.useMemo(()=>{const ve=parseFloat(z),Me=parseFloat(j),yt=parseInt(V,10),Pt=parseInt(ee,10);for(const Nt of u0)if(Nt.freq===ve&&Nt.bw===Me&&Nt.sf===yt&&Nt.cr===Pt)return Nt.name;return"custom"},[z,j,V,ee]),We=ve=>{if(ve==="custom")return;const Me=u0.find(yt=>yt.name===ve);Me&&(H(String(Me.freq)),X(String(Me.bw)),$(String(Me.sf)),W(String(Me.cr)))},lt=()=>{if(!navigator.geolocation){bt.error("Geolocation not supported",{description:"Your browser does not support geolocation"});return}fe(!0),navigator.geolocation.getCurrentPosition(ve=>{B(ve.coords.latitude.toFixed(6)),T(ve.coords.longitude.toFixed(6)),fe(!1),bt.success("Location updated")},ve=>{fe(!1),bt.error("Failed to get location",{description:ve.message})},{enableHighAccuracy:!0,timeout:1e4})},et=async()=>{Se(""),xe(!0);try{const ve={lat:parseFloat(w),lon:parseFloat(S),tx_power:parseInt(F,10),radio:{freq:parseFloat(z),bw:parseFloat(j),sf:parseInt(V,10),cr:parseInt(ee,10)}};await u(ve),bt.success("Radio config saved, rebooting..."),xe(!1),N(!0),await g(),c()}catch(ve){Se(ve instanceof Error?ve.message:"Failed to save"),xe(!1)}finally{N(!1)}},Ne=async()=>{Se(""),xe(!0);try{await u({name:R}),bt.success("Identity saved")}catch(ve){Se(ve instanceof Error?ve.message:"Failed to save")}finally{xe(!1)}},Ue=async()=>{Se(""),xe(!0);try{const ve=parseInt(ie,10);!isNaN(ve)&&ve!==(l==null?void 0:l.max_radio_contacts)&&await p({max_radio_contacts:ve}),bt.success("Serial settings saved")}catch(ve){Se(ve instanceof Error?ve.message:"Failed to save")}finally{xe(!1)}},ot=async()=>{if(!re.trim()){Se("Private key is required");return}Se(""),xe(!0);try{await d(re.trim()),pe(""),bt.success("Private key set, rebooting..."),xe(!1),N(!0),await g(),c()}catch(ve){Se(ve instanceof Error?ve.message:"Failed to set private key"),xe(!1)}finally{N(!1)}},tt=async()=>{if(confirm("Are you sure you want to reboot the radio? The connection will drop temporarily.")){Se(""),N(!0);try{await g(),c()}catch(ve){Se(ve instanceof Error?ve.message:"Failed to reboot radio")}finally{N(!1)}}},oe=async()=>{K(!0);try{await m()}finally{K(!1)}},Re=async()=>{const ve=parseInt(we,10);if(isNaN(ve)||ve<1){bt.error("Invalid retention days",{description:"Retention days must be at least 1"});return}Ze(!0);try{const Me=await dt.runMaintenance(ve);bt.success("Database cleanup complete",{description:`Deleted ${Me.packets_deleted} old packet${Me.packets_deleted===1?"":"s"}`}),await x()}catch(Me){console.error("Failed to run maintenance:",Me),bt.error("Database cleanup failed",{description:Me instanceof Error?Me.message:"Unknown error"})}finally{Ze(!1)}},qe=async()=>{xe(!0),Se("");try{await p({auto_decrypt_dm_on_advert:Fe}),bt.success("Database settings saved")}catch(ve){console.error("Failed to save database settings:",ve),Se(ve instanceof Error?ve.message:"Failed to save"),bt.error("Failed to save settings")}finally{xe(!1)}};return b.jsx(G0,{open:n,onOpenChange:ve=>!ve&&c(),children:b.jsxs(cd,{className:"sm:max-w-[500px] max-h-[90vh] overflow-y-auto",children:[b.jsxs(ud,{children:[b.jsx(dd,{children:"Radio & Settings"}),b.jsxs(fd,{className:"sr-only",children:[_==="radio"&&"Configure radio frequency, power, and location settings",_==="identity"&&"Manage radio name, public key, and private key",_==="serial"&&"View serial port connection and configure contact sync",_==="database"&&"View database statistics and clean up old packets",_==="advertise"&&"Send a flood advertisement to announce your presence"]})]}),s?b.jsxs(Q0,{value:_,onValueChange:ve=>k(ve),className:"w-full",children:[b.jsxs(pd,{className:"grid w-full grid-cols-5",children:[b.jsx(br,{value:"radio",children:"Radio"}),b.jsx(br,{value:"identity",children:"Identity"}),b.jsx(br,{value:"serial",children:"Serial"}),b.jsx(br,{value:"database",children:"Database"}),b.jsx(br,{value:"advertise",children:"Advertise"})]}),b.jsxs(Cr,{value:"radio",className:"space-y-4 mt-4",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(Zt,{htmlFor:"preset",children:"Preset"}),b.jsxs("select",{id:"preset",value:Le,onChange:ve=>We(ve.target.value),className:"w-full h-10 px-3 rounded-md border border-input bg-background text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:[b.jsx("option",{value:"custom",children:"Custom"}),u0.map(ve=>b.jsx("option",{value:ve.name,children:ve.name},ve.name))]})]}),b.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(Zt,{htmlFor:"freq",children:"Frequency (MHz)"}),b.jsx(rn,{id:"freq",type:"number",step:"any",value:z,onChange:ve=>H(ve.target.value)})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(Zt,{htmlFor:"bw",children:"Bandwidth (kHz)"}),b.jsx(rn,{id:"bw",type:"number",step:"any",value:j,onChange:ve=>X(ve.target.value)})]})]}),b.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(Zt,{htmlFor:"sf",children:"Spreading Factor"}),b.jsx(rn,{id:"sf",type:"number",min:"7",max:"12",value:V,onChange:ve=>$(ve.target.value)})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(Zt,{htmlFor:"cr",children:"Coding Rate"}),b.jsx(rn,{id:"cr",type:"number",min:"5",max:"8",value:ee,onChange:ve=>W(ve.target.value)})]})]}),b.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(Zt,{htmlFor:"tx-power",children:"TX Power (dBm)"}),b.jsx(rn,{id:"tx-power",type:"number",value:F,onChange:ve=>M(ve.target.value)})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(Zt,{htmlFor:"max-tx",children:"Max TX Power"}),b.jsx(rn,{id:"max-tx",type:"number",value:s.max_tx_power,disabled:!0})]})]}),b.jsx(Xo,{}),b.jsxs("div",{className:"space-y-2",children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsx(Zt,{children:"Location"}),b.jsx(wn,{type:"button",variant:"outline",size:"sm",onClick:lt,disabled:Y,children:Y?"Getting...":" Use My Location"})]}),b.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(Zt,{htmlFor:"lat",className:"text-xs text-muted-foreground",children:"Latitude"}),b.jsx(rn,{id:"lat",type:"number",step:"any",value:w,onChange:ve=>B(ve.target.value)})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(Zt,{htmlFor:"lon",className:"text-xs text-muted-foreground",children:"Longitude"}),b.jsx(rn,{id:"lon",type:"number",step:"any",value:S,onChange:ve=>T(ve.target.value)})]})]})]}),me&&b.jsx("div",{className:"text-sm text-destructive",children:me}),b.jsx(wn,{onClick:et,disabled:G||Z,className:"w-full",children:G||Z?"Saving & Rebooting...":"Save Radio Config & Reboot"})]}),b.jsxs(Cr,{value:"identity",className:"space-y-4 mt-4",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(Zt,{htmlFor:"public-key",children:"Public Key"}),b.jsx(rn,{id:"public-key",value:s.public_key,disabled:!0,className:"font-mono text-xs"})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(Zt,{htmlFor:"name",children:"Radio Name"}),b.jsx(rn,{id:"name",value:R,onChange:ve=>C(ve.target.value)})]}),b.jsx(wn,{onClick:Ne,disabled:G,className:"w-full",children:G?"Saving...":"Set Name"}),b.jsx(Xo,{}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(Zt,{htmlFor:"private-key",children:"Set Private Key (write-only)"}),b.jsx(rn,{id:"private-key",type:"password",autoComplete:"off",value:re,onChange:ve=>pe(ve.target.value),placeholder:"64-character hex private key"}),b.jsx(wn,{onClick:ot,disabled:G||Z||!re.trim(),className:"w-full",children:G||Z?"Setting & Rebooting...":"Set Private Key & Reboot"})]}),me&&b.jsx("div",{className:"text-sm text-destructive",children:me})]}),b.jsxs(Cr,{value:"serial",className:"space-y-4 mt-4",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(Zt,{children:"Serial Port"}),i!=null&&i.serial_port?b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),b.jsx("code",{className:"px-2 py-1 bg-muted rounded text-foreground text-sm",children:i.serial_port})]}):b.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[b.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500"}),b.jsx("span",{children:"Not connected"})]})]}),b.jsx(Xo,{}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(Zt,{htmlFor:"max-contacts",children:"Max Contacts on Radio"}),b.jsx(rn,{id:"max-contacts",type:"number",min:"1",max:"1000",value:ie,onChange:ve=>Ae(ve.target.value)}),b.jsx("p",{className:"text-xs text-muted-foreground",children:"Recent non-repeater contacts loaded to radio for DM auto-ACK (1-1000)"})]}),b.jsx(wn,{onClick:Ue,disabled:G,className:"w-full",children:G?"Saving...":"Save Settings"}),b.jsx(Xo,{}),b.jsx(wn,{variant:"outline",onClick:tt,disabled:Z||G,className:"w-full border-red-500/50 text-red-400 hover:bg-red-500/10",children:Z?"Rebooting...":"Reboot Radio"}),me&&b.jsx("div",{className:"text-sm text-destructive",children:me})]}),b.jsxs(Cr,{value:"database",className:"space-y-4 mt-4",children:[b.jsxs("div",{className:"space-y-3",children:[b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("span",{className:"text-sm text-muted-foreground",children:"Database size"}),b.jsxs("span",{className:"font-medium",children:[(i==null?void 0:i.database_size_mb)??"?"," MB"]})]}),i!=null&&i.oldest_undecrypted_timestamp?b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("span",{className:"text-sm text-muted-foreground",children:"Oldest undecrypted packet"}),b.jsxs("span",{className:"font-medium",children:[ra(i.oldest_undecrypted_timestamp),b.jsxs("span",{className:"text-muted-foreground ml-1",children:["(",Math.floor((Date.now()/1e3-i.oldest_undecrypted_timestamp)/86400)," ","days old)"]})]})]}):b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("span",{className:"text-sm text-muted-foreground",children:"Oldest undecrypted packet"}),b.jsx("span",{className:"text-muted-foreground",children:"None"})]})]}),b.jsx(Xo,{}),b.jsxs("div",{className:"space-y-3",children:[b.jsx(Zt,{children:"Cleanup Old Packets"}),b.jsx("p",{className:"text-xs text-muted-foreground",children:"Delete undecrypted packets older than the specified days. This helps manage storage for packets that couldn't be decrypted (unknown channel keys)."}),b.jsxs("div",{className:"flex gap-2 items-end",children:[b.jsxs("div",{className:"space-y-1",children:[b.jsx(Zt,{htmlFor:"retention-days",className:"text-xs",children:"Days to retain"}),b.jsx(rn,{id:"retention-days",type:"number",min:"1",max:"365",value:we,onChange:ve=>de(ve.target.value),className:"w-24"})]}),b.jsx(wn,{variant:"outline",onClick:Re,disabled:he,children:he?"Cleaning...":"Cleanup"})]})]}),b.jsx(Xo,{}),b.jsxs("div",{className:"space-y-3",children:[b.jsx(Zt,{children:"DM Decryption"}),b.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[b.jsx("input",{type:"checkbox",checked:Fe,onChange:ve=>ge(ve.target.checked),className:"w-4 h-4 rounded border-input accent-primary"}),b.jsx("span",{className:"text-sm",children:"Auto-decrypt historical DMs when new contact advertises"})]}),b.jsx("p",{className:"text-xs text-muted-foreground",children:"When enabled, the server will automatically try to decrypt stored DM packets when a new contact sends an advertisement. This may cause brief delays on large packet backlogs."})]}),me&&b.jsx("div",{className:"text-sm text-destructive",children:me}),b.jsx(wn,{onClick:qe,disabled:G,className:"w-full",children:G?"Saving...":"Save Settings"})]}),b.jsx(Cr,{value:"advertise",className:"space-y-4 mt-4",children:b.jsxs("div",{className:"text-center py-8",children:[b.jsx("p",{className:"text-muted-foreground mb-6",children:"Send a flood advertisement to announce your presence on the mesh network."}),b.jsx(wn,{size:"lg",onClick:oe,disabled:U||!(i!=null&&i.radio_connected),className:"bg-green-600 hover:bg-green-700 text-white px-12 py-6 text-lg",children:U?"Sending...":"Send Advertisement"}),!(i!=null&&i.radio_connected)&&b.jsx("p",{className:"text-sm text-destructive mt-4",children:"Radio not connected"})]})})]}):b.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"Loading configuration..."})]})})}var Si={},nl={},_n={},Om;function ur(){if(Om)return _n;Om=1,Object.defineProperty(_n,"__esModule",{value:!0}),_n.RequestType=_n.AdvertFlags=_n.DeviceRole=_n.PayloadVersion=_n.ControlSubType=_n.PayloadType=_n.RouteType=void 0;var n;(function(d){d[d.TransportFlood=0]="TransportFlood",d[d.Flood=1]="Flood",d[d.Direct=2]="Direct",d[d.TransportDirect=3]="TransportDirect"})(n||(_n.RouteType=n={}));var s;(function(d){d[d.Request=0]="Request",d[d.Response=1]="Response",d[d.TextMessage=2]="TextMessage",d[d.Ack=3]="Ack",d[d.Advert=4]="Advert",d[d.GroupText=5]="GroupText",d[d.GroupData=6]="GroupData",d[d.AnonRequest=7]="AnonRequest",d[d.Path=8]="Path",d[d.Trace=9]="Trace",d[d.Multipart=10]="Multipart",d[d.Control=11]="Control",d[d.RawCustom=15]="RawCustom"})(s||(_n.PayloadType=s={}));var i;(function(d){d[d.NodeDiscoverReq=128]="NodeDiscoverReq",d[d.NodeDiscoverResp=144]="NodeDiscoverResp"})(i||(_n.ControlSubType=i={}));var l;(function(d){d[d.Version1=0]="Version1",d[d.Version2=1]="Version2",d[d.Version3=2]="Version3",d[d.Version4=3]="Version4"})(l||(_n.PayloadVersion=l={}));var c;(function(d){d[d.Unknown=0]="Unknown",d[d.ChatNode=1]="ChatNode",d[d.Repeater=2]="Repeater",d[d.RoomServer=3]="RoomServer",d[d.Sensor=4]="Sensor"})(c||(_n.DeviceRole=c={}));var u;(function(d){d[d.HasLocation=16]="HasLocation",d[d.HasFeature1=32]="HasFeature1",d[d.HasFeature2=64]="HasFeature2",d[d.HasName=128]="HasName"})(u||(_n.AdvertFlags=u={}));var p;return(function(d){d[d.GetStats=1]="GetStats",d[d.Keepalive=2]="Keepalive",d[d.GetTelemetryData=3]="GetTelemetryData",d[d.GetMinMaxAvgData=4]="GetMinMaxAvgData",d[d.GetAccessList=5]="GetAccessList"})(p||(_n.RequestType=p={})),_n}var $o={},jm;function bn(){if(jm)return $o;jm=1,Object.defineProperty($o,"__esModule",{value:!0}),$o.byteToHex=n,$o.bytesToHex=s,$o.numberToHex=i,$o.hexToBytes=l;function n(c){return c.toString(16).padStart(2,"0").toUpperCase()}function s(c){return Array.from(c).map(n).join("")}function i(c,u=8){return(c>>>0).toString(16).padStart(u,"0").toUpperCase()}function l(c){const u=c.replace(/\s/g,"").toUpperCase();if(!/^[0-9A-F]*$/.test(u))throw new Error("Invalid hex string: invalid characters at position 0");if(u.length%2!==0)throw new Error("Invalid hex string: odd length");const p=new Uint8Array(u.length/2);for(let d=0;d<u.length;d+=2)p[d/2]=parseInt(u.substr(d,2),16);return p}return $o}var Bi={},zm;function _l(){if(zm)return Bi;zm=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.getRouteTypeName=s,Bi.getPayloadTypeName=i,Bi.getPayloadVersionName=l,Bi.getDeviceRoleName=c,Bi.getRequestTypeName=u,Bi.getControlSubTypeName=p;const n=ur();function s(d){switch(d){case n.RouteType.Flood:return"Flood";case n.RouteType.Direct:return"Direct";case n.RouteType.TransportFlood:return"TransportFlood";case n.RouteType.TransportDirect:return"TransportDirect";default:return`Unknown (${d})`}}function i(d){switch(d){case n.PayloadType.RawCustom:return"RawCustom";case n.PayloadType.Trace:return"Trace";case n.PayloadType.Advert:return"Advert";case n.PayloadType.GroupText:return"GroupText";case n.PayloadType.GroupData:return"GroupData";case n.PayloadType.Request:return"Request";case n.PayloadType.Response:return"Response";case n.PayloadType.TextMessage:return"TextMessage";case n.PayloadType.AnonRequest:return"AnonRequest";case n.PayloadType.Ack:return"Ack";case n.PayloadType.Path:return"Path";case n.PayloadType.Multipart:return"Multipart";case n.PayloadType.Control:return"Control";default:return`Unknown (0x${d.toString(16)})`}}function l(d){switch(d){case n.PayloadVersion.Version1:return"Version 1";case n.PayloadVersion.Version2:return"Version 2";case n.PayloadVersion.Version3:return"Version 3";case n.PayloadVersion.Version4:return"Version 4";default:return`Unknown (${d})`}}function c(d){switch(d){case n.DeviceRole.Unknown:return"Unknown";case n.DeviceRole.ChatNode:return"Chat Node";case n.DeviceRole.Repeater:return"Repeater";case n.DeviceRole.RoomServer:return"Room Server";case n.DeviceRole.Sensor:return"Sensor";default:return`Unknown (${d})`}}function u(d){switch(d){case n.RequestType.GetStats:return"Get Stats";case n.RequestType.Keepalive:return"Keepalive (deprecated)";case n.RequestType.GetTelemetryData:return"Get Telemetry Data";case n.RequestType.GetMinMaxAvgData:return"Get Min/Max/Avg Data";case n.RequestType.GetAccessList:return"Get Access List";default:return`Unknown (${d})`}}function p(d){switch(d){case n.ControlSubType.NodeDiscoverReq:return"Node Discover Request";case n.ControlSubType.NodeDiscoverResp:return"Node Discover Response";default:return`Unknown (0x${d.toString(16)})`}}return Bi}var rl={},il={},iu={exports:{}};function E0(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ou={exports:{}};const bb={},Cb=Object.freeze(Object.defineProperty({__proto__:null,default:bb},Symbol.toStringTag,{value:"Module"})),Ku=gx(Cb);var Eb=ou.exports,Hm;function wt(){return Hm||(Hm=1,(function(n,s){(function(i,l){n.exports=l()})(Eb,function(){var i=i||(function(l,c){var u;if(typeof window<"u"&&window.crypto&&(u=window.crypto),typeof self<"u"&&self.crypto&&(u=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(u=globalThis.crypto),!u&&typeof window<"u"&&window.msCrypto&&(u=window.msCrypto),!u&&typeof Gf<"u"&&Gf.crypto&&(u=Gf.crypto),!u&&typeof E0=="function")try{u=Ku}catch{}var p=function(){if(u){if(typeof u.getRandomValues=="function")try{return u.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof u.randomBytes=="function")try{return u.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},d=Object.create||(function(){function S(){}return function(T){var F;return S.prototype=T,F=new S,S.prototype=null,F}})(),g={},m=g.lib={},x=m.Base=(function(){return{extend:function(S){var T=d(this);return S&&T.mixIn(S),(!T.hasOwnProperty("init")||this.init===T.init)&&(T.init=function(){T.$super.init.apply(this,arguments)}),T.init.prototype=T,T.$super=this,T},create:function(){var S=this.extend();return S.init.apply(S,arguments),S},init:function(){},mixIn:function(S){for(var T in S)S.hasOwnProperty(T)&&(this[T]=S[T]);S.hasOwnProperty("toString")&&(this.toString=S.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),A=m.WordArray=x.extend({init:function(S,T){S=this.words=S||[],T!=c?this.sigBytes=T:this.sigBytes=S.length*4},toString:function(S){return(S||k).stringify(this)},concat:function(S){var T=this.words,F=S.words,M=this.sigBytes,z=S.sigBytes;if(this.clamp(),M%4)for(var H=0;H<z;H++){var j=F[H>>>2]>>>24-H%4*8&255;T[M+H>>>2]|=j<<24-(M+H)%4*8}else for(var X=0;X<z;X+=4)T[M+X>>>2]=F[X>>>2];return this.sigBytes+=z,this},clamp:function(){var S=this.words,T=this.sigBytes;S[T>>>2]&=4294967295<<32-T%4*8,S.length=l.ceil(T/4)},clone:function(){var S=x.clone.call(this);return S.words=this.words.slice(0),S},random:function(S){for(var T=[],F=0;F<S;F+=4)T.push(p());return new A.init(T,S)}}),_=g.enc={},k=_.Hex={stringify:function(S){for(var T=S.words,F=S.sigBytes,M=[],z=0;z<F;z++){var H=T[z>>>2]>>>24-z%4*8&255;M.push((H>>>4).toString(16)),M.push((H&15).toString(16))}return M.join("")},parse:function(S){for(var T=S.length,F=[],M=0;M<T;M+=2)F[M>>>3]|=parseInt(S.substr(M,2),16)<<24-M%8*4;return new A.init(F,T/2)}},R=_.Latin1={stringify:function(S){for(var T=S.words,F=S.sigBytes,M=[],z=0;z<F;z++){var H=T[z>>>2]>>>24-z%4*8&255;M.push(String.fromCharCode(H))}return M.join("")},parse:function(S){for(var T=S.length,F=[],M=0;M<T;M++)F[M>>>2]|=(S.charCodeAt(M)&255)<<24-M%4*8;return new A.init(F,T)}},C=_.Utf8={stringify:function(S){try{return decodeURIComponent(escape(R.stringify(S)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(S){return R.parse(unescape(encodeURIComponent(S)))}},w=m.BufferedBlockAlgorithm=x.extend({reset:function(){this._data=new A.init,this._nDataBytes=0},_append:function(S){typeof S=="string"&&(S=C.parse(S)),this._data.concat(S),this._nDataBytes+=S.sigBytes},_process:function(S){var T,F=this._data,M=F.words,z=F.sigBytes,H=this.blockSize,j=H*4,X=z/j;S?X=l.ceil(X):X=l.max((X|0)-this._minBufferSize,0);var V=X*H,$=l.min(V*4,z);if(V){for(var ee=0;ee<V;ee+=H)this._doProcessBlock(M,ee);T=M.splice(0,V),F.sigBytes-=$}return new A.init(T,$)},clone:function(){var S=x.clone.call(this);return S._data=this._data.clone(),S},_minBufferSize:0});m.Hasher=w.extend({cfg:x.extend(),init:function(S){this.cfg=this.cfg.extend(S),this.reset()},reset:function(){w.reset.call(this),this._doReset()},update:function(S){return this._append(S),this._process(),this},finalize:function(S){S&&this._append(S);var T=this._doFinalize();return T},blockSize:16,_createHelper:function(S){return function(T,F){return new S.init(F).finalize(T)}},_createHmacHelper:function(S){return function(T,F){return new B.HMAC.init(S,F).finalize(T)}}});var B=g.algo={};return g})(Math);return i})})(ou)),ou.exports}var su={exports:{}},kb=su.exports,Vm;function gd(){return Vm||(Vm=1,(function(n,s){(function(i,l){n.exports=l(wt())})(kb,function(i){return(function(l){var c=i,u=c.lib,p=u.Base,d=u.WordArray,g=c.x64={};g.Word=p.extend({init:function(m,x){this.high=m,this.low=x}}),g.WordArray=p.extend({init:function(m,x){m=this.words=m||[],x!=l?this.sigBytes=x:this.sigBytes=m.length*8},toX32:function(){for(var m=this.words,x=m.length,A=[],_=0;_<x;_++){var k=m[_];A.push(k.high),A.push(k.low)}return d.create(A,this.sigBytes)},clone:function(){for(var m=p.clone.call(this),x=m.words=this.words.slice(0),A=x.length,_=0;_<A;_++)x[_]=x[_].clone();return m}})})(),i})})(su)),su.exports}var au={exports:{}},Sb=au.exports,Um;function Bb(){return Um||(Um=1,(function(n,s){(function(i,l){n.exports=l(wt())})(Sb,function(i){return(function(){if(typeof ArrayBuffer=="function"){var l=i,c=l.lib,u=c.WordArray,p=u.init,d=u.init=function(g){if(g instanceof ArrayBuffer&&(g=new Uint8Array(g)),(g instanceof Int8Array||typeof Uint8ClampedArray<"u"&&g instanceof Uint8ClampedArray||g instanceof Int16Array||g instanceof Uint16Array||g instanceof Int32Array||g instanceof Uint32Array||g instanceof Float32Array||g instanceof Float64Array)&&(g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength)),g instanceof Uint8Array){for(var m=g.byteLength,x=[],A=0;A<m;A++)x[A>>>2]|=g[A]<<24-A%4*8;p.call(this,x,m)}else p.apply(this,arguments)};d.prototype=u}})(),i.lib.WordArray})})(au)),au.exports}var lu={exports:{}},Pb=lu.exports,Zm;function Tb(){return Zm||(Zm=1,(function(n,s){(function(i,l){n.exports=l(wt())})(Pb,function(i){return(function(){var l=i,c=l.lib,u=c.WordArray,p=l.enc;p.Utf16=p.Utf16BE={stringify:function(g){for(var m=g.words,x=g.sigBytes,A=[],_=0;_<x;_+=2){var k=m[_>>>2]>>>16-_%4*8&65535;A.push(String.fromCharCode(k))}return A.join("")},parse:function(g){for(var m=g.length,x=[],A=0;A<m;A++)x[A>>>1]|=g.charCodeAt(A)<<16-A%2*16;return u.create(x,m*2)}},p.Utf16LE={stringify:function(g){for(var m=g.words,x=g.sigBytes,A=[],_=0;_<x;_+=2){var k=d(m[_>>>2]>>>16-_%4*8&65535);A.push(String.fromCharCode(k))}return A.join("")},parse:function(g){for(var m=g.length,x=[],A=0;A<m;A++)x[A>>>1]|=d(g.charCodeAt(A)<<16-A%2*16);return u.create(x,m*2)}};function d(g){return g<<8&4278255360|g>>>8&16711935}})(),i.enc.Utf16})})(lu)),lu.exports}var cu={exports:{}},Db=cu.exports,Wm;function ss(){return Wm||(Wm=1,(function(n,s){(function(i,l){n.exports=l(wt())})(Db,function(i){return(function(){var l=i,c=l.lib,u=c.WordArray,p=l.enc;p.Base64={stringify:function(g){var m=g.words,x=g.sigBytes,A=this._map;g.clamp();for(var _=[],k=0;k<x;k+=3)for(var R=m[k>>>2]>>>24-k%4*8&255,C=m[k+1>>>2]>>>24-(k+1)%4*8&255,w=m[k+2>>>2]>>>24-(k+2)%4*8&255,B=R<<16|C<<8|w,S=0;S<4&&k+S*.75<x;S++)_.push(A.charAt(B>>>6*(3-S)&63));var T=A.charAt(64);if(T)for(;_.length%4;)_.push(T);return _.join("")},parse:function(g){var m=g.length,x=this._map,A=this._reverseMap;if(!A){A=this._reverseMap=[];for(var _=0;_<x.length;_++)A[x.charCodeAt(_)]=_}var k=x.charAt(64);if(k){var R=g.indexOf(k);R!==-1&&(m=R)}return d(g,m,A)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function d(g,m,x){for(var A=[],_=0,k=0;k<m;k++)if(k%4){var R=x[g.charCodeAt(k-1)]<<k%4*2,C=x[g.charCodeAt(k)]>>>6-k%4*2,w=R|C;A[_>>>2]|=w<<24-_%4*8,_++}return u.create(A,_)}})(),i.enc.Base64})})(cu)),cu.exports}var uu={exports:{}},Rb=uu.exports,qm;function Nb(){return qm||(qm=1,(function(n,s){(function(i,l){n.exports=l(wt())})(Rb,function(i){return(function(){var l=i,c=l.lib,u=c.WordArray,p=l.enc;p.Base64url={stringify:function(g,m){m===void 0&&(m=!0);var x=g.words,A=g.sigBytes,_=m?this._safe_map:this._map;g.clamp();for(var k=[],R=0;R<A;R+=3)for(var C=x[R>>>2]>>>24-R%4*8&255,w=x[R+1>>>2]>>>24-(R+1)%4*8&255,B=x[R+2>>>2]>>>24-(R+2)%4*8&255,S=C<<16|w<<8|B,T=0;T<4&&R+T*.75<A;T++)k.push(_.charAt(S>>>6*(3-T)&63));var F=_.charAt(64);if(F)for(;k.length%4;)k.push(F);return k.join("")},parse:function(g,m){m===void 0&&(m=!0);var x=g.length,A=m?this._safe_map:this._map,_=this._reverseMap;if(!_){_=this._reverseMap=[];for(var k=0;k<A.length;k++)_[A.charCodeAt(k)]=k}var R=A.charAt(64);if(R){var C=g.indexOf(R);C!==-1&&(x=C)}return d(g,x,_)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function d(g,m,x){for(var A=[],_=0,k=0;k<m;k++)if(k%4){var R=x[g.charCodeAt(k-1)]<<k%4*2,C=x[g.charCodeAt(k)]>>>6-k%4*2,w=R|C;A[_>>>2]|=w<<24-_%4*8,_++}return u.create(A,_)}})(),i.enc.Base64url})})(uu)),uu.exports}var du={exports:{}},Fb=du.exports,Gm;function as(){return Gm||(Gm=1,(function(n,s){(function(i,l){n.exports=l(wt())})(Fb,function(i){return(function(l){var c=i,u=c.lib,p=u.WordArray,d=u.Hasher,g=c.algo,m=[];(function(){for(var C=0;C<64;C++)m[C]=l.abs(l.sin(C+1))*4294967296|0})();var x=g.MD5=d.extend({_doReset:function(){this._hash=new p.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(C,w){for(var B=0;B<16;B++){var S=w+B,T=C[S];C[S]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360}var F=this._hash.words,M=C[w+0],z=C[w+1],H=C[w+2],j=C[w+3],X=C[w+4],V=C[w+5],$=C[w+6],ee=C[w+7],W=C[w+8],re=C[w+9],pe=C[w+10],ie=C[w+11],Ae=C[w+12],G=C[w+13],xe=C[w+14],Z=C[w+15],N=F[0],U=F[1],K=F[2],Y=F[3];N=A(N,U,K,Y,M,7,m[0]),Y=A(Y,N,U,K,z,12,m[1]),K=A(K,Y,N,U,H,17,m[2]),U=A(U,K,Y,N,j,22,m[3]),N=A(N,U,K,Y,X,7,m[4]),Y=A(Y,N,U,K,V,12,m[5]),K=A(K,Y,N,U,$,17,m[6]),U=A(U,K,Y,N,ee,22,m[7]),N=A(N,U,K,Y,W,7,m[8]),Y=A(Y,N,U,K,re,12,m[9]),K=A(K,Y,N,U,pe,17,m[10]),U=A(U,K,Y,N,ie,22,m[11]),N=A(N,U,K,Y,Ae,7,m[12]),Y=A(Y,N,U,K,G,12,m[13]),K=A(K,Y,N,U,xe,17,m[14]),U=A(U,K,Y,N,Z,22,m[15]),N=_(N,U,K,Y,z,5,m[16]),Y=_(Y,N,U,K,$,9,m[17]),K=_(K,Y,N,U,ie,14,m[18]),U=_(U,K,Y,N,M,20,m[19]),N=_(N,U,K,Y,V,5,m[20]),Y=_(Y,N,U,K,pe,9,m[21]),K=_(K,Y,N,U,Z,14,m[22]),U=_(U,K,Y,N,X,20,m[23]),N=_(N,U,K,Y,re,5,m[24]),Y=_(Y,N,U,K,xe,9,m[25]),K=_(K,Y,N,U,j,14,m[26]),U=_(U,K,Y,N,W,20,m[27]),N=_(N,U,K,Y,G,5,m[28]),Y=_(Y,N,U,K,H,9,m[29]),K=_(K,Y,N,U,ee,14,m[30]),U=_(U,K,Y,N,Ae,20,m[31]),N=k(N,U,K,Y,V,4,m[32]),Y=k(Y,N,U,K,W,11,m[33]),K=k(K,Y,N,U,ie,16,m[34]),U=k(U,K,Y,N,xe,23,m[35]),N=k(N,U,K,Y,z,4,m[36]),Y=k(Y,N,U,K,X,11,m[37]),K=k(K,Y,N,U,ee,16,m[38]),U=k(U,K,Y,N,pe,23,m[39]),N=k(N,U,K,Y,G,4,m[40]),Y=k(Y,N,U,K,M,11,m[41]),K=k(K,Y,N,U,j,16,m[42]),U=k(U,K,Y,N,$,23,m[43]),N=k(N,U,K,Y,re,4,m[44]),Y=k(Y,N,U,K,Ae,11,m[45]),K=k(K,Y,N,U,Z,16,m[46]),U=k(U,K,Y,N,H,23,m[47]),N=R(N,U,K,Y,M,6,m[48]),Y=R(Y,N,U,K,ee,10,m[49]),K=R(K,Y,N,U,xe,15,m[50]),U=R(U,K,Y,N,V,21,m[51]),N=R(N,U,K,Y,Ae,6,m[52]),Y=R(Y,N,U,K,j,10,m[53]),K=R(K,Y,N,U,pe,15,m[54]),U=R(U,K,Y,N,z,21,m[55]),N=R(N,U,K,Y,W,6,m[56]),Y=R(Y,N,U,K,Z,10,m[57]),K=R(K,Y,N,U,$,15,m[58]),U=R(U,K,Y,N,G,21,m[59]),N=R(N,U,K,Y,X,6,m[60]),Y=R(Y,N,U,K,ie,10,m[61]),K=R(K,Y,N,U,H,15,m[62]),U=R(U,K,Y,N,re,21,m[63]),F[0]=F[0]+N|0,F[1]=F[1]+U|0,F[2]=F[2]+K|0,F[3]=F[3]+Y|0},_doFinalize:function(){var C=this._data,w=C.words,B=this._nDataBytes*8,S=C.sigBytes*8;w[S>>>5]|=128<<24-S%32;var T=l.floor(B/4294967296),F=B;w[(S+64>>>9<<4)+15]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,w[(S+64>>>9<<4)+14]=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360,C.sigBytes=(w.length+1)*4,this._process();for(var M=this._hash,z=M.words,H=0;H<4;H++){var j=z[H];z[H]=(j<<8|j>>>24)&16711935|(j<<24|j>>>8)&4278255360}return M},clone:function(){var C=d.clone.call(this);return C._hash=this._hash.clone(),C}});function A(C,w,B,S,T,F,M){var z=C+(w&B|~w&S)+T+M;return(z<<F|z>>>32-F)+w}function _(C,w,B,S,T,F,M){var z=C+(w&S|B&~S)+T+M;return(z<<F|z>>>32-F)+w}function k(C,w,B,S,T,F,M){var z=C+(w^B^S)+T+M;return(z<<F|z>>>32-F)+w}function R(C,w,B,S,T,F,M){var z=C+(B^(w|~S))+T+M;return(z<<F|z>>>32-F)+w}c.MD5=d._createHelper(x),c.HmacMD5=d._createHmacHelper(x)})(Math),i.MD5})})(du)),du.exports}var fu={exports:{}},Lb=fu.exports,$m;function YA(){return $m||($m=1,(function(n,s){(function(i,l){n.exports=l(wt())})(Lb,function(i){return(function(){var l=i,c=l.lib,u=c.WordArray,p=c.Hasher,d=l.algo,g=[],m=d.SHA1=p.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(x,A){for(var _=this._hash.words,k=_[0],R=_[1],C=_[2],w=_[3],B=_[4],S=0;S<80;S++){if(S<16)g[S]=x[A+S]|0;else{var T=g[S-3]^g[S-8]^g[S-14]^g[S-16];g[S]=T<<1|T>>>31}var F=(k<<5|k>>>27)+B+g[S];S<20?F+=(R&C|~R&w)+1518500249:S<40?F+=(R^C^w)+1859775393:S<60?F+=(R&C|R&w|C&w)-1894007588:F+=(R^C^w)-899497514,B=w,w=C,C=R<<30|R>>>2,R=k,k=F}_[0]=_[0]+k|0,_[1]=_[1]+R|0,_[2]=_[2]+C|0,_[3]=_[3]+w|0,_[4]=_[4]+B|0},_doFinalize:function(){var x=this._data,A=x.words,_=this._nDataBytes*8,k=x.sigBytes*8;return A[k>>>5]|=128<<24-k%32,A[(k+64>>>9<<4)+14]=Math.floor(_/4294967296),A[(k+64>>>9<<4)+15]=_,x.sigBytes=A.length*4,this._process(),this._hash},clone:function(){var x=p.clone.call(this);return x._hash=this._hash.clone(),x}});l.SHA1=p._createHelper(m),l.HmacSHA1=p._createHmacHelper(m)})(),i.SHA1})})(fu)),fu.exports}var hu={exports:{}},Mb=hu.exports,Km;function Bl(){return Km||(Km=1,(function(n,s){(function(i,l){n.exports=l(wt())})(Mb,function(i){return(function(l){var c=i,u=c.lib,p=u.WordArray,d=u.Hasher,g=c.algo,m=[],x=[];(function(){function k(B){for(var S=l.sqrt(B),T=2;T<=S;T++)if(!(B%T))return!1;return!0}function R(B){return(B-(B|0))*4294967296|0}for(var C=2,w=0;w<64;)k(C)&&(w<8&&(m[w]=R(l.pow(C,1/2))),x[w]=R(l.pow(C,1/3)),w++),C++})();var A=[],_=g.SHA256=d.extend({_doReset:function(){this._hash=new p.init(m.slice(0))},_doProcessBlock:function(k,R){for(var C=this._hash.words,w=C[0],B=C[1],S=C[2],T=C[3],F=C[4],M=C[5],z=C[6],H=C[7],j=0;j<64;j++){if(j<16)A[j]=k[R+j]|0;else{var X=A[j-15],V=(X<<25|X>>>7)^(X<<14|X>>>18)^X>>>3,$=A[j-2],ee=($<<15|$>>>17)^($<<13|$>>>19)^$>>>10;A[j]=V+A[j-7]+ee+A[j-16]}var W=F&M^~F&z,re=w&B^w&S^B&S,pe=(w<<30|w>>>2)^(w<<19|w>>>13)^(w<<10|w>>>22),ie=(F<<26|F>>>6)^(F<<21|F>>>11)^(F<<7|F>>>25),Ae=H+ie+W+x[j]+A[j],G=pe+re;H=z,z=M,M=F,F=T+Ae|0,T=S,S=B,B=w,w=Ae+G|0}C[0]=C[0]+w|0,C[1]=C[1]+B|0,C[2]=C[2]+S|0,C[3]=C[3]+T|0,C[4]=C[4]+F|0,C[5]=C[5]+M|0,C[6]=C[6]+z|0,C[7]=C[7]+H|0},_doFinalize:function(){var k=this._data,R=k.words,C=this._nDataBytes*8,w=k.sigBytes*8;return R[w>>>5]|=128<<24-w%32,R[(w+64>>>9<<4)+14]=l.floor(C/4294967296),R[(w+64>>>9<<4)+15]=C,k.sigBytes=R.length*4,this._process(),this._hash},clone:function(){var k=d.clone.call(this);return k._hash=this._hash.clone(),k}});c.SHA256=d._createHelper(_),c.HmacSHA256=d._createHmacHelper(_)})(Math),i.SHA256})})(hu)),hu.exports}var pu={exports:{}},Ib=pu.exports,Qm;function Ob(){return Qm||(Qm=1,(function(n,s){(function(i,l,c){n.exports=l(wt(),Bl())})(Ib,function(i){return(function(){var l=i,c=l.lib,u=c.WordArray,p=l.algo,d=p.SHA256,g=p.SHA224=d.extend({_doReset:function(){this._hash=new u.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var m=d._doFinalize.call(this);return m.sigBytes-=4,m}});l.SHA224=d._createHelper(g),l.HmacSHA224=d._createHmacHelper(g)})(),i.SHA224})})(pu)),pu.exports}var mu={exports:{}},jb=mu.exports,Ym;function XA(){return Ym||(Ym=1,(function(n,s){(function(i,l,c){n.exports=l(wt(),gd())})(jb,function(i){return(function(){var l=i,c=l.lib,u=c.Hasher,p=l.x64,d=p.Word,g=p.WordArray,m=l.algo;function x(){return d.create.apply(d,arguments)}var A=[x(1116352408,3609767458),x(1899447441,602891725),x(3049323471,3964484399),x(3921009573,2173295548),x(961987163,4081628472),x(1508970993,3053834265),x(2453635748,2937671579),x(2870763221,3664609560),x(3624381080,2734883394),x(310598401,1164996542),x(607225278,1323610764),x(1426881987,3590304994),x(1925078388,4068182383),x(2162078206,991336113),x(2614888103,633803317),x(3248222580,3479774868),x(3835390401,2666613458),x(4022224774,944711139),x(264347078,2341262773),x(604807628,2007800933),x(770255983,1495990901),x(1249150122,1856431235),x(1555081692,3175218132),x(1996064986,2198950837),x(2554220882,3999719339),x(2821834349,766784016),x(2952996808,2566594879),x(3210313671,3203337956),x(3336571891,1034457026),x(3584528711,2466948901),x(113926993,3758326383),x(338241895,168717936),x(666307205,1188179964),x(773529912,1546045734),x(1294757372,1522805485),x(1396182291,2643833823),x(1695183700,2343527390),x(1986661051,1014477480),x(2177026350,1206759142),x(2456956037,344077627),x(2730485921,1290863460),x(2820302411,3158454273),x(3259730800,3505952657),x(3345764771,106217008),x(3516065817,3606008344),x(3600352804,1432725776),x(4094571909,1467031594),x(275423344,851169720),x(430227734,3100823752),x(506948616,1363258195),x(659060556,3750685593),x(883997877,3785050280),x(958139571,3318307427),x(1322822218,3812723403),x(1537002063,2003034995),x(1747873779,3602036899),x(1955562222,1575990012),x(2024104815,1125592928),x(2227730452,2716904306),x(2361852424,442776044),x(2428436474,593698344),x(2756734187,3733110249),x(3204031479,2999351573),x(3329325298,3815920427),x(3391569614,3928383900),x(3515267271,566280711),x(3940187606,3454069534),x(4118630271,4000239992),x(116418474,1914138554),x(174292421,2731055270),x(289380356,3203993006),x(460393269,320620315),x(685471733,587496836),x(852142971,1086792851),x(1017036298,365543100),x(1126000580,2618297676),x(1288033470,3409855158),x(1501505948,4234509866),x(1607167915,987167468),x(1816402316,1246189591)],_=[];(function(){for(var R=0;R<80;R++)_[R]=x()})();var k=m.SHA512=u.extend({_doReset:function(){this._hash=new g.init([new d.init(1779033703,4089235720),new d.init(3144134277,2227873595),new d.init(1013904242,4271175723),new d.init(2773480762,1595750129),new d.init(1359893119,2917565137),new d.init(2600822924,725511199),new d.init(528734635,4215389547),new d.init(1541459225,327033209)])},_doProcessBlock:function(R,C){for(var w=this._hash.words,B=w[0],S=w[1],T=w[2],F=w[3],M=w[4],z=w[5],H=w[6],j=w[7],X=B.high,V=B.low,$=S.high,ee=S.low,W=T.high,re=T.low,pe=F.high,ie=F.low,Ae=M.high,G=M.low,xe=z.high,Z=z.low,N=H.high,U=H.low,K=j.high,Y=j.low,fe=X,me=V,Se=$,we=ee,de=W,he=re,Ze=pe,Fe=ie,ge=Ae,Le=G,We=xe,lt=Z,et=N,Ne=U,Ue=K,ot=Y,tt=0;tt<80;tt++){var oe,Re,qe=_[tt];if(tt<16)Re=qe.high=R[C+tt*2]|0,oe=qe.low=R[C+tt*2+1]|0;else{var ve=_[tt-15],Me=ve.high,yt=ve.low,Pt=(Me>>>1|yt<<31)^(Me>>>8|yt<<24)^Me>>>7,Nt=(yt>>>1|Me<<31)^(yt>>>8|Me<<24)^(yt>>>7|Me<<25),Wt=_[tt-2],Ft=Wt.high,Et=Wt.low,An=(Ft>>>19|Et<<13)^(Ft<<3|Et>>>29)^Ft>>>6,Cn=(Et>>>19|Ft<<13)^(Et<<3|Ft>>>29)^(Et>>>6|Ft<<26),ye=_[tt-7],Pe=ye.high,ze=ye.low,mt=_[tt-16],ne=mt.high,_e=mt.low;oe=Nt+ze,Re=Pt+Pe+(oe>>>0<Nt>>>0?1:0),oe=oe+Cn,Re=Re+An+(oe>>>0<Cn>>>0?1:0),oe=oe+_e,Re=Re+ne+(oe>>>0<_e>>>0?1:0),qe.high=Re,qe.low=oe}var Ee=ge&We^~ge&et,Oe=Le&lt^~Le&Ne,st=fe&Se^fe&de^Se&de,He=me&we^me&he^we&he,kt=(fe>>>28|me<<4)^(fe<<30|me>>>2)^(fe<<25|me>>>7),Ot=(me>>>28|fe<<4)^(me<<30|fe>>>2)^(me<<25|fe>>>7),qt=(ge>>>14|Le<<18)^(ge>>>18|Le<<14)^(ge<<23|Le>>>9),Hn=(Le>>>14|ge<<18)^(Le>>>18|ge<<14)^(Le<<23|ge>>>9),gt=A[tt],Lt=gt.high,Yn=gt.low,St=ot+Hn,Gt=Ue+qt+(St>>>0<ot>>>0?1:0),St=St+Oe,Gt=Gt+Ee+(St>>>0<Oe>>>0?1:0),St=St+Yn,Gt=Gt+Lt+(St>>>0<Yn>>>0?1:0),St=St+oe,Gt=Gt+Re+(St>>>0<oe>>>0?1:0),Jt=Ot+He,je=kt+st+(Jt>>>0<Ot>>>0?1:0);Ue=et,ot=Ne,et=We,Ne=lt,We=ge,lt=Le,Le=Fe+St|0,ge=Ze+Gt+(Le>>>0<Fe>>>0?1:0)|0,Ze=de,Fe=he,de=Se,he=we,Se=fe,we=me,me=St+Jt|0,fe=Gt+je+(me>>>0<St>>>0?1:0)|0}V=B.low=V+me,B.high=X+fe+(V>>>0<me>>>0?1:0),ee=S.low=ee+we,S.high=$+Se+(ee>>>0<we>>>0?1:0),re=T.low=re+he,T.high=W+de+(re>>>0<he>>>0?1:0),ie=F.low=ie+Fe,F.high=pe+Ze+(ie>>>0<Fe>>>0?1:0),G=M.low=G+Le,M.high=Ae+ge+(G>>>0<Le>>>0?1:0),Z=z.low=Z+lt,z.high=xe+We+(Z>>>0<lt>>>0?1:0),U=H.low=U+Ne,H.high=N+et+(U>>>0<Ne>>>0?1:0),Y=j.low=Y+ot,j.high=K+Ue+(Y>>>0<ot>>>0?1:0)},_doFinalize:function(){var R=this._data,C=R.words,w=this._nDataBytes*8,B=R.sigBytes*8;C[B>>>5]|=128<<24-B%32,C[(B+128>>>10<<5)+30]=Math.floor(w/4294967296),C[(B+128>>>10<<5)+31]=w,R.sigBytes=C.length*4,this._process();var S=this._hash.toX32();return S},clone:function(){var R=u.clone.call(this);return R._hash=this._hash.clone(),R},blockSize:1024/32});l.SHA512=u._createHelper(k),l.HmacSHA512=u._createHmacHelper(k)})(),i.SHA512})})(mu)),mu.exports}var gu={exports:{}},zb=gu.exports,Xm;function Hb(){return Xm||(Xm=1,(function(n,s){(function(i,l,c){n.exports=l(wt(),gd(),XA())})(zb,function(i){return(function(){var l=i,c=l.x64,u=c.Word,p=c.WordArray,d=l.algo,g=d.SHA512,m=d.SHA384=g.extend({_doReset:function(){this._hash=new p.init([new u.init(3418070365,3238371032),new u.init(1654270250,914150663),new u.init(2438529370,812702999),new u.init(355462360,4144912697),new u.init(1731405415,4290775857),new u.init(2394180231,1750603025),new u.init(3675008525,1694076839),new u.init(1203062813,3204075428)])},_doFinalize:function(){var x=g._doFinalize.call(this);return x.sigBytes-=16,x}});l.SHA384=g._createHelper(m),l.HmacSHA384=g._createHmacHelper(m)})(),i.SHA384})})(gu)),gu.exports}var xu={exports:{}},Vb=xu.exports,Jm;function Ub(){return Jm||(Jm=1,(function(n,s){(function(i,l,c){n.exports=l(wt(),gd())})(Vb,function(i){return(function(l){var c=i,u=c.lib,p=u.WordArray,d=u.Hasher,g=c.x64,m=g.Word,x=c.algo,A=[],_=[],k=[];(function(){for(var w=1,B=0,S=0;S<24;S++){A[w+5*B]=(S+1)*(S+2)/2%64;var T=B%5,F=(2*w+3*B)%5;w=T,B=F}for(var w=0;w<5;w++)for(var B=0;B<5;B++)_[w+5*B]=B+(2*w+3*B)%5*5;for(var M=1,z=0;z<24;z++){for(var H=0,j=0,X=0;X<7;X++){if(M&1){var V=(1<<X)-1;V<32?j^=1<<V:H^=1<<V-32}M&128?M=M<<1^113:M<<=1}k[z]=m.create(H,j)}})();var R=[];(function(){for(var w=0;w<25;w++)R[w]=m.create()})();var C=x.SHA3=d.extend({cfg:d.cfg.extend({outputLength:512}),_doReset:function(){for(var w=this._state=[],B=0;B<25;B++)w[B]=new m.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(w,B){for(var S=this._state,T=this.blockSize/2,F=0;F<T;F++){var M=w[B+2*F],z=w[B+2*F+1];M=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360,z=(z<<8|z>>>24)&16711935|(z<<24|z>>>8)&4278255360;var H=S[F];H.high^=z,H.low^=M}for(var j=0;j<24;j++){for(var X=0;X<5;X++){for(var V=0,$=0,ee=0;ee<5;ee++){var H=S[X+5*ee];V^=H.high,$^=H.low}var W=R[X];W.high=V,W.low=$}for(var X=0;X<5;X++)for(var re=R[(X+4)%5],pe=R[(X+1)%5],ie=pe.high,Ae=pe.low,V=re.high^(ie<<1|Ae>>>31),$=re.low^(Ae<<1|ie>>>31),ee=0;ee<5;ee++){var H=S[X+5*ee];H.high^=V,H.low^=$}for(var G=1;G<25;G++){var V,$,H=S[G],xe=H.high,Z=H.low,N=A[G];N<32?(V=xe<<N|Z>>>32-N,$=Z<<N|xe>>>32-N):(V=Z<<N-32|xe>>>64-N,$=xe<<N-32|Z>>>64-N);var U=R[_[G]];U.high=V,U.low=$}var K=R[0],Y=S[0];K.high=Y.high,K.low=Y.low;for(var X=0;X<5;X++)for(var ee=0;ee<5;ee++){var G=X+5*ee,H=S[G],fe=R[G],me=R[(X+1)%5+5*ee],Se=R[(X+2)%5+5*ee];H.high=fe.high^~me.high&Se.high,H.low=fe.low^~me.low&Se.low}var H=S[0],we=k[j];H.high^=we.high,H.low^=we.low}},_doFinalize:function(){var w=this._data,B=w.words;this._nDataBytes*8;var S=w.sigBytes*8,T=this.blockSize*32;B[S>>>5]|=1<<24-S%32,B[(l.ceil((S+1)/T)*T>>>5)-1]|=128,w.sigBytes=B.length*4,this._process();for(var F=this._state,M=this.cfg.outputLength/8,z=M/8,H=[],j=0;j<z;j++){var X=F[j],V=X.high,$=X.low;V=(V<<8|V>>>24)&16711935|(V<<24|V>>>8)&4278255360,$=($<<8|$>>>24)&16711935|($<<24|$>>>8)&4278255360,H.push($),H.push(V)}return new p.init(H,M)},clone:function(){for(var w=d.clone.call(this),B=w._state=this._state.slice(0),S=0;S<25;S++)B[S]=B[S].clone();return w}});c.SHA3=d._createHelper(C),c.HmacSHA3=d._createHmacHelper(C)})(Math),i.SHA3})})(xu)),xu.exports}var Au={exports:{}},Zb=Au.exports,eg;function Wb(){return eg||(eg=1,(function(n,s){(function(i,l){n.exports=l(wt())})(Zb,function(i){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return(function(l){var c=i,u=c.lib,p=u.WordArray,d=u.Hasher,g=c.algo,m=p.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),x=p.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),A=p.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),_=p.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),k=p.create([0,1518500249,1859775393,2400959708,2840853838]),R=p.create([1352829926,1548603684,1836072691,2053994217,0]),C=g.RIPEMD160=d.extend({_doReset:function(){this._hash=p.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(z,H){for(var j=0;j<16;j++){var X=H+j,V=z[X];z[X]=(V<<8|V>>>24)&16711935|(V<<24|V>>>8)&4278255360}var $=this._hash.words,ee=k.words,W=R.words,re=m.words,pe=x.words,ie=A.words,Ae=_.words,G,xe,Z,N,U,K,Y,fe,me,Se;K=G=$[0],Y=xe=$[1],fe=Z=$[2],me=N=$[3],Se=U=$[4];for(var we,j=0;j<80;j+=1)we=G+z[H+re[j]]|0,j<16?we+=w(xe,Z,N)+ee[0]:j<32?we+=B(xe,Z,N)+ee[1]:j<48?we+=S(xe,Z,N)+ee[2]:j<64?we+=T(xe,Z,N)+ee[3]:we+=F(xe,Z,N)+ee[4],we=we|0,we=M(we,ie[j]),we=we+U|0,G=U,U=N,N=M(Z,10),Z=xe,xe=we,we=K+z[H+pe[j]]|0,j<16?we+=F(Y,fe,me)+W[0]:j<32?we+=T(Y,fe,me)+W[1]:j<48?we+=S(Y,fe,me)+W[2]:j<64?we+=B(Y,fe,me)+W[3]:we+=w(Y,fe,me)+W[4],we=we|0,we=M(we,Ae[j]),we=we+Se|0,K=Se,Se=me,me=M(fe,10),fe=Y,Y=we;we=$[1]+Z+me|0,$[1]=$[2]+N+Se|0,$[2]=$[3]+U+K|0,$[3]=$[4]+G+Y|0,$[4]=$[0]+xe+fe|0,$[0]=we},_doFinalize:function(){var z=this._data,H=z.words,j=this._nDataBytes*8,X=z.sigBytes*8;H[X>>>5]|=128<<24-X%32,H[(X+64>>>9<<4)+14]=(j<<8|j>>>24)&16711935|(j<<24|j>>>8)&4278255360,z.sigBytes=(H.length+1)*4,this._process();for(var V=this._hash,$=V.words,ee=0;ee<5;ee++){var W=$[ee];$[ee]=(W<<8|W>>>24)&16711935|(W<<24|W>>>8)&4278255360}return V},clone:function(){var z=d.clone.call(this);return z._hash=this._hash.clone(),z}});function w(z,H,j){return z^H^j}function B(z,H,j){return z&H|~z&j}function S(z,H,j){return(z|~H)^j}function T(z,H,j){return z&j|H&~j}function F(z,H,j){return z^(H|~j)}function M(z,H){return z<<H|z>>>32-H}c.RIPEMD160=d._createHelper(C),c.HmacRIPEMD160=d._createHmacHelper(C)})(),i.RIPEMD160})})(Au)),Au.exports}var vu={exports:{}},qb=vu.exports,tg;function xd(){return tg||(tg=1,(function(n,s){(function(i,l){n.exports=l(wt())})(qb,function(i){(function(){var l=i,c=l.lib,u=c.Base,p=l.enc,d=p.Utf8,g=l.algo;g.HMAC=u.extend({init:function(m,x){m=this._hasher=new m.init,typeof x=="string"&&(x=d.parse(x));var A=m.blockSize,_=A*4;x.sigBytes>_&&(x=m.finalize(x)),x.clamp();for(var k=this._oKey=x.clone(),R=this._iKey=x.clone(),C=k.words,w=R.words,B=0;B<A;B++)C[B]^=1549556828,w[B]^=909522486;k.sigBytes=R.sigBytes=_,this.reset()},reset:function(){var m=this._hasher;m.reset(),m.update(this._iKey)},update:function(m){return this._hasher.update(m),this},finalize:function(m){var x=this._hasher,A=x.finalize(m);x.reset();var _=x.finalize(this._oKey.clone().concat(A));return _}})})()})})(vu)),vu.exports}var yu={exports:{}},Gb=yu.exports,ng;function $b(){return ng||(ng=1,(function(n,s){(function(i,l,c){n.exports=l(wt(),Bl(),xd())})(Gb,function(i){return(function(){var l=i,c=l.lib,u=c.Base,p=c.WordArray,d=l.algo,g=d.SHA256,m=d.HMAC,x=d.PBKDF2=u.extend({cfg:u.extend({keySize:128/32,hasher:g,iterations:25e4}),init:function(A){this.cfg=this.cfg.extend(A)},compute:function(A,_){for(var k=this.cfg,R=m.create(k.hasher,A),C=p.create(),w=p.create([1]),B=C.words,S=w.words,T=k.keySize,F=k.iterations;B.length<T;){var M=R.update(_).finalize(w);R.reset();for(var z=M.words,H=z.length,j=M,X=1;X<F;X++){j=R.finalize(j),R.reset();for(var V=j.words,$=0;$<H;$++)z[$]^=V[$]}C.concat(M),S[0]++}return C.sigBytes=T*4,C}});l.PBKDF2=function(A,_,k){return x.create(k).compute(A,_)}})(),i.PBKDF2})})(yu)),yu.exports}var _u={exports:{}},Kb=_u.exports,rg;function vo(){return rg||(rg=1,(function(n,s){(function(i,l,c){n.exports=l(wt(),YA(),xd())})(Kb,function(i){return(function(){var l=i,c=l.lib,u=c.Base,p=c.WordArray,d=l.algo,g=d.MD5,m=d.EvpKDF=u.extend({cfg:u.extend({keySize:128/32,hasher:g,iterations:1}),init:function(x){this.cfg=this.cfg.extend(x)},compute:function(x,A){for(var _,k=this.cfg,R=k.hasher.create(),C=p.create(),w=C.words,B=k.keySize,S=k.iterations;w.length<B;){_&&R.update(_),_=R.update(x).finalize(A),R.reset();for(var T=1;T<S;T++)_=R.finalize(_),R.reset();C.concat(_)}return C.sigBytes=B*4,C}});l.EvpKDF=function(x,A,_){return m.create(_).compute(x,A)}})(),i.EvpKDF})})(_u)),_u.exports}var wu={exports:{}},Qb=wu.exports,ig;function xn(){return ig||(ig=1,(function(n,s){(function(i,l,c){n.exports=l(wt(),vo())})(Qb,function(i){i.lib.Cipher||(function(l){var c=i,u=c.lib,p=u.Base,d=u.WordArray,g=u.BufferedBlockAlgorithm,m=c.enc;m.Utf8;var x=m.Base64,A=c.algo,_=A.EvpKDF,k=u.Cipher=g.extend({cfg:p.extend(),createEncryptor:function(V,$){return this.create(this._ENC_XFORM_MODE,V,$)},createDecryptor:function(V,$){return this.create(this._DEC_XFORM_MODE,V,$)},init:function(V,$,ee){this.cfg=this.cfg.extend(ee),this._xformMode=V,this._key=$,this.reset()},reset:function(){g.reset.call(this),this._doReset()},process:function(V){return this._append(V),this._process()},finalize:function(V){V&&this._append(V);var $=this._doFinalize();return $},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:(function(){function V($){return typeof $=="string"?X:z}return function($){return{encrypt:function(ee,W,re){return V(W).encrypt($,ee,W,re)},decrypt:function(ee,W,re){return V(W).decrypt($,ee,W,re)}}}})()});u.StreamCipher=k.extend({_doFinalize:function(){var V=this._process(!0);return V},blockSize:1});var R=c.mode={},C=u.BlockCipherMode=p.extend({createEncryptor:function(V,$){return this.Encryptor.create(V,$)},createDecryptor:function(V,$){return this.Decryptor.create(V,$)},init:function(V,$){this._cipher=V,this._iv=$}}),w=R.CBC=(function(){var V=C.extend();V.Encryptor=V.extend({processBlock:function(ee,W){var re=this._cipher,pe=re.blockSize;$.call(this,ee,W,pe),re.encryptBlock(ee,W),this._prevBlock=ee.slice(W,W+pe)}}),V.Decryptor=V.extend({processBlock:function(ee,W){var re=this._cipher,pe=re.blockSize,ie=ee.slice(W,W+pe);re.decryptBlock(ee,W),$.call(this,ee,W,pe),this._prevBlock=ie}});function $(ee,W,re){var pe,ie=this._iv;ie?(pe=ie,this._iv=l):pe=this._prevBlock;for(var Ae=0;Ae<re;Ae++)ee[W+Ae]^=pe[Ae]}return V})(),B=c.pad={},S=B.Pkcs7={pad:function(V,$){for(var ee=$*4,W=ee-V.sigBytes%ee,re=W<<24|W<<16|W<<8|W,pe=[],ie=0;ie<W;ie+=4)pe.push(re);var Ae=d.create(pe,W);V.concat(Ae)},unpad:function(V){var $=V.words[V.sigBytes-1>>>2]&255;V.sigBytes-=$}};u.BlockCipher=k.extend({cfg:k.cfg.extend({mode:w,padding:S}),reset:function(){var V;k.reset.call(this);var $=this.cfg,ee=$.iv,W=$.mode;this._xformMode==this._ENC_XFORM_MODE?V=W.createEncryptor:(V=W.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==V?this._mode.init(this,ee&&ee.words):(this._mode=V.call(W,this,ee&&ee.words),this._mode.__creator=V)},_doProcessBlock:function(V,$){this._mode.processBlock(V,$)},_doFinalize:function(){var V,$=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?($.pad(this._data,this.blockSize),V=this._process(!0)):(V=this._process(!0),$.unpad(V)),V},blockSize:128/32});var T=u.CipherParams=p.extend({init:function(V){this.mixIn(V)},toString:function(V){return(V||this.formatter).stringify(this)}}),F=c.format={},M=F.OpenSSL={stringify:function(V){var $,ee=V.ciphertext,W=V.salt;return W?$=d.create([1398893684,1701076831]).concat(W).concat(ee):$=ee,$.toString(x)},parse:function(V){var $,ee=x.parse(V),W=ee.words;return W[0]==1398893684&&W[1]==1701076831&&($=d.create(W.slice(2,4)),W.splice(0,4),ee.sigBytes-=16),T.create({ciphertext:ee,salt:$})}},z=u.SerializableCipher=p.extend({cfg:p.extend({format:M}),encrypt:function(V,$,ee,W){W=this.cfg.extend(W);var re=V.createEncryptor(ee,W),pe=re.finalize($),ie=re.cfg;return T.create({ciphertext:pe,key:ee,iv:ie.iv,algorithm:V,mode:ie.mode,padding:ie.padding,blockSize:V.blockSize,formatter:W.format})},decrypt:function(V,$,ee,W){W=this.cfg.extend(W),$=this._parse($,W.format);var re=V.createDecryptor(ee,W).finalize($.ciphertext);return re},_parse:function(V,$){return typeof V=="string"?$.parse(V,this):V}}),H=c.kdf={},j=H.OpenSSL={execute:function(V,$,ee,W,re){if(W||(W=d.random(64/8)),re)var pe=_.create({keySize:$+ee,hasher:re}).compute(V,W);else var pe=_.create({keySize:$+ee}).compute(V,W);var ie=d.create(pe.words.slice($),ee*4);return pe.sigBytes=$*4,T.create({key:pe,iv:ie,salt:W})}},X=u.PasswordBasedCipher=z.extend({cfg:z.cfg.extend({kdf:j}),encrypt:function(V,$,ee,W){W=this.cfg.extend(W);var re=W.kdf.execute(ee,V.keySize,V.ivSize,W.salt,W.hasher);W.iv=re.iv;var pe=z.encrypt.call(this,V,$,re.key,W);return pe.mixIn(re),pe},decrypt:function(V,$,ee,W){W=this.cfg.extend(W),$=this._parse($,W.format);var re=W.kdf.execute(ee,V.keySize,V.ivSize,$.salt,W.hasher);W.iv=re.iv;var pe=z.decrypt.call(this,V,$,re.key,W);return pe}})})()})})(wu)),wu.exports}var bu={exports:{}},Yb=bu.exports,og;function Xb(){return og||(og=1,(function(n,s){(function(i,l,c){n.exports=l(wt(),xn())})(Yb,function(i){return i.mode.CFB=(function(){var l=i.lib.BlockCipherMode.extend();l.Encryptor=l.extend({processBlock:function(u,p){var d=this._cipher,g=d.blockSize;c.call(this,u,p,g,d),this._prevBlock=u.slice(p,p+g)}}),l.Decryptor=l.extend({processBlock:function(u,p){var d=this._cipher,g=d.blockSize,m=u.slice(p,p+g);c.call(this,u,p,g,d),this._prevBlock=m}});function c(u,p,d,g){var m,x=this._iv;x?(m=x.slice(0),this._iv=void 0):m=this._prevBlock,g.encryptBlock(m,0);for(var A=0;A<d;A++)u[p+A]^=m[A]}return l})(),i.mode.CFB})})(bu)),bu.exports}var Cu={exports:{}},Jb=Cu.exports,sg;function eC(){return sg||(sg=1,(function(n,s){(function(i,l,c){n.exports=l(wt(),xn())})(Jb,function(i){return i.mode.CTR=(function(){var l=i.lib.BlockCipherMode.extend(),c=l.Encryptor=l.extend({processBlock:function(u,p){var d=this._cipher,g=d.blockSize,m=this._iv,x=this._counter;m&&(x=this._counter=m.slice(0),this._iv=void 0);var A=x.slice(0);d.encryptBlock(A,0),x[g-1]=x[g-1]+1|0;for(var _=0;_<g;_++)u[p+_]^=A[_]}});return l.Decryptor=c,l})(),i.mode.CTR})})(Cu)),Cu.exports}var Eu={exports:{}},tC=Eu.exports,ag;function nC(){return ag||(ag=1,(function(n,s){(function(i,l,c){n.exports=l(wt(),xn())})(tC,function(i){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return i.mode.CTRGladman=(function(){var l=i.lib.BlockCipherMode.extend();function c(d){if((d>>24&255)===255){var g=d>>16&255,m=d>>8&255,x=d&255;g===255?(g=0,m===255?(m=0,x===255?x=0:++x):++m):++g,d=0,d+=g<<16,d+=m<<8,d+=x}else d+=1<<24;return d}function u(d){return(d[0]=c(d[0]))===0&&(d[1]=c(d[1])),d}var p=l.Encryptor=l.extend({processBlock:function(d,g){var m=this._cipher,x=m.blockSize,A=this._iv,_=this._counter;A&&(_=this._counter=A.slice(0),this._iv=void 0),u(_);var k=_.slice(0);m.encryptBlock(k,0);for(var R=0;R<x;R++)d[g+R]^=k[R]}});return l.Decryptor=p,l})(),i.mode.CTRGladman})})(Eu)),Eu.exports}var ku={exports:{}},rC=ku.exports,lg;function iC(){return lg||(lg=1,(function(n,s){(function(i,l,c){n.exports=l(wt(),xn())})(rC,function(i){return i.mode.OFB=(function(){var l=i.lib.BlockCipherMode.extend(),c=l.Encryptor=l.extend({processBlock:function(u,p){var d=this._cipher,g=d.blockSize,m=this._iv,x=this._keystream;m&&(x=this._keystream=m.slice(0),this._iv=void 0),d.encryptBlock(x,0);for(var A=0;A<g;A++)u[p+A]^=x[A]}});return l.Decryptor=c,l})(),i.mode.OFB})})(ku)),ku.exports}var Su={exports:{}},oC=Su.exports,cg;function sC(){return cg||(cg=1,(function(n,s){(function(i,l,c){n.exports=l(wt(),xn())})(oC,function(i){return i.mode.ECB=(function(){var l=i.lib.BlockCipherMode.extend();return l.Encryptor=l.extend({processBlock:function(c,u){this._cipher.encryptBlock(c,u)}}),l.Decryptor=l.extend({processBlock:function(c,u){this._cipher.decryptBlock(c,u)}}),l})(),i.mode.ECB})})(Su)),Su.exports}var Bu={exports:{}},aC=Bu.exports,ug;function lC(){return ug||(ug=1,(function(n,s){(function(i,l,c){n.exports=l(wt(),xn())})(aC,function(i){return i.pad.AnsiX923={pad:function(l,c){var u=l.sigBytes,p=c*4,d=p-u%p,g=u+d-1;l.clamp(),l.words[g>>>2]|=d<<24-g%4*8,l.sigBytes+=d},unpad:function(l){var c=l.words[l.sigBytes-1>>>2]&255;l.sigBytes-=c}},i.pad.Ansix923})})(Bu)),Bu.exports}var Pu={exports:{}},cC=Pu.exports,dg;function uC(){return dg||(dg=1,(function(n,s){(function(i,l,c){n.exports=l(wt(),xn())})(cC,function(i){return i.pad.Iso10126={pad:function(l,c){var u=c*4,p=u-l.sigBytes%u;l.concat(i.lib.WordArray.random(p-1)).concat(i.lib.WordArray.create([p<<24],1))},unpad:function(l){var c=l.words[l.sigBytes-1>>>2]&255;l.sigBytes-=c}},i.pad.Iso10126})})(Pu)),Pu.exports}var Tu={exports:{}},dC=Tu.exports,fg;function fC(){return fg||(fg=1,(function(n,s){(function(i,l,c){n.exports=l(wt(),xn())})(dC,function(i){return i.pad.Iso97971={pad:function(l,c){l.concat(i.lib.WordArray.create([2147483648],1)),i.pad.ZeroPadding.pad(l,c)},unpad:function(l){i.pad.ZeroPadding.unpad(l),l.sigBytes--}},i.pad.Iso97971})})(Tu)),Tu.exports}var Du={exports:{}},hC=Du.exports,hg;function pC(){return hg||(hg=1,(function(n,s){(function(i,l,c){n.exports=l(wt(),xn())})(hC,function(i){return i.pad.ZeroPadding={pad:function(l,c){var u=c*4;l.clamp(),l.sigBytes+=u-(l.sigBytes%u||u)},unpad:function(l){for(var c=l.words,u=l.sigBytes-1,u=l.sigBytes-1;u>=0;u--)if(c[u>>>2]>>>24-u%4*8&255){l.sigBytes=u+1;break}}},i.pad.ZeroPadding})})(Du)),Du.exports}var Ru={exports:{}},mC=Ru.exports,pg;function gC(){return pg||(pg=1,(function(n,s){(function(i,l,c){n.exports=l(wt(),xn())})(mC,function(i){return i.pad.NoPadding={pad:function(){},unpad:function(){}},i.pad.NoPadding})})(Ru)),Ru.exports}var Nu={exports:{}},xC=Nu.exports,mg;function AC(){return mg||(mg=1,(function(n,s){(function(i,l,c){n.exports=l(wt(),xn())})(xC,function(i){return(function(l){var c=i,u=c.lib,p=u.CipherParams,d=c.enc,g=d.Hex,m=c.format;m.Hex={stringify:function(x){return x.ciphertext.toString(g)},parse:function(x){var A=g.parse(x);return p.create({ciphertext:A})}}})(),i.format.Hex})})(Nu)),Nu.exports}var Fu={exports:{}},vC=Fu.exports,gg;function yC(){return gg||(gg=1,(function(n,s){(function(i,l,c){n.exports=l(wt(),ss(),as(),vo(),xn())})(vC,function(i){return(function(){var l=i,c=l.lib,u=c.BlockCipher,p=l.algo,d=[],g=[],m=[],x=[],A=[],_=[],k=[],R=[],C=[],w=[];(function(){for(var T=[],F=0;F<256;F++)F<128?T[F]=F<<1:T[F]=F<<1^283;for(var M=0,z=0,F=0;F<256;F++){var H=z^z<<1^z<<2^z<<3^z<<4;H=H>>>8^H&255^99,d[M]=H,g[H]=M;var j=T[M],X=T[j],V=T[X],$=T[H]*257^H*16843008;m[M]=$<<24|$>>>8,x[M]=$<<16|$>>>16,A[M]=$<<8|$>>>24,_[M]=$;var $=V*16843009^X*65537^j*257^M*16843008;k[H]=$<<24|$>>>8,R[H]=$<<16|$>>>16,C[H]=$<<8|$>>>24,w[H]=$,M?(M=j^T[T[T[V^j]]],z^=T[T[z]]):M=z=1}})();var B=[0,1,2,4,8,16,32,64,128,27,54],S=p.AES=u.extend({_doReset:function(){var T;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var F=this._keyPriorReset=this._key,M=F.words,z=F.sigBytes/4,H=this._nRounds=z+6,j=(H+1)*4,X=this._keySchedule=[],V=0;V<j;V++)V<z?X[V]=M[V]:(T=X[V-1],V%z?z>6&&V%z==4&&(T=d[T>>>24]<<24|d[T>>>16&255]<<16|d[T>>>8&255]<<8|d[T&255]):(T=T<<8|T>>>24,T=d[T>>>24]<<24|d[T>>>16&255]<<16|d[T>>>8&255]<<8|d[T&255],T^=B[V/z|0]<<24),X[V]=X[V-z]^T);for(var $=this._invKeySchedule=[],ee=0;ee<j;ee++){var V=j-ee;if(ee%4)var T=X[V];else var T=X[V-4];ee<4||V<=4?$[ee]=T:$[ee]=k[d[T>>>24]]^R[d[T>>>16&255]]^C[d[T>>>8&255]]^w[d[T&255]]}}},encryptBlock:function(T,F){this._doCryptBlock(T,F,this._keySchedule,m,x,A,_,d)},decryptBlock:function(T,F){var M=T[F+1];T[F+1]=T[F+3],T[F+3]=M,this._doCryptBlock(T,F,this._invKeySchedule,k,R,C,w,g);var M=T[F+1];T[F+1]=T[F+3],T[F+3]=M},_doCryptBlock:function(T,F,M,z,H,j,X,V){for(var $=this._nRounds,ee=T[F]^M[0],W=T[F+1]^M[1],re=T[F+2]^M[2],pe=T[F+3]^M[3],ie=4,Ae=1;Ae<$;Ae++){var G=z[ee>>>24]^H[W>>>16&255]^j[re>>>8&255]^X[pe&255]^M[ie++],xe=z[W>>>24]^H[re>>>16&255]^j[pe>>>8&255]^X[ee&255]^M[ie++],Z=z[re>>>24]^H[pe>>>16&255]^j[ee>>>8&255]^X[W&255]^M[ie++],N=z[pe>>>24]^H[ee>>>16&255]^j[W>>>8&255]^X[re&255]^M[ie++];ee=G,W=xe,re=Z,pe=N}var G=(V[ee>>>24]<<24|V[W>>>16&255]<<16|V[re>>>8&255]<<8|V[pe&255])^M[ie++],xe=(V[W>>>24]<<24|V[re>>>16&255]<<16|V[pe>>>8&255]<<8|V[ee&255])^M[ie++],Z=(V[re>>>24]<<24|V[pe>>>16&255]<<16|V[ee>>>8&255]<<8|V[W&255])^M[ie++],N=(V[pe>>>24]<<24|V[ee>>>16&255]<<16|V[W>>>8&255]<<8|V[re&255])^M[ie++];T[F]=G,T[F+1]=xe,T[F+2]=Z,T[F+3]=N},keySize:256/32});l.AES=u._createHelper(S)})(),i.AES})})(Fu)),Fu.exports}var Lu={exports:{}},_C=Lu.exports,xg;function wC(){return xg||(xg=1,(function(n,s){(function(i,l,c){n.exports=l(wt(),ss(),as(),vo(),xn())})(_C,function(i){return(function(){var l=i,c=l.lib,u=c.WordArray,p=c.BlockCipher,d=l.algo,g=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],m=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],x=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],A=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],_=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],k=d.DES=p.extend({_doReset:function(){for(var B=this._key,S=B.words,T=[],F=0;F<56;F++){var M=g[F]-1;T[F]=S[M>>>5]>>>31-M%32&1}for(var z=this._subKeys=[],H=0;H<16;H++){for(var j=z[H]=[],X=x[H],F=0;F<24;F++)j[F/6|0]|=T[(m[F]-1+X)%28]<<31-F%6,j[4+(F/6|0)]|=T[28+(m[F+24]-1+X)%28]<<31-F%6;j[0]=j[0]<<1|j[0]>>>31;for(var F=1;F<7;F++)j[F]=j[F]>>>(F-1)*4+3;j[7]=j[7]<<5|j[7]>>>27}for(var V=this._invSubKeys=[],F=0;F<16;F++)V[F]=z[15-F]},encryptBlock:function(B,S){this._doCryptBlock(B,S,this._subKeys)},decryptBlock:function(B,S){this._doCryptBlock(B,S,this._invSubKeys)},_doCryptBlock:function(B,S,T){this._lBlock=B[S],this._rBlock=B[S+1],R.call(this,4,252645135),R.call(this,16,65535),C.call(this,2,858993459),C.call(this,8,16711935),R.call(this,1,1431655765);for(var F=0;F<16;F++){for(var M=T[F],z=this._lBlock,H=this._rBlock,j=0,X=0;X<8;X++)j|=A[X][((H^M[X])&_[X])>>>0];this._lBlock=H,this._rBlock=z^j}var V=this._lBlock;this._lBlock=this._rBlock,this._rBlock=V,R.call(this,1,1431655765),C.call(this,8,16711935),C.call(this,2,858993459),R.call(this,16,65535),R.call(this,4,252645135),B[S]=this._lBlock,B[S+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function R(B,S){var T=(this._lBlock>>>B^this._rBlock)&S;this._rBlock^=T,this._lBlock^=T<<B}function C(B,S){var T=(this._rBlock>>>B^this._lBlock)&S;this._lBlock^=T,this._rBlock^=T<<B}l.DES=p._createHelper(k);var w=d.TripleDES=p.extend({_doReset:function(){var B=this._key,S=B.words;if(S.length!==2&&S.length!==4&&S.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var T=S.slice(0,2),F=S.length<4?S.slice(0,2):S.slice(2,4),M=S.length<6?S.slice(0,2):S.slice(4,6);this._des1=k.createEncryptor(u.create(T)),this._des2=k.createEncryptor(u.create(F)),this._des3=k.createEncryptor(u.create(M))},encryptBlock:function(B,S){this._des1.encryptBlock(B,S),this._des2.decryptBlock(B,S),this._des3.encryptBlock(B,S)},decryptBlock:function(B,S){this._des3.decryptBlock(B,S),this._des2.encryptBlock(B,S),this._des1.decryptBlock(B,S)},keySize:192/32,ivSize:64/32,blockSize:64/32});l.TripleDES=p._createHelper(w)})(),i.TripleDES})})(Lu)),Lu.exports}var Mu={exports:{}},bC=Mu.exports,Ag;function CC(){return Ag||(Ag=1,(function(n,s){(function(i,l,c){n.exports=l(wt(),ss(),as(),vo(),xn())})(bC,function(i){return(function(){var l=i,c=l.lib,u=c.StreamCipher,p=l.algo,d=p.RC4=u.extend({_doReset:function(){for(var x=this._key,A=x.words,_=x.sigBytes,k=this._S=[],R=0;R<256;R++)k[R]=R;for(var R=0,C=0;R<256;R++){var w=R%_,B=A[w>>>2]>>>24-w%4*8&255;C=(C+k[R]+B)%256;var S=k[R];k[R]=k[C],k[C]=S}this._i=this._j=0},_doProcessBlock:function(x,A){x[A]^=g.call(this)},keySize:256/32,ivSize:0});function g(){for(var x=this._S,A=this._i,_=this._j,k=0,R=0;R<4;R++){A=(A+1)%256,_=(_+x[A])%256;var C=x[A];x[A]=x[_],x[_]=C,k|=x[(x[A]+x[_])%256]<<24-R*8}return this._i=A,this._j=_,k}l.RC4=u._createHelper(d);var m=p.RC4Drop=d.extend({cfg:d.cfg.extend({drop:192}),_doReset:function(){d._doReset.call(this);for(var x=this.cfg.drop;x>0;x--)g.call(this)}});l.RC4Drop=u._createHelper(m)})(),i.RC4})})(Mu)),Mu.exports}var Iu={exports:{}},EC=Iu.exports,vg;function kC(){return vg||(vg=1,(function(n,s){(function(i,l,c){n.exports=l(wt(),ss(),as(),vo(),xn())})(EC,function(i){return(function(){var l=i,c=l.lib,u=c.StreamCipher,p=l.algo,d=[],g=[],m=[],x=p.Rabbit=u.extend({_doReset:function(){for(var _=this._key.words,k=this.cfg.iv,R=0;R<4;R++)_[R]=(_[R]<<8|_[R]>>>24)&16711935|(_[R]<<24|_[R]>>>8)&4278255360;var C=this._X=[_[0],_[3]<<16|_[2]>>>16,_[1],_[0]<<16|_[3]>>>16,_[2],_[1]<<16|_[0]>>>16,_[3],_[2]<<16|_[1]>>>16],w=this._C=[_[2]<<16|_[2]>>>16,_[0]&4294901760|_[1]&65535,_[3]<<16|_[3]>>>16,_[1]&4294901760|_[2]&65535,_[0]<<16|_[0]>>>16,_[2]&4294901760|_[3]&65535,_[1]<<16|_[1]>>>16,_[3]&4294901760|_[0]&65535];this._b=0;for(var R=0;R<4;R++)A.call(this);for(var R=0;R<8;R++)w[R]^=C[R+4&7];if(k){var B=k.words,S=B[0],T=B[1],F=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,M=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,z=F>>>16|M&4294901760,H=M<<16|F&65535;w[0]^=F,w[1]^=z,w[2]^=M,w[3]^=H,w[4]^=F,w[5]^=z,w[6]^=M,w[7]^=H;for(var R=0;R<4;R++)A.call(this)}},_doProcessBlock:function(_,k){var R=this._X;A.call(this),d[0]=R[0]^R[5]>>>16^R[3]<<16,d[1]=R[2]^R[7]>>>16^R[5]<<16,d[2]=R[4]^R[1]>>>16^R[7]<<16,d[3]=R[6]^R[3]>>>16^R[1]<<16;for(var C=0;C<4;C++)d[C]=(d[C]<<8|d[C]>>>24)&16711935|(d[C]<<24|d[C]>>>8)&4278255360,_[k+C]^=d[C]},blockSize:128/32,ivSize:64/32});function A(){for(var _=this._X,k=this._C,R=0;R<8;R++)g[R]=k[R];k[0]=k[0]+1295307597+this._b|0,k[1]=k[1]+3545052371+(k[0]>>>0<g[0]>>>0?1:0)|0,k[2]=k[2]+886263092+(k[1]>>>0<g[1]>>>0?1:0)|0,k[3]=k[3]+1295307597+(k[2]>>>0<g[2]>>>0?1:0)|0,k[4]=k[4]+3545052371+(k[3]>>>0<g[3]>>>0?1:0)|0,k[5]=k[5]+886263092+(k[4]>>>0<g[4]>>>0?1:0)|0,k[6]=k[6]+1295307597+(k[5]>>>0<g[5]>>>0?1:0)|0,k[7]=k[7]+3545052371+(k[6]>>>0<g[6]>>>0?1:0)|0,this._b=k[7]>>>0<g[7]>>>0?1:0;for(var R=0;R<8;R++){var C=_[R]+k[R],w=C&65535,B=C>>>16,S=((w*w>>>17)+w*B>>>15)+B*B,T=((C&4294901760)*C|0)+((C&65535)*C|0);m[R]=S^T}_[0]=m[0]+(m[7]<<16|m[7]>>>16)+(m[6]<<16|m[6]>>>16)|0,_[1]=m[1]+(m[0]<<8|m[0]>>>24)+m[7]|0,_[2]=m[2]+(m[1]<<16|m[1]>>>16)+(m[0]<<16|m[0]>>>16)|0,_[3]=m[3]+(m[2]<<8|m[2]>>>24)+m[1]|0,_[4]=m[4]+(m[3]<<16|m[3]>>>16)+(m[2]<<16|m[2]>>>16)|0,_[5]=m[5]+(m[4]<<8|m[4]>>>24)+m[3]|0,_[6]=m[6]+(m[5]<<16|m[5]>>>16)+(m[4]<<16|m[4]>>>16)|0,_[7]=m[7]+(m[6]<<8|m[6]>>>24)+m[5]|0}l.Rabbit=u._createHelper(x)})(),i.Rabbit})})(Iu)),Iu.exports}var Ou={exports:{}},SC=Ou.exports,yg;function BC(){return yg||(yg=1,(function(n,s){(function(i,l,c){n.exports=l(wt(),ss(),as(),vo(),xn())})(SC,function(i){return(function(){var l=i,c=l.lib,u=c.StreamCipher,p=l.algo,d=[],g=[],m=[],x=p.RabbitLegacy=u.extend({_doReset:function(){var _=this._key.words,k=this.cfg.iv,R=this._X=[_[0],_[3]<<16|_[2]>>>16,_[1],_[0]<<16|_[3]>>>16,_[2],_[1]<<16|_[0]>>>16,_[3],_[2]<<16|_[1]>>>16],C=this._C=[_[2]<<16|_[2]>>>16,_[0]&4294901760|_[1]&65535,_[3]<<16|_[3]>>>16,_[1]&4294901760|_[2]&65535,_[0]<<16|_[0]>>>16,_[2]&4294901760|_[3]&65535,_[1]<<16|_[1]>>>16,_[3]&4294901760|_[0]&65535];this._b=0;for(var w=0;w<4;w++)A.call(this);for(var w=0;w<8;w++)C[w]^=R[w+4&7];if(k){var B=k.words,S=B[0],T=B[1],F=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,M=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,z=F>>>16|M&4294901760,H=M<<16|F&65535;C[0]^=F,C[1]^=z,C[2]^=M,C[3]^=H,C[4]^=F,C[5]^=z,C[6]^=M,C[7]^=H;for(var w=0;w<4;w++)A.call(this)}},_doProcessBlock:function(_,k){var R=this._X;A.call(this),d[0]=R[0]^R[5]>>>16^R[3]<<16,d[1]=R[2]^R[7]>>>16^R[5]<<16,d[2]=R[4]^R[1]>>>16^R[7]<<16,d[3]=R[6]^R[3]>>>16^R[1]<<16;for(var C=0;C<4;C++)d[C]=(d[C]<<8|d[C]>>>24)&16711935|(d[C]<<24|d[C]>>>8)&4278255360,_[k+C]^=d[C]},blockSize:128/32,ivSize:64/32});function A(){for(var _=this._X,k=this._C,R=0;R<8;R++)g[R]=k[R];k[0]=k[0]+1295307597+this._b|0,k[1]=k[1]+3545052371+(k[0]>>>0<g[0]>>>0?1:0)|0,k[2]=k[2]+886263092+(k[1]>>>0<g[1]>>>0?1:0)|0,k[3]=k[3]+1295307597+(k[2]>>>0<g[2]>>>0?1:0)|0,k[4]=k[4]+3545052371+(k[3]>>>0<g[3]>>>0?1:0)|0,k[5]=k[5]+886263092+(k[4]>>>0<g[4]>>>0?1:0)|0,k[6]=k[6]+1295307597+(k[5]>>>0<g[5]>>>0?1:0)|0,k[7]=k[7]+3545052371+(k[6]>>>0<g[6]>>>0?1:0)|0,this._b=k[7]>>>0<g[7]>>>0?1:0;for(var R=0;R<8;R++){var C=_[R]+k[R],w=C&65535,B=C>>>16,S=((w*w>>>17)+w*B>>>15)+B*B,T=((C&4294901760)*C|0)+((C&65535)*C|0);m[R]=S^T}_[0]=m[0]+(m[7]<<16|m[7]>>>16)+(m[6]<<16|m[6]>>>16)|0,_[1]=m[1]+(m[0]<<8|m[0]>>>24)+m[7]|0,_[2]=m[2]+(m[1]<<16|m[1]>>>16)+(m[0]<<16|m[0]>>>16)|0,_[3]=m[3]+(m[2]<<8|m[2]>>>24)+m[1]|0,_[4]=m[4]+(m[3]<<16|m[3]>>>16)+(m[2]<<16|m[2]>>>16)|0,_[5]=m[5]+(m[4]<<8|m[4]>>>24)+m[3]|0,_[6]=m[6]+(m[5]<<16|m[5]>>>16)+(m[4]<<16|m[4]>>>16)|0,_[7]=m[7]+(m[6]<<8|m[6]>>>24)+m[5]|0}l.RabbitLegacy=u._createHelper(x)})(),i.RabbitLegacy})})(Ou)),Ou.exports}var ju={exports:{}},PC=ju.exports,_g;function TC(){return _g||(_g=1,(function(n,s){(function(i,l,c){n.exports=l(wt(),ss(),as(),vo(),xn())})(PC,function(i){return(function(){var l=i,c=l.lib,u=c.BlockCipher,p=l.algo;const d=16,g=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],m=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var x={pbox:[],sbox:[]};function A(w,B){let S=B>>24&255,T=B>>16&255,F=B>>8&255,M=B&255,z=w.sbox[0][S]+w.sbox[1][T];return z=z^w.sbox[2][F],z=z+w.sbox[3][M],z}function _(w,B,S){let T=B,F=S,M;for(let z=0;z<d;++z)T=T^w.pbox[z],F=A(w,T)^F,M=T,T=F,F=M;return M=T,T=F,F=M,F=F^w.pbox[d],T=T^w.pbox[d+1],{left:T,right:F}}function k(w,B,S){let T=B,F=S,M;for(let z=d+1;z>1;--z)T=T^w.pbox[z],F=A(w,T)^F,M=T,T=F,F=M;return M=T,T=F,F=M,F=F^w.pbox[1],T=T^w.pbox[0],{left:T,right:F}}function R(w,B,S){for(let H=0;H<4;H++){w.sbox[H]=[];for(let j=0;j<256;j++)w.sbox[H][j]=m[H][j]}let T=0;for(let H=0;H<d+2;H++)w.pbox[H]=g[H]^B[T],T++,T>=S&&(T=0);let F=0,M=0,z=0;for(let H=0;H<d+2;H+=2)z=_(w,F,M),F=z.left,M=z.right,w.pbox[H]=F,w.pbox[H+1]=M;for(let H=0;H<4;H++)for(let j=0;j<256;j+=2)z=_(w,F,M),F=z.left,M=z.right,w.sbox[H][j]=F,w.sbox[H][j+1]=M;return!0}var C=p.Blowfish=u.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var w=this._keyPriorReset=this._key,B=w.words,S=w.sigBytes/4;R(x,B,S)}},encryptBlock:function(w,B){var S=_(x,w[B],w[B+1]);w[B]=S.left,w[B+1]=S.right},decryptBlock:function(w,B){var S=k(x,w[B],w[B+1]);w[B]=S.left,w[B+1]=S.right},blockSize:64/32,keySize:128/32,ivSize:64/32});l.Blowfish=u._createHelper(C)})(),i.Blowfish})})(ju)),ju.exports}var DC=iu.exports,wg;function JA(){return wg||(wg=1,(function(n,s){(function(i,l,c){n.exports=l(wt(),gd(),Bb(),Tb(),ss(),Nb(),as(),YA(),Bl(),Ob(),XA(),Hb(),Ub(),Wb(),xd(),$b(),vo(),xn(),Xb(),eC(),nC(),iC(),sC(),lC(),uC(),fC(),pC(),gC(),AC(),yC(),wC(),CC(),kC(),BC(),TC())})(DC,function(i){return i})})(iu)),iu.exports}var bg;function J0(){if(bg)return il;bg=1,Object.defineProperty(il,"__esModule",{value:!0}),il.ChannelCrypto=void 0;const n=JA(),s=bn();class i{static decryptGroupTextMessage(c,u,p){try{const d=(0,s.hexToBytes)(p),g=(0,s.hexToBytes)(u),m=new Uint8Array(32);m.set(d,0);const x=(0,n.HmacSHA256)(n.enc.Hex.parse(c),n.enc.Hex.parse((0,s.bytesToHex)(m))),_=(0,s.hexToBytes)(x.toString(n.enc.Hex)).slice(0,2);if(_[0]!==g[0]||_[1]!==g[1])return{success:!1,error:"MAC verification failed"};const k=n.enc.Hex.parse(p),R=n.enc.Hex.parse(c),C=n.AES.decrypt(n.lib.CipherParams.create({ciphertext:R}),k,{mode:n.mode.ECB,padding:n.pad.NoPadding}),w=(0,s.hexToBytes)(C.toString(n.enc.Hex));if(!w||w.length<5)return{success:!1,error:"Decrypted content too short"};const B=w[0]|w[1]<<8|w[2]<<16|w[3]<<24,S=w[4],T=w.slice(5);let M=new TextDecoder("utf-8").decode(T);const z=M.indexOf("\0");z>=0&&(M=M.substring(0,z));const H=M.indexOf(": ");let j,X;if(H>0&&H<50){const V=M.substring(0,H);/[:\[\]]/.test(V)?X=M:(j=V,X=M.substring(H+2))}else X=M;return{success:!0,data:{timestamp:B,flags:S,sender:j,message:X}}}catch(d){return{success:!1,error:d instanceof Error?d.message:"Decryption failed"}}}static calculateChannelHash(c){const u=(0,n.SHA256)(n.enc.Hex.parse(c));return(0,s.hexToBytes)(u.toString(n.enc.Hex))[0].toString(16).padStart(2,"0")}}return il.ChannelCrypto=i,il}var Cg;function ev(){if(Cg)return rl;Cg=1,Object.defineProperty(rl,"__esModule",{value:!0}),rl.MeshCoreKeyStore=void 0;const n=J0();class s{constructor(l){this.nodeKeys=new Map,this.channelHashToKeys=new Map,l!=null&&l.channelSecrets&&this.addChannelSecrets(l.channelSecrets),l!=null&&l.nodeKeys&&Object.entries(l.nodeKeys).forEach(([c,u])=>{this.addNodeKey(c,u)})}addNodeKey(l,c){const u=l.toUpperCase();this.nodeKeys.set(u,c)}hasChannelKey(l){const c=l.toLowerCase();return this.channelHashToKeys.has(c)}hasNodeKey(l){const c=l.toUpperCase();return this.nodeKeys.has(c)}getChannelKeys(l){const c=l.toLowerCase();return this.channelHashToKeys.get(c)||[]}getNodeKey(l){const c=l.toUpperCase();return this.nodeKeys.get(c)}addChannelSecrets(l){for(const c of l){const u=n.ChannelCrypto.calculateChannelHash(c).toLowerCase();this.channelHashToKeys.has(u)||this.channelHashToKeys.set(u,[]),this.channelHashToKeys.get(u).push(c)}}}return rl.MeshCoreKeyStore=s,rl}var ol={},Ir={};/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const tv={p:0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,n:0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3edn,h:8n,a:0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffecn,d:0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3n,Gx:0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51an,Gy:0x6666666666666666666666666666666666666666666666666666666666666658n},{p:Rn,n:zu,Gx:Eg,Gy:kg,a:d0,d:f0}=tv,RC=8n,oi=32,wl=64,cr=(n="")=>{throw new Error(n)},NC=n=>typeof n=="bigint",nv=n=>typeof n=="string",FC=n=>n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array",is=(n,s)=>!FC(n)||typeof s=="number"&&s>0&&n.length!==s?cr("Uint8Array expected"):n,Ad=n=>new Uint8Array(n),eh=n=>Uint8Array.from(n),rv=(n,s)=>n.toString(16).padStart(s,"0"),th=n=>Array.from(is(n)).map(s=>rv(s,2)).join(""),Pi={_0:48,_9:57,A:65,F:70,a:97,f:102},Sg=n=>{if(n>=Pi._0&&n<=Pi._9)return n-Pi._0;if(n>=Pi.A&&n<=Pi.F)return n-(Pi.A-10);if(n>=Pi.a&&n<=Pi.f)return n-(Pi.a-10)},nh=n=>{const s="hex invalid";if(!nv(n))return cr(s);const i=n.length,l=i/2;if(i%2)return cr(s);const c=Ad(l);for(let u=0,p=0;u<l;u++,p+=2){const d=Sg(n.charCodeAt(p)),g=Sg(n.charCodeAt(p+1));if(d===void 0||g===void 0)return cr(s);c[u]=d*16+g}return c},Ao=(n,s)=>is(nv(n)?nh(n):eh(is(n)),s),iv=()=>globalThis==null?void 0:globalThis.crypto,LC=()=>{var n;return((n=iv())==null?void 0:n.subtle)??cr("crypto.subtle must be defined")},bl=(...n)=>{const s=Ad(n.reduce((l,c)=>l+is(c).length,0));let i=0;return n.forEach(l=>{s.set(l,i),i+=l.length}),s},ov=(n=oi)=>iv().getRandomValues(Ad(n)),Qu=BigInt,Jo=(n,s,i,l="bad number: out of range")=>NC(n)&&s<=n&&n<i?n:cr(l),Ye=(n,s=Rn)=>{const i=n%s;return i>=0n?i:s+i},sv=n=>Ye(n,zu),av=(n,s)=>{(n===0n||s<=0n)&&cr("no inverse n="+n+" mod="+s);let i=Ye(n,s),l=s,c=0n,u=1n;for(;i!==0n;){const p=l/i,d=l%i,g=c-u*p;l=i,i=d,c=u,u=g}return l===1n?Ye(c,s):cr("no inverse")},MC=n=>{const s=ch[n];return typeof s!="function"&&cr("hashes."+n+" not set"),s},Bg=n=>n instanceof zr?n:cr("Point expected"),k0=2n**256n,ri=class ri{constructor(s,i,l,c){Wo(this,"ex");Wo(this,"ey");Wo(this,"ez");Wo(this,"et");const u=k0;this.ex=Jo(s,0n,u),this.ey=Jo(i,0n,u),this.ez=Jo(l,1n,u),this.et=Jo(c,0n,u),Object.freeze(this)}static fromAffine(s){return new ri(s.x,s.y,1n,Ye(s.x*s.y))}static fromBytes(s,i=!1){const l=f0,c=eh(is(s,oi)),u=s[31];c[31]=u&-129;const p=rh(c);Jo(p,0n,i?k0:Rn);const g=Ye(p*p),m=Ye(g-1n),x=Ye(l*g+1n);let{isValid:A,value:_}=OC(m,x);A||cr("bad point: y not sqrt");const k=(_&1n)===1n,R=(u&128)!==0;return!i&&_===0n&&R&&cr("bad point: x==0, isLastByteOdd"),R!==k&&(_=Ye(-_)),new ri(_,p,1n,Ye(_*p))}assertValidity(){const s=d0,i=f0,l=this;if(l.is0())throw new Error("bad point: ZERO");const{ex:c,ey:u,ez:p,et:d}=l,g=Ye(c*c),m=Ye(u*u),x=Ye(p*p),A=Ye(x*x),_=Ye(g*s),k=Ye(x*Ye(_+m)),R=Ye(A+Ye(i*Ye(g*m)));if(k!==R)throw new Error("bad point: equation left != right (1)");const C=Ye(c*u),w=Ye(p*d);if(C!==w)throw new Error("bad point: equation left != right (2)");return this}equals(s){const{ex:i,ey:l,ez:c}=this,{ex:u,ey:p,ez:d}=Bg(s),g=Ye(i*d),m=Ye(u*c),x=Ye(l*d),A=Ye(p*c);return g===m&&x===A}is0(){return this.equals(Js)}negate(){return new ri(Ye(-this.ex),this.ey,this.ez,Ye(-this.et))}double(){const{ex:s,ey:i,ez:l}=this,c=d0,u=Ye(s*s),p=Ye(i*i),d=Ye(2n*Ye(l*l)),g=Ye(c*u),m=s+i,x=Ye(Ye(m*m)-u-p),A=g+p,_=A-d,k=g-p,R=Ye(x*_),C=Ye(A*k),w=Ye(x*k),B=Ye(_*A);return new ri(R,C,B,w)}add(s){const{ex:i,ey:l,ez:c,et:u}=this,{ex:p,ey:d,ez:g,et:m}=Bg(s),x=d0,A=f0,_=Ye(i*p),k=Ye(l*d),R=Ye(u*A*m),C=Ye(c*g),w=Ye((i+l)*(p+d)-_-k),B=Ye(C-R),S=Ye(C+R),T=Ye(k-x*_),F=Ye(w*B),M=Ye(S*T),z=Ye(w*T),H=Ye(B*S);return new ri(F,M,H,z)}multiply(s,i=!0){if(!i&&(s===0n||this.is0()))return Js;if(Jo(s,1n,zu),s===1n)return this;if(this.equals(Di))return $C(s).p;let l=Js,c=Di;for(let u=this;s>0n;u=u.double(),s>>=1n)s&1n?l=l.add(u):i&&(c=c.add(u));return l}toAffine(){const{ex:s,ey:i,ez:l}=this;if(this.equals(Js))return{x:0n,y:1n};const c=av(l,Rn);return Ye(l*c)!==1n&&cr("invalid inverse"),{x:Ye(s*c),y:Ye(i*c)}}toBytes(){const{x:s,y:i}=this.assertValidity().toAffine(),l=lv(i);return l[31]|=s&1n?128:0,l}toHex(){return th(this.toBytes())}clearCofactor(){return this.multiply(Qu(RC),!1)}isSmallOrder(){return this.clearCofactor().is0()}isTorsionFree(){let s=this.multiply(zu/2n,!1).double();return zu%2n&&(s=s.add(this)),s.is0()}static fromHex(s,i){return ri.fromBytes(Ao(s),i)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}toRawBytes(){return this.toBytes()}};Wo(ri,"BASE"),Wo(ri,"ZERO");let zr=ri;const Di=new zr(Eg,kg,1n,Ye(Eg*kg)),Js=new zr(0n,1n,1n,0n);zr.BASE=Di;zr.ZERO=Js;const lv=n=>nh(rv(Jo(n,0n,k0),wl)).reverse(),rh=n=>Qu("0x"+th(eh(is(n)).reverse())),ti=(n,s)=>{let i=n;for(;s-- >0n;)i*=i,i%=Rn;return i},IC=n=>{const i=n*n%Rn*n%Rn,l=ti(i,2n)*i%Rn,c=ti(l,1n)*n%Rn,u=ti(c,5n)*c%Rn,p=ti(u,10n)*u%Rn,d=ti(p,20n)*p%Rn,g=ti(d,40n)*d%Rn,m=ti(g,80n)*g%Rn,x=ti(m,80n)*g%Rn,A=ti(x,10n)*u%Rn;return{pow_p_5_8:ti(A,2n)*n%Rn,b2:i}},Pg=0x2b8324804fc1df0b2b4d00993dfbd7a72f431806ad2fe478c4ee1b274a0ea0b0n,OC=(n,s)=>{const i=Ye(s*s*s),l=Ye(i*i*s),c=IC(n*l).pow_p_5_8;let u=Ye(n*i*c);const p=Ye(s*u*u),d=u,g=Ye(u*Pg),m=p===n,x=p===Ye(-n),A=p===Ye(-n*Pg);return m&&(u=d),(x||A)&&(u=g),(Ye(u)&1n)===1n&&(u=Ye(-u)),{isValid:m||x,value:u}},Yu=n=>sv(rh(n)),ih=(...n)=>ch.sha512Async(...n),oh=(...n)=>MC("sha512Sync")(...n),cv=n=>{const s=n.slice(0,oi);s[0]&=248,s[31]&=127,s[31]|=64;const i=n.slice(oi,wl),l=Yu(s),c=Di.multiply(l),u=c.toBytes();return{head:s,prefix:i,scalar:l,point:c,pointBytes:u}},sh=n=>ih(Ao(n,oi)).then(cv),ah=n=>cv(oh(Ao(n,oi))),jC=n=>sh(n).then(s=>s.pointBytes),zC=n=>ah(n).pointBytes,uv=n=>ih(n.hashable).then(n.finish),dv=n=>n.finish(oh(n.hashable)),fv=(n,s,i)=>{const{pointBytes:l,scalar:c}=n,u=Yu(s),p=Di.multiply(u).toBytes();return{hashable:bl(p,l,i),finish:m=>{const x=sv(u+Yu(m)*c);return is(bl(p,lv(x)),wl)}}},HC=async(n,s)=>{const i=Ao(n),l=await sh(s),c=await ih(l.prefix,i);return uv(fv(l,c,i))},VC=(n,s)=>{const i=Ao(n),l=ah(s),c=oh(l.prefix,i);return dv(fv(l,c,i))},lh={zip215:!0},hv=(n,s,i,l=lh)=>{n=Ao(n,wl),s=Ao(s),i=Ao(i,oi);const{zip215:c}=l;let u,p,d,g,m=Uint8Array.of();try{u=zr.fromHex(i,c),p=zr.fromHex(n.slice(0,oi),c),d=rh(n.slice(oi,wl)),g=Di.multiply(d,!1),m=bl(p.toBytes(),u.toBytes(),s)}catch{}return{hashable:m,finish:A=>{if(g==null||!c&&u.isSmallOrder())return!1;const _=Yu(A);return p.add(u.multiply(_,!1)).add(g.negate()).clearCofactor().is0()}}},UC=async(n,s,i,l=lh)=>uv(hv(n,s,i,l)),ZC=(n,s,i,l=lh)=>dv(hv(n,s,i,l)),ch={sha512Async:async(...n)=>{const s=LC(),i=bl(...n);return Ad(await s.digest("SHA-512",i.buffer))},sha512Sync:void 0,bytesToHex:th,hexToBytes:nh,concatBytes:bl,mod:Ye,invert:av,randomBytes:ov},WC={getExtendedPublicKeyAsync:sh,getExtendedPublicKey:ah,randomPrivateKey:()=>ov(oi),precompute:(n=8,s=Di)=>(s.multiply(3n),s)},Xu=8,qC=256,pv=Math.ceil(qC/Xu)+1,S0=2**(Xu-1),GC=()=>{const n=[];let s=Di,i=s;for(let l=0;l<pv;l++){i=s,n.push(i);for(let c=1;c<S0;c++)i=i.add(s),n.push(i);s=i.double()}return n};let Tg;const Dg=(n,s)=>{const i=s.negate();return n?i:s},$C=n=>{const s=Tg||(Tg=GC());let i=Js,l=Di;const c=2**Xu,u=c,p=Qu(c-1),d=Qu(Xu);for(let g=0;g<pv;g++){let m=Number(n&p);n>>=d,m>S0&&(m-=u,n+=1n);const x=g*S0,A=x,_=x+Math.abs(m)-1,k=g%2!==0,R=m<0;m===0?l=l.add(Dg(k,s[A])):i=i.add(Dg(R,s[_]))}return{p:i,f:l}},KC=Object.freeze(Object.defineProperty({__proto__:null,CURVE:tv,ExtendedPoint:zr,Point:zr,etc:ch,getPublicKey:zC,getPublicKeyAsync:jC,sign:VC,signAsync:HC,utils:WC,verify:ZC,verifyAsync:UC},Symbol.toStringTag,{value:"Module"})),QC=gx(KC);var Ko={},h0={exports:{}},Rg;function YC(){return Rg||(Rg=1,(function(n,s){var i=(()=>{var c;var l=typeof document<"u"?(c=document.currentScript)==null?void 0:c.src:void 0;return(async function(u={}){var Cn;var p,d=u,g=typeof window=="object",m=typeof WorkerGlobalScope<"u",x=typeof process=="object"&&((Cn=process.versions)==null?void 0:Cn.node)&&process.type!="renderer";typeof __filename<"u"?l=__filename:m&&(l=self.location.href);var A="";function _(ye){return d.locateFile?d.locateFile(ye,A):A+ye}var k,R;if(x){var C=Ku;A=__dirname+"/",R=ye=>{ye=T(ye)?new URL(ye):ye;var Pe=C.readFileSync(ye);return Pe},k=async(ye,Pe=!0)=>{ye=T(ye)?new URL(ye):ye;var ze=C.readFileSync(ye,Pe?void 0:"utf8");return ze},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2)}else if(g||m){try{A=new URL(".",l).href}catch{}m&&(R=ye=>{var Pe=new XMLHttpRequest;return Pe.open("GET",ye,!1),Pe.responseType="arraybuffer",Pe.send(null),new Uint8Array(Pe.response)}),k=async ye=>{if(T(ye))return new Promise((ze,mt)=>{var ne=new XMLHttpRequest;ne.open("GET",ye,!0),ne.responseType="arraybuffer",ne.onload=()=>{if(ne.status==200||ne.status==0&&ne.response){ze(ne.response);return}mt(ne.status)},ne.onerror=mt,ne.send(null)});var Pe=await fetch(ye,{credentials:"same-origin"});if(Pe.ok)return Pe.arrayBuffer();throw new Error(Pe.status+" : "+Pe.url)}}console.log.bind(console);var w=console.error.bind(console),B,S=!1,T=ye=>ye.startsWith("file://"),F,M,z,H,j,X=!1;function V(){var ye=z.buffer;d.HEAP8=H=new Int8Array(ye),d.HEAPU8=j=new Uint8Array(ye),d.HEAP32=new Int32Array(ye),d.HEAPU32=new Uint32Array(ye),new BigInt64Array(ye),new BigUint64Array(ye)}function $(){if(d.preRun)for(typeof d.preRun=="function"&&(d.preRun=[d.preRun]);d.preRun.length;)Ze(d.preRun.shift());Se(he)}function ee(){X=!0,Ft.b()}function W(){if(d.postRun)for(typeof d.postRun=="function"&&(d.postRun=[d.postRun]);d.postRun.length;)de(d.postRun.shift());Se(we)}var re=0,pe=null;function ie(ye){var Pe;re++,(Pe=d.monitorRunDependencies)==null||Pe.call(d,re)}function Ae(ye){var ze;if(re--,(ze=d.monitorRunDependencies)==null||ze.call(d,re),re==0&&pe){var Pe=pe;pe=null,Pe()}}function G(ye){var ze;(ze=d.onAbort)==null||ze.call(d,ye),ye="Aborted("+ye+")",w(ye),S=!0,ye+=". Build with -sASSERTIONS for more info.";var Pe=new WebAssembly.RuntimeError(ye);throw M==null||M(Pe),Pe}var xe;function Z(){return _("orlp-ed25519.wasm")}function N(ye){if(ye==xe&&B)return new Uint8Array(B);if(R)return R(ye);throw"both async and sync fetching of the wasm failed"}async function U(ye){if(!B)try{var Pe=await k(ye);return new Uint8Array(Pe)}catch{}return N(ye)}async function K(ye,Pe){try{var ze=await U(ye),mt=await WebAssembly.instantiate(ze,Pe);return mt}catch(ne){w(`failed to asynchronously prepare wasm: ${ne}`),G(ne)}}async function Y(ye,Pe,ze){if(!ye&&typeof WebAssembly.instantiateStreaming=="function"&&!T(Pe)&&!x)try{var mt=fetch(Pe,{credentials:"same-origin"}),ne=await WebAssembly.instantiateStreaming(mt,ze);return ne}catch(_e){w(`wasm streaming compile failed: ${_e}`),w("falling back to ArrayBuffer instantiation")}return K(Pe,ze)}function fe(){return{a:Wt}}async function me(){function ye(_e,Ee){return Ft=_e.exports,z=Ft.a,V(),Nt(Ft),Ae(),Ft}ie();function Pe(_e){return ye(_e.instance)}var ze=fe();if(d.instantiateWasm)return new Promise((_e,Ee)=>{d.instantiateWasm(ze,(Oe,st)=>{_e(ye(Oe))})});xe??(xe=Z());var mt=await Y(B,xe,ze),ne=Pe(mt);return ne}var Se=ye=>{for(;ye.length>0;)ye.shift()(d)},we=[],de=ye=>we.push(ye),he=[],Ze=ye=>he.push(ye),Fe=ye=>Me(ye),ge=()=>Pt(),Le=ye=>{var Pe=d["_"+ye];return Pe},We=(ye,Pe)=>{H.set(ye,Pe)},lt=ye=>{for(var Pe=0,ze=0;ze<ye.length;++ze){var mt=ye.charCodeAt(ze);mt<=127?Pe++:mt<=2047?Pe+=2:mt>=55296&&mt<=57343?(Pe+=4,++ze):Pe+=3}return Pe},et=(ye,Pe,ze,mt)=>{if(!(mt>0))return 0;for(var ne=ze,_e=ze+mt-1,Ee=0;Ee<ye.length;++Ee){var Oe=ye.codePointAt(Ee);if(Oe<=127){if(ze>=_e)break;Pe[ze++]=Oe}else if(Oe<=2047){if(ze+1>=_e)break;Pe[ze++]=192|Oe>>6,Pe[ze++]=128|Oe&63}else if(Oe<=65535){if(ze+2>=_e)break;Pe[ze++]=224|Oe>>12,Pe[ze++]=128|Oe>>6&63,Pe[ze++]=128|Oe&63}else{if(ze+3>=_e)break;Pe[ze++]=240|Oe>>18,Pe[ze++]=128|Oe>>12&63,Pe[ze++]=128|Oe>>6&63,Pe[ze++]=128|Oe&63,Ee++}}return Pe[ze]=0,ze-ne},Ne=(ye,Pe,ze)=>et(ye,j,Pe,ze),Ue=ye=>yt(ye),ot=ye=>{var Pe=lt(ye)+1,ze=Ue(Pe);return Ne(ye,ze,Pe),ze},tt=typeof TextDecoder<"u"?new TextDecoder:void 0,oe=(ye,Pe=0,ze=NaN)=>{for(var mt=Pe+ze,ne=Pe;ye[ne]&&!(ne>=mt);)++ne;if(ne-Pe>16&&ye.buffer&&tt)return tt.decode(ye.subarray(Pe,ne));for(var _e="";Pe<ne;){var Ee=ye[Pe++];if(!(Ee&128)){_e+=String.fromCharCode(Ee);continue}var Oe=ye[Pe++]&63;if((Ee&224)==192){_e+=String.fromCharCode((Ee&31)<<6|Oe);continue}var st=ye[Pe++]&63;if((Ee&240)==224?Ee=(Ee&15)<<12|Oe<<6|st:Ee=(Ee&7)<<18|Oe<<12|st<<6|ye[Pe++]&63,Ee<65536)_e+=String.fromCharCode(Ee);else{var He=Ee-65536;_e+=String.fromCharCode(55296|He>>10,56320|He&1023)}}return _e},Re=(ye,Pe)=>ye?oe(j,ye,Pe):"",qe=(ye,Pe,ze,mt,ne)=>{var _e={string:gt=>{var Lt=0;return gt!=null&&gt!==0&&(Lt=ot(gt)),Lt},array:gt=>{var Lt=Ue(gt.length);return We(gt,Lt),Lt}};function Ee(gt){return Pe==="string"?Re(gt):Pe==="boolean"?!!gt:gt}var Oe=Le(ye),st=[],He=0;if(mt)for(var kt=0;kt<mt.length;kt++){var Ot=_e[ze[kt]];Ot?(He===0&&(He=ge()),st[kt]=Ot(mt[kt])):st[kt]=mt[kt]}var qt=Oe(...st);function Hn(gt){return He!==0&&Fe(He),Ee(gt)}return qt=Hn(qt),qt},ve=(ye,Pe,ze,mt)=>{var ne=!ze||ze.every(Ee=>Ee==="number"||Ee==="boolean"),_e=Pe!=="string";return _e&&ne&&!mt?Le(ye):(...Ee)=>qe(ye,Pe,ze,Ee)};d.noExitRuntime&&d.noExitRuntime,d.print&&d.print,d.printErr&&(w=d.printErr),d.wasmBinary&&(B=d.wasmBinary),d.arguments&&d.arguments,d.thisProgram&&d.thisProgram,d.ccall=qe,d.cwrap=ve;var Me,yt,Pt;function Nt(ye){d._orlp_derive_public_key=ye.c,d._orlp_validate_keypair=ye.d,d._orlp_sign=ye.e,d._orlp_verify=ye.f,Me=ye.g,yt=ye.h,Pt=ye.i}var Wt={},Ft=await me();function Et(){if(re>0){pe=Et;return}if($(),re>0){pe=Et;return}function ye(){var Pe;d.calledRun=!0,!S&&(ee(),F==null||F(d),(Pe=d.onRuntimeInitialized)==null||Pe.call(d),W())}d.setStatus?(d.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>d.setStatus(""),1),ye()},1)):ye()}function An(){if(d.preInit)for(typeof d.preInit=="function"&&(d.preInit=[d.preInit]);d.preInit.length>0;)d.preInit.shift()()}return An(),Et(),X?p=d:p=new Promise((ye,Pe)=>{F=ye,M=Pe}),p})})();n.exports=i,n.exports.default=i})(h0)),h0.exports}var Ng;function uh(){if(Ng)return Ko;Ng=1,Object.defineProperty(Ko,"__esModule",{value:!0}),Ko.derivePublicKey=l,Ko.validateKeyPair=c,Ko.sign=u,Ko.verify=p;const n=bn(),s=YC();async function i(){return await s()}async function l(d){const g=await i(),m=(0,n.hexToBytes)(d);if(m.length!==64)throw new Error(`Invalid private key length: expected 64 bytes, got ${m.length}`);const x=1024,A=1088;if(g.HEAPU8.set(m,x),g.ccall("orlp_derive_public_key","number",["number","number"],[A,x])!==0)throw new Error("orlp key derivation failed: invalid private key");const k=new Uint8Array(32);return k.set(g.HEAPU8.subarray(A,A+32)),(0,n.bytesToHex)(k)}async function c(d,g){try{const m=await i(),x=(0,n.hexToBytes)(d),A=(0,n.hexToBytes)(g);if(x.length!==64||A.length!==32)return!1;const _=2048,k=2112;return m.HEAPU8.set(x,_),m.HEAPU8.set(A,k),m.ccall("orlp_validate_keypair","number",["number","number"],[k,_])===1}catch{return!1}}async function u(d,g,m){const x=await i(),A=(0,n.hexToBytes)(d),_=(0,n.hexToBytes)(g),k=(0,n.hexToBytes)(m);if(_.length!==64)throw new Error(`Invalid private key length: expected 64 bytes, got ${_.length}`);if(k.length!==32)throw new Error(`Invalid public key length: expected 32 bytes, got ${k.length}`);const R=1e5,C=2e5,w=3e5,B=4e5;x.HEAPU8.set(A,R),x.HEAPU8.set(_,C),x.HEAPU8.set(k,w),x.ccall("orlp_sign","void",["number","number","number","number","number"],[B,R,A.length,w,C]);const S=new Uint8Array(64);return S.set(x.HEAPU8.subarray(B,B+64)),(0,n.bytesToHex)(S)}async function p(d,g,m){try{const x=await i(),A=(0,n.hexToBytes)(d),_=(0,n.hexToBytes)(g),k=(0,n.hexToBytes)(m);if(A.length!==64||k.length!==32)return!1;const R=5e5,C=6e5,w=7e5;return x.HEAPU8.set(A,C),x.HEAPU8.set(_,R),x.HEAPU8.set(k,w),x.ccall("orlp_verify","number",["number","number","number","number"],[C,R,_.length,w])===1}catch{return!1}}return Ko}var Fg;function mv(){if(Fg)return Ir;Fg=1;var n=Ir&&Ir.__createBinding||(Object.create?(function(m,x,A,_){_===void 0&&(_=A);var k=Object.getOwnPropertyDescriptor(x,A);(!k||("get"in k?!x.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return x[A]}}),Object.defineProperty(m,_,k)}):(function(m,x,A,_){_===void 0&&(_=A),m[_]=x[A]})),s=Ir&&Ir.__setModuleDefault||(Object.create?(function(m,x){Object.defineProperty(m,"default",{enumerable:!0,value:x})}):function(m,x){m.default=x}),i=Ir&&Ir.__importStar||(function(){var m=function(x){return m=Object.getOwnPropertyNames||function(A){var _=[];for(var k in A)Object.prototype.hasOwnProperty.call(A,k)&&(_[_.length]=k);return _},m(x)};return function(x){if(x&&x.__esModule)return x;var A={};if(x!=null)for(var _=m(x),k=0;k<_.length;k++)_[k]!=="default"&&n(A,x,_[k]);return s(A,x),A}})();Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.Ed25519SignatureVerifier=void 0;const l=i(QC),c=bn(),u=uh();async function p(m){if(typeof globalThis<"u"&&globalThis.crypto&&globalThis.crypto.subtle){const x=await globalThis.crypto.subtle.digest("SHA-512",m);return new Uint8Array(x)}if(typeof E0<"u")try{const{createHash:x}=Ku;return x("sha512").update(m).digest()}catch{}throw new Error("No SHA-512 implementation available")}function d(m){if(typeof E0<"u")try{const{createHash:x}=Ku;return x("sha512").update(m).digest()}catch{}try{const x=JA(),A=x.lib.WordArray.create(m),_=x.SHA512(A),k=new Uint8Array(64);for(let R=0;R<16;R++){const C=_.words[R]||0;k[R*4]=C>>>24&255,k[R*4+1]=C>>>16&255,k[R*4+2]=C>>>8&255,k[R*4+3]=C&255}return k}catch{throw new Error("No SHA-512 implementation available for synchronous operation")}}l.etc.sha512Async=p;try{l.etc.sha512Sync=d}catch(m){console.debug("Could not set up synchronous SHA-512:",m)}class g{static async verifyAdvertisementSignature(x,A,_,k){try{const R=(0,c.hexToBytes)(x),C=(0,c.hexToBytes)(A),w=(0,c.hexToBytes)(k),B=this.constructAdvertSignedMessage(x,_,w);return await l.verify(C,B,R)}catch(R){return console.error("Ed25519 signature verification failed:",R),!1}}static constructAdvertSignedMessage(x,A,_){const k=(0,c.hexToBytes)(x),R=new Uint8Array(4);R[0]=A&255,R[1]=A>>8&255,R[2]=A>>16&255,R[3]=A>>24&255;const C=new Uint8Array(36+_.length);return C.set(k,0),C.set(R,32),C.set(_,36),C}static getSignedMessageDescription(x,A,_){return`Public Key: ${x} + Timestamp: ${A} (${new Date(A*1e3).toISOString()}) + App Data: ${_}`}static getSignedMessageHex(x,A,_){const k=(0,c.hexToBytes)(_),R=this.constructAdvertSignedMessage(x,A,k);return(0,c.bytesToHex)(R)}static async derivePublicKey(x){try{const A=(0,c.hexToBytes)(x);if(A.length!==64)throw new Error(`Invalid private key length: expected 64 bytes, got ${A.length}`);return await(0,u.derivePublicKey)(x)}catch(A){throw new Error(`Failed to derive public key: ${A instanceof Error?A.message:"Unknown error"}`)}}static derivePublicKeySync(x){try{const A=(0,c.hexToBytes)(x);throw A.length!==64?new Error(`Invalid private key length: expected 64 bytes, got ${A.length}`):new Error("Synchronous key derivation not supported with WASM. Use derivePublicKey() instead.")}catch(A){throw new Error(`Failed to derive public key: ${A instanceof Error?A.message:"Unknown error"}`)}}static async validateKeyPair(x,A){try{return await(0,u.validateKeyPair)(x,A)}catch{return!1}}}return Ir.Ed25519SignatureVerifier=g,Ir}var Lg;function XC(){if(Lg)return ol;Lg=1,Object.defineProperty(ol,"__esModule",{value:!0}),ol.AdvertPayloadDecoder=void 0;const n=ur(),s=bn(),i=_l(),l=mv();class c{static decode(p,d){try{if(p.length<101){const B={type:n.PayloadType.Advert,version:n.PayloadVersion.Version1,isValid:!1,errors:["Advertisement payload too short"],publicKey:"",timestamp:0,signature:"",appData:{flags:0,deviceRole:n.DeviceRole.ChatNode,hasLocation:!1,hasName:!1}};return d!=null&&d.includeSegments&&(B.segments=[{name:"Invalid Advert Data",description:"Advert payload too short (minimum 101 bytes required)",startByte:d.segmentOffset||0,endByte:(d.segmentOffset||0)+p.length-1,value:(0,s.bytesToHex)(p)}]),B}const g=[],m=(d==null?void 0:d.segmentOffset)||0;let x=0;const A=(0,s.bytesToHex)(p.subarray(x,x+32));d!=null&&d.includeSegments&&g.push({name:"Public Key",description:"Ed25519 public key",startByte:m+x,endByte:m+x+31,value:A}),x+=32;const _=this.readUint32LE(p,x);if(d!=null&&d.includeSegments){const B=new Date(_*1e3);g.push({name:"Timestamp",description:`${_} (${B.toISOString().slice(0,19)}Z)`,startByte:m+x,endByte:m+x+3,value:(0,s.bytesToHex)(p.subarray(x,x+4))})}x+=4;const k=(0,s.bytesToHex)(p.subarray(x,x+64));d!=null&&d.includeSegments&&g.push({name:"Signature",description:"Ed25519 signature",startByte:m+x,endByte:m+x+63,value:k}),x+=64;const R=p[x];if(d!=null&&d.includeSegments){const B=R.toString(2).padStart(8,"0"),S=this.parseDeviceRole(R),F=` | Bits 0-3 (Role): ${(0,i.getDeviceRoleName)(S)} | Bit 4 (Location): ${R&n.AdvertFlags.HasLocation?"Yes":"No"} | Bit 7 (Name): ${R&n.AdvertFlags.HasName?"Yes":"No"}`;g.push({name:"App Flags",description:`Binary: ${B}${F}`,startByte:m+x,endByte:m+x,value:R.toString(16).padStart(2,"0").toUpperCase()})}x+=1;const C={type:n.PayloadType.Advert,version:n.PayloadVersion.Version1,isValid:!0,publicKey:A,timestamp:_,signature:k,appData:{flags:R,deviceRole:this.parseDeviceRole(R),hasLocation:!!(R&n.AdvertFlags.HasLocation),hasName:!!(R&n.AdvertFlags.HasName)}};let w=x;if(R&n.AdvertFlags.HasLocation&&p.length>=w+8){const B=this.readInt32LE(p,w)/1e6,S=this.readInt32LE(p,w+4)/1e6;C.appData.location={latitude:Math.round(B*1e6)/1e6,longitude:Math.round(S*1e6)/1e6},d!=null&&d.includeSegments&&(g.push({name:"Latitude",description:`${B} (${B})`,startByte:m+w,endByte:m+w+3,value:(0,s.bytesToHex)(p.subarray(w,w+4))}),g.push({name:"Longitude",description:`${S} (${S})`,startByte:m+w+4,endByte:m+w+7,value:(0,s.bytesToHex)(p.subarray(w+4,w+8))})),w+=8}if(R&n.AdvertFlags.HasFeature1&&(w+=2),R&n.AdvertFlags.HasFeature2&&(w+=2),R&n.AdvertFlags.HasName&&p.length>w){const B=p.subarray(w),S=new TextDecoder("utf-8").decode(B).replace(/\0.*$/,"");C.appData.name=this.sanitizeControlCharacters(S)||S,d!=null&&d.includeSegments&&g.push({name:"Node Name",description:`Node name: "${C.appData.name}"`,startByte:m+w,endByte:m+p.length-1,value:(0,s.bytesToHex)(B)})}return d!=null&&d.includeSegments&&(C.segments=g),C}catch(g){return{type:n.PayloadType.Advert,version:n.PayloadVersion.Version1,isValid:!1,errors:[g instanceof Error?g.message:"Failed to decode advertisement payload"],publicKey:"",timestamp:0,signature:"",appData:{flags:0,deviceRole:n.DeviceRole.ChatNode,hasLocation:!1,hasName:!1}}}}static async decodeWithVerification(p,d){const g=this.decode(p,d);if(!g||!g.isValid)return g;try{const x=p.subarray(100),A=(0,s.bytesToHex)(x),_=await l.Ed25519SignatureVerifier.verifyAdvertisementSignature(g.publicKey,g.signature,g.timestamp,A);g.signatureValid=_,_||(g.signatureError="Ed25519 signature verification failed",g.isValid=!1,g.errors||(g.errors=[]),g.errors.push("Invalid Ed25519 signature"))}catch(m){g.signatureValid=!1,g.signatureError=m instanceof Error?m.message:"Signature verification error",g.isValid=!1,g.errors||(g.errors=[]),g.errors.push("Signature verification failed: "+(m instanceof Error?m.message:"Unknown error"))}return g}static parseDeviceRole(p){switch(p&15){case 1:return n.DeviceRole.ChatNode;case 2:return n.DeviceRole.Repeater;case 3:return n.DeviceRole.RoomServer;case 4:return n.DeviceRole.Sensor;default:return n.DeviceRole.ChatNode}}static readUint32LE(p,d){return p[d]|p[d+1]<<8|p[d+2]<<16|p[d+3]<<24}static readInt32LE(p,d){const g=this.readUint32LE(p,d);return g>2147483647?g-4294967296:g}static sanitizeControlCharacters(p){return p&&p.trim().replace(/[\x00-\x1F\x7F]/g,"")||null}}return ol.AdvertPayloadDecoder=c,ol}var sl={},Mg;function JC(){if(Mg)return sl;Mg=1,Object.defineProperty(sl,"__esModule",{value:!0}),sl.TracePayloadDecoder=void 0;const n=ur(),s=bn();class i{static decode(c,u,p){try{if(c.length<9){const S={type:n.PayloadType.Trace,version:n.PayloadVersion.Version1,isValid:!1,errors:["Trace payload too short (need at least tag(4) + auth(4) + flags(1))"],traceTag:"00000000",authCode:0,flags:0,pathHashes:[]};return p!=null&&p.includeSegments&&(S.segments=[{name:"Invalid Trace Data",description:"Trace payload too short (minimum 9 bytes required)",startByte:p.segmentOffset||0,endByte:(p.segmentOffset||0)+c.length-1,value:(0,s.bytesToHex)(c)}]),S}let d=0;const g=[],m=(p==null?void 0:p.segmentOffset)||0,x=this.readUint32LE(c,d),A=(0,s.numberToHex)(x,8);p!=null&&p.includeSegments&&g.push({name:"Trace Tag",description:`Unique identifier for this trace: 0x${x.toString(16).padStart(8,"0")}`,startByte:m+d,endByte:m+d+3,value:(0,s.bytesToHex)(c.slice(d,d+4))}),d+=4;const _=this.readUint32LE(c,d);p!=null&&p.includeSegments&&g.push({name:"Auth Code",description:`Authentication/verification code: ${_}`,startByte:m+d,endByte:m+d+3,value:(0,s.bytesToHex)(c.slice(d,d+4))}),d+=4;const k=c[d];p!=null&&p.includeSegments&&g.push({name:"Flags",description:`Application-defined control flags: 0x${k.toString(16).padStart(2,"0")} (${k.toString(2).padStart(8,"0")}b)`,startByte:m+d,endByte:m+d,value:k.toString(16).padStart(2,"0").toUpperCase()}),d+=1;const R=[],C=d;for(;d<c.length;)R.push((0,s.byteToHex)(c[d])),d++;if(p!=null&&p.includeSegments&&R.length>0){const S=R.join(" ");g.push({name:"Path Hashes",description:`Node hashes in trace path: ${S}`,startByte:m+C,endByte:m+c.length-1,value:(0,s.bytesToHex)(c.slice(C))})}let w;u&&u.length>0&&(w=u.map(S=>{const T=parseInt(S,16);return(T>127?T-256:T)/4}));const B={type:n.PayloadType.Trace,version:n.PayloadVersion.Version1,isValid:!0,traceTag:A,authCode:_,flags:k,pathHashes:R,snrValues:w};return p!=null&&p.includeSegments&&(B.segments=g),B}catch(d){return{type:n.PayloadType.Trace,version:n.PayloadVersion.Version1,isValid:!1,errors:[d instanceof Error?d.message:"Failed to decode trace payload"],traceTag:"00000000",authCode:0,flags:0,pathHashes:[]}}}static readUint32LE(c,u){return c[u]|c[u+1]<<8|c[u+2]<<16|c[u+3]<<24}}return sl.TracePayloadDecoder=i,sl}var al={},Ig;function eE(){if(Ig)return al;Ig=1,Object.defineProperty(al,"__esModule",{value:!0}),al.GroupTextPayloadDecoder=void 0;const n=ur(),s=J0(),i=bn();class l{static decode(u,p){try{if(u.length<3){const R={type:n.PayloadType.GroupText,version:n.PayloadVersion.Version1,isValid:!1,errors:["GroupText payload too short (need at least channel_hash(1) + MAC(2))"],channelHash:"",cipherMac:"",ciphertext:"",ciphertextLength:0};return p!=null&&p.includeSegments&&(R.segments=[{name:"Invalid GroupText Data",description:"GroupText payload too short (minimum 3 bytes required)",startByte:p.segmentOffset||0,endByte:(p.segmentOffset||0)+u.length-1,value:(0,i.bytesToHex)(u)}]),R}const d=[],g=(p==null?void 0:p.segmentOffset)||0;let m=0;const x=(0,i.byteToHex)(u[m]);p!=null&&p.includeSegments&&d.push({name:"Channel Hash",description:"First byte of SHA256 of channel's shared key",startByte:g+m,endByte:g+m,value:x}),m+=1;const A=(0,i.bytesToHex)(u.subarray(m,m+2));p!=null&&p.includeSegments&&d.push({name:"Cipher MAC",description:"MAC for encrypted data",startByte:g+m,endByte:g+m+1,value:A}),m+=2;const _=(0,i.bytesToHex)(u.subarray(m));p!=null&&p.includeSegments&&u.length>m&&d.push({name:"Ciphertext",description:"Encrypted message content (timestamp + flags + message)",startByte:g+m,endByte:g+u.length-1,value:_});const k={type:n.PayloadType.GroupText,version:n.PayloadVersion.Version1,isValid:!0,channelHash:x,cipherMac:A,ciphertext:_,ciphertextLength:u.length-3};if(p!=null&&p.keyStore&&p.keyStore.hasChannelKey(x)){const R=p.keyStore.getChannelKeys(x);for(const C of R){const w=s.ChannelCrypto.decryptGroupTextMessage(_,A,C);if(w.success&&w.data){k.decrypted={timestamp:w.data.timestamp,flags:w.data.flags,sender:w.data.sender,message:w.data.message};break}}}return p!=null&&p.includeSegments&&(k.segments=d),k}catch(d){return{type:n.PayloadType.GroupText,version:n.PayloadVersion.Version1,isValid:!1,errors:[d instanceof Error?d.message:"Failed to decode GroupText payload"],channelHash:"",cipherMac:"",ciphertext:"",ciphertextLength:0}}}}return al.GroupTextPayloadDecoder=l,al}var ll={},Og;function tE(){if(Og)return ll;Og=1,Object.defineProperty(ll,"__esModule",{value:!0}),ll.RequestPayloadDecoder=void 0;const n=ur(),s=bn();class i{static decode(c,u){try{if(c.length<4){const R={type:n.PayloadType.Request,version:n.PayloadVersion.Version1,isValid:!1,errors:["Request payload too short (minimum 4 bytes: dest hash + source hash + MAC)"],timestamp:0,requestType:n.RequestType.GetStats,requestData:"",destinationHash:"",sourceHash:"",cipherMac:"",ciphertext:""};return u!=null&&u.includeSegments&&(R.segments=[{name:"Invalid Request Data",description:"Request payload too short (minimum 4 bytes required: 1 for dest hash + 1 for source hash + 2 for MAC)",startByte:u.segmentOffset||0,endByte:(u.segmentOffset||0)+c.length-1,value:(0,s.bytesToHex)(c)}]),R}const p=[],d=(u==null?void 0:u.segmentOffset)||0;let g=0;const m=(0,s.bytesToHex)(c.subarray(g,g+1));u!=null&&u.includeSegments&&p.push({name:"Destination Hash",description:`First byte of destination node public key: 0x${m}`,startByte:d+g,endByte:d+g,value:m}),g+=1;const x=(0,s.bytesToHex)(c.subarray(g,g+1));u!=null&&u.includeSegments&&p.push({name:"Source Hash",description:`First byte of source node public key: 0x${x}`,startByte:d+g,endByte:d+g,value:x}),g+=1;const A=(0,s.bytesToHex)(c.subarray(g,g+2));u!=null&&u.includeSegments&&p.push({name:"Cipher MAC",description:"MAC for encrypted data verification (2 bytes)",startByte:d+g,endByte:d+g+1,value:A}),g+=2;const _=(0,s.bytesToHex)(c.subarray(g));u!=null&&u.includeSegments&&c.length>g&&p.push({name:"Ciphertext",description:`Encrypted message data (${c.length-g} bytes). Contains encrypted plaintext with this structure:
 Timestamp (4 bytes) - send time as unix timestamp
 Request Type (1 byte) - type of request (GetStats, GetTelemetryData, etc.)
 Request Data (remaining bytes) - additional request-specific data`,startByte:d+g,endByte:d+c.length-1,value:_});const k={type:n.PayloadType.Request,version:n.PayloadVersion.Version1,isValid:!0,timestamp:0,requestType:n.RequestType.GetStats,requestData:"",destinationHash:m,sourceHash:x,cipherMac:A,ciphertext:_};return u!=null&&u.includeSegments&&(k.segments=p),k}catch(p){return{type:n.PayloadType.Request,version:n.PayloadVersion.Version1,isValid:!1,errors:[p instanceof Error?p.message:"Failed to decode request payload"],timestamp:0,requestType:n.RequestType.GetStats,requestData:"",destinationHash:"",sourceHash:"",cipherMac:"",ciphertext:""}}}}return ll.RequestPayloadDecoder=i,ll}var cl={},jg;function nE(){if(jg)return cl;jg=1,Object.defineProperty(cl,"__esModule",{value:!0}),cl.ResponsePayloadDecoder=void 0;const n=ur(),s=bn();class i{static decode(c,u){try{if(c.length<4){const R={type:n.PayloadType.Response,version:n.PayloadVersion.Version1,isValid:!1,errors:["Response payload too short (minimum 4 bytes: dest + source + MAC)"],destinationHash:"",sourceHash:"",cipherMac:"",ciphertext:"",ciphertextLength:0};return u!=null&&u.includeSegments&&(R.segments=[{name:"Invalid Response Data",description:"Response payload too short (minimum 4 bytes required)",startByte:u.segmentOffset||0,endByte:(u.segmentOffset||0)+c.length-1,value:(0,s.bytesToHex)(c)}]),R}const p=[],d=(u==null?void 0:u.segmentOffset)||0;let g=0;const m=(0,s.byteToHex)(c[g]);u!=null&&u.includeSegments&&p.push({name:"Destination Hash",description:"First byte of destination node public key",startByte:d+g,endByte:d+g,value:m}),g+=1;const x=(0,s.byteToHex)(c[g]);u!=null&&u.includeSegments&&p.push({name:"Source Hash",description:"First byte of source node public key",startByte:d+g,endByte:d+g,value:x}),g+=1;const A=(0,s.bytesToHex)(c.subarray(g,g+2));u!=null&&u.includeSegments&&p.push({name:"Cipher MAC",description:"MAC for encrypted data in next field",startByte:d+g,endByte:d+g+1,value:A}),g+=2;const _=(0,s.bytesToHex)(c.subarray(g));u!=null&&u.includeSegments&&c.length>g&&p.push({name:"Ciphertext",description:"Encrypted response data (tag + content)",startByte:d+g,endByte:d+c.length-1,value:_});const k={type:n.PayloadType.Response,version:n.PayloadVersion.Version1,isValid:!0,destinationHash:m,sourceHash:x,cipherMac:A,ciphertext:_,ciphertextLength:c.length-4};return u!=null&&u.includeSegments&&(k.segments=p),k}catch(p){return{type:n.PayloadType.Response,version:n.PayloadVersion.Version1,isValid:!1,errors:[p instanceof Error?p.message:"Failed to decode response payload"],destinationHash:"",sourceHash:"",cipherMac:"",ciphertext:"",ciphertextLength:0}}}}return cl.ResponsePayloadDecoder=i,cl}var ul={},zg;function rE(){if(zg)return ul;zg=1,Object.defineProperty(ul,"__esModule",{value:!0}),ul.AnonRequestPayloadDecoder=void 0;const n=ur(),s=bn();class i{static decode(c,u){try{if(c.length<35){const R={type:n.PayloadType.AnonRequest,version:n.PayloadVersion.Version1,isValid:!1,errors:["AnonRequest payload too short (minimum 35 bytes: dest + public key + MAC)"],destinationHash:"",senderPublicKey:"",cipherMac:"",ciphertext:"",ciphertextLength:0};return u!=null&&u.includeSegments&&(R.segments=[{name:"Invalid AnonRequest Data",description:"AnonRequest payload too short (minimum 35 bytes required: 1 for dest hash + 32 for public key + 2 for MAC)",startByte:u.segmentOffset||0,endByte:(u.segmentOffset||0)+c.length-1,value:(0,s.bytesToHex)(c)}]),R}const p=[],d=(u==null?void 0:u.segmentOffset)||0;let g=0;const m=(0,s.byteToHex)(c[0]);u!=null&&u.includeSegments&&p.push({name:"Destination Hash",description:`First byte of destination node public key: 0x${m}`,startByte:d+g,endByte:d+g,value:m}),g+=1;const x=(0,s.bytesToHex)(c.subarray(1,33));u!=null&&u.includeSegments&&p.push({name:"Sender Public Key",description:"Ed25519 public key of the sender (32 bytes)",startByte:d+g,endByte:d+g+31,value:x}),g+=32;const A=(0,s.bytesToHex)(c.subarray(33,35));u!=null&&u.includeSegments&&p.push({name:"Cipher MAC",description:"MAC for encrypted data verification (2 bytes)",startByte:d+g,endByte:d+g+1,value:A}),g+=2;const _=(0,s.bytesToHex)(c.subarray(35));u!=null&&u.includeSegments&&c.length>35&&p.push({name:"Ciphertext",description:`Encrypted message data (${c.length-35} bytes). Contains encrypted plaintext with this structure:
 Timestamp (4 bytes) - send time as unix timestamp
 Sync Timestamp (4 bytes) - room server only, sender's "sync messages SINCE x" timestamp  
 Password (remaining bytes) - password for repeater/room`,startByte:d+g,endByte:d+c.length-1,value:_});const k={type:n.PayloadType.AnonRequest,version:n.PayloadVersion.Version1,isValid:!0,destinationHash:m,senderPublicKey:x,cipherMac:A,ciphertext:_,ciphertextLength:c.length-35};return u!=null&&u.includeSegments&&(k.segments=p),k}catch(p){return{type:n.PayloadType.AnonRequest,version:n.PayloadVersion.Version1,isValid:!1,errors:[p instanceof Error?p.message:"Failed to decode AnonRequest payload"],destinationHash:"",senderPublicKey:"",cipherMac:"",ciphertext:"",ciphertextLength:0}}}}return ul.AnonRequestPayloadDecoder=i,ul}var dl={},Hg;function iE(){if(Hg)return dl;Hg=1,Object.defineProperty(dl,"__esModule",{value:!0}),dl.AckPayloadDecoder=void 0;const n=ur(),s=bn();class i{static decode(c,u){try{if(c.length<4){const x={type:n.PayloadType.Ack,version:n.PayloadVersion.Version1,isValid:!1,errors:["Ack payload too short (minimum 4 bytes for checksum)"],checksum:""};return u!=null&&u.includeSegments&&(x.segments=[{name:"Invalid Ack Data",description:"Ack payload too short (minimum 4 bytes required for checksum)",startByte:u.segmentOffset||0,endByte:(u.segmentOffset||0)+c.length-1,value:(0,s.bytesToHex)(c)}]),x}const p=[],d=(u==null?void 0:u.segmentOffset)||0,g=(0,s.bytesToHex)(c.subarray(0,4));u!=null&&u.includeSegments&&p.push({name:"Checksum",description:`CRC checksum of message timestamp, text, and sender pubkey: 0x${g}`,startByte:d,endByte:d+3,value:g}),u!=null&&u.includeSegments&&c.length>4&&p.push({name:"Additional Data",description:"Extra data in Ack payload",startByte:d+4,endByte:d+c.length-1,value:(0,s.bytesToHex)(c.subarray(4))});const m={type:n.PayloadType.Ack,version:n.PayloadVersion.Version1,isValid:!0,checksum:g};return u!=null&&u.includeSegments&&(m.segments=p),m}catch(p){return{type:n.PayloadType.Ack,version:n.PayloadVersion.Version1,isValid:!1,errors:[p instanceof Error?p.message:"Failed to decode Ack payload"],checksum:""}}}}return dl.AckPayloadDecoder=i,dl}var fl={},Vg;function oE(){if(Vg)return fl;Vg=1,Object.defineProperty(fl,"__esModule",{value:!0}),fl.PathPayloadDecoder=void 0;const n=ur(),s=bn();class i{static decode(c){try{if(c.length<2)return{type:n.PayloadType.Path,version:n.PayloadVersion.Version1,isValid:!1,errors:["Path payload too short (minimum 2 bytes: path length + extra type)"],pathLength:0,pathHashes:[],extraType:0,extraData:""};const u=c[0];if(c.length<1+u+1)return{type:n.PayloadType.Path,version:n.PayloadVersion.Version1,isValid:!1,errors:[`Path payload too short (need ${1+u+1} bytes for path length + path + extra type)`],pathLength:u,pathHashes:[],extraType:0,extraData:""};const p=[];for(let m=0;m<u;m++)p.push((0,s.byteToHex)(c[1+m]));const d=c[1+u];let g="";return c.length>1+u+1&&(g=(0,s.bytesToHex)(c.subarray(1+u+1))),{type:n.PayloadType.Path,version:n.PayloadVersion.Version1,isValid:!0,pathLength:u,pathHashes:p,extraType:d,extraData:g}}catch(u){return{type:n.PayloadType.Path,version:n.PayloadVersion.Version1,isValid:!1,errors:[u instanceof Error?u.message:"Failed to decode Path payload"],pathLength:0,pathHashes:[],extraType:0,extraData:""}}}}return fl.PathPayloadDecoder=i,fl}var hl={},Ug;function sE(){if(Ug)return hl;Ug=1,Object.defineProperty(hl,"__esModule",{value:!0}),hl.TextMessagePayloadDecoder=void 0;const n=ur(),s=bn();class i{static decode(c,u){try{if(c.length<4){const R={type:n.PayloadType.TextMessage,version:n.PayloadVersion.Version1,isValid:!1,errors:["TextMessage payload too short (minimum 4 bytes: dest + source + MAC)"],destinationHash:"",sourceHash:"",cipherMac:"",ciphertext:"",ciphertextLength:0};return u!=null&&u.includeSegments&&(R.segments=[{name:"Invalid TextMessage Data",description:"TextMessage payload too short (minimum 4 bytes required)",startByte:u.segmentOffset||0,endByte:(u.segmentOffset||0)+c.length-1,value:(0,s.bytesToHex)(c)}]),R}const p=[],d=(u==null?void 0:u.segmentOffset)||0;let g=0;const m=(0,s.byteToHex)(c[g]);u!=null&&u.includeSegments&&p.push({name:"Destination Hash",description:"First byte of destination node public key",startByte:d+g,endByte:d+g,value:m}),g+=1;const x=(0,s.byteToHex)(c[g]);u!=null&&u.includeSegments&&p.push({name:"Source Hash",description:"First byte of source node public key",startByte:d+g,endByte:d+g,value:x}),g+=1;const A=(0,s.bytesToHex)(c.subarray(g,g+2));u!=null&&u.includeSegments&&p.push({name:"Cipher MAC",description:"MAC for encrypted data in next field",startByte:d+g,endByte:d+g+1,value:A}),g+=2;const _=(0,s.bytesToHex)(c.subarray(g));u!=null&&u.includeSegments&&c.length>g&&p.push({name:"Ciphertext",description:"Encrypted message data (timestamp + message text)",startByte:d+g,endByte:d+c.length-1,value:_});const k={type:n.PayloadType.TextMessage,version:n.PayloadVersion.Version1,isValid:!0,destinationHash:m,sourceHash:x,cipherMac:A,ciphertext:_,ciphertextLength:c.length-4};return u!=null&&u.includeSegments&&(k.segments=p),k}catch(p){return{type:n.PayloadType.TextMessage,version:n.PayloadVersion.Version1,isValid:!1,errors:[p instanceof Error?p.message:"Failed to decode TextMessage payload"],destinationHash:"",sourceHash:"",cipherMac:"",ciphertext:"",ciphertextLength:0}}}}return hl.TextMessagePayloadDecoder=i,hl}var pl={},Zg;function aE(){if(Zg)return pl;Zg=1,Object.defineProperty(pl,"__esModule",{value:!0}),pl.ControlPayloadDecoder=void 0;const n=ur(),s=bn(),i=_l();class l{static decode(u,p){try{if(u.length<1)return this.createErrorPayload("Control payload too short (minimum 1 byte required)",u,p);const g=u[0]&240;switch(g){case n.ControlSubType.NodeDiscoverReq:return this.decodeDiscoverReq(u,p);case n.ControlSubType.NodeDiscoverResp:return this.decodeDiscoverResp(u,p);default:return this.createErrorPayload(`Unknown control sub-type: 0x${g.toString(16).padStart(2,"0")}`,u,p)}}catch(d){return this.createErrorPayload(d instanceof Error?d.message:"Failed to decode control payload",u,p)}}static decodeDiscoverReq(u,p){const d=[],g=(p==null?void 0:p.segmentOffset)??0;if(u.length<6){const B={type:n.PayloadType.Control,version:n.PayloadVersion.Version1,isValid:!1,errors:["DISCOVER_REQ payload too short (minimum 6 bytes required)"],subType:n.ControlSubType.NodeDiscoverReq,rawFlags:u[0],prefixOnly:!1,typeFilter:0,typeFilterNames:[],tag:0,since:0};return p!=null&&p.includeSegments&&(B.segments=[{name:"Invalid DISCOVER_REQ Data",description:"DISCOVER_REQ payload too short (minimum 6 bytes required)",startByte:g,endByte:g+u.length-1,value:(0,s.bytesToHex)(u)}]),B}let m=0;const x=u[m],A=(x&1)!==0;p!=null&&p.includeSegments&&d.push({name:"Flags",description:`Sub-type: DISCOVER_REQ (0x8) | Prefix Only: ${A}`,startByte:g+m,endByte:g+m,value:x.toString(16).padStart(2,"0").toUpperCase()}),m+=1;const _=u[m],k=this.parseTypeFilter(_);p!=null&&p.includeSegments&&d.push({name:"Type Filter",description:`Filter mask: 0b${_.toString(2).padStart(8,"0")} | Types: ${k.length>0?k.join(", "):"None"}`,startByte:g+m,endByte:g+m,value:_.toString(16).padStart(2,"0").toUpperCase()}),m+=1;const R=this.readUint32LE(u,m);p!=null&&p.includeSegments&&d.push({name:"Tag",description:`Random tag for response matching: 0x${R.toString(16).padStart(8,"0")}`,startByte:g+m,endByte:g+m+3,value:(0,s.bytesToHex)(u.slice(m,m+4))}),m+=4;let C=0;if(u.length>=m+4&&(C=this.readUint32LE(u,m),p!=null&&p.includeSegments)){const B=C>0?new Date(C*1e3).toISOString().slice(0,19)+"Z":"N/A";d.push({name:"Since",description:`Filter timestamp: ${C} (${B})`,startByte:g+m,endByte:g+m+3,value:(0,s.bytesToHex)(u.slice(m,m+4))})}const w={type:n.PayloadType.Control,version:n.PayloadVersion.Version1,isValid:!0,subType:n.ControlSubType.NodeDiscoverReq,rawFlags:x,prefixOnly:A,typeFilter:_,typeFilterNames:k,tag:R,since:C};return p!=null&&p.includeSegments&&(w.segments=d),w}static decodeDiscoverResp(u,p){const d=[],g=(p==null?void 0:p.segmentOffset)??0;if(u.length<14){const z={type:n.PayloadType.Control,version:n.PayloadVersion.Version1,isValid:!1,errors:["DISCOVER_RESP payload too short (minimum 14 bytes required)"],subType:n.ControlSubType.NodeDiscoverResp,rawFlags:u.length>0?u[0]:0,nodeType:n.DeviceRole.Unknown,nodeTypeName:"Unknown",snr:0,tag:0,publicKey:"",publicKeyLength:0};return p!=null&&p.includeSegments&&(z.segments=[{name:"Invalid DISCOVER_RESP Data",description:"DISCOVER_RESP payload too short (minimum 14 bytes required)",startByte:g,endByte:g+u.length-1,value:(0,s.bytesToHex)(u)}]),z}let m=0;const x=u[m],A=x&15,_=(0,i.getDeviceRoleName)(A);p!=null&&p.includeSegments&&d.push({name:"Flags",description:`Sub-type: DISCOVER_RESP (0x9) | Node Type: ${_}`,startByte:g+m,endByte:g+m,value:x.toString(16).padStart(2,"0").toUpperCase()}),m+=1;const k=u[m],R=k>127?k-256:k,C=R/4;p!=null&&p.includeSegments&&d.push({name:"SNR",description:`Inbound SNR: ${C.toFixed(2)} dB (raw: ${k}, signed: ${R})`,startByte:g+m,endByte:g+m,value:k.toString(16).padStart(2,"0").toUpperCase()}),m+=1;const w=this.readUint32LE(u,m);p!=null&&p.includeSegments&&d.push({name:"Tag",description:`Reflected tag from request: 0x${w.toString(16).padStart(8,"0")}`,startByte:g+m,endByte:g+m+3,value:(0,s.bytesToHex)(u.slice(m,m+4))}),m+=4;const S=u.length-m,T=u.slice(m,m+S),F=(0,s.bytesToHex)(T);if(p!=null&&p.includeSegments){const z=S===32?"Full Public Key":"Public Key Prefix";d.push({name:z,description:`${z} (${S} bytes)`,startByte:g+m,endByte:g+m+S-1,value:F})}const M={type:n.PayloadType.Control,version:n.PayloadVersion.Version1,isValid:!0,subType:n.ControlSubType.NodeDiscoverResp,rawFlags:x,nodeType:A,nodeTypeName:_,snr:C,tag:w,publicKey:F,publicKeyLength:S};return p!=null&&p.includeSegments&&(M.segments=d),M}static parseTypeFilter(u){const p=[];return u&1<<n.DeviceRole.ChatNode&&p.push("Chat"),u&1<<n.DeviceRole.Repeater&&p.push("Repeater"),u&1<<n.DeviceRole.RoomServer&&p.push("Room"),u&1<<n.DeviceRole.Sensor&&p.push("Sensor"),p}static createErrorPayload(u,p,d){const g={type:n.PayloadType.Control,version:n.PayloadVersion.Version1,isValid:!1,errors:[u],subType:n.ControlSubType.NodeDiscoverReq,rawFlags:p.length>0?p[0]:0,prefixOnly:!1,typeFilter:0,typeFilterNames:[],tag:0,since:0};return d!=null&&d.includeSegments&&(g.segments=[{name:"Invalid Control Data",description:u,startByte:d.segmentOffset??0,endByte:(d.segmentOffset??0)+p.length-1,value:(0,s.bytesToHex)(p)}]),g}static readUint32LE(u,p){return(u[p]|u[p+1]<<8|u[p+2]<<16|u[p+3]<<24)>>>0}}return pl.ControlPayloadDecoder=l,pl}var Wg;function qg(){if(Wg)return nl;Wg=1,Object.defineProperty(nl,"__esModule",{value:!0}),nl.MeshCorePacketDecoder=void 0;const n=ur(),s=bn(),i=_l(),l=ev(),c=XC(),u=JC(),p=eE(),d=tE(),g=nE(),m=rE(),x=iE(),A=oE(),_=sE(),k=aE();class R{static decode(w,B){return this.parseInternal(w,!1,B).packet}static async decodeWithVerification(w,B){return(await this.parseInternalAsync(w,!1,B)).packet}static analyzeStructure(w,B){return this.parseInternal(w,!0,B).structure}static async analyzeStructureWithVerification(w,B){return(await this.parseInternalAsync(w,!0,B)).structure}static parseInternal(w,B,S){const T=(0,s.hexToBytes)(w),F=[];if(T.length<2){const M={messageHash:"",routeType:n.RouteType.Flood,payloadType:n.PayloadType.RawCustom,payloadVersion:n.PayloadVersion.Version1,pathLength:0,path:null,payload:{raw:"",decoded:null},totalBytes:T.length,isValid:!1,errors:["Packet too short (minimum 2 bytes required)"]},z={segments:[],totalBytes:T.length,rawHex:w.toUpperCase(),messageHash:"",payload:{segments:[],hex:"",startByte:0,type:"Unknown"}};return{packet:M,structure:z}}try{let M=0;const z=T[0],H=z&3,j=z>>2&15,X=z>>6&3;B&&F.push({name:"Header",description:"Header byte breakdown",startByte:0,endByte:0,value:`0x${z.toString(16).padStart(2,"0")}`,headerBreakdown:{fullBinary:z.toString(2).padStart(8,"0"),fields:[{bits:"0-1",field:"Route Type",value:(0,i.getRouteTypeName)(H),binary:(z&3).toString(2).padStart(2,"0")},{bits:"2-5",field:"Payload Type",value:(0,i.getPayloadTypeName)(j),binary:(z>>2&15).toString(2).padStart(4,"0")},{bits:"6-7",field:"Version",value:X.toString(),binary:(z>>6&3).toString(2).padStart(2,"0")}]}}),M=1;let V;if(H===n.RouteType.TransportFlood||H===n.RouteType.TransportDirect){if(T.length<M+4)throw new Error("Packet too short for transport codes");const N=T[M]|T[M+1]<<8,U=T[M+2]|T[M+3]<<8;if(V=[N,U],B){const K=T[M]|T[M+1]<<8|T[M+2]<<16|T[M+3]<<24;F.push({name:"Transport Code",description:"Used for Direct/Response routing",startByte:M,endByte:M+3,value:`0x${K.toString(16).padStart(8,"0")}`})}M+=4}if(T.length<M+1)throw new Error("Packet too short for path length");const $=T[M];if(B){let N=`Path contains ${$} bytes`;H===n.RouteType.Direct||H===n.RouteType.TransportDirect?N=`For "Direct" packets, this contains routing instructions. ${$} bytes of routing instructions (decreases as packet travels)`:(H===n.RouteType.Flood||H===n.RouteType.TransportFlood)&&(N=`${$} bytes showing route taken (increases as packet floods)`),F.push({name:"Path Length",description:N,startByte:M,endByte:M,value:`0x${$.toString(16).padStart(2,"0")}`})}if(M+=1,T.length<M+$)throw new Error("Packet too short for path data");const ee=T.subarray(M,M+$),W=$>0?Array.from(ee).map(s.byteToHex):null;if(B&&$>0)if(j===n.PayloadType.Trace){const N=[];for(let U=0;U<$;U++){const K=T[M+U],fe=(K>127?K-256:K)/4;N.push(`${fe.toFixed(2)}dB (0x${K.toString(16).padStart(2,"0")})`)}F.push({name:"Path SNR Data",description:`SNR values collected during trace: ${N.join(", ")}`,startByte:M,endByte:M+$-1,value:(0,s.bytesToHex)(T.slice(M,M+$))})}else{let N="Routing path information";H===n.RouteType.Direct||H===n.RouteType.TransportDirect?N="Routing instructions (bytes are stripped at each hop as packet travels to destination)":(H===n.RouteType.Flood||H===n.RouteType.TransportFlood)&&(N="Historical route taken (bytes are added as packet floods through network)"),F.push({name:"Path Data",description:N,startByte:M,endByte:M+$-1,value:(0,s.bytesToHex)(T.slice(M,M+$))})}M+=$;const re=T.subarray(M),pe=(0,s.bytesToHex)(re);B&&T.length>M&&F.push({name:"Payload",description:`${(0,i.getPayloadTypeName)(j)} payload data`,startByte:M,endByte:T.length-1,value:(0,s.bytesToHex)(T.slice(M))});let ie=null;const Ae=[];if(j===n.PayloadType.Advert){const N=c.AdvertPayloadDecoder.decode(re,{includeSegments:B,segmentOffset:0});ie=N,N!=null&&N.segments&&(Ae.push(...N.segments),delete N.segments)}else if(j===n.PayloadType.Trace){const N=u.TracePayloadDecoder.decode(re,W,{includeSegments:B,segmentOffset:0});ie=N,N!=null&&N.segments&&(Ae.push(...N.segments),delete N.segments)}else if(j===n.PayloadType.GroupText){const N=p.GroupTextPayloadDecoder.decode(re,{...S,includeSegments:B,segmentOffset:0});ie=N,N!=null&&N.segments&&(Ae.push(...N.segments),delete N.segments)}else if(j===n.PayloadType.Request){const N=d.RequestPayloadDecoder.decode(re,{includeSegments:B,segmentOffset:0});ie=N,N!=null&&N.segments&&(Ae.push(...N.segments),delete N.segments)}else if(j===n.PayloadType.Response){const N=g.ResponsePayloadDecoder.decode(re,{includeSegments:B,segmentOffset:0});ie=N,N!=null&&N.segments&&(Ae.push(...N.segments),delete N.segments)}else if(j===n.PayloadType.AnonRequest){const N=m.AnonRequestPayloadDecoder.decode(re,{includeSegments:B,segmentOffset:0});ie=N,N!=null&&N.segments&&(Ae.push(...N.segments),delete N.segments)}else if(j===n.PayloadType.Ack){const N=x.AckPayloadDecoder.decode(re,{includeSegments:B,segmentOffset:0});ie=N,N!=null&&N.segments&&(Ae.push(...N.segments),delete N.segments)}else if(j===n.PayloadType.Path)ie=A.PathPayloadDecoder.decode(re);else if(j===n.PayloadType.TextMessage){const N=_.TextMessagePayloadDecoder.decode(re,{includeSegments:B,segmentOffset:0});ie=N,N!=null&&N.segments&&(Ae.push(...N.segments),delete N.segments)}else if(j===n.PayloadType.Control){const N=k.ControlPayloadDecoder.decode(re,{includeSegments:B,segmentOffset:0});ie=N,N!=null&&N.segments&&(Ae.push(...N.segments),delete N.segments)}B&&Ae.length===0&&T.length>M&&Ae.push({name:`${(0,i.getPayloadTypeName)(j)} Payload`,description:`Raw ${(0,i.getPayloadTypeName)(j)} payload data (${re.length} bytes)`,startByte:0,endByte:re.length-1,value:(0,s.bytesToHex)(re)});const G=this.calculateMessageHash(T,H,j,X),xe={messageHash:G,routeType:H,payloadType:j,payloadVersion:X,transportCodes:V,pathLength:$,path:W,payload:{raw:pe,decoded:ie},totalBytes:T.length,isValid:!0},Z={segments:F,totalBytes:T.length,rawHex:w.toUpperCase(),messageHash:G,payload:{segments:Ae,hex:pe,startByte:M,type:(0,i.getPayloadTypeName)(j)}};return{packet:xe,structure:Z}}catch(M){const z={messageHash:"",routeType:n.RouteType.Flood,payloadType:n.PayloadType.RawCustom,payloadVersion:n.PayloadVersion.Version1,pathLength:0,path:null,payload:{raw:"",decoded:null},totalBytes:T.length,isValid:!1,errors:[M instanceof Error?M.message:"Unknown decoding error"]},H={segments:[],totalBytes:T.length,rawHex:w.toUpperCase(),messageHash:"",payload:{segments:[],hex:"",startByte:0,type:"Unknown"}};return{packet:z,structure:H}}}static async parseInternalAsync(w,B,S){const T=this.parseInternal(w,B,S);if(T.packet.payloadType===n.PayloadType.Advert&&T.packet.payload.decoded)try{const F=T.packet.payload.decoded,M=await c.AdvertPayloadDecoder.decodeWithVerification((0,s.hexToBytes)(T.packet.payload.raw),{includeSegments:B,segmentOffset:0});M&&(T.packet.payload.decoded=M,M.isValid||(T.packet.isValid=!1,T.packet.errors=M.errors||["Invalid advertisement signature"]),B&&M.segments&&(T.structure.payload.segments=M.segments,delete M.segments))}catch(F){console.error("Signature verification failed:",F)}return T}static validate(w){const B=(0,s.hexToBytes)(w),S=[];if(B.length<2)return S.push("Packet too short (minimum 2 bytes required)"),{isValid:!1,errors:S};try{let T=1;const M=B[0]&3;if((M===n.RouteType.TransportFlood||M===n.RouteType.TransportDirect)&&(B.length<T+4&&S.push("Packet too short for transport codes"),T+=4),B.length<T+1)S.push("Packet too short for path length");else{const z=B[T];T+=1,B.length<T+z&&S.push("Packet too short for path data"),T+=z}T>=B.length&&S.push("No payload data found")}catch(T){S.push(T instanceof Error?T.message:"Validation error")}return{isValid:S.length===0,errors:S.length>0?S:void 0}}static calculateMessageHash(w,B,S,T){if(S===n.PayloadType.Trace&&w.length>=13){let X=1;if((B===n.RouteType.TransportFlood||B===n.RouteType.TransportDirect)&&(X+=4),w.length>X){const V=w[X];X+=1+V}if(w.length>=X+4){const V=w[X]|w[X+1]<<8|w[X+2]<<16|w[X+3]<<24;return(0,s.numberToHex)(V,8)}}const F=S<<2|T<<6;let M=1;if((B===n.RouteType.TransportFlood||B===n.RouteType.TransportDirect)&&(M+=4),w.length>M){const X=w[M];M+=1+X}const z=w.slice(M),H=[F,...Array.from(z)];let j=0;for(let X=0;X<H.length;X++)j=(j<<5)-j+H[X]&4294967295;return(0,s.numberToHex)(j,8)}static createKeyStore(w){return new l.MeshCoreKeyStore(w)}}return nl.MeshCorePacketDecoder=R,nl}var Qo={},Gg;function $g(){if(Gg)return Qo;Gg=1,Object.defineProperty(Qo,"__esModule",{value:!0}),Qo.createAuthToken=c,Qo.verifyAuthToken=u,Qo.parseAuthToken=p,Qo.decodeAuthTokenPayload=d;const n=uh(),s=bn();function i(g){let m="";if(typeof Buffer<"u")m=Buffer.from(g).toString("base64");else{const x=String.fromCharCode(...Array.from(g));m=btoa(x)}return m.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function l(g){let m=g.replace(/-/g,"+").replace(/_/g,"/");for(;m.length%4;)m+="=";if(typeof Buffer<"u")return new Uint8Array(Buffer.from(m,"base64"));{const x=atob(m),A=new Uint8Array(x.length);for(let _=0;_<x.length;_++)A[_]=x.charCodeAt(_);return A}}async function c(g,m,x){const A={alg:"Ed25519",typ:"JWT"};g.publicKey?g.publicKey=g.publicKey.toUpperCase():g.publicKey=x.toUpperCase(),g.iat||(g.iat=Math.floor(Date.now()/1e3));const _=JSON.stringify(A),k=JSON.stringify(g),R=new TextEncoder().encode(_),C=new TextEncoder().encode(k),w=i(R),B=i(C),S=`${w}.${B}`,T=new TextEncoder().encode(S),F=(0,s.bytesToHex)(T),M=await(0,n.sign)(F,m,g.publicKey);return`${w}.${B}.${M}`}async function u(g,m){try{const x=g.split(".");if(x.length!==3)return null;const[A,_,k]=x,R=l(A),C=l(_),w=new TextDecoder().decode(R),B=new TextDecoder().decode(C),S=JSON.parse(w),T=JSON.parse(B);if(S.alg!=="Ed25519"||S.typ!=="JWT"||!T.publicKey||!T.iat||m&&T.publicKey.toUpperCase()!==m.toUpperCase()||T.exp&&Math.floor(Date.now()/1e3)>T.exp)return null;const F=`${A}.${_}`,M=new TextEncoder().encode(F),z=(0,s.bytesToHex)(M);return await(0,n.verify)(k,z,T.publicKey)?T:null}catch{return null}}function p(g){try{const m=g.split(".");return m.length!==3?null:{header:m[0],payload:m[1],signature:m[2]}}catch{return null}}function d(g){try{const m=g.split(".");if(m.length!==3)return null;const x=l(m[1]),A=new TextDecoder().decode(x);return JSON.parse(A)}catch{return null}}return Qo}var Kg;function lE(){return Kg||(Kg=1,(function(n){var s=Si&&Si.__createBinding||(Object.create?(function(B,S,T,F){F===void 0&&(F=T);var M=Object.getOwnPropertyDescriptor(S,T);(!M||("get"in M?!S.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return S[T]}}),Object.defineProperty(B,F,M)}):(function(B,S,T,F){F===void 0&&(F=T),B[F]=S[T]})),i=Si&&Si.__setModuleDefault||(Object.create?(function(B,S){Object.defineProperty(B,"default",{enumerable:!0,value:S})}):function(B,S){B.default=S}),l=Si&&Si.__importStar||(function(){var B=function(S){return B=Object.getOwnPropertyNames||function(T){var F=[];for(var M in T)Object.prototype.hasOwnProperty.call(T,M)&&(F[F.length]=M);return F},B(S)};return function(S){if(S&&S.__esModule)return S;var T={};if(S!=null)for(var F=B(S),M=0;M<F.length;M++)F[M]!=="default"&&s(T,S,F[M]);return i(T,S),T}})();Object.defineProperty(n,"__esModule",{value:!0}),n.Utils=n.decodeAuthTokenPayload=n.parseAuthToken=n.verifyAuthToken=n.createAuthToken=n.getControlSubTypeName=n.getRequestTypeName=n.getDeviceRoleName=n.getPayloadVersionName=n.getPayloadTypeName=n.getRouteTypeName=n.numberToHex=n.byteToHex=n.bytesToHex=n.hexToBytes=n.Ed25519SignatureVerifier=n.ChannelCrypto=n.MeshCoreKeyStore=n.ControlSubType=n.RequestType=n.AdvertFlags=n.DeviceRole=n.PayloadVersion=n.PayloadType=n.RouteType=n.MeshCoreDecoder=n.MeshCorePacketDecoder=void 0;var c=qg();Object.defineProperty(n,"MeshCorePacketDecoder",{enumerable:!0,get:function(){return c.MeshCorePacketDecoder}});var u=qg();Object.defineProperty(n,"MeshCoreDecoder",{enumerable:!0,get:function(){return u.MeshCorePacketDecoder}});var p=ur();Object.defineProperty(n,"RouteType",{enumerable:!0,get:function(){return p.RouteType}}),Object.defineProperty(n,"PayloadType",{enumerable:!0,get:function(){return p.PayloadType}}),Object.defineProperty(n,"PayloadVersion",{enumerable:!0,get:function(){return p.PayloadVersion}}),Object.defineProperty(n,"DeviceRole",{enumerable:!0,get:function(){return p.DeviceRole}}),Object.defineProperty(n,"AdvertFlags",{enumerable:!0,get:function(){return p.AdvertFlags}}),Object.defineProperty(n,"RequestType",{enumerable:!0,get:function(){return p.RequestType}}),Object.defineProperty(n,"ControlSubType",{enumerable:!0,get:function(){return p.ControlSubType}});var d=ev();Object.defineProperty(n,"MeshCoreKeyStore",{enumerable:!0,get:function(){return d.MeshCoreKeyStore}});var g=J0();Object.defineProperty(n,"ChannelCrypto",{enumerable:!0,get:function(){return g.ChannelCrypto}});var m=mv();Object.defineProperty(n,"Ed25519SignatureVerifier",{enumerable:!0,get:function(){return m.Ed25519SignatureVerifier}});var x=bn();Object.defineProperty(n,"hexToBytes",{enumerable:!0,get:function(){return x.hexToBytes}}),Object.defineProperty(n,"bytesToHex",{enumerable:!0,get:function(){return x.bytesToHex}}),Object.defineProperty(n,"byteToHex",{enumerable:!0,get:function(){return x.byteToHex}}),Object.defineProperty(n,"numberToHex",{enumerable:!0,get:function(){return x.numberToHex}});var A=_l();Object.defineProperty(n,"getRouteTypeName",{enumerable:!0,get:function(){return A.getRouteTypeName}}),Object.defineProperty(n,"getPayloadTypeName",{enumerable:!0,get:function(){return A.getPayloadTypeName}}),Object.defineProperty(n,"getPayloadVersionName",{enumerable:!0,get:function(){return A.getPayloadVersionName}}),Object.defineProperty(n,"getDeviceRoleName",{enumerable:!0,get:function(){return A.getDeviceRoleName}}),Object.defineProperty(n,"getRequestTypeName",{enumerable:!0,get:function(){return A.getRequestTypeName}}),Object.defineProperty(n,"getControlSubTypeName",{enumerable:!0,get:function(){return A.getControlSubTypeName}});var _=$g();Object.defineProperty(n,"createAuthToken",{enumerable:!0,get:function(){return _.createAuthToken}}),Object.defineProperty(n,"verifyAuthToken",{enumerable:!0,get:function(){return _.verifyAuthToken}}),Object.defineProperty(n,"parseAuthToken",{enumerable:!0,get:function(){return _.parseAuthToken}}),Object.defineProperty(n,"decodeAuthTokenPayload",{enumerable:!0,get:function(){return _.decodeAuthTokenPayload}});const k=l(_l()),R=l(bn()),C=l($g()),w=uh();n.Utils={...k,...R,...C,derivePublicKey:w.derivePublicKey,validateKeyPair:w.validateKeyPair,sign:w.sign,verify:w.verify}})(Si)),Si}var jt=lE();function cE(n){return new Date(n*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}function uE(n){const s=[];return n.snr!==null&&n.snr!==void 0&&s.push(`SNR: ${n.snr.toFixed(1)} dB`),n.rssi!==null&&n.rssi!==void 0&&s.push(`RSSI: ${n.rssi} dBm`),s.join(" | ")}function dE(n,s){var i;try{const l=jt.MeshCoreDecoder.decode(n);if(!l.isValid)return{summary:"Invalid packet",routeType:"Unknown"};const c=jt.Utils.getRouteTypeName(l.routeType),u=jt.Utils.getPayloadTypeName(l.payloadType),p=l.path&&l.path.length>0?` via ${l.path.join("-")}`:"";let d=u,g;switch(l.payloadType){case jt.PayloadType.TextMessage:{const m=l.payload.decoded;m!=null&&m.sourceHash&&(m!=null&&m.destinationHash)?d=`DM from ${m.sourceHash} to ${m.destinationHash}${p}`:d=`DM${p}`;break}case jt.PayloadType.GroupText:{const m=l.payload.decoded;s!=null&&s.channel_name?s.sender?d=`GT from ${s.sender} in ${s.channel_name}${p}`:d=`GT in ${s.channel_name}${p}`:m!=null&&m.channelHash?d=`GT ch:${m.channelHash}${p}`:d=`GroupText${p}`;break}case jt.PayloadType.Advert:{const m=l.payload.decoded;if((i=m==null?void 0:m.appData)!=null&&i.name){const x=m.appData.deviceRole!==void 0?jt.Utils.getDeviceRoleName(m.appData.deviceRole):"";d=`Advert: ${m.appData.name}${x?` (${x})`:""}${p}`}else m!=null&&m.publicKey?d=`Advert: ${m.publicKey.slice(0,8)}...${p}`:d=`Advert${p}`;break}case jt.PayloadType.Ack:{d=`ACK${p}`;break}case jt.PayloadType.Request:{d=`Request${p}`;break}case jt.PayloadType.Response:{d=`Response${p}`;break}case jt.PayloadType.Trace:{d=`Trace${p}`;break}case jt.PayloadType.Path:{d=`Path${p}`;break}default:d=`${u}${p}`}return{summary:d,routeType:c,details:g}}catch{return{summary:"Decode error",routeType:"Unknown"}}}function fE(n){switch(n){case"Flood":return"bg-blue-500/20 text-blue-400";case"Direct":return"bg-green-500/20 text-green-400";case"Transport Flood":return"bg-purple-500/20 text-purple-400";case"Transport Direct":return"bg-orange-500/20 text-orange-400";default:return"bg-gray-500/20 text-gray-400"}}function hE(n){switch(n){case"Flood":return"F";case"Direct":return"D";case"Transport Flood":return"TF";case"Transport Direct":return"TD";default:return"?"}}function B0({packets:n}){const s=D.useRef(null),i=D.useMemo(()=>n.map(c=>({packet:c,decoded:dE(c.data,c.decrypted_info)})),[n]);if(D.useEffect(()=>{s.current&&(s.current.scrollTop=s.current.scrollHeight)},[n]),n.length===0)return b.jsx("div",{className:"h-full overflow-y-auto p-5 text-center text-muted-foreground",children:"No packets received yet. Packets will appear here in real-time."});const l=[...i].sort((c,u)=>c.packet.timestamp-u.packet.timestamp);return b.jsx("div",{className:"h-full overflow-y-auto p-4 flex flex-col gap-3",ref:s,children:l.map(({packet:c,decoded:u})=>b.jsxs("div",{className:"py-2 px-3 bg-muted rounded",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("span",{className:`text-[10px] font-mono px-1.5 py-0.5 rounded ${fE(u.routeType)}`,title:u.routeType,children:hE(u.routeType)}),!c.decrypted&&b.jsx("span",{title:"Encrypted",children:""}),b.jsx("span",{className:c.decrypted?"text-primary":"text-foreground",children:u.summary}),b.jsx("span",{className:"text-muted-foreground ml-auto text-sm",children:cE(c.timestamp)})]}),(c.snr!==null||c.rssi!==null)&&b.jsx("div",{className:"text-[11px] text-muted-foreground mt-0.5",children:uE(c)}),b.jsx("div",{className:"font-mono text-[10px] break-all text-muted-foreground/70 mt-1 p-1 bg-background/50 rounded",children:c.data.toUpperCase()})]},c.id))})}function gv(n,s){const i=D.useRef(s);D.useEffect(function(){s!==i.current&&n.attributionControl!=null&&(i.current!=null&&n.attributionControl.removeAttribution(i.current),s!=null&&n.attributionControl.addAttribution(s)),i.current=s},[n,s])}function pE(n,s,i){s.center!==i.center&&n.setLatLng(s.center),s.radius!=null&&s.radius!==i.radius&&n.setRadius(s.radius)}const mE=1;function gE(n){return Object.freeze({__version:mE,map:n})}function xE(n,s){return Object.freeze({...n,...s})}const xv=D.createContext(null),Av=xv.Provider;function vd(){const n=D.useContext(xv);if(n==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}function AE(n){function s(i,l){const{instance:c,context:u}=n(i).current;return D.useImperativeHandle(l,()=>c),i.children==null?null:Te.createElement(Av,{value:u},i.children)}return D.forwardRef(s)}function vE(n){function s(i,l){const[c,u]=D.useState(!1),{instance:p}=n(i,u).current;D.useImperativeHandle(l,()=>p),D.useEffect(function(){c&&p.update()},[p,c,i.children]);const d=p._contentNode;return d?j0.createPortal(i.children,d):null}return D.forwardRef(s)}function yE(n){function s(i,l){const{instance:c}=n(i).current;return D.useImperativeHandle(l,()=>c),null}return D.forwardRef(s)}function dh(n,s){const i=D.useRef();D.useEffect(function(){return s!=null&&n.instance.on(s),i.current=s,function(){i.current!=null&&n.instance.off(i.current),i.current=null}},[n,s])}function yd(n,s){const i=n.pane??s.pane;return i?{...n,pane:i}:n}function _E(n,s){return function(l,c){const u=vd(),p=n(yd(l,u),u);return gv(u.map,l.attribution),dh(p.current,l.eventHandlers),s(p.current,u,l,c),p}}var gl={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var wE=gl.exports,Qg;function bE(){return Qg||(Qg=1,(function(n,s){(function(i,l){l(s)})(wE,(function(i){var l="1.9.4";function c(t){var o,f,v,P;for(f=1,v=arguments.length;f<v;f++){P=arguments[f];for(o in P)t[o]=P[o]}return t}var u=Object.create||(function(){function t(){}return function(o){return t.prototype=o,new t}})();function p(t,o){var f=Array.prototype.slice;if(t.bind)return t.bind.apply(t,f.call(arguments,1));var v=f.call(arguments,2);return function(){return t.apply(o,v.length?v.concat(f.call(arguments)):arguments)}}var d=0;function g(t){return"_leaflet_id"in t||(t._leaflet_id=++d),t._leaflet_id}function m(t,o,f){var v,P,O,Q;return Q=function(){v=!1,P&&(O.apply(f,P),P=!1)},O=function(){v?P=arguments:(t.apply(f,arguments),setTimeout(Q,o),v=!0)},O}function x(t,o,f){var v=o[1],P=o[0],O=v-P;return t===v&&f?t:((t-P)%O+O)%O+P}function A(){return!1}function _(t,o){if(o===!1)return t;var f=Math.pow(10,o===void 0?6:o);return Math.round(t*f)/f}function k(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function R(t){return k(t).split(/\s+/)}function C(t,o){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?u(t.options):{});for(var f in o)t.options[f]=o[f];return t.options}function w(t,o,f){var v=[];for(var P in t)v.push(encodeURIComponent(f?P.toUpperCase():P)+"="+encodeURIComponent(t[P]));return(!o||o.indexOf("?")===-1?"?":"&")+v.join("&")}var B=/\{ *([\w_ -]+) *\}/g;function S(t,o){return t.replace(B,function(f,v){var P=o[v];if(P===void 0)throw new Error("No value provided for variable "+f);return typeof P=="function"&&(P=P(o)),P})}var T=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function F(t,o){for(var f=0;f<t.length;f++)if(t[f]===o)return f;return-1}var M="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function z(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var H=0;function j(t){var o=+new Date,f=Math.max(0,16-(o-H));return H=o+f,window.setTimeout(t,f)}var X=window.requestAnimationFrame||z("RequestAnimationFrame")||j,V=window.cancelAnimationFrame||z("CancelAnimationFrame")||z("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function $(t,o,f){if(f&&X===j)t.call(o);else return X.call(window,p(t,o))}function ee(t){t&&V.call(window,t)}var W={__proto__:null,extend:c,create:u,bind:p,get lastId(){return d},stamp:g,throttle:m,wrapNum:x,falseFn:A,formatNum:_,trim:k,splitWords:R,setOptions:C,getParamString:w,template:S,isArray:T,indexOf:F,emptyImageUrl:M,requestFn:X,cancelFn:V,requestAnimFrame:$,cancelAnimFrame:ee};function re(){}re.extend=function(t){var o=function(){C(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},f=o.__super__=this.prototype,v=u(f);v.constructor=o,o.prototype=v;for(var P in this)Object.prototype.hasOwnProperty.call(this,P)&&P!=="prototype"&&P!=="__super__"&&(o[P]=this[P]);return t.statics&&c(o,t.statics),t.includes&&(pe(t.includes),c.apply(null,[v].concat(t.includes))),c(v,t),delete v.statics,delete v.includes,v.options&&(v.options=f.options?u(f.options):{},c(v.options,t.options)),v._initHooks=[],v.callInitHooks=function(){if(!this._initHooksCalled){f.callInitHooks&&f.callInitHooks.call(this),this._initHooksCalled=!0;for(var O=0,Q=v._initHooks.length;O<Q;O++)v._initHooks[O].call(this)}},o},re.include=function(t){var o=this.prototype.options;return c(this.prototype,t),t.options&&(this.prototype.options=o,this.mergeOptions(t.options)),this},re.mergeOptions=function(t){return c(this.prototype.options,t),this},re.addInitHook=function(t){var o=Array.prototype.slice.call(arguments,1),f=typeof t=="function"?t:function(){this[t].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(f),this};function pe(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=T(t)?t:[t];for(var o=0;o<t.length;o++)t[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ie={on:function(t,o,f){if(typeof t=="object")for(var v in t)this._on(v,t[v],o);else{t=R(t);for(var P=0,O=t.length;P<O;P++)this._on(t[P],o,f)}return this},off:function(t,o,f){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var v in t)this._off(v,t[v],o);else{t=R(t);for(var P=arguments.length===1,O=0,Q=t.length;O<Q;O++)P?this._off(t[O]):this._off(t[O],o,f)}return this},_on:function(t,o,f,v){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(t,o,f)===!1){f===this&&(f=void 0);var P={fn:o,ctx:f};v&&(P.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(P)}},_off:function(t,o,f){var v,P,O;if(this._events&&(v=this._events[t],!!v)){if(arguments.length===1){if(this._firingCount)for(P=0,O=v.length;P<O;P++)v[P].fn=A;delete this._events[t];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var Q=this._listens(t,o,f);if(Q!==!1){var se=v[Q];this._firingCount&&(se.fn=A,this._events[t]=v=v.slice()),v.splice(Q,1)}}},fire:function(t,o,f){if(!this.listens(t,f))return this;var v=c({},o,{type:t,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var P=this._events[t];if(P){this._firingCount=this._firingCount+1||1;for(var O=0,Q=P.length;O<Q;O++){var se=P[O],ce=se.fn;se.once&&this.off(t,ce,se.ctx),ce.call(se.ctx||this,v)}this._firingCount--}}return f&&this._propagateEvent(v),this},listens:function(t,o,f,v){typeof t!="string"&&console.warn('"string" type argument expected');var P=o;typeof o!="function"&&(v=!!o,P=void 0,f=void 0);var O=this._events&&this._events[t];if(O&&O.length&&this._listens(t,P,f)!==!1)return!0;if(v){for(var Q in this._eventParents)if(this._eventParents[Q].listens(t,o,f,v))return!0}return!1},_listens:function(t,o,f){if(!this._events)return!1;var v=this._events[t]||[];if(!o)return!!v.length;f===this&&(f=void 0);for(var P=0,O=v.length;P<O;P++)if(v[P].fn===o&&v[P].ctx===f)return P;return!1},once:function(t,o,f){if(typeof t=="object")for(var v in t)this._on(v,t[v],o,!0);else{t=R(t);for(var P=0,O=t.length;P<O;P++)this._on(t[P],o,f,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[g(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[g(t)],this},_propagateEvent:function(t){for(var o in this._eventParents)this._eventParents[o].fire(t.type,c({layer:t.target,propagatedFrom:t.target},t),!0)}};ie.addEventListener=ie.on,ie.removeEventListener=ie.clearAllEventListeners=ie.off,ie.addOneTimeEventListener=ie.once,ie.fireEvent=ie.fire,ie.hasEventListeners=ie.listens;var Ae=re.extend(ie);function G(t,o,f){this.x=f?Math.round(t):t,this.y=f?Math.round(o):o}var xe=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};G.prototype={clone:function(){return new G(this.x,this.y)},add:function(t){return this.clone()._add(Z(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(Z(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new G(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new G(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=xe(this.x),this.y=xe(this.y),this},distanceTo:function(t){t=Z(t);var o=t.x-this.x,f=t.y-this.y;return Math.sqrt(o*o+f*f)},equals:function(t){return t=Z(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=Z(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+_(this.x)+", "+_(this.y)+")"}};function Z(t,o,f){return t instanceof G?t:T(t)?new G(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new G(t.x,t.y):new G(t,o,f)}function N(t,o){if(t)for(var f=o?[t,o]:t,v=0,P=f.length;v<P;v++)this.extend(f[v])}N.prototype={extend:function(t){var o,f;if(!t)return this;if(t instanceof G||typeof t[0]=="number"||"x"in t)o=f=Z(t);else if(t=U(t),o=t.min,f=t.max,!o||!f)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=f.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(f.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(f.y,this.max.y)),this},getCenter:function(t){return Z((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return Z(this.min.x,this.max.y)},getTopRight:function(){return Z(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var o,f;return typeof t[0]=="number"||t instanceof G?t=Z(t):t=U(t),t instanceof N?(o=t.min,f=t.max):o=f=t,o.x>=this.min.x&&f.x<=this.max.x&&o.y>=this.min.y&&f.y<=this.max.y},intersects:function(t){t=U(t);var o=this.min,f=this.max,v=t.min,P=t.max,O=P.x>=o.x&&v.x<=f.x,Q=P.y>=o.y&&v.y<=f.y;return O&&Q},overlaps:function(t){t=U(t);var o=this.min,f=this.max,v=t.min,P=t.max,O=P.x>o.x&&v.x<f.x,Q=P.y>o.y&&v.y<f.y;return O&&Q},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var o=this.min,f=this.max,v=Math.abs(o.x-f.x)*t,P=Math.abs(o.y-f.y)*t;return U(Z(o.x-v,o.y-P),Z(f.x+v,f.y+P))},equals:function(t){return t?(t=U(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function U(t,o){return!t||t instanceof N?t:new N(t,o)}function K(t,o){if(t)for(var f=o?[t,o]:t,v=0,P=f.length;v<P;v++)this.extend(f[v])}K.prototype={extend:function(t){var o=this._southWest,f=this._northEast,v,P;if(t instanceof fe)v=t,P=t;else if(t instanceof K){if(v=t._southWest,P=t._northEast,!v||!P)return this}else return t?this.extend(me(t)||Y(t)):this;return!o&&!f?(this._southWest=new fe(v.lat,v.lng),this._northEast=new fe(P.lat,P.lng)):(o.lat=Math.min(v.lat,o.lat),o.lng=Math.min(v.lng,o.lng),f.lat=Math.max(P.lat,f.lat),f.lng=Math.max(P.lng,f.lng)),this},pad:function(t){var o=this._southWest,f=this._northEast,v=Math.abs(o.lat-f.lat)*t,P=Math.abs(o.lng-f.lng)*t;return new K(new fe(o.lat-v,o.lng-P),new fe(f.lat+v,f.lng+P))},getCenter:function(){return new fe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new fe(this.getNorth(),this.getWest())},getSouthEast:function(){return new fe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof fe||"lat"in t?t=me(t):t=Y(t);var o=this._southWest,f=this._northEast,v,P;return t instanceof K?(v=t.getSouthWest(),P=t.getNorthEast()):v=P=t,v.lat>=o.lat&&P.lat<=f.lat&&v.lng>=o.lng&&P.lng<=f.lng},intersects:function(t){t=Y(t);var o=this._southWest,f=this._northEast,v=t.getSouthWest(),P=t.getNorthEast(),O=P.lat>=o.lat&&v.lat<=f.lat,Q=P.lng>=o.lng&&v.lng<=f.lng;return O&&Q},overlaps:function(t){t=Y(t);var o=this._southWest,f=this._northEast,v=t.getSouthWest(),P=t.getNorthEast(),O=P.lat>o.lat&&v.lat<f.lat,Q=P.lng>o.lng&&v.lng<f.lng;return O&&Q},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,o){return t?(t=Y(t),this._southWest.equals(t.getSouthWest(),o)&&this._northEast.equals(t.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Y(t,o){return t instanceof K?t:new K(t,o)}function fe(t,o,f){if(isNaN(t)||isNaN(o))throw new Error("Invalid LatLng object: ("+t+", "+o+")");this.lat=+t,this.lng=+o,f!==void 0&&(this.alt=+f)}fe.prototype={equals:function(t,o){if(!t)return!1;t=me(t);var f=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return f<=(o===void 0?1e-9:o)},toString:function(t){return"LatLng("+_(this.lat,t)+", "+_(this.lng,t)+")"},distanceTo:function(t){return we.distance(this,me(t))},wrap:function(){return we.wrapLatLng(this)},toBounds:function(t){var o=180*t/40075017,f=o/Math.cos(Math.PI/180*this.lat);return Y([this.lat-o,this.lng-f],[this.lat+o,this.lng+f])},clone:function(){return new fe(this.lat,this.lng,this.alt)}};function me(t,o,f){return t instanceof fe?t:T(t)&&typeof t[0]!="object"?t.length===3?new fe(t[0],t[1],t[2]):t.length===2?new fe(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new fe(t.lat,"lng"in t?t.lng:t.lon,t.alt):o===void 0?null:new fe(t,o,f)}var Se={latLngToPoint:function(t,o){var f=this.projection.project(t),v=this.scale(o);return this.transformation._transform(f,v)},pointToLatLng:function(t,o){var f=this.scale(o),v=this.transformation.untransform(t,f);return this.projection.unproject(v)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var o=this.projection.bounds,f=this.scale(t),v=this.transformation.transform(o.min,f),P=this.transformation.transform(o.max,f);return new N(v,P)},infinite:!1,wrapLatLng:function(t){var o=this.wrapLng?x(t.lng,this.wrapLng,!0):t.lng,f=this.wrapLat?x(t.lat,this.wrapLat,!0):t.lat,v=t.alt;return new fe(f,o,v)},wrapLatLngBounds:function(t){var o=t.getCenter(),f=this.wrapLatLng(o),v=o.lat-f.lat,P=o.lng-f.lng;if(v===0&&P===0)return t;var O=t.getSouthWest(),Q=t.getNorthEast(),se=new fe(O.lat-v,O.lng-P),ce=new fe(Q.lat-v,Q.lng-P);return new K(se,ce)}},we=c({},Se,{wrapLng:[-180,180],R:6371e3,distance:function(t,o){var f=Math.PI/180,v=t.lat*f,P=o.lat*f,O=Math.sin((o.lat-t.lat)*f/2),Q=Math.sin((o.lng-t.lng)*f/2),se=O*O+Math.cos(v)*Math.cos(P)*Q*Q,ce=2*Math.atan2(Math.sqrt(se),Math.sqrt(1-se));return this.R*ce}}),de=6378137,he={R:de,MAX_LATITUDE:85.0511287798,project:function(t){var o=Math.PI/180,f=this.MAX_LATITUDE,v=Math.max(Math.min(f,t.lat),-f),P=Math.sin(v*o);return new G(this.R*t.lng*o,this.R*Math.log((1+P)/(1-P))/2)},unproject:function(t){var o=180/Math.PI;return new fe((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*o,t.x*o/this.R)},bounds:(function(){var t=de*Math.PI;return new N([-t,-t],[t,t])})()};function Ze(t,o,f,v){if(T(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=o,this._c=f,this._d=v}Ze.prototype={transform:function(t,o){return this._transform(t.clone(),o)},_transform:function(t,o){return o=o||1,t.x=o*(this._a*t.x+this._b),t.y=o*(this._c*t.y+this._d),t},untransform:function(t,o){return o=o||1,new G((t.x/o-this._b)/this._a,(t.y/o-this._d)/this._c)}};function Fe(t,o,f,v){return new Ze(t,o,f,v)}var ge=c({},we,{code:"EPSG:3857",projection:he,transformation:(function(){var t=.5/(Math.PI*he.R);return Fe(t,.5,-t,.5)})()}),Le=c({},ge,{code:"EPSG:900913"});function We(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function lt(t,o){var f="",v,P,O,Q,se,ce;for(v=0,O=t.length;v<O;v++){for(se=t[v],P=0,Q=se.length;P<Q;P++)ce=se[P],f+=(P?"L":"M")+ce.x+" "+ce.y;f+=o?je.svg?"z":"x":""}return f||"M0 0"}var et=document.documentElement.style,Ne="ActiveXObject"in window,Ue=Ne&&!document.addEventListener,ot="msLaunchUri"in navigator&&!("documentMode"in document),tt=Jt("webkit"),oe=Jt("android"),Re=Jt("android 2")||Jt("android 3"),qe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ve=oe&&Jt("Google")&&qe<537&&!("AudioNode"in window),Me=!!window.opera,yt=!ot&&Jt("chrome"),Pt=Jt("gecko")&&!tt&&!Me&&!Ne,Nt=!yt&&Jt("safari"),Wt=Jt("phantom"),Ft="OTransition"in et,Et=navigator.platform.indexOf("Win")===0,An=Ne&&"transition"in et,Cn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Re,ye="MozPerspective"in et,Pe=!window.L_DISABLE_3D&&(An||Cn||ye)&&!Ft&&!Wt,ze=typeof orientation<"u"||Jt("mobile"),mt=ze&&tt,ne=ze&&Cn,_e=!window.PointerEvent&&window.MSPointerEvent,Ee=!!(window.PointerEvent||_e),Oe="ontouchstart"in window||!!window.TouchEvent,st=!window.L_NO_TOUCH&&(Oe||Ee),He=ze&&Me,kt=ze&&Pt,Ot=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,qt=(function(){var t=!1;try{var o=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",A,o),window.removeEventListener("testPassiveEventSupport",A,o)}catch{}return t})(),Hn=(function(){return!!document.createElement("canvas").getContext})(),gt=!!(document.createElementNS&&We("svg").createSVGRect),Lt=!!gt&&(function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Yn=!gt&&(function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var o=t.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}})(),St=navigator.platform.indexOf("Mac")===0,Gt=navigator.platform.indexOf("Linux")===0;function Jt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var je={ie:Ne,ielt9:Ue,edge:ot,webkit:tt,android:oe,android23:Re,androidStock:ve,opera:Me,chrome:yt,gecko:Pt,safari:Nt,phantom:Wt,opera12:Ft,win:Et,ie3d:An,webkit3d:Cn,gecko3d:ye,any3d:Pe,mobile:ze,mobileWebkit:mt,mobileWebkit3d:ne,msPointer:_e,pointer:Ee,touch:st,touchNative:Oe,mobileOpera:He,mobileGecko:kt,retina:Ot,passiveEvents:qt,canvas:Hn,svg:gt,vml:Yn,inlineSvg:Lt,mac:St,linux:Gt},Ri=je.msPointer?"MSPointerDown":"pointerdown",ls=je.msPointer?"MSPointerMove":"pointermove",Pl=je.msPointer?"MSPointerUp":"pointerup",Tl=je.msPointer?"MSPointerCancel":"pointercancel",da={touchstart:Ri,touchmove:ls,touchend:Pl,touchcancel:Tl},Vr={touchstart:Kt,touchmove:cs,touchend:cs,touchcancel:cs},si={},fa=!1;function Cd(t,o,f){return o==="touchstart"&&Ed(),Vr[o]?(f=Vr[o].bind(this,f),t.addEventListener(da[o],f,!1),f):(console.warn("wrong event specified:",o),A)}function Dl(t,o,f){if(!da[o]){console.warn("wrong event specified:",o);return}t.removeEventListener(da[o],f,!1)}function Rl(t){si[t.pointerId]=t}function Nl(t){si[t.pointerId]&&(si[t.pointerId]=t)}function ha(t){delete si[t.pointerId]}function Ed(){fa||(document.addEventListener(Ri,Rl,!0),document.addEventListener(ls,Nl,!0),document.addEventListener(Pl,ha,!0),document.addEventListener(Tl,ha,!0),fa=!0)}function cs(t,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var f in si)o.touches.push(si[f]);o.changedTouches=[o],t(o)}}function Kt(t,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&Qt(o),cs(t,o)}function kd(t){var o={},f,v;for(v in t)f=t[v],o[v]=f&&f.bind?f.bind(t):f;return t=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var pa=200;function Fl(t,o){t.addEventListener("dblclick",o);var f=0,v;function P(O){if(O.detail!==1){v=O.detail;return}if(!(O.pointerType==="mouse"||O.sourceCapabilities&&!O.sourceCapabilities.firesTouchEvents)){var Q=ci(O);if(!(Q.some(function(ce){return ce instanceof HTMLLabelElement&&ce.attributes.for})&&!Q.some(function(ce){return ce instanceof HTMLInputElement||ce instanceof HTMLSelectElement}))){var se=Date.now();se-f<=pa?(v++,v===2&&o(kd(O))):v=1,f=se}}}return t.addEventListener("click",P),{dblclick:o,simDblclick:P}}function us(t,o){t.removeEventListener("dblclick",o.dblclick),t.removeEventListener("click",o.simDblclick)}var ma=Mi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ni=Mi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),yo=Ni==="webkitTransition"||Ni==="OTransition"?Ni+"End":"transitionend";function Xn(t){return typeof t=="string"?document.getElementById(t):t}function _o(t,o){var f=t.style[o]||t.currentStyle&&t.currentStyle[o];if((!f||f==="auto")&&document.defaultView){var v=document.defaultView.getComputedStyle(t,null);f=v?v[o]:null}return f==="auto"?null:f}function ft(t,o,f){var v=document.createElement(t);return v.className=o||"",f&&f.appendChild(v),v}function Vt(t){var o=t.parentNode;o&&o.removeChild(t)}function ds(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Fi(t){var o=t.parentNode;o&&o.lastChild!==t&&o.appendChild(t)}function kr(t){var o=t.parentNode;o&&o.firstChild!==t&&o.insertBefore(t,o.firstChild)}function Li(t,o){if(t.classList!==void 0)return t.classList.contains(o);var f=fs(t);return f.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(f)}function ut(t,o){if(t.classList!==void 0)for(var f=R(o),v=0,P=f.length;v<P;v++)t.classList.add(f[v]);else if(!Li(t,o)){var O=fs(t);ga(t,(O?O+" ":"")+o)}}function zt(t,o){t.classList!==void 0?t.classList.remove(o):ga(t,k((" "+fs(t)+" ").replace(" "+o+" "," ")))}function ga(t,o){t.className.baseVal===void 0?t.className=o:t.className.baseVal=o}function fs(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function En(t,o){"opacity"in t.style?t.style.opacity=o:"filter"in t.style&&Ll(t,o)}function Ll(t,o){var f=!1,v="DXImageTransform.Microsoft.Alpha";try{f=t.filters.item(v)}catch{if(o===1)return}o=Math.round(o*100),f?(f.Enabled=o!==100,f.Opacity=o):t.style.filter+=" progid:"+v+"(opacity="+o+")"}function Mi(t){for(var o=document.documentElement.style,f=0;f<t.length;f++)if(t[f]in o)return t[f];return!1}function Jn(t,o,f){var v=o||new G(0,0);t.style[ma]=(je.ie3d?"translate("+v.x+"px,"+v.y+"px)":"translate3d("+v.x+"px,"+v.y+"px,0)")+(f?" scale("+f+")":"")}function en(t,o){t._leaflet_pos=o,je.any3d?Jn(t,o):(t.style.left=o.x+"px",t.style.top=o.y+"px")}function Sr(t){return t._leaflet_pos||new G(0,0)}var Ct,Ii,hs;if("onselectstart"in document)Ct=function(){at(window,"selectstart",Qt)},Ii=function(){Mt(window,"selectstart",Qt)};else{var ai=Mi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ct=function(){if(ai){var t=document.documentElement.style;hs=t[ai],t[ai]="none"}},Ii=function(){ai&&(document.documentElement.style[ai]=hs,hs=void 0)}}function ps(){at(window,"dragstart",Qt)}function ms(){Mt(window,"dragstart",Qt)}var wo,bo;function Oi(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(er(),wo=t,bo=t.style.outlineStyle,t.style.outlineStyle="none",at(window,"keydown",er))}function er(){wo&&(wo.style.outlineStyle=bo,wo=void 0,bo=void 0,Mt(window,"keydown",er))}function Br(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function dr(t){var o=t.getBoundingClientRect();return{x:o.width/t.offsetWidth||1,y:o.height/t.offsetHeight||1,boundingClientRect:o}}var Co={__proto__:null,TRANSFORM:ma,TRANSITION:Ni,TRANSITION_END:yo,get:Xn,getStyle:_o,create:ft,remove:Vt,empty:ds,toFront:Fi,toBack:kr,hasClass:Li,addClass:ut,removeClass:zt,setClass:ga,getClass:fs,setOpacity:En,testProp:Mi,setTransform:Jn,setPosition:en,getPosition:Sr,get disableTextSelection(){return Ct},get enableTextSelection(){return Ii},disableImageDrag:ps,enableImageDrag:ms,preventOutline:Oi,restoreOutline:er,getSizedParentNode:Br,getScale:dr};function at(t,o,f,v){if(o&&typeof o=="object")for(var P in o)Aa(t,P,o[P],f);else{o=R(o);for(var O=0,Q=o.length;O<Q;O++)Aa(t,o[O],f,v)}return this}var an="_leaflet_events";function Mt(t,o,f,v){if(arguments.length===1)xa(t),delete t[an];else if(o&&typeof o=="object")for(var P in o)gs(t,P,o[P],f);else if(o=R(o),arguments.length===2)xa(t,function(se){return F(o,se)!==-1});else for(var O=0,Q=o.length;O<Q;O++)gs(t,o[O],f,v);return this}function xa(t,o){for(var f in t[an]){var v=f.split(/\d/)[0];(!o||o(v))&&gs(t,v,null,null,f)}}var li={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Aa(t,o,f,v){var P=o+g(f)+(v?"_"+g(v):"");if(t[an]&&t[an][P])return this;var O=function(se){return f.call(v||t,se||window.event)},Q=O;!je.touchNative&&je.pointer&&o.indexOf("touch")===0?O=Cd(t,o,O):je.touch&&o==="dblclick"?O=Fl(t,O):"addEventListener"in t?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?t.addEventListener(li[o]||o,O,je.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(O=function(se){se=se||window.event,So(t,se)&&Q(se)},t.addEventListener(li[o],O,!1)):t.addEventListener(o,Q,!1):t.attachEvent("on"+o,O),t[an]=t[an]||{},t[an][P]=O}function gs(t,o,f,v,P){P=P||o+g(f)+(v?"_"+g(v):"");var O=t[an]&&t[an][P];if(!O)return this;!je.touchNative&&je.pointer&&o.indexOf("touch")===0?Dl(t,o,O):je.touch&&o==="dblclick"?us(t,O):"removeEventListener"in t?t.removeEventListener(li[o]||o,O,!1):t.detachEvent("on"+o,O),t[an][P]=null}function fr(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function xs(t){return Aa(t,"wheel",fr),this}function Eo(t){return at(t,"mousedown touchstart dblclick contextmenu",fr),t._leaflet_disable_click=!0,this}function Qt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function tr(t){return Qt(t),fr(t),this}function ci(t){if(t.composedPath)return t.composedPath();for(var o=[],f=t.target;f;)o.push(f),f=f.parentNode;return o}function ko(t,o){if(!o)return new G(t.clientX,t.clientY);var f=dr(o),v=f.boundingClientRect;return new G((t.clientX-v.left)/f.x-o.clientLeft,(t.clientY-v.top)/f.y-o.clientTop)}var Sd=je.linux&&je.chrome?window.devicePixelRatio:je.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ml(t){return je.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Sd:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function So(t,o){var f=o.relatedTarget;if(!f)return!0;try{for(;f&&f!==t;)f=f.parentNode}catch{return!1}return f!==t}var As={__proto__:null,on:at,off:Mt,stopPropagation:fr,disableScrollPropagation:xs,disableClickPropagation:Eo,preventDefault:Qt,stop:tr,getPropagationPath:ci,getMousePosition:ko,getWheelDelta:Ml,isExternalTarget:So,addListener:at,removeListener:Mt},vs=Ae.extend({run:function(t,o,f,v){this.stop(),this._el=t,this._inProgress=!0,this._duration=f||.25,this._easeOutPower=1/Math.max(v||.5,.2),this._startPos=Sr(t),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=$(this._animate,this),this._step()},_step:function(t){var o=+new Date-this._startTime,f=this._duration*1e3;o<f?this._runFrame(this._easeOut(o/f),t):(this._runFrame(1),this._complete())},_runFrame:function(t,o){var f=this._startPos.add(this._offset.multiplyBy(t));o&&f._round(),en(this._el,f),this.fire("step")},_complete:function(){ee(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),_t=Ae.extend({options:{crs:ge,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,o){o=C(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=p(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(me(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ni&&je.any3d&&!je.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),at(this._proxy,yo,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,o,f){if(o=o===void 0?this._zoom:this._limitZoom(o),t=this._limitCenter(me(t),o,this.options.maxBounds),f=f||{},this._stop(),this._loaded&&!f.reset&&f!==!0){f.animate!==void 0&&(f.zoom=c({animate:f.animate},f.zoom),f.pan=c({animate:f.animate,duration:f.duration},f.pan));var v=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,o,f.zoom):this._tryAnimatedPan(t,f.pan);if(v)return clearTimeout(this._sizeTimer),this}return this._resetView(t,o,f.pan&&f.pan.noMoveStart),this},setZoom:function(t,o){return this._loaded?this.setView(this.getCenter(),t,{zoom:o}):(this._zoom=t,this)},zoomIn:function(t,o){return t=t||(je.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,o)},zoomOut:function(t,o){return t=t||(je.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,o)},setZoomAround:function(t,o,f){var v=this.getZoomScale(o),P=this.getSize().divideBy(2),O=t instanceof G?t:this.latLngToContainerPoint(t),Q=O.subtract(P).multiplyBy(1-1/v),se=this.containerPointToLatLng(P.add(Q));return this.setView(se,o,{zoom:f})},_getBoundsCenterZoom:function(t,o){o=o||{},t=t.getBounds?t.getBounds():Y(t);var f=Z(o.paddingTopLeft||o.padding||[0,0]),v=Z(o.paddingBottomRight||o.padding||[0,0]),P=this.getBoundsZoom(t,!1,f.add(v));if(P=typeof o.maxZoom=="number"?Math.min(o.maxZoom,P):P,P===1/0)return{center:t.getCenter(),zoom:P};var O=v.subtract(f).divideBy(2),Q=this.project(t.getSouthWest(),P),se=this.project(t.getNorthEast(),P),ce=this.unproject(Q.add(se).divideBy(2).add(O),P);return{center:ce,zoom:P}},fitBounds:function(t,o){if(t=Y(t),!t.isValid())throw new Error("Bounds are not valid.");var f=this._getBoundsCenterZoom(t,o);return this.setView(f.center,f.zoom,o)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,o){return this.setView(t,this._zoom,{pan:o})},panBy:function(t,o){if(t=Z(t).round(),o=o||{},!t.x&&!t.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new vs,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){ut(this._mapPane,"leaflet-pan-anim");var f=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,f,o.duration||.25,o.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,o,f){if(f=f||{},f.animate===!1||!je.any3d)return this.setView(t,o,f);this._stop();var v=this.project(this.getCenter()),P=this.project(t),O=this.getSize(),Q=this._zoom;t=me(t),o=o===void 0?Q:o;var se=Math.max(O.x,O.y),ce=se*this.getZoomScale(Q,o),be=P.distanceTo(v)||1,Ie=1.42,nt=Ie*Ie;function ht(Dt){var Ji=Dt?-1:1,Hd=Dt?ce:se,Vd=ce*ce-se*se+Ji*nt*nt*be*be,gi=2*Hd*nt*be,xi=Vd/gi,Ai=Math.sqrt(xi*xi+1)-xi,Ns=Ai<1e-9?-18:Math.log(Ai);return Ns}function ln(Dt){return(Math.exp(Dt)-Math.exp(-Dt))/2}function on(Dt){return(Math.exp(Dt)+Math.exp(-Dt))/2}function Ln(Dt){return ln(Dt)/on(Dt)}var Sn=ht(0);function Yi(Dt){return se*(on(Sn)/on(Sn+Ie*Dt))}function ja(Dt){return se*(on(Sn)*Ln(Sn+Ie*Dt)-ln(Sn))/nt}function Qr(Dt){return 1-Math.pow(1-Dt,1.5)}var rc=Date.now(),mi=(ht(1)-Sn)/Ie,gr=f.duration?1e3*f.duration:1e3*mi*.8;function Xi(){var Dt=(Date.now()-rc)/gr,Ji=Qr(Dt)*mi;Dt<=1?(this._flyToFrame=$(Xi,this),this._move(this.unproject(v.add(P.subtract(v).multiplyBy(ja(Ji)/be)),Q),this.getScaleZoom(se/Yi(Ji),Q),{flyTo:!0})):this._move(t,o)._moveEnd(!0)}return this._moveStart(!0,f.noMoveStart),Xi.call(this),this},flyToBounds:function(t,o){var f=this._getBoundsCenterZoom(t,o);return this.flyTo(f.center,f.zoom,o)},setMaxBounds:function(t){return t=Y(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var o=this.options.minZoom;return this.options.minZoom=t,this._loaded&&o!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var o=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&o!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,o){this._enforcingBounds=!0;var f=this.getCenter(),v=this._limitCenter(f,this._zoom,Y(t));return f.equals(v)||this.panTo(v,o),this._enforcingBounds=!1,this},panInside:function(t,o){o=o||{};var f=Z(o.paddingTopLeft||o.padding||[0,0]),v=Z(o.paddingBottomRight||o.padding||[0,0]),P=this.project(this.getCenter()),O=this.project(t),Q=this.getPixelBounds(),se=U([Q.min.add(f),Q.max.subtract(v)]),ce=se.getSize();if(!se.contains(O)){this._enforcingBounds=!0;var be=O.subtract(se.getCenter()),Ie=se.extend(O).getSize().subtract(ce);P.x+=be.x<0?-Ie.x:Ie.x,P.y+=be.y<0?-Ie.y:Ie.y,this.panTo(this.unproject(P),o),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=c({animate:!1,pan:!0},t===!0?{animate:!0}:t);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var f=this.getSize(),v=o.divideBy(2).round(),P=f.divideBy(2).round(),O=v.subtract(P);return!O.x&&!O.y?this:(t.animate&&t.pan?this.panBy(O):(t.pan&&this._rawPanBy(O),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(p(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:f}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=c({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=p(this._handleGeolocationResponse,this),f=p(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,f,t):navigator.geolocation.getCurrentPosition(o,f,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var o=t.code,f=t.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+f+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var o=t.coords.latitude,f=t.coords.longitude,v=new fe(o,f),P=v.toBounds(t.coords.accuracy*2),O=this._locateOptions;if(O.setView){var Q=this.getBoundsZoom(P);this.setView(v,O.maxZoom?Math.min(Q,O.maxZoom):Q)}var se={latlng:v,bounds:P,timestamp:t.timestamp};for(var ce in t.coords)typeof t.coords[ce]=="number"&&(se[ce]=t.coords[ce]);this.fire("locationfound",se)}},addHandler:function(t,o){if(!o)return this;var f=this[t]=new o(this);return this._handlers.push(f),this.options[t]&&f.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Vt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ee(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)Vt(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,o){var f="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),v=ft("div",f,o||this._mapPane);return t&&(this._panes[t]=v),v},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),o=this.unproject(t.getBottomLeft()),f=this.unproject(t.getTopRight());return new K(o,f)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,o,f){t=Y(t),f=Z(f||[0,0]);var v=this.getZoom()||0,P=this.getMinZoom(),O=this.getMaxZoom(),Q=t.getNorthWest(),se=t.getSouthEast(),ce=this.getSize().subtract(f),be=U(this.project(se,v),this.project(Q,v)).getSize(),Ie=je.any3d?this.options.zoomSnap:1,nt=ce.x/be.x,ht=ce.y/be.y,ln=o?Math.max(nt,ht):Math.min(nt,ht);return v=this.getScaleZoom(ln,v),Ie&&(v=Math.round(v/(Ie/100))*(Ie/100),v=o?Math.ceil(v/Ie)*Ie:Math.floor(v/Ie)*Ie),Math.max(P,Math.min(O,v))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new G(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,o){var f=this._getTopLeftPoint(t,o);return new N(f,f.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,o){var f=this.options.crs;return o=o===void 0?this._zoom:o,f.scale(t)/f.scale(o)},getScaleZoom:function(t,o){var f=this.options.crs;o=o===void 0?this._zoom:o;var v=f.zoom(t*f.scale(o));return isNaN(v)?1/0:v},project:function(t,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(me(t),o)},unproject:function(t,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(Z(t),o)},layerPointToLatLng:function(t){var o=Z(t).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(t){var o=this.project(me(t))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(me(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(Y(t))},distance:function(t,o){return this.options.crs.distance(me(t),me(o))},containerPointToLayerPoint:function(t){return Z(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return Z(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var o=this.containerPointToLayerPoint(Z(t));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(me(t)))},mouseEventToContainerPoint:function(t){return ko(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var o=this._container=Xn(t);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");at(o,"scroll",this._onScroll,this),this._containerId=g(o)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&je.any3d,ut(t,"leaflet-container"+(je.touch?" leaflet-touch":"")+(je.retina?" leaflet-retina":"")+(je.ielt9?" leaflet-oldie":"")+(je.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=_o(t,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),en(this._mapPane,new G(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ut(t.markerPane,"leaflet-zoom-hide"),ut(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,o,f){en(this._mapPane,new G(0,0));var v=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var P=this._zoom!==o;this._moveStart(P,f)._move(t,o)._moveEnd(P),this.fire("viewreset"),v&&this.fire("load")},_moveStart:function(t,o){return t&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(t,o,f,v){o===void 0&&(o=this._zoom);var P=this._zoom!==o;return this._zoom=o,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),v?f&&f.pinch&&this.fire("zoom",f):((P||f&&f.pinch)&&this.fire("zoom",f),this.fire("move",f)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ee(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){en(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[g(this._container)]=this;var o=t?Mt:at;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),je.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ee(this._resizeRequest),this._resizeRequest=$(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,o){for(var f=[],v,P=o==="mouseout"||o==="mouseover",O=t.target||t.srcElement,Q=!1;O;){if(v=this._targets[g(O)],v&&(o==="click"||o==="preclick")&&this._draggableMoved(v)){Q=!0;break}if(v&&v.listens(o,!0)&&(P&&!So(O,t)||(f.push(v),P))||O===this._container)break;O=O.parentNode}return!f.length&&!Q&&!P&&this.listens(o,!0)&&(f=[this]),f},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var o=t.target||t.srcElement;if(!(!this._loaded||o._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(o))){var f=t.type;f==="mousedown"&&Oi(o),this._fireDOMEvent(t,f)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,o,f){if(t.type==="click"){var v=c({},t);v.type="preclick",this._fireDOMEvent(v,v.type,f)}var P=this._findEventTargets(t,o);if(f){for(var O=[],Q=0;Q<f.length;Q++)f[Q].listens(o,!0)&&O.push(f[Q]);P=O.concat(P)}if(P.length){o==="contextmenu"&&Qt(t);var se=P[0],ce={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var be=se.getLatLng&&(!se._radius||se._radius<=10);ce.containerPoint=be?this.latLngToContainerPoint(se.getLatLng()):this.mouseEventToContainerPoint(t),ce.layerPoint=this.containerPointToLayerPoint(ce.containerPoint),ce.latlng=be?se.getLatLng():this.layerPointToLatLng(ce.layerPoint)}for(Q=0;Q<P.length;Q++)if(P[Q].fire(o,ce,!0),ce.originalEvent._stopped||P[Q].options.bubblingMouseEvents===!1&&F(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,o=this._handlers.length;t<o;t++)this._handlers[t].disable()},whenReady:function(t,o){return this._loaded?t.call(o||this,{target:this}):this.on("load",t,o),this},_getMapPanePos:function(){return Sr(this._mapPane)||new G(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,o){var f=t&&o!==void 0?this._getNewPixelOrigin(t,o):this.getPixelOrigin();return f.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,o){var f=this.getSize()._divideBy(2);return this.project(t,o)._subtract(f)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,o,f){var v=this._getNewPixelOrigin(f,o);return this.project(t,o)._subtract(v)},_latLngBoundsToNewLayerBounds:function(t,o,f){var v=this._getNewPixelOrigin(f,o);return U([this.project(t.getSouthWest(),o)._subtract(v),this.project(t.getNorthWest(),o)._subtract(v),this.project(t.getSouthEast(),o)._subtract(v),this.project(t.getNorthEast(),o)._subtract(v)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,o,f){if(!f)return t;var v=this.project(t,o),P=this.getSize().divideBy(2),O=new N(v.subtract(P),v.add(P)),Q=this._getBoundsOffset(O,f,o);return Math.abs(Q.x)<=1&&Math.abs(Q.y)<=1?t:this.unproject(v.add(Q),o)},_limitOffset:function(t,o){if(!o)return t;var f=this.getPixelBounds(),v=new N(f.min.add(t),f.max.add(t));return t.add(this._getBoundsOffset(v,o))},_getBoundsOffset:function(t,o,f){var v=U(this.project(o.getNorthEast(),f),this.project(o.getSouthWest(),f)),P=v.min.subtract(t.min),O=v.max.subtract(t.max),Q=this._rebound(P.x,-O.x),se=this._rebound(P.y,-O.y);return new G(Q,se)},_rebound:function(t,o){return t+o>0?Math.round(t-o)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(o))},_limitZoom:function(t){var o=this.getMinZoom(),f=this.getMaxZoom(),v=je.any3d?this.options.zoomSnap:1;return v&&(t=Math.round(t/v)*v),Math.max(o,Math.min(f,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){zt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,o){var f=this._getCenterOffset(t)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(f)?!1:(this.panBy(f,o),!0)},_createAnimProxy:function(){var t=this._proxy=ft("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(o){var f=ma,v=this._proxy.style[f];Jn(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),v===this._proxy.style[f]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Vt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),o=this.getZoom();Jn(this._proxy,this.project(t,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,o,f){if(this._animatingZoom)return!0;if(f=f||{},!this._zoomAnimated||f.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var v=this.getZoomScale(o),P=this._getCenterOffset(t)._divideBy(1-1/v);return f.animate!==!0&&!this.getSize().contains(P)?!1:($(function(){this._moveStart(!0,f.noMoveStart||!1)._animateZoom(t,o,!0)},this),!0)},_animateZoom:function(t,o,f,v){this._mapPane&&(f&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=o,ut(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:o,noUpdate:v}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(p(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&zt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ur(t,o){return new _t(t,o)}var Nn=re.extend({options:{position:"topright"},initialize:function(t){C(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var o=this._map;return o&&o.removeControl(this),this.options.position=t,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var o=this._container=this.onAdd(t),f=this.getPosition(),v=t._controlCorners[f];return ut(o,"leaflet-control"),f.indexOf("bottom")!==-1?v.insertBefore(o,v.firstChild):v.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Vt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Zr=function(t){return new Nn(t)};_t.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},o="leaflet-",f=this._controlContainer=ft("div",o+"control-container",this._container);function v(P,O){var Q=o+P+" "+o+O;t[P+O]=ft("div",Q,f)}v("top","left"),v("top","right"),v("bottom","left"),v("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Vt(this._controlCorners[t]);Vt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var va=Nn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,o,f,v){return f<v?-1:v<f?1:0}},initialize:function(t,o,f){C(this,f),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var v in t)this._addLayer(t[v],v);for(v in o)this._addLayer(o[v],v,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Nn.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,o){return this._addLayer(t,o),this._map?this._update():this},addOverlay:function(t,o){return this._addLayer(t,o,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var o=this._getLayer(g(t));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){ut(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(ut(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):zt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return zt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",o=this._container=ft("div",t),f=this.options.collapsed;o.setAttribute("aria-haspopup",!0),Eo(o),xs(o);var v=this._section=ft("section",t+"-list");f&&(this._map.on("click",this.collapse,this),at(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var P=this._layersLink=ft("a",t+"-toggle",o);P.href="#",P.title="Layers",P.setAttribute("role","button"),at(P,{keydown:function(O){O.keyCode===13&&this._expandSafely()},click:function(O){Qt(O),this._expandSafely()}},this),f||this.expand(),this._baseLayersList=ft("div",t+"-base",v),this._separator=ft("div",t+"-separator",v),this._overlaysList=ft("div",t+"-overlays",v),o.appendChild(v)},_getLayer:function(t){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&g(this._layers[o].layer)===t)return this._layers[o]},_addLayer:function(t,o,f){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:o,overlay:f}),this.options.sortLayers&&this._layers.sort(p(function(v,P){return this.options.sortFunction(v.layer,P.layer,v.name,P.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ds(this._baseLayersList),ds(this._overlaysList),this._layerControlInputs=[];var t,o,f,v,P=0;for(f=0;f<this._layers.length;f++)v=this._layers[f],this._addItem(v),o=o||v.overlay,t=t||!v.overlay,P+=v.overlay?0:1;return this.options.hideSingleBase&&(t=t&&P>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=o&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var o=this._getLayer(g(t.target)),f=o.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;f&&this._map.fire(f,o)},_createRadioElement:function(t,o){var f='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(o?' checked="checked"':"")+"/>",v=document.createElement("div");return v.innerHTML=f,v.firstChild},_addItem:function(t){var o=document.createElement("label"),f=this._map.hasLayer(t.layer),v;t.overlay?(v=document.createElement("input"),v.type="checkbox",v.className="leaflet-control-layers-selector",v.defaultChecked=f):v=this._createRadioElement("leaflet-base-layers_"+g(this),f),this._layerControlInputs.push(v),v.layerId=g(t.layer),at(v,"click",this._onInputClick,this);var P=document.createElement("span");P.innerHTML=" "+t.name;var O=document.createElement("span");o.appendChild(O),O.appendChild(v),O.appendChild(P);var Q=t.overlay?this._overlaysList:this._baseLayersList;return Q.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,o,f,v=[],P=[];this._handlingClick=!0;for(var O=t.length-1;O>=0;O--)o=t[O],f=this._getLayer(o.layerId).layer,o.checked?v.push(f):o.checked||P.push(f);for(O=0;O<P.length;O++)this._map.hasLayer(P[O])&&this._map.removeLayer(P[O]);for(O=0;O<v.length;O++)this._map.hasLayer(v[O])||this._map.addLayer(v[O]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,o,f,v=this._map.getZoom(),P=t.length-1;P>=0;P--)o=t[P],f=this._getLayer(o.layerId).layer,o.disabled=f.options.minZoom!==void 0&&v<f.options.minZoom||f.options.maxZoom!==void 0&&v>f.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,at(t,"click",Qt),this.expand();var o=this;setTimeout(function(){Mt(t,"click",Qt),o._preventClick=!1})}}),ys=function(t,o,f){return new va(t,o,f)},ji=Nn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var o="leaflet-control-zoom",f=ft("div",o+" leaflet-bar"),v=this.options;return this._zoomInButton=this._createButton(v.zoomInText,v.zoomInTitle,o+"-in",f,this._zoomIn),this._zoomOutButton=this._createButton(v.zoomOutText,v.zoomOutTitle,o+"-out",f,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),f},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,o,f,v,P){var O=ft("a",f,v);return O.innerHTML=t,O.href="#",O.title=o,O.setAttribute("role","button"),O.setAttribute("aria-label",o),Eo(O),at(O,"click",tr),at(O,"click",P,this),at(O,"click",this._refocusOnMap,this),O},_updateDisabled:function(){var t=this._map,o="leaflet-disabled";zt(this._zoomInButton,o),zt(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(ut(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(ut(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});_t.mergeOptions({zoomControl:!0}),_t.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ji,this.addControl(this.zoomControl))});var Il=function(t){return new ji(t)},kn=Nn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var o="leaflet-control-scale",f=ft("div",o),v=this.options;return this._addScales(v,o+"-line",f),t.on(v.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),f},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,o,f){t.metric&&(this._mScale=ft("div",o,f)),t.imperial&&(this._iScale=ft("div",o,f))},_update:function(){var t=this._map,o=t.getSize().y/2,f=t.distance(t.containerPointToLatLng([0,o]),t.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(f)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var o=this._getRoundNum(t),f=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,f,o/t)},_updateImperial:function(t){var o=t*3.2808399,f,v,P;o>5280?(f=o/5280,v=this._getRoundNum(f),this._updateScale(this._iScale,v+" mi",v/f)):(P=this._getRoundNum(o),this._updateScale(this._iScale,P+" ft",P/o))},_updateScale:function(t,o,f){t.style.width=Math.round(this.options.maxWidth*f)+"px",t.innerHTML=o},_getRoundNum:function(t){var o=Math.pow(10,(Math.floor(t)+"").length-1),f=t/o;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:1,o*f}}),zi=function(t){return new kn(t)},ya='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ui=Nn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(je.inlineSvg?ya+" ":"")+"Leaflet</a>"},initialize:function(t){C(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=ft("div","leaflet-control-attribution"),Eo(this._container);for(var o in t._layers)t._layers[o].getAttribution&&this.addAttribution(t._layers[o].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var o in this._attributions)this._attributions[o]&&t.push(o);var f=[];this.options.prefix&&f.push(this.options.prefix),t.length&&f.push(t.join(", ")),this._container.innerHTML=f.join(' <span aria-hidden="true">|</span> ')}}});_t.mergeOptions({attributionControl:!0}),_t.addInitHook(function(){this.options.attributionControl&&new ui().addTo(this)});var Bd=function(t){return new ui(t)};Nn.Layers=va,Nn.Zoom=ji,Nn.Scale=kn,Nn.Attribution=ui,Zr.layers=ys,Zr.zoom=Il,Zr.scale=zi,Zr.attribution=Bd;var Vn=re.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Vn.addTo=function(t,o){return t.addHandler(o,this),this};var _a={Events:ie},Hi=je.touch?"touchstart mousedown":"mousedown",nr=Ae.extend({options:{clickTolerance:3},initialize:function(t,o,f,v){C(this,v),this._element=t,this._dragStartTarget=o||t,this._preventOutline=f},enable:function(){this._enabled||(at(this._dragStartTarget,Hi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(nr._dragging===this&&this.finishDrag(!0),Mt(this._dragStartTarget,Hi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!Li(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){nr._dragging===this&&this.finishDrag();return}if(!(nr._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(nr._dragging=this,this._preventOutline&&Oi(this._element),ps(),Ct(),!this._moving)){this.fire("down");var o=t.touches?t.touches[0]:t,f=Br(this._element);this._startPoint=new G(o.clientX,o.clientY),this._startPos=Sr(this._element),this._parentScale=dr(f);var v=t.type==="mousedown";at(document,v?"mousemove":"touchmove",this._onMove,this),at(document,v?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var o=t.touches&&t.touches.length===1?t.touches[0]:t,f=new G(o.clientX,o.clientY)._subtract(this._startPoint);!f.x&&!f.y||Math.abs(f.x)+Math.abs(f.y)<this.options.clickTolerance||(f.x/=this._parentScale.x,f.y/=this._parentScale.y,Qt(t),this._moved||(this.fire("dragstart"),this._moved=!0,ut(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ut(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),en(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){zt(document.body,"leaflet-dragging"),this._lastTarget&&(zt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Mt(document,"mousemove touchmove",this._onMove,this),Mt(document,"mouseup touchend touchcancel",this._onUp,this),ms(),Ii();var o=this._moved&&this._moving;this._moving=!1,nr._dragging=!1,o&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function wa(t,o,f){var v,P=[1,4,2,8],O,Q,se,ce,be,Ie,nt,ht;for(O=0,Ie=t.length;O<Ie;O++)t[O]._code=di(t[O],o);for(se=0;se<4;se++){for(nt=P[se],v=[],O=0,Ie=t.length,Q=Ie-1;O<Ie;Q=O++)ce=t[O],be=t[Q],ce._code&nt?be._code&nt||(ht=ws(be,ce,nt,o,f),ht._code=di(ht,o),v.push(ht)):(be._code&nt&&(ht=ws(be,ce,nt,o,f),ht._code=di(ht,o),v.push(ht)),v.push(ce));t=v}return t}function Ol(t,o){var f,v,P,O,Q,se,ce,be,Ie;if(!t||t.length===0)throw new Error("latlngs not passed");Un(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var nt=me([0,0]),ht=Y(t),ln=ht.getNorthWest().distanceTo(ht.getSouthWest())*ht.getNorthEast().distanceTo(ht.getNorthWest());ln<1700&&(nt=ba(t));var on=t.length,Ln=[];for(f=0;f<on;f++){var Sn=me(t[f]);Ln.push(o.project(me([Sn.lat-nt.lat,Sn.lng-nt.lng])))}for(se=ce=be=0,f=0,v=on-1;f<on;v=f++)P=Ln[f],O=Ln[v],Q=P.y*O.x-O.y*P.x,ce+=(P.x+O.x)*Q,be+=(P.y+O.y)*Q,se+=Q*3;se===0?Ie=Ln[0]:Ie=[ce/se,be/se];var Yi=o.unproject(Z(Ie));return me([Yi.lat+nt.lat,Yi.lng+nt.lng])}function ba(t){for(var o=0,f=0,v=0,P=0;P<t.length;P++){var O=me(t[P]);o+=O.lat,f+=O.lng,v++}return me([o/v,f/v])}var Pd={__proto__:null,clipPolygon:wa,polygonCenter:Ol,centroid:ba};function _s(t,o){if(!o||!t.length)return t.slice();var f=o*o;return t=Rd(t,f),t=Dd(t,f),t}function jl(t,o,f){return Math.sqrt(fi(t,o,f,!0))}function Td(t,o,f){return fi(t,o,f)}function Dd(t,o){var f=t.length,v=typeof Uint8Array<"u"?Uint8Array:Array,P=new v(f);P[0]=P[f-1]=1,Ca(t,P,o,0,f-1);var O,Q=[];for(O=0;O<f;O++)P[O]&&Q.push(t[O]);return Q}function Ca(t,o,f,v,P){var O=0,Q,se,ce;for(se=v+1;se<=P-1;se++)ce=fi(t[se],t[v],t[P],!0),ce>O&&(Q=se,O=ce);O>f&&(o[Q]=1,Ca(t,o,f,v,Q),Ca(t,o,f,Q,P))}function Rd(t,o){for(var f=[t[0]],v=1,P=0,O=t.length;v<O;v++)Nd(t[v],t[P])>o&&(f.push(t[v]),P=v);return P<O-1&&f.push(t[O-1]),f}var Ea;function zl(t,o,f,v,P){var O=v?Ea:di(t,f),Q=di(o,f),se,ce,be;for(Ea=Q;;){if(!(O|Q))return[t,o];if(O&Q)return!1;se=O||Q,ce=ws(t,o,se,f,P),be=di(ce,f),se===O?(t=ce,O=be):(o=ce,Q=be)}}function ws(t,o,f,v,P){var O=o.x-t.x,Q=o.y-t.y,se=v.min,ce=v.max,be,Ie;return f&8?(be=t.x+O*(ce.y-t.y)/Q,Ie=ce.y):f&4?(be=t.x+O*(se.y-t.y)/Q,Ie=se.y):f&2?(be=ce.x,Ie=t.y+Q*(ce.x-t.x)/O):f&1&&(be=se.x,Ie=t.y+Q*(se.x-t.x)/O),new G(be,Ie,P)}function di(t,o){var f=0;return t.x<o.min.x?f|=1:t.x>o.max.x&&(f|=2),t.y<o.min.y?f|=4:t.y>o.max.y&&(f|=8),f}function Nd(t,o){var f=o.x-t.x,v=o.y-t.y;return f*f+v*v}function fi(t,o,f,v){var P=o.x,O=o.y,Q=f.x-P,se=f.y-O,ce=Q*Q+se*se,be;return ce>0&&(be=((t.x-P)*Q+(t.y-O)*se)/ce,be>1?(P=f.x,O=f.y):be>0&&(P+=Q*be,O+=se*be)),Q=t.x-P,se=t.y-O,v?Q*Q+se*se:new G(P,O)}function Un(t){return!T(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Hl(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Un(t)}function Vl(t,o){var f,v,P,O,Q,se,ce,be;if(!t||t.length===0)throw new Error("latlngs not passed");Un(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var Ie=me([0,0]),nt=Y(t),ht=nt.getNorthWest().distanceTo(nt.getSouthWest())*nt.getNorthEast().distanceTo(nt.getNorthWest());ht<1700&&(Ie=ba(t));var ln=t.length,on=[];for(f=0;f<ln;f++){var Ln=me(t[f]);on.push(o.project(me([Ln.lat-Ie.lat,Ln.lng-Ie.lng])))}for(f=0,v=0;f<ln-1;f++)v+=on[f].distanceTo(on[f+1])/2;if(v===0)be=on[0];else for(f=0,O=0;f<ln-1;f++)if(Q=on[f],se=on[f+1],P=Q.distanceTo(se),O+=P,O>v){ce=(O-v)/P,be=[se.x-ce*(se.x-Q.x),se.y-ce*(se.y-Q.y)];break}var Sn=o.unproject(Z(be));return me([Sn.lat+Ie.lat,Sn.lng+Ie.lng])}var Ul={__proto__:null,simplify:_s,pointToSegmentDistance:jl,closestPointOnSegment:Td,clipSegment:zl,_getEdgeIntersection:ws,_getBitCode:di,_sqClosestPointOnSegment:fi,isFlat:Un,_flat:Hl,polylineCenter:Vl},ka={project:function(t){return new G(t.lng,t.lat)},unproject:function(t){return new fe(t.y,t.x)},bounds:new N([-180,-90],[180,90])},Sa={R:6378137,R_MINOR:6356752314245179e-9,bounds:new N([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var o=Math.PI/180,f=this.R,v=t.lat*o,P=this.R_MINOR/f,O=Math.sqrt(1-P*P),Q=O*Math.sin(v),se=Math.tan(Math.PI/4-v/2)/Math.pow((1-Q)/(1+Q),O/2);return v=-f*Math.log(Math.max(se,1e-10)),new G(t.lng*o*f,v)},unproject:function(t){for(var o=180/Math.PI,f=this.R,v=this.R_MINOR/f,P=Math.sqrt(1-v*v),O=Math.exp(-t.y/f),Q=Math.PI/2-2*Math.atan(O),se=0,ce=.1,be;se<15&&Math.abs(ce)>1e-7;se++)be=P*Math.sin(Q),be=Math.pow((1-be)/(1+be),P/2),ce=Math.PI/2-2*Math.atan(O*be)-Q,Q+=ce;return new fe(Q*o,t.x*o/f)}},Fd={__proto__:null,LonLat:ka,Mercator:Sa,SphericalMercator:he},Ld=c({},we,{code:"EPSG:3395",projection:Sa,transformation:(function(){var t=.5/(Math.PI*Sa.R);return Fe(t,.5,-t,.5)})()}),Zl=c({},we,{code:"EPSG:4326",projection:ka,transformation:Fe(1/180,1,-1/180,.5)}),Md=c({},Se,{projection:ka,transformation:Fe(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,o){var f=o.lng-t.lng,v=o.lat-t.lat;return Math.sqrt(f*f+v*v)},infinite:!0});Se.Earth=we,Se.EPSG3395=Ld,Se.EPSG3857=ge,Se.EPSG900913=Le,Se.EPSG4326=Zl,Se.Simple=Md;var rr=Ae.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[g(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[g(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var o=t.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var f=this.getEvents();o.on(f,this),this.once("remove",function(){o.off(f,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});_t.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var o=g(t);return this._layers[o]?this:(this._layers[o]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var o=g(t);return this._layers[o]?(this._loaded&&t.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return g(t)in this._layers},eachLayer:function(t,o){for(var f in this._layers)t.call(o,this._layers[f]);return this},_addLayers:function(t){t=t?T(t)?t:[t]:[];for(var o=0,f=t.length;o<f;o++)this.addLayer(t[o])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[g(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var o=g(t);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,o=-1/0,f=this._getZoomSpan();for(var v in this._zoomBoundLayers){var P=this._zoomBoundLayers[v].options;t=P.minZoom===void 0?t:Math.min(t,P.minZoom),o=P.maxZoom===void 0?o:Math.max(o,P.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=t===1/0?void 0:t,f!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Wr=rr.extend({initialize:function(t,o){C(this,o),this._layers={};var f,v;if(t)for(f=0,v=t.length;f<v;f++)this.addLayer(t[f])},addLayer:function(t){var o=this.getLayerId(t);return this._layers[o]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var o=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(t){var o=typeof t=="number"?t:this.getLayerId(t);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var o=Array.prototype.slice.call(arguments,1),f,v;for(f in this._layers)v=this._layers[f],v[t]&&v[t].apply(v,o);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,o){for(var f in this._layers)t.call(o,this._layers[f]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return g(t)}}),Bo=function(t,o){return new Wr(t,o)},Pr=Wr.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Wr.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Wr.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new K;for(var o in this._layers){var f=this._layers[o];t.extend(f.getBounds?f.getBounds():f.getLatLng())}return t}}),Wl=function(t,o){return new Pr(t,o)},hi=re.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){C(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,o){var f=this._getIconUrl(t);if(!f){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var v=this._createImg(f,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(v,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),v},_setIconStyles:function(t,o){var f=this.options,v=f[o+"Size"];typeof v=="number"&&(v=[v,v]);var P=Z(v),O=Z(o==="shadow"&&f.shadowAnchor||f.iconAnchor||P&&P.divideBy(2,!0));t.className="leaflet-marker-"+o+" "+(f.className||""),O&&(t.style.marginLeft=-O.x+"px",t.style.marginTop=-O.y+"px"),P&&(t.style.width=P.x+"px",t.style.height=P.y+"px")},_createImg:function(t,o){return o=o||document.createElement("img"),o.src=t,o},_getIconUrl:function(t){return je.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function ql(t){return new hi(t)}var Vi=hi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Vi.imagePath!="string"&&(Vi.imagePath=this._detectIconPath()),(this.options.imagePath||Vi.imagePath)+hi.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var o=function(f,v,P){var O=v.exec(f);return O&&O[P]};return t=o(t,/^url\((['"])?(.+)\1\)$/,2),t&&o(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=ft("div","leaflet-default-icon-path",document.body),o=_o(t,"background-image")||_o(t,"backgroundImage");if(document.body.removeChild(t),o=this._stripUrl(o),o)return o;var f=document.querySelector('link[href$="leaflet.css"]');return f?f.href.substring(0,f.href.length-11-1):""}}),Ba=Vn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new nr(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ut(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&zt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var o=this._marker,f=o._map,v=this._marker.options.autoPanSpeed,P=this._marker.options.autoPanPadding,O=Sr(o._icon),Q=f.getPixelBounds(),se=f.getPixelOrigin(),ce=U(Q.min._subtract(se).add(P),Q.max._subtract(se).subtract(P));if(!ce.contains(O)){var be=Z((Math.max(ce.max.x,O.x)-ce.max.x)/(Q.max.x-ce.max.x)-(Math.min(ce.min.x,O.x)-ce.min.x)/(Q.min.x-ce.min.x),(Math.max(ce.max.y,O.y)-ce.max.y)/(Q.max.y-ce.max.y)-(Math.min(ce.min.y,O.y)-ce.min.y)/(Q.min.y-ce.min.y)).multiplyBy(v);f.panBy(be,{animate:!1}),this._draggable._newPos._add(be),this._draggable._startPos._add(be),en(o._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=$(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(ee(this._panRequest),this._panRequest=$(this._adjustPan.bind(this,t)))},_onDrag:function(t){var o=this._marker,f=o._shadow,v=Sr(o._icon),P=o._map.layerPointToLatLng(v);f&&en(f,v),o._latlng=P,t.latlng=P,t.oldLatLng=this._oldLatLng,o.fire("move",t).fire("drag",t)},_onDragEnd:function(t){ee(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Tr=rr.extend({options:{icon:new Vi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,o){C(this,o),this._latlng=me(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var o=this._latlng;return this._latlng=me(t),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),f=t.icon.createIcon(this._icon),v=!1;f!==this._icon&&(this._icon&&this._removeIcon(),v=!0,t.title&&(f.title=t.title),f.tagName==="IMG"&&(f.alt=t.alt||"")),ut(f,o),t.keyboard&&(f.tabIndex="0",f.setAttribute("role","button")),this._icon=f,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&at(f,"focus",this._panOnFocus,this);var P=t.icon.createShadow(this._shadow),O=!1;P!==this._shadow&&(this._removeShadow(),O=!0),P&&(ut(P,o),P.alt=""),this._shadow=P,t.opacity<1&&this._updateOpacity(),v&&this.getPane().appendChild(this._icon),this._initInteraction(),P&&O&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Mt(this._icon,"focus",this._panOnFocus,this),Vt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Vt(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&en(this._icon,t),this._shadow&&en(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(ut(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ba)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ba(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&En(this._icon,t),this._shadow&&En(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var o=this.options.icon.options,f=o.iconSize?Z(o.iconSize):Z(0,0),v=o.iconAnchor?Z(o.iconAnchor):Z(0,0);t.panInside(this._latlng,{paddingTopLeft:v,paddingBottomRight:f.subtract(v)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Id(t,o){return new Tr(t,o)}var qr=rr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return C(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),bs=qr.extend({options:{fill:!0,radius:10},initialize:function(t,o){C(this,o),this._latlng=me(t),this._radius=this.options.radius},setLatLng:function(t){var o=this._latlng;return this._latlng=me(t),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var o=t&&t.radius||this._radius;return qr.prototype.setStyle.call(this,t),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,o=this._radiusY||t,f=this._clickTolerance(),v=[t+f,o+f];this._pxBounds=new N(this._point.subtract(v),this._point.add(v))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Gl(t,o){return new bs(t,o)}var Cs=bs.extend({initialize:function(t,o,f){if(typeof o=="number"&&(o=c({},f,{radius:o})),C(this,o),this._latlng=me(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new K(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:qr.prototype.setStyle,_project:function(){var t=this._latlng.lng,o=this._latlng.lat,f=this._map,v=f.options.crs;if(v.distance===we.distance){var P=Math.PI/180,O=this._mRadius/we.R/P,Q=f.project([o+O,t]),se=f.project([o-O,t]),ce=Q.add(se).divideBy(2),be=f.unproject(ce).lat,Ie=Math.acos((Math.cos(O*P)-Math.sin(o*P)*Math.sin(be*P))/(Math.cos(o*P)*Math.cos(be*P)))/P;(isNaN(Ie)||Ie===0)&&(Ie=O/Math.cos(Math.PI/180*o)),this._point=ce.subtract(f.getPixelOrigin()),this._radius=isNaN(Ie)?0:ce.x-f.project([be,t-Ie]).x,this._radiusY=ce.y-Q.y}else{var nt=v.unproject(v.project(this._latlng).subtract([this._mRadius,0]));this._point=f.latLngToLayerPoint(this._latlng),this._radius=this._point.x-f.latLngToLayerPoint(nt).x}this._updateBounds()}});function Po(t,o,f){return new Cs(t,o,f)}var Fn=qr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,o){C(this,o),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var o=1/0,f=null,v=fi,P,O,Q=0,se=this._parts.length;Q<se;Q++)for(var ce=this._parts[Q],be=1,Ie=ce.length;be<Ie;be++){P=ce[be-1],O=ce[be];var nt=v(t,P,O,!0);nt<o&&(o=nt,f=v(t,P,O))}return f&&(f.distance=Math.sqrt(o)),f},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Vl(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,o){return o=o||this._defaultShape(),t=me(t),o.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new K,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Un(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var o=[],f=Un(t),v=0,P=t.length;v<P;v++)f?(o[v]=me(t[v]),this._bounds.extend(o[v])):o[v]=this._convertLatLngs(t[v]);return o},_project:function(){var t=new N;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),o=new G(t,t);this._rawPxBounds&&(this._pxBounds=new N([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(t,o,f){var v=t[0]instanceof fe,P=t.length,O,Q;if(v){for(Q=[],O=0;O<P;O++)Q[O]=this._map.latLngToLayerPoint(t[O]),f.extend(Q[O]);o.push(Q)}else for(O=0;O<P;O++)this._projectLatlngs(t[O],o,f)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,f,v,P,O,Q,se,ce;for(f=0,P=0,O=this._rings.length;f<O;f++)for(ce=this._rings[f],v=0,Q=ce.length;v<Q-1;v++)se=zl(ce[v],ce[v+1],t,v,!0),se&&(o[P]=o[P]||[],o[P].push(se[0]),(se[1]!==ce[v+1]||v===Q-2)&&(o[P].push(se[1]),P++))}},_simplifyPoints:function(){for(var t=this._parts,o=this.options.smoothFactor,f=0,v=t.length;f<v;f++)t[f]=_s(t[f],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,o){var f,v,P,O,Q,se,ce=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(f=0,O=this._parts.length;f<O;f++)for(se=this._parts[f],v=0,Q=se.length,P=Q-1;v<Q;P=v++)if(!(!o&&v===0)&&jl(t,se[P],se[v])<=ce)return!0;return!1}});function Od(t,o){return new Fn(t,o)}Fn._flat=Hl;var Dr=Fn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ol(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var o=Fn.prototype._convertLatLngs.call(this,t),f=o.length;return f>=2&&o[0]instanceof fe&&o[0].equals(o[f-1])&&o.pop(),o},_setLatLngs:function(t){Fn.prototype._setLatLngs.call(this,t),Un(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Un(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,o=this.options.weight,f=new G(o,o);if(t=new N(t.min.subtract(f),t.max.add(f)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var v=0,P=this._rings.length,O;v<P;v++)O=wa(this._rings[v],t,!0),O.length&&this._parts.push(O)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var o=!1,f,v,P,O,Q,se,ce,be;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(O=0,ce=this._parts.length;O<ce;O++)for(f=this._parts[O],Q=0,be=f.length,se=be-1;Q<be;se=Q++)v=f[Q],P=f[se],v.y>t.y!=P.y>t.y&&t.x<(P.x-v.x)*(t.y-v.y)/(P.y-v.y)+v.x&&(o=!o);return o||Fn.prototype._containsPoint.call(this,t,!0)}});function jd(t,o){return new Dr(t,o)}var hr=Pr.extend({initialize:function(t,o){C(this,o),this._layers={},t&&this.addData(t)},addData:function(t){var o=T(t)?t:t.features,f,v,P;if(o){for(f=0,v=o.length;f<v;f++)P=o[f],(P.geometries||P.geometry||P.features||P.coordinates)&&this.addData(P);return this}var O=this.options;if(O.filter&&!O.filter(t))return this;var Q=Ui(t,O);return Q?(Q.feature=Ps(t),Q.defaultOptions=Q.options,this.resetStyle(Q),O.onEachFeature&&O.onEachFeature(t,Q),this.addLayer(Q)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=c({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(o){this._setLayerStyle(o,t)},this)},_setLayerStyle:function(t,o){t.setStyle&&(typeof o=="function"&&(o=o(t.feature)),t.setStyle(o))}});function Ui(t,o){var f=t.type==="Feature"?t.geometry:t,v=f?f.coordinates:null,P=[],O=o&&o.pointToLayer,Q=o&&o.coordsToLatLng||ks,se,ce,be,Ie;if(!v&&!f)return null;switch(f.type){case"Point":return se=Q(v),Es(O,t,se,o);case"MultiPoint":for(be=0,Ie=v.length;be<Ie;be++)se=Q(v[be]),P.push(Es(O,t,se,o));return new Pr(P);case"LineString":case"MultiLineString":return ce=To(v,f.type==="LineString"?0:1,Q),new Fn(ce,o);case"Polygon":case"MultiPolygon":return ce=To(v,f.type==="Polygon"?1:2,Q),new Dr(ce,o);case"GeometryCollection":for(be=0,Ie=f.geometries.length;be<Ie;be++){var nt=Ui({geometry:f.geometries[be],type:"Feature",properties:t.properties},o);nt&&P.push(nt)}return new Pr(P);case"FeatureCollection":for(be=0,Ie=f.features.length;be<Ie;be++){var ht=Ui(f.features[be],o);ht&&P.push(ht)}return new Pr(P);default:throw new Error("Invalid GeoJSON object.")}}function Es(t,o,f,v){return t?t(o,f):new Tr(f,v&&v.markersInheritOptions&&v)}function ks(t){return new fe(t[1],t[0],t[2])}function To(t,o,f){for(var v=[],P=0,O=t.length,Q;P<O;P++)Q=o?To(t[P],o-1,f):(f||ks)(t[P]),v.push(Q);return v}function Ss(t,o){return t=me(t),t.alt!==void 0?[_(t.lng,o),_(t.lat,o),_(t.alt,o)]:[_(t.lng,o),_(t.lat,o)]}function Bs(t,o,f,v){for(var P=[],O=0,Q=t.length;O<Q;O++)P.push(o?Bs(t[O],Un(t[O])?0:o-1,f,v):Ss(t[O],v));return!o&&f&&P.length>0&&P.push(P[0].slice()),P}function Zi(t,o){return t.feature?c({},t.feature,{geometry:o}):Ps(o)}function Ps(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Pa={toGeoJSON:function(t){return Zi(this,{type:"Point",coordinates:Ss(this.getLatLng(),t)})}};Tr.include(Pa),Cs.include(Pa),bs.include(Pa),Fn.include({toGeoJSON:function(t){var o=!Un(this._latlngs),f=Bs(this._latlngs,o?1:0,!1,t);return Zi(this,{type:(o?"Multi":"")+"LineString",coordinates:f})}}),Dr.include({toGeoJSON:function(t){var o=!Un(this._latlngs),f=o&&!Un(this._latlngs[0]),v=Bs(this._latlngs,f?2:o?1:0,!0,t);return o||(v=[v]),Zi(this,{type:(f?"Multi":"")+"Polygon",coordinates:v})}}),Wr.include({toMultiPoint:function(t){var o=[];return this.eachLayer(function(f){o.push(f.toGeoJSON(t).geometry.coordinates)}),Zi(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(t){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(t);var f=o==="GeometryCollection",v=[];return this.eachLayer(function(P){if(P.toGeoJSON){var O=P.toGeoJSON(t);if(f)v.push(O.geometry);else{var Q=Ps(O);Q.type==="FeatureCollection"?v.push.apply(v,Q.features):v.push(Q)}}}),f?Zi(this,{geometries:v,type:"GeometryCollection"}):{type:"FeatureCollection",features:v}}});function $l(t,o){return new hr(t,o)}var ir=$l,Gr=rr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,o,f){this._url=t,this._bounds=Y(o),C(this,f)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ut(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Vt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Fi(this._image),this},bringToBack:function(){return this._map&&kr(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=Y(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",o=this._image=t?this._url:ft("img");if(ut(o,"leaflet-image-layer"),this._zoomAnimated&&ut(o,"leaflet-zoom-animated"),this.options.className&&ut(o,this.options.className),o.onselectstart=A,o.onmousemove=A,o.onload=p(this.fire,this,"load"),o.onerror=p(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(t){var o=this._map.getZoomScale(t.zoom),f=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Jn(this._image,f,o)},_reset:function(){var t=this._image,o=new N(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),f=o.getSize();en(t,o.min),t.style.width=f.x+"px",t.style.height=f.y+"px"},_updateOpacity:function(){En(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Kl=function(t,o,f){return new Gr(t,o,f)},Ta=Gr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",o=this._image=t?this._url:ft("video");if(ut(o,"leaflet-image-layer"),this._zoomAnimated&&ut(o,"leaflet-zoom-animated"),this.options.className&&ut(o,this.options.className),o.onselectstart=A,o.onmousemove=A,o.onloadeddata=p(this.fire,this,"load"),t){for(var f=o.getElementsByTagName("source"),v=[],P=0;P<f.length;P++)v.push(f[P].src);this._url=f.length>0?v:[o.src];return}T(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var O=0;O<this._url.length;O++){var Q=ft("source");Q.src=this._url[O],o.appendChild(Q)}}});function Ql(t,o,f){return new Ta(t,o,f)}var Da=Gr.extend({_initImage:function(){var t=this._image=this._url;ut(t,"leaflet-image-layer"),this._zoomAnimated&&ut(t,"leaflet-zoom-animated"),this.options.className&&ut(t,this.options.className),t.onselectstart=A,t.onmousemove=A}});function Ra(t,o,f){return new Da(t,o,f)}var pr=rr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,o){t&&(t instanceof fe||T(t))?(this._latlng=me(t),C(this,o)):(C(this,t),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&En(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&En(this._container,1),this.bringToFront(),this.options.interactive&&(ut(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(En(this._container,0),this._removeTimeout=setTimeout(p(Vt,void 0,this._container),200)):Vt(this._container),this.options.interactive&&(zt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=me(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Fi(this._container),this},bringToBack:function(){return this._map&&kr(this._container),this},_prepareOpen:function(t){var o=this._source;if(!o._map)return!1;if(o instanceof Pr){o=null;var f=this._source._layers;for(var v in f)if(f[v]._map){o=f[v];break}if(!o)return!1;this._source=o}if(!t)if(o.getCenter)t=o.getCenter();else if(o.getLatLng)t=o.getLatLng();else if(o.getBounds)t=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")t.innerHTML=o;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),o=Z(this.options.offset),f=this._getAnchor();this._zoomAnimated?en(this._container,t.add(f)):o=o.add(t).add(f);var v=this._containerBottom=-o.y,P=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=v+"px",this._container.style.left=P+"px"}},_getAnchor:function(){return[0,0]}});_t.include({_initOverlay:function(t,o,f,v){var P=o;return P instanceof t||(P=new t(v).setContent(o)),f&&P.setLatLng(f),P}}),rr.include({_initOverlay:function(t,o,f,v){var P=f;return P instanceof t?(C(P,v),P._source=this):(P=o&&!v?o:new t(v,this),P.setContent(f)),P}});var Ts=pr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,pr.prototype.openOn.call(this,t)},onAdd:function(t){pr.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof qr||this._source.on("preclick",fr))},onRemove:function(t){pr.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof qr||this._source.off("preclick",fr))},getEvents:function(){var t=pr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",o=this._container=ft("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),f=this._wrapper=ft("div",t+"-content-wrapper",o);if(this._contentNode=ft("div",t+"-content",f),Eo(o),xs(this._contentNode),at(o,"contextmenu",fr),this._tipContainer=ft("div",t+"-tip-container",o),this._tip=ft("div",t+"-tip",this._tipContainer),this.options.closeButton){var v=this._closeButton=ft("a",t+"-close-button",o);v.setAttribute("role","button"),v.setAttribute("aria-label","Close popup"),v.href="#close",v.innerHTML='<span aria-hidden="true">&#215;</span>',at(v,"click",function(P){Qt(P),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,o=t.style;o.width="",o.whiteSpace="nowrap";var f=t.offsetWidth;f=Math.min(f,this.options.maxWidth),f=Math.max(f,this.options.minWidth),o.width=f+1+"px",o.whiteSpace="",o.height="";var v=t.offsetHeight,P=this.options.maxHeight,O="leaflet-popup-scrolled";P&&v>P?(o.height=P+"px",ut(t,O)):zt(t,O),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),f=this._getAnchor();en(this._container,o.add(f))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,o=parseInt(_o(this._container,"marginBottom"),10)||0,f=this._container.offsetHeight+o,v=this._containerWidth,P=new G(this._containerLeft,-f-this._containerBottom);P._add(Sr(this._container));var O=t.layerPointToContainerPoint(P),Q=Z(this.options.autoPanPadding),se=Z(this.options.autoPanPaddingTopLeft||Q),ce=Z(this.options.autoPanPaddingBottomRight||Q),be=t.getSize(),Ie=0,nt=0;O.x+v+ce.x>be.x&&(Ie=O.x+v-be.x+ce.x),O.x-Ie-se.x<0&&(Ie=O.x-se.x),O.y+f+ce.y>be.y&&(nt=O.y+f-be.y+ce.y),O.y-nt-se.y<0&&(nt=O.y-se.y),(Ie||nt)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([Ie,nt]))}},_getAnchor:function(){return Z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Wi=function(t,o){return new Ts(t,o)};_t.mergeOptions({closePopupOnClick:!0}),_t.include({openPopup:function(t,o,f){return this._initOverlay(Ts,t,o,f).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),rr.include({bindPopup:function(t,o){return this._popup=this._initOverlay(Ts,this._popup,t,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Pr||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){tr(t);var o=t.layer||t.target;if(this._popup._source===o&&!(o instanceof qr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=o,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var qi=pr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){pr.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){pr.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=pr.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",o=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ft("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+g(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var o,f,v=this._map,P=this._container,O=v.latLngToContainerPoint(v.getCenter()),Q=v.layerPointToContainerPoint(t),se=this.options.direction,ce=P.offsetWidth,be=P.offsetHeight,Ie=Z(this.options.offset),nt=this._getAnchor();se==="top"?(o=ce/2,f=be):se==="bottom"?(o=ce/2,f=0):se==="center"?(o=ce/2,f=be/2):se==="right"?(o=0,f=be/2):se==="left"?(o=ce,f=be/2):Q.x<O.x?(se="right",o=0,f=be/2):(se="left",o=ce+(Ie.x+nt.x)*2,f=be/2),t=t.subtract(Z(o,f,!0)).add(Ie).add(nt),zt(P,"leaflet-tooltip-right"),zt(P,"leaflet-tooltip-left"),zt(P,"leaflet-tooltip-top"),zt(P,"leaflet-tooltip-bottom"),ut(P,"leaflet-tooltip-"+se),en(P,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&En(this._container,t)},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(o)},_getAnchor:function(){return Z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Do=function(t,o){return new qi(t,o)};_t.include({openTooltip:function(t,o,f){return this._initOverlay(qi,t,o,f).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),rr.include({bindTooltip:function(t,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(qi,this._tooltip,t,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var o=t?"off":"on",f={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?f.add=this._openTooltip:(f.mouseover=this._openTooltip,f.mouseout=this.closeTooltip,f.click=this._openTooltip,this._map?this._addFocusListeners():f.add=this._addFocusListeners),this._tooltip.options.sticky&&(f.mousemove=this._moveTooltip),this[o](f),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Pr||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var o=typeof t.getElement=="function"&&t.getElement();o&&(at(o,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),at(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var o=typeof t.getElement=="function"&&t.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var o=t.latlng,f,v;this._tooltip.options.sticky&&t.originalEvent&&(f=this._map.mouseEventToContainerPoint(t.originalEvent),v=this._map.containerPointToLayerPoint(f),o=this._map.layerPointToLatLng(v)),this._tooltip.setLatLng(o)}});var Ds=hi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var o=t&&t.tagName==="DIV"?t:document.createElement("div"),f=this.options;if(f.html instanceof Element?(ds(o),o.appendChild(f.html)):o.innerHTML=f.html!==!1?f.html:"",f.bgPos){var v=Z(f.bgPos);o.style.backgroundPosition=-v.x+"px "+-v.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function Yl(t){return new Ds(t)}hi.Default=Vi;var $r=rr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:je.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){C(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Vt(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Fi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(kr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof G?t:new G(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var o=this.getPane().children,f=-t(-1/0,1/0),v=0,P=o.length,O;v<P;v++)O=o[v].style.zIndex,o[v]!==this._container&&O&&(f=t(f,+O));isFinite(f)&&(this.options.zIndex=f+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!je.ielt9){En(this._container,this.options.opacity);var t=+new Date,o=!1,f=!1;for(var v in this._tiles){var P=this._tiles[v];if(!(!P.current||!P.loaded)){var O=Math.min(1,(t-P.loaded)/200);En(P.el,O),O<1?o=!0:(P.active?f=!0:this._onOpaqueTile(P),P.active=!0)}}f&&!this._noPrune&&this._pruneTiles(),o&&(ee(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this))}},_onOpaqueTile:A,_initContainer:function(){this._container||(this._container=ft("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,o=this.options.maxZoom;if(t!==void 0){for(var f in this._levels)f=Number(f),this._levels[f].el.children.length||f===t?(this._levels[f].el.style.zIndex=o-Math.abs(t-f),this._onUpdateLevel(f)):(Vt(this._levels[f].el),this._removeTilesAtZoom(f),this._onRemoveLevel(f),delete this._levels[f]);var v=this._levels[t],P=this._map;return v||(v=this._levels[t]={},v.el=ft("div","leaflet-tile-container leaflet-zoom-animated",this._container),v.el.style.zIndex=o,v.origin=P.project(P.unproject(P.getPixelOrigin()),t).round(),v.zoom=t,this._setZoomTransform(v,P.getCenter(),P.getZoom()),A(v.el.offsetWidth),this._onCreateLevel(v)),this._level=v,v}},_onUpdateLevel:A,_onRemoveLevel:A,_onCreateLevel:A,_pruneTiles:function(){if(this._map){var t,o,f=this._map.getZoom();if(f>this.options.maxZoom||f<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)o=this._tiles[t],o.retain=o.current;for(t in this._tiles)if(o=this._tiles[t],o.current&&!o.active){var v=o.coords;this._retainParent(v.x,v.y,v.z,v.z-5)||this._retainChildren(v.x,v.y,v.z,v.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var o in this._tiles)this._tiles[o].coords.z===t&&this._removeTile(o)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Vt(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,o,f,v){var P=Math.floor(t/2),O=Math.floor(o/2),Q=f-1,se=new G(+P,+O);se.z=+Q;var ce=this._tileCoordsToKey(se),be=this._tiles[ce];return be&&be.active?(be.retain=!0,!0):(be&&be.loaded&&(be.retain=!0),Q>v?this._retainParent(P,O,Q,v):!1)},_retainChildren:function(t,o,f,v){for(var P=2*t;P<2*t+2;P++)for(var O=2*o;O<2*o+2;O++){var Q=new G(P,O);Q.z=f+1;var se=this._tileCoordsToKey(Q),ce=this._tiles[se];if(ce&&ce.active){ce.retain=!0;continue}else ce&&ce.loaded&&(ce.retain=!0);f+1<v&&this._retainChildren(P,O,f+1,v)}},_resetView:function(t){var o=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var o=this.options;return o.minNativeZoom!==void 0&&t<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<t?o.maxNativeZoom:t},_setView:function(t,o,f,v){var P=Math.round(o);this.options.maxZoom!==void 0&&P>this.options.maxZoom||this.options.minZoom!==void 0&&P<this.options.minZoom?P=void 0:P=this._clampZoom(P);var O=this.options.updateWhenZooming&&P!==this._tileZoom;(!v||O)&&(this._tileZoom=P,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),P!==void 0&&this._update(t),f||this._pruneTiles(),this._noPrune=!!f),this._setZoomTransforms(t,o)},_setZoomTransforms:function(t,o){for(var f in this._levels)this._setZoomTransform(this._levels[f],t,o)},_setZoomTransform:function(t,o,f){var v=this._map.getZoomScale(f,t.zoom),P=t.origin.multiplyBy(v).subtract(this._map._getNewPixelOrigin(o,f)).round();je.any3d?Jn(t.el,P,v):en(t.el,P)},_resetGrid:function(){var t=this._map,o=t.options.crs,f=this._tileSize=this.getTileSize(),v=this._tileZoom,P=this._map.getPixelWorldBounds(this._tileZoom);P&&(this._globalTileRange=this._pxBoundsToTileRange(P)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,o.wrapLng[0]],v).x/f.x),Math.ceil(t.project([0,o.wrapLng[1]],v).x/f.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([o.wrapLat[0],0],v).y/f.x),Math.ceil(t.project([o.wrapLat[1],0],v).y/f.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var o=this._map,f=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),v=o.getZoomScale(f,this._tileZoom),P=o.project(t,this._tileZoom).floor(),O=o.getSize().divideBy(v*2);return new N(P.subtract(O),P.add(O))},_update:function(t){var o=this._map;if(o){var f=this._clampZoom(o.getZoom());if(t===void 0&&(t=o.getCenter()),this._tileZoom!==void 0){var v=this._getTiledPixelBounds(t),P=this._pxBoundsToTileRange(v),O=P.getCenter(),Q=[],se=this.options.keepBuffer,ce=new N(P.getBottomLeft().subtract([se,-se]),P.getTopRight().add([se,-se]));if(!(isFinite(P.min.x)&&isFinite(P.min.y)&&isFinite(P.max.x)&&isFinite(P.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var be in this._tiles){var Ie=this._tiles[be].coords;(Ie.z!==this._tileZoom||!ce.contains(new G(Ie.x,Ie.y)))&&(this._tiles[be].current=!1)}if(Math.abs(f-this._tileZoom)>1){this._setView(t,f);return}for(var nt=P.min.y;nt<=P.max.y;nt++)for(var ht=P.min.x;ht<=P.max.x;ht++){var ln=new G(ht,nt);if(ln.z=this._tileZoom,!!this._isValidTile(ln)){var on=this._tiles[this._tileCoordsToKey(ln)];on?on.current=!0:Q.push(ln)}}if(Q.sort(function(Sn,Yi){return Sn.distanceTo(O)-Yi.distanceTo(O)}),Q.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ln=document.createDocumentFragment();for(ht=0;ht<Q.length;ht++)this._addTile(Q[ht],Ln);this._level.el.appendChild(Ln)}}}},_isValidTile:function(t){var o=this._map.options.crs;if(!o.infinite){var f=this._globalTileRange;if(!o.wrapLng&&(t.x<f.min.x||t.x>f.max.x)||!o.wrapLat&&(t.y<f.min.y||t.y>f.max.y))return!1}if(!this.options.bounds)return!0;var v=this._tileCoordsToBounds(t);return Y(this.options.bounds).overlaps(v)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var o=this._map,f=this.getTileSize(),v=t.scaleBy(f),P=v.add(f),O=o.unproject(v,t.z),Q=o.unproject(P,t.z);return[O,Q]},_tileCoordsToBounds:function(t){var o=this._tileCoordsToNwSe(t),f=new K(o[0],o[1]);return this.options.noWrap||(f=this._map.wrapLatLngBounds(f)),f},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var o=t.split(":"),f=new G(+o[0],+o[1]);return f.z=+o[2],f},_removeTile:function(t){var o=this._tiles[t];o&&(Vt(o.el),delete this._tiles[t],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){ut(t,"leaflet-tile");var o=this.getTileSize();t.style.width=o.x+"px",t.style.height=o.y+"px",t.onselectstart=A,t.onmousemove=A,je.ielt9&&this.options.opacity<1&&En(t,this.options.opacity)},_addTile:function(t,o){var f=this._getTilePos(t),v=this._tileCoordsToKey(t),P=this.createTile(this._wrapCoords(t),p(this._tileReady,this,t));this._initTile(P),this.createTile.length<2&&$(p(this._tileReady,this,t,null,P)),en(P,f),this._tiles[v]={el:P,coords:t,current:!0},o.appendChild(P),this.fire("tileloadstart",{tile:P,coords:t})},_tileReady:function(t,o,f){o&&this.fire("tileerror",{error:o,tile:f,coords:t});var v=this._tileCoordsToKey(t);f=this._tiles[v],f&&(f.loaded=+new Date,this._map._fadeAnimated?(En(f.el,0),ee(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this)):(f.active=!0,this._pruneTiles()),o||(ut(f.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:f.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),je.ielt9||!this._map._fadeAnimated?$(this._pruneTiles,this):setTimeout(p(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var o=new G(this._wrapX?x(t.x,this._wrapX):t.x,this._wrapY?x(t.y,this._wrapY):t.y);return o.z=t.z,o},_pxBoundsToTileRange:function(t){var o=this.getTileSize();return new N(t.min.unscaleBy(o).floor(),t.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Gi(t){return new $r(t)}var Kr=$r.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,o){this._url=t,o=C(this,o),o.detectRetina&&je.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,o){return this._url===t&&o===void 0&&(o=!0),this._url=t,o||this.redraw(),this},createTile:function(t,o){var f=document.createElement("img");return at(f,"load",p(this._tileOnLoad,this,o,f)),at(f,"error",p(this._tileOnError,this,o,f)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(f.referrerPolicy=this.options.referrerPolicy),f.alt="",f.src=this.getTileUrl(t),f},getTileUrl:function(t){var o={r:je.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var f=this._globalTileRange.max.y-t.y;this.options.tms&&(o.y=f),o["-y"]=f}return S(this._url,c(o,this.options))},_tileOnLoad:function(t,o){je.ielt9?setTimeout(p(t,this,null,o),0):t(null,o)},_tileOnError:function(t,o,f){var v=this.options.errorTileUrl;v&&o.getAttribute("src")!==v&&(o.src=v),t(f,o)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,o=this.options.maxZoom,f=this.options.zoomReverse,v=this.options.zoomOffset;return f&&(t=o-t),t+v},_getSubdomain:function(t){var o=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var t,o;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(o=this._tiles[t].el,o.onload=A,o.onerror=A,!o.complete)){o.src=M;var f=this._tiles[t].coords;Vt(o),delete this._tiles[t],this.fire("tileabort",{tile:o,coords:f})}},_removeTile:function(t){var o=this._tiles[t];if(o)return o.el.setAttribute("src",M),$r.prototype._removeTile.call(this,t)},_tileReady:function(t,o,f){if(!(!this._map||f&&f.getAttribute("src")===M))return $r.prototype._tileReady.call(this,t,o,f)}});function Na(t,o){return new Kr(t,o)}var Ro=Kr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,o){this._url=t;var f=c({},this.defaultWmsParams);for(var v in o)v in this.options||(f[v]=o[v]);o=C(this,o);var P=o.detectRetina&&je.retina?2:1,O=this.getTileSize();f.width=O.x*P,f.height=O.y*P,this.wmsParams=f},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,Kr.prototype.onAdd.call(this,t)},getTileUrl:function(t){var o=this._tileCoordsToNwSe(t),f=this._crs,v=U(f.project(o[0]),f.project(o[1])),P=v.min,O=v.max,Q=(this._wmsVersion>=1.3&&this._crs===Zl?[P.y,P.x,O.y,O.x]:[P.x,P.y,O.x,O.y]).join(","),se=Kr.prototype.getTileUrl.call(this,t);return se+w(this.wmsParams,se,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Q},setParams:function(t,o){return c(this.wmsParams,t),o||this.redraw(),this}});function Xl(t,o){return new Ro(t,o)}Kr.WMS=Ro,Na.wms=Xl;var mr=rr.extend({options:{padding:.1},initialize:function(t){C(this,t),g(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ut(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,o){var f=this._map.getZoomScale(o,this._zoom),v=this._map.getSize().multiplyBy(.5+this.options.padding),P=this._map.project(this._center,o),O=v.multiplyBy(-f).add(P).subtract(this._map._getNewPixelOrigin(t,o));je.any3d?Jn(this._container,O,f):en(this._container,O)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,o=this._map.getSize(),f=this._map.containerPointToLayerPoint(o.multiplyBy(-t)).round();this._bounds=new N(f,f.add(o.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Fa=mr.extend({options:{tolerance:0},getEvents:function(){var t=mr.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){mr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");at(t,"mousemove",this._onMouseMove,this),at(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),at(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){ee(this._redrawRequest),delete this._ctx,Vt(this._container),Mt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var o in this._layers)t=this._layers[o],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){mr.prototype._update.call(this);var t=this._bounds,o=this._container,f=t.getSize(),v=je.retina?2:1;en(o,t.min),o.width=v*f.x,o.height=v*f.y,o.style.width=f.x+"px",o.style.height=f.y+"px",je.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){mr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[g(t)]=t;var o=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var o=t._order,f=o.next,v=o.prev;f?f.prev=v:this._drawLast=v,v?v.next=f:this._drawFirst=f,delete t._order,delete this._layers[g(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var o=t.options.dashArray.split(/[, ]+/),f=[],v,P;for(P=0;P<o.length;P++){if(v=Number(o[P]),isNaN(v))return;f.push(v)}t.options._dashArray=f}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||$(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var o=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new N,this._redrawBounds.extend(t._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(t._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var o=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,o=this._redrawBounds;if(this._ctx.save(),o){var f=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,f.x,f.y),this._ctx.clip()}this._drawing=!0;for(var v=this._drawFirst;v;v=v.next)t=v.layer,(!o||t._pxBounds&&t._pxBounds.intersects(o))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,o){if(this._drawing){var f,v,P,O,Q=t._parts,se=Q.length,ce=this._ctx;if(se){for(ce.beginPath(),f=0;f<se;f++){for(v=0,P=Q[f].length;v<P;v++)O=Q[f][v],ce[v?"lineTo":"moveTo"](O.x,O.y);o&&ce.closePath()}this._fillStroke(ce,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var o=t._point,f=this._ctx,v=Math.max(Math.round(t._radius),1),P=(Math.max(Math.round(t._radiusY),1)||v)/v;P!==1&&(f.save(),f.scale(1,P)),f.beginPath(),f.arc(o.x,o.y/P,v,0,Math.PI*2,!1),P!==1&&f.restore(),this._fillStroke(f,t)}},_fillStroke:function(t,o){var f=o.options;f.fill&&(t.globalAlpha=f.fillOpacity,t.fillStyle=f.fillColor||f.color,t.fill(f.fillRule||"evenodd")),f.stroke&&f.weight!==0&&(t.setLineDash&&t.setLineDash(o.options&&o.options._dashArray||[]),t.globalAlpha=f.opacity,t.lineWidth=f.weight,t.strokeStyle=f.color,t.lineCap=f.lineCap,t.lineJoin=f.lineJoin,t.stroke())},_onClick:function(t){for(var o=this._map.mouseEventToLayerPoint(t),f,v,P=this._drawFirst;P;P=P.next)f=P.layer,f.options.interactive&&f._containsPoint(o)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(f))&&(v=f);this._fireEvent(v?[v]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,o)}},_handleMouseOut:function(t){var o=this._hoveredLayer;o&&(zt(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,o){if(!this._mouseHoverThrottled){for(var f,v,P=this._drawFirst;P;P=P.next)f=P.layer,f.options.interactive&&f._containsPoint(o)&&(v=f);v!==this._hoveredLayer&&(this._handleMouseOut(t),v&&(ut(this._container,"leaflet-interactive"),this._fireEvent([v],t,"mouseover"),this._hoveredLayer=v)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(p(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,o,f){this._map._fireDOMEvent(o,f||o.type,t)},_bringToFront:function(t){var o=t._order;if(o){var f=o.next,v=o.prev;if(f)f.prev=v;else return;v?v.next=f:f&&(this._drawFirst=f),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(t)}},_bringToBack:function(t){var o=t._order;if(o){var f=o.next,v=o.prev;if(v)v.next=f;else return;f?f.prev=v:v&&(this._drawLast=v),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(t)}}});function La(t){return je.canvas?new Fa(t):null}var $i=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Jl={_initContainer:function(){this._container=ft("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(mr.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var o=t._container=$i("shape");ut(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",t._path=$i("path"),o.appendChild(t._path),this._updateStyle(t),this._layers[g(t)]=t},_addPath:function(t){var o=t._container;this._container.appendChild(o),t.options.interactive&&t.addInteractiveTarget(o)},_removePath:function(t){var o=t._container;Vt(o),t.removeInteractiveTarget(o),delete this._layers[g(t)]},_updateStyle:function(t){var o=t._stroke,f=t._fill,v=t.options,P=t._container;P.stroked=!!v.stroke,P.filled=!!v.fill,v.stroke?(o||(o=t._stroke=$i("stroke")),P.appendChild(o),o.weight=v.weight+"px",o.color=v.color,o.opacity=v.opacity,v.dashArray?o.dashStyle=T(v.dashArray)?v.dashArray.join(" "):v.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=v.lineCap.replace("butt","flat"),o.joinstyle=v.lineJoin):o&&(P.removeChild(o),t._stroke=null),v.fill?(f||(f=t._fill=$i("fill")),P.appendChild(f),f.color=v.fillColor||v.color,f.opacity=v.fillOpacity):f&&(P.removeChild(f),t._fill=null)},_updateCircle:function(t){var o=t._point.round(),f=Math.round(t._radius),v=Math.round(t._radiusY||f);this._setPath(t,t._empty()?"M0 0":"AL "+o.x+","+o.y+" "+f+","+v+" 0,"+65535*360)},_setPath:function(t,o){t._path.v=o},_bringToFront:function(t){Fi(t._container)},_bringToBack:function(t){kr(t._container)}},or=je.vml?$i:We,pi=mr.extend({_initContainer:function(){this._container=or("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=or("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Vt(this._container),Mt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){mr.prototype._update.call(this);var t=this._bounds,o=t.getSize(),f=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,f.setAttribute("width",o.x),f.setAttribute("height",o.y)),en(f,t.min),f.setAttribute("viewBox",[t.min.x,t.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(t){var o=t._path=or("path");t.options.className&&ut(o,t.options.className),t.options.interactive&&ut(o,"leaflet-interactive"),this._updateStyle(t),this._layers[g(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Vt(t._path),t.removeInteractiveTarget(t._path),delete this._layers[g(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var o=t._path,f=t.options;o&&(f.stroke?(o.setAttribute("stroke",f.color),o.setAttribute("stroke-opacity",f.opacity),o.setAttribute("stroke-width",f.weight),o.setAttribute("stroke-linecap",f.lineCap),o.setAttribute("stroke-linejoin",f.lineJoin),f.dashArray?o.setAttribute("stroke-dasharray",f.dashArray):o.removeAttribute("stroke-dasharray"),f.dashOffset?o.setAttribute("stroke-dashoffset",f.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),f.fill?(o.setAttribute("fill",f.fillColor||f.color),o.setAttribute("fill-opacity",f.fillOpacity),o.setAttribute("fill-rule",f.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(t,o){this._setPath(t,lt(t._parts,o))},_updateCircle:function(t){var o=t._point,f=Math.max(Math.round(t._radius),1),v=Math.max(Math.round(t._radiusY),1)||f,P="a"+f+","+v+" 0 1,0 ",O=t._empty()?"M0 0":"M"+(o.x-f)+","+o.y+P+f*2+",0 "+P+-f*2+",0 ";this._setPath(t,O)},_setPath:function(t,o){t._path.setAttribute("d",o)},_bringToFront:function(t){Fi(t._path)},_bringToBack:function(t){kr(t._path)}});je.vml&&pi.include(Jl);function Rs(t){return je.svg||je.vml?new pi(t):null}_t.include({getRenderer:function(t){var o=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var o=this._paneRenderers[t];return o===void 0&&(o=this._createRenderer({pane:t}),this._paneRenderers[t]=o),o},_createRenderer:function(t){return this.options.preferCanvas&&La(t)||Rs(t)}});var ec=Dr.extend({initialize:function(t,o){Dr.prototype.initialize.call(this,this._boundsToLatLngs(t),o)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=Y(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function zd(t,o){return new ec(t,o)}pi.create=or,pi.pointsToPath=lt,hr.geometryToLayer=Ui,hr.coordsToLatLng=ks,hr.coordsToLatLngs=To,hr.latLngToCoords=Ss,hr.latLngsToCoords=Bs,hr.getFeature=Zi,hr.asFeature=Ps,_t.mergeOptions({boxZoom:!0});var Ki=Vn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){at(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Mt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Vt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ct(),ps(),this._startPoint=this._map.mouseEventToContainerPoint(t),at(document,{contextmenu:tr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ft("div","leaflet-zoom-box",this._container),ut(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var o=new N(this._point,this._startPoint),f=o.getSize();en(this._box,o.min),this._box.style.width=f.x+"px",this._box.style.height=f.y+"px"},_finish:function(){this._moved&&(Vt(this._box),zt(this._container,"leaflet-crosshair")),Ii(),ms(),Mt(document,{contextmenu:tr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(p(this._resetState,this),0);var o=new K(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});_t.addInitHook("addHandler","boxZoom",Ki),_t.mergeOptions({doubleClickZoom:!0});var tc=Vn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var o=this._map,f=o.getZoom(),v=o.options.zoomDelta,P=t.originalEvent.shiftKey?f-v:f+v;o.options.doubleClickZoom==="center"?o.setZoom(P):o.setZoomAround(t.containerPoint,P)}});_t.addInitHook("addHandler","doubleClickZoom",tc),_t.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ma=Vn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new nr(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}ut(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){zt(this._map._container,"leaflet-grab"),zt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=Y(this._map.options.maxBounds);this._offsetLimit=U(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var o=this._lastTime=+new Date,f=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(f),this._times.push(o),this._prunePositions(o)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,o){return t-(t-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;t.x<o.min.x&&(t.x=this._viscousLimit(t.x,o.min.x)),t.y<o.min.y&&(t.y=this._viscousLimit(t.y,o.min.y)),t.x>o.max.x&&(t.x=this._viscousLimit(t.x,o.max.x)),t.y>o.max.y&&(t.y=this._viscousLimit(t.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,o=Math.round(t/2),f=this._initialWorldOffset,v=this._draggable._newPos.x,P=(v-o+f)%t+o-f,O=(v+o+f)%t-o-f,Q=Math.abs(P+f)<Math.abs(O+f)?P:O;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Q},_onDragEnd:function(t){var o=this._map,f=o.options,v=!f.inertia||t.noInertia||this._times.length<2;if(o.fire("dragend",t),v)o.fire("moveend");else{this._prunePositions(+new Date);var P=this._lastPos.subtract(this._positions[0]),O=(this._lastTime-this._times[0])/1e3,Q=f.easeLinearity,se=P.multiplyBy(Q/O),ce=se.distanceTo([0,0]),be=Math.min(f.inertiaMaxSpeed,ce),Ie=se.multiplyBy(be/ce),nt=be/(f.inertiaDeceleration*Q),ht=Ie.multiplyBy(-nt/2).round();!ht.x&&!ht.y?o.fire("moveend"):(ht=o._limitOffset(ht,o.options.maxBounds),$(function(){o.panBy(ht,{duration:nt,easeLinearity:Q,noMoveStart:!0,animate:!0})}))}}});_t.addInitHook("addHandler","dragging",Ma),_t.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ia=Vn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),at(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Mt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,o=document.documentElement,f=t.scrollTop||o.scrollTop,v=t.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(v,f)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var o=this._panKeys={},f=this.keyCodes,v,P;for(v=0,P=f.left.length;v<P;v++)o[f.left[v]]=[-1*t,0];for(v=0,P=f.right.length;v<P;v++)o[f.right[v]]=[t,0];for(v=0,P=f.down.length;v<P;v++)o[f.down[v]]=[0,t];for(v=0,P=f.up.length;v<P;v++)o[f.up[v]]=[0,-1*t]},_setZoomDelta:function(t){var o=this._zoomKeys={},f=this.keyCodes,v,P;for(v=0,P=f.zoomIn.length;v<P;v++)o[f.zoomIn[v]]=t;for(v=0,P=f.zoomOut.length;v<P;v++)o[f.zoomOut[v]]=-t},_addHooks:function(){at(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Mt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var o=t.keyCode,f=this._map,v;if(o in this._panKeys){if(!f._panAnim||!f._panAnim._inProgress)if(v=this._panKeys[o],t.shiftKey&&(v=Z(v).multiplyBy(3)),f.options.maxBounds&&(v=f._limitOffset(Z(v),f.options.maxBounds)),f.options.worldCopyJump){var P=f.wrapLatLng(f.unproject(f.project(f.getCenter()).add(v)));f.panTo(P)}else f.panBy(v)}else if(o in this._zoomKeys)f.setZoom(f.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&f._popup&&f._popup.options.closeOnEscapeKey)f.closePopup();else return;tr(t)}}});_t.addInitHook("addHandler","keyboard",Ia),_t.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var It=Vn.extend({addHooks:function(){at(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Mt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var o=Ml(t),f=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var v=Math.max(f-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(p(this._performZoom,this),v),tr(t)},_performZoom:function(){var t=this._map,o=t.getZoom(),f=this._map.options.zoomSnap||0;t._stop();var v=this._delta/(this._map.options.wheelPxPerZoomLevel*4),P=4*Math.log(2/(1+Math.exp(-Math.abs(v))))/Math.LN2,O=f?Math.ceil(P/f)*f:P,Q=t._limitZoom(o+(this._delta>0?O:-O))-o;this._delta=0,this._startTime=null,Q&&(t.options.scrollWheelZoom==="center"?t.setZoom(o+Q):t.setZoomAround(this._lastMousePos,o+Q))}});_t.addInitHook("addHandler","scrollWheelZoom",It);var Oa=600;_t.mergeOptions({tapHold:je.touchNative&&je.safari&&je.mobile,tapTolerance:15});var No=Vn.extend({addHooks:function(){at(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Mt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var o=t.touches[0];this._startPos=this._newPos=new G(o.clientX,o.clientY),this._holdTimeout=setTimeout(p(function(){this._cancel(),this._isTapValid()&&(at(document,"touchend",Qt),at(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),Oa),at(document,"touchend touchcancel contextmenu",this._cancel,this),at(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Mt(document,"touchend",Qt),Mt(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Mt(document,"touchend touchcancel contextmenu",this._cancel,this),Mt(document,"touchmove",this._onMove,this)},_onMove:function(t){var o=t.touches[0];this._newPos=new G(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,o){var f=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});f._simulated=!0,o.target.dispatchEvent(f)}});_t.addInitHook("addHandler","tapHold",No),_t.mergeOptions({touchZoom:je.touch,bounceAtZoomLimits:!0});var Qi=Vn.extend({addHooks:function(){ut(this._map._container,"leaflet-touch-zoom"),at(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){zt(this._map._container,"leaflet-touch-zoom"),Mt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var o=this._map;if(!(!t.touches||t.touches.length!==2||o._animatingZoom||this._zooming)){var f=o.mouseEventToContainerPoint(t.touches[0]),v=o.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(f.add(v)._divideBy(2))),this._startDist=f.distanceTo(v),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),at(document,"touchmove",this._onTouchMove,this),at(document,"touchend touchcancel",this._onTouchEnd,this),Qt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var o=this._map,f=o.mouseEventToContainerPoint(t.touches[0]),v=o.mouseEventToContainerPoint(t.touches[1]),P=f.distanceTo(v)/this._startDist;if(this._zoom=o.getScaleZoom(P,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&P<1||this._zoom>o.getMaxZoom()&&P>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,P===1)return}else{var O=f._add(v)._divideBy(2)._subtract(this._centerPoint);if(P===1&&O.x===0&&O.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(O),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),ee(this._animRequest);var Q=p(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=$(Q,this,!0),Qt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ee(this._animRequest),Mt(document,"touchmove",this._onTouchMove,this),Mt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});_t.addInitHook("addHandler","touchZoom",Qi),_t.BoxZoom=Ki,_t.DoubleClickZoom=tc,_t.Drag=Ma,_t.Keyboard=Ia,_t.ScrollWheelZoom=It,_t.TapHold=No,_t.TouchZoom=Qi,i.Bounds=N,i.Browser=je,i.CRS=Se,i.Canvas=Fa,i.Circle=Cs,i.CircleMarker=bs,i.Class=re,i.Control=Nn,i.DivIcon=Ds,i.DivOverlay=pr,i.DomEvent=As,i.DomUtil=Co,i.Draggable=nr,i.Evented=Ae,i.FeatureGroup=Pr,i.GeoJSON=hr,i.GridLayer=$r,i.Handler=Vn,i.Icon=hi,i.ImageOverlay=Gr,i.LatLng=fe,i.LatLngBounds=K,i.Layer=rr,i.LayerGroup=Wr,i.LineUtil=Ul,i.Map=_t,i.Marker=Tr,i.Mixin=_a,i.Path=qr,i.Point=G,i.PolyUtil=Pd,i.Polygon=Dr,i.Polyline=Fn,i.Popup=Ts,i.PosAnimation=vs,i.Projection=Fd,i.Rectangle=ec,i.Renderer=mr,i.SVG=pi,i.SVGOverlay=Da,i.TileLayer=Kr,i.Tooltip=qi,i.Transformation=Ze,i.Util=W,i.VideoOverlay=Ta,i.bind=p,i.bounds=U,i.canvas=La,i.circle=Po,i.circleMarker=Gl,i.control=Zr,i.divIcon=Yl,i.extend=c,i.featureGroup=Wl,i.geoJSON=$l,i.geoJson=ir,i.gridLayer=Gi,i.icon=ql,i.imageOverlay=Kl,i.latLng=me,i.latLngBounds=Y,i.layerGroup=Bo,i.map=Ur,i.marker=Id,i.point=Z,i.polygon=jd,i.polyline=Od,i.popup=Wi,i.rectangle=zd,i.setOptions=C,i.stamp=g,i.svg=Rs,i.svgOverlay=Ra,i.tileLayer=Na,i.tooltip=Do,i.transformation=Fe,i.version=l,i.videoOverlay=Ql;var nc=window.L;i.noConflict=function(){return window.L=nc,this},window.L=i}))})(gl,gl.exports)),gl.exports}var _d=bE();function fh(n,s,i){return Object.freeze({instance:n,context:s,container:i})}function hh(n,s){return s==null?function(l,c){const u=D.useRef();return u.current||(u.current=n(l,c)),u}:function(l,c){const u=D.useRef();u.current||(u.current=n(l,c));const p=D.useRef(l),{instance:d}=u.current;return D.useEffect(function(){p.current!==l&&(s(d,l,p.current),p.current=l)},[d,l,c]),u}}function vv(n,s){D.useEffect(function(){return(s.layerContainer??s.map).addLayer(n.instance),function(){var u;(u=s.layerContainer)==null||u.removeLayer(n.instance),s.map.removeLayer(n.instance)}},[s,n])}function CE(n){return function(i){const l=vd(),c=n(yd(i,l),l);return gv(l.map,i.attribution),dh(c.current,i.eventHandlers),vv(c.current,l),c}}function EE(n,s){const i=D.useRef();D.useEffect(function(){if(s.pathOptions!==i.current){const c=s.pathOptions??{};n.instance.setStyle(c),i.current=c}},[n,s])}function kE(n){return function(i){const l=vd(),c=n(yd(i,l),l);return dh(c.current,i.eventHandlers),vv(c.current,l),EE(c.current,i),c}}function SE(n,s){const i=hh(n),l=_E(i,s);return vE(l)}function BE(n,s){const i=hh(n,s),l=kE(i);return AE(l)}function PE(n,s){const i=hh(n,s),l=CE(i);return yE(l)}function TE(n,s,i){const{opacity:l,zIndex:c}=s;l!=null&&l!==i.opacity&&n.setOpacity(l),c!=null&&c!==i.zIndex&&n.setZIndex(c)}function DE(){return vd().map}const RE=BE(function({center:s,children:i,...l},c){const u=new _d.CircleMarker(s,l);return fh(u,xE(c,{overlayContainer:u}))},pE);function P0(){return P0=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var i=arguments[s];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(n[l]=i[l])}return n},P0.apply(this,arguments)}function NE({bounds:n,boundsOptions:s,center:i,children:l,className:c,id:u,placeholder:p,style:d,whenReady:g,zoom:m,...x},A){const[_]=D.useState({className:c,id:u,style:d}),[k,R]=D.useState(null);D.useImperativeHandle(A,()=>(k==null?void 0:k.map)??null,[k]);const C=D.useCallback(B=>{if(B!==null&&k===null){const S=new _d.Map(B,x);i!=null&&m!=null?S.setView(i,m):n!=null&&S.fitBounds(n,s),g!=null&&S.whenReady(g),R(gE(S))}},[]);D.useEffect(()=>()=>{k==null||k.map.remove()},[k]);const w=k?Te.createElement(Av,{value:k},l):p??null;return Te.createElement("div",P0({},_,{ref:C}),w)}const FE=D.forwardRef(NE),LE=SE(function(s,i){const l=new _d.Popup(s,i.overlayContainer);return fh(l,i)},function(s,i,{position:l},c){D.useEffect(function(){const{instance:p}=s;function d(m){m.popup===p&&(p.update(),c(!0))}function g(m){m.popup===p&&c(!1)}return i.map.on({popupopen:d,popupclose:g}),i.overlayContainer==null?(l!=null&&p.setLatLng(l),p.openOn(i.map)):i.overlayContainer.bindPopup(p),function(){var x;i.map.off({popupopen:d,popupclose:g}),(x=i.overlayContainer)==null||x.unbindPopup(),i.map.removeLayer(p)}},[s,i,c,l])}),ME=PE(function({url:s,...i},l){const c=new _d.TileLayer(s,yd(i,l));return fh(c,l)},function(s,i,l){TE(s,i,l);const{url:c}=i;c!=null&&c!==l.url&&s.setUrl(c)});function IE(n){const i=Date.now()/1e3-n,l=3600,c=86400;return i<l?"#22c55e":i<c?"#4ade80":i<3*c?"#a3e635":"#9ca3af"}function OE({contacts:n,focusedContact:s}){const i=DE(),[l,c]=D.useState(!1);return D.useEffect(()=>{if(s&&s.lat!=null&&s.lon!=null){i.setView([s.lat,s.lon],12),c(!0);return}if(l)return;const u=()=>{if(n.length===0){i.setView([20,0],2),c(!0);return}if(n.length===1){i.setView([n[0].lat,n[0].lon],10),c(!0);return}const p=n.map(d=>[d.lat,d.lon]);i.fitBounds(p,{padding:[50,50],maxZoom:12}),c(!0)};"geolocation"in navigator?navigator.geolocation.getCurrentPosition(p=>{i.setView([p.coords.latitude,p.coords.longitude],8),c(!0)},()=>{u()},{timeout:5e3,maximumAge:3e5}):u()},[i,n,l,s]),null}function jE({contacts:n,focusedKey:s}){const i=D.useMemo(()=>{const p=Date.now()/1e3-604800;return n.filter(d=>d.lat!=null&&d.lon!=null&&d.last_seen!=null&&d.last_seen>p)},[n]),l=D.useMemo(()=>s&&i.find(p=>p.public_key===s)||null,[s,i]),c=D.useRef({}),u=D.useCallback((p,d)=>{c.current[p]=d},[]);return D.useEffect(()=>{if(l&&c.current[l.public_key]){const p=setTimeout(()=>{var d;(d=c.current[l.public_key])==null||d.openPopup()},100);return()=>clearTimeout(p)}},[l]),b.jsxs("div",{className:"flex flex-col h-full",children:[b.jsxs("div",{className:"px-4 py-2 bg-muted/50 text-xs text-muted-foreground flex items-center justify-between",children:[b.jsxs("span",{children:["Showing ",i.length," contact",i.length!==1?"s":""," heard in the last 7 days"]}),b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsxs("span",{className:"flex items-center gap-1",children:[b.jsx("span",{className:"w-3 h-3 rounded-full bg-[#22c55e]"})," <1h"]}),b.jsxs("span",{className:"flex items-center gap-1",children:[b.jsx("span",{className:"w-3 h-3 rounded-full bg-[#4ade80]"})," <1d"]}),b.jsxs("span",{className:"flex items-center gap-1",children:[b.jsx("span",{className:"w-3 h-3 rounded-full bg-[#a3e635]"})," <3d"]}),b.jsxs("span",{className:"flex items-center gap-1",children:[b.jsx("span",{className:"w-3 h-3 rounded-full bg-[#9ca3af]"})," older"]})]})]}),b.jsx("div",{className:"flex-1 relative",style:{zIndex:0},children:b.jsxs(FE,{center:[20,0],zoom:2,className:"h-full w-full",style:{background:"#1a1a2e"},children:[b.jsx(ME,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),b.jsx(OE,{contacts:i,focusedContact:l}),i.map(p=>{const d=p.type===td,g=IE(p.last_seen),m=p.name||p.public_key.slice(0,12);return b.jsx(RE,{ref:x=>u(p.public_key,x),center:[p.lat,p.lon],radius:d?10:7,pathOptions:{color:d?g:"#000",fillColor:g,fillOpacity:.8,weight:d?0:1},children:b.jsx(LE,{children:b.jsxs("div",{className:"text-sm",children:[b.jsxs("div",{className:"font-medium flex items-center gap-1",children:[d&&b.jsx("span",{title:"Repeater",children:""}),m]}),b.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Last heard: ",ra(p.last_seen)]}),b.jsxs("div",{className:"text-xs text-gray-400 mt-1 font-mono",children:[p.lat.toFixed(5),", ",p.lon.toFixed(5)]})]})})},p.public_key)})]})})]})}function Yg(n,s){var i,l=1;n==null&&(n=0),s==null&&(s=0);function c(){var u,p=i.length,d,g=0,m=0;for(u=0;u<p;++u)d=i[u],g+=d.x,m+=d.y;for(g=(g/p-n)*l,m=(m/p-s)*l,u=0;u<p;++u)d=i[u],d.x-=g,d.y-=m}return c.initialize=function(u){i=u},c.x=function(u){return arguments.length?(n=+u,c):n},c.y=function(u){return arguments.length?(s=+u,c):s},c.strength=function(u){return arguments.length?(l=+u,c):l},c}function zE(n){const s=+this._x.call(null,n),i=+this._y.call(null,n);return yv(this.cover(s,i),s,i,n)}function yv(n,s,i,l){if(isNaN(s)||isNaN(i))return n;var c,u=n._root,p={data:l},d=n._x0,g=n._y0,m=n._x1,x=n._y1,A,_,k,R,C,w,B,S;if(!u)return n._root=p,n;for(;u.length;)if((C=s>=(A=(d+m)/2))?d=A:m=A,(w=i>=(_=(g+x)/2))?g=_:x=_,c=u,!(u=u[B=w<<1|C]))return c[B]=p,n;if(k=+n._x.call(null,u.data),R=+n._y.call(null,u.data),s===k&&i===R)return p.next=u,c?c[B]=p:n._root=p,n;do c=c?c[B]=new Array(4):n._root=new Array(4),(C=s>=(A=(d+m)/2))?d=A:m=A,(w=i>=(_=(g+x)/2))?g=_:x=_;while((B=w<<1|C)===(S=(R>=_)<<1|k>=A));return c[S]=u,c[B]=p,n}function HE(n){var s,i,l=n.length,c,u,p=new Array(l),d=new Array(l),g=1/0,m=1/0,x=-1/0,A=-1/0;for(i=0;i<l;++i)isNaN(c=+this._x.call(null,s=n[i]))||isNaN(u=+this._y.call(null,s))||(p[i]=c,d[i]=u,c<g&&(g=c),c>x&&(x=c),u<m&&(m=u),u>A&&(A=u));if(g>x||m>A)return this;for(this.cover(g,m).cover(x,A),i=0;i<l;++i)yv(this,p[i],d[i],n[i]);return this}function VE(n,s){if(isNaN(n=+n)||isNaN(s=+s))return this;var i=this._x0,l=this._y0,c=this._x1,u=this._y1;if(isNaN(i))c=(i=Math.floor(n))+1,u=(l=Math.floor(s))+1;else{for(var p=c-i||1,d=this._root,g,m;i>n||n>=c||l>s||s>=u;)switch(m=(s<l)<<1|n<i,g=new Array(4),g[m]=d,d=g,p*=2,m){case 0:c=i+p,u=l+p;break;case 1:i=c-p,u=l+p;break;case 2:c=i+p,l=u-p;break;case 3:i=c-p,l=u-p;break}this._root&&this._root.length&&(this._root=d)}return this._x0=i,this._y0=l,this._x1=c,this._y1=u,this}function UE(){var n=[];return this.visit(function(s){if(!s.length)do n.push(s.data);while(s=s.next)}),n}function ZE(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function On(n,s,i,l,c){this.node=n,this.x0=s,this.y0=i,this.x1=l,this.y1=c}function WE(n,s,i){var l,c=this._x0,u=this._y0,p,d,g,m,x=this._x1,A=this._y1,_=[],k=this._root,R,C;for(k&&_.push(new On(k,c,u,x,A)),i==null?i=1/0:(c=n-i,u=s-i,x=n+i,A=s+i,i*=i);R=_.pop();)if(!(!(k=R.node)||(p=R.x0)>x||(d=R.y0)>A||(g=R.x1)<c||(m=R.y1)<u))if(k.length){var w=(p+g)/2,B=(d+m)/2;_.push(new On(k[3],w,B,g,m),new On(k[2],p,B,w,m),new On(k[1],w,d,g,B),new On(k[0],p,d,w,B)),(C=(s>=B)<<1|n>=w)&&(R=_[_.length-1],_[_.length-1]=_[_.length-1-C],_[_.length-1-C]=R)}else{var S=n-+this._x.call(null,k.data),T=s-+this._y.call(null,k.data),F=S*S+T*T;if(F<i){var M=Math.sqrt(i=F);c=n-M,u=s-M,x=n+M,A=s+M,l=k.data}}return l}function qE(n){if(isNaN(x=+this._x.call(null,n))||isNaN(A=+this._y.call(null,n)))return this;var s,i=this._root,l,c,u,p=this._x0,d=this._y0,g=this._x1,m=this._y1,x,A,_,k,R,C,w,B;if(!i)return this;if(i.length)for(;;){if((R=x>=(_=(p+g)/2))?p=_:g=_,(C=A>=(k=(d+m)/2))?d=k:m=k,s=i,!(i=i[w=C<<1|R]))return this;if(!i.length)break;(s[w+1&3]||s[w+2&3]||s[w+3&3])&&(l=s,B=w)}for(;i.data!==n;)if(c=i,!(i=i.next))return this;return(u=i.next)&&delete i.next,c?(u?c.next=u:delete c.next,this):s?(u?s[w]=u:delete s[w],(i=s[0]||s[1]||s[2]||s[3])&&i===(s[3]||s[2]||s[1]||s[0])&&!i.length&&(l?l[B]=i:this._root=i),this):(this._root=u,this)}function GE(n){for(var s=0,i=n.length;s<i;++s)this.remove(n[s]);return this}function $E(){return this._root}function KE(){var n=0;return this.visit(function(s){if(!s.length)do++n;while(s=s.next)}),n}function QE(n){var s=[],i,l=this._root,c,u,p,d,g;for(l&&s.push(new On(l,this._x0,this._y0,this._x1,this._y1));i=s.pop();)if(!n(l=i.node,u=i.x0,p=i.y0,d=i.x1,g=i.y1)&&l.length){var m=(u+d)/2,x=(p+g)/2;(c=l[3])&&s.push(new On(c,m,x,d,g)),(c=l[2])&&s.push(new On(c,u,x,m,g)),(c=l[1])&&s.push(new On(c,m,p,d,x)),(c=l[0])&&s.push(new On(c,u,p,m,x))}return this}function YE(n){var s=[],i=[],l;for(this._root&&s.push(new On(this._root,this._x0,this._y0,this._x1,this._y1));l=s.pop();){var c=l.node;if(c.length){var u,p=l.x0,d=l.y0,g=l.x1,m=l.y1,x=(p+g)/2,A=(d+m)/2;(u=c[0])&&s.push(new On(u,p,d,x,A)),(u=c[1])&&s.push(new On(u,x,d,g,A)),(u=c[2])&&s.push(new On(u,p,A,x,m)),(u=c[3])&&s.push(new On(u,x,A,g,m))}i.push(l)}for(;l=i.pop();)n(l.node,l.x0,l.y0,l.x1,l.y1);return this}function XE(n){return n[0]}function JE(n){return arguments.length?(this._x=n,this):this._x}function ek(n){return n[1]}function tk(n){return arguments.length?(this._y=n,this):this._y}function ph(n,s,i){var l=new mh(s??XE,i??ek,NaN,NaN,NaN,NaN);return n==null?l:l.addAll(n)}function mh(n,s,i,l,c,u){this._x=n,this._y=s,this._x0=i,this._y0=l,this._x1=c,this._y1=u,this._root=void 0}function Xg(n){for(var s={data:n.data},i=s;n=n.next;)i=i.next={data:n.data};return s}var zn=ph.prototype=mh.prototype;zn.copy=function(){var n=new mh(this._x,this._y,this._x0,this._y0,this._x1,this._y1),s=this._root,i,l;if(!s)return n;if(!s.length)return n._root=Xg(s),n;for(i=[{source:s,target:n._root=new Array(4)}];s=i.pop();)for(var c=0;c<4;++c)(l=s.source[c])&&(l.length?i.push({source:l,target:s.target[c]=new Array(4)}):s.target[c]=Xg(l));return n};zn.add=zE;zn.addAll=HE;zn.cover=VE;zn.data=UE;zn.extent=ZE;zn.find=WE;zn.remove=qE;zn.removeAll=GE;zn.root=$E;zn.size=KE;zn.visit=QE;zn.visitAfter=YE;zn.x=JE;zn.y=tk;function jn(n){return function(){return n}}function go(n){return(n()-.5)*1e-6}function nk(n){return n.x+n.vx}function rk(n){return n.y+n.vy}function ik(n){var s,i,l,c=1,u=1;typeof n!="function"&&(n=jn(n==null?1:+n));function p(){for(var m,x=s.length,A,_,k,R,C,w,B=0;B<u;++B)for(A=ph(s,nk,rk).visitAfter(d),m=0;m<x;++m)_=s[m],C=i[_.index],w=C*C,k=_.x+_.vx,R=_.y+_.vy,A.visit(S);function S(T,F,M,z,H){var j=T.data,X=T.r,V=C+X;if(j){if(j.index>_.index){var $=k-j.x-j.vx,ee=R-j.y-j.vy,W=$*$+ee*ee;W<V*V&&($===0&&($=go(l),W+=$*$),ee===0&&(ee=go(l),W+=ee*ee),W=(V-(W=Math.sqrt(W)))/W*c,_.vx+=($*=W)*(V=(X*=X)/(w+X)),_.vy+=(ee*=W)*V,j.vx-=$*(V=1-V),j.vy-=ee*V)}return}return F>k+V||z<k-V||M>R+V||H<R-V}}function d(m){if(m.data)return m.r=i[m.data.index];for(var x=m.r=0;x<4;++x)m[x]&&m[x].r>m.r&&(m.r=m[x].r)}function g(){if(s){var m,x=s.length,A;for(i=new Array(x),m=0;m<x;++m)A=s[m],i[A.index]=+n(A,m,s)}}return p.initialize=function(m,x){s=m,l=x,g()},p.iterations=function(m){return arguments.length?(u=+m,p):u},p.strength=function(m){return arguments.length?(c=+m,p):c},p.radius=function(m){return arguments.length?(n=typeof m=="function"?m:jn(+m),g(),p):n},p}function ok(n){return n.index}function Jg(n,s){var i=n.get(s);if(!i)throw new Error("node not found: "+s);return i}function sk(n){var s=ok,i=A,l,c=jn(30),u,p,d,g,m,x=1;n==null&&(n=[]);function A(w){return 1/Math.min(d[w.source.index],d[w.target.index])}function _(w){for(var B=0,S=n.length;B<x;++B)for(var T=0,F,M,z,H,j,X,V;T<S;++T)F=n[T],M=F.source,z=F.target,H=z.x+z.vx-M.x-M.vx||go(m),j=z.y+z.vy-M.y-M.vy||go(m),X=Math.sqrt(H*H+j*j),X=(X-u[T])/X*w*l[T],H*=X,j*=X,z.vx-=H*(V=g[T]),z.vy-=j*V,M.vx+=H*(V=1-V),M.vy+=j*V}function k(){if(p){var w,B=p.length,S=n.length,T=new Map(p.map((M,z)=>[s(M,z,p),M])),F;for(w=0,d=new Array(B);w<S;++w)F=n[w],F.index=w,typeof F.source!="object"&&(F.source=Jg(T,F.source)),typeof F.target!="object"&&(F.target=Jg(T,F.target)),d[F.source.index]=(d[F.source.index]||0)+1,d[F.target.index]=(d[F.target.index]||0)+1;for(w=0,g=new Array(S);w<S;++w)F=n[w],g[w]=d[F.source.index]/(d[F.source.index]+d[F.target.index]);l=new Array(S),R(),u=new Array(S),C()}}function R(){if(p)for(var w=0,B=n.length;w<B;++w)l[w]=+i(n[w],w,n)}function C(){if(p)for(var w=0,B=n.length;w<B;++w)u[w]=+c(n[w],w,n)}return _.initialize=function(w,B){p=w,m=B,k()},_.links=function(w){return arguments.length?(n=w,k(),_):n},_.id=function(w){return arguments.length?(s=w,_):s},_.iterations=function(w){return arguments.length?(x=+w,_):x},_.strength=function(w){return arguments.length?(i=typeof w=="function"?w:jn(+w),R(),_):i},_.distance=function(w){return arguments.length?(c=typeof w=="function"?w:jn(+w),C(),_):c},_}var ak={value:()=>{}};function _v(){for(var n=0,s=arguments.length,i={},l;n<s;++n){if(!(l=arguments[n]+"")||l in i||/[\s.]/.test(l))throw new Error("illegal type: "+l);i[l]=[]}return new Hu(i)}function Hu(n){this._=n}function lk(n,s){return n.trim().split(/^|\s+/).map(function(i){var l="",c=i.indexOf(".");if(c>=0&&(l=i.slice(c+1),i=i.slice(0,c)),i&&!s.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:l}})}Hu.prototype=_v.prototype={constructor:Hu,on:function(n,s){var i=this._,l=lk(n+"",i),c,u=-1,p=l.length;if(arguments.length<2){for(;++u<p;)if((c=(n=l[u]).type)&&(c=ck(i[c],n.name)))return c;return}if(s!=null&&typeof s!="function")throw new Error("invalid callback: "+s);for(;++u<p;)if(c=(n=l[u]).type)i[c]=ex(i[c],n.name,s);else if(s==null)for(c in i)i[c]=ex(i[c],n.name,null);return this},copy:function(){var n={},s=this._;for(var i in s)n[i]=s[i].slice();return new Hu(n)},call:function(n,s){if((c=arguments.length-2)>0)for(var i=new Array(c),l=0,c,u;l<c;++l)i[l]=arguments[l+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(u=this._[n],l=0,c=u.length;l<c;++l)u[l].value.apply(s,i)},apply:function(n,s,i){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var l=this._[n],c=0,u=l.length;c<u;++c)l[c].value.apply(s,i)}};function ck(n,s){for(var i=0,l=n.length,c;i<l;++i)if((c=n[i]).name===s)return c.value}function ex(n,s,i){for(var l=0,c=n.length;l<c;++l)if(n[l].name===s){n[l]=ak,n=n.slice(0,l).concat(n.slice(l+1));break}return i!=null&&n.push({name:s,value:i}),n}var sa=0,xl=0,ml=0,wv=1e3,Ju,Al,ed=0,os=0,wd=0,Cl=typeof performance=="object"&&performance.now?performance:Date,bv=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Cv(){return os||(bv(uk),os=Cl.now()+wd)}function uk(){os=0}function T0(){this._call=this._time=this._next=null}T0.prototype=Ev.prototype={constructor:T0,restart:function(n,s,i){if(typeof n!="function")throw new TypeError("callback is not a function");i=(i==null?Cv():+i)+(s==null?0:+s),!this._next&&Al!==this&&(Al?Al._next=this:Ju=this,Al=this),this._call=n,this._time=i,D0()},stop:function(){this._call&&(this._call=null,this._time=1/0,D0())}};function Ev(n,s,i){var l=new T0;return l.restart(n,s,i),l}function dk(){Cv(),++sa;for(var n=Ju,s;n;)(s=os-n._time)>=0&&n._call.call(void 0,s),n=n._next;--sa}function tx(){os=(ed=Cl.now())+wd,sa=xl=0;try{dk()}finally{sa=0,hk(),os=0}}function fk(){var n=Cl.now(),s=n-ed;s>wv&&(wd-=s,ed=n)}function hk(){for(var n,s=Ju,i,l=1/0;s;)s._call?(l>s._time&&(l=s._time),n=s,s=s._next):(i=s._next,s._next=null,s=n?n._next=i:Ju=i);Al=n,D0(l)}function D0(n){if(!sa){xl&&(xl=clearTimeout(xl));var s=n-os;s>24?(n<1/0&&(xl=setTimeout(tx,n-Cl.now()-wd)),ml&&(ml=clearInterval(ml))):(ml||(ed=Cl.now(),ml=setInterval(fk,wv)),sa=1,bv(tx))}}const pk=1664525,mk=1013904223,nx=4294967296;function gk(){let n=1;return()=>(n=(pk*n+mk)%nx)/nx}function xk(n){return n.x}function Ak(n){return n.y}var vk=10,yk=Math.PI*(3-Math.sqrt(5));function _k(n){var s,i=1,l=.001,c=1-Math.pow(l,1/300),u=0,p=.6,d=new Map,g=Ev(A),m=_v("tick","end"),x=gk();n==null&&(n=[]);function A(){_(),m.call("tick",s),i<l&&(g.stop(),m.call("end",s))}function _(C){var w,B=n.length,S;C===void 0&&(C=1);for(var T=0;T<C;++T)for(i+=(u-i)*c,d.forEach(function(F){F(i)}),w=0;w<B;++w)S=n[w],S.fx==null?S.x+=S.vx*=p:(S.x=S.fx,S.vx=0),S.fy==null?S.y+=S.vy*=p:(S.y=S.fy,S.vy=0);return s}function k(){for(var C=0,w=n.length,B;C<w;++C){if(B=n[C],B.index=C,B.fx!=null&&(B.x=B.fx),B.fy!=null&&(B.y=B.fy),isNaN(B.x)||isNaN(B.y)){var S=vk*Math.sqrt(.5+C),T=C*yk;B.x=S*Math.cos(T),B.y=S*Math.sin(T)}(isNaN(B.vx)||isNaN(B.vy))&&(B.vx=B.vy=0)}}function R(C){return C.initialize&&C.initialize(n,x),C}return k(),s={tick:_,restart:function(){return g.restart(A),s},stop:function(){return g.stop(),s},nodes:function(C){return arguments.length?(n=C,k(),d.forEach(R),s):n},alpha:function(C){return arguments.length?(i=+C,s):i},alphaMin:function(C){return arguments.length?(l=+C,s):l},alphaDecay:function(C){return arguments.length?(c=+C,s):+c},alphaTarget:function(C){return arguments.length?(u=+C,s):u},velocityDecay:function(C){return arguments.length?(p=1-C,s):1-p},randomSource:function(C){return arguments.length?(x=C,d.forEach(R),s):x},force:function(C,w){return arguments.length>1?(w==null?d.delete(C):d.set(C,R(w)),s):d.get(C)},find:function(C,w,B){var S=0,T=n.length,F,M,z,H,j;for(B==null?B=1/0:B*=B,S=0;S<T;++S)H=n[S],F=C-H.x,M=w-H.y,z=F*F+M*M,z<B&&(j=H,B=z);return j},on:function(C,w){return arguments.length>1?(m.on(C,w),s):m.on(C)}}}function rx(){var n,s,i,l,c=jn(-30),u,p=1,d=1/0,g=.81;function m(k){var R,C=n.length,w=ph(n,xk,Ak).visitAfter(A);for(l=k,R=0;R<C;++R)s=n[R],w.visit(_)}function x(){if(n){var k,R=n.length,C;for(u=new Array(R),k=0;k<R;++k)C=n[k],u[C.index]=+c(C,k,n)}}function A(k){var R=0,C,w,B=0,S,T,F;if(k.length){for(S=T=F=0;F<4;++F)(C=k[F])&&(w=Math.abs(C.value))&&(R+=C.value,B+=w,S+=w*C.x,T+=w*C.y);k.x=S/B,k.y=T/B}else{C=k,C.x=C.data.x,C.y=C.data.y;do R+=u[C.data.index];while(C=C.next)}k.value=R}function _(k,R,C,w){if(!k.value)return!0;var B=k.x-s.x,S=k.y-s.y,T=w-R,F=B*B+S*S;if(T*T/g<F)return F<d&&(B===0&&(B=go(i),F+=B*B),S===0&&(S=go(i),F+=S*S),F<p&&(F=Math.sqrt(p*F)),s.vx+=B*k.value*l/F,s.vy+=S*k.value*l/F),!0;if(k.length||F>=d)return;(k.data!==s||k.next)&&(B===0&&(B=go(i),F+=B*B),S===0&&(S=go(i),F+=S*S),F<p&&(F=Math.sqrt(p*F)));do k.data!==s&&(T=u[k.data.index]*l/F,s.vx+=B*T,s.vy+=S*T);while(k=k.next)}return m.initialize=function(k,R){n=k,i=R,x()},m.strength=function(k){return arguments.length?(c=typeof k=="function"?k:jn(+k),x(),m):c},m.distanceMin=function(k){return arguments.length?(p=k*k,m):Math.sqrt(p)},m.distanceMax=function(k){return arguments.length?(d=k*k,m):Math.sqrt(d)},m.theta=function(k){return arguments.length?(g=k*k,m):Math.sqrt(g)},m}function ix(n){var s=jn(.1),i,l,c;typeof n!="function"&&(n=jn(n==null?0:+n));function u(d){for(var g=0,m=i.length,x;g<m;++g)x=i[g],x.vx+=(c[g]-x.x)*l[g]*d}function p(){if(i){var d,g=i.length;for(l=new Array(g),c=new Array(g),d=0;d<g;++d)l[d]=isNaN(c[d]=+n(i[d],d,i))?0:+s(i[d],d,i)}}return u.initialize=function(d){i=d,p()},u.strength=function(d){return arguments.length?(s=typeof d=="function"?d:jn(+d),p(),u):s},u.x=function(d){return arguments.length?(n=typeof d=="function"?d:jn(+d),p(),u):n},u}function ox(n){var s=jn(.1),i,l,c;typeof n!="function"&&(n=jn(n==null?0:+n));function u(d){for(var g=0,m=i.length,x;g<m;++g)x=i[g],x.vy+=(c[g]-x.y)*l[g]*d}function p(){if(i){var d,g=i.length;for(l=new Array(g),c=new Array(g),d=0;d<g;++d)l[d]=isNaN(c[d]=+n(i[d],d,i))?0:+s(i[d],d,i)}}return u.initialize=function(d){i=d,p()},u.strength=function(d){return arguments.length?(s=typeof d=="function"?d:jn(+d),p(),u):s},u.y=function(d){return arguments.length?(n=typeof d=="function"?d:jn(+d),p(),u):n},u}const ni={ambiguous:"#9ca3af",link:"#4b5563",background:"#0a0a0a",particleAD:"#f59e0b",particleGT:"#06b6d4",particleDM:"#8b5cf6",particleUnknown:"#6b7280"};function wk(n){var s;try{const i=jt.MeshCoreDecoder.decode(n);if(!i.isValid)return null;const l={routeType:i.routeType,payloadType:i.payloadType,pathBytes:i.path||[],srcHash:null,dstHash:null,advertPubkey:null,groupTextSender:null};if(i.payloadType===jt.PayloadType.TextMessage&&i.payload.decoded){const c=i.payload.decoded;l.srcHash=c.sourceHash||null,l.dstHash=c.destinationHash||null}else if(i.payloadType===jt.PayloadType.Advert&&i.payload.decoded){const c=i.payload.decoded;l.advertPubkey=c.publicKey||null}else if(i.payloadType===jt.PayloadType.GroupText&&i.payload.decoded){const c=i.payload.decoded;l.groupTextSender=((s=c.decrypted)==null?void 0:s.sender)||null}return l}catch{return null}}function p0(n){let s=0;for(let i=0;i<n.length;i++){const l=n.charCodeAt(i);s=(s<<5)-s+l,s=s&s}return Math.abs(s).toString(16).padStart(8,"0")}function bk(n){return n===jt.PayloadType.Advert?"AD":n===jt.PayloadType.GroupText?"GT":n===jt.PayloadType.TextMessage?"DM":"?"}function Ck(n,s){var i,l;if(n.payloadType===jt.PayloadType.Advert&&n.advertPubkey)return`ad:${n.advertPubkey.slice(0,12)}`;if(n.payloadType===jt.PayloadType.GroupText){const c=n.groupTextSender||((i=s.decrypted_info)==null?void 0:i.sender)||"?",u=((l=s.decrypted_info)==null?void 0:l.channel_name)||"?",p=p0(s.data).slice(0,8);return`gt:${u}:${c}:${p}`}if(n.payloadType===jt.PayloadType.TextMessage){const c=p0(s.data).slice(0,8);return`dm:${n.srcHash||"?"}:${n.dstHash||"?"}:${c}`}return`other:${p0(s.data)}`}function Ek(n,s){const i=n.toLowerCase(),l=s.filter(c=>c.public_key.toLowerCase().startsWith(i));return l.length===1?l[0]:null}function kk(n,s){const i=n.toLowerCase();return s.filter(l=>l.public_key.toLowerCase().startsWith(i))}function Sk(n){return`?${n.toLowerCase()}`}const m0=100,Bk=.008,sx=2e3;function ax({packets:n,contacts:s,config:i}){const l=D.useRef(null),c=D.useRef(null),[u,p]=D.useState({width:800,height:600}),d=D.useRef(new Set),[g,m]=D.useState(!0),[x,A]=D.useState(!1),[_,k]=D.useState(-200),[R,C]=D.useState(!1),w=D.useRef(new Map),B=D.useRef(new Map),S=D.useRef(null),T=D.useRef([]),F=D.useRef(new Map),M=D.useRef(new Map),z=D.useRef(0),[H,j]=D.useState({x:0,y:0,scale:1}),X=D.useRef(!1),V=D.useRef({x:0,y:0}),[$,ee]=D.useState(null),[W,re]=D.useState({processed:0,animated:0,nodes:0,links:0});D.useEffect(()=>{const de=()=>{if(c.current){const Ze=c.current.getBoundingClientRect();p({width:Ze.width,height:Ze.height})}};de();const he=new ResizeObserver(de);return c.current&&he.observe(c.current),()=>he.disconnect()},[]),D.useEffect(()=>{const de=_k([]).force("link",sk([]).id(he=>he.id).distance(80).strength(.3)).force("charge",rx().strength(he=>he.id==="self"?-1200:-200).distanceMax(500)).force("center",Yg(u.width/2,u.height/2)).force("collide",ik(40)).force("selfX",ix(u.width/2).strength(he=>he.id==="self"?.1:0)).force("selfY",ox(u.height/2).strength(he=>he.id==="self"?.1:0)).alphaDecay(.02).velocityDecay(.5).alphaTarget(.03);return S.current=de,()=>{de.stop()}},[]),D.useEffect(()=>{S.current&&(S.current.force("center",Yg(u.width/2,u.height/2)),S.current.force("selfX",ix(u.width/2).strength(de=>de.id==="self"?.1:0)),S.current.force("selfY",ox(u.height/2).strength(de=>de.id==="self"?.1:0)),S.current.alpha(.3).restart())},[u]),D.useEffect(()=>{S.current&&(S.current.force("charge",rx().strength(de=>de.id==="self"?_*6:_).distanceMax(500)),S.current.alpha(.5).restart())},[_]),D.useEffect(()=>{d.current.clear();const de=w.current.get("self");w.current.clear(),de&&w.current.set("self",de),B.current.clear(),T.current=[],F.current.clear();for(const he of M.current.values())clearTimeout(he);M.current.clear(),re(he=>({...he,processed:0,animated:0,nodes:de?1:0,links:0}))},[g,x]);const pe=D.useCallback(()=>{if(!S.current)return;const de=Array.from(w.current.values()),he=Array.from(B.current.values()),Ze=he.length>m0?he.slice(-m0):he;S.current.nodes(de);const Fe=S.current.force("link");Fe&&Fe.links(Ze),S.current.alpha(.15).restart(),re(ge=>({...ge,nodes:de.length,links:Ze.length}))},[]);D.useEffect(()=>{const de="self";w.current.has(de)||(w.current.set(de,{id:de,name:(i==null?void 0:i.name)||"Me",type:"self",isAmbiguous:!1,lastActivity:Date.now(),x:u.width/2,y:u.height/2}),pe())},[i,u,pe]);const ie=D.useCallback((de,he,Ze,Fe,ge,Le)=>{const We=Date.now(),lt=w.current.get(de);if(lt)lt.lastActivity=We,he&&!lt.name&&(lt.name=he),ge&&(lt.ambiguousNames=ge),Le!==void 0&&(lt.lastSeen=Le);else{const et=w.current.get("self"),Ne=(et==null?void 0:et.x)??400,Ue=(et==null?void 0:et.y)??300,ot=(Math.random()-.5)*100,tt=(Math.random()-.5)*100;w.current.set(de,{id:de,name:he,type:Ze,isAmbiguous:Fe,lastActivity:We,lastSeen:Le,ambiguousNames:ge,x:Ne+ot,y:Ue+tt})}},[]),Ae=D.useCallback((de,he)=>{const Ze=Date.now(),Fe=[de,he].sort().join("->"),ge=B.current.get(Fe);return ge?ge.lastActivity=Ze:B.current.set(Fe,{source:de,target:he,lastActivity:Ze}),Fe},[]),G=D.useCallback(de=>{const he=F.current.get(de);if(!he)return;F.current.delete(de),M.current.delete(de);const Fe={AD:ni.particleAD,GT:ni.particleGT,DM:ni.particleDM,"?":ni.particleUnknown}[he.label];for(const ge of he.paths){const Le=ge.nodes.filter((We,lt)=>lt===0||We!==ge.nodes[lt-1]);if(!(Le.length<2))for(let We=0;We<Le.length-1;We++){const lt=Le[We],et=Le[We+1],Ne=[lt,et].sort().join("->");T.current.push({linkKey:Ne,progress:-We,speed:Bk,color:Fe,label:he.label,fromNodeId:lt,toNodeId:et})}}},[]);D.useEffect(()=>{let de=0,he=0,Ze=!1;n.forEach(Fe=>{var ot,tt;if(d.current.has(Fe.id))return;if(d.current.add(Fe.id),de++,d.current.size>1e3){const oe=Array.from(d.current);d.current=new Set(oe.slice(-500))}const ge=wk(Fe.data);if(!ge)return;const Le=((ot=i==null?void 0:i.public_key)==null?void 0:ot.slice(0,2).toLowerCase())||null,We=(oe,Re,qe)=>{const ve=Ek(oe,s);if(ve){const Me=ve.public_key.slice(0,12).toLowerCase(),yt=ve.type===mo?"repeater":"client";return ie(Me,ve.name,yt,!1,void 0,ve.last_seen),Ze=!0,Me}else if(qe){const Me=kk(oe,s),yt=Sk(oe),Pt=Re?Me.filter(Et=>Et.type===mo):Me.filter(Et=>Et.type!==mo),Nt=Pt.map(Et=>Et.name||Et.public_key.slice(0,8)),Wt=Pt.reduce((Et,An)=>An.last_seen&&(!Et||An.last_seen>Et)?An.last_seen:Et,null),Ft=oe.toUpperCase();return ie(yt,Ft,Re?"repeater":"client",!0,Nt,Wt),Ze=!0,yt}return null},lt=oe=>{if(oe.length<12)return null;const Re=oe.slice(0,12).toLowerCase(),qe=s.find(Me=>Me.public_key.toLowerCase().startsWith(Re)),ve=(qe==null?void 0:qe.type)===mo?"repeater":"client";return ie(Re,(qe==null?void 0:qe.name)||null,ve,!1,void 0,qe==null?void 0:qe.last_seen),Ze=!0,Re},et=oe=>{const Re=s.find(ve=>ve.name===oe);if(Re){const ve=Re.public_key.slice(0,12).toLowerCase(),Me=Re.type===mo?"repeater":"client";return ie(ve,Re.name,Me,!1,void 0,Re.last_seen),Ze=!0,ve}const qe=`name:${oe}`;return ie(qe,oe,"client",!1),Ze=!0,qe},Ne=[];if(ge.payloadType===jt.PayloadType.Advert&&ge.advertPubkey){const oe=lt(ge.advertPubkey);oe&&Ne.push(oe);for(const Re of ge.pathBytes){const qe=We(Re,!0,g);qe&&Ne.push(qe)}Ne.length>0&&Ne.push("self")}else if(ge.payloadType===jt.PayloadType.TextMessage){if(ge.srcHash!==null)if(Le!==null&&ge.srcHash.toLowerCase()===Le)Ne.push("self");else{const oe=We(ge.srcHash,!1,x);oe&&Ne.push(oe)}for(const oe of ge.pathBytes){const Re=We(oe,!0,g);Re&&Ne.push(Re)}if(ge.dstHash!==null)if(Le!==null&&ge.dstHash.toLowerCase()===Le)Ne.push("self");else{const oe=We(ge.dstHash,!1,x);oe?Ne.push(oe):Ne.push("self")}else Ne.push("self")}else if(ge.payloadType===jt.PayloadType.GroupText){let oe=null;ge.groupTextSender&&(oe=et(ge.groupTextSender)),!oe&&((tt=Fe.decrypted_info)!=null&&tt.sender)&&(oe=et(Fe.decrypted_info.sender)),oe&&Ne.push(oe);for(const Re of ge.pathBytes){const qe=We(Re,!0,g);qe&&Ne.push(qe)}Ne.push("self")}else{for(const oe of ge.pathBytes){const Re=We(oe,!0,g);Re&&Ne.push(Re)}Ne.length>0&&Ne.push("self")}Ne.length>0&&Ne[Ne.length-1]!=="self"&&Ne.push("self");const Ue=Ne.filter((oe,Re)=>Re===0||oe!==Ne[Re-1]);if(Ue.length>=2){for(let Me=0;Me<Ue.length-1;Me++)Ue[Me]!==Ue[Me+1]&&(Ae(Ue[Me],Ue[Me+1]),Ze=!0);const oe=Ck(ge,Fe),Re=bk(ge.payloadType),qe=Date.now(),ve=F.current.get(oe);if(ve&&qe<ve.expiresAt)ve.paths.push({nodes:[...Ue],snr:Fe.snr??null,timestamp:qe});else{M.current.has(oe)&&(clearTimeout(M.current.get(oe)),M.current.delete(oe));const Me=Ue.length>0&&Ue[0]!=="self"?Ue[0]:null;F.current.set(oe,{key:oe,label:Re,originNodeId:Me,paths:[{nodes:[...Ue],snr:Fe.snr??null,timestamp:qe}],firstSeen:qe,expiresAt:qe+sx});const yt=setTimeout(()=>{G(oe)},sx);M.current.set(oe,yt)}if(F.current.size>100){const yt=Array.from(F.current.entries()).sort((Pt,Nt)=>Pt[1].firstSeen-Nt[1].firstSeen).slice(0,50);for(const[Pt]of yt){const Nt=M.current.get(Pt);Nt&&(clearTimeout(Nt),M.current.delete(Pt)),F.current.delete(Pt)}}he++}}),Ze&&pe(),de>0&&re(Fe=>({...Fe,processed:Fe.processed+de,animated:Fe.animated+he}))},[n,s,i,g,x,ie,Ae,pe,G]);const xe=D.useCallback(()=>{const de=l.current,he=de==null?void 0:de.getContext("2d");if(!de||!he)return;const{width:Ze,height:Fe}=u,ge=window.devicePixelRatio||1;de.width=Ze*ge,de.height=Fe*ge,de.style.width=`${Ze}px`,de.style.height=`${Fe}px`,he.scale(ge,ge),he.fillStyle=ni.background,he.fillRect(0,0,Ze,Fe),he.save(),he.translate(Ze/2,Fe/2),he.scale(H.scale,H.scale),he.translate(H.x-Ze/2,H.y-Fe/2);const Le=Array.from(w.current.values()),We=Array.from(B.current.values()).slice(-m0),lt=2880*60*1e3,et=Date.now(),Ne=new Set,Ue=Le.filter(oe=>{if(oe.type==="self"||oe.type==="client")return Ne.add(oe.id),!0;if(R&&oe.type==="repeater"){const Re=oe.lastSeen?oe.lastSeen*1e3:oe.lastActivity;if(et-Re>lt)return!1}return Ne.add(oe.id),!0}),ot=We.filter(oe=>{const Re=typeof oe.source=="string"?oe.source:oe.source.id,qe=typeof oe.target=="string"?oe.target:oe.target.id;return Ne.has(Re)&&Ne.has(qe)});he.strokeStyle=ni.link,he.lineWidth=2;for(const oe of ot){const Re=typeof oe.source=="string"?oe.source:oe.source.id,qe=typeof oe.target=="string"?oe.target:oe.target.id,ve=w.current.get(Re),Me=w.current.get(qe);(ve==null?void 0:ve.x)!=null&&(ve==null?void 0:ve.y)!=null&&(Me==null?void 0:Me.x)!=null&&(Me==null?void 0:Me.y)!=null&&(he.beginPath(),he.moveTo(ve.x,ve.y),he.lineTo(Me.x,Me.y),he.stroke())}const tt=[];for(const oe of T.current){if(!Ne.has(oe.fromNodeId)||!Ne.has(oe.toNodeId)){oe.progress+=oe.speed,oe.progress<=1&&tt.push(oe);continue}const Re=w.current.get(oe.fromNodeId),qe=w.current.get(oe.toNodeId);if((Re==null?void 0:Re.x)==null||(Re==null?void 0:Re.y)==null||(qe==null?void 0:qe.x)==null||(qe==null?void 0:qe.y)==null)continue;oe.progress+=oe.speed;const ve=oe.progress;if(ve<=1&&(tt.push(oe),ve>=0)){const Me=Re.x+(qe.x-Re.x)*ve,yt=Re.y+(qe.y-Re.y)*ve;he.fillStyle=oe.color+"40",he.beginPath(),he.arc(Me,yt,14,0,Math.PI*2),he.fill(),he.fillStyle=oe.color,he.beginPath(),he.arc(Me,yt,10,0,Math.PI*2),he.fill(),he.fillStyle="#ffffff",he.font="bold 8px sans-serif",he.textAlign="center",he.textBaseline="middle",he.fillText(oe.label,Me,yt)}}T.current=tt;for(const oe of Ue){if(oe.x==null||oe.y==null)continue;let Re;oe.type==="self"?Re="":oe.type==="repeater"?Re="":oe.isAmbiguous?Re="":Re="";const qe=oe.type==="self"?36:18;he.font=`${qe}px sans-serif`,he.textAlign="center",he.textBaseline="middle",he.fillText(Re,oe.x,oe.y);const ve=oe.isAmbiguous?oe.id:oe.name||(oe.type==="self"?"Me":oe.id.slice(0,8));if(he.font="11px sans-serif",he.textAlign="center",he.textBaseline="top",he.fillStyle=oe.isAmbiguous?ni.ambiguous:"#e5e7eb",he.fillText(ve,oe.x,oe.y+qe/2+4),oe.isAmbiguous&&oe.ambiguousNames&&oe.ambiguousNames.length>0){he.font="9px sans-serif",he.fillStyle="#6b7280";let Me=oe.y+qe/2+18;if($===oe.id)for(const Pt of oe.ambiguousNames)he.fillText(Pt,oe.x,Me),Me+=11;else if(oe.ambiguousNames.length===1)he.fillText(oe.ambiguousNames[0],oe.x,Me);else{const Pt=oe.ambiguousNames.length-1;he.fillText(`${oe.ambiguousNames[0]} +${Pt} more`,oe.x,Me)}}}he.restore()},[u,H,$,R]);D.useEffect(()=>{let de=!0;const he=()=>{de&&(xe(),z.current=requestAnimationFrame(he))};return he(),()=>{de=!1,cancelAnimationFrame(z.current)}},[xe]);const Z=D.useCallback((de,he)=>{const{width:Ze,height:Fe}=u,ge=de-Ze/2,Le=he-Fe/2,We=ge/H.scale,lt=Le/H.scale,et=We-H.x+Ze/2,Ne=lt-H.y+Fe/2;return{x:et,y:Ne}},[u,H]),N=D.useCallback((de,he)=>{const Ze=Array.from(w.current.values()),Fe=20;for(const ge of Ze){if(ge.x==null||ge.y==null)continue;const Le=de-ge.x,We=he-ge.y;if(Math.sqrt(Le*Le+We*We)<Fe)return ge}return null},[]),U=D.useCallback(de=>{X.current=!0,V.current={x:de.clientX,y:de.clientY}},[]),K=D.useCallback(de=>{const he=l.current;if(!he)return;const Ze=he.getBoundingClientRect(),Fe=de.clientX-Ze.left,ge=de.clientY-Ze.top,Le=Z(Fe,ge),We=N(Le.x,Le.y);if(ee((We==null?void 0:We.id)||null),!X.current)return;const lt=de.clientX-V.current.x,et=de.clientY-V.current.y;V.current={x:de.clientX,y:de.clientY},j(Ne=>({...Ne,x:Ne.x+lt/Ne.scale,y:Ne.y+et/Ne.scale}))},[Z,N]),Y=D.useCallback(()=>{X.current=!1},[]),fe=D.useCallback(()=>{X.current=!1,ee(null)},[]),me=D.useCallback(de=>{de.preventDefault();const he=1.1,Ze=de.deltaY>0?1/he:he;j(Fe=>{const ge=Math.min(Math.max(Fe.scale*Ze,.1),5);return{...Fe,scale:ge}})},[]);D.useEffect(()=>{const de=l.current;if(de)return de.addEventListener("wheel",me,{passive:!1}),()=>{de.removeEventListener("wheel",me)}},[me]);const Se=D.useMemo(()=>[{emoji:"",label:"You",size:"text-xl"},{emoji:"",label:"Repeater",size:"text-base"},{emoji:"",label:"Node",size:"text-base"},{emoji:"",label:"Unknown",size:"text-base"}],[]),we=D.useMemo(()=>[{label:"AD",color:ni.particleAD,description:"Advertisement"},{label:"GT",color:ni.particleGT,description:"Group Text"},{label:"DM",color:ni.particleDM,description:"Direct Message"}],[]);return b.jsxs("div",{ref:c,className:"w-full h-full bg-background relative overflow-hidden",children:[b.jsx("canvas",{ref:l,className:"w-full h-full cursor-grab active:cursor-grabbing",style:{display:"block"},onMouseDown:U,onMouseMove:K,onMouseUp:Y,onMouseLeave:fe}),b.jsx("div",{className:"absolute bottom-4 left-4 bg-background/80 backdrop-blur-sm rounded-lg p-3 text-xs border border-border",children:b.jsxs("div",{className:"flex gap-6",children:[b.jsxs("div",{className:"flex flex-col gap-1.5",children:[b.jsx("div",{className:"text-muted-foreground font-medium mb-1",children:"Nodes"}),Se.map(de=>b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("span",{className:de.size,children:de.emoji}),b.jsx("span",{children:de.label})]},de.label))]}),b.jsxs("div",{className:"flex flex-col gap-1.5",children:[b.jsx("div",{className:"text-muted-foreground font-medium mb-1",children:"Packets"}),we.map(de=>b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center text-[8px] font-bold text-white",style:{backgroundColor:de.color},children:de.label}),b.jsx("span",{children:de.description})]},de.label))]})]})}),b.jsx("div",{className:"absolute top-4 right-4 bg-background/80 backdrop-blur-sm rounded-lg p-3 text-xs border border-border",children:b.jsxs("div",{className:"flex flex-col gap-2",children:[b.jsxs("div",{children:["Nodes: ",W.nodes]}),b.jsxs("div",{children:["Links: ",W.links]}),b.jsxs("div",{className:"text-muted-foreground",children:["Processed: ",W.processed," | Animated: ",W.animated]}),b.jsxs("div",{className:"border-t border-border pt-2 mt-1 flex flex-col gap-2",children:[b.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[b.jsx(ta,{checked:g,onCheckedChange:de=>m(de===!0)}),b.jsx("span",{title:"Show placeholder nodes for repeaters when the 1-byte prefix matches multiple contacts",children:"Ambiguous repeaters"})]}),b.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[b.jsx(ta,{checked:x,onCheckedChange:de=>A(de===!0)}),b.jsx("span",{title:"Show placeholder nodes for senders/recipients when only a 1-byte prefix is known",children:"Ambiguous sender/recipient"})]}),b.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[b.jsx(ta,{checked:R,onCheckedChange:de=>C(de===!0)}),b.jsx("span",{title:"Only show repeaters heard within the last 48 hours",children:"Recent repeaters only"})]}),b.jsxs("div",{className:"flex flex-col gap-1 mt-1",children:[b.jsxs("label",{className:"text-muted-foreground",title:"How strongly nodes repel each other. Higher values spread nodes out more.",children:["Repulsion: ",Math.abs(_)]}),b.jsx("input",{type:"range",min:"50",max:"500",value:Math.abs(_),onChange:de=>k(-parseInt(de.target.value)),className:"w-full h-2 bg-border rounded-lg appearance-none cursor-pointer accent-primary"})]})]})]})})]})}function Pk({packets:n,contacts:s,channels:i,config:l}){const[c,u]=D.useState(!1);return b.jsxs("div",{className:"flex flex-col h-full",children:[b.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-border font-medium text-lg",children:[b.jsx("span",{children:"Mesh Visualizer"}),b.jsxs("label",{className:"hidden md:flex items-center gap-2 text-sm font-normal cursor-pointer",children:[b.jsx(ta,{checked:c,onCheckedChange:p=>u(p===!0)}),b.jsx("span",{children:"Full screen"})]})]}),b.jsx("div",{className:"flex-1 overflow-hidden md:hidden",children:b.jsxs(Q0,{defaultValue:"visualizer",className:"h-full flex flex-col",children:[b.jsxs(pd,{className:"mx-4 mt-2 grid grid-cols-2",children:[b.jsx(br,{value:"visualizer",children:"Visualizer"}),b.jsx(br,{value:"packets",children:"Packet Feed"})]}),b.jsx(Cr,{value:"visualizer",className:"flex-1 m-0 overflow-hidden",children:b.jsx(ax,{packets:n,contacts:s,channels:i,config:l})}),b.jsx(Cr,{value:"packets",className:"flex-1 m-0 overflow-hidden",children:b.jsx(B0,{packets:n})})]})}),b.jsxs("div",{className:"hidden md:flex flex-1 overflow-hidden",children:[b.jsx("div",{className:pt("overflow-hidden transition-all duration-200",c?"flex-1":"flex-1 border-r border-border"),children:b.jsx(ax,{packets:n,contacts:s,channels:i,config:l})}),b.jsx("div",{className:pt("overflow-hidden transition-all duration-200",c?"w-0":"w-[45rem] lg:w-[54rem]"),children:b.jsxs("div",{className:"h-full flex flex-col",children:[b.jsx("div",{className:"px-3 py-2 border-b border-border text-sm font-medium text-muted-foreground",children:"Packet Feed"}),b.jsx("div",{className:"flex-1 overflow-hidden",children:b.jsx(B0,{packets:n})})]})})]})]})}const Tk="modulepreload",Dk=function(n){return"/"+n},lx={},Rk=function(s,i,l){let c=Promise.resolve();if(i&&i.length>0){let p=function(m){return Promise.all(m.map(x=>Promise.resolve(x).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),g=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));c=p(i.map(m=>{if(m=Dk(m),m in lx)return;lx[m]=!0;const x=m.endsWith(".css"),A=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${A}`))return;const _=document.createElement("link");if(_.rel=x?"stylesheet":Tk,x||(_.as="script"),_.crossOrigin="",_.href=m,g&&_.setAttribute("nonce",g),document.head.appendChild(_),x)return new Promise((k,R)=>{_.addEventListener("load",k),_.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${m}`)))})}))}function u(p){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=p,window.dispatchEvent(d),!d.defaultPrevented)throw p}return c.then(p=>{for(const d of p||[])d.status==="rejected"&&u(d.reason);return s().catch(u)})};var Nk=Bl();const kv=aa(Nk);var Vu={exports:{}},Fk=Vu.exports,cx;function Lk(){return cx||(cx=1,(function(n,s){(function(i,l,c){n.exports=l(wt(),Bl(),xd())})(Fk,function(i){return i.HmacSHA256})})(Vu)),Vu.exports}var Mk=Lk();const Ik=aa(Mk);var Uu={exports:{}},Ok=Uu.exports,ux;function jk(){return ux||(ux=1,(function(n,s){(function(i,l){n.exports=l(wt())})(Ok,function(i){return i.enc.Hex})})(Uu)),Uu.exports}var zk=jk();const na=aa(zk),Sv="abcdefghijklmnopqrstuvwxyz0123456789",Yo=Sv.length,Bv=Sv+"-",R0="[[public room]]",Zu="8b3387e9c5cdea6ac9e5edbaa115cd72",N0=720*60*60;function Hk(n){if(!n||n.length===0)return null;const s=n.length;let i=0,l=1;for(let c=0;c<s;c++){const u=n[c],p=Bv.indexOf(u);if(p===-1)return null;const d=c===0,g=c===s-1,m=d||g?36:37;if((d||g)&&p===36)return null;i+=p*l,l*=m}return{length:s,index:i}}function es(n,s){if(n<=0)return null;let i="",l=s,c=!1;for(let u=0;u<n;u++){const p=u===0,d=u===n-1,g=p||d?36:37,m=l%g;l=Math.floor(l/g);const x=m===36;if(x&&c)return null;c=x,i+=Bv[m]}return i}function F0(n){return n===R0?Zu:kv(n).toString(na).substring(0,32)}function L0(n){return kv(na.parse(n)).toString(na).substring(0,2)}function Pv(n,s,i){const l=i.padEnd(64,"0");return Ik(na.parse(n),na.parse(l)).toString(na).substring(0,4).toLowerCase()===s.toLowerCase()}function vl(n){if(n===1)return Yo;if(n===2)return Yo*Yo;let s=Yo,i=1;for(let c=2;c<=n-2;c++){const u=(s+i)*Yo,p=s;s=u,i=p}const l=n>2?s+i:1;return Yo*l*Yo}function Vk(n,s=N0,i){const l=Math.floor(Date.now()/1e3);return n<=l&&n>=l-s}function Uk(n){return!n.includes("")}class bd{constructor(){this.device=null,this.pipeline=null,this.bindGroupLayout=null,this.paramsBuffer=null,this.matchCountBuffer=null,this.matchIndicesBuffer=null,this.ciphertextBuffer=null,this.ciphertextBufferSize=0,this.matchCountReadBuffers=[null,null],this.matchIndicesReadBuffers=[null,null],this.currentReadBufferIndex=0,this.bindGroup=null,this.bindGroupDirty=!0,this.shaderCode=`
// SHA256 round constants
const K: array<u32, 64> = array<u32, 64>(
  0x428a2f98u, 0x71374491u, 0xb5c0fbcfu, 0xe9b5dba5u, 0x3956c25bu, 0x59f111f1u, 0x923f82a4u, 0xab1c5ed5u,
  0xd807aa98u, 0x12835b01u, 0x243185beu, 0x550c7dc3u, 0x72be5d74u, 0x80deb1feu, 0x9bdc06a7u, 0xc19bf174u,
  0xe49b69c1u, 0xefbe4786u, 0x0fc19dc6u, 0x240ca1ccu, 0x2de92c6fu, 0x4a7484aau, 0x5cb0a9dcu, 0x76f988dau,
  0x983e5152u, 0xa831c66du, 0xb00327c8u, 0xbf597fc7u, 0xc6e00bf3u, 0xd5a79147u, 0x06ca6351u, 0x14292967u,
  0x27b70a85u, 0x2e1b2138u, 0x4d2c6dfcu, 0x53380d13u, 0x650a7354u, 0x766a0abbu, 0x81c2c92eu, 0x92722c85u,
  0xa2bfe8a1u, 0xa81a664bu, 0xc24b8b70u, 0xc76c51a3u, 0xd192e819u, 0xd6990624u, 0xf40e3585u, 0x106aa070u,
  0x19a4c116u, 0x1e376c08u, 0x2748774cu, 0x34b0bcb5u, 0x391c0cb3u, 0x4ed8aa4au, 0x5b9cca4fu, 0x682e6ff3u,
  0x748f82eeu, 0x78a5636fu, 0x84c87814u, 0x8cc70208u, 0x90befffau, 0xa4506cebu, 0xbef9a3f7u, 0xc67178f2u
);

// Character lookup table (a-z = 0-25, 0-9 = 26-35, dash = 36)
const CHARS: array<u32, 37> = array<u32, 37>(
  0x61u, 0x62u, 0x63u, 0x64u, 0x65u, 0x66u, 0x67u, 0x68u, 0x69u, 0x6au, // a-j
  0x6bu, 0x6cu, 0x6du, 0x6eu, 0x6fu, 0x70u, 0x71u, 0x72u, 0x73u, 0x74u, // k-t
  0x75u, 0x76u, 0x77u, 0x78u, 0x79u, 0x7au,                             // u-z
  0x30u, 0x31u, 0x32u, 0x33u, 0x34u, 0x35u, 0x36u, 0x37u, 0x38u, 0x39u, // 0-9
  0x2du                                                                  // dash
);

struct Params {
  target_channel_hash: u32,
  batch_offset: u32,
  name_length: u32,
  batch_size: u32,
  target_mac: u32,           // First 2 bytes of target MAC (in high 16 bits)
  ciphertext_words: u32,     // Number of 32-bit words in ciphertext
  ciphertext_len_bits: u32,  // Length of ciphertext in bits
  verify_mac: u32,           // 1 to verify MAC, 0 to skip
}

@group(0) @binding(0) var<uniform> params: Params;
@group(0) @binding(1) var<storage, read_write> match_count: atomic<u32>;
@group(0) @binding(2) var<storage, read_write> match_indices: array<u32>;
@group(0) @binding(3) var<storage, read> ciphertext: array<u32>; // Ciphertext data

fn rotr(x: u32, n: u32) -> u32 {
  return (x >> n) | (x << (32u - n));
}

fn ch(x: u32, y: u32, z: u32) -> u32 {
  return (x & y) ^ (~x & z);
}

fn maj(x: u32, y: u32, z: u32) -> u32 {
  return (x & y) ^ (x & z) ^ (y & z);
}

fn sigma0(x: u32) -> u32 {
  return rotr(x, 2u) ^ rotr(x, 13u) ^ rotr(x, 22u);
}

fn sigma1(x: u32) -> u32 {
  return rotr(x, 6u) ^ rotr(x, 11u) ^ rotr(x, 25u);
}

fn gamma0(x: u32) -> u32 {
  return rotr(x, 7u) ^ rotr(x, 18u) ^ (x >> 3u);
}

fn gamma1(x: u32) -> u32 {
  return rotr(x, 17u) ^ rotr(x, 19u) ^ (x >> 10u);
}

// Convert index to room name bytes, returns the hash as a u32 for the first byte check
fn index_to_room_name(idx: u32, length: u32, msg: ptr<function, array<u32, 16>>) -> bool {
  // Message starts with '#' (0x23)
  var byte_pos = 0u;
  var word_idx = 0u;
  var current_word = 0x23000000u; // '#' in big-endian position 0
  byte_pos = 1u;

  var remaining = idx;
  var prev_was_dash = false;

  // Generate room name from index
  for (var i = 0u; i < length; i++) {
    let char_count = select(37u, 36u, i == 0u || i == length - 1u); // no dash at start/end
    var char_idx = remaining % char_count;
    remaining = remaining / char_count;

    // Check for consecutive dashes (invalid)
    let is_dash = char_idx == 36u && i > 0u && i < length - 1u;
    if (is_dash && prev_was_dash) {
      return false; // Invalid: consecutive dashes
    }
    prev_was_dash = is_dash;

    // Map char index to actual character
    let c = CHARS[char_idx];

    // Pack byte into current word (big-endian)
    let shift = (3u - byte_pos % 4u) * 8u;
    if (byte_pos % 4u == 0u && byte_pos > 0u) {
      (*msg)[word_idx] = current_word;
      word_idx = word_idx + 1u;
      current_word = 0u;
    }
    current_word = current_word | (c << shift);
    byte_pos = byte_pos + 1u;
  }

  // Add padding: 0x80 followed by zeros, then length in bits
  let msg_len_bits = (length + 1u) * 8u; // +1 for '#'

  // Add 0x80 padding byte
  let shift = (3u - byte_pos % 4u) * 8u;
  if (byte_pos % 4u == 0u) {
    (*msg)[word_idx] = current_word;
    word_idx = word_idx + 1u;
    current_word = 0x80000000u;
  } else {
    current_word = current_word | (0x80u << shift);
  }
  byte_pos = byte_pos + 1u;

  // Store current word
  if (byte_pos % 4u == 0u || word_idx < 14u) {
    (*msg)[word_idx] = current_word;
    word_idx = word_idx + 1u;
  }

  // Zero-fill until word 14
  for (var i = word_idx; i < 14u; i++) {
    (*msg)[i] = 0u;
  }

  // Length in bits (64-bit, but we only use lower 32 bits for short messages)
  (*msg)[14u] = 0u;
  (*msg)[15u] = msg_len_bits;

  return true;
}

fn sha256_block(msg: ptr<function, array<u32, 16>>) -> array<u32, 8> {
  // Initialize hash values
  var h: array<u32, 8> = array<u32, 8>(
    0x6a09e667u, 0xbb67ae85u, 0x3c6ef372u, 0xa54ff53au,
    0x510e527fu, 0x9b05688cu, 0x1f83d9abu, 0x5be0cd19u
  );

  // Message schedule
  var w: array<u32, 64>;
  for (var i = 0u; i < 16u; i++) {
    w[i] = (*msg)[i];
  }
  for (var i = 16u; i < 64u; i++) {
    w[i] = gamma1(w[i-2u]) + w[i-7u] + gamma0(w[i-15u]) + w[i-16u];
  }

  // Compression
  var a = h[0]; var b = h[1]; var c = h[2]; var d = h[3];
  var e = h[4]; var f = h[5]; var g = h[6]; var hh = h[7];

  for (var i = 0u; i < 64u; i++) {
    let t1 = hh + sigma1(e) + ch(e, f, g) + K[i] + w[i];
    let t2 = sigma0(a) + maj(a, b, c);
    hh = g; g = f; f = e; e = d + t1;
    d = c; c = b; b = a; a = t1 + t2;
  }

  h[0] = h[0] + a; h[1] = h[1] + b; h[2] = h[2] + c; h[3] = h[3] + d;
  h[4] = h[4] + e; h[5] = h[5] + f; h[6] = h[6] + g; h[7] = h[7] + hh;

  return h;
}

// Compute SHA256 of the key (16 bytes) to get channel hash
fn sha256_key(key: array<u32, 4>) -> u32 {
  var msg: array<u32, 16>;

  // Key bytes (16 bytes = 4 words)
  msg[0] = key[0];
  msg[1] = key[1];
  msg[2] = key[2];
  msg[3] = key[3];

  // Padding: 0x80 followed by zeros
  msg[4] = 0x80000000u;
  for (var i = 5u; i < 14u; i++) {
    msg[i] = 0u;
  }

  // Length: 128 bits
  msg[14] = 0u;
  msg[15] = 128u;

  let hash = sha256_block(&msg);

  // Return first byte of hash (big-endian)
  return hash[0] >> 24u;
}

// HMAC-SHA256 for MAC verification
// Key is 16 bytes (4 words), padded to 32 bytes with zeros for MeshCore
// Returns first 2 bytes of HMAC (as u32 in high 16 bits)
fn hmac_sha256_mac(key: array<u32, 4>, ciphertext_len: u32) -> u32 {
  // HMAC: H((K' ^ opad) || H((K' ^ ipad) || message))
  // K' is 64 bytes (32 bytes key + 32 bytes zero padding for MeshCore, then padded to 64)
  // ipad = 0x36 repeated, opad = 0x5c repeated

  // Build padded key (64 bytes = 16 words)
  // MeshCore uses 32-byte secret: 16-byte key + 16 zero bytes
  var k_pad: array<u32, 16>;
  k_pad[0] = key[0];
  k_pad[1] = key[1];
  k_pad[2] = key[2];
  k_pad[3] = key[3];
  for (var i = 4u; i < 16u; i++) {
    k_pad[i] = 0u;
  }

  // Inner hash: SHA256((K' ^ ipad) || message)
  // First block: K' ^ ipad (64 bytes)
  var inner_block: array<u32, 16>;
  for (var i = 0u; i < 16u; i++) {
    inner_block[i] = k_pad[i] ^ 0x36363636u;
  }

  // Initialize hash state with first block
  var h: array<u32, 8> = sha256_block(&inner_block);

  // Process ciphertext blocks (continuing from h state)
  let ciphertext_words = params.ciphertext_words;
  var word_idx = 0u;

  // Process full 64-byte blocks of ciphertext
  while (word_idx + 16u <= ciphertext_words) {
    var block: array<u32, 16>;
    for (var i = 0u; i < 16u; i++) {
      block[i] = ciphertext[word_idx + i];
    }
    h = sha256_block_continue(&block, h);
    word_idx = word_idx + 16u;
  }

  // Final block with remaining ciphertext + padding
  var final_block: array<u32, 16>;
  var remaining = ciphertext_words - word_idx;
  for (var i = 0u; i < 16u; i++) {
    if (i < remaining) {
      final_block[i] = ciphertext[word_idx + i];
    } else if (i == remaining) {
      // Add 0x80 padding
      final_block[i] = 0x80000000u;
    } else {
      final_block[i] = 0u;
    }
  }

  // Add length (64 bytes of ipad + ciphertext length)
  let total_bits = 512u + params.ciphertext_len_bits;
  if (remaining < 14u) {
    final_block[14] = 0u;
    final_block[15] = total_bits;
    h = sha256_block_continue(&final_block, h);
  } else {
    // Need extra block for length
    h = sha256_block_continue(&final_block, h);
    var len_block: array<u32, 16>;
    for (var i = 0u; i < 14u; i++) {
      len_block[i] = 0u;
    }
    len_block[14] = 0u;
    len_block[15] = total_bits;
    h = sha256_block_continue(&len_block, h);
  }

  let inner_hash = h;

  // Outer hash: SHA256((K' ^ opad) || inner_hash)
  var outer_block: array<u32, 16>;
  for (var i = 0u; i < 16u; i++) {
    outer_block[i] = k_pad[i] ^ 0x5c5c5c5cu;
  }
  h = sha256_block(&outer_block);

  // Second block: inner_hash (32 bytes) + padding
  var hash_block: array<u32, 16>;
  for (var i = 0u; i < 8u; i++) {
    hash_block[i] = inner_hash[i];
  }
  hash_block[8] = 0x80000000u;
  for (var i = 9u; i < 14u; i++) {
    hash_block[i] = 0u;
  }
  hash_block[14] = 0u;
  hash_block[15] = 512u + 256u; // 64 bytes opad + 32 bytes inner hash

  h = sha256_block_continue(&hash_block, h);

  // Return first 2 bytes (high 16 bits of first word)
  return h[0] & 0xFFFF0000u;
}

// SHA256 block computation continuing from existing state
fn sha256_block_continue(msg: ptr<function, array<u32, 16>>, h_in: array<u32, 8>) -> array<u32, 8> {
  var h = h_in;

  // Message schedule
  var w: array<u32, 64>;
  for (var i = 0u; i < 16u; i++) {
    w[i] = (*msg)[i];
  }
  for (var i = 16u; i < 64u; i++) {
    w[i] = gamma1(w[i-2u]) + w[i-7u] + gamma0(w[i-15u]) + w[i-16u];
  }

  // Compression
  var a = h[0]; var b = h[1]; var c = h[2]; var d = h[3];
  var e = h[4]; var f = h[5]; var g = h[6]; var hh = h[7];

  for (var i = 0u; i < 64u; i++) {
    let t1 = hh + sigma1(e) + ch(e, f, g) + K[i] + w[i];
    let t2 = sigma0(a) + maj(a, b, c);
    hh = g; g = f; f = e; e = d + t1;
    d = c; c = b; b = a; a = t1 + t2;
  }

  h[0] = h[0] + a; h[1] = h[1] + b; h[2] = h[2] + c; h[3] = h[3] + d;
  h[4] = h[4] + e; h[5] = h[5] + f; h[6] = h[6] + g; h[7] = h[7] + hh;

  return h;
}

// Process a single candidate and record match if found
fn process_candidate(name_idx: u32) {
  // Generate message for this room name
  var msg: array<u32, 16>;
  let valid = index_to_room_name(name_idx, params.name_length, &msg);

  if (!valid) {
    return;
  }

  // Compute SHA256("#roomname") - this gives us the key
  let key_hash = sha256_block(&msg);

  // Take first 16 bytes (4 words) as the key
  var key: array<u32, 4>;
  key[0] = key_hash[0];
  key[1] = key_hash[1];
  key[2] = key_hash[2];
  key[3] = key_hash[3];

  // Compute SHA256(key) to get channel hash
  let channel_hash = sha256_key(key);

  // Check if channel hash matches target
  if (channel_hash != params.target_channel_hash) {
    return;
  }

  // Channel hash matches - verify MAC if enabled
  if (params.verify_mac == 1u) {
    let computed_mac = hmac_sha256_mac(key, params.ciphertext_len_bits);
    if (computed_mac != params.target_mac) {
      return;
    }
  }

  // Found a match - record the index
  let match_idx = atomicAdd(&match_count, 1u);
  if (match_idx < 1024u) { // Limit stored matches
    match_indices[match_idx] = name_idx;
  }
}

// Each thread processes 32 candidates to amortize thread overhead
const CANDIDATES_PER_THREAD: u32 = 32u;

@compute @workgroup_size(256)
fn main(@builtin(global_invocation_id) global_id: vec3<u32>) {
  let base_idx = global_id.x * CANDIDATES_PER_THREAD;

  for (var i = 0u; i < CANDIDATES_PER_THREAD; i++) {
    let idx = base_idx + i;
    if (idx >= params.batch_size) {
      return;
    }
    let name_idx = params.batch_offset + idx;
    process_candidate(name_idx);
  }
}
`}async init(){if(!navigator.gpu)return console.warn("WebGPU not supported"),!1;try{const s=await navigator.gpu.requestAdapter();if(!s)return console.warn("No GPU adapter found"),!1;this.device=await s.requestDevice(),this.bindGroupLayout=this.device.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}}]}),this.paramsBuffer=this.device.createBuffer({size:32,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.matchCountBuffer=this.device.createBuffer({size:4,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST}),this.matchIndicesBuffer=this.device.createBuffer({size:1024*4,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC});for(let c=0;c<2;c++)this.matchCountReadBuffers[c]=this.device.createBuffer({size:4,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST}),this.matchIndicesReadBuffers[c]=this.device.createBuffer({size:1024*4,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST});const i=this.device.createShaderModule({code:this.shaderCode}),l=this.device.createPipelineLayout({bindGroupLayouts:[this.bindGroupLayout]});return this.pipeline=this.device.createComputePipeline({layout:l,compute:{module:i,entryPoint:"main"}}),!0}catch(s){return console.error("WebGPU initialization failed:",s),!1}}isAvailable(){return this.device!==null&&this.pipeline!==null}indexToRoomName(s,i){return es(i,s)}countNamesForLength(s){return vl(s)}async runBatch(s,i,l,c,u,p){if(!this.device||!this.pipeline||!this.bindGroupLayout||!this.paramsBuffer||!this.matchCountBuffer||!this.matchIndicesBuffer||!this.matchCountReadBuffers[0]||!this.matchCountReadBuffers[1]||!this.matchIndicesReadBuffers[0]||!this.matchIndicesReadBuffers[1])throw new Error("GPU not initialized");const d=this.currentReadBufferIndex;this.currentReadBufferIndex=1-this.currentReadBufferIndex;const g=this.matchCountReadBuffers[d],m=this.matchIndicesReadBuffers[d],x=u&&p?1:0;let A,_=0,k=0;if(x){const M=new Uint8Array(u.length/2);for(let V=0;V<M.length;V++)M[V]=parseInt(u.substr(V*2,2),16);_=M.length*8;const z=Math.ceil(M.length/4)*4,H=new Uint8Array(z);H.set(M),A=new Uint32Array(z/4);for(let V=0;V<A.length;V++)A[V]=H[V*4]<<24|H[V*4+1]<<16|H[V*4+2]<<8|H[V*4+3];const j=parseInt(p.substr(0,2),16),X=parseInt(p.substr(2,2),16);k=j<<24|X<<16}else A=new Uint32Array([0]);const R=Math.max(A.length*4,4);(!this.ciphertextBuffer||this.ciphertextBufferSize<R)&&(this.ciphertextBuffer&&this.ciphertextBuffer.destroy(),this.ciphertextBuffer=this.device.createBuffer({size:R,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST}),this.ciphertextBufferSize=R,this.bindGroupDirty=!0);const C=new Uint32Array([s,l,i,c,k,A.length,_,x]);this.device.queue.writeBuffer(this.paramsBuffer,0,C),this.device.queue.writeBuffer(this.ciphertextBuffer,0,A),this.device.queue.writeBuffer(this.matchCountBuffer,0,bd.ZERO_DATA),(this.bindGroupDirty||!this.bindGroup)&&(this.bindGroup=this.device.createBindGroup({layout:this.bindGroupLayout,entries:[{binding:0,resource:{buffer:this.paramsBuffer}},{binding:1,resource:{buffer:this.matchCountBuffer}},{binding:2,resource:{buffer:this.matchIndicesBuffer}},{binding:3,resource:{buffer:this.ciphertextBuffer}}]}),this.bindGroupDirty=!1);const w=this.device.createCommandEncoder(),B=w.beginComputePass();B.setPipeline(this.pipeline),B.setBindGroup(0,this.bindGroup),B.dispatchWorkgroups(Math.ceil(c/(256*32))),B.end(),w.copyBufferToBuffer(this.matchCountBuffer,0,g,0,4),w.copyBufferToBuffer(this.matchIndicesBuffer,0,m,0,1024*4),this.device.queue.submit([w.finish()]),await g.mapAsync(GPUMapMode.READ);const T=new Uint32Array(g.getMappedRange())[0];g.unmap();const F=[];if(T>0){await m.mapAsync(GPUMapMode.READ);const M=new Uint32Array(m.getMappedRange());for(let z=0;z<Math.min(T,1024);z++)F.push(M[z]);m.unmap()}return F}destroy(){var s,i,l,c,u,p,d,g;(s=this.paramsBuffer)==null||s.destroy(),(i=this.matchCountBuffer)==null||i.destroy(),(l=this.matchIndicesBuffer)==null||l.destroy(),(c=this.ciphertextBuffer)==null||c.destroy(),(u=this.matchCountReadBuffers[0])==null||u.destroy(),(p=this.matchCountReadBuffers[1])==null||p.destroy(),(d=this.matchIndicesReadBuffers[0])==null||d.destroy(),(g=this.matchIndicesReadBuffers[1])==null||g.destroy(),this.paramsBuffer=null,this.matchCountBuffer=null,this.matchIndicesBuffer=null,this.ciphertextBuffer=null,this.ciphertextBufferSize=0,this.matchCountReadBuffers=[null,null],this.matchIndicesReadBuffers=[null,null],this.currentReadBufferIndex=0,this.bindGroup=null,this.bindGroupDirty=!0,this.device&&(this.device.destroy(),this.device=null),this.pipeline=null,this.bindGroupLayout=null}}bd.ZERO_DATA=new Uint32Array([0]);function Zk(){return typeof navigator<"u"&&"gpu"in navigator}class dx{runBatch(s,i,l,c,u,p){const d=[],g=s.toString(16).padStart(2,"0"),m=!!(u&&p);for(let x=0;x<c;x++){const A=l+x,_=es(i,A);if(!_)continue;const k=F0("#"+_);L0(k)===g&&(m&&!Pv(u,p,k)||d.push(A))}return d}destroy(){}}const Wk=/^[a-z0-9-]+$/,qk=/^[a-z0-9].*[a-z0-9]$|^[a-z0-9]$/,Gk=/--/;function fx(n){return!(!n||n.length===0||!Wk.test(n)||n.length>1&&!qk.test(n)||Gk.test(n))}class $k{constructor(){this.gpuInstance=null,this.cpuInstance=null,this.wordlist=[],this.abortFlag=!1,this.useTimestampFilter=!0,this.useUtf8Filter=!0,this.useSenderFilter=!0,this.validSeconds=N0,this.useCpu=!1}async loadWordlist(s){const i=await fetch(s);if(!i.ok)throw new Error(`Failed to load wordlist: ${i.status} ${i.statusText}`);const c=(await i.text()).split(`
`).map(u=>u.trim().toLowerCase()).filter(u=>u.length>0);this.wordlist=c.filter(fx)}setWordlist(s){this.wordlist=s.map(i=>i.trim().toLowerCase()).filter(fx)}abort(){this.abortFlag=!0}isGpuAvailable(){return Zk()}async decodePacket(s){var l;const i=s.trim().replace(/\s+/g,"").replace(/^0x/i,"");if(!i||!/^[0-9a-fA-F]+$/.test(i))return null;try{const u=(l=(await jt.MeshCorePacketDecoder.decodeWithVerification(i,{})).payload)==null?void 0:l.decoded;return!(u!=null&&u.channelHash)||!(u!=null&&u.ciphertext)||!(u!=null&&u.cipherMac)?null:{channelHash:u.channelHash,ciphertext:u.ciphertext,cipherMac:u.cipherMac,isGroupText:!0}}catch{return null}}async crack(s,i,l){this.abortFlag=!1,this.useTimestampFilter=(i==null?void 0:i.useTimestampFilter)??!0,this.useUtf8Filter=(i==null?void 0:i.useUtf8Filter)??!0,this.useSenderFilter=(i==null?void 0:i.useSenderFilter)??!0,this.validSeconds=(i==null?void 0:i.validSeconds)??N0,this.useCpu=(i==null?void 0:i.forceCpu)??!1;const c=(i==null?void 0:i.maxLength)??8,u=(i==null?void 0:i.startingLength)??1,p=(i==null?void 0:i.useDictionary)??!0,d=(i==null?void 0:i.startFromType)??"bruteforce",g=s.toLowerCase(),m=await this.decodePacket(g);if(!m)return{found:!1,error:"Invalid packet or not a GroupText packet"};const{channelHash:x,ciphertext:A,cipherMac:_}=m,k=parseInt(x,16);this.useCpu?this.cpuInstance||(this.cpuInstance=new dx):this.gpuInstance||(this.gpuInstance=new bd,await this.gpuInstance.init()||(this.useCpu=!0,this.cpuInstance=new dx));const R=performance.now();let C=0,w=performance.now(),B=u,S=0,T=0,F=!1;if(i!=null&&i.startFrom){const W=i.startFrom.toLowerCase();if(d==="dictionary"){const re=this.wordlist.indexOf(W);re>=0&&(T=re+1)}else{F=!0;const re=Hk(W);re&&(B=Math.max(u,re.length),S=re.index+1,S>=vl(B)&&(B++,S=0))}}let M=0;p&&!F&&this.wordlist.length>0&&(M+=this.wordlist.length-T);for(let W=B;W<=c;W++)M+=vl(W);M-=S;const z=(W,re,pe)=>{if(!l)return;const Ae=(performance.now()-R)/1e3,G=Ae>0?Math.round(C/Ae):0,xe=M-C,Z=G>0?xe/G:0;l({checked:C,total:M,percent:M>0?Math.min(100,C/M*100):0,rateKeysPerSec:G,etaSeconds:Z,elapsedSeconds:Ae,currentLength:re,currentPosition:pe,phase:W})},H=W=>{if(!Pv(A,_,W))return{valid:!1};const re=jt.ChannelCrypto.decryptGroupTextMessage(A,_,W);return!re.success||!re.data?{valid:!1}:this.useTimestampFilter&&!Vk(re.data.timestamp,this.validSeconds)?{valid:!1}:this.useUtf8Filter&&!Uk(re.data.message)?{valid:!1}:this.useSenderFilter&&!re.data.sender?{valid:!1}:{valid:!0,message:re.data.sender?`${re.data.sender}: ${re.data.message}`:re.data.message}};if(!F&&T===0&&B===u&&S===0){z("public-key",0,R0);const W=L0(Zu);if(x===W){const re=H(Zu);if(re.valid)return{found:!0,roomName:R0,key:Zu,decryptedMessage:re.message}}}if(p&&!F&&this.wordlist.length>0)for(let W=T;W<this.wordlist.length;W++){if(this.abortFlag)return{found:!1,aborted:!0,resumeFrom:this.wordlist[W],resumeType:"dictionary"};const re=this.wordlist[W],pe=F0("#"+re),ie=L0(pe);if(parseInt(ie,16)===k){const G=H(pe);if(G.valid)return{found:!0,roomName:re,key:pe,decryptedMessage:G.message,resumeFrom:re,resumeType:"dictionary"}}C++;const Ae=performance.now();Ae-w>=200&&(z("wordlist",re.length,re),w=Ae,await new Promise(G=>setTimeout(G,0)))}const j=this.useCpu?1024:32768,X=(i==null?void 0:i.gpuDispatchMs)??1e3;let V=j,$=!1;for(let W=B;W<=c;W++){if(this.abortFlag)return{found:!1,aborted:!0,resumeFrom:es(W,0)||void 0,resumeType:"bruteforce"};const re=vl(W);let pe=W===B?S:0;for(;pe<re;){if(this.abortFlag)return{found:!1,aborted:!0,resumeFrom:es(W,pe)||void 0,resumeType:"bruteforce"};const ie=Math.min(V,re-pe),Ae=performance.now();let G;this.useCpu?G=this.cpuInstance.runBatch(k,W,pe,ie,A,_):G=await this.gpuInstance.runBatch(k,W,pe,ie,A,_);const xe=performance.now()-Ae;if(C+=ie,!this.useCpu&&!$&&ie>=j&&xe>0){const N=X/xe,U=Math.round(ie*N),K=Math.pow(2,Math.round(Math.log2(Math.max(j,U))));V=Math.max(j,K),$=!0}for(const N of G){const U=es(W,N);if(!U)continue;const K=F0("#"+U),Y=H(K);if(Y.valid)return{found:!0,roomName:U,key:K,decryptedMessage:Y.message,resumeFrom:U,resumeType:"bruteforce"}}pe+=ie;const Z=performance.now();if(Z-w>=200){const N=es(W,Math.min(pe,re-1))||"";z("bruteforce",W,N),w=Z,await new Promise(U=>setTimeout(U,0))}}}return{found:!1,resumeFrom:es(c,vl(c)-1)||void 0,resumeType:"bruteforce"}}destroy(){this.gpuInstance&&(this.gpuInstance.destroy(),this.gpuInstance=null),this.cpuInstance&&(this.cpuInstance.destroy(),this.cpuInstance=null)}}var g0,hx;function Kk(){return hx||(hx=1,g0={webm:"data:video/webm;base64,GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4EEQoWBAhhTgGcBAAAAAAAVkhFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsghV17AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU1LjMzLjEwMFdBjUxhdmY1NS4zMy4xMDBzpJBlrrXf3DCDVB8KcgbMpcr+RImIQJBgAAAAAAAWVK5rAQAAAAAAD++uAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDiDgQEj44OEAmJaAOABAAAAAAAABrCBsLqBkK4BAAAAAAAPq9eBAnPFgQKcgQAitZyDdW5khohBX1ZPUkJJU4OBAuEBAAAAAAAAEZ+BArWIQOdwAAAAAABiZIEgY6JPbwIeVgF2b3JiaXMAAAAAAoC7AAAAAAAAgLUBAAAAAAC4AQN2b3JiaXMtAAAAWGlwaC5PcmcgbGliVm9yYmlzIEkgMjAxMDExMDEgKFNjaGF1ZmVudWdnZXQpAQAAABUAAABlbmNvZGVyPUxhdmM1NS41Mi4xMDIBBXZvcmJpcyVCQ1YBAEAAACRzGCpGpXMWhBAaQlAZ4xxCzmvsGUJMEYIcMkxbyyVzkCGkoEKIWyiB0JBVAABAAACHQXgUhIpBCCGEJT1YkoMnPQghhIg5eBSEaUEIIYQQQgghhBBCCCGERTlokoMnQQgdhOMwOAyD5Tj4HIRFOVgQgydB6CCED0K4moOsOQghhCQ1SFCDBjnoHITCLCiKgsQwuBaEBDUojILkMMjUgwtCiJqDSTX4GoRnQXgWhGlBCCGEJEFIkIMGQcgYhEZBWJKDBjm4FITLQagahCo5CB+EIDRkFQCQAACgoiiKoigKEBqyCgDIAAAQQFEUx3EcyZEcybEcCwgNWQUAAAEACAAAoEiKpEiO5EiSJFmSJVmSJVmS5omqLMuyLMuyLMsyEBqyCgBIAABQUQxFcRQHCA1ZBQBkAAAIoDiKpViKpWiK54iOCISGrAIAgAAABAAAEDRDUzxHlETPVFXXtm3btm3btm3btm3btm1blmUZCA1ZBQBAAAAQ0mlmqQaIMAMZBkJDVgEACAAAgBGKMMSA0JBVAABAAACAGEoOogmtOd+c46BZDppKsTkdnEi1eZKbirk555xzzsnmnDHOOeecopxZDJoJrTnnnMSgWQqaCa0555wnsXnQmiqtOeeccc7pYJwRxjnnnCateZCajbU555wFrWmOmkuxOeecSLl5UptLtTnnnHPOOeecc84555zqxekcnBPOOeecqL25lpvQxTnnnE/G6d6cEM4555xzzjnnnHPOOeecIDRkFQAABABAEIaNYdwpCNLnaCBGEWIaMulB9+gwCRqDnELq0ehopJQ6CCWVcVJKJwgNWQUAAAIAQAghhRRSSCGFFFJIIYUUYoghhhhyyimnoIJKKqmooowyyyyzzDLLLLPMOuyssw47DDHEEEMrrcRSU2011lhr7jnnmoO0VlprrbVSSimllFIKQkNWAQAgAAAEQgYZZJBRSCGFFGKIKaeccgoqqIDQkFUAACAAgAAAAABP8hzRER3RER3RER3RER3R8RzPESVREiVREi3TMjXTU0VVdWXXlnVZt31b2IVd933d933d+HVhWJZlWZZlWZZlWZZlWZZlWZYgNGQVAAACAAAghBBCSCGFFFJIKcYYc8w56CSUEAgNWQUAAAIACAAAAHAUR3EcyZEcSbIkS9IkzdIsT/M0TxM9URRF0zRV0RVdUTdtUTZl0zVdUzZdVVZtV5ZtW7Z125dl2/d93/d93/d93/d93/d9XQdCQ1YBABIAADqSIymSIimS4ziOJElAaMgqAEAGAEAAAIriKI7jOJIkSZIlaZJneZaomZrpmZ4qqkBoyCoAABAAQAAAAAAAAIqmeIqpeIqoeI7oiJJomZaoqZoryqbsuq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq4LhIasAgAkAAB0JEdyJEdSJEVSJEdygNCQVQCADACAAAAcwzEkRXIsy9I0T/M0TxM90RM901NFV3SB0JBVAAAgAIAAAAAAAAAMybAUy9EcTRIl1VItVVMt1VJF1VNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVN0zRNEwgNWQkAkAEAkBBTLS3GmgmLJGLSaqugYwxS7KWxSCpntbfKMYUYtV4ah5RREHupJGOKQcwtpNApJq3WVEKFFKSYYyoVUg5SIDRkhQAQmgHgcBxAsixAsiwAAAAAAAAAkDQN0DwPsDQPAAAAAAAAACRNAyxPAzTPAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAA0DwP8DwR8EQRAAAAAAAAACzPAzTRAzxRBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAAsDwP8EQR0DwRAAAAAAAAACzPAzxRBDzRAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAEOAAABBgIRQasiIAiBMAcEgSJAmSBM0DSJYFTYOmwTQBkmVB06BpME0AAAAAAAAAAAAAJE2DpkHTIIoASdOgadA0iCIAAAAAAAAAAAAAkqZB06BpEEWApGnQNGgaRBEAAAAAAAAAAAAAzzQhihBFmCbAM02IIkQRpgkAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAGHAAAAgwoQwUGrIiAIgTAHA4imUBAIDjOJYFAACO41gWAABYliWKAABgWZooAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAYcAAACDChDBQashIAiAIAcCiKZQHHsSzgOJYFJMmyAJYF0DyApgFEEQAIAAAocAAACLBBU2JxgEJDVgIAUQAABsWxLE0TRZKkaZoniiRJ0zxPFGma53meacLzPM80IYqiaJoQRVE0TZimaaoqME1VFQAAUOAAABBgg6bE4gCFhqwEAEICAByKYlma5nmeJ4qmqZokSdM8TxRF0TRNU1VJkqZ5niiKommapqqyLE3zPFEURdNUVVWFpnmeKIqiaaqq6sLzPE8URdE0VdV14XmeJ4qiaJqq6roQRVE0TdNUTVV1XSCKpmmaqqqqrgtETxRNU1Vd13WB54miaaqqq7ouEE3TVFVVdV1ZBpimaaqq68oyQFVV1XVdV5YBqqqqruu6sgxQVdd1XVmWZQCu67qyLMsCAAAOHAAAAoygk4wqi7DRhAsPQKEhKwKAKAAAwBimFFPKMCYhpBAaxiSEFEImJaXSUqogpFJSKRWEVEoqJaOUUmopVRBSKamUCkIqJZVSAADYgQMA2IGFUGjISgAgDwCAMEYpxhhzTiKkFGPOOScRUoox55yTSjHmnHPOSSkZc8w556SUzjnnnHNSSuacc845KaVzzjnnnJRSSuecc05KKSWEzkEnpZTSOeecEwAAVOAAABBgo8jmBCNBhYasBABSAQAMjmNZmuZ5omialiRpmud5niiapiZJmuZ5nieKqsnzPE8URdE0VZXneZ4oiqJpqirXFUXTNE1VVV2yLIqmaZqq6rowTdNUVdd1XZimaaqq67oubFtVVdV1ZRm2raqq6rqyDFzXdWXZloEsu67s2rIAAPAEBwCgAhtWRzgpGgssNGQlAJABAEAYg5BCCCFlEEIKIYSUUggJAAAYcAAACDChDBQashIASAUAAIyx1lprrbXWQGettdZaa62AzFprrbXWWmuttdZaa6211lJrrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmstpZRSSimllFJKKaWUUkoppZRSSgUA+lU4APg/2LA6wknRWGChISsBgHAAAMAYpRhzDEIppVQIMeacdFRai7FCiDHnJKTUWmzFc85BKCGV1mIsnnMOQikpxVZjUSmEUlJKLbZYi0qho5JSSq3VWIwxqaTWWoutxmKMSSm01FqLMRYjbE2ptdhqq7EYY2sqLbQYY4zFCF9kbC2m2moNxggjWywt1VprMMYY3VuLpbaaizE++NpSLDHWXAAAd4MDAESCjTOsJJ0VjgYXGrISAAgJACAQUooxxhhzzjnnpFKMOeaccw5CCKFUijHGnHMOQgghlIwx5pxzEEIIIYRSSsaccxBCCCGEkFLqnHMQQgghhBBKKZ1zDkIIIYQQQimlgxBCCCGEEEoopaQUQgghhBBCCKmklEIIIYRSQighlZRSCCGEEEIpJaSUUgohhFJCCKGElFJKKYUQQgillJJSSimlEkoJJYQSUikppRRKCCGUUkpKKaVUSgmhhBJKKSWllFJKIYQQSikFAAAcOAAABBhBJxlVFmGjCRcegEJDVgIAZAAAkKKUUiktRYIipRikGEtGFXNQWoqocgxSzalSziDmJJaIMYSUk1Qy5hRCDELqHHVMKQYtlRhCxhik2HJLoXMOAAAAQQCAgJAAAAMEBTMAwOAA4XMQdAIERxsAgCBEZohEw0JweFAJEBFTAUBigkIuAFRYXKRdXECXAS7o4q4DIQQhCEEsDqCABByccMMTb3jCDU7QKSp1IAAAAAAADADwAACQXAAREdHMYWRobHB0eHyAhIiMkAgAAAAAABcAfAAAJCVAREQ0cxgZGhscHR4fICEiIyQBAIAAAgAAAAAggAAEBAQAAAAAAAIAAAAEBB9DtnUBAAAAAAAEPueBAKOFggAAgACjzoEAA4BwBwCdASqwAJAAAEcIhYWIhYSIAgIABhwJ7kPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99YAD+/6tQgKOFggADgAqjhYIAD4AOo4WCACSADqOZgQArADECAAEQEAAYABhYL/QACIBDmAYAAKOFggA6gA6jhYIAT4AOo5mBAFMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAGSADqOFggB6gA6jmYEAewAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAj4AOo5mBAKMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAKSADqOFggC6gA6jmYEAywAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAz4AOo4WCAOSADqOZgQDzADECAAEQEAAYABhYL/QACIBDmAYAAKOFggD6gA6jhYIBD4AOo5iBARsAEQIAARAQFGAAYWC/0AAiAQ5gGACjhYIBJIAOo4WCATqADqOZgQFDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggFPgA6jhYIBZIAOo5mBAWsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAXqADqOFggGPgA6jmYEBkwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIBpIAOo4WCAbqADqOZgQG7ADECAAEQEAAYABhYL/QACIBDmAYAAKOFggHPgA6jmYEB4wAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIB5IAOo4WCAfqADqOZgQILADECAAEQEAAYABhYL/QACIBDmAYAAKOFggIPgA6jhYICJIAOo5mBAjMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAjqADqOFggJPgA6jmYECWwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYICZIAOo4WCAnqADqOZgQKDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggKPgA6jhYICpIAOo5mBAqsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCArqADqOFggLPgA6jmIEC0wARAgABEBAUYABhYL/QACIBDmAYAKOFggLkgA6jhYIC+oAOo5mBAvsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAw+ADqOZgQMjADECAAEQEAAYABhYL/QACIBDmAYAAKOFggMkgA6jhYIDOoAOo5mBA0sAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA0+ADqOFggNkgA6jmYEDcwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIDeoAOo4WCA4+ADqOZgQObADECAAEQEAAYABhYL/QACIBDmAYAAKOFggOkgA6jhYIDuoAOo5mBA8MAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA8+ADqOFggPkgA6jhYID+oAOo4WCBA+ADhxTu2sBAAAAAAAAEbuPs4EDt4r3gQHxghEr8IEK",mp4:"data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"}),g0}var x0,px;function Qk(){if(px)return x0;px=1;const{webm:n,mp4:s}=Kk(),i=()=>typeof navigator<"u"&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,l=()=>"wakeLock"in navigator;class c{constructor(){if(this.enabled=!1,l()){this._wakeLock=null;const p=()=>{this._wakeLock!==null&&document.visibilityState==="visible"&&this.enable()};document.addEventListener("visibilitychange",p),document.addEventListener("fullscreenchange",p)}else i()?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("title","No Sleep"),this.noSleepVideo.setAttribute("playsinline",""),this._addSourceToVideo(this.noSleepVideo,"webm",n),this._addSourceToVideo(this.noSleepVideo,"mp4",s),this.noSleepVideo.addEventListener("loadedmetadata",()=>{this.noSleepVideo.duration<=1?this.noSleepVideo.setAttribute("loop",""):this.noSleepVideo.addEventListener("timeupdate",()=>{this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())})}))}_addSourceToVideo(p,d,g){var m=document.createElement("source");m.src=g,m.type=`video/${d}`,p.appendChild(m)}get isEnabled(){return this.enabled}enable(){return l()?navigator.wakeLock.request("screen").then(p=>{this._wakeLock=p,this.enabled=!0,console.log("Wake Lock active."),this._wakeLock.addEventListener("release",()=>{console.log("Wake Lock released.")})}).catch(p=>{throw this.enabled=!1,console.error(`${p.name}, ${p.message}`),p}):i()?(this.disable(),console.warn(`
        NoSleep enabled for older iOS devices. This can interrupt
        active or long-running network requests from completing successfully.
        See https://github.com/richtr/NoSleep.js/issues/15 for more details.
      `),this.noSleepTimer=window.setInterval(()=>{document.hidden||(window.location.href=window.location.href.split("#")[0],window.setTimeout(window.stop,0))},15e3),this.enabled=!0,Promise.resolve()):this.noSleepVideo.play().then(d=>(this.enabled=!0,d)).catch(d=>{throw this.enabled=!1,d})}disable(){l()?(this._wakeLock&&this._wakeLock.release(),this._wakeLock=null):i()?this.noSleepTimer&&(console.warn(`
          NoSleep now disabled for older iOS devices.
        `),window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause(),this.enabled=!1}}return x0=c,x0}var Yk=Qk();const Xk=aa(Yk);function Jk(n){if(n.length<4)return null;try{const i=parseInt(n.slice(0,2),16)&3;let l=2;if(i===0||i===3){if(n.length<l+8)return null;l+=8}if(n.length<l+2)return null;const c=parseInt(n.slice(l,l+2),16);l+=2;const u=c*2;return n.length<l+u?null:(l+=u,n.slice(l))}catch{return null}}function eS({packets:n,channels:s,onChannelCreate:i,onRunningChange:l,visible:c=!1}){const[u,p]=D.useState(!1),[d,g]=D.useState(6),[m,x]=D.useState(!1),[A,_]=D.useState(!0),[k,R]=D.useState(!1),[C,w]=D.useState(null),[B,S]=D.useState(new Map),[T,F]=D.useState([]),[M,z]=D.useState(!1),[H,j]=D.useState(null),[X,V]=D.useState(null),[$,ee]=D.useState(0),W=D.useRef(null),re=D.useRef(null),pe=D.useRef(!1),ie=D.useRef(!1),Ae=D.useRef(!1),G=D.useRef(new Map),xe=D.useRef(!1),Z=D.useRef(6),N=D.useRef(!0),U=D.useRef(!1),K=D.useRef(new Set),Y=D.useRef(new Set);D.useEffect(()=>{const ge=new $k;W.current=ge,j(ge.isGpuAvailable());const Le=new Xk;return re.current=Le,()=>{ge.destroy(),W.current=null,Le.disable(),re.current=null}},[]),D.useEffect(()=>{!c||M||Rk(async()=>{const{ENGLISH_WORDLIST:ge}=await import("./wordlist-BtmChKSf.js");return{ENGLISH_WORDLIST:ge}},[]).then(({ENGLISH_WORDLIST:ge})=>{W.current&&(W.current.setWordlist(ge),z(!0))}).catch(ge=>{console.error("Failed to load wordlist:",ge),bt.error("Failed to load wordlist",{description:"Cracking will not be available"})})},[c,M]),D.useEffect(()=>{const ge=()=>{dt.getUndecryptedPacketCount().then(({count:We})=>V(We)).catch(()=>V(null))};ge();const Le=setInterval(ge,36e5);return()=>clearInterval(Le)},[]);const fe=D.useMemo(()=>new Set(s.map(ge=>ge.key.toUpperCase())),[s]),me=n.filter(ge=>ge.payload_type==="GROUP_TEXT"&&!ge.decrypted);D.useEffect(()=>{let ge=0;S(Le=>{const We=new Map(Le);let lt=!1;for(const et of me)if(!We.has(et.id)){const Ne=Jk(et.data);if(Ne&&Y.current.has(Ne)){ge++;continue}Ne&&Y.current.add(Ne),We.set(et.id,{packet:et,attempts:0,lastAttemptLength:0,status:"pending"}),lt=!0}return lt?(G.current=We,We):Le}),ge>0&&ee(Le=>Le+ge)},[me.length]),D.useEffect(()=>{G.current=B},[B]),D.useEffect(()=>{xe.current=m},[m]),D.useEffect(()=>{Z.current=d},[d]),D.useEffect(()=>{N.current=A},[A]),D.useEffect(()=>{U.current=k},[k]),D.useEffect(()=>{K.current=new Set(me.map(ge=>ge.id))},[me]),D.useEffect(()=>{l==null||l(u)},[u,l]);const Se=Array.from(B.values()).filter(ge=>ge.status==="pending").length,we=Array.from(B.values()).filter(ge=>ge.status==="cracked").length,de=Array.from(B.values()).filter(ge=>ge.status==="failed").length,he=D.useCallback(async()=>{if(Ae.current||!W.current||!pe.current)return;const ge=G.current;let Le=null,We=null;for(const[Ue,ot]of ge.entries())if(ot.status==="pending"){Le=ot,We=Ue;break}if(!Le&&xe.current){const Ue=Array.from(ge.entries()).filter(([,ot])=>ot.status==="failed"&&ot.lastAttemptLength<10);Ue.length>0&&(Ue.sort((ot,tt)=>ot[1].lastAttemptLength-tt[1].lastAttemptLength),[We,Le]=Ue[0])}if(!Le||We===null){pe.current&&setTimeout(()=>he(),1e3);return}if(!K.current.has(We)){S(Ue=>{const ot=new Map(Ue);return ot.delete(We),ot}),pe.current&&setTimeout(()=>he(),10);return}Ae.current=!0;const lt=Z.current,et=Le.lastAttemptLength>0,Ne=et?Le.lastAttemptLength+1:lt;try{const Ue=await W.current.crack(Le.packet.data,{maxLength:Ne,useSenderFilter:!0,useTimestampFilter:!0,useUtf8Filter:!0,...U.current&&{gpuDispatchMs:1e4},...et&&{useDictionary:!1,startingLength:Ne}},ot=>{w(ot)});if(ie.current){ie.current=!1,Ae.current=!1,w(null);return}if(Ue.found&&Ue.roomName&&Ue.key){S(oe=>{const Re=new Map(oe),qe=Re.get(We);return qe&&Re.set(We,{...qe,status:"cracked",attempts:qe.attempts+1,lastAttemptLength:Ne}),Re});const ot={roomName:Ue.roomName,key:Ue.key,packetId:We,message:Ue.decryptedMessage||"",crackedAt:Date.now()};F(oe=>[...oe,ot]);const tt=Ue.key.toUpperCase();if(!fe.has(tt))try{const oe="#"+Ue.roomName;await i(oe,Ue.key),N.current&&await dt.decryptHistoricalPackets({key_type:"channel",channel_name:oe})}catch(oe){console.error("Failed to create channel or decrypt historical:",oe),bt.error("Failed to save cracked channel",{description:oe instanceof Error?oe.message:"Channel discovered but could not be saved"})}}else S(ot=>{const tt=new Map(ot),oe=tt.get(We);return oe&&tt.set(We,{...oe,status:"failed",attempts:oe.attempts+1,lastAttemptLength:Ne}),tt})}catch(Ue){console.error("Cracking error:",Ue),S(ot=>{const tt=new Map(ot),oe=tt.get(We);return oe&&tt.set(We,{...oe,status:"failed",attempts:oe.attempts+1,lastAttemptLength:Ne}),tt})}Ae.current=!1,w(null),pe.current&&setTimeout(()=>he(),100)},[fe,i]),Ze=()=>{var ge;if(!H){bt.error("WebGPU not available",{description:"Cracking requires Chrome 113+ or Edge 113+ with WebGPU support."});return}p(!0),pe.current=!0,ie.current=!1,(ge=re.current)==null||ge.enable(),he()},Fe=()=>{var ge,Le;p(!1),pe.current=!1,ie.current=!0,(ge=W.current)==null||ge.abort(),(Le=re.current)==null||Le.disable()};return b.jsxs("div",{className:"flex flex-col h-full p-3 gap-3 bg-background border-t border-border overflow-auto",children:[b.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("label",{className:"text-sm text-muted-foreground",children:"Max Length:"}),b.jsx("input",{type:"number",min:1,max:10,value:d,onChange:ge=>g(Math.min(10,Math.max(1,parseInt(ge.target.value)||6))),className:"w-14 px-2 py-1 text-sm bg-muted border border-border rounded"})]}),b.jsxs("label",{className:"flex items-center gap-2 text-sm text-muted-foreground cursor-pointer",children:[b.jsx("input",{type:"checkbox",checked:m,onChange:ge=>x(ge.target.checked),className:"rounded"}),"Retry failed at n+1"]}),b.jsxs("label",{className:"flex items-center gap-2 text-sm text-muted-foreground cursor-pointer",children:[b.jsx("input",{type:"checkbox",checked:A,onChange:ge=>_(ge.target.checked),className:"rounded"}),"Decrypt historical packets if key found"]}),A&&b.jsx("span",{className:"text-xs text-muted-foreground",children:X!==null&&X>0?`(${X.toLocaleString()} packets; messages will stream in as decrypted)`:"(messages will stream in as decrypted)"}),b.jsxs("label",{className:"flex items-center gap-2 text-sm text-muted-foreground cursor-pointer",children:[b.jsx("input",{type:"checkbox",checked:k,onChange:ge=>R(ge.target.checked),className:"rounded"}),"Turbo mode (experimental)"]})]}),b.jsx("button",{onClick:u?Fe:Ze,disabled:!M||H===!1,className:pt("w-48 px-4 py-1.5 rounded text-sm font-medium",u?"bg-destructive text-destructive-foreground hover:bg-destructive/90":"bg-primary text-primary-foreground hover:bg-primary/90","disabled:opacity-50 disabled:cursor-not-allowed"),children:u?"Stop Search":H===!1?"GPU Not Available":M?"Find Rooms":"Loading dictionary..."}),b.jsxs("div",{className:"flex gap-4 text-sm",children:[b.jsxs("span",{className:"text-muted-foreground",children:["Pending: ",b.jsx("span",{className:"text-foreground font-medium",children:Se})]}),b.jsxs("span",{className:"text-muted-foreground",children:["Cracked: ",b.jsx("span",{className:"text-green-500 font-medium",children:we})]}),b.jsxs("span",{className:"text-muted-foreground",children:["Failed: ",b.jsx("span",{className:"text-destructive font-medium",children:de})]}),$>0&&b.jsxs("span",{className:"text-muted-foreground",children:["Skipped (dup):"," ",b.jsx("span",{className:"text-muted-foreground font-medium",children:$})]})]}),C&&b.jsxs("div",{className:"space-y-1",children:[b.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[b.jsxs("span",{children:[C.phase==="wordlist"?"Dictionary":C.phase==="bruteforce"?"Bruteforce":"Public Key",C.phase==="bruteforce"&&` - Length ${C.currentLength}`,":"," ",C.currentPosition]}),b.jsxs("span",{children:[C.rateKeysPerSec>=1e9?`${(C.rateKeysPerSec/1e9).toFixed(2)} Gkeys/s`:`${(C.rateKeysPerSec/1e6).toFixed(1)} Mkeys/s`," "," ETA:"," ",C.etaSeconds<60?`${Math.round(C.etaSeconds)}s`:`${Math.round(C.etaSeconds/60)}m`]})]}),b.jsx("div",{className:"h-2 bg-muted rounded overflow-hidden",children:b.jsx("div",{className:"h-full bg-primary transition-all duration-200",style:{width:`${C.percent}%`}})})]}),H===!1&&b.jsx("div",{className:"text-sm text-destructive",children:"WebGPU not available. Cracking requires Chrome 113+ or Edge 113+."}),!M&&H!==!1&&b.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading wordlist..."}),T.length>0&&b.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0",children:[b.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Cracked Rooms:"}),b.jsx("div",{className:"space-y-1",children:T.map((ge,Le)=>b.jsxs("div",{className:"text-sm bg-green-950/30 border border-green-900/50 rounded px-2 py-1",children:[b.jsxs("span",{className:"text-green-400 font-medium",children:["#",ge.roomName]}),b.jsxs("span",{className:"text-muted-foreground ml-2 text-xs",children:['"',ge.message.slice(0,50),ge.message.length>50?"...":"",'"']})]},Le))})]}),b.jsx("hr",{className:"border-border"}),b.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:["For unknown-keyed GroupText packets, this will attempt to dictionary attack, then brute force payloads as they arrive, testing room names up to the specified length to discover active rooms on the local mesh (GroupText packets may not be hashtag messages; we have no way of knowing but try as if they are).",b.jsx("strong",{children:" Retry failed at n+1"})," will let the cracker return to the failed queue and pick up messages it couldn't crack, attempting them at one longer length.",b.jsx("strong",{children:" Decrypt historical"})," will run an async job on any room name it finds to see if any historically captured packets will decrypt with that key.",b.jsx("strong",{children:" Turbo mode"})," will push your GPU to the max (target dispatch time of 10s) and may allow accelerated cracking and/or system instability."]})]})}const tS=mA,nS=gA,Tv=D.forwardRef(({className:n,...s},i)=>b.jsx(od,{className:pt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...s,ref:i}));Tv.displayName=od.displayName;const rS=U0("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Dv=D.forwardRef(({side:n="right",className:s,children:i,hideCloseButton:l=!1,...c},u)=>b.jsxs(nS,{children:[b.jsx(Tv,{}),b.jsxs(sd,{ref:u,className:pt(rS({side:n}),s),...c,children:[!l&&b.jsxs(xA,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[b.jsx(wx,{className:"h-4 w-4"}),b.jsx("span",{className:"sr-only",children:"Close"})]}),i]})]}));Dv.displayName=sd.displayName;const Rv=({className:n,...s})=>b.jsx("div",{className:pt("flex flex-col space-y-2 text-center sm:text-left",n),...s});Rv.displayName="SheetHeader";const Nv=D.forwardRef(({className:n,...s},i)=>b.jsx(ad,{ref:i,className:pt("text-lg font-semibold text-foreground",n),...s}));Nv.displayName=ad.displayName;const iS=D.forwardRef(({className:n,...s},i)=>b.jsx(ld,{ref:i,className:pt("text-sm text-muted-foreground",n),...s}));iS.displayName=ld.displayName;const mx=500;function oS(){const n=D.useRef(null),s=D.useRef(null),i=D.useRef(new Set),[l,c]=D.useState(null),[u,p]=D.useState(null),[d,g]=D.useState(null),[m,x]=D.useState([]),[A,_]=D.useState([]),[k,R]=D.useState([]),[C,w]=D.useState(null),[B,S]=D.useState(!1),[T,F]=D.useState(!1),[M,z]=D.useState(!1),[H,j]=D.useState(0),[X,V]=D.useState(!1),[$,ee]=D.useState(!1),W=(d==null?void 0:d.favorites)??[],re=D.useRef(null),pe=D.useRef(null);D.useEffect(()=>{pe.current=(u==null?void 0:u.name)??null},[u==null?void 0:u.name]);const ie=D.useCallback(ne=>{const _e=pe.current;if(!_e)return!1;const Ee=_e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return new RegExp(`@\\[${Ee}\\]`,"i").test(ne)},[]),{messages:Ae,messagesLoading:G,loadingOlder:xe,hasOlderMessages:Z,setMessages:N,fetchMessages:U,fetchOlderMessages:K,addMessageIfNew:Y,updateMessageAck:fe}=p_(C),{unreadCounts:me,mentions:Se,lastMessageTimes:we,incrementUnread:de,markAllRead:he,trackNewMessage:Ze}=jy(A,m,C,u==null?void 0:u.name),{repeaterLoggedIn:Fe,activeContactIsRepeater:ge,handleTelemetryRequest:Le,handleRepeaterCommand:We}=My(C,m,N),lt=D.useMemo(()=>({onHealth:ne=>{const _e=re.current;re.current=ne,c(ne),_e!==null&&_e.radio_connected!==ne.radio_connected&&(ne.radio_connected?(bt.success("Radio connected",{description:ne.serial_port?`Connected to ${ne.serial_port}`:void 0}),dt.getRadioConfig().then(p).catch(console.error)):bt.error("Radio disconnected",{description:"Check radio connection and power"}))},onError:ne=>{bt.error(ne.message,{description:ne.details})},onSuccess:ne=>{bt.success(ne.message,{description:ne.details})},onContacts:ne=>x(ne),onChannels:ne=>_(ne),onMessage:ne=>{const _e=s.current,Ee=_e&&(ne.type==="CHAN"&&_e.type==="channel"||ne.type==="PRIV"&&_e.type==="contact")?ne.conversation_key===_e.id:!1;if(Ee&&Y(ne),Ze(ne),!ne.outgoing&&!Ee){const Oe=tu(ne);if(i.current.has(Oe))return;if(i.current.add(Oe),i.current.size>1e3){const He=Array.from(i.current);i.current=new Set(He.slice(-500))}let st=null;if(ne.type==="CHAN"&&ne.conversation_key?st=Or("channel",ne.conversation_key):ne.type==="PRIV"&&ne.conversation_key&&(st=Or("contact",ne.conversation_key)),st){const He=ie(ne.text);de(st,He)}}},onContact:ne=>{x(_e=>{const Ee=_e.findIndex(Oe=>Oe.public_key===ne.public_key);if(Ee>=0){const Oe=[..._e],st=_e[Ee];return Oe[Ee]={...st,...ne,name:ne.name??st.name,last_path:ne.last_path??st.last_path,lat:ne.lat??st.lat,lon:ne.lon??st.lon},Oe}return[..._e,ne]})},onRawPacket:ne=>{R(_e=>{if(_e.some(Oe=>Oe.id===ne.id))return _e;const Ee=[..._e,ne];return Ee.length>mx?Ee.slice(-mx):Ee})},onMessageAcked:(ne,_e,Ee)=>{fe(ne,_e,Ee)}}),[Y,Ze,de,fe,ie]);By(lt);const et=D.useCallback(async()=>{try{const ne=await dt.getRadioConfig();p(ne)}catch(ne){console.error("Failed to fetch config:",ne)}},[]),Ne=D.useCallback(async()=>{try{const ne=await dt.getSettings();g(ne),im(ne.last_message_times??{})}catch(ne){console.error("Failed to fetch app settings:",ne)}},[]),Ue=D.useCallback(async()=>{try{const ne=await dt.getUndecryptedPacketCount();j(ne.count)}catch(ne){console.error("Failed to fetch undecrypted count:",ne)}},[]);D.useEffect(()=>{et(),Ne(),Ue()},[et,Ne,Ue]);const ot=D.useRef(!1);D.useEffect(()=>{if(!d||ot.current)return;if(d.preferences_migrated){dm(),sm(),ot.current=!0;return}const ne=F_(),_e=Oy(),Ee=Iy();if(!(ne.length>0||_e!=="recent"||Object.keys(Ee).length>0)){ot.current=!0;return}ot.current=!0,(async()=>{try{const He=await dt.migratePreferences({favorites:ne,sort_order:_e,last_message_times:Ee});He.migrated&&bt.success("Preferences migrated",{description:`Migrated ${ne.length} favorites to server`}),g(He.settings),im(He.settings.last_message_times??{}),dm(),sm()}catch(He){console.error("Failed to migrate preferences:",He)}})()},[d]);const tt=D.useCallback(()=>{const ne=C2();if(!ne)return null;if(ne.type==="raw")return{type:"raw",id:"raw",name:"Raw Packet Feed"};if(ne.type==="map")return{type:"map",id:"map",name:"Node Map",mapFocusKey:ne.mapFocusKey};if(ne.type==="visualizer")return{type:"visualizer",id:"visualizer",name:"Mesh Visualizer"};if(ne.type==="channel"){const _e=A.find(Ee=>Ee.name===ne.name||Ee.name===`#${ne.name}`);if(_e)return{type:"channel",id:_e.key,name:_e.name}}if(ne.type==="contact"){const _e=m.find(Ee=>Ti(Ee.name,Ee.public_key)===ne.name);if(_e)return{type:"contact",id:_e.public_key,name:Ti(_e.name,_e.public_key)}}return null},[A,m]),oe=D.useRef(!1);D.useEffect(()=>{if(oe.current||C||A.length===0&&m.length===0)return;const ne=tt();if(ne){w(ne),oe.current=!0;return}const _e=A.find(Ee=>Ee.name==="Public");_e&&(w({type:"channel",id:_e.key,name:_e.name}),oe.current=!0)},[A,m,C,tt]),D.useEffect(()=>{s.current=C,C&&k2(C)},[C]);const Re=D.useCallback(async ne=>{C&&(C.type==="channel"?await dt.sendChannelMessage(C.id,ne):await dt.sendDirectMessage(C.id,ne),await U())},[C,U]),qe=D.useCallback(async ne=>{await dt.updateRadioConfig(ne),await et()},[et]),ve=D.useCallback(async ne=>{await dt.updateSettings(ne),await Ne()},[Ne]),Me=D.useCallback(async ne=>{await dt.setPrivateKey(ne),await et()},[et]),yt=D.useCallback(async()=>{await dt.rebootRadio(),c(_e=>_e&&{..._e,radio_connected:!1}),(async()=>{for(let _e=0;_e<30;_e++){await new Promise(Ee=>setTimeout(Ee,1e3));try{const Ee=await dt.getHealth();if(c(Ee),Ee.radio_connected){et();return}}catch{}}})()},[et]),Pt=D.useCallback(async()=>{try{await dt.sendAdvertisement(!0),bt.success("Advertisement sent")}catch(ne){console.error("Failed to send advertisement:",ne),bt.error("Failed to send advertisement",{description:ne instanceof Error?ne.message:"Check radio connection"})}},[]),Nt=D.useCallback(ne=>{var _e;(_e=n.current)==null||_e.appendText(`@[${ne}] `)},[]),Wt=D.useCallback(ne=>{w(ne),z(!1)},[]),Ft=D.useCallback(async(ne,_e)=>{const Oe=ts(W,ne,_e)?W.filter(st=>!(st.type===ne&&st.id===_e)):[...W,{type:ne,id:_e}];g(st=>st&&{...st,favorites:Oe});try{const st=await dt.toggleFavorite(ne,_e);g(st)}catch(st){console.error("Failed to toggle favorite:",st),g(He=>He&&{...He,favorites:W}),bt.error("Failed to update favorite")}},[W]),Et=D.useCallback(async ne=>{if(confirm("Delete this channel? Message history will be preserved."))try{await dt.deleteChannel(ne),_(_e=>_e.filter(Ee=>Ee.key!==ne)),w(null),bt.success("Channel deleted")}catch(_e){console.error("Failed to delete channel:",_e),bt.error("Failed to delete channel",{description:_e instanceof Error?_e.message:void 0})}},[]),An=D.useCallback(async ne=>{if(confirm("Delete this contact? Message history will be preserved."))try{await dt.deleteContact(ne),x(_e=>_e.filter(Ee=>Ee.public_key!==ne)),w(null),bt.success("Contact deleted")}catch(_e){console.error("Failed to delete contact:",_e),bt.error("Failed to delete contact",{description:_e instanceof Error?_e.message:void 0})}},[]),Cn=D.useCallback(async(ne,_e,Ee)=>{const Oe=await dt.createContact(_e,ne||void 0,Ee),st=await dt.getContacts();x(st),w({type:"contact",id:Oe.public_key,name:Ti(Oe.name,Oe.public_key)})},[]),ye=D.useCallback(async(ne,_e,Ee)=>{const Oe=await dt.createChannel(ne,_e),st=await dt.getChannels();_(st),w({type:"channel",id:Oe.key,name:ne}),Ee&&(await dt.decryptHistoricalPackets({key_type:"channel",channel_key:Oe.key}),Ue())},[Ue]),Pe=D.useCallback(async(ne,_e)=>{const Ee=ne.startsWith("#")?ne:`#${ne}`,Oe=await dt.createChannel(Ee),st=await dt.getChannels();_(st),w({type:"channel",id:Oe.key,name:Ee}),_e&&(await dt.decryptHistoricalPackets({key_type:"channel",channel_name:Ee}),Ue())},[Ue]),ze=D.useCallback(async ne=>{const _e=(d==null?void 0:d.sidebar_sort_order)??"recent";g(Ee=>Ee&&{...Ee,sidebar_sort_order:ne});try{const Ee=await dt.updateSettings({sidebar_sort_order:ne});g(Ee)}catch(Ee){console.error("Failed to update sort order:",Ee),g(Oe=>Oe&&{...Oe,sidebar_sort_order:_e}),bt.error("Failed to save sort preference")}},[d==null?void 0:d.sidebar_sort_order]),mt=b.jsx(R1,{contacts:m,channels:A,activeConversation:C,onSelectConversation:Wt,onNewMessage:()=>{S(!0),z(!1)},lastMessageTimes:we,unreadCounts:me,mentions:Se,showCracker:X,crackerRunning:$,onToggleCracker:()=>V(ne=>!ne),onMarkAllRead:he,favorites:W,sortOrder:(d==null?void 0:d.sidebar_sort_order)??"recent",onSortOrderChange:ze});return b.jsxs("div",{className:"flex flex-col h-dvh",children:[b.jsx(E_,{health:l,config:u,onSettingsClick:()=>F(!0),onMenuClick:()=>z(!0)}),b.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[b.jsx("div",{className:"hidden md:block",children:mt}),b.jsx(tS,{open:M,onOpenChange:z,children:b.jsxs(Dv,{side:"left",className:"w-[280px] p-0 flex flex-col",hideCloseButton:!0,children:[b.jsx(Rv,{className:"sr-only",children:b.jsx(Nv,{children:"Navigation"})}),b.jsx("div",{className:"flex-1 overflow-hidden",children:mt})]})}),b.jsx("div",{className:"flex-1 flex flex-col bg-background min-w-0",children:C?C.type==="map"?b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"flex justify-between items-center px-4 py-3 border-b border-border font-medium text-lg",children:"Node Map"}),b.jsx("div",{className:"flex-1 overflow-hidden",children:b.jsx(jE,{contacts:m,focusedKey:C.mapFocusKey})})]}):C.type==="visualizer"?b.jsx(Pk,{packets:k,contacts:m,channels:A,config:u}):C.type==="raw"?b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"flex justify-between items-center px-4 py-3 border-b border-border font-medium text-lg",children:"Raw Packet Feed"}),b.jsx("div",{className:"flex-1 overflow-hidden",children:b.jsx(B0,{packets:k})})]}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-border font-medium text-lg gap-2",children:[b.jsxs("span",{className:"flex flex-wrap items-baseline gap-x-2 min-w-0 flex-1",children:[b.jsxs("span",{className:"flex-shrink-0",children:[C.type==="channel"&&!C.name.startsWith("#")&&C.name!=="Public"?"#":"",C.name]}),b.jsx("span",{className:"font-normal text-sm text-muted-foreground font-mono truncate cursor-pointer hover:text-primary",onClick:ne=>{ne.stopPropagation(),navigator.clipboard.writeText(C.id),bt.success(C.type==="channel"?"Room key copied!":"Contact key copied!")},title:"Click to copy",children:C.type==="channel"?C.id.toLowerCase():C.id}),C.type==="contact"&&(()=>{const ne=m.find(Ee=>Ee.public_key===C.id);if(!ne)return null;const _e=[];if(ne.last_seen&&_e.push(`Last heard: ${ra(ne.last_seen)}`),ne.last_path_len===-1?_e.push("flood"):ne.last_path_len===0?_e.push("direct"):ne.last_path_len>0&&_e.push(`${ne.last_path_len} hop${ne.last_path_len>1?"s":""}`),Rt(ne.lat,ne.lon)){const Ee=u&&Rt(u.lat,u.lon)?jr(u.lat,u.lon,ne.lat,ne.lon):null;_e.push(b.jsxs("span",{children:[b.jsxs("span",{className:"font-mono cursor-pointer hover:text-primary hover:underline",onClick:Oe=>{Oe.stopPropagation();const st=window.location.origin+window.location.pathname+vA(ne.public_key);window.open(st,"_blank")},title:"View on map",children:[ne.lat.toFixed(3),", ",ne.lon.toFixed(3)]}),Ee!==null&&` (${ns(Ee)})`]},"coords"))}return _e.length>0?b.jsxs("span",{className:"font-normal text-sm text-muted-foreground flex-shrink-0",children:["(",_e.map((Ee,Oe)=>b.jsxs("span",{children:[Oe>0&&", ",Ee]},Oe)),")"]}):null})()]}),b.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(C.type==="channel"||C.type==="contact")&&b.jsx("button",{className:"p-1.5 rounded hover:bg-accent text-xl leading-none",onClick:()=>Ft(C.type,C.id),title:ts(W,C.type,C.id)?"Remove from favorites":"Add to favorites",children:ts(W,C.type,C.id)?b.jsx("span",{className:"text-yellow-500",children:""}):b.jsx("span",{className:"text-muted-foreground",children:""})}),!(C.type==="channel"&&C.name==="Public")&&b.jsx("button",{className:"p-1.5 rounded hover:bg-destructive/20 text-destructive text-xl leading-none",onClick:()=>{C.type==="channel"?Et(C.id):An(C.id)},title:"Delete",children:""})]})]}),b.jsx(R2,{messages:Ae,contacts:m,loading:G,loadingOlder:xe,hasOlderMessages:Z,onSenderClick:C.type==="channel"?Nt:void 0,onLoadOlder:K,radioName:u==null?void 0:u.name,config:u}),b.jsx(I2,{ref:n,onSend:ge?Fe?We:Le:Re,disabled:!(l!=null&&l.radio_connected),isRepeaterMode:ge&&!Fe,conversationType:C.type,senderName:u==null?void 0:u.name,placeholder:l!=null&&l.radio_connected?ge?Fe?"Send CLI command (requires admin login)...":`Enter password for ${C.name} (or . for none)...`:`Message ${C.name}...`:"Radio not connected"})]}):b.jsx("div",{className:"flex-1 flex items-center justify-center text-muted-foreground",children:"Select a conversation or start a new one"})})]}),b.jsx("div",{className:pt("border-t border-border bg-background transition-all duration-200 overflow-hidden",X?"h-[275px]":"h-0"),children:b.jsx(eS,{packets:k,channels:A,visible:X,onChannelCreate:async(ne,_e)=>{const Ee=await dt.createChannel(ne,_e),Oe=await dt.getChannels();_(Oe),await dt.decryptHistoricalPackets({key_type:"channel",channel_key:Ee.key}),Ue()},onRunningChange:ee})}),b.jsx(gb,{open:B,contacts:m,undecryptedCount:H,onClose:()=>S(!1),onSelectConversation:ne=>{w(ne),S(!1)},onCreateContact:Cn,onCreateChannel:ye,onCreateHashtagChannel:Pe}),b.jsx(wb,{open:T,config:u,health:l,appSettings:d,onClose:()=>F(!1),onSave:qe,onSaveAppSettings:ve,onSetPrivateKey:Me,onReboot:yt,onAdvertise:Pt,onHealthRefresh:async()=>{const ne=await dt.getHealth();c(ne)},onRefreshAppSettings:Ne}),b.jsx(h_,{position:"top-right"})]})}Ey.createRoot(document.getElementById("root")).render(b.jsx(D.StrictMode,{children:b.jsx(oS,{})}));
//# sourceMappingURL=index-B7TRWRoH.js.map
