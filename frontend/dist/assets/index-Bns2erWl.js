var Ay=Object.defineProperty;var vy=(n,s,i)=>s in n?Ay(n,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[s]=i;var Go=(n,s,i)=>vy(n,typeof s!="symbol"?s+"":s,i);function yy(n,s){for(var i=0;i<s.length;i++){const l=s[i];if(typeof l!="string"&&!Array.isArray(l)){for(const c in l)if(c!=="default"&&!(c in n)){const u=Object.getOwnPropertyDescriptor(l,c);u&&Object.defineProperty(n,c,u.get?u:{enumerable:!0,get:()=>l[c]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const p of u.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&l(p)}).observe(document,{childList:!0,subtree:!0});function i(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(c){if(c.ep)return;c.ep=!0;const u=i(c);fetch(c.href,u)}})();var $f=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function aa(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function gx(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var s=n.default;if(typeof s=="function"){var i=function l(){return this instanceof l?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};i.prototype=s.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(n).forEach(function(l){var c=Object.getOwnPropertyDescriptor(n,l);Object.defineProperty(i,l,c.get?c:{enumerable:!0,get:function(){return n[l]}})}),i}var Kf={exports:{}},el={},Qf={exports:{}},xt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wp;function _y(){if(Wp)return xt;Wp=1;var n=Symbol.for("react.element"),s=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),p=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),A=Symbol.iterator;function b(T){return T===null||typeof T!="object"?null:(T=A&&T[A]||T["@@iterator"],typeof T=="function"?T:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,C={};function w(T,z,q){this.props=T,this.context=z,this.refs=C,this.updater=q||k}w.prototype.isReactComponent={},w.prototype.setState=function(T,z){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,z,"setState")},w.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function S(){}S.prototype=w.prototype;function P(T,z,q){this.props=T,this.context=z,this.refs=C,this.updater=q||k}var N=P.prototype=new S;N.constructor=P,R(N,w.prototype),N.isPureReactComponent=!0;var F=Array.isArray,M=Object.prototype.hasOwnProperty,H={current:null},U={key:!0,ref:!0,__self:!0,__source:!0};function j(T,z,q){var $,ue={},pe=null,ve=null;if(z!=null)for($ in z.ref!==void 0&&(ve=z.ref),z.key!==void 0&&(pe=""+z.key),z)M.call(z,$)&&!U.hasOwnProperty($)&&(ue[$]=z[$]);var me=arguments.length-2;if(me===1)ue.children=q;else if(1<me){for(var ge=Array(me),Pe=0;Pe<me;Pe++)ge[Pe]=arguments[Pe+2];ue.children=ge}if(T&&T.defaultProps)for($ in me=T.defaultProps,me)ue[$]===void 0&&(ue[$]=me[$]);return{$$typeof:n,type:T,key:pe,ref:ve,props:ue,_owner:H.current}}function ee(T,z){return{$$typeof:n,type:T.type,key:z,ref:T.ref,props:T.props,_owner:T._owner}}function Z(T){return typeof T=="object"&&T!==null&&T.$$typeof===n}function Y(T){var z={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(q){return z[q]})}var te=/\/+/g;function K(T,z){return typeof T=="object"&&T!==null&&T.key!=null?Y(""+T.key):z.toString(36)}function ae(T,z,q,$,ue){var pe=typeof T;(pe==="undefined"||pe==="boolean")&&(T=null);var ve=!1;if(T===null)ve=!0;else switch(pe){case"string":case"number":ve=!0;break;case"object":switch(T.$$typeof){case n:case s:ve=!0}}if(ve)return ve=T,ue=ue(ve),T=$===""?"."+K(ve,0):$,F(ue)?(q="",T!=null&&(q=T.replace(te,"$&/")+"/"),ae(ue,z,q,"",function(Pe){return Pe})):ue!=null&&(Z(ue)&&(ue=ee(ue,q+(!ue.key||ve&&ve.key===ue.key?"":(""+ue.key).replace(te,"$&/")+"/")+T)),z.push(ue)),1;if(ve=0,$=$===""?".":$+":",F(T))for(var me=0;me<T.length;me++){pe=T[me];var ge=$+K(pe,me);ve+=ae(pe,z,q,ge,ue)}else if(ge=b(T),typeof ge=="function")for(T=ge.call(T),me=0;!(pe=T.next()).done;)pe=pe.value,ge=$+K(pe,me++),ve+=ae(pe,z,q,ge,ue);else if(pe==="object")throw z=String(T),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return ve}function Ae(T,z,q){if(T==null)return T;var $=[],ue=0;return ae(T,$,"","",function(pe){return z.call(q,pe,ue++)}),$}function G(T){if(T._status===-1){var z=T._result;z=z(),z.then(function(q){(T._status===0||T._status===-1)&&(T._status=1,T._result=q)},function(q){(T._status===0||T._status===-1)&&(T._status=2,T._result=q)}),T._status===-1&&(T._status=0,T._result=z)}if(T._status===1)return T._result.default;throw T._result}var se={current:null},W={transition:null},re={ReactCurrentDispatcher:se,ReactCurrentBatchConfig:W,ReactCurrentOwner:H};function V(){throw Error("act(...) is not supported in production builds of React.")}return xt.Children={map:Ae,forEach:function(T,z,q){Ae(T,function(){z.apply(this,arguments)},q)},count:function(T){var z=0;return Ae(T,function(){z++}),z},toArray:function(T){return Ae(T,function(z){return z})||[]},only:function(T){if(!Z(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},xt.Component=w,xt.Fragment=i,xt.Profiler=c,xt.PureComponent=P,xt.StrictMode=l,xt.Suspense=g,xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,xt.act=V,xt.cloneElement=function(T,z,q){if(T==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+T+".");var $=R({},T.props),ue=T.key,pe=T.ref,ve=T._owner;if(z!=null){if(z.ref!==void 0&&(pe=z.ref,ve=H.current),z.key!==void 0&&(ue=""+z.key),T.type&&T.type.defaultProps)var me=T.type.defaultProps;for(ge in z)M.call(z,ge)&&!U.hasOwnProperty(ge)&&($[ge]=z[ge]===void 0&&me!==void 0?me[ge]:z[ge])}var ge=arguments.length-2;if(ge===1)$.children=q;else if(1<ge){me=Array(ge);for(var Pe=0;Pe<ge;Pe++)me[Pe]=arguments[Pe+2];$.children=me}return{$$typeof:n,type:T.type,key:ue,ref:pe,props:$,_owner:ve}},xt.createContext=function(T){return T={$$typeof:p,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},T.Provider={$$typeof:u,_context:T},T.Consumer=T},xt.createElement=j,xt.createFactory=function(T){var z=j.bind(null,T);return z.type=T,z},xt.createRef=function(){return{current:null}},xt.forwardRef=function(T){return{$$typeof:d,render:T}},xt.isValidElement=Z,xt.lazy=function(T){return{$$typeof:x,_payload:{_status:-1,_result:T},_init:G}},xt.memo=function(T,z){return{$$typeof:m,type:T,compare:z===void 0?null:z}},xt.startTransition=function(T){var z=W.transition;W.transition={};try{T()}finally{W.transition=z}},xt.unstable_act=V,xt.useCallback=function(T,z){return se.current.useCallback(T,z)},xt.useContext=function(T){return se.current.useContext(T)},xt.useDebugValue=function(){},xt.useDeferredValue=function(T){return se.current.useDeferredValue(T)},xt.useEffect=function(T,z){return se.current.useEffect(T,z)},xt.useId=function(){return se.current.useId()},xt.useImperativeHandle=function(T,z,q){return se.current.useImperativeHandle(T,z,q)},xt.useInsertionEffect=function(T,z){return se.current.useInsertionEffect(T,z)},xt.useLayoutEffect=function(T,z){return se.current.useLayoutEffect(T,z)},xt.useMemo=function(T,z){return se.current.useMemo(T,z)},xt.useReducer=function(T,z,q){return se.current.useReducer(T,z,q)},xt.useRef=function(T){return se.current.useRef(T)},xt.useState=function(T){return se.current.useState(T)},xt.useSyncExternalStore=function(T,z,q){return se.current.useSyncExternalStore(T,z,q)},xt.useTransition=function(){return se.current.useTransition()},xt.version="18.3.1",xt}var qp;function F0(){return qp||(qp=1,Qf.exports=_y()),Qf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gp;function wy(){if(Gp)return el;Gp=1;var n=F0(),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,c=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function p(d,g,m){var x,A={},b=null,k=null;m!==void 0&&(b=""+m),g.key!==void 0&&(b=""+g.key),g.ref!==void 0&&(k=g.ref);for(x in g)l.call(g,x)&&!u.hasOwnProperty(x)&&(A[x]=g[x]);if(d&&d.defaultProps)for(x in g=d.defaultProps,g)A[x]===void 0&&(A[x]=g[x]);return{$$typeof:s,type:d,key:b,ref:k,props:A,_owner:c.current}}return el.Fragment=i,el.jsx=p,el.jsxs=p,el}var $p;function by(){return $p||($p=1,Kf.exports=wy()),Kf.exports}var _=by(),D=F0();const Te=aa(D),L0=yy({__proto__:null,default:Te},[D]);var Vc={},Yf={exports:{}},Qn={},Xf={exports:{}},Jf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kp;function Cy(){return Kp||(Kp=1,(function(n){function s(W,re){var V=W.length;W.push(re);e:for(;0<V;){var T=V-1>>>1,z=W[T];if(0<c(z,re))W[T]=re,W[V]=z,V=T;else break e}}function i(W){return W.length===0?null:W[0]}function l(W){if(W.length===0)return null;var re=W[0],V=W.pop();if(V!==re){W[0]=V;e:for(var T=0,z=W.length,q=z>>>1;T<q;){var $=2*(T+1)-1,ue=W[$],pe=$+1,ve=W[pe];if(0>c(ue,V))pe<z&&0>c(ve,ue)?(W[T]=ve,W[pe]=V,T=pe):(W[T]=ue,W[$]=V,T=$);else if(pe<z&&0>c(ve,V))W[T]=ve,W[pe]=V,T=pe;else break e}}return re}function c(W,re){var V=W.sortIndex-re.sortIndex;return V!==0?V:W.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var p=Date,d=p.now();n.unstable_now=function(){return p.now()-d}}var g=[],m=[],x=1,A=null,b=3,k=!1,R=!1,C=!1,w=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(W){for(var re=i(m);re!==null;){if(re.callback===null)l(m);else if(re.startTime<=W)l(m),re.sortIndex=re.expirationTime,s(g,re);else break;re=i(m)}}function F(W){if(C=!1,N(W),!R)if(i(g)!==null)R=!0,G(M);else{var re=i(m);re!==null&&se(F,re.startTime-W)}}function M(W,re){R=!1,C&&(C=!1,S(j),j=-1),k=!0;var V=b;try{for(N(re),A=i(g);A!==null&&(!(A.expirationTime>re)||W&&!Y());){var T=A.callback;if(typeof T=="function"){A.callback=null,b=A.priorityLevel;var z=T(A.expirationTime<=re);re=n.unstable_now(),typeof z=="function"?A.callback=z:A===i(g)&&l(g),N(re)}else l(g);A=i(g)}if(A!==null)var q=!0;else{var $=i(m);$!==null&&se(F,$.startTime-re),q=!1}return q}finally{A=null,b=V,k=!1}}var H=!1,U=null,j=-1,ee=5,Z=-1;function Y(){return!(n.unstable_now()-Z<ee)}function te(){if(U!==null){var W=n.unstable_now();Z=W;var re=!0;try{re=U(!0,W)}finally{re?K():(H=!1,U=null)}}else H=!1}var K;if(typeof P=="function")K=function(){P(te)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,Ae=ae.port2;ae.port1.onmessage=te,K=function(){Ae.postMessage(null)}}else K=function(){w(te,0)};function G(W){U=W,H||(H=!0,K())}function se(W,re){j=w(function(){W(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_continueExecution=function(){R||k||(R=!0,G(M))},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return i(g)},n.unstable_next=function(W){switch(b){case 1:case 2:case 3:var re=3;break;default:re=b}var V=b;b=re;try{return W()}finally{b=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(W,re){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var V=b;b=W;try{return re()}finally{b=V}},n.unstable_scheduleCallback=function(W,re,V){var T=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?T+V:T):V=T,W){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=V+z,W={id:x++,callback:re,priorityLevel:W,startTime:V,expirationTime:z,sortIndex:-1},V>T?(W.sortIndex=V,s(m,W),i(g)===null&&W===i(m)&&(C?(S(j),j=-1):C=!0,se(F,V-T))):(W.sortIndex=z,s(g,W),R||k||(R=!0,G(M))),W},n.unstable_shouldYield=Y,n.unstable_wrapCallback=function(W){var re=b;return function(){var V=b;b=re;try{return W.apply(this,arguments)}finally{b=V}}}})(Jf)),Jf}var Qp;function Ey(){return Qp||(Qp=1,Xf.exports=Cy()),Xf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yp;function ky(){if(Yp)return Qn;Yp=1;var n=F0(),s=Ey();function i(e){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=new Set,c={};function u(e,r){p(e,r),p(e+"Capture",r)}function p(e,r){for(c[e]=r,e=0;e<r.length;e++)l.add(r[e])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},A={};function b(e){return g.call(A,e)?!0:g.call(x,e)?!1:m.test(e)?A[e]=!0:(x[e]=!0,!1)}function k(e,r,a,h){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function R(e,r,a,h){if(r===null||typeof r>"u"||k(e,r,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function C(e,r,a,h,y,E,I){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=h,this.attributeNamespace=y,this.mustUseProperty=a,this.propertyName=e,this.type=r,this.sanitizeURL=E,this.removeEmptyString=I}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){w[e]=new C(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var r=e[0];w[r]=new C(r,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){w[e]=new C(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){w[e]=new C(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){w[e]=new C(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){w[e]=new C(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){w[e]=new C(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){w[e]=new C(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){w[e]=new C(e,5,!1,e.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function P(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var r=e.replace(S,P);w[r]=new C(r,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var r=e.replace(S,P);w[r]=new C(r,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var r=e.replace(S,P);w[r]=new C(r,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){w[e]=new C(e,1,!1,e.toLowerCase(),null,!1,!1)}),w.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){w[e]=new C(e,1,!1,e.toLowerCase(),null,!0,!0)});function N(e,r,a,h){var y=w.hasOwnProperty(r)?w[r]:null;(y!==null?y.type!==0:h||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(R(r,a,y,h)&&(a=null),h||y===null?b(r)&&(a===null?e.removeAttribute(r):e.setAttribute(r,""+a)):y.mustUseProperty?e[y.propertyName]=a===null?y.type===3?!1:"":a:(r=y.attributeName,h=y.attributeNamespace,a===null?e.removeAttribute(r):(y=y.type,a=y===3||y===4&&a===!0?"":""+a,h?e.setAttributeNS(h,r,a):e.setAttribute(r,a))))}var F=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),H=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),Z=Symbol.for("react.provider"),Y=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),Ae=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),W=Symbol.iterator;function re(e){return e===null||typeof e!="object"?null:(e=W&&e[W]||e["@@iterator"],typeof e=="function"?e:null)}var V=Object.assign,T;function z(e){if(T===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);T=r&&r[1]||""}return`
`+T+e}var q=!1;function $(e,r){if(!e||q)return"";q=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(he){var h=he}Reflect.construct(e,[],r)}else{try{r.call()}catch(he){h=he}e.call(r.prototype)}else{try{throw Error()}catch(he){h=he}e()}}catch(he){if(he&&h&&typeof he.stack=="string"){for(var y=he.stack.split(`
`),E=h.stack.split(`
`),I=y.length-1,Q=E.length-1;1<=I&&0<=Q&&y[I]!==E[Q];)Q--;for(;1<=I&&0<=Q;I--,Q--)if(y[I]!==E[Q]){if(I!==1||Q!==1)do if(I--,Q--,0>Q||y[I]!==E[Q]){var J=`
`+y[I].replace(" at new "," at ");return e.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",e.displayName)),J}while(1<=I&&0<=Q);break}}}finally{q=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?z(e):""}function ue(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=$(e.type,!1),e;case 11:return e=$(e.type.render,!1),e;case 1:return e=$(e.type,!0),e;default:return""}}function pe(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case U:return"Fragment";case H:return"Portal";case ee:return"Profiler";case j:return"StrictMode";case K:return"Suspense";case ae:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Y:return(e.displayName||"Context")+".Consumer";case Z:return(e._context.displayName||"Context")+".Provider";case te:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ae:return r=e.displayName||null,r!==null?r:pe(e.type)||"Memo";case G:r=e._payload,e=e._init;try{return pe(e(r))}catch{}}return null}function ve(e){var r=e.type;switch(e.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=r.render,e=e.displayName||e.name||"",r.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(r);case 8:return r===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function me(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ge(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Pe(e){var r=ge(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),h=""+e[r];if(!e.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var y=a.get,E=a.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return y.call(this)},set:function(I){h=""+I,E.call(this,I)}}),Object.defineProperty(e,r,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(I){h=""+I},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function We(e){e._valueTracker||(e._valueTracker=Pe(e))}function Ke(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var a=r.getValue(),h="";return e&&(h=ge(e)?e.checked?"true":"false":e.value),e=h,e!==a?(r.setValue(e),!0):!1}function ke(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ve(e,r){var a=r.checked;return V({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??e._wrapperState.initialChecked})}function st(e,r){var a=r.defaultValue==null?"":r.defaultValue,h=r.checked!=null?r.checked:r.defaultChecked;a=me(r.value!=null?r.value:a),e._wrapperState={initialChecked:h,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function mt(e,r){r=r.checked,r!=null&&N(e,"checked",r,!1)}function et(e,r){mt(e,r);var a=me(r.value),h=r.type;if(a!=null)h==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if(h==="submit"||h==="reset"){e.removeAttribute("value");return}r.hasOwnProperty("value")?Ge(e,r.type,a):r.hasOwnProperty("defaultValue")&&Ge(e,r.type,me(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(e.defaultChecked=!!r.defaultChecked)}function at(e,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var h=r.type;if(!(h!=="submit"&&h!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+e._wrapperState.initialValue,a||r===e.value||(e.value=r),e.defaultValue=r}a=e.name,a!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,a!==""&&(e.name=a)}function Ge(e,r,a){(r!=="number"||ke(e.ownerDocument)!==e)&&(a==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var $e=Array.isArray;function Ye(e,r,a,h){if(e=e.options,r){r={};for(var y=0;y<a.length;y++)r["$"+a[y]]=!0;for(a=0;a<e.length;a++)y=r.hasOwnProperty("$"+e[a].value),e[a].selected!==y&&(e[a].selected=y),y&&h&&(e[a].defaultSelected=!0)}else{for(a=""+me(a),r=null,y=0;y<e.length;y++){if(e[y].value===a){e[y].selected=!0,h&&(e[y].defaultSelected=!0);return}r!==null||e[y].disabled||(r=e[y])}r!==null&&(r.selected=!0)}}function Le(e,r){if(r.dangerouslySetInnerHTML!=null)throw Error(i(91));return V({},r,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function wt(e,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(i(92));if($e(a)){if(1<a.length)throw Error(i(93));a=a[0]}r=a}r==null&&(r=""),a=r}e._wrapperState={initialValue:me(a)}}function It(e,r){var a=me(r.value),h=me(r.defaultValue);a!=null&&(a=""+a,a!==e.value&&(e.value=a),r.defaultValue==null&&e.defaultValue!==a&&(e.defaultValue=a)),h!=null&&(e.defaultValue=""+h)}function Nn(e){var r=e.textContent;r===e._wrapperState.initialValue&&r!==""&&r!==null&&(e.value=r)}function Ot(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function en(e,r){return e==null||e==="http://www.w3.org/1999/xhtml"?Ot(r):e==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var sn,yn=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,h,y){MSApp.execUnsafeLocalFunction(function(){return e(r,a,h,y)})}:e})(function(e,r){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=r;else{for(sn=sn||document.createElement("div"),sn.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=sn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;r.firstChild;)e.appendChild(r.firstChild)}});function Ht(e,r){if(r){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=r;return}}e.textContent=r}var Pt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vt=["Webkit","ms","Moz","O"];Object.keys(Pt).forEach(function(e){Vt.forEach(function(r){r=r+e.charAt(0).toUpperCase()+e.substring(1),Pt[r]=Pt[e]})});function Fn(e,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||Pt.hasOwnProperty(e)&&Pt[e]?(""+r).trim():r+"px"}function pn(e,r){e=e.style;for(var a in r)if(r.hasOwnProperty(a)){var h=a.indexOf("--")===0,y=Fn(a,r[a],h);a==="float"&&(a="cssFloat"),h?e.setProperty(a,y):e[a]=y}}var ye=V({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Se(e,r){if(r){if(ye[e]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(i(137,e));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(i(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(i(61))}if(r.style!=null&&typeof r.style!="object")throw Error(i(62))}}function Ne(e,r){if(e.indexOf("-")===-1)return typeof r.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ct=null;function tt(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ne=null,xe=null,_e=null;function Ue(e){if(e=xi(e)){if(typeof ne!="function")throw Error(i(280));var r=e.stateNode;r&&(r=Fs(r),ne(e.stateNode,e.type,r))}}function ie(e){xe?_e?_e.push(e):_e=[e]:xe=e}function Ee(){if(xe){var e=xe,r=_e;if(_e=xe=null,Ue(e),r)for(e=0;e<r.length;e++)Ue(r[e])}}function ut(e,r){return e(r)}function Ft(){}var nn=!1;function ht(e,r,a){if(nn)return e(r,a);nn=!0;try{return ut(e,r,a)}finally{nn=!1,(xe!==null||_e!==null)&&(Ft(),Ee())}}function Tt(e,r){var a=e.stateNode;if(a===null)return null;var h=Fs(a);if(h===null)return null;a=h[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(e=e.type,h=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!h;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var Xn=!1;if(d)try{var bt={};Object.defineProperty(bt,"passive",{get:function(){Xn=!0}}),window.addEventListener("test",bt,bt),window.removeEventListener("test",bt,bt)}catch{Xn=!1}function Ut(e,r,a,h,y,E,I,Q,J){var he=Array.prototype.slice.call(arguments,3);try{r.apply(a,he)}catch(Ce){this.onError(Ce)}}var Kt=!1,Fe=null,Fi=!1,cs=null,Pl={onError:function(e){Kt=!0,Fe=e}};function Tl(e,r,a,h,y,E,I,Q,J){Kt=!1,Fe=null,Ut.apply(Pl,arguments)}function da(e,r,a,h,y,E,I,Q,J){if(Tl.apply(this,arguments),Kt){if(Kt){var he=Fe;Kt=!1,Fe=null}else throw Error(i(198));Fi||(Fi=!0,cs=he)}}function Vr(e){var r=e,a=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,(r.flags&4098)!==0&&(a=r.return),e=r.return;while(e)}return r.tag===3?a:null}function si(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function fa(e){if(Vr(e)!==e)throw Error(i(188))}function Ed(e){var r=e.alternate;if(!r){if(r=Vr(e),r===null)throw Error(i(188));return r!==e?null:e}for(var a=e,h=r;;){var y=a.return;if(y===null)break;var E=y.alternate;if(E===null){if(h=y.return,h!==null){a=h;continue}break}if(y.child===E.child){for(E=y.child;E;){if(E===a)return fa(y),e;if(E===h)return fa(y),r;E=E.sibling}throw Error(i(188))}if(a.return!==h.return)a=y,h=E;else{for(var I=!1,Q=y.child;Q;){if(Q===a){I=!0,a=y,h=E;break}if(Q===h){I=!0,h=y,a=E;break}Q=Q.sibling}if(!I){for(Q=E.child;Q;){if(Q===a){I=!0,a=E,h=y;break}if(Q===h){I=!0,h=E,a=y;break}Q=Q.sibling}if(!I)throw Error(i(189))}}if(a.alternate!==h)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?e:r}function Dl(e){return e=Ed(e),e!==null?Rl(e):null}function Rl(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var r=Rl(e);if(r!==null)return r;e=e.sibling}return null}var Nl=s.unstable_scheduleCallback,ha=s.unstable_cancelCallback,kd=s.unstable_shouldYield,us=s.unstable_requestPaint,Wt=s.unstable_now,Sd=s.unstable_getCurrentPriorityLevel,pa=s.unstable_ImmediatePriority,Fl=s.unstable_UserBlockingPriority,ds=s.unstable_NormalPriority,ma=s.unstable_LowPriority,Li=s.unstable_IdlePriority,wo=null,Jn=null;function bo(e){if(Jn&&typeof Jn.onCommitFiberRoot=="function")try{Jn.onCommitFiberRoot(wo,e,void 0,(e.current.flags&128)===128)}catch{}}var lt=Math.clz32?Math.clz32:Mi,jt=Math.log,fs=Math.LN2;function Mi(e){return e>>>=0,e===0?32:31-(jt(e)/fs|0)|0}var Sr=64,Ii=4194304;function ot(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Lt(e,r){var a=e.pendingLanes;if(a===0)return 0;var h=0,y=e.suspendedLanes,E=e.pingedLanes,I=a&268435455;if(I!==0){var Q=I&~y;Q!==0?h=ot(Q):(E&=I,E!==0&&(h=ot(E)))}else I=a&~y,I!==0?h=ot(I):E!==0&&(h=ot(E));if(h===0)return 0;if(r!==0&&r!==h&&(r&y)===0&&(y=h&-h,E=r&-r,y>=E||y===16&&(E&4194240)!==0))return r;if((h&4)!==0&&(h|=a&16),r=e.entangledLanes,r!==0)for(e=e.entanglements,r&=h;0<r;)a=31-lt(r),y=1<<a,h|=e[a],r&=~y;return h}function ga(e,r){switch(e){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hs(e,r){for(var a=e.suspendedLanes,h=e.pingedLanes,y=e.expirationTimes,E=e.pendingLanes;0<E;){var I=31-lt(E),Q=1<<I,J=y[I];J===-1?((Q&a)===0||(Q&h)!==0)&&(y[I]=ga(Q,r)):J<=r&&(e.expiredLanes|=Q),E&=~Q}}function En(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ll(){var e=Sr;return Sr<<=1,(Sr&4194240)===0&&(Sr=64),e}function Oi(e){for(var r=[],a=0;31>a;a++)r.push(e);return r}function er(e,r,a){e.pendingLanes|=r,r!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,r=31-lt(r),e[r]=a}function Qt(e,r){var a=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;var h=e.eventTimes;for(e=e.expirationTimes;0<a;){var y=31-lt(a),E=1<<y;r[y]=0,h[y]=-1,e[y]=-1,a&=~E}}function Br(e,r){var a=e.entangledLanes|=r;for(e=e.entanglements;a;){var h=31-lt(a),y=1<<h;y&r|e[h]&r&&(e[h]|=r),a&=~y}}var _t=0;function ji(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var ps,ai,ms,gs,Co,Eo=!1,zi=[],tr=null,Pr=null,fr=null,ko=new Map,nt=new Map,an=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xa(e,r){switch(e){case"focusin":case"focusout":tr=null;break;case"dragenter":case"dragleave":Pr=null;break;case"mouseover":case"mouseout":fr=null;break;case"pointerover":case"pointerout":ko.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":nt.delete(r.pointerId)}}function li(e,r,a,h,y,E){return e===null||e.nativeEvent!==E?(e={blockedOn:r,domEventName:a,eventSystemFlags:h,nativeEvent:E,targetContainers:[y]},r!==null&&(r=xi(r),r!==null&&ai(r)),e):(e.eventSystemFlags|=h,r=e.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),e)}function Aa(e,r,a,h,y){switch(r){case"focusin":return tr=li(tr,e,r,a,h,y),!0;case"dragenter":return Pr=li(Pr,e,r,a,h,y),!0;case"mouseover":return fr=li(fr,e,r,a,h,y),!0;case"pointerover":var E=y.pointerId;return ko.set(E,li(ko.get(E)||null,e,r,a,h,y)),!0;case"gotpointercapture":return E=y.pointerId,nt.set(E,li(nt.get(E)||null,e,r,a,h,y)),!0}return!1}function xs(e){var r=gi(e.target);if(r!==null){var a=Vr(r);if(a!==null){if(r=a.tag,r===13){if(r=si(a),r!==null){e.blockedOn=r,Co(e.priority,function(){ms(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hr(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var a=ys(e.domEventName,e.eventSystemFlags,r[0],e.nativeEvent);if(a===null){a=e.nativeEvent;var h=new a.constructor(a.type,a);ct=h,a.target.dispatchEvent(h),ct=null}else return r=xi(a),r!==null&&ai(r),e.blockedOn=a,!1;r.shift()}return!0}function As(e,r,a){hr(e)&&a.delete(r)}function So(){Eo=!1,tr!==null&&hr(tr)&&(tr=null),Pr!==null&&hr(Pr)&&(Pr=null),fr!==null&&hr(fr)&&(fr=null),ko.forEach(As),nt.forEach(As)}function qt(e,r){e.blockedOn===r&&(e.blockedOn=null,Eo||(Eo=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,So)))}function nr(e){function r(y){return qt(y,e)}if(0<zi.length){qt(zi[0],e);for(var a=1;a<zi.length;a++){var h=zi[a];h.blockedOn===e&&(h.blockedOn=null)}}for(tr!==null&&qt(tr,e),Pr!==null&&qt(Pr,e),fr!==null&&qt(fr,e),ko.forEach(r),nt.forEach(r),a=0;a<an.length;a++)h=an[a],h.blockedOn===e&&(h.blockedOn=null);for(;0<an.length&&(a=an[0],a.blockedOn===null);)xs(a),a.blockedOn===null&&an.shift()}var ci=F.ReactCurrentBatchConfig,Bo=!0;function Bd(e,r,a,h){var y=_t,E=ci.transition;ci.transition=null;try{_t=1,Po(e,r,a,h)}finally{_t=y,ci.transition=E}}function Ml(e,r,a,h){var y=_t,E=ci.transition;ci.transition=null;try{_t=4,Po(e,r,a,h)}finally{_t=y,ci.transition=E}}function Po(e,r,a,h){if(Bo){var y=ys(e,r,a,h);if(y===null)t(e,r,h,vs,a),xa(e,h);else if(Aa(y,e,r,a,h))h.stopPropagation();else if(xa(e,h),r&4&&-1<Dt.indexOf(e)){for(;y!==null;){var E=xi(y);if(E!==null&&ps(E),E=ys(e,r,a,h),E===null&&t(e,r,h,vs,a),E===y)break;y=E}y!==null&&h.stopPropagation()}else t(e,r,h,null,a)}}var vs=null;function ys(e,r,a,h){if(vs=null,e=tt(h),e=gi(e),e!==null)if(r=Vr(e),r===null)e=null;else if(a=r.tag,a===13){if(e=si(r),e!==null)return e;e=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null);return vs=e,null}function At(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sd()){case pa:return 1;case Fl:return 4;case ds:case ma:return 16;case Li:return 536870912;default:return 16}default:return 16}}var Ur=null,Ln=null,Zr=null;function va(){if(Zr)return Zr;var e,r=Ln,a=r.length,h,y="value"in Ur?Ur.value:Ur.textContent,E=y.length;for(e=0;e<a&&r[e]===y[e];e++);var I=a-e;for(h=1;h<=I&&r[a-h]===y[E-h];h++);return Zr=y.slice(e,1<h?1-h:void 0)}function _s(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function Hi(){return!0}function Il(){return!1}function kn(e){function r(a,h,y,E,I){this._reactName=a,this._targetInst=y,this.type=h,this.nativeEvent=E,this.target=I,this.currentTarget=null;for(var Q in e)e.hasOwnProperty(Q)&&(a=e[Q],this[Q]=a?a(E):E[Q]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Hi:Il,this.isPropagationStopped=Il,this}return V(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Hi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Hi)},persist:function(){},isPersistent:Hi}),r}var Vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ya=kn(Vi),ui=V({},Vi,{view:0,detail:0}),Pd=kn(ui),Un,_a,Ui,rr=V({},ui,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ui&&(Ui&&e.type==="mousemove"?(Un=e.screenX-Ui.screenX,_a=e.screenY-Ui.screenY):_a=Un=0,Ui=e),Un)},movementY:function(e){return"movementY"in e?e.movementY:_a}}),wa=kn(rr),Ol=V({},rr,{dataTransfer:0}),ba=kn(Ol),Td=V({},ui,{relatedTarget:0}),ws=kn(Td),jl=V({},Vi,{animationName:0,elapsedTime:0,pseudoElement:0}),Dd=kn(jl),Rd=V({},Vi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ca=kn(Rd),Nd=V({},Vi,{data:0}),Ea=kn(Nd),zl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},di={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fd(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=di[e])?!!r[e]:!1}function fi(){return Fd}var Zn=V({},ui,{key:function(e){if(e.key){var r=zl[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=_s(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?bs[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fi,charCode:function(e){return e.type==="keypress"?_s(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_s(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hl=kn(Zn),Vl=V({},rr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ul=kn(Vl),ka=V({},ui,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fi}),Sa=kn(ka),Ld=V({},Vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Md=kn(Ld),Zl=V({},rr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Id=kn(Zl),ir=[9,13,27,32],Wr=d&&"CompositionEvent"in window,To=null;d&&"documentMode"in document&&(To=document.documentMode);var Tr=d&&"TextEvent"in window&&!To,Wl=d&&(!Wr||To&&8<To&&11>=To),hi=" ",ql=!1;function Zi(e,r){switch(e){case"keyup":return ir.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ba(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Dr=!1;function Od(e,r){switch(e){case"compositionend":return Ba(r);case"keypress":return r.which!==32?null:(ql=!0,hi);case"textInput":return e=r.data,e===hi&&ql?null:e;default:return null}}function qr(e,r){if(Dr)return e==="compositionend"||!Wr&&Zi(e,r)?(e=va(),Zr=Ln=Ur=null,Dr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Wl&&r.locale!=="ko"?null:r.data;default:return null}}var Cs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gl(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!Cs[e.type]:r==="textarea"}function Es(e,r,a,h){ie(h),r=f(r,"onChange"),0<r.length&&(a=new ya("onChange","change",null,a,h),e.push({event:a,listeners:r}))}var Do=null,Mn=null;function jd(e){Ia(e,0)}function Rr(e){var r=Ai(e);if(Ke(r))return e}function zd(e,r){if(e==="change")return r}var pr=!1;if(d){var Wi;if(d){var ks="oninput"in document;if(!ks){var Ss=document.createElement("div");Ss.setAttribute("oninput","return;"),ks=typeof Ss.oninput=="function"}Wi=ks}else Wi=!1;pr=Wi&&(!document.documentMode||9<document.documentMode)}function Ro(){Do&&(Do.detachEvent("onpropertychange",Bs),Mn=Do=null)}function Bs(e){if(e.propertyName==="value"&&Rr(Mn)){var r=[];Es(r,Mn,e,tt(e)),ht(jd,r)}}function Ps(e,r,a){e==="focusin"?(Ro(),Do=r,Mn=a,Do.attachEvent("onpropertychange",Bs)):e==="focusout"&&Ro()}function qi(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Rr(Mn)}function Ts(e,r){if(e==="click")return Rr(r)}function Pa(e,r){if(e==="input"||e==="change")return Rr(r)}function $l(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var or=typeof Object.is=="function"?Object.is:$l;function Gr(e,r){if(or(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var a=Object.keys(e),h=Object.keys(r);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var y=a[h];if(!g.call(r,y)||!or(e[y],r[y]))return!1}return!0}function Kl(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ta(e,r){var a=Kl(e);e=0;for(var h;a;){if(a.nodeType===3){if(h=e+a.textContent.length,e<=r&&h>=r)return{node:a,offset:r-e};e=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Kl(a)}}function Ql(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?Ql(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function Da(){for(var e=window,r=ke();r instanceof e.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)e=r.contentWindow;else break;r=ke(e.document)}return r}function Ra(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}function mr(e){var r=Da(),a=e.focusedElem,h=e.selectionRange;if(r!==a&&a&&a.ownerDocument&&Ql(a.ownerDocument.documentElement,a)){if(h!==null&&Ra(a)){if(r=h.start,e=h.end,e===void 0&&(e=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(e,a.value.length);else if(e=(r=a.ownerDocument||document)&&r.defaultView||window,e.getSelection){e=e.getSelection();var y=a.textContent.length,E=Math.min(h.start,y);h=h.end===void 0?E:Math.min(h.end,y),!e.extend&&E>h&&(y=h,h=E,E=y),y=Ta(a,E);var I=Ta(a,h);y&&I&&(e.rangeCount!==1||e.anchorNode!==y.node||e.anchorOffset!==y.offset||e.focusNode!==I.node||e.focusOffset!==I.offset)&&(r=r.createRange(),r.setStart(y.node,y.offset),e.removeAllRanges(),E>h?(e.addRange(r),e.extend(I.node,I.offset)):(r.setEnd(I.node,I.offset),e.addRange(r)))}}for(r=[],e=a;e=e.parentNode;)e.nodeType===1&&r.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)e=r[a],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ds=d&&"documentMode"in document&&11>=document.documentMode,Gi=null,$i=null,No=null,Rs=!1;function Yl(e,r,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Rs||Gi==null||Gi!==ke(h)||(h=Gi,"selectionStart"in h&&Ra(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),No&&Gr(No,h)||(No=h,h=f($i,"onSelect"),0<h.length&&(r=new ya("onSelect","select",null,r,a),e.push({event:r,listeners:h}),r.target=Gi)))}function $r(e,r){var a={};return a[e.toLowerCase()]=r.toLowerCase(),a["Webkit"+e]="webkit"+r,a["Moz"+e]="moz"+r,a}var Ki={animationend:$r("Animation","AnimationEnd"),animationiteration:$r("Animation","AnimationIteration"),animationstart:$r("Animation","AnimationStart"),transitionend:$r("Transition","TransitionEnd")},Kr={},Na={};d&&(Na=document.createElement("div").style,"AnimationEvent"in window||(delete Ki.animationend.animation,delete Ki.animationiteration.animation,delete Ki.animationstart.animation),"TransitionEvent"in window||delete Ki.transitionend.transition);function Fo(e){if(Kr[e])return Kr[e];if(!Ki[e])return e;var r=Ki[e],a;for(a in r)if(r.hasOwnProperty(a)&&a in Na)return Kr[e]=r[a];return e}var Xl=Fo("animationend"),gr=Fo("animationiteration"),Fa=Fo("animationstart"),La=Fo("transitionend"),Qi=new Map,Jl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sr(e,r){Qi.set(e,r),u(r,[e])}for(var pi=0;pi<Jl.length;pi++){var Ns=Jl[pi],ec=Ns.toLowerCase(),Hd=Ns[0].toUpperCase()+Ns.slice(1);sr(ec,"on"+Hd)}sr(Xl,"onAnimationEnd"),sr(gr,"onAnimationIteration"),sr(Fa,"onAnimationStart"),sr("dblclick","onDoubleClick"),sr("focusin","onFocus"),sr("focusout","onBlur"),sr(La,"onTransitionEnd"),p("onMouseEnter",["mouseout","mouseover"]),p("onMouseLeave",["mouseout","mouseover"]),p("onPointerEnter",["pointerout","pointerover"]),p("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tc=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yi));function Ma(e,r,a){var h=e.type||"unknown-event";e.currentTarget=a,da(h,r,void 0,e),e.currentTarget=null}function Ia(e,r){r=(r&4)!==0;for(var a=0;a<e.length;a++){var h=e[a],y=h.event;h=h.listeners;e:{var E=void 0;if(r)for(var I=h.length-1;0<=I;I--){var Q=h[I],J=Q.instance,he=Q.currentTarget;if(Q=Q.listener,J!==E&&y.isPropagationStopped())break e;Ma(y,Q,he),E=J}else for(I=0;I<h.length;I++){if(Q=h[I],J=Q.instance,he=Q.currentTarget,Q=Q.listener,J!==E&&y.isPropagationStopped())break e;Ma(y,Q,he),E=J}}}if(Fi)throw e=cs,Fi=!1,cs=null,e}function Rt(e,r){var a=r[to];a===void 0&&(a=r[to]=new Set);var h=e+"__bubble";a.has(h)||(nc(r,e,2,!1),a.add(h))}function Oa(e,r,a){var h=0;r&&(h|=4),nc(a,e,h,r)}var Lo="_reactListening"+Math.random().toString(36).slice(2);function Xi(e){if(!e[Lo]){e[Lo]=!0,l.forEach(function(a){a!=="selectionchange"&&(tc.has(a)||Oa(a,!1,e),Oa(a,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[Lo]||(r[Lo]=!0,Oa("selectionchange",!1,r))}}function nc(e,r,a,h){switch(At(r)){case 1:var y=Bd;break;case 4:y=Ml;break;default:y=Po}a=y.bind(null,r,a,e),y=void 0,!Xn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),h?y!==void 0?e.addEventListener(r,a,{capture:!0,passive:y}):e.addEventListener(r,a,!0):y!==void 0?e.addEventListener(r,a,{passive:y}):e.addEventListener(r,a,!1)}function t(e,r,a,h,y){var E=h;if((r&1)===0&&(r&2)===0&&h!==null)e:for(;;){if(h===null)return;var I=h.tag;if(I===3||I===4){var Q=h.stateNode.containerInfo;if(Q===y||Q.nodeType===8&&Q.parentNode===y)break;if(I===4)for(I=h.return;I!==null;){var J=I.tag;if((J===3||J===4)&&(J=I.stateNode.containerInfo,J===y||J.nodeType===8&&J.parentNode===y))return;I=I.return}for(;Q!==null;){if(I=gi(Q),I===null)return;if(J=I.tag,J===5||J===6){h=E=I;continue e}Q=Q.parentNode}}h=h.return}ht(function(){var he=E,Ce=tt(a),Be=[];e:{var be=Qi.get(e);if(be!==void 0){var Me=ya,Oe=e;switch(e){case"keypress":if(_s(a)===0)break e;case"keydown":case"keyup":Me=Hl;break;case"focusin":Oe="focus",Me=ws;break;case"focusout":Oe="blur",Me=ws;break;case"beforeblur":case"afterblur":Me=ws;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Me=wa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Me=ba;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Me=Sa;break;case Xl:case gr:case Fa:Me=Dd;break;case La:Me=Md;break;case"scroll":Me=Pd;break;case"wheel":Me=Id;break;case"copy":case"cut":case"paste":Me=Ca;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Me=Ul}var Ze=(r&4)!==0,tn=!Ze&&e==="scroll",ce=Ze?be!==null?be+"Capture":null:be;Ze=[];for(var oe=he,de;oe!==null;){de=oe;var De=de.stateNode;if(de.tag===5&&De!==null&&(de=De,ce!==null&&(De=Tt(oe,ce),De!=null&&Ze.push(o(oe,De,de)))),tn)break;oe=oe.return}0<Ze.length&&(be=new Me(be,Oe,null,a,Ce),Be.push({event:be,listeners:Ze}))}}if((r&7)===0){e:{if(be=e==="mouseover"||e==="pointerover",Me=e==="mouseout"||e==="pointerout",be&&a!==ct&&(Oe=a.relatedTarget||a.fromElement)&&(gi(Oe)||Oe[kt]))break e;if((Me||be)&&(be=Ce.window===Ce?Ce:(be=Ce.ownerDocument)?be.defaultView||be.parentWindow:window,Me?(Oe=a.relatedTarget||a.toElement,Me=he,Oe=Oe?gi(Oe):null,Oe!==null&&(tn=Vr(Oe),Oe!==tn||Oe.tag!==5&&Oe.tag!==6)&&(Oe=null)):(Me=null,Oe=he),Me!==Oe)){if(Ze=wa,De="onMouseLeave",ce="onMouseEnter",oe="mouse",(e==="pointerout"||e==="pointerover")&&(Ze=Ul,De="onPointerLeave",ce="onPointerEnter",oe="pointer"),tn=Me==null?be:Ai(Me),de=Oe==null?be:Ai(Oe),be=new Ze(De,oe+"leave",Me,a,Ce),be.target=tn,be.relatedTarget=de,De=null,gi(Ce)===he&&(Ze=new Ze(ce,oe+"enter",Oe,a,Ce),Ze.target=de,Ze.relatedTarget=tn,De=Ze),tn=De,Me&&Oe)t:{for(Ze=Me,ce=Oe,oe=0,de=Ze;de;de=v(de))oe++;for(de=0,De=ce;De;De=v(De))de++;for(;0<oe-de;)Ze=v(Ze),oe--;for(;0<de-oe;)ce=v(ce),de--;for(;oe--;){if(Ze===ce||ce!==null&&Ze===ce.alternate)break t;Ze=v(Ze),ce=v(ce)}Ze=null}else Ze=null;Me!==null&&B(Be,be,Me,Ze,!1),Oe!==null&&tn!==null&&B(Be,tn,Oe,Ze,!0)}}e:{if(be=he?Ai(he):window,Me=be.nodeName&&be.nodeName.toLowerCase(),Me==="select"||Me==="input"&&be.type==="file")var qe=zd;else if(Gl(be))if(pr)qe=Pa;else{qe=qi;var Xe=Ps}else(Me=be.nodeName)&&Me.toLowerCase()==="input"&&(be.type==="checkbox"||be.type==="radio")&&(qe=Ts);if(qe&&(qe=qe(e,he))){Es(Be,qe,a,Ce);break e}Xe&&Xe(e,be,he),e==="focusout"&&(Xe=be._wrapperState)&&Xe.controlled&&be.type==="number"&&Ge(be,"number",be.value)}switch(Xe=he?Ai(he):window,e){case"focusin":(Gl(Xe)||Xe.contentEditable==="true")&&(Gi=Xe,$i=he,No=null);break;case"focusout":No=$i=Gi=null;break;case"mousedown":Rs=!0;break;case"contextmenu":case"mouseup":case"dragend":Rs=!1,Yl(Be,a,Ce);break;case"selectionchange":if(Ds)break;case"keydown":case"keyup":Yl(Be,a,Ce)}var Je;if(Wr)e:{switch(e){case"compositionstart":var it="onCompositionStart";break e;case"compositionend":it="onCompositionEnd";break e;case"compositionupdate":it="onCompositionUpdate";break e}it=void 0}else Dr?Zi(e,a)&&(it="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(it="onCompositionStart");it&&(Wl&&a.locale!=="ko"&&(Dr||it!=="onCompositionStart"?it==="onCompositionEnd"&&Dr&&(Je=va()):(Ur=Ce,Ln="value"in Ur?Ur.value:Ur.textContent,Dr=!0)),Xe=f(he,it),0<Xe.length&&(it=new Ea(it,e,null,a,Ce),Be.push({event:it,listeners:Xe}),Je?it.data=Je:(Je=Ba(a),Je!==null&&(it.data=Je)))),(Je=Tr?Od(e,a):qr(e,a))&&(he=f(he,"onBeforeInput"),0<he.length&&(Ce=new Ea("onBeforeInput","beforeinput",null,a,Ce),Be.push({event:Ce,listeners:he}),Ce.data=Je))}Ia(Be,r)})}function o(e,r,a){return{instance:e,listener:r,currentTarget:a}}function f(e,r){for(var a=r+"Capture",h=[];e!==null;){var y=e,E=y.stateNode;y.tag===5&&E!==null&&(y=E,E=Tt(e,a),E!=null&&h.unshift(o(e,E,y)),E=Tt(e,r),E!=null&&h.push(o(e,E,y))),e=e.return}return h}function v(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function B(e,r,a,h,y){for(var E=r._reactName,I=[];a!==null&&a!==h;){var Q=a,J=Q.alternate,he=Q.stateNode;if(J!==null&&J===h)break;Q.tag===5&&he!==null&&(Q=he,y?(J=Tt(a,E),J!=null&&I.unshift(o(a,J,Q))):y||(J=Tt(a,E),J!=null&&I.push(o(a,J,Q)))),a=a.return}I.length!==0&&e.push({event:r,listeners:I})}var O=/\r\n?/g,X=/\u0000|\uFFFD/g;function le(e){return(typeof e=="string"?e:""+e).replace(O,`
`).replace(X,"")}function fe(e,r,a){if(r=le(r),le(e)!==r&&a)throw Error(i(425))}function we(){}var Re=null,Qe=null;function dt(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ln=typeof setTimeout=="function"?setTimeout:void 0,rn=typeof clearTimeout=="function"?clearTimeout:void 0,In=typeof Promise=="function"?Promise:void 0,Sn=typeof queueMicrotask=="function"?queueMicrotask:typeof In<"u"?function(e){return In.resolve(null).then(e).catch(Ji)}:ln;function Ji(e){setTimeout(function(){throw e})}function ja(e,r){var a=r,h=0;do{var y=a.nextSibling;if(e.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"){if(h===0){e.removeChild(y),nr(r);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=y}while(a);nr(r)}function Qr(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return e}function rc(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return e;r--}else a==="/$"&&r++}e=e.previousSibling}return null}var mi=Math.random().toString(36).slice(2),xr="__reactFiber$"+mi,eo="__reactProps$"+mi,kt="__reactContainer$"+mi,to="__reactEvents$"+mi,Vd="__reactListeners$"+mi,Ud="__reactHandles$"+mi;function gi(e){var r=e[xr];if(r)return r;for(var a=e.parentNode;a;){if(r=a[kt]||a[xr]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(e=rc(e);e!==null;){if(a=e[xr])return a;e=rc(e)}return r}e=a,a=e.parentNode}return null}function xi(e){return e=e[xr]||e[kt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ai(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(i(33))}function Fs(e){return e[eo]||null}var Zd=[],Ls=-1;function no(e){return{current:e}}function zt(e){0>Ls||(e.current=Zd[Ls],Zd[Ls]=null,Ls--)}function Mt(e,r){Ls++,Zd[Ls]=e.current,e.current=r}var ro={},Bn=no(ro),Wn=no(!1),Mo=ro;function Ms(e,r){var a=e.type.contextTypes;if(!a)return ro;var h=e.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===r)return h.__reactInternalMemoizedMaskedChildContext;var y={},E;for(E in a)y[E]=r[E];return h&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=y),y}function qn(e){return e=e.childContextTypes,e!=null}function ic(){zt(Wn),zt(Bn)}function hh(e,r,a){if(Bn.current!==ro)throw Error(i(168));Mt(Bn,r),Mt(Wn,a)}function ph(e,r,a){var h=e.stateNode;if(r=r.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var y in h)if(!(y in r))throw Error(i(108,ve(e)||"Unknown",y));return V({},a,h)}function oc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ro,Mo=Bn.current,Mt(Bn,e),Mt(Wn,Wn.current),!0}function mh(e,r,a){var h=e.stateNode;if(!h)throw Error(i(169));a?(e=ph(e,r,Mo),h.__reactInternalMemoizedMergedChildContext=e,zt(Wn),zt(Bn),Mt(Bn,e)):zt(Wn),Mt(Wn,a)}var vi=null,sc=!1,Wd=!1;function gh(e){vi===null?vi=[e]:vi.push(e)}function Iv(e){sc=!0,gh(e)}function io(){if(!Wd&&vi!==null){Wd=!0;var e=0,r=_t;try{var a=vi;for(_t=1;e<a.length;e++){var h=a[e];do h=h(!0);while(h!==null)}vi=null,sc=!1}catch(y){throw vi!==null&&(vi=vi.slice(e+1)),Nl(pa,io),y}finally{_t=r,Wd=!1}}return null}var Is=[],Os=0,ac=null,lc=0,Ar=[],vr=0,Io=null,yi=1,_i="";function Oo(e,r){Is[Os++]=lc,Is[Os++]=ac,ac=e,lc=r}function xh(e,r,a){Ar[vr++]=yi,Ar[vr++]=_i,Ar[vr++]=Io,Io=e;var h=yi;e=_i;var y=32-lt(h)-1;h&=~(1<<y),a+=1;var E=32-lt(r)+y;if(30<E){var I=y-y%5;E=(h&(1<<I)-1).toString(32),h>>=I,y-=I,yi=1<<32-lt(r)+y|a<<y|h,_i=E+e}else yi=1<<E|a<<y|h,_i=e}function qd(e){e.return!==null&&(Oo(e,1),xh(e,1,0))}function Gd(e){for(;e===ac;)ac=Is[--Os],Is[Os]=null,lc=Is[--Os],Is[Os]=null;for(;e===Io;)Io=Ar[--vr],Ar[vr]=null,_i=Ar[--vr],Ar[vr]=null,yi=Ar[--vr],Ar[vr]=null}var ar=null,lr=null,Zt=!1,Nr=null;function Ah(e,r){var a=br(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=e,r=e.deletions,r===null?(e.deletions=[a],e.flags|=16):r.push(a)}function vh(e,r){switch(e.tag){case 5:var a=e.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(e.stateNode=r,ar=e,lr=Qr(r.firstChild),!0):!1;case 6:return r=e.pendingProps===""||r.nodeType!==3?null:r,r!==null?(e.stateNode=r,ar=e,lr=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=Io!==null?{id:yi,overflow:_i}:null,e.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=br(18,null,null,0),a.stateNode=r,a.return=e,e.child=a,ar=e,lr=null,!0):!1;default:return!1}}function $d(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Kd(e){if(Zt){var r=lr;if(r){var a=r;if(!vh(e,r)){if($d(e))throw Error(i(418));r=Qr(a.nextSibling);var h=ar;r&&vh(e,r)?Ah(h,a):(e.flags=e.flags&-4097|2,Zt=!1,ar=e)}}else{if($d(e))throw Error(i(418));e.flags=e.flags&-4097|2,Zt=!1,ar=e}}}function yh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ar=e}function cc(e){if(e!==ar)return!1;if(!Zt)return yh(e),Zt=!0,!1;var r;if((r=e.tag!==3)&&!(r=e.tag!==5)&&(r=e.type,r=r!=="head"&&r!=="body"&&!dt(e.type,e.memoizedProps)),r&&(r=lr)){if($d(e))throw _h(),Error(i(418));for(;r;)Ah(e,r),r=Qr(r.nextSibling)}if(yh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,r=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"){if(r===0){lr=Qr(e.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}e=e.nextSibling}lr=null}}else lr=ar?Qr(e.stateNode.nextSibling):null;return!0}function _h(){for(var e=lr;e;)e=Qr(e.nextSibling)}function js(){lr=ar=null,Zt=!1}function Qd(e){Nr===null?Nr=[e]:Nr.push(e)}var Ov=F.ReactCurrentBatchConfig;function za(e,r,a){if(e=a.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(i(309));var h=a.stateNode}if(!h)throw Error(i(147,e));var y=h,E=""+e;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===E?r.ref:(r=function(I){var Q=y.refs;I===null?delete Q[E]:Q[E]=I},r._stringRef=E,r)}if(typeof e!="string")throw Error(i(284));if(!a._owner)throw Error(i(290,e))}return e}function uc(e,r){throw e=Object.prototype.toString.call(r),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}function wh(e){var r=e._init;return r(e._payload)}function bh(e){function r(ce,oe){if(e){var de=ce.deletions;de===null?(ce.deletions=[oe],ce.flags|=16):de.push(oe)}}function a(ce,oe){if(!e)return null;for(;oe!==null;)r(ce,oe),oe=oe.sibling;return null}function h(ce,oe){for(ce=new Map;oe!==null;)oe.key!==null?ce.set(oe.key,oe):ce.set(oe.index,oe),oe=oe.sibling;return ce}function y(ce,oe){return ce=ho(ce,oe),ce.index=0,ce.sibling=null,ce}function E(ce,oe,de){return ce.index=de,e?(de=ce.alternate,de!==null?(de=de.index,de<oe?(ce.flags|=2,oe):de):(ce.flags|=2,oe)):(ce.flags|=1048576,oe)}function I(ce){return e&&ce.alternate===null&&(ce.flags|=2),ce}function Q(ce,oe,de,De){return oe===null||oe.tag!==6?(oe=Vf(de,ce.mode,De),oe.return=ce,oe):(oe=y(oe,de),oe.return=ce,oe)}function J(ce,oe,de,De){var qe=de.type;return qe===U?Ce(ce,oe,de.props.children,De,de.key):oe!==null&&(oe.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===G&&wh(qe)===oe.type)?(De=y(oe,de.props),De.ref=za(ce,oe,de),De.return=ce,De):(De=Fc(de.type,de.key,de.props,null,ce.mode,De),De.ref=za(ce,oe,de),De.return=ce,De)}function he(ce,oe,de,De){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==de.containerInfo||oe.stateNode.implementation!==de.implementation?(oe=Uf(de,ce.mode,De),oe.return=ce,oe):(oe=y(oe,de.children||[]),oe.return=ce,oe)}function Ce(ce,oe,de,De,qe){return oe===null||oe.tag!==7?(oe=qo(de,ce.mode,De,qe),oe.return=ce,oe):(oe=y(oe,de),oe.return=ce,oe)}function Be(ce,oe,de){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return oe=Vf(""+oe,ce.mode,de),oe.return=ce,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case M:return de=Fc(oe.type,oe.key,oe.props,null,ce.mode,de),de.ref=za(ce,null,oe),de.return=ce,de;case H:return oe=Uf(oe,ce.mode,de),oe.return=ce,oe;case G:var De=oe._init;return Be(ce,De(oe._payload),de)}if($e(oe)||re(oe))return oe=qo(oe,ce.mode,de,null),oe.return=ce,oe;uc(ce,oe)}return null}function be(ce,oe,de,De){var qe=oe!==null?oe.key:null;if(typeof de=="string"&&de!==""||typeof de=="number")return qe!==null?null:Q(ce,oe,""+de,De);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case M:return de.key===qe?J(ce,oe,de,De):null;case H:return de.key===qe?he(ce,oe,de,De):null;case G:return qe=de._init,be(ce,oe,qe(de._payload),De)}if($e(de)||re(de))return qe!==null?null:Ce(ce,oe,de,De,null);uc(ce,de)}return null}function Me(ce,oe,de,De,qe){if(typeof De=="string"&&De!==""||typeof De=="number")return ce=ce.get(de)||null,Q(oe,ce,""+De,qe);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case M:return ce=ce.get(De.key===null?de:De.key)||null,J(oe,ce,De,qe);case H:return ce=ce.get(De.key===null?de:De.key)||null,he(oe,ce,De,qe);case G:var Xe=De._init;return Me(ce,oe,de,Xe(De._payload),qe)}if($e(De)||re(De))return ce=ce.get(de)||null,Ce(oe,ce,De,qe,null);uc(oe,De)}return null}function Oe(ce,oe,de,De){for(var qe=null,Xe=null,Je=oe,it=oe=0,xn=null;Je!==null&&it<de.length;it++){Je.index>it?(xn=Je,Je=null):xn=Je.sibling;var Et=be(ce,Je,de[it],De);if(Et===null){Je===null&&(Je=xn);break}e&&Je&&Et.alternate===null&&r(ce,Je),oe=E(Et,oe,it),Xe===null?qe=Et:Xe.sibling=Et,Xe=Et,Je=xn}if(it===de.length)return a(ce,Je),Zt&&Oo(ce,it),qe;if(Je===null){for(;it<de.length;it++)Je=Be(ce,de[it],De),Je!==null&&(oe=E(Je,oe,it),Xe===null?qe=Je:Xe.sibling=Je,Xe=Je);return Zt&&Oo(ce,it),qe}for(Je=h(ce,Je);it<de.length;it++)xn=Me(Je,ce,it,de[it],De),xn!==null&&(e&&xn.alternate!==null&&Je.delete(xn.key===null?it:xn.key),oe=E(xn,oe,it),Xe===null?qe=xn:Xe.sibling=xn,Xe=xn);return e&&Je.forEach(function(po){return r(ce,po)}),Zt&&Oo(ce,it),qe}function Ze(ce,oe,de,De){var qe=re(de);if(typeof qe!="function")throw Error(i(150));if(de=qe.call(de),de==null)throw Error(i(151));for(var Xe=qe=null,Je=oe,it=oe=0,xn=null,Et=de.next();Je!==null&&!Et.done;it++,Et=de.next()){Je.index>it?(xn=Je,Je=null):xn=Je.sibling;var po=be(ce,Je,Et.value,De);if(po===null){Je===null&&(Je=xn);break}e&&Je&&po.alternate===null&&r(ce,Je),oe=E(po,oe,it),Xe===null?qe=po:Xe.sibling=po,Xe=po,Je=xn}if(Et.done)return a(ce,Je),Zt&&Oo(ce,it),qe;if(Je===null){for(;!Et.done;it++,Et=de.next())Et=Be(ce,Et.value,De),Et!==null&&(oe=E(Et,oe,it),Xe===null?qe=Et:Xe.sibling=Et,Xe=Et);return Zt&&Oo(ce,it),qe}for(Je=h(ce,Je);!Et.done;it++,Et=de.next())Et=Me(Je,ce,it,Et.value,De),Et!==null&&(e&&Et.alternate!==null&&Je.delete(Et.key===null?it:Et.key),oe=E(Et,oe,it),Xe===null?qe=Et:Xe.sibling=Et,Xe=Et);return e&&Je.forEach(function(xy){return r(ce,xy)}),Zt&&Oo(ce,it),qe}function tn(ce,oe,de,De){if(typeof de=="object"&&de!==null&&de.type===U&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case M:e:{for(var qe=de.key,Xe=oe;Xe!==null;){if(Xe.key===qe){if(qe=de.type,qe===U){if(Xe.tag===7){a(ce,Xe.sibling),oe=y(Xe,de.props.children),oe.return=ce,ce=oe;break e}}else if(Xe.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===G&&wh(qe)===Xe.type){a(ce,Xe.sibling),oe=y(Xe,de.props),oe.ref=za(ce,Xe,de),oe.return=ce,ce=oe;break e}a(ce,Xe);break}else r(ce,Xe);Xe=Xe.sibling}de.type===U?(oe=qo(de.props.children,ce.mode,De,de.key),oe.return=ce,ce=oe):(De=Fc(de.type,de.key,de.props,null,ce.mode,De),De.ref=za(ce,oe,de),De.return=ce,ce=De)}return I(ce);case H:e:{for(Xe=de.key;oe!==null;){if(oe.key===Xe)if(oe.tag===4&&oe.stateNode.containerInfo===de.containerInfo&&oe.stateNode.implementation===de.implementation){a(ce,oe.sibling),oe=y(oe,de.children||[]),oe.return=ce,ce=oe;break e}else{a(ce,oe);break}else r(ce,oe);oe=oe.sibling}oe=Uf(de,ce.mode,De),oe.return=ce,ce=oe}return I(ce);case G:return Xe=de._init,tn(ce,oe,Xe(de._payload),De)}if($e(de))return Oe(ce,oe,de,De);if(re(de))return Ze(ce,oe,de,De);uc(ce,de)}return typeof de=="string"&&de!==""||typeof de=="number"?(de=""+de,oe!==null&&oe.tag===6?(a(ce,oe.sibling),oe=y(oe,de),oe.return=ce,ce=oe):(a(ce,oe),oe=Vf(de,ce.mode,De),oe.return=ce,ce=oe),I(ce)):a(ce,oe)}return tn}var zs=bh(!0),Ch=bh(!1),dc=no(null),fc=null,Hs=null,Yd=null;function Xd(){Yd=Hs=fc=null}function Jd(e){var r=dc.current;zt(dc),e._currentValue=r}function ef(e,r,a){for(;e!==null;){var h=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,h!==null&&(h.childLanes|=r)):h!==null&&(h.childLanes&r)!==r&&(h.childLanes|=r),e===a)break;e=e.return}}function Vs(e,r){fc=e,Yd=Hs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&r)!==0&&(Gn=!0),e.firstContext=null)}function yr(e){var r=e._currentValue;if(Yd!==e)if(e={context:e,memoizedValue:r,next:null},Hs===null){if(fc===null)throw Error(i(308));Hs=e,fc.dependencies={lanes:0,firstContext:e}}else Hs=Hs.next=e;return r}var jo=null;function tf(e){jo===null?jo=[e]:jo.push(e)}function Eh(e,r,a,h){var y=r.interleaved;return y===null?(a.next=a,tf(r)):(a.next=y.next,y.next=a),r.interleaved=a,wi(e,h)}function wi(e,r){e.lanes|=r;var a=e.alternate;for(a!==null&&(a.lanes|=r),a=e,e=e.return;e!==null;)e.childLanes|=r,a=e.alternate,a!==null&&(a.childLanes|=r),a=e,e=e.return;return a.tag===3?a.stateNode:null}var oo=!1;function nf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kh(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bi(e,r){return{eventTime:e,lane:r,tag:0,payload:null,callback:null,next:null}}function so(e,r,a){var h=e.updateQueue;if(h===null)return null;if(h=h.shared,(Ct&2)!==0){var y=h.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),h.pending=r,wi(e,a)}return y=h.interleaved,y===null?(r.next=r,tf(h)):(r.next=y.next,y.next=r),h.interleaved=r,wi(e,a)}function hc(e,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var h=r.lanes;h&=e.pendingLanes,a|=h,r.lanes=a,Br(e,a)}}function Sh(e,r){var a=e.updateQueue,h=e.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var y=null,E=null;if(a=a.firstBaseUpdate,a!==null){do{var I={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};E===null?y=E=I:E=E.next=I,a=a.next}while(a!==null);E===null?y=E=r:E=E.next=r}else y=E=r;a={baseState:h.baseState,firstBaseUpdate:y,lastBaseUpdate:E,shared:h.shared,effects:h.effects},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=r:e.next=r,a.lastBaseUpdate=r}function pc(e,r,a,h){var y=e.updateQueue;oo=!1;var E=y.firstBaseUpdate,I=y.lastBaseUpdate,Q=y.shared.pending;if(Q!==null){y.shared.pending=null;var J=Q,he=J.next;J.next=null,I===null?E=he:I.next=he,I=J;var Ce=e.alternate;Ce!==null&&(Ce=Ce.updateQueue,Q=Ce.lastBaseUpdate,Q!==I&&(Q===null?Ce.firstBaseUpdate=he:Q.next=he,Ce.lastBaseUpdate=J))}if(E!==null){var Be=y.baseState;I=0,Ce=he=J=null,Q=E;do{var be=Q.lane,Me=Q.eventTime;if((h&be)===be){Ce!==null&&(Ce=Ce.next={eventTime:Me,lane:0,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null});e:{var Oe=e,Ze=Q;switch(be=r,Me=a,Ze.tag){case 1:if(Oe=Ze.payload,typeof Oe=="function"){Be=Oe.call(Me,Be,be);break e}Be=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Ze.payload,be=typeof Oe=="function"?Oe.call(Me,Be,be):Oe,be==null)break e;Be=V({},Be,be);break e;case 2:oo=!0}}Q.callback!==null&&Q.lane!==0&&(e.flags|=64,be=y.effects,be===null?y.effects=[Q]:be.push(Q))}else Me={eventTime:Me,lane:be,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},Ce===null?(he=Ce=Me,J=Be):Ce=Ce.next=Me,I|=be;if(Q=Q.next,Q===null){if(Q=y.shared.pending,Q===null)break;be=Q,Q=be.next,be.next=null,y.lastBaseUpdate=be,y.shared.pending=null}}while(!0);if(Ce===null&&(J=Be),y.baseState=J,y.firstBaseUpdate=he,y.lastBaseUpdate=Ce,r=y.shared.interleaved,r!==null){y=r;do I|=y.lane,y=y.next;while(y!==r)}else E===null&&(y.shared.lanes=0);Vo|=I,e.lanes=I,e.memoizedState=Be}}function Bh(e,r,a){if(e=r.effects,r.effects=null,e!==null)for(r=0;r<e.length;r++){var h=e[r],y=h.callback;if(y!==null){if(h.callback=null,h=a,typeof y!="function")throw Error(i(191,y));y.call(h)}}}var Ha={},Yr=no(Ha),Va=no(Ha),Ua=no(Ha);function zo(e){if(e===Ha)throw Error(i(174));return e}function rf(e,r){switch(Mt(Ua,r),Mt(Va,e),Mt(Yr,Ha),e=r.nodeType,e){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:en(null,"");break;default:e=e===8?r.parentNode:r,r=e.namespaceURI||null,e=e.tagName,r=en(r,e)}zt(Yr),Mt(Yr,r)}function Us(){zt(Yr),zt(Va),zt(Ua)}function Ph(e){zo(Ua.current);var r=zo(Yr.current),a=en(r,e.type);r!==a&&(Mt(Va,e),Mt(Yr,a))}function of(e){Va.current===e&&(zt(Yr),zt(Va))}var Gt=no(0);function mc(e){for(var r=e;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var sf=[];function af(){for(var e=0;e<sf.length;e++)sf[e]._workInProgressVersionPrimary=null;sf.length=0}var gc=F.ReactCurrentDispatcher,lf=F.ReactCurrentBatchConfig,Ho=0,$t=null,cn=null,mn=null,xc=!1,Za=!1,Wa=0,jv=0;function Pn(){throw Error(i(321))}function cf(e,r){if(r===null)return!1;for(var a=0;a<r.length&&a<e.length;a++)if(!or(e[a],r[a]))return!1;return!0}function uf(e,r,a,h,y,E){if(Ho=E,$t=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,gc.current=e===null||e.memoizedState===null?Uv:Zv,e=a(h,y),Za){E=0;do{if(Za=!1,Wa=0,25<=E)throw Error(i(301));E+=1,mn=cn=null,r.updateQueue=null,gc.current=Wv,e=a(h,y)}while(Za)}if(gc.current=yc,r=cn!==null&&cn.next!==null,Ho=0,mn=cn=$t=null,xc=!1,r)throw Error(i(300));return e}function df(){var e=Wa!==0;return Wa=0,e}function Xr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mn===null?$t.memoizedState=mn=e:mn=mn.next=e,mn}function _r(){if(cn===null){var e=$t.alternate;e=e!==null?e.memoizedState:null}else e=cn.next;var r=mn===null?$t.memoizedState:mn.next;if(r!==null)mn=r,cn=e;else{if(e===null)throw Error(i(310));cn=e,e={memoizedState:cn.memoizedState,baseState:cn.baseState,baseQueue:cn.baseQueue,queue:cn.queue,next:null},mn===null?$t.memoizedState=mn=e:mn=mn.next=e}return mn}function qa(e,r){return typeof r=="function"?r(e):r}function ff(e){var r=_r(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=e;var h=cn,y=h.baseQueue,E=a.pending;if(E!==null){if(y!==null){var I=y.next;y.next=E.next,E.next=I}h.baseQueue=y=E,a.pending=null}if(y!==null){E=y.next,h=h.baseState;var Q=I=null,J=null,he=E;do{var Ce=he.lane;if((Ho&Ce)===Ce)J!==null&&(J=J.next={lane:0,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),h=he.hasEagerState?he.eagerState:e(h,he.action);else{var Be={lane:Ce,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null};J===null?(Q=J=Be,I=h):J=J.next=Be,$t.lanes|=Ce,Vo|=Ce}he=he.next}while(he!==null&&he!==E);J===null?I=h:J.next=Q,or(h,r.memoizedState)||(Gn=!0),r.memoizedState=h,r.baseState=I,r.baseQueue=J,a.lastRenderedState=h}if(e=a.interleaved,e!==null){y=e;do E=y.lane,$t.lanes|=E,Vo|=E,y=y.next;while(y!==e)}else y===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function hf(e){var r=_r(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=e;var h=a.dispatch,y=a.pending,E=r.memoizedState;if(y!==null){a.pending=null;var I=y=y.next;do E=e(E,I.action),I=I.next;while(I!==y);or(E,r.memoizedState)||(Gn=!0),r.memoizedState=E,r.baseQueue===null&&(r.baseState=E),a.lastRenderedState=E}return[E,h]}function Th(){}function Dh(e,r){var a=$t,h=_r(),y=r(),E=!or(h.memoizedState,y);if(E&&(h.memoizedState=y,Gn=!0),h=h.queue,pf(Fh.bind(null,a,h,e),[e]),h.getSnapshot!==r||E||mn!==null&&mn.memoizedState.tag&1){if(a.flags|=2048,Ga(9,Nh.bind(null,a,h,y,r),void 0,null),gn===null)throw Error(i(349));(Ho&30)!==0||Rh(a,r,y)}return y}function Rh(e,r,a){e.flags|=16384,e={getSnapshot:r,value:a},r=$t.updateQueue,r===null?(r={lastEffect:null,stores:null},$t.updateQueue=r,r.stores=[e]):(a=r.stores,a===null?r.stores=[e]:a.push(e))}function Nh(e,r,a,h){r.value=a,r.getSnapshot=h,Lh(r)&&Mh(e)}function Fh(e,r,a){return a(function(){Lh(r)&&Mh(e)})}function Lh(e){var r=e.getSnapshot;e=e.value;try{var a=r();return!or(e,a)}catch{return!0}}function Mh(e){var r=wi(e,1);r!==null&&Ir(r,e,1,-1)}function Ih(e){var r=Xr();return typeof e=="function"&&(e=e()),r.memoizedState=r.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:e},r.queue=e,e=e.dispatch=Vv.bind(null,$t,e),[r.memoizedState,e]}function Ga(e,r,a,h){return e={tag:e,create:r,destroy:a,deps:h,next:null},r=$t.updateQueue,r===null?(r={lastEffect:null,stores:null},$t.updateQueue=r,r.lastEffect=e.next=e):(a=r.lastEffect,a===null?r.lastEffect=e.next=e:(h=a.next,a.next=e,e.next=h,r.lastEffect=e)),e}function Oh(){return _r().memoizedState}function Ac(e,r,a,h){var y=Xr();$t.flags|=e,y.memoizedState=Ga(1|r,a,void 0,h===void 0?null:h)}function vc(e,r,a,h){var y=_r();h=h===void 0?null:h;var E=void 0;if(cn!==null){var I=cn.memoizedState;if(E=I.destroy,h!==null&&cf(h,I.deps)){y.memoizedState=Ga(r,a,E,h);return}}$t.flags|=e,y.memoizedState=Ga(1|r,a,E,h)}function jh(e,r){return Ac(8390656,8,e,r)}function pf(e,r){return vc(2048,8,e,r)}function zh(e,r){return vc(4,2,e,r)}function Hh(e,r){return vc(4,4,e,r)}function Vh(e,r){if(typeof r=="function")return e=e(),r(e),function(){r(null)};if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function Uh(e,r,a){return a=a!=null?a.concat([e]):null,vc(4,4,Vh.bind(null,r,e),a)}function mf(){}function Zh(e,r){var a=_r();r=r===void 0?null:r;var h=a.memoizedState;return h!==null&&r!==null&&cf(r,h[1])?h[0]:(a.memoizedState=[e,r],e)}function Wh(e,r){var a=_r();r=r===void 0?null:r;var h=a.memoizedState;return h!==null&&r!==null&&cf(r,h[1])?h[0]:(e=e(),a.memoizedState=[e,r],e)}function qh(e,r,a){return(Ho&21)===0?(e.baseState&&(e.baseState=!1,Gn=!0),e.memoizedState=a):(or(a,r)||(a=Ll(),$t.lanes|=a,Vo|=a,e.baseState=!0),r)}function zv(e,r){var a=_t;_t=a!==0&&4>a?a:4,e(!0);var h=lf.transition;lf.transition={};try{e(!1),r()}finally{_t=a,lf.transition=h}}function Gh(){return _r().memoizedState}function Hv(e,r,a){var h=uo(e);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},$h(e))Kh(r,a);else if(a=Eh(e,r,a,h),a!==null){var y=jn();Ir(a,e,h,y),Qh(a,r,h)}}function Vv(e,r,a){var h=uo(e),y={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if($h(e))Kh(r,y);else{var E=e.alternate;if(e.lanes===0&&(E===null||E.lanes===0)&&(E=r.lastRenderedReducer,E!==null))try{var I=r.lastRenderedState,Q=E(I,a);if(y.hasEagerState=!0,y.eagerState=Q,or(Q,I)){var J=r.interleaved;J===null?(y.next=y,tf(r)):(y.next=J.next,J.next=y),r.interleaved=y;return}}catch{}finally{}a=Eh(e,r,y,h),a!==null&&(y=jn(),Ir(a,e,h,y),Qh(a,r,h))}}function $h(e){var r=e.alternate;return e===$t||r!==null&&r===$t}function Kh(e,r){Za=xc=!0;var a=e.pending;a===null?r.next=r:(r.next=a.next,a.next=r),e.pending=r}function Qh(e,r,a){if((a&4194240)!==0){var h=r.lanes;h&=e.pendingLanes,a|=h,r.lanes=a,Br(e,a)}}var yc={readContext:yr,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useInsertionEffect:Pn,useLayoutEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useMutableSource:Pn,useSyncExternalStore:Pn,useId:Pn,unstable_isNewReconciler:!1},Uv={readContext:yr,useCallback:function(e,r){return Xr().memoizedState=[e,r===void 0?null:r],e},useContext:yr,useEffect:jh,useImperativeHandle:function(e,r,a){return a=a!=null?a.concat([e]):null,Ac(4194308,4,Vh.bind(null,r,e),a)},useLayoutEffect:function(e,r){return Ac(4194308,4,e,r)},useInsertionEffect:function(e,r){return Ac(4,2,e,r)},useMemo:function(e,r){var a=Xr();return r=r===void 0?null:r,e=e(),a.memoizedState=[e,r],e},useReducer:function(e,r,a){var h=Xr();return r=a!==void 0?a(r):r,h.memoizedState=h.baseState=r,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},h.queue=e,e=e.dispatch=Hv.bind(null,$t,e),[h.memoizedState,e]},useRef:function(e){var r=Xr();return e={current:e},r.memoizedState=e},useState:Ih,useDebugValue:mf,useDeferredValue:function(e){return Xr().memoizedState=e},useTransition:function(){var e=Ih(!1),r=e[0];return e=zv.bind(null,e[1]),Xr().memoizedState=e,[r,e]},useMutableSource:function(){},useSyncExternalStore:function(e,r,a){var h=$t,y=Xr();if(Zt){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),gn===null)throw Error(i(349));(Ho&30)!==0||Rh(h,r,a)}y.memoizedState=a;var E={value:a,getSnapshot:r};return y.queue=E,jh(Fh.bind(null,h,E,e),[e]),h.flags|=2048,Ga(9,Nh.bind(null,h,E,a,r),void 0,null),a},useId:function(){var e=Xr(),r=gn.identifierPrefix;if(Zt){var a=_i,h=yi;a=(h&~(1<<32-lt(h)-1)).toString(32)+a,r=":"+r+"R"+a,a=Wa++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=jv++,r=":"+r+"r"+a.toString(32)+":";return e.memoizedState=r},unstable_isNewReconciler:!1},Zv={readContext:yr,useCallback:Zh,useContext:yr,useEffect:pf,useImperativeHandle:Uh,useInsertionEffect:zh,useLayoutEffect:Hh,useMemo:Wh,useReducer:ff,useRef:Oh,useState:function(){return ff(qa)},useDebugValue:mf,useDeferredValue:function(e){var r=_r();return qh(r,cn.memoizedState,e)},useTransition:function(){var e=ff(qa)[0],r=_r().memoizedState;return[e,r]},useMutableSource:Th,useSyncExternalStore:Dh,useId:Gh,unstable_isNewReconciler:!1},Wv={readContext:yr,useCallback:Zh,useContext:yr,useEffect:pf,useImperativeHandle:Uh,useInsertionEffect:zh,useLayoutEffect:Hh,useMemo:Wh,useReducer:hf,useRef:Oh,useState:function(){return hf(qa)},useDebugValue:mf,useDeferredValue:function(e){var r=_r();return cn===null?r.memoizedState=e:qh(r,cn.memoizedState,e)},useTransition:function(){var e=hf(qa)[0],r=_r().memoizedState;return[e,r]},useMutableSource:Th,useSyncExternalStore:Dh,useId:Gh,unstable_isNewReconciler:!1};function Fr(e,r){if(e&&e.defaultProps){r=V({},r),e=e.defaultProps;for(var a in e)r[a]===void 0&&(r[a]=e[a]);return r}return r}function gf(e,r,a,h){r=e.memoizedState,a=a(h,r),a=a==null?r:V({},r,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var _c={isMounted:function(e){return(e=e._reactInternals)?Vr(e)===e:!1},enqueueSetState:function(e,r,a){e=e._reactInternals;var h=jn(),y=uo(e),E=bi(h,y);E.payload=r,a!=null&&(E.callback=a),r=so(e,E,y),r!==null&&(Ir(r,e,y,h),hc(r,e,y))},enqueueReplaceState:function(e,r,a){e=e._reactInternals;var h=jn(),y=uo(e),E=bi(h,y);E.tag=1,E.payload=r,a!=null&&(E.callback=a),r=so(e,E,y),r!==null&&(Ir(r,e,y,h),hc(r,e,y))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var a=jn(),h=uo(e),y=bi(a,h);y.tag=2,r!=null&&(y.callback=r),r=so(e,y,h),r!==null&&(Ir(r,e,h,a),hc(r,e,h))}};function Yh(e,r,a,h,y,E,I){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(h,E,I):r.prototype&&r.prototype.isPureReactComponent?!Gr(a,h)||!Gr(y,E):!0}function Xh(e,r,a){var h=!1,y=ro,E=r.contextType;return typeof E=="object"&&E!==null?E=yr(E):(y=qn(r)?Mo:Bn.current,h=r.contextTypes,E=(h=h!=null)?Ms(e,y):ro),r=new r(a,E),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=_c,e.stateNode=r,r._reactInternals=e,h&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=y,e.__reactInternalMemoizedMaskedChildContext=E),r}function Jh(e,r,a,h){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,h),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,h),r.state!==e&&_c.enqueueReplaceState(r,r.state,null)}function xf(e,r,a,h){var y=e.stateNode;y.props=a,y.state=e.memoizedState,y.refs={},nf(e);var E=r.contextType;typeof E=="object"&&E!==null?y.context=yr(E):(E=qn(r)?Mo:Bn.current,y.context=Ms(e,E)),y.state=e.memoizedState,E=r.getDerivedStateFromProps,typeof E=="function"&&(gf(e,r,E,a),y.state=e.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(r=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),r!==y.state&&_c.enqueueReplaceState(y,y.state,null),pc(e,a,y,h),y.state=e.memoizedState),typeof y.componentDidMount=="function"&&(e.flags|=4194308)}function Zs(e,r){try{var a="",h=r;do a+=ue(h),h=h.return;while(h);var y=a}catch(E){y=`
Error generating stack: `+E.message+`
`+E.stack}return{value:e,source:r,stack:y,digest:null}}function Af(e,r,a){return{value:e,source:null,stack:a??null,digest:r??null}}function vf(e,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var qv=typeof WeakMap=="function"?WeakMap:Map;function ep(e,r,a){a=bi(-1,a),a.tag=3,a.payload={element:null};var h=r.value;return a.callback=function(){Bc||(Bc=!0,Ff=h),vf(e,r)},a}function tp(e,r,a){a=bi(-1,a),a.tag=3;var h=e.type.getDerivedStateFromError;if(typeof h=="function"){var y=r.value;a.payload=function(){return h(y)},a.callback=function(){vf(e,r)}}var E=e.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(a.callback=function(){vf(e,r),typeof h!="function"&&(lo===null?lo=new Set([this]):lo.add(this));var I=r.stack;this.componentDidCatch(r.value,{componentStack:I!==null?I:""})}),a}function np(e,r,a){var h=e.pingCache;if(h===null){h=e.pingCache=new qv;var y=new Set;h.set(r,y)}else y=h.get(r),y===void 0&&(y=new Set,h.set(r,y));y.has(a)||(y.add(a),e=sy.bind(null,e,r,a),r.then(e,e))}function rp(e){do{var r;if((r=e.tag===13)&&(r=e.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return e;e=e.return}while(e!==null);return null}function ip(e,r,a,h,y){return(e.mode&1)===0?(e===r?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=bi(-1,1),r.tag=2,so(a,r,1))),a.lanes|=1),e):(e.flags|=65536,e.lanes=y,e)}var Gv=F.ReactCurrentOwner,Gn=!1;function On(e,r,a,h){r.child=e===null?Ch(r,null,a,h):zs(r,e.child,a,h)}function op(e,r,a,h,y){a=a.render;var E=r.ref;return Vs(r,y),h=uf(e,r,a,h,E,y),a=df(),e!==null&&!Gn?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~y,Ci(e,r,y)):(Zt&&a&&qd(r),r.flags|=1,On(e,r,h,y),r.child)}function sp(e,r,a,h,y){if(e===null){var E=a.type;return typeof E=="function"&&!Hf(E)&&E.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=E,ap(e,r,E,h,y)):(e=Fc(a.type,null,h,r,r.mode,y),e.ref=r.ref,e.return=r,r.child=e)}if(E=e.child,(e.lanes&y)===0){var I=E.memoizedProps;if(a=a.compare,a=a!==null?a:Gr,a(I,h)&&e.ref===r.ref)return Ci(e,r,y)}return r.flags|=1,e=ho(E,h),e.ref=r.ref,e.return=r,r.child=e}function ap(e,r,a,h,y){if(e!==null){var E=e.memoizedProps;if(Gr(E,h)&&e.ref===r.ref)if(Gn=!1,r.pendingProps=h=E,(e.lanes&y)!==0)(e.flags&131072)!==0&&(Gn=!0);else return r.lanes=e.lanes,Ci(e,r,y)}return yf(e,r,a,h,y)}function lp(e,r,a){var h=r.pendingProps,y=h.children,E=e!==null?e.memoizedState:null;if(h.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mt(qs,cr),cr|=a;else{if((a&1073741824)===0)return e=E!==null?E.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:e,cachePool:null,transitions:null},r.updateQueue=null,Mt(qs,cr),cr|=e,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=E!==null?E.baseLanes:a,Mt(qs,cr),cr|=h}else E!==null?(h=E.baseLanes|a,r.memoizedState=null):h=a,Mt(qs,cr),cr|=h;return On(e,r,y,a),r.child}function cp(e,r){var a=r.ref;(e===null&&a!==null||e!==null&&e.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function yf(e,r,a,h,y){var E=qn(a)?Mo:Bn.current;return E=Ms(r,E),Vs(r,y),a=uf(e,r,a,h,E,y),h=df(),e!==null&&!Gn?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~y,Ci(e,r,y)):(Zt&&h&&qd(r),r.flags|=1,On(e,r,a,y),r.child)}function up(e,r,a,h,y){if(qn(a)){var E=!0;oc(r)}else E=!1;if(Vs(r,y),r.stateNode===null)bc(e,r),Xh(r,a,h),xf(r,a,h,y),h=!0;else if(e===null){var I=r.stateNode,Q=r.memoizedProps;I.props=Q;var J=I.context,he=a.contextType;typeof he=="object"&&he!==null?he=yr(he):(he=qn(a)?Mo:Bn.current,he=Ms(r,he));var Ce=a.getDerivedStateFromProps,Be=typeof Ce=="function"||typeof I.getSnapshotBeforeUpdate=="function";Be||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(Q!==h||J!==he)&&Jh(r,I,h,he),oo=!1;var be=r.memoizedState;I.state=be,pc(r,h,I,y),J=r.memoizedState,Q!==h||be!==J||Wn.current||oo?(typeof Ce=="function"&&(gf(r,a,Ce,h),J=r.memoizedState),(Q=oo||Yh(r,a,Q,h,be,J,he))?(Be||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(r.flags|=4194308)):(typeof I.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=h,r.memoizedState=J),I.props=h,I.state=J,I.context=he,h=Q):(typeof I.componentDidMount=="function"&&(r.flags|=4194308),h=!1)}else{I=r.stateNode,kh(e,r),Q=r.memoizedProps,he=r.type===r.elementType?Q:Fr(r.type,Q),I.props=he,Be=r.pendingProps,be=I.context,J=a.contextType,typeof J=="object"&&J!==null?J=yr(J):(J=qn(a)?Mo:Bn.current,J=Ms(r,J));var Me=a.getDerivedStateFromProps;(Ce=typeof Me=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(Q!==Be||be!==J)&&Jh(r,I,h,J),oo=!1,be=r.memoizedState,I.state=be,pc(r,h,I,y);var Oe=r.memoizedState;Q!==Be||be!==Oe||Wn.current||oo?(typeof Me=="function"&&(gf(r,a,Me,h),Oe=r.memoizedState),(he=oo||Yh(r,a,he,h,be,Oe,J)||!1)?(Ce||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(h,Oe,J),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(h,Oe,J)),typeof I.componentDidUpdate=="function"&&(r.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof I.componentDidUpdate!="function"||Q===e.memoizedProps&&be===e.memoizedState||(r.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||Q===e.memoizedProps&&be===e.memoizedState||(r.flags|=1024),r.memoizedProps=h,r.memoizedState=Oe),I.props=h,I.state=Oe,I.context=J,h=he):(typeof I.componentDidUpdate!="function"||Q===e.memoizedProps&&be===e.memoizedState||(r.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||Q===e.memoizedProps&&be===e.memoizedState||(r.flags|=1024),h=!1)}return _f(e,r,a,h,E,y)}function _f(e,r,a,h,y,E){cp(e,r);var I=(r.flags&128)!==0;if(!h&&!I)return y&&mh(r,a,!1),Ci(e,r,E);h=r.stateNode,Gv.current=r;var Q=I&&typeof a.getDerivedStateFromError!="function"?null:h.render();return r.flags|=1,e!==null&&I?(r.child=zs(r,e.child,null,E),r.child=zs(r,null,Q,E)):On(e,r,Q,E),r.memoizedState=h.state,y&&mh(r,a,!0),r.child}function dp(e){var r=e.stateNode;r.pendingContext?hh(e,r.pendingContext,r.pendingContext!==r.context):r.context&&hh(e,r.context,!1),rf(e,r.containerInfo)}function fp(e,r,a,h,y){return js(),Qd(y),r.flags|=256,On(e,r,a,h),r.child}var wf={dehydrated:null,treeContext:null,retryLane:0};function bf(e){return{baseLanes:e,cachePool:null,transitions:null}}function hp(e,r,a){var h=r.pendingProps,y=Gt.current,E=!1,I=(r.flags&128)!==0,Q;if((Q=I)||(Q=e!==null&&e.memoizedState===null?!1:(y&2)!==0),Q?(E=!0,r.flags&=-129):(e===null||e.memoizedState!==null)&&(y|=1),Mt(Gt,y&1),e===null)return Kd(r),e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((r.mode&1)===0?r.lanes=1:e.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(I=h.children,e=h.fallback,E?(h=r.mode,E=r.child,I={mode:"hidden",children:I},(h&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=I):E=Lc(I,h,0,null),e=qo(e,h,a,null),E.return=r,e.return=r,E.sibling=e,r.child=E,r.child.memoizedState=bf(a),r.memoizedState=wf,e):Cf(r,I));if(y=e.memoizedState,y!==null&&(Q=y.dehydrated,Q!==null))return $v(e,r,I,h,Q,y,a);if(E){E=h.fallback,I=r.mode,y=e.child,Q=y.sibling;var J={mode:"hidden",children:h.children};return(I&1)===0&&r.child!==y?(h=r.child,h.childLanes=0,h.pendingProps=J,r.deletions=null):(h=ho(y,J),h.subtreeFlags=y.subtreeFlags&14680064),Q!==null?E=ho(Q,E):(E=qo(E,I,a,null),E.flags|=2),E.return=r,h.return=r,h.sibling=E,r.child=h,h=E,E=r.child,I=e.child.memoizedState,I=I===null?bf(a):{baseLanes:I.baseLanes|a,cachePool:null,transitions:I.transitions},E.memoizedState=I,E.childLanes=e.childLanes&~a,r.memoizedState=wf,h}return E=e.child,e=E.sibling,h=ho(E,{mode:"visible",children:h.children}),(r.mode&1)===0&&(h.lanes=a),h.return=r,h.sibling=null,e!==null&&(a=r.deletions,a===null?(r.deletions=[e],r.flags|=16):a.push(e)),r.child=h,r.memoizedState=null,h}function Cf(e,r){return r=Lc({mode:"visible",children:r},e.mode,0,null),r.return=e,e.child=r}function wc(e,r,a,h){return h!==null&&Qd(h),zs(r,e.child,null,a),e=Cf(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function $v(e,r,a,h,y,E,I){if(a)return r.flags&256?(r.flags&=-257,h=Af(Error(i(422))),wc(e,r,I,h)):r.memoizedState!==null?(r.child=e.child,r.flags|=128,null):(E=h.fallback,y=r.mode,h=Lc({mode:"visible",children:h.children},y,0,null),E=qo(E,y,I,null),E.flags|=2,h.return=r,E.return=r,h.sibling=E,r.child=h,(r.mode&1)!==0&&zs(r,e.child,null,I),r.child.memoizedState=bf(I),r.memoizedState=wf,E);if((r.mode&1)===0)return wc(e,r,I,null);if(y.data==="$!"){if(h=y.nextSibling&&y.nextSibling.dataset,h)var Q=h.dgst;return h=Q,E=Error(i(419)),h=Af(E,h,void 0),wc(e,r,I,h)}if(Q=(I&e.childLanes)!==0,Gn||Q){if(h=gn,h!==null){switch(I&-I){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(h.suspendedLanes|I))!==0?0:y,y!==0&&y!==E.retryLane&&(E.retryLane=y,wi(e,y),Ir(h,e,y,-1))}return zf(),h=Af(Error(i(421))),wc(e,r,I,h)}return y.data==="$?"?(r.flags|=128,r.child=e.child,r=ay.bind(null,e),y._reactRetry=r,null):(e=E.treeContext,lr=Qr(y.nextSibling),ar=r,Zt=!0,Nr=null,e!==null&&(Ar[vr++]=yi,Ar[vr++]=_i,Ar[vr++]=Io,yi=e.id,_i=e.overflow,Io=r),r=Cf(r,h.children),r.flags|=4096,r)}function pp(e,r,a){e.lanes|=r;var h=e.alternate;h!==null&&(h.lanes|=r),ef(e.return,r,a)}function Ef(e,r,a,h,y){var E=e.memoizedState;E===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:y}:(E.isBackwards=r,E.rendering=null,E.renderingStartTime=0,E.last=h,E.tail=a,E.tailMode=y)}function mp(e,r,a){var h=r.pendingProps,y=h.revealOrder,E=h.tail;if(On(e,r,h.children,a),h=Gt.current,(h&2)!==0)h=h&1|2,r.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pp(e,a,r);else if(e.tag===19)pp(e,a,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}h&=1}if(Mt(Gt,h),(r.mode&1)===0)r.memoizedState=null;else switch(y){case"forwards":for(a=r.child,y=null;a!==null;)e=a.alternate,e!==null&&mc(e)===null&&(y=a),a=a.sibling;a=y,a===null?(y=r.child,r.child=null):(y=a.sibling,a.sibling=null),Ef(r,!1,y,a,E);break;case"backwards":for(a=null,y=r.child,r.child=null;y!==null;){if(e=y.alternate,e!==null&&mc(e)===null){r.child=y;break}e=y.sibling,y.sibling=a,a=y,y=e}Ef(r,!0,a,null,E);break;case"together":Ef(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function bc(e,r){(r.mode&1)===0&&e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2)}function Ci(e,r,a){if(e!==null&&(r.dependencies=e.dependencies),Vo|=r.lanes,(a&r.childLanes)===0)return null;if(e!==null&&r.child!==e.child)throw Error(i(153));if(r.child!==null){for(e=r.child,a=ho(e,e.pendingProps),r.child=a,a.return=r;e.sibling!==null;)e=e.sibling,a=a.sibling=ho(e,e.pendingProps),a.return=r;a.sibling=null}return r.child}function Kv(e,r,a){switch(r.tag){case 3:dp(r),js();break;case 5:Ph(r);break;case 1:qn(r.type)&&oc(r);break;case 4:rf(r,r.stateNode.containerInfo);break;case 10:var h=r.type._context,y=r.memoizedProps.value;Mt(dc,h._currentValue),h._currentValue=y;break;case 13:if(h=r.memoizedState,h!==null)return h.dehydrated!==null?(Mt(Gt,Gt.current&1),r.flags|=128,null):(a&r.child.childLanes)!==0?hp(e,r,a):(Mt(Gt,Gt.current&1),e=Ci(e,r,a),e!==null?e.sibling:null);Mt(Gt,Gt.current&1);break;case 19:if(h=(a&r.childLanes)!==0,(e.flags&128)!==0){if(h)return mp(e,r,a);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Mt(Gt,Gt.current),h)break;return null;case 22:case 23:return r.lanes=0,lp(e,r,a)}return Ci(e,r,a)}var gp,kf,xp,Ap;gp=function(e,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},kf=function(){},xp=function(e,r,a,h){var y=e.memoizedProps;if(y!==h){e=r.stateNode,zo(Yr.current);var E=null;switch(a){case"input":y=Ve(e,y),h=Ve(e,h),E=[];break;case"select":y=V({},y,{value:void 0}),h=V({},h,{value:void 0}),E=[];break;case"textarea":y=Le(e,y),h=Le(e,h),E=[];break;default:typeof y.onClick!="function"&&typeof h.onClick=="function"&&(e.onclick=we)}Se(a,h);var I;a=null;for(he in y)if(!h.hasOwnProperty(he)&&y.hasOwnProperty(he)&&y[he]!=null)if(he==="style"){var Q=y[he];for(I in Q)Q.hasOwnProperty(I)&&(a||(a={}),a[I]="")}else he!=="dangerouslySetInnerHTML"&&he!=="children"&&he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&he!=="autoFocus"&&(c.hasOwnProperty(he)?E||(E=[]):(E=E||[]).push(he,null));for(he in h){var J=h[he];if(Q=y!=null?y[he]:void 0,h.hasOwnProperty(he)&&J!==Q&&(J!=null||Q!=null))if(he==="style")if(Q){for(I in Q)!Q.hasOwnProperty(I)||J&&J.hasOwnProperty(I)||(a||(a={}),a[I]="");for(I in J)J.hasOwnProperty(I)&&Q[I]!==J[I]&&(a||(a={}),a[I]=J[I])}else a||(E||(E=[]),E.push(he,a)),a=J;else he==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,Q=Q?Q.__html:void 0,J!=null&&Q!==J&&(E=E||[]).push(he,J)):he==="children"?typeof J!="string"&&typeof J!="number"||(E=E||[]).push(he,""+J):he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&(c.hasOwnProperty(he)?(J!=null&&he==="onScroll"&&Rt("scroll",e),E||Q===J||(E=[])):(E=E||[]).push(he,J))}a&&(E=E||[]).push("style",a);var he=E;(r.updateQueue=he)&&(r.flags|=4)}},Ap=function(e,r,a,h){a!==h&&(r.flags|=4)};function $a(e,r){if(!Zt)switch(e.tailMode){case"hidden":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:h.sibling=null}}function Tn(e){var r=e.alternate!==null&&e.alternate.child===e.child,a=0,h=0;if(r)for(var y=e.child;y!==null;)a|=y.lanes|y.childLanes,h|=y.subtreeFlags&14680064,h|=y.flags&14680064,y.return=e,y=y.sibling;else for(y=e.child;y!==null;)a|=y.lanes|y.childLanes,h|=y.subtreeFlags,h|=y.flags,y.return=e,y=y.sibling;return e.subtreeFlags|=h,e.childLanes=a,r}function Qv(e,r,a){var h=r.pendingProps;switch(Gd(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tn(r),null;case 1:return qn(r.type)&&ic(),Tn(r),null;case 3:return h=r.stateNode,Us(),zt(Wn),zt(Bn),af(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(e===null||e.child===null)&&(cc(r)?r.flags|=4:e===null||e.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Nr!==null&&(If(Nr),Nr=null))),kf(e,r),Tn(r),null;case 5:of(r);var y=zo(Ua.current);if(a=r.type,e!==null&&r.stateNode!=null)xp(e,r,a,h,y),e.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!h){if(r.stateNode===null)throw Error(i(166));return Tn(r),null}if(e=zo(Yr.current),cc(r)){h=r.stateNode,a=r.type;var E=r.memoizedProps;switch(h[xr]=r,h[eo]=E,e=(r.mode&1)!==0,a){case"dialog":Rt("cancel",h),Rt("close",h);break;case"iframe":case"object":case"embed":Rt("load",h);break;case"video":case"audio":for(y=0;y<Yi.length;y++)Rt(Yi[y],h);break;case"source":Rt("error",h);break;case"img":case"image":case"link":Rt("error",h),Rt("load",h);break;case"details":Rt("toggle",h);break;case"input":st(h,E),Rt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!E.multiple},Rt("invalid",h);break;case"textarea":wt(h,E),Rt("invalid",h)}Se(a,E),y=null;for(var I in E)if(E.hasOwnProperty(I)){var Q=E[I];I==="children"?typeof Q=="string"?h.textContent!==Q&&(E.suppressHydrationWarning!==!0&&fe(h.textContent,Q,e),y=["children",Q]):typeof Q=="number"&&h.textContent!==""+Q&&(E.suppressHydrationWarning!==!0&&fe(h.textContent,Q,e),y=["children",""+Q]):c.hasOwnProperty(I)&&Q!=null&&I==="onScroll"&&Rt("scroll",h)}switch(a){case"input":We(h),at(h,E,!0);break;case"textarea":We(h),Nn(h);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(h.onclick=we)}h=y,r.updateQueue=h,h!==null&&(r.flags|=4)}else{I=y.nodeType===9?y:y.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ot(a)),e==="http://www.w3.org/1999/xhtml"?a==="script"?(e=I.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof h.is=="string"?e=I.createElement(a,{is:h.is}):(e=I.createElement(a),a==="select"&&(I=e,h.multiple?I.multiple=!0:h.size&&(I.size=h.size))):e=I.createElementNS(e,a),e[xr]=r,e[eo]=h,gp(e,r,!1,!1),r.stateNode=e;e:{switch(I=Ne(a,h),a){case"dialog":Rt("cancel",e),Rt("close",e),y=h;break;case"iframe":case"object":case"embed":Rt("load",e),y=h;break;case"video":case"audio":for(y=0;y<Yi.length;y++)Rt(Yi[y],e);y=h;break;case"source":Rt("error",e),y=h;break;case"img":case"image":case"link":Rt("error",e),Rt("load",e),y=h;break;case"details":Rt("toggle",e),y=h;break;case"input":st(e,h),y=Ve(e,h),Rt("invalid",e);break;case"option":y=h;break;case"select":e._wrapperState={wasMultiple:!!h.multiple},y=V({},h,{value:void 0}),Rt("invalid",e);break;case"textarea":wt(e,h),y=Le(e,h),Rt("invalid",e);break;default:y=h}Se(a,y),Q=y;for(E in Q)if(Q.hasOwnProperty(E)){var J=Q[E];E==="style"?pn(e,J):E==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,J!=null&&yn(e,J)):E==="children"?typeof J=="string"?(a!=="textarea"||J!=="")&&Ht(e,J):typeof J=="number"&&Ht(e,""+J):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(c.hasOwnProperty(E)?J!=null&&E==="onScroll"&&Rt("scroll",e):J!=null&&N(e,E,J,I))}switch(a){case"input":We(e),at(e,h,!1);break;case"textarea":We(e),Nn(e);break;case"option":h.value!=null&&e.setAttribute("value",""+me(h.value));break;case"select":e.multiple=!!h.multiple,E=h.value,E!=null?Ye(e,!!h.multiple,E,!1):h.defaultValue!=null&&Ye(e,!!h.multiple,h.defaultValue,!0);break;default:typeof y.onClick=="function"&&(e.onclick=we)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Tn(r),null;case 6:if(e&&r.stateNode!=null)Ap(e,r,e.memoizedProps,h);else{if(typeof h!="string"&&r.stateNode===null)throw Error(i(166));if(a=zo(Ua.current),zo(Yr.current),cc(r)){if(h=r.stateNode,a=r.memoizedProps,h[xr]=r,(E=h.nodeValue!==a)&&(e=ar,e!==null))switch(e.tag){case 3:fe(h.nodeValue,a,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&fe(h.nodeValue,a,(e.mode&1)!==0)}E&&(r.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[xr]=r,r.stateNode=h}return Tn(r),null;case 13:if(zt(Gt),h=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Zt&&lr!==null&&(r.mode&1)!==0&&(r.flags&128)===0)_h(),js(),r.flags|=98560,E=!1;else if(E=cc(r),h!==null&&h.dehydrated!==null){if(e===null){if(!E)throw Error(i(318));if(E=r.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(i(317));E[xr]=r}else js(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Tn(r),E=!1}else Nr!==null&&(If(Nr),Nr=null),E=!0;if(!E)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=a,r):(h=h!==null,h!==(e!==null&&e.memoizedState!==null)&&h&&(r.child.flags|=8192,(r.mode&1)!==0&&(e===null||(Gt.current&1)!==0?un===0&&(un=3):zf())),r.updateQueue!==null&&(r.flags|=4),Tn(r),null);case 4:return Us(),kf(e,r),e===null&&Xi(r.stateNode.containerInfo),Tn(r),null;case 10:return Jd(r.type._context),Tn(r),null;case 17:return qn(r.type)&&ic(),Tn(r),null;case 19:if(zt(Gt),E=r.memoizedState,E===null)return Tn(r),null;if(h=(r.flags&128)!==0,I=E.rendering,I===null)if(h)$a(E,!1);else{if(un!==0||e!==null&&(e.flags&128)!==0)for(e=r.child;e!==null;){if(I=mc(e),I!==null){for(r.flags|=128,$a(E,!1),h=I.updateQueue,h!==null&&(r.updateQueue=h,r.flags|=4),r.subtreeFlags=0,h=a,a=r.child;a!==null;)E=a,e=h,E.flags&=14680066,I=E.alternate,I===null?(E.childLanes=0,E.lanes=e,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=I.childLanes,E.lanes=I.lanes,E.child=I.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=I.memoizedProps,E.memoizedState=I.memoizedState,E.updateQueue=I.updateQueue,E.type=I.type,e=I.dependencies,E.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return Mt(Gt,Gt.current&1|2),r.child}e=e.sibling}E.tail!==null&&Wt()>Gs&&(r.flags|=128,h=!0,$a(E,!1),r.lanes=4194304)}else{if(!h)if(e=mc(I),e!==null){if(r.flags|=128,h=!0,a=e.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),$a(E,!0),E.tail===null&&E.tailMode==="hidden"&&!I.alternate&&!Zt)return Tn(r),null}else 2*Wt()-E.renderingStartTime>Gs&&a!==1073741824&&(r.flags|=128,h=!0,$a(E,!1),r.lanes=4194304);E.isBackwards?(I.sibling=r.child,r.child=I):(a=E.last,a!==null?a.sibling=I:r.child=I,E.last=I)}return E.tail!==null?(r=E.tail,E.rendering=r,E.tail=r.sibling,E.renderingStartTime=Wt(),r.sibling=null,a=Gt.current,Mt(Gt,h?a&1|2:a&1),r):(Tn(r),null);case 22:case 23:return jf(),h=r.memoizedState!==null,e!==null&&e.memoizedState!==null!==h&&(r.flags|=8192),h&&(r.mode&1)!==0?(cr&1073741824)!==0&&(Tn(r),r.subtreeFlags&6&&(r.flags|=8192)):Tn(r),null;case 24:return null;case 25:return null}throw Error(i(156,r.tag))}function Yv(e,r){switch(Gd(r),r.tag){case 1:return qn(r.type)&&ic(),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return Us(),zt(Wn),zt(Bn),af(),e=r.flags,(e&65536)!==0&&(e&128)===0?(r.flags=e&-65537|128,r):null;case 5:return of(r),null;case 13:if(zt(Gt),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(i(340));js()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return zt(Gt),null;case 4:return Us(),null;case 10:return Jd(r.type._context),null;case 22:case 23:return jf(),null;case 24:return null;default:return null}}var Cc=!1,Dn=!1,Xv=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Ws(e,r){var a=e.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){Yt(e,r,h)}else a.current=null}function Sf(e,r,a){try{a()}catch(h){Yt(e,r,h)}}var vp=!1;function Jv(e,r){if(Re=Bo,e=Da(),Ra(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var y=h.anchorOffset,E=h.focusNode;h=h.focusOffset;try{a.nodeType,E.nodeType}catch{a=null;break e}var I=0,Q=-1,J=-1,he=0,Ce=0,Be=e,be=null;t:for(;;){for(var Me;Be!==a||y!==0&&Be.nodeType!==3||(Q=I+y),Be!==E||h!==0&&Be.nodeType!==3||(J=I+h),Be.nodeType===3&&(I+=Be.nodeValue.length),(Me=Be.firstChild)!==null;)be=Be,Be=Me;for(;;){if(Be===e)break t;if(be===a&&++he===y&&(Q=I),be===E&&++Ce===h&&(J=I),(Me=Be.nextSibling)!==null)break;Be=be,be=Be.parentNode}Be=Me}a=Q===-1||J===-1?null:{start:Q,end:J}}else a=null}a=a||{start:0,end:0}}else a=null;for(Qe={focusedElem:e,selectionRange:a},Bo=!1,Ie=r;Ie!==null;)if(r=Ie,e=r.child,(r.subtreeFlags&1028)!==0&&e!==null)e.return=r,Ie=e;else for(;Ie!==null;){r=Ie;try{var Oe=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(Oe!==null){var Ze=Oe.memoizedProps,tn=Oe.memoizedState,ce=r.stateNode,oe=ce.getSnapshotBeforeUpdate(r.elementType===r.type?Ze:Fr(r.type,Ze),tn);ce.__reactInternalSnapshotBeforeUpdate=oe}break;case 3:var de=r.stateNode.containerInfo;de.nodeType===1?de.textContent="":de.nodeType===9&&de.documentElement&&de.removeChild(de.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(De){Yt(r,r.return,De)}if(e=r.sibling,e!==null){e.return=r.return,Ie=e;break}Ie=r.return}return Oe=vp,vp=!1,Oe}function Ka(e,r,a){var h=r.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var y=h=h.next;do{if((y.tag&e)===e){var E=y.destroy;y.destroy=void 0,E!==void 0&&Sf(r,a,E)}y=y.next}while(y!==h)}}function Ec(e,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var h=a.create;a.destroy=h()}a=a.next}while(a!==r)}}function Bf(e){var r=e.ref;if(r!==null){var a=e.stateNode;switch(e.tag){case 5:e=a;break;default:e=a}typeof r=="function"?r(e):r.current=e}}function yp(e){var r=e.alternate;r!==null&&(e.alternate=null,yp(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&(delete r[xr],delete r[eo],delete r[to],delete r[Vd],delete r[Ud])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function _p(e){return e.tag===5||e.tag===3||e.tag===4}function wp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||_p(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Pf(e,r,a){var h=e.tag;if(h===5||h===6)e=e.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(e,r):a.insertBefore(e,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(e,a)):(r=a,r.appendChild(e)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=we));else if(h!==4&&(e=e.child,e!==null))for(Pf(e,r,a),e=e.sibling;e!==null;)Pf(e,r,a),e=e.sibling}function Tf(e,r,a){var h=e.tag;if(h===5||h===6)e=e.stateNode,r?a.insertBefore(e,r):a.appendChild(e);else if(h!==4&&(e=e.child,e!==null))for(Tf(e,r,a),e=e.sibling;e!==null;)Tf(e,r,a),e=e.sibling}var _n=null,Lr=!1;function ao(e,r,a){for(a=a.child;a!==null;)bp(e,r,a),a=a.sibling}function bp(e,r,a){if(Jn&&typeof Jn.onCommitFiberUnmount=="function")try{Jn.onCommitFiberUnmount(wo,a)}catch{}switch(a.tag){case 5:Dn||Ws(a,r);case 6:var h=_n,y=Lr;_n=null,ao(e,r,a),_n=h,Lr=y,_n!==null&&(Lr?(e=_n,a=a.stateNode,e.nodeType===8?e.parentNode.removeChild(a):e.removeChild(a)):_n.removeChild(a.stateNode));break;case 18:_n!==null&&(Lr?(e=_n,a=a.stateNode,e.nodeType===8?ja(e.parentNode,a):e.nodeType===1&&ja(e,a),nr(e)):ja(_n,a.stateNode));break;case 4:h=_n,y=Lr,_n=a.stateNode.containerInfo,Lr=!0,ao(e,r,a),_n=h,Lr=y;break;case 0:case 11:case 14:case 15:if(!Dn&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){y=h=h.next;do{var E=y,I=E.destroy;E=E.tag,I!==void 0&&((E&2)!==0||(E&4)!==0)&&Sf(a,r,I),y=y.next}while(y!==h)}ao(e,r,a);break;case 1:if(!Dn&&(Ws(a,r),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(Q){Yt(a,r,Q)}ao(e,r,a);break;case 21:ao(e,r,a);break;case 22:a.mode&1?(Dn=(h=Dn)||a.memoizedState!==null,ao(e,r,a),Dn=h):ao(e,r,a);break;default:ao(e,r,a)}}function Cp(e){var r=e.updateQueue;if(r!==null){e.updateQueue=null;var a=e.stateNode;a===null&&(a=e.stateNode=new Xv),r.forEach(function(h){var y=ly.bind(null,e,h);a.has(h)||(a.add(h),h.then(y,y))})}}function Mr(e,r){var a=r.deletions;if(a!==null)for(var h=0;h<a.length;h++){var y=a[h];try{var E=e,I=r,Q=I;e:for(;Q!==null;){switch(Q.tag){case 5:_n=Q.stateNode,Lr=!1;break e;case 3:_n=Q.stateNode.containerInfo,Lr=!0;break e;case 4:_n=Q.stateNode.containerInfo,Lr=!0;break e}Q=Q.return}if(_n===null)throw Error(i(160));bp(E,I,y),_n=null,Lr=!1;var J=y.alternate;J!==null&&(J.return=null),y.return=null}catch(he){Yt(y,r,he)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Ep(r,e),r=r.sibling}function Ep(e,r){var a=e.alternate,h=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Mr(r,e),Jr(e),h&4){try{Ka(3,e,e.return),Ec(3,e)}catch(Ze){Yt(e,e.return,Ze)}try{Ka(5,e,e.return)}catch(Ze){Yt(e,e.return,Ze)}}break;case 1:Mr(r,e),Jr(e),h&512&&a!==null&&Ws(a,a.return);break;case 5:if(Mr(r,e),Jr(e),h&512&&a!==null&&Ws(a,a.return),e.flags&32){var y=e.stateNode;try{Ht(y,"")}catch(Ze){Yt(e,e.return,Ze)}}if(h&4&&(y=e.stateNode,y!=null)){var E=e.memoizedProps,I=a!==null?a.memoizedProps:E,Q=e.type,J=e.updateQueue;if(e.updateQueue=null,J!==null)try{Q==="input"&&E.type==="radio"&&E.name!=null&&mt(y,E),Ne(Q,I);var he=Ne(Q,E);for(I=0;I<J.length;I+=2){var Ce=J[I],Be=J[I+1];Ce==="style"?pn(y,Be):Ce==="dangerouslySetInnerHTML"?yn(y,Be):Ce==="children"?Ht(y,Be):N(y,Ce,Be,he)}switch(Q){case"input":et(y,E);break;case"textarea":It(y,E);break;case"select":var be=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!E.multiple;var Me=E.value;Me!=null?Ye(y,!!E.multiple,Me,!1):be!==!!E.multiple&&(E.defaultValue!=null?Ye(y,!!E.multiple,E.defaultValue,!0):Ye(y,!!E.multiple,E.multiple?[]:"",!1))}y[eo]=E}catch(Ze){Yt(e,e.return,Ze)}}break;case 6:if(Mr(r,e),Jr(e),h&4){if(e.stateNode===null)throw Error(i(162));y=e.stateNode,E=e.memoizedProps;try{y.nodeValue=E}catch(Ze){Yt(e,e.return,Ze)}}break;case 3:if(Mr(r,e),Jr(e),h&4&&a!==null&&a.memoizedState.isDehydrated)try{nr(r.containerInfo)}catch(Ze){Yt(e,e.return,Ze)}break;case 4:Mr(r,e),Jr(e);break;case 13:Mr(r,e),Jr(e),y=e.child,y.flags&8192&&(E=y.memoizedState!==null,y.stateNode.isHidden=E,!E||y.alternate!==null&&y.alternate.memoizedState!==null||(Nf=Wt())),h&4&&Cp(e);break;case 22:if(Ce=a!==null&&a.memoizedState!==null,e.mode&1?(Dn=(he=Dn)||Ce,Mr(r,e),Dn=he):Mr(r,e),Jr(e),h&8192){if(he=e.memoizedState!==null,(e.stateNode.isHidden=he)&&!Ce&&(e.mode&1)!==0)for(Ie=e,Ce=e.child;Ce!==null;){for(Be=Ie=Ce;Ie!==null;){switch(be=Ie,Me=be.child,be.tag){case 0:case 11:case 14:case 15:Ka(4,be,be.return);break;case 1:Ws(be,be.return);var Oe=be.stateNode;if(typeof Oe.componentWillUnmount=="function"){h=be,a=be.return;try{r=h,Oe.props=r.memoizedProps,Oe.state=r.memoizedState,Oe.componentWillUnmount()}catch(Ze){Yt(h,a,Ze)}}break;case 5:Ws(be,be.return);break;case 22:if(be.memoizedState!==null){Bp(Be);continue}}Me!==null?(Me.return=be,Ie=Me):Bp(Be)}Ce=Ce.sibling}e:for(Ce=null,Be=e;;){if(Be.tag===5){if(Ce===null){Ce=Be;try{y=Be.stateNode,he?(E=y.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(Q=Be.stateNode,J=Be.memoizedProps.style,I=J!=null&&J.hasOwnProperty("display")?J.display:null,Q.style.display=Fn("display",I))}catch(Ze){Yt(e,e.return,Ze)}}}else if(Be.tag===6){if(Ce===null)try{Be.stateNode.nodeValue=he?"":Be.memoizedProps}catch(Ze){Yt(e,e.return,Ze)}}else if((Be.tag!==22&&Be.tag!==23||Be.memoizedState===null||Be===e)&&Be.child!==null){Be.child.return=Be,Be=Be.child;continue}if(Be===e)break e;for(;Be.sibling===null;){if(Be.return===null||Be.return===e)break e;Ce===Be&&(Ce=null),Be=Be.return}Ce===Be&&(Ce=null),Be.sibling.return=Be.return,Be=Be.sibling}}break;case 19:Mr(r,e),Jr(e),h&4&&Cp(e);break;case 21:break;default:Mr(r,e),Jr(e)}}function Jr(e){var r=e.flags;if(r&2){try{e:{for(var a=e.return;a!==null;){if(_p(a)){var h=a;break e}a=a.return}throw Error(i(160))}switch(h.tag){case 5:var y=h.stateNode;h.flags&32&&(Ht(y,""),h.flags&=-33);var E=wp(e);Tf(e,E,y);break;case 3:case 4:var I=h.stateNode.containerInfo,Q=wp(e);Pf(e,Q,I);break;default:throw Error(i(161))}}catch(J){Yt(e,e.return,J)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function ey(e,r,a){Ie=e,kp(e)}function kp(e,r,a){for(var h=(e.mode&1)!==0;Ie!==null;){var y=Ie,E=y.child;if(y.tag===22&&h){var I=y.memoizedState!==null||Cc;if(!I){var Q=y.alternate,J=Q!==null&&Q.memoizedState!==null||Dn;Q=Cc;var he=Dn;if(Cc=I,(Dn=J)&&!he)for(Ie=y;Ie!==null;)I=Ie,J=I.child,I.tag===22&&I.memoizedState!==null?Pp(y):J!==null?(J.return=I,Ie=J):Pp(y);for(;E!==null;)Ie=E,kp(E),E=E.sibling;Ie=y,Cc=Q,Dn=he}Sp(e)}else(y.subtreeFlags&8772)!==0&&E!==null?(E.return=y,Ie=E):Sp(e)}}function Sp(e){for(;Ie!==null;){var r=Ie;if((r.flags&8772)!==0){var a=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Dn||Ec(5,r);break;case 1:var h=r.stateNode;if(r.flags&4&&!Dn)if(a===null)h.componentDidMount();else{var y=r.elementType===r.type?a.memoizedProps:Fr(r.type,a.memoizedProps);h.componentDidUpdate(y,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var E=r.updateQueue;E!==null&&Bh(r,E,h);break;case 3:var I=r.updateQueue;if(I!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}Bh(r,I,a)}break;case 5:var Q=r.stateNode;if(a===null&&r.flags&4){a=Q;var J=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":J.autoFocus&&a.focus();break;case"img":J.src&&(a.src=J.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var he=r.alternate;if(he!==null){var Ce=he.memoizedState;if(Ce!==null){var Be=Ce.dehydrated;Be!==null&&nr(Be)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}Dn||r.flags&512&&Bf(r)}catch(be){Yt(r,r.return,be)}}if(r===e){Ie=null;break}if(a=r.sibling,a!==null){a.return=r.return,Ie=a;break}Ie=r.return}}function Bp(e){for(;Ie!==null;){var r=Ie;if(r===e){Ie=null;break}var a=r.sibling;if(a!==null){a.return=r.return,Ie=a;break}Ie=r.return}}function Pp(e){for(;Ie!==null;){var r=Ie;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{Ec(4,r)}catch(J){Yt(r,a,J)}break;case 1:var h=r.stateNode;if(typeof h.componentDidMount=="function"){var y=r.return;try{h.componentDidMount()}catch(J){Yt(r,y,J)}}var E=r.return;try{Bf(r)}catch(J){Yt(r,E,J)}break;case 5:var I=r.return;try{Bf(r)}catch(J){Yt(r,I,J)}}}catch(J){Yt(r,r.return,J)}if(r===e){Ie=null;break}var Q=r.sibling;if(Q!==null){Q.return=r.return,Ie=Q;break}Ie=r.return}}var ty=Math.ceil,kc=F.ReactCurrentDispatcher,Df=F.ReactCurrentOwner,wr=F.ReactCurrentBatchConfig,Ct=0,gn=null,on=null,wn=0,cr=0,qs=no(0),un=0,Qa=null,Vo=0,Sc=0,Rf=0,Ya=null,$n=null,Nf=0,Gs=1/0,Ei=null,Bc=!1,Ff=null,lo=null,Pc=!1,co=null,Tc=0,Xa=0,Lf=null,Dc=-1,Rc=0;function jn(){return(Ct&6)!==0?Wt():Dc!==-1?Dc:Dc=Wt()}function uo(e){return(e.mode&1)===0?1:(Ct&2)!==0&&wn!==0?wn&-wn:Ov.transition!==null?(Rc===0&&(Rc=Ll()),Rc):(e=_t,e!==0||(e=window.event,e=e===void 0?16:At(e.type)),e)}function Ir(e,r,a,h){if(50<Xa)throw Xa=0,Lf=null,Error(i(185));er(e,a,h),((Ct&2)===0||e!==gn)&&(e===gn&&((Ct&2)===0&&(Sc|=a),un===4&&fo(e,wn)),Kn(e,h),a===1&&Ct===0&&(r.mode&1)===0&&(Gs=Wt()+500,sc&&io()))}function Kn(e,r){var a=e.callbackNode;hs(e,r);var h=Lt(e,e===gn?wn:0);if(h===0)a!==null&&ha(a),e.callbackNode=null,e.callbackPriority=0;else if(r=h&-h,e.callbackPriority!==r){if(a!=null&&ha(a),r===1)e.tag===0?Iv(Dp.bind(null,e)):gh(Dp.bind(null,e)),Sn(function(){(Ct&6)===0&&io()}),a=null;else{switch(ji(h)){case 1:a=pa;break;case 4:a=Fl;break;case 16:a=ds;break;case 536870912:a=Li;break;default:a=ds}a=jp(a,Tp.bind(null,e))}e.callbackPriority=r,e.callbackNode=a}}function Tp(e,r){if(Dc=-1,Rc=0,(Ct&6)!==0)throw Error(i(327));var a=e.callbackNode;if($s()&&e.callbackNode!==a)return null;var h=Lt(e,e===gn?wn:0);if(h===0)return null;if((h&30)!==0||(h&e.expiredLanes)!==0||r)r=Nc(e,h);else{r=h;var y=Ct;Ct|=2;var E=Np();(gn!==e||wn!==r)&&(Ei=null,Gs=Wt()+500,Zo(e,r));do try{iy();break}catch(Q){Rp(e,Q)}while(!0);Xd(),kc.current=E,Ct=y,on!==null?r=0:(gn=null,wn=0,r=un)}if(r!==0){if(r===2&&(y=En(e),y!==0&&(h=y,r=Mf(e,y))),r===1)throw a=Qa,Zo(e,0),fo(e,h),Kn(e,Wt()),a;if(r===6)fo(e,h);else{if(y=e.current.alternate,(h&30)===0&&!ny(y)&&(r=Nc(e,h),r===2&&(E=En(e),E!==0&&(h=E,r=Mf(e,E))),r===1))throw a=Qa,Zo(e,0),fo(e,h),Kn(e,Wt()),a;switch(e.finishedWork=y,e.finishedLanes=h,r){case 0:case 1:throw Error(i(345));case 2:Wo(e,$n,Ei);break;case 3:if(fo(e,h),(h&130023424)===h&&(r=Nf+500-Wt(),10<r)){if(Lt(e,0)!==0)break;if(y=e.suspendedLanes,(y&h)!==h){jn(),e.pingedLanes|=e.suspendedLanes&y;break}e.timeoutHandle=ln(Wo.bind(null,e,$n,Ei),r);break}Wo(e,$n,Ei);break;case 4:if(fo(e,h),(h&4194240)===h)break;for(r=e.eventTimes,y=-1;0<h;){var I=31-lt(h);E=1<<I,I=r[I],I>y&&(y=I),h&=~E}if(h=y,h=Wt()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*ty(h/1960))-h,10<h){e.timeoutHandle=ln(Wo.bind(null,e,$n,Ei),h);break}Wo(e,$n,Ei);break;case 5:Wo(e,$n,Ei);break;default:throw Error(i(329))}}}return Kn(e,Wt()),e.callbackNode===a?Tp.bind(null,e):null}function Mf(e,r){var a=Ya;return e.current.memoizedState.isDehydrated&&(Zo(e,r).flags|=256),e=Nc(e,r),e!==2&&(r=$n,$n=a,r!==null&&If(r)),e}function If(e){$n===null?$n=e:$n.push.apply($n,e)}function ny(e){for(var r=e;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var y=a[h],E=y.getSnapshot;y=y.value;try{if(!or(E(),y))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function fo(e,r){for(r&=~Rf,r&=~Sc,e.suspendedLanes|=r,e.pingedLanes&=~r,e=e.expirationTimes;0<r;){var a=31-lt(r),h=1<<a;e[a]=-1,r&=~h}}function Dp(e){if((Ct&6)!==0)throw Error(i(327));$s();var r=Lt(e,0);if((r&1)===0)return Kn(e,Wt()),null;var a=Nc(e,r);if(e.tag!==0&&a===2){var h=En(e);h!==0&&(r=h,a=Mf(e,h))}if(a===1)throw a=Qa,Zo(e,0),fo(e,r),Kn(e,Wt()),a;if(a===6)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=r,Wo(e,$n,Ei),Kn(e,Wt()),null}function Of(e,r){var a=Ct;Ct|=1;try{return e(r)}finally{Ct=a,Ct===0&&(Gs=Wt()+500,sc&&io())}}function Uo(e){co!==null&&co.tag===0&&(Ct&6)===0&&$s();var r=Ct;Ct|=1;var a=wr.transition,h=_t;try{if(wr.transition=null,_t=1,e)return e()}finally{_t=h,wr.transition=a,Ct=r,(Ct&6)===0&&io()}}function jf(){cr=qs.current,zt(qs)}function Zo(e,r){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(a!==-1&&(e.timeoutHandle=-1,rn(a)),on!==null)for(a=on.return;a!==null;){var h=a;switch(Gd(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&ic();break;case 3:Us(),zt(Wn),zt(Bn),af();break;case 5:of(h);break;case 4:Us();break;case 13:zt(Gt);break;case 19:zt(Gt);break;case 10:Jd(h.type._context);break;case 22:case 23:jf()}a=a.return}if(gn=e,on=e=ho(e.current,null),wn=cr=r,un=0,Qa=null,Rf=Sc=Vo=0,$n=Ya=null,jo!==null){for(r=0;r<jo.length;r++)if(a=jo[r],h=a.interleaved,h!==null){a.interleaved=null;var y=h.next,E=a.pending;if(E!==null){var I=E.next;E.next=y,h.next=I}a.pending=h}jo=null}return e}function Rp(e,r){do{var a=on;try{if(Xd(),gc.current=yc,xc){for(var h=$t.memoizedState;h!==null;){var y=h.queue;y!==null&&(y.pending=null),h=h.next}xc=!1}if(Ho=0,mn=cn=$t=null,Za=!1,Wa=0,Df.current=null,a===null||a.return===null){un=1,Qa=r,on=null;break}e:{var E=e,I=a.return,Q=a,J=r;if(r=wn,Q.flags|=32768,J!==null&&typeof J=="object"&&typeof J.then=="function"){var he=J,Ce=Q,Be=Ce.tag;if((Ce.mode&1)===0&&(Be===0||Be===11||Be===15)){var be=Ce.alternate;be?(Ce.updateQueue=be.updateQueue,Ce.memoizedState=be.memoizedState,Ce.lanes=be.lanes):(Ce.updateQueue=null,Ce.memoizedState=null)}var Me=rp(I);if(Me!==null){Me.flags&=-257,ip(Me,I,Q,E,r),Me.mode&1&&np(E,he,r),r=Me,J=he;var Oe=r.updateQueue;if(Oe===null){var Ze=new Set;Ze.add(J),r.updateQueue=Ze}else Oe.add(J);break e}else{if((r&1)===0){np(E,he,r),zf();break e}J=Error(i(426))}}else if(Zt&&Q.mode&1){var tn=rp(I);if(tn!==null){(tn.flags&65536)===0&&(tn.flags|=256),ip(tn,I,Q,E,r),Qd(Zs(J,Q));break e}}E=J=Zs(J,Q),un!==4&&(un=2),Ya===null?Ya=[E]:Ya.push(E),E=I;do{switch(E.tag){case 3:E.flags|=65536,r&=-r,E.lanes|=r;var ce=ep(E,J,r);Sh(E,ce);break e;case 1:Q=J;var oe=E.type,de=E.stateNode;if((E.flags&128)===0&&(typeof oe.getDerivedStateFromError=="function"||de!==null&&typeof de.componentDidCatch=="function"&&(lo===null||!lo.has(de)))){E.flags|=65536,r&=-r,E.lanes|=r;var De=tp(E,Q,r);Sh(E,De);break e}}E=E.return}while(E!==null)}Lp(a)}catch(qe){r=qe,on===a&&a!==null&&(on=a=a.return);continue}break}while(!0)}function Np(){var e=kc.current;return kc.current=yc,e===null?yc:e}function zf(){(un===0||un===3||un===2)&&(un=4),gn===null||(Vo&268435455)===0&&(Sc&268435455)===0||fo(gn,wn)}function Nc(e,r){var a=Ct;Ct|=2;var h=Np();(gn!==e||wn!==r)&&(Ei=null,Zo(e,r));do try{ry();break}catch(y){Rp(e,y)}while(!0);if(Xd(),Ct=a,kc.current=h,on!==null)throw Error(i(261));return gn=null,wn=0,un}function ry(){for(;on!==null;)Fp(on)}function iy(){for(;on!==null&&!kd();)Fp(on)}function Fp(e){var r=Op(e.alternate,e,cr);e.memoizedProps=e.pendingProps,r===null?Lp(e):on=r,Df.current=null}function Lp(e){var r=e;do{var a=r.alternate;if(e=r.return,(r.flags&32768)===0){if(a=Qv(a,r,cr),a!==null){on=a;return}}else{if(a=Yv(a,r),a!==null){a.flags&=32767,on=a;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{un=6,on=null;return}}if(r=r.sibling,r!==null){on=r;return}on=r=e}while(r!==null);un===0&&(un=5)}function Wo(e,r,a){var h=_t,y=wr.transition;try{wr.transition=null,_t=1,oy(e,r,a,h)}finally{wr.transition=y,_t=h}return null}function oy(e,r,a,h){do $s();while(co!==null);if((Ct&6)!==0)throw Error(i(327));a=e.finishedWork;var y=e.finishedLanes;if(a===null)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var E=a.lanes|a.childLanes;if(Qt(e,E),e===gn&&(on=gn=null,wn=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Pc||(Pc=!0,jp(ds,function(){return $s(),null})),E=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||E){E=wr.transition,wr.transition=null;var I=_t;_t=1;var Q=Ct;Ct|=4,Df.current=null,Jv(e,a),Ep(a,e),mr(Qe),Bo=!!Re,Qe=Re=null,e.current=a,ey(a),us(),Ct=Q,_t=I,wr.transition=E}else e.current=a;if(Pc&&(Pc=!1,co=e,Tc=y),E=e.pendingLanes,E===0&&(lo=null),bo(a.stateNode),Kn(e,Wt()),r!==null)for(h=e.onRecoverableError,a=0;a<r.length;a++)y=r[a],h(y.value,{componentStack:y.stack,digest:y.digest});if(Bc)throw Bc=!1,e=Ff,Ff=null,e;return(Tc&1)!==0&&e.tag!==0&&$s(),E=e.pendingLanes,(E&1)!==0?e===Lf?Xa++:(Xa=0,Lf=e):Xa=0,io(),null}function $s(){if(co!==null){var e=ji(Tc),r=wr.transition,a=_t;try{if(wr.transition=null,_t=16>e?16:e,co===null)var h=!1;else{if(e=co,co=null,Tc=0,(Ct&6)!==0)throw Error(i(331));var y=Ct;for(Ct|=4,Ie=e.current;Ie!==null;){var E=Ie,I=E.child;if((Ie.flags&16)!==0){var Q=E.deletions;if(Q!==null){for(var J=0;J<Q.length;J++){var he=Q[J];for(Ie=he;Ie!==null;){var Ce=Ie;switch(Ce.tag){case 0:case 11:case 15:Ka(8,Ce,E)}var Be=Ce.child;if(Be!==null)Be.return=Ce,Ie=Be;else for(;Ie!==null;){Ce=Ie;var be=Ce.sibling,Me=Ce.return;if(yp(Ce),Ce===he){Ie=null;break}if(be!==null){be.return=Me,Ie=be;break}Ie=Me}}}var Oe=E.alternate;if(Oe!==null){var Ze=Oe.child;if(Ze!==null){Oe.child=null;do{var tn=Ze.sibling;Ze.sibling=null,Ze=tn}while(Ze!==null)}}Ie=E}}if((E.subtreeFlags&2064)!==0&&I!==null)I.return=E,Ie=I;else e:for(;Ie!==null;){if(E=Ie,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:Ka(9,E,E.return)}var ce=E.sibling;if(ce!==null){ce.return=E.return,Ie=ce;break e}Ie=E.return}}var oe=e.current;for(Ie=oe;Ie!==null;){I=Ie;var de=I.child;if((I.subtreeFlags&2064)!==0&&de!==null)de.return=I,Ie=de;else e:for(I=oe;Ie!==null;){if(Q=Ie,(Q.flags&2048)!==0)try{switch(Q.tag){case 0:case 11:case 15:Ec(9,Q)}}catch(qe){Yt(Q,Q.return,qe)}if(Q===I){Ie=null;break e}var De=Q.sibling;if(De!==null){De.return=Q.return,Ie=De;break e}Ie=Q.return}}if(Ct=y,io(),Jn&&typeof Jn.onPostCommitFiberRoot=="function")try{Jn.onPostCommitFiberRoot(wo,e)}catch{}h=!0}return h}finally{_t=a,wr.transition=r}}return!1}function Mp(e,r,a){r=Zs(a,r),r=ep(e,r,1),e=so(e,r,1),r=jn(),e!==null&&(er(e,1,r),Kn(e,r))}function Yt(e,r,a){if(e.tag===3)Mp(e,e,a);else for(;r!==null;){if(r.tag===3){Mp(r,e,a);break}else if(r.tag===1){var h=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(lo===null||!lo.has(h))){e=Zs(a,e),e=tp(r,e,1),r=so(r,e,1),e=jn(),r!==null&&(er(r,1,e),Kn(r,e));break}}r=r.return}}function sy(e,r,a){var h=e.pingCache;h!==null&&h.delete(r),r=jn(),e.pingedLanes|=e.suspendedLanes&a,gn===e&&(wn&a)===a&&(un===4||un===3&&(wn&130023424)===wn&&500>Wt()-Nf?Zo(e,0):Rf|=a),Kn(e,r)}function Ip(e,r){r===0&&((e.mode&1)===0?r=1:(r=Ii,Ii<<=1,(Ii&130023424)===0&&(Ii=4194304)));var a=jn();e=wi(e,r),e!==null&&(er(e,r,a),Kn(e,a))}function ay(e){var r=e.memoizedState,a=0;r!==null&&(a=r.retryLane),Ip(e,a)}function ly(e,r){var a=0;switch(e.tag){case 13:var h=e.stateNode,y=e.memoizedState;y!==null&&(a=y.retryLane);break;case 19:h=e.stateNode;break;default:throw Error(i(314))}h!==null&&h.delete(r),Ip(e,a)}var Op;Op=function(e,r,a){if(e!==null)if(e.memoizedProps!==r.pendingProps||Wn.current)Gn=!0;else{if((e.lanes&a)===0&&(r.flags&128)===0)return Gn=!1,Kv(e,r,a);Gn=(e.flags&131072)!==0}else Gn=!1,Zt&&(r.flags&1048576)!==0&&xh(r,lc,r.index);switch(r.lanes=0,r.tag){case 2:var h=r.type;bc(e,r),e=r.pendingProps;var y=Ms(r,Bn.current);Vs(r,a),y=uf(null,r,h,e,y,a);var E=df();return r.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,qn(h)?(E=!0,oc(r)):E=!1,r.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,nf(r),y.updater=_c,r.stateNode=y,y._reactInternals=r,xf(r,h,e,a),r=_f(null,r,h,!0,E,a)):(r.tag=0,Zt&&E&&qd(r),On(null,r,y,a),r=r.child),r;case 16:h=r.elementType;e:{switch(bc(e,r),e=r.pendingProps,y=h._init,h=y(h._payload),r.type=h,y=r.tag=uy(h),e=Fr(h,e),y){case 0:r=yf(null,r,h,e,a);break e;case 1:r=up(null,r,h,e,a);break e;case 11:r=op(null,r,h,e,a);break e;case 14:r=sp(null,r,h,Fr(h.type,e),a);break e}throw Error(i(306,h,""))}return r;case 0:return h=r.type,y=r.pendingProps,y=r.elementType===h?y:Fr(h,y),yf(e,r,h,y,a);case 1:return h=r.type,y=r.pendingProps,y=r.elementType===h?y:Fr(h,y),up(e,r,h,y,a);case 3:e:{if(dp(r),e===null)throw Error(i(387));h=r.pendingProps,E=r.memoizedState,y=E.element,kh(e,r),pc(r,h,null,a);var I=r.memoizedState;if(h=I.element,E.isDehydrated)if(E={element:h,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},r.updateQueue.baseState=E,r.memoizedState=E,r.flags&256){y=Zs(Error(i(423)),r),r=fp(e,r,h,a,y);break e}else if(h!==y){y=Zs(Error(i(424)),r),r=fp(e,r,h,a,y);break e}else for(lr=Qr(r.stateNode.containerInfo.firstChild),ar=r,Zt=!0,Nr=null,a=Ch(r,null,h,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(js(),h===y){r=Ci(e,r,a);break e}On(e,r,h,a)}r=r.child}return r;case 5:return Ph(r),e===null&&Kd(r),h=r.type,y=r.pendingProps,E=e!==null?e.memoizedProps:null,I=y.children,dt(h,y)?I=null:E!==null&&dt(h,E)&&(r.flags|=32),cp(e,r),On(e,r,I,a),r.child;case 6:return e===null&&Kd(r),null;case 13:return hp(e,r,a);case 4:return rf(r,r.stateNode.containerInfo),h=r.pendingProps,e===null?r.child=zs(r,null,h,a):On(e,r,h,a),r.child;case 11:return h=r.type,y=r.pendingProps,y=r.elementType===h?y:Fr(h,y),op(e,r,h,y,a);case 7:return On(e,r,r.pendingProps,a),r.child;case 8:return On(e,r,r.pendingProps.children,a),r.child;case 12:return On(e,r,r.pendingProps.children,a),r.child;case 10:e:{if(h=r.type._context,y=r.pendingProps,E=r.memoizedProps,I=y.value,Mt(dc,h._currentValue),h._currentValue=I,E!==null)if(or(E.value,I)){if(E.children===y.children&&!Wn.current){r=Ci(e,r,a);break e}}else for(E=r.child,E!==null&&(E.return=r);E!==null;){var Q=E.dependencies;if(Q!==null){I=E.child;for(var J=Q.firstContext;J!==null;){if(J.context===h){if(E.tag===1){J=bi(-1,a&-a),J.tag=2;var he=E.updateQueue;if(he!==null){he=he.shared;var Ce=he.pending;Ce===null?J.next=J:(J.next=Ce.next,Ce.next=J),he.pending=J}}E.lanes|=a,J=E.alternate,J!==null&&(J.lanes|=a),ef(E.return,a,r),Q.lanes|=a;break}J=J.next}}else if(E.tag===10)I=E.type===r.type?null:E.child;else if(E.tag===18){if(I=E.return,I===null)throw Error(i(341));I.lanes|=a,Q=I.alternate,Q!==null&&(Q.lanes|=a),ef(I,a,r),I=E.sibling}else I=E.child;if(I!==null)I.return=E;else for(I=E;I!==null;){if(I===r){I=null;break}if(E=I.sibling,E!==null){E.return=I.return,I=E;break}I=I.return}E=I}On(e,r,y.children,a),r=r.child}return r;case 9:return y=r.type,h=r.pendingProps.children,Vs(r,a),y=yr(y),h=h(y),r.flags|=1,On(e,r,h,a),r.child;case 14:return h=r.type,y=Fr(h,r.pendingProps),y=Fr(h.type,y),sp(e,r,h,y,a);case 15:return ap(e,r,r.type,r.pendingProps,a);case 17:return h=r.type,y=r.pendingProps,y=r.elementType===h?y:Fr(h,y),bc(e,r),r.tag=1,qn(h)?(e=!0,oc(r)):e=!1,Vs(r,a),Xh(r,h,y),xf(r,h,y,a),_f(null,r,h,!0,e,a);case 19:return mp(e,r,a);case 22:return lp(e,r,a)}throw Error(i(156,r.tag))};function jp(e,r){return Nl(e,r)}function cy(e,r,a,h){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function br(e,r,a,h){return new cy(e,r,a,h)}function Hf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function uy(e){if(typeof e=="function")return Hf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===te)return 11;if(e===Ae)return 14}return 2}function ho(e,r){var a=e.alternate;return a===null?(a=br(e.tag,r,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=r,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&14680064,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,r=e.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function Fc(e,r,a,h,y,E){var I=2;if(h=e,typeof e=="function")Hf(e)&&(I=1);else if(typeof e=="string")I=5;else e:switch(e){case U:return qo(a.children,y,E,r);case j:I=8,y|=8;break;case ee:return e=br(12,a,r,y|2),e.elementType=ee,e.lanes=E,e;case K:return e=br(13,a,r,y),e.elementType=K,e.lanes=E,e;case ae:return e=br(19,a,r,y),e.elementType=ae,e.lanes=E,e;case se:return Lc(a,y,E,r);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Z:I=10;break e;case Y:I=9;break e;case te:I=11;break e;case Ae:I=14;break e;case G:I=16,h=null;break e}throw Error(i(130,e==null?e:typeof e,""))}return r=br(I,a,r,y),r.elementType=e,r.type=h,r.lanes=E,r}function qo(e,r,a,h){return e=br(7,e,h,r),e.lanes=a,e}function Lc(e,r,a,h){return e=br(22,e,h,r),e.elementType=se,e.lanes=a,e.stateNode={isHidden:!1},e}function Vf(e,r,a){return e=br(6,e,null,r),e.lanes=a,e}function Uf(e,r,a){return r=br(4,e.children!==null?e.children:[],e.key,r),r.lanes=a,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}function dy(e,r,a,h,y){this.tag=r,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Oi(0),this.expirationTimes=Oi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oi(0),this.identifierPrefix=h,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Zf(e,r,a,h,y,E,I,Q,J){return e=new dy(e,r,a,Q,J),r===1?(r=1,E===!0&&(r|=8)):r=0,E=br(3,null,null,r),e.current=E,E.stateNode=e,E.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},nf(E),e}function fy(e,r,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:H,key:h==null?null:""+h,children:e,containerInfo:r,implementation:a}}function zp(e){if(!e)return ro;e=e._reactInternals;e:{if(Vr(e)!==e||e.tag!==1)throw Error(i(170));var r=e;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(qn(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(i(171))}if(e.tag===1){var a=e.type;if(qn(a))return ph(e,a,r)}return r}function Hp(e,r,a,h,y,E,I,Q,J){return e=Zf(a,h,!0,e,y,E,I,Q,J),e.context=zp(null),a=e.current,h=jn(),y=uo(a),E=bi(h,y),E.callback=r??null,so(a,E,y),e.current.lanes=y,er(e,y,h),Kn(e,h),e}function Mc(e,r,a,h){var y=r.current,E=jn(),I=uo(y);return a=zp(a),r.context===null?r.context=a:r.pendingContext=a,r=bi(E,I),r.payload={element:e},h=h===void 0?null:h,h!==null&&(r.callback=h),e=so(y,r,I),e!==null&&(Ir(e,y,I,E),hc(e,y,I)),I}function Ic(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Vp(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<r?a:r}}function Wf(e,r){Vp(e,r),(e=e.alternate)&&Vp(e,r)}function hy(){return null}var Up=typeof reportError=="function"?reportError:function(e){console.error(e)};function qf(e){this._internalRoot=e}Oc.prototype.render=qf.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(i(409));Mc(e,r,null,null)},Oc.prototype.unmount=qf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;Uo(function(){Mc(null,e,null,null)}),r[kt]=null}};function Oc(e){this._internalRoot=e}Oc.prototype.unstable_scheduleHydration=function(e){if(e){var r=gs();e={blockedOn:null,target:e,priority:r};for(var a=0;a<an.length&&r!==0&&r<an[a].priority;a++);an.splice(a,0,e),a===0&&xs(e)}};function Gf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function jc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Zp(){}function py(e,r,a,h,y){if(y){if(typeof h=="function"){var E=h;h=function(){var he=Ic(I);E.call(he)}}var I=Hp(r,h,e,0,null,!1,!1,"",Zp);return e._reactRootContainer=I,e[kt]=I.current,Xi(e.nodeType===8?e.parentNode:e),Uo(),I}for(;y=e.lastChild;)e.removeChild(y);if(typeof h=="function"){var Q=h;h=function(){var he=Ic(J);Q.call(he)}}var J=Zf(e,0,!1,null,null,!1,!1,"",Zp);return e._reactRootContainer=J,e[kt]=J.current,Xi(e.nodeType===8?e.parentNode:e),Uo(function(){Mc(r,J,a,h)}),J}function zc(e,r,a,h,y){var E=a._reactRootContainer;if(E){var I=E;if(typeof y=="function"){var Q=y;y=function(){var J=Ic(I);Q.call(J)}}Mc(r,I,e,y)}else I=py(a,r,e,y,h);return Ic(I)}ps=function(e){switch(e.tag){case 3:var r=e.stateNode;if(r.current.memoizedState.isDehydrated){var a=ot(r.pendingLanes);a!==0&&(Br(r,a|1),Kn(r,Wt()),(Ct&6)===0&&(Gs=Wt()+500,io()))}break;case 13:Uo(function(){var h=wi(e,1);if(h!==null){var y=jn();Ir(h,e,1,y)}}),Wf(e,1)}},ai=function(e){if(e.tag===13){var r=wi(e,134217728);if(r!==null){var a=jn();Ir(r,e,134217728,a)}Wf(e,134217728)}},ms=function(e){if(e.tag===13){var r=uo(e),a=wi(e,r);if(a!==null){var h=jn();Ir(a,e,r,h)}Wf(e,r)}},gs=function(){return _t},Co=function(e,r){var a=_t;try{return _t=e,r()}finally{_t=a}},ne=function(e,r,a){switch(r){case"input":if(et(e,a),r=a.name,a.type==="radio"&&r!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var h=a[r];if(h!==e&&h.form===e.form){var y=Fs(h);if(!y)throw Error(i(90));Ke(h),et(h,y)}}}break;case"textarea":It(e,a);break;case"select":r=a.value,r!=null&&Ye(e,!!a.multiple,r,!1)}},ut=Of,Ft=Uo;var my={usingClientEntryPoint:!1,Events:[xi,Ai,Fs,ie,Ee,Of]},Ja={findFiberByHostInstance:gi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gy={bundleType:Ja.bundleType,version:Ja.version,rendererPackageName:Ja.rendererPackageName,rendererConfig:Ja.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Dl(e),e===null?null:e.stateNode},findFiberByHostInstance:Ja.findFiberByHostInstance||hy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hc.isDisabled&&Hc.supportsFiber)try{wo=Hc.inject(gy),Jn=Hc}catch{}}return Qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=my,Qn.createPortal=function(e,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gf(r))throw Error(i(200));return fy(e,r,null,a)},Qn.createRoot=function(e,r){if(!Gf(e))throw Error(i(299));var a=!1,h="",y=Up;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onRecoverableError!==void 0&&(y=r.onRecoverableError)),r=Zf(e,1,!1,null,null,a,!1,h,y),e[kt]=r.current,Xi(e.nodeType===8?e.parentNode:e),new qf(r)},Qn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=Dl(r),e=e===null?null:e.stateNode,e},Qn.flushSync=function(e){return Uo(e)},Qn.hydrate=function(e,r,a){if(!jc(r))throw Error(i(200));return zc(null,e,r,!0,a)},Qn.hydrateRoot=function(e,r,a){if(!Gf(e))throw Error(i(405));var h=a!=null&&a.hydratedSources||null,y=!1,E="",I=Up;if(a!=null&&(a.unstable_strictMode===!0&&(y=!0),a.identifierPrefix!==void 0&&(E=a.identifierPrefix),a.onRecoverableError!==void 0&&(I=a.onRecoverableError)),r=Hp(r,null,e,1,a??null,y,!1,E,I),e[kt]=r.current,Xi(e),h)for(e=0;e<h.length;e++)a=h[e],y=a._getVersion,y=y(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,y]:r.mutableSourceEagerHydrationData.push(a,y);return new Oc(r)},Qn.render=function(e,r,a){if(!jc(r))throw Error(i(200));return zc(null,e,r,!1,a)},Qn.unmountComponentAtNode=function(e){if(!jc(e))throw Error(i(40));return e._reactRootContainer?(Uo(function(){zc(null,null,e,!1,function(){e._reactRootContainer=null,e[kt]=null})}),!0):!1},Qn.unstable_batchedUpdates=Of,Qn.unstable_renderSubtreeIntoContainer=function(e,r,a,h){if(!jc(a))throw Error(i(200));if(e==null||e._reactInternals===void 0)throw Error(i(38));return zc(e,r,a,!1,h)},Qn.version="18.3.1-next-f1338f8080-20240426",Qn}var Xp;function xx(){if(Xp)return Yf.exports;Xp=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(s){console.error(s)}}return n(),Yf.exports=ky(),Yf.exports}var Jp;function Sy(){if(Jp)return Vc;Jp=1;var n=xx();return Vc.createRoot=n.createRoot,Vc.hydrateRoot=n.hydrateRoot,Vc}var By=Sy();const Py="/api";async function St(n,s){const i=await fetch(`${Py}${n}`,{...s,headers:{"Content-Type":"application/json",...s==null?void 0:s.headers}});if(!i.ok){const l=await i.text();let c=l||i.statusText;try{const u=JSON.parse(l);u.detail&&(c=u.detail)}catch{}throw new Error(c)}return i.json()}function Ty(n){return n instanceof DOMException&&n.name==="AbortError"?!0:n instanceof Error&&n.name==="AbortError"}const rt={getHealth:()=>St("/health"),getRadioConfig:()=>St("/radio/config"),updateRadioConfig:n=>St("/radio/config",{method:"PATCH",body:JSON.stringify(n)}),setPrivateKey:n=>St("/radio/private-key",{method:"PUT",body:JSON.stringify({private_key:n})}),sendAdvertisement:(n=!0)=>St(`/radio/advertise?flood=${n}`,{method:"POST"}),rebootRadio:()=>St("/radio/reboot",{method:"POST"}),reconnectRadio:()=>St("/radio/reconnect",{method:"POST"}),getContacts:(n=100,s=0)=>St(`/contacts?limit=${n}&offset=${s}`),deleteContact:n=>St(`/contacts/${n}`,{method:"DELETE"}),createContact:(n,s,i)=>St("/contacts",{method:"POST",body:JSON.stringify({public_key:n,name:s,try_historical:i})}),markContactRead:n=>St(`/contacts/${n}/mark-read`,{method:"POST"}),requestTelemetry:(n,s)=>St(`/contacts/${n}/telemetry`,{method:"POST",body:JSON.stringify({password:s})}),sendRepeaterCommand:(n,s)=>St(`/contacts/${n}/command`,{method:"POST",body:JSON.stringify({command:s})}),requestTrace:n=>St(`/contacts/${n}/trace`,{method:"POST"}),getChannels:()=>St("/channels"),createChannel:(n,s)=>St("/channels",{method:"POST",body:JSON.stringify({name:n,key:s})}),deleteChannel:n=>St(`/channels/${n}`,{method:"DELETE"}),markChannelRead:n=>St(`/channels/${n}/mark-read`,{method:"POST"}),getMessages:(n,s)=>{const i=new URLSearchParams;n!=null&&n.limit&&i.set("limit",n.limit.toString()),n!=null&&n.offset&&i.set("offset",n.offset.toString()),n!=null&&n.type&&i.set("type",n.type),n!=null&&n.conversation_key&&i.set("conversation_key",n.conversation_key),(n==null?void 0:n.before)!==void 0&&i.set("before",n.before.toString()),(n==null?void 0:n.before_id)!==void 0&&i.set("before_id",n.before_id.toString());const l=i.toString();return St(`/messages${l?`?${l}`:""}`,{signal:s})},sendDirectMessage:(n,s)=>St("/messages/direct",{method:"POST",body:JSON.stringify({destination:n,text:s})}),sendChannelMessage:(n,s)=>St("/messages/channel",{method:"POST",body:JSON.stringify({channel_key:n,text:s})}),getUndecryptedPacketCount:()=>St("/packets/undecrypted/count"),decryptHistoricalPackets:n=>St("/packets/decrypt/historical",{method:"POST",body:JSON.stringify(n)}),runMaintenance:n=>St("/packets/maintenance",{method:"POST",body:JSON.stringify({prune_undecrypted_days:n})}),getUnreads:n=>{const s=n?`?name=${encodeURIComponent(n)}`:"";return St(`/read-state/unreads${s}`)},markAllRead:()=>St("/read-state/mark-all-read",{method:"POST"}),getSettings:()=>St("/settings"),updateSettings:n=>St("/settings",{method:"PATCH",body:JSON.stringify(n)}),toggleFavorite:(n,s)=>St("/settings/favorites/toggle",{method:"POST",body:JSON.stringify({type:n,id:s})}),migratePreferences:n=>St("/settings/migrate",{method:"POST",body:JSON.stringify(n)})};function Dy(n){const s=D.useRef(null),i=D.useRef(null),[l,c]=D.useState(!1),u=D.useRef(n);D.useEffect(()=>{u.current=n},[n]);const p=D.useCallback(()=>{const d=window.location.protocol==="https:"?"wss:":"ws:",m=window.location.port==="5173"?"ws://localhost:8000/api/ws":`${d}//${window.location.host}/api/ws`,x=new WebSocket(m);x.onopen=()=>{console.log("WebSocket connected"),c(!0)},x.onclose=()=>{console.log("WebSocket disconnected"),c(!1),s.current=null,i.current=window.setTimeout(()=>{console.log("Attempting WebSocket reconnect..."),p()},3e3)},x.onerror=A=>{console.error("WebSocket error:",A)},x.onmessage=A=>{var b,k,R,C,w,S,P,N,F;try{const M=JSON.parse(A.data),H=u.current;switch(M.type){case"health":(b=H.onHealth)==null||b.call(H,M.data);break;case"contacts":(k=H.onContacts)==null||k.call(H,M.data);break;case"channels":(R=H.onChannels)==null||R.call(H,M.data);break;case"message":(C=H.onMessage)==null||C.call(H,M.data);break;case"contact":(w=H.onContact)==null||w.call(H,M.data);break;case"raw_packet":(S=H.onRawPacket)==null||S.call(H,M.data);break;case"message_acked":{const U=M.data;(P=H.onMessageAcked)==null||P.call(H,U.message_id,U.ack_count,U.paths);break}case"error":(N=H.onError)==null||N.call(H,M.data);break;case"success":(F=H.onSuccess)==null||F.call(H,M.data);break;case"pong":break;default:console.log("Unknown WebSocket message type:",M.type)}}catch(M){console.error("Failed to parse WebSocket message:",M)}},s.current=x},[]);return D.useEffect(()=>{p();const d=setInterval(()=>{var g;((g=s.current)==null?void 0:g.readyState)===WebSocket.OPEN&&s.current.send("ping")},3e4);return()=>{clearInterval(d),i.current&&clearTimeout(i.current),s.current&&s.current.close()}},[p]),{connected:l}}const oi=2,Ry=300*1e3;function em(n){const s=Math.floor(n/3600),i=Math.floor(n%3600/60),l=Math.floor(n%60);return`${s}h${i}m${l}s`}function Ny(n){return n<=5?"":n<=10?"":n<=25?"":n<=50?"":""}function Fy(n,s){const l=Math.floor(Date.now()/1e3)-n.startTime,c=s.uptime_seconds-n.uptime,u=s.airtime_seconds-n.txAirtime,p=s.rx_airtime_seconds-n.rxAirtime,d=s.sent_flood-n.sentFlood,g=s.sent_direct-n.sentDirect,m=s.recv_flood-n.recvFlood,x=s.recv_direct-n.recvDirect,A=c>0?u/c*100:0,b=c>0?p/c*100:0,k=d+g,R=m+x,C=k>0?A*(d/k):0,w=k>0?A*(g/k):0,S=R>0?b*(m/R):0,P=R>0?b*(x/R):0,N=Ny(A),F=Math.max(0,100-A-b);return["Airtime/Duty Cycle Statistics",`Duration: ${em(l)} (uptime delta: ${em(c)})`,"",`${N} TX Airtime: ${A.toFixed(3)}% (${k.toLocaleString()} pkts)`,`  Flood: ${C.toFixed(3)}% (${d.toLocaleString()} pkts)`,`  Direct: ${w.toFixed(3)}% (${g.toLocaleString()} pkts)`,"",`RX Airtime: ${b.toFixed(3)}% (${R.toLocaleString()} pkts)`,`  Flood: ${S.toFixed(3)}% (${m.toLocaleString()} pkts)`,`  Direct: ${P.toFixed(3)}% (${x.toLocaleString()} pkts)`,"",`Idle: ${F.toFixed(3)}%`].join(`
`)}function Ks(n,s,i){const l=Math.floor(Date.now()/1e3);return{id:-Date.now(),type:"PRIV",conversation_key:n,text:s,sender_timestamp:l,received_at:l,paths:null,txt_type:0,signature:null,outgoing:i,acked:1}}function Ly(n){const s=D.useRef(null),i=D.useRef(null),l=D.useCallback(()=>{i.current!==null&&(clearInterval(i.current),i.current=null),s.current=null},[]),c=D.useCallback(async()=>{const p=s.current;if(!p)return;let d=null,g=null;for(let m=0;m<2;m++)try{d=await rt.requestTelemetry(p.conversationId,"");break}catch(x){g=x instanceof Error?x:new Error("Unknown error"),m===0&&await new Promise(A=>setTimeout(A,2e3))}if(d){const m=Ks(p.conversationId,Fy(p,d),!1);n(x=>[...x,m])}else{const m=Ks(p.conversationId,`Duty cycle poll failed after retry: ${(g==null?void 0:g.message)??"Unknown error"}`,!1);n(x=>[...x,m])}},[n]),u=D.useCallback(async(p,d)=>{const g=p.trim().toLowerCase();if(g==="dutycycle_start"){l();let m=null,x=null;for(let k=0;k<2;k++)try{m=await rt.requestTelemetry(d,"");break}catch(R){x=R instanceof Error?R:new Error("Unknown error"),k===0&&await new Promise(C=>setTimeout(C,2e3))}if(!m){const k=Ks(d,`Failed to start duty cycle tracking after retry: ${(x==null?void 0:x.message)??"Unknown error"}`,!1);return n(R=>[...R,k]),!0}const A=Math.floor(Date.now()/1e3);s.current={startTime:A,uptime:m.uptime_seconds,txAirtime:m.airtime_seconds,rxAirtime:m.rx_airtime_seconds,sentFlood:m.sent_flood,sentDirect:m.sent_direct,recvFlood:m.recv_flood,recvDirect:m.recv_direct,conversationId:d};const b=Ks(d,`Airtime/duty cycle statistics gathering begins at ${A}. Logs will follow every 5 minutes. To stop, run dutycycle_stop or navigate away from this conversation.`,!1);return n(k=>[...k,b]),i.current=window.setInterval(c,Ry),!0}if(g==="dutycycle_stop"){if(s.current&&s.current.conversationId===d){await c(),l();const m=Ks(d,"Airtime/duty cycle statistics gathering stopped.",!1);n(x=>[...x,m])}else{const m=Ks(d,"Duty cycle tracking is not active.",!1);n(x=>[...x,m])}return!0}return!1},[n,l,c]);return D.useEffect(()=>()=>{i.current!==null&&clearInterval(i.current)},[]),{handleAirtimeCommand:u,stopTracking:l}}function nu(n){if(n<60)return`${n}s`;const s=Math.floor(n/86400),i=Math.floor(n%86400/3600),l=Math.floor(n%3600/60);return s>0?i>0&&l>0?`${s}d${i}h${l}m`:i>0?`${s}d${i}h`:l>0?`${s}d${l}m`:`${s}d`:i>0?l>0?`${i}h${l}m`:`${i}h`:`${l}m`}function My(n){return["Telemetry",`Battery Voltage: ${n.battery_volts.toFixed(3)}V`,`Uptime: ${nu(n.uptime_seconds)}`,...n.clock_output?[`Clock: ${n.clock_output}`]:[],`TX Airtime: ${nu(n.airtime_seconds)}`,`RX Airtime: ${nu(n.rx_airtime_seconds)}`,"",`Noise Floor: ${n.noise_floor_dbm} dBm`,`Last RSSI: ${n.last_rssi_dbm} dBm`,`Last SNR: ${n.last_snr_db.toFixed(1)} dB`,"",`Packets: ${n.packets_received.toLocaleString()} rx / ${n.packets_sent.toLocaleString()} tx`,`Flood: ${n.recv_flood.toLocaleString()} rx / ${n.sent_flood.toLocaleString()} tx`,`Direct: ${n.recv_direct.toLocaleString()} rx / ${n.sent_direct.toLocaleString()} tx`,`Duplicates: ${n.flood_dups.toLocaleString()} flood / ${n.direct_dups.toLocaleString()} direct`,"",`TX Queue: ${n.tx_queue_len}`,`Debug Flags: ${n.full_events}`].join(`
`)}function Iy(n){if(n.length===0)return`Neighbors
No neighbors reported`;const s=[...n].sort((l,c)=>c.snr-l.snr),i=[`Neighbors (${s.length})`];for(const l of s){const c=l.name||l.pubkey_prefix,u=l.snr>=0?`+${l.snr.toFixed(1)}`:l.snr.toFixed(1);i.push(`${c}, ${u} dB [${nu(l.last_heard_seconds)} ago]`)}return i.join(`
`)}function Oy(n){if(n.length===0)return`ACL
No ACL entries`;const s=[`ACL (${n.length})`];for(const i of n){const l=i.name||i.pubkey_prefix;s.push(`${l}: ${i.permission_name}`)}return s.join(`
`)}function $o(n,s,i,l=0){const c=Math.floor(Date.now()/1e3);return{id:-Date.now()-l,type:"PRIV",conversation_key:n,text:s,sender_timestamp:c,received_at:c,paths:null,txt_type:0,signature:null,outgoing:i,acked:1}}function jy(n,s,i){const[l,c]=D.useState(!1),{handleAirtimeCommand:u,stopTracking:p}=Ly(i);D.useEffect(()=>{c(!1),p()},[n==null?void 0:n.id,p]);const d=D.useMemo(()=>{if(!n||n.type!=="contact")return!1;const x=s.find(A=>A.public_key===n.id);return(x==null?void 0:x.type)===oi},[n,s]),g=D.useCallback(async x=>{if(!(!n||n.type!=="contact")&&d)try{const A=await rt.requestTelemetry(n.id,x),b=$o(n.id,My(A),!1,0),k=$o(n.id,Iy(A.neighbors),!1,1),R=$o(n.id,Oy(A.acl),!1,2);i(C=>[...C,b,k,R]),c(!0)}catch(A){const b=$o(n.id,`Telemetry request failed: ${A instanceof Error?A.message:"Unknown error"}`,!1,0);i(k=>[...k,b])}},[n,d,i]),m=D.useCallback(async x=>{if(!n||n.type!=="contact"||!d||!l||await u(x,n.id))return;const b=$o(n.id,`> ${x}`,!0,0);i(k=>[...k,b]);try{const k=await rt.sendRepeaterCommand(n.id,x),R=$o(n.id,k.response,!1,1);k.sender_timestamp&&(R.sender_timestamp=k.sender_timestamp),i(C=>[...C,R])}catch(k){const R=$o(n.id,`Command failed: ${k instanceof Error?k.message:"Unknown error"}`,!1,1);i(C=>[...C,R])}},[n,d,l,i,u]);return{repeaterLoggedIn:l,activeContactIsRepeater:d,handleTelemetryRequest:g,handleRepeaterCommand:m}}const Ax="remoteterm-lastMessageTime",vx="remoteterm-sortOrder";let Gu={};function tm(n){Gu={...n}}function nm(){return{...Gu}}function rm(n,s){return Gu[n]=s,{...Gu}}function Ao(n,s){return`${n}-${s}`}function zy(){try{const n=localStorage.getItem(Ax);return n?JSON.parse(n):{}}catch{return{}}}function Hy(){try{return localStorage.getItem(vx)==="alpha"?"alpha":"recent"}catch{return"recent"}}function im(){try{localStorage.removeItem(Ax),localStorage.removeItem(vx)}catch{}}function Vy(n,s,i,l=null){const[c,u]=D.useState({}),[p,d]=D.useState({}),[g,m]=D.useState(nm),x=D.useRef(l);D.useEffect(()=>{x.current=l},[l]);const A=D.useCallback(async()=>{try{const C=await rt.getUnreads(x.current??void 0);if(u(C.counts),d(C.mentions),Object.keys(C.last_message_times).length>0){for(const[w,S]of Object.entries(C.last_message_times))rm(w,S);m(nm())}}catch(C){console.error("Failed to fetch unreads:",C)}},[]);D.useEffect(()=>{n.length===0&&s.length===0||A()},[n,s,A]),D.useEffect(()=>{if(i&&i.type!=="raw"&&i.type!=="map"&&i.type!=="visualizer"){const C=Ao(i.type,i.id);u(w=>{if(w[C]){const S={...w};return delete S[C],S}return w}),d(w=>{if(w[C]){const S={...w};return delete S[C],S}return w}),i.type==="channel"?rt.markChannelRead(i.id).catch(w=>{console.error("Failed to mark channel as read on server:",w)}):i.type==="contact"&&rt.markContactRead(i.id).catch(w=>{console.error("Failed to mark contact as read on server:",w)})}},[i]);const b=D.useCallback((C,w)=>{u(S=>({...S,[C]:(S[C]||0)+1})),w&&d(S=>({...S,[C]:!0}))},[]),k=D.useCallback(()=>{u({}),d({}),rt.markAllRead().catch(C=>{console.error("Failed to mark all as read on server:",C)})},[]),R=D.useCallback(C=>{let w=null;if(C.type==="CHAN"&&C.conversation_key?w=Ao("channel",C.conversation_key):C.type==="PRIV"&&C.conversation_key&&(w=Ao("contact",C.conversation_key)),w){const S=C.received_at||Math.floor(Date.now()/1e3),P=rm(w,S);m(P)}},[]);return{unreadCounts:c,mentions:p,lastMessageTimes:g,incrementUnread:b,markAllRead:k,trackNewMessage:R}}var M0=xx();const yx=aa(M0);function Uy(n){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",s.appendChild(i),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n))}const Zy=n=>{switch(n){case"success":return Gy;case"info":return Ky;case"warning":return $y;case"error":return Qy;default:return null}},Wy=Array(12).fill(0),qy=({visible:n,className:s})=>Te.createElement("div",{className:["sonner-loading-wrapper",s].filter(Boolean).join(" "),"data-visible":n},Te.createElement("div",{className:"sonner-spinner"},Wy.map((i,l)=>Te.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${l}`})))),Gy=Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Te.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),$y=Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Te.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Ky=Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Te.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Qy=Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Te.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Yy=Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Te.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Te.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Xy=()=>{const[n,s]=Te.useState(document.hidden);return Te.useEffect(()=>{const i=()=>{s(document.hidden)};return document.addEventListener("visibilitychange",i),()=>window.removeEventListener("visibilitychange",i)},[]),n};let g0=1;class Jy{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{const i=this.subscribers.indexOf(s);this.subscribers.splice(i,1)}),this.publish=s=>{this.subscribers.forEach(i=>i(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var i;const{message:l,...c}=s,u=typeof(s==null?void 0:s.id)=="number"||((i=s.id)==null?void 0:i.length)>0?s.id:g0++,p=this.toasts.find(g=>g.id===u),d=s.dismissible===void 0?!0:s.dismissible;return this.dismissedToasts.has(u)&&this.dismissedToasts.delete(u),p?this.toasts=this.toasts.map(g=>g.id===u?(this.publish({...g,...s,id:u,title:l}),{...g,...s,id:u,dismissible:d,title:l}):g):this.addToast({title:l,...c,dismissible:d,id:u}),u},this.dismiss=s=>(s?(this.dismissedToasts.add(s),requestAnimationFrame(()=>this.subscribers.forEach(i=>i({id:s,dismiss:!0})))):this.toasts.forEach(i=>{this.subscribers.forEach(l=>l({id:i.id,dismiss:!0}))}),s),this.message=(s,i)=>this.create({...i,message:s}),this.error=(s,i)=>this.create({...i,message:s,type:"error"}),this.success=(s,i)=>this.create({...i,type:"success",message:s}),this.info=(s,i)=>this.create({...i,type:"info",message:s}),this.warning=(s,i)=>this.create({...i,type:"warning",message:s}),this.loading=(s,i)=>this.create({...i,type:"loading",message:s}),this.promise=(s,i)=>{if(!i)return;let l;i.loading!==void 0&&(l=this.create({...i,promise:s,type:"loading",message:i.loading,description:typeof i.description!="function"?i.description:void 0}));const c=Promise.resolve(s instanceof Function?s():s);let u=l!==void 0,p;const d=c.then(async m=>{if(p=["resolve",m],Te.isValidElement(m))u=!1,this.create({id:l,type:"default",message:m});else if(t_(m)&&!m.ok){u=!1;const A=typeof i.error=="function"?await i.error(`HTTP error! status: ${m.status}`):i.error,b=typeof i.description=="function"?await i.description(`HTTP error! status: ${m.status}`):i.description,R=typeof A=="object"&&!Te.isValidElement(A)?A:{message:A};this.create({id:l,type:"error",description:b,...R})}else if(m instanceof Error){u=!1;const A=typeof i.error=="function"?await i.error(m):i.error,b=typeof i.description=="function"?await i.description(m):i.description,R=typeof A=="object"&&!Te.isValidElement(A)?A:{message:A};this.create({id:l,type:"error",description:b,...R})}else if(i.success!==void 0){u=!1;const A=typeof i.success=="function"?await i.success(m):i.success,b=typeof i.description=="function"?await i.description(m):i.description,R=typeof A=="object"&&!Te.isValidElement(A)?A:{message:A};this.create({id:l,type:"success",description:b,...R})}}).catch(async m=>{if(p=["reject",m],i.error!==void 0){u=!1;const x=typeof i.error=="function"?await i.error(m):i.error,A=typeof i.description=="function"?await i.description(m):i.description,k=typeof x=="object"&&!Te.isValidElement(x)?x:{message:x};this.create({id:l,type:"error",description:A,...k})}}).finally(()=>{u&&(this.dismiss(l),l=void 0),i.finally==null||i.finally.call(i)}),g=()=>new Promise((m,x)=>d.then(()=>p[0]==="reject"?x(p[1]):m(p[1])).catch(x));return typeof l!="string"&&typeof l!="number"?{unwrap:g}:Object.assign(l,{unwrap:g})},this.custom=(s,i)=>{const l=(i==null?void 0:i.id)||g0++;return this.create({jsx:s(l),id:l,...i}),l},this.getActiveToasts=()=>this.toasts.filter(s=>!this.dismissedToasts.has(s.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Yn=new Jy,e_=(n,s)=>{const i=(s==null?void 0:s.id)||g0++;return Yn.addToast({title:n,...s,id:i}),i},t_=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",n_=e_,r_=()=>Yn.toasts,i_=()=>Yn.getActiveToasts(),pt=Object.assign(n_,{success:Yn.success,info:Yn.info,warning:Yn.warning,error:Yn.error,custom:Yn.custom,message:Yn.message,promise:Yn.promise,dismiss:Yn.dismiss,loading:Yn.loading},{getHistory:r_,getToasts:i_});Uy("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Uc(n){return n.label!==void 0}const o_=3,s_="24px",a_="16px",om=4e3,l_=356,c_=14,u_=45,d_=200;function ei(...n){return n.filter(Boolean).join(" ")}function f_(n){const[s,i]=n.split("-"),l=[];return s&&l.push(s),i&&l.push(i),l}const h_=n=>{var s,i,l,c,u,p,d,g,m;const{invert:x,toast:A,unstyled:b,interacting:k,setHeights:R,visibleToasts:C,heights:w,index:S,toasts:P,expanded:N,removeToast:F,defaultRichColors:M,closeButton:H,style:U,cancelButtonStyle:j,actionButtonStyle:ee,className:Z="",descriptionClassName:Y="",duration:te,position:K,gap:ae,expandByDefault:Ae,classNames:G,icons:se,closeButtonAriaLabel:W="Close toast"}=n,[re,V]=Te.useState(null),[T,z]=Te.useState(null),[q,$]=Te.useState(!1),[ue,pe]=Te.useState(!1),[ve,me]=Te.useState(!1),[ge,Pe]=Te.useState(!1),[We,Ke]=Te.useState(!1),[ke,Ve]=Te.useState(0),[st,mt]=Te.useState(0),et=Te.useRef(A.duration||te||om),at=Te.useRef(null),Ge=Te.useRef(null),$e=S===0,Ye=S+1<=C,Le=A.type,wt=A.dismissible!==!1,It=A.className||"",Nn=A.descriptionClassName||"",Ot=Te.useMemo(()=>w.findIndex(ie=>ie.toastId===A.id)||0,[w,A.id]),en=Te.useMemo(()=>{var ie;return(ie=A.closeButton)!=null?ie:H},[A.closeButton,H]),sn=Te.useMemo(()=>A.duration||te||om,[A.duration,te]),yn=Te.useRef(0),Ht=Te.useRef(0),Pt=Te.useRef(0),Vt=Te.useRef(null),[Fn,pn]=K.split("-"),ye=Te.useMemo(()=>w.reduce((ie,Ee,ut)=>ut>=Ot?ie:ie+Ee.height,0),[w,Ot]),Se=Xy(),Ne=A.invert||x,ct=Le==="loading";Ht.current=Te.useMemo(()=>Ot*ae+ye,[Ot,ye]),Te.useEffect(()=>{et.current=sn},[sn]),Te.useEffect(()=>{$(!0)},[]),Te.useEffect(()=>{const ie=Ge.current;if(ie){const Ee=ie.getBoundingClientRect().height;return mt(Ee),R(ut=>[{toastId:A.id,height:Ee,position:A.position},...ut]),()=>R(ut=>ut.filter(Ft=>Ft.toastId!==A.id))}},[R,A.id]),Te.useLayoutEffect(()=>{if(!q)return;const ie=Ge.current,Ee=ie.style.height;ie.style.height="auto";const ut=ie.getBoundingClientRect().height;ie.style.height=Ee,mt(ut),R(Ft=>Ft.find(ht=>ht.toastId===A.id)?Ft.map(ht=>ht.toastId===A.id?{...ht,height:ut}:ht):[{toastId:A.id,height:ut,position:A.position},...Ft])},[q,A.title,A.description,R,A.id,A.jsx,A.action,A.cancel]);const tt=Te.useCallback(()=>{pe(!0),Ve(Ht.current),R(ie=>ie.filter(Ee=>Ee.toastId!==A.id)),setTimeout(()=>{F(A)},d_)},[A,F,R,Ht]);Te.useEffect(()=>{if(A.promise&&Le==="loading"||A.duration===1/0||A.type==="loading")return;let ie;return N||k||Se?(()=>{if(Pt.current<yn.current){const Ft=new Date().getTime()-yn.current;et.current=et.current-Ft}Pt.current=new Date().getTime()})():(()=>{et.current!==1/0&&(yn.current=new Date().getTime(),ie=setTimeout(()=>{A.onAutoClose==null||A.onAutoClose.call(A,A),tt()},et.current))})(),()=>clearTimeout(ie)},[N,k,A,Le,Se,tt]),Te.useEffect(()=>{A.delete&&(tt(),A.onDismiss==null||A.onDismiss.call(A,A))},[tt,A.delete]);function ne(){var ie;if(se!=null&&se.loading){var Ee;return Te.createElement("div",{className:ei(G==null?void 0:G.loader,A==null||(Ee=A.classNames)==null?void 0:Ee.loader,"sonner-loader"),"data-visible":Le==="loading"},se.loading)}return Te.createElement(qy,{className:ei(G==null?void 0:G.loader,A==null||(ie=A.classNames)==null?void 0:ie.loader),visible:Le==="loading"})}const xe=A.icon||(se==null?void 0:se[Le])||Zy(Le);var _e,Ue;return Te.createElement("li",{tabIndex:0,ref:Ge,className:ei(Z,It,G==null?void 0:G.toast,A==null||(s=A.classNames)==null?void 0:s.toast,G==null?void 0:G.default,G==null?void 0:G[Le],A==null||(i=A.classNames)==null?void 0:i[Le]),"data-sonner-toast":"","data-rich-colors":(_e=A.richColors)!=null?_e:M,"data-styled":!(A.jsx||A.unstyled||b),"data-mounted":q,"data-promise":!!A.promise,"data-swiped":We,"data-removed":ue,"data-visible":Ye,"data-y-position":Fn,"data-x-position":pn,"data-index":S,"data-front":$e,"data-swiping":ve,"data-dismissible":wt,"data-type":Le,"data-invert":Ne,"data-swipe-out":ge,"data-swipe-direction":T,"data-expanded":!!(N||Ae&&q),"data-testid":A.testId,style:{"--index":S,"--toasts-before":S,"--z-index":P.length-S,"--offset":`${ue?ke:Ht.current}px`,"--initial-height":Ae?"auto":`${st}px`,...U,...A.style},onDragEnd:()=>{me(!1),V(null),Vt.current=null},onPointerDown:ie=>{ie.button!==2&&(ct||!wt||(at.current=new Date,Ve(Ht.current),ie.target.setPointerCapture(ie.pointerId),ie.target.tagName!=="BUTTON"&&(me(!0),Vt.current={x:ie.clientX,y:ie.clientY})))},onPointerUp:()=>{var ie,Ee,ut;if(ge||!wt)return;Vt.current=null;const Ft=Number(((ie=Ge.current)==null?void 0:ie.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),nn=Number(((Ee=Ge.current)==null?void 0:Ee.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ht=new Date().getTime()-((ut=at.current)==null?void 0:ut.getTime()),Tt=re==="x"?Ft:nn,Xn=Math.abs(Tt)/ht;if(Math.abs(Tt)>=u_||Xn>.11){Ve(Ht.current),A.onDismiss==null||A.onDismiss.call(A,A),z(re==="x"?Ft>0?"right":"left":nn>0?"down":"up"),tt(),Pe(!0);return}else{var bt,Ut;(bt=Ge.current)==null||bt.style.setProperty("--swipe-amount-x","0px"),(Ut=Ge.current)==null||Ut.style.setProperty("--swipe-amount-y","0px")}Ke(!1),me(!1),V(null)},onPointerMove:ie=>{var Ee,ut,Ft;if(!Vt.current||!wt||((Ee=window.getSelection())==null?void 0:Ee.toString().length)>0)return;const ht=ie.clientY-Vt.current.y,Tt=ie.clientX-Vt.current.x;var Xn;const bt=(Xn=n.swipeDirections)!=null?Xn:f_(K);!re&&(Math.abs(Tt)>1||Math.abs(ht)>1)&&V(Math.abs(Tt)>Math.abs(ht)?"x":"y");let Ut={x:0,y:0};const Kt=Fe=>1/(1.5+Math.abs(Fe)/20);if(re==="y"){if(bt.includes("top")||bt.includes("bottom"))if(bt.includes("top")&&ht<0||bt.includes("bottom")&&ht>0)Ut.y=ht;else{const Fe=ht*Kt(ht);Ut.y=Math.abs(Fe)<Math.abs(ht)?Fe:ht}}else if(re==="x"&&(bt.includes("left")||bt.includes("right")))if(bt.includes("left")&&Tt<0||bt.includes("right")&&Tt>0)Ut.x=Tt;else{const Fe=Tt*Kt(Tt);Ut.x=Math.abs(Fe)<Math.abs(Tt)?Fe:Tt}(Math.abs(Ut.x)>0||Math.abs(Ut.y)>0)&&Ke(!0),(ut=Ge.current)==null||ut.style.setProperty("--swipe-amount-x",`${Ut.x}px`),(Ft=Ge.current)==null||Ft.style.setProperty("--swipe-amount-y",`${Ut.y}px`)}},en&&!A.jsx&&Le!=="loading"?Te.createElement("button",{"aria-label":W,"data-disabled":ct,"data-close-button":!0,onClick:ct||!wt?()=>{}:()=>{tt(),A.onDismiss==null||A.onDismiss.call(A,A)},className:ei(G==null?void 0:G.closeButton,A==null||(l=A.classNames)==null?void 0:l.closeButton)},(Ue=se==null?void 0:se.close)!=null?Ue:Yy):null,(Le||A.icon||A.promise)&&A.icon!==null&&((se==null?void 0:se[Le])!==null||A.icon)?Te.createElement("div",{"data-icon":"",className:ei(G==null?void 0:G.icon,A==null||(c=A.classNames)==null?void 0:c.icon)},A.promise||A.type==="loading"&&!A.icon?A.icon||ne():null,A.type!=="loading"?xe:null):null,Te.createElement("div",{"data-content":"",className:ei(G==null?void 0:G.content,A==null||(u=A.classNames)==null?void 0:u.content)},Te.createElement("div",{"data-title":"",className:ei(G==null?void 0:G.title,A==null||(p=A.classNames)==null?void 0:p.title)},A.jsx?A.jsx:typeof A.title=="function"?A.title():A.title),A.description?Te.createElement("div",{"data-description":"",className:ei(Y,Nn,G==null?void 0:G.description,A==null||(d=A.classNames)==null?void 0:d.description)},typeof A.description=="function"?A.description():A.description):null),Te.isValidElement(A.cancel)?A.cancel:A.cancel&&Uc(A.cancel)?Te.createElement("button",{"data-button":!0,"data-cancel":!0,style:A.cancelButtonStyle||j,onClick:ie=>{Uc(A.cancel)&&wt&&(A.cancel.onClick==null||A.cancel.onClick.call(A.cancel,ie),tt())},className:ei(G==null?void 0:G.cancelButton,A==null||(g=A.classNames)==null?void 0:g.cancelButton)},A.cancel.label):null,Te.isValidElement(A.action)?A.action:A.action&&Uc(A.action)?Te.createElement("button",{"data-button":!0,"data-action":!0,style:A.actionButtonStyle||ee,onClick:ie=>{Uc(A.action)&&(A.action.onClick==null||A.action.onClick.call(A.action,ie),!ie.defaultPrevented&&tt())},className:ei(G==null?void 0:G.actionButton,A==null||(m=A.classNames)==null?void 0:m.actionButton)},A.action.label):null)};function sm(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function p_(n,s){const i={};return[n,s].forEach((l,c)=>{const u=c===1,p=u?"--mobile-offset":"--offset",d=u?a_:s_;function g(m){["top","right","bottom","left"].forEach(x=>{i[`${p}-${x}`]=typeof m=="number"?`${m}px`:m})}typeof l=="number"||typeof l=="string"?g(l):typeof l=="object"?["top","right","bottom","left"].forEach(m=>{l[m]===void 0?i[`${p}-${m}`]=d:i[`${p}-${m}`]=typeof l[m]=="number"?`${l[m]}px`:l[m]}):g(d)}),i}const m_=Te.forwardRef(function(s,i){const{id:l,invert:c,position:u="bottom-right",hotkey:p=["altKey","KeyT"],expand:d,closeButton:g,className:m,offset:x,mobileOffset:A,theme:b="light",richColors:k,duration:R,style:C,visibleToasts:w=o_,toastOptions:S,dir:P=sm(),gap:N=c_,icons:F,containerAriaLabel:M="Notifications"}=s,[H,U]=Te.useState([]),j=Te.useMemo(()=>l?H.filter(q=>q.toasterId===l):H.filter(q=>!q.toasterId),[H,l]),ee=Te.useMemo(()=>Array.from(new Set([u].concat(j.filter(q=>q.position).map(q=>q.position)))),[j,u]),[Z,Y]=Te.useState([]),[te,K]=Te.useState(!1),[ae,Ae]=Te.useState(!1),[G,se]=Te.useState(b!=="system"?b:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),W=Te.useRef(null),re=p.join("+").replace(/Key/g,"").replace(/Digit/g,""),V=Te.useRef(null),T=Te.useRef(!1),z=Te.useCallback(q=>{U($=>{var ue;return(ue=$.find(pe=>pe.id===q.id))!=null&&ue.delete||Yn.dismiss(q.id),$.filter(({id:pe})=>pe!==q.id)})},[]);return Te.useEffect(()=>Yn.subscribe(q=>{if(q.dismiss){requestAnimationFrame(()=>{U($=>$.map(ue=>ue.id===q.id?{...ue,delete:!0}:ue))});return}setTimeout(()=>{yx.flushSync(()=>{U($=>{const ue=$.findIndex(pe=>pe.id===q.id);return ue!==-1?[...$.slice(0,ue),{...$[ue],...q},...$.slice(ue+1)]:[q,...$]})})})}),[H]),Te.useEffect(()=>{if(b!=="system"){se(b);return}if(b==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?se("dark"):se("light")),typeof window>"u")return;const q=window.matchMedia("(prefers-color-scheme: dark)");try{q.addEventListener("change",({matches:$})=>{se($?"dark":"light")})}catch{q.addListener(({matches:ue})=>{try{se(ue?"dark":"light")}catch(pe){console.error(pe)}})}},[b]),Te.useEffect(()=>{H.length<=1&&K(!1)},[H]),Te.useEffect(()=>{const q=$=>{var ue;if(p.every(me=>$[me]||$.code===me)){var ve;K(!0),(ve=W.current)==null||ve.focus()}$.code==="Escape"&&(document.activeElement===W.current||(ue=W.current)!=null&&ue.contains(document.activeElement))&&K(!1)};return document.addEventListener("keydown",q),()=>document.removeEventListener("keydown",q)},[p]),Te.useEffect(()=>{if(W.current)return()=>{V.current&&(V.current.focus({preventScroll:!0}),V.current=null,T.current=!1)}},[W.current]),Te.createElement("section",{ref:i,"aria-label":`${M} ${re}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},ee.map((q,$)=>{var ue;const[pe,ve]=q.split("-");return j.length?Te.createElement("ol",{key:q,dir:P==="auto"?sm():P,tabIndex:-1,ref:W,className:m,"data-sonner-toaster":!0,"data-sonner-theme":G,"data-y-position":pe,"data-x-position":ve,style:{"--front-toast-height":`${((ue=Z[0])==null?void 0:ue.height)||0}px`,"--width":`${l_}px`,"--gap":`${N}px`,...C,...p_(x,A)},onBlur:me=>{T.current&&!me.currentTarget.contains(me.relatedTarget)&&(T.current=!1,V.current&&(V.current.focus({preventScroll:!0}),V.current=null))},onFocus:me=>{me.target instanceof HTMLElement&&me.target.dataset.dismissible==="false"||T.current||(T.current=!0,V.current=me.relatedTarget)},onMouseEnter:()=>K(!0),onMouseMove:()=>K(!0),onMouseLeave:()=>{ae||K(!1)},onDragEnd:()=>K(!1),onPointerDown:me=>{me.target instanceof HTMLElement&&me.target.dataset.dismissible==="false"||Ae(!0)},onPointerUp:()=>Ae(!1)},j.filter(me=>!me.position&&$===0||me.position===q).map((me,ge)=>{var Pe,We;return Te.createElement(h_,{key:me.id,icons:F,index:ge,toast:me,defaultRichColors:k,duration:(Pe=S==null?void 0:S.duration)!=null?Pe:R,className:S==null?void 0:S.className,descriptionClassName:S==null?void 0:S.descriptionClassName,invert:c,visibleToasts:w,closeButton:(We=S==null?void 0:S.closeButton)!=null?We:g,interacting:ae,position:q,style:S==null?void 0:S.style,unstyled:S==null?void 0:S.unstyled,classNames:S==null?void 0:S.classNames,cancelButtonStyle:S==null?void 0:S.cancelButtonStyle,actionButtonStyle:S==null?void 0:S.actionButtonStyle,closeButtonAriaLabel:S==null?void 0:S.closeButtonAriaLabel,removeToast:z,toasts:j.filter(Ke=>Ke.position==me.position),heights:Z.filter(Ke=>Ke.position==me.position),setHeights:Y,expandByDefault:d,gap:N,expanded:te,swipeDirections:s.swipeDirections})})):null}))}),g_=({...n})=>_.jsx(m_,{theme:"dark",className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-card group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground",error:"group-[.toaster]:bg-[#2a1a1a] group-[.toaster]:text-[#e8a0a0] group-[.toaster]:border-[#4a2a2a] [&_[data-description]]:text-[#b08080]"}},...n}),Zc=200;function ru(n){return`${n.type}-${n.conversation_key}-${n.text}-${n.sender_timestamp}`}function x_(n){const[s,i]=D.useState([]),[l,c]=D.useState(!1),[u,p]=D.useState(!1),[d,g]=D.useState(!1),m=D.useRef(new Set),x=D.useRef(null),A=D.useRef(null),b=D.useCallback(async(w=!1,S)=>{if(!n||n.type==="raw"){i([]),g(!1);return}const P=n.id;w&&(c(!0),i([]));try{const N=await rt.getMessages({type:n.type==="channel"?"CHAN":"PRIV",conversation_key:n.id,limit:Zc},S);if(A.current!==P)return;i(N),m.current.clear();for(const F of N)m.current.add(ru(F));g(N.length>=Zc)}catch(N){if(Ty(N))return;console.error("Failed to fetch messages:",N),pt.error("Failed to load messages",{description:N instanceof Error?N.message:"Check your connection"})}finally{w&&c(!1)}},[n]),k=D.useCallback(async()=>{if(!n||n.type==="raw"||u||!d)return;const w=s[s.length-1];if(w){p(!0);try{const S=await rt.getMessages({type:n.type==="channel"?"CHAN":"PRIV",conversation_key:n.id,limit:Zc,before:w.received_at,before_id:w.id});if(S.length>0){i(P=>[...P,...S]);for(const P of S)m.current.add(ru(P))}g(S.length>=Zc)}catch(S){console.error("Failed to fetch older messages:",S),pt.error("Failed to load older messages",{description:S instanceof Error?S.message:"Check your connection"})}finally{p(!1)}}},[n,u,d,s]);D.useEffect(()=>{if(x.current&&x.current.abort(),A.current=(n==null?void 0:n.id)??null,!n||n.type==="raw"){i([]),g(!1);return}const w=new AbortController;return x.current=w,b(!0,w.signal),()=>{w.abort()}},[n==null?void 0:n.id,n==null?void 0:n.type]);const R=D.useCallback(w=>{const S=ru(w);if(m.current.has(S))return console.debug("Duplicate message content ignored:",S.slice(0,50)),!1;if(m.current.add(S),m.current.size>1e3){const P=Array.from(m.current);m.current=new Set(P.slice(-500))}return i(P=>P.some(N=>N.id===w.id)?P:[...P,w]),!0},[]),C=D.useCallback((w,S,P)=>{i(N=>{const F=N.findIndex(M=>M.id===w);if(F>=0){const M=[...N];return M[F]={...N[F],acked:S,...P!==void 0&&{paths:P}},M}return N})},[]);return{messages:s,messagesLoading:l,loadingOlder:u,hasOlderMessages:d,setMessages:i,fetchMessages:b,fetchOlderMessages:k,addMessageIfNew:R,updateMessageAck:C}}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),v_=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,i,l)=>l?l.toUpperCase():i.toLowerCase()),am=n=>{const s=v_(n);return s.charAt(0).toUpperCase()+s.slice(1)},_x=(...n)=>n.filter((s,i,l)=>!!s&&s.trim()!==""&&l.indexOf(s)===i).join(" ").trim(),y_=n=>{for(const s in n)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var __={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_=D.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:c="",children:u,iconNode:p,...d},g)=>D.createElement("svg",{ref:g,...__,width:s,height:s,stroke:n,strokeWidth:l?Number(i)*24/Number(s):i,className:_x("lucide",c),...!u&&!y_(d)&&{"aria-hidden":"true"},...d},[...p.map(([m,x])=>D.createElement(m,x)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=(n,s)=>{const i=D.forwardRef(({className:l,...c},u)=>D.createElement(w_,{ref:u,iconNode:s,className:_x(`lucide-${A_(am(n))}`,`lucide-${n}`,l),...c}));return i.displayName=am(n),i};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],C_=I0("check",b_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],k_=I0("menu",E_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],wx=I0("x",S_);function B_({health:n,config:s,onSettingsClick:i,onMenuClick:l}){const c=(n==null?void 0:n.radio_connected)??!1,[u,p]=D.useState(!1),d=async()=>{p(!0);try{const g=await rt.reconnectRadio();g.connected&&pt.success("Reconnected",{description:g.message})}catch(g){pt.error("Reconnection failed",{description:g instanceof Error?g.message:"Check radio connection and power"})}finally{p(!1)}};return _.jsxs("div",{className:"flex items-center gap-4 px-4 py-2 bg-[#252525] border-b border-[#333] text-xs",children:[l&&_.jsx("button",{onClick:l,className:"md:hidden p-1 bg-transparent border-none text-[#e0e0e0] cursor-pointer","aria-label":"Open menu",children:_.jsx(k_,{className:"h-5 w-5"})}),_.jsx("h1",{className:"text-base font-semibold mr-auto",children:"RemoteTerm"}),_.jsxs("div",{className:"flex items-center gap-1 text-[#888]",children:[_.jsx("div",{className:`w-2 h-2 rounded-full ${c?"bg-[#4caf50]":"bg-[#666]"}`}),_.jsx("span",{className:"hidden lg:inline text-[#e0e0e0]",children:c?"Connected":"Disconnected"})]}),s&&_.jsxs("div",{className:"hidden lg:flex items-center gap-2 text-[#888]",children:[_.jsx("span",{className:"text-[#e0e0e0]",children:s.name||"Unnamed"}),_.jsx("span",{className:"font-mono text-[#888] cursor-pointer hover:text-[#4a9eff]",onClick:()=>{navigator.clipboard.writeText(s.public_key),pt.success("Public key copied!")},title:"Click to copy public key",children:s.public_key.toLowerCase()})]}),!c&&_.jsx("button",{onClick:d,disabled:u,className:"px-3 py-1 bg-[#4a3000] border border-[#6b4500] text-[#ffa500] rounded text-xs cursor-pointer hover:bg-[#5a3a00] disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Reconnecting...":"Reconnect"}),_.jsxs("button",{onClick:i,className:"px-3 py-1 bg-[#333] border border-[#444] text-[#e0e0e0] rounded text-xs cursor-pointer hover:bg-[#444]",children:[_.jsx("span",{role:"img","aria-label":"Settings",children:""})," ","Radio & Config"]})]})}const P_=12;function T_(n){return n.slice(0,P_)}function Ri(n,s){return n||T_(s)}const D_={text:"",background:"#444444",textColor:"#ffffff"};function R_(n){let s=0;for(let i=0;i<n.length;i++){const l=n.charCodeAt(i);s=(s<<5)-s+l,s=s&s}return Math.abs(s)}const N_=/[\u{1F1E0}-\u{1F1FF}]{2}|[\u{1F300}-\u{1F9FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]|[\u{1F600}-\u{1F64F}]|[\u{1F680}-\u{1F6FF}]/u;function F_(n,s){if(!n)return s.slice(0,2).toUpperCase();const i=n.match(N_);if(i)return i[0];const l=n.match(/[a-zA-Z]/g);if(!l||l.length===0)return s.slice(0,2).toUpperCase();const c=n.indexOf(" ");if(c!==-1){const u=l[0],p=n.slice(c+1).match(/[a-zA-Z]/);if(p)return(u+p[0]).toUpperCase()}return l[0].toUpperCase()}function L_(n){const s=R_(n),i=s%360,l=50+(s>>8)%30,c=35+(s>>16)%20,u=`hsl(${i}, ${l}%, ${c}%)`,p=c<45?"#ffffff":"#000000";return{background:u,text:p}}function M_(n,s,i){if(i===oi)return D_;const l=F_(n,s),c=L_(s);return{text:l,background:c.background,textColor:c.text}}function x0({name:n,publicKey:s,size:i=28,contactType:l}){const c=M_(n,s,l);return _.jsx("div",{className:"flex items-center justify-center rounded-full font-semibold flex-shrink-0 select-none",style:{backgroundColor:c.background,color:c.textColor,width:i,height:i,fontSize:i*.45},children:c.text})}const bx="remoteterm-favorites";function ns(n,s,i){return n.some(l=>l.type===s&&l.id===i)}function I_(){try{const n=localStorage.getItem(bx);return n?JSON.parse(n):[]}catch{return[]}}function lm(){try{localStorage.removeItem(bx)}catch{}}function Cx(n){var s,i,l="";if(typeof n=="string"||typeof n=="number")l+=n;else if(typeof n=="object")if(Array.isArray(n)){var c=n.length;for(s=0;s<c;s++)n[s]&&(i=Cx(n[s]))&&(l&&(l+=" "),l+=i)}else for(i in n)n[i]&&(l&&(l+=" "),l+=i);return l}function Ex(){for(var n,s,i=0,l="",c=arguments.length;i<c;i++)(n=arguments[i])&&(s=Cx(n))&&(l&&(l+=" "),l+=s);return l}const O_=(n,s)=>{const i=new Array(n.length+s.length);for(let l=0;l<n.length;l++)i[l]=n[l];for(let l=0;l<s.length;l++)i[n.length+l]=s[l];return i},j_=(n,s)=>({classGroupId:n,validator:s}),kx=(n=new Map,s=null,i)=>({nextPart:n,validators:s,classGroupId:i}),$u="-",cm=[],z_="arbitrary..",H_=n=>{const s=U_(n),{conflictingClassGroups:i,conflictingClassGroupModifiers:l}=n;return{getClassGroupId:p=>{if(p.startsWith("[")&&p.endsWith("]"))return V_(p);const d=p.split($u),g=d[0]===""&&d.length>1?1:0;return Sx(d,g,s)},getConflictingClassGroupIds:(p,d)=>{if(d){const g=l[p],m=i[p];return g?m?O_(m,g):g:m||cm}return i[p]||cm}}},Sx=(n,s,i)=>{if(n.length-s===0)return i.classGroupId;const c=n[s],u=i.nextPart.get(c);if(u){const m=Sx(n,s+1,u);if(m)return m}const p=i.validators;if(p===null)return;const d=s===0?n.join($u):n.slice(s).join($u),g=p.length;for(let m=0;m<g;m++){const x=p[m];if(x.validator(d))return x.classGroupId}},V_=n=>n.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const s=n.slice(1,-1),i=s.indexOf(":"),l=s.slice(0,i);return l?z_+l:void 0})(),U_=n=>{const{theme:s,classGroups:i}=n;return Z_(i,s)},Z_=(n,s)=>{const i=kx();for(const l in n){const c=n[l];O0(c,i,l,s)}return i},O0=(n,s,i,l)=>{const c=n.length;for(let u=0;u<c;u++){const p=n[u];W_(p,s,i,l)}},W_=(n,s,i,l)=>{if(typeof n=="string"){q_(n,s,i);return}if(typeof n=="function"){G_(n,s,i,l);return}$_(n,s,i,l)},q_=(n,s,i)=>{const l=n===""?s:Bx(s,n);l.classGroupId=i},G_=(n,s,i,l)=>{if(K_(n)){O0(n(l),s,i,l);return}s.validators===null&&(s.validators=[]),s.validators.push(j_(i,n))},$_=(n,s,i,l)=>{const c=Object.entries(n),u=c.length;for(let p=0;p<u;p++){const[d,g]=c[p];O0(g,Bx(s,d),i,l)}},Bx=(n,s)=>{let i=n;const l=s.split($u),c=l.length;for(let u=0;u<c;u++){const p=l[u];let d=i.nextPart.get(p);d||(d=kx(),i.nextPart.set(p,d)),i=d}return i},K_=n=>"isThemeGetter"in n&&n.isThemeGetter===!0,Q_=n=>{if(n<1)return{get:()=>{},set:()=>{}};let s=0,i=Object.create(null),l=Object.create(null);const c=(u,p)=>{i[u]=p,s++,s>n&&(s=0,l=i,i=Object.create(null))};return{get(u){let p=i[u];if(p!==void 0)return p;if((p=l[u])!==void 0)return c(u,p),p},set(u,p){u in i?i[u]=p:c(u,p)}}},A0="!",um=":",Y_=[],dm=(n,s,i,l,c)=>({modifiers:n,hasImportantModifier:s,baseClassName:i,maybePostfixModifierPosition:l,isExternal:c}),X_=n=>{const{prefix:s,experimentalParseClassName:i}=n;let l=c=>{const u=[];let p=0,d=0,g=0,m;const x=c.length;for(let C=0;C<x;C++){const w=c[C];if(p===0&&d===0){if(w===um){u.push(c.slice(g,C)),g=C+1;continue}if(w==="/"){m=C;continue}}w==="["?p++:w==="]"?p--:w==="("?d++:w===")"&&d--}const A=u.length===0?c:c.slice(g);let b=A,k=!1;A.endsWith(A0)?(b=A.slice(0,-1),k=!0):A.startsWith(A0)&&(b=A.slice(1),k=!0);const R=m&&m>g?m-g:void 0;return dm(u,k,b,R)};if(s){const c=s+um,u=l;l=p=>p.startsWith(c)?u(p.slice(c.length)):dm(Y_,!1,p,void 0,!0)}if(i){const c=l;l=u=>i({className:u,parseClassName:c})}return l},J_=n=>{const s=new Map;return n.orderSensitiveModifiers.forEach((i,l)=>{s.set(i,1e6+l)}),i=>{const l=[];let c=[];for(let u=0;u<i.length;u++){const p=i[u],d=p[0]==="[",g=s.has(p);d||g?(c.length>0&&(c.sort(),l.push(...c),c=[]),l.push(p)):c.push(p)}return c.length>0&&(c.sort(),l.push(...c)),l}},e1=n=>({cache:Q_(n.cacheSize),parseClassName:X_(n),sortModifiers:J_(n),...H_(n)}),t1=/\s+/,n1=(n,s)=>{const{parseClassName:i,getClassGroupId:l,getConflictingClassGroupIds:c,sortModifiers:u}=s,p=[],d=n.trim().split(t1);let g="";for(let m=d.length-1;m>=0;m-=1){const x=d[m],{isExternal:A,modifiers:b,hasImportantModifier:k,baseClassName:R,maybePostfixModifierPosition:C}=i(x);if(A){g=x+(g.length>0?" "+g:g);continue}let w=!!C,S=l(w?R.substring(0,C):R);if(!S){if(!w){g=x+(g.length>0?" "+g:g);continue}if(S=l(R),!S){g=x+(g.length>0?" "+g:g);continue}w=!1}const P=b.length===0?"":b.length===1?b[0]:u(b).join(":"),N=k?P+A0:P,F=N+S;if(p.indexOf(F)>-1)continue;p.push(F);const M=c(S,w);for(let H=0;H<M.length;++H){const U=M[H];p.push(N+U)}g=x+(g.length>0?" "+g:g)}return g},r1=(...n)=>{let s=0,i,l,c="";for(;s<n.length;)(i=n[s++])&&(l=Px(i))&&(c&&(c+=" "),c+=l);return c},Px=n=>{if(typeof n=="string")return n;let s,i="";for(let l=0;l<n.length;l++)n[l]&&(s=Px(n[l]))&&(i&&(i+=" "),i+=s);return i},i1=(n,...s)=>{let i,l,c,u;const p=g=>{const m=s.reduce((x,A)=>A(x),n());return i=e1(m),l=i.cache.get,c=i.cache.set,u=d,d(g)},d=g=>{const m=l(g);if(m)return m;const x=n1(g,i);return c(g,x),x};return u=p,(...g)=>u(r1(...g))},o1=[],dn=n=>{const s=i=>i[n]||o1;return s.isThemeGetter=!0,s},Tx=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Dx=/^\((?:(\w[\w-]*):)?(.+)\)$/i,s1=/^\d+\/\d+$/,a1=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,l1=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,c1=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,u1=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,d1=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Qs=n=>s1.test(n),gt=n=>!!n&&!Number.isNaN(Number(n)),mo=n=>!!n&&Number.isInteger(Number(n)),e0=n=>n.endsWith("%")&&gt(n.slice(0,-1)),ki=n=>a1.test(n),f1=()=>!0,h1=n=>l1.test(n)&&!c1.test(n),Rx=()=>!1,p1=n=>u1.test(n),m1=n=>d1.test(n),g1=n=>!je(n)&&!ze(n),x1=n=>la(n,Lx,Rx),je=n=>Tx.test(n),Ko=n=>la(n,Mx,h1),t0=n=>la(n,w1,gt),fm=n=>la(n,Nx,Rx),A1=n=>la(n,Fx,m1),Wc=n=>la(n,Ix,p1),ze=n=>Dx.test(n),tl=n=>ca(n,Mx),v1=n=>ca(n,b1),hm=n=>ca(n,Nx),y1=n=>ca(n,Lx),_1=n=>ca(n,Fx),qc=n=>ca(n,Ix,!0),la=(n,s,i)=>{const l=Tx.exec(n);return l?l[1]?s(l[1]):i(l[2]):!1},ca=(n,s,i=!1)=>{const l=Dx.exec(n);return l?l[1]?s(l[1]):i:!1},Nx=n=>n==="position"||n==="percentage",Fx=n=>n==="image"||n==="url",Lx=n=>n==="length"||n==="size"||n==="bg-size",Mx=n=>n==="length",w1=n=>n==="number",b1=n=>n==="family-name",Ix=n=>n==="shadow",C1=()=>{const n=dn("color"),s=dn("font"),i=dn("text"),l=dn("font-weight"),c=dn("tracking"),u=dn("leading"),p=dn("breakpoint"),d=dn("container"),g=dn("spacing"),m=dn("radius"),x=dn("shadow"),A=dn("inset-shadow"),b=dn("text-shadow"),k=dn("drop-shadow"),R=dn("blur"),C=dn("perspective"),w=dn("aspect"),S=dn("ease"),P=dn("animate"),N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],F=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],M=()=>[...F(),ze,je],H=()=>["auto","hidden","clip","visible","scroll"],U=()=>["auto","contain","none"],j=()=>[ze,je,g],ee=()=>[Qs,"full","auto",...j()],Z=()=>[mo,"none","subgrid",ze,je],Y=()=>["auto",{span:["full",mo,ze,je]},mo,ze,je],te=()=>[mo,"auto",ze,je],K=()=>["auto","min","max","fr",ze,je],ae=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Ae=()=>["start","end","center","stretch","center-safe","end-safe"],G=()=>["auto",...j()],se=()=>[Qs,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...j()],W=()=>[n,ze,je],re=()=>[...F(),hm,fm,{position:[ze,je]}],V=()=>["no-repeat",{repeat:["","x","y","space","round"]}],T=()=>["auto","cover","contain",y1,x1,{size:[ze,je]}],z=()=>[e0,tl,Ko],q=()=>["","none","full",m,ze,je],$=()=>["",gt,tl,Ko],ue=()=>["solid","dashed","dotted","double"],pe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ve=()=>[gt,e0,hm,fm],me=()=>["","none",R,ze,je],ge=()=>["none",gt,ze,je],Pe=()=>["none",gt,ze,je],We=()=>[gt,ze,je],Ke=()=>[Qs,"full",...j()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ki],breakpoint:[ki],color:[f1],container:[ki],"drop-shadow":[ki],ease:["in","out","in-out"],font:[g1],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ki],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ki],shadow:[ki],spacing:["px",gt],text:[ki],"text-shadow":[ki],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Qs,je,ze,w]}],container:["container"],columns:[{columns:[gt,je,ze,d]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:M()}],overflow:[{overflow:H()}],"overflow-x":[{"overflow-x":H()}],"overflow-y":[{"overflow-y":H()}],overscroll:[{overscroll:U()}],"overscroll-x":[{"overscroll-x":U()}],"overscroll-y":[{"overscroll-y":U()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:ee()}],"inset-x":[{"inset-x":ee()}],"inset-y":[{"inset-y":ee()}],start:[{start:ee()}],end:[{end:ee()}],top:[{top:ee()}],right:[{right:ee()}],bottom:[{bottom:ee()}],left:[{left:ee()}],visibility:["visible","invisible","collapse"],z:[{z:[mo,"auto",ze,je]}],basis:[{basis:[Qs,"full","auto",d,...j()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[gt,Qs,"auto","initial","none",je]}],grow:[{grow:["",gt,ze,je]}],shrink:[{shrink:["",gt,ze,je]}],order:[{order:[mo,"first","last","none",ze,je]}],"grid-cols":[{"grid-cols":Z()}],"col-start-end":[{col:Y()}],"col-start":[{"col-start":te()}],"col-end":[{"col-end":te()}],"grid-rows":[{"grid-rows":Z()}],"row-start-end":[{row:Y()}],"row-start":[{"row-start":te()}],"row-end":[{"row-end":te()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":K()}],"auto-rows":[{"auto-rows":K()}],gap:[{gap:j()}],"gap-x":[{"gap-x":j()}],"gap-y":[{"gap-y":j()}],"justify-content":[{justify:[...ae(),"normal"]}],"justify-items":[{"justify-items":[...Ae(),"normal"]}],"justify-self":[{"justify-self":["auto",...Ae()]}],"align-content":[{content:["normal",...ae()]}],"align-items":[{items:[...Ae(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Ae(),{baseline:["","last"]}]}],"place-content":[{"place-content":ae()}],"place-items":[{"place-items":[...Ae(),"baseline"]}],"place-self":[{"place-self":["auto",...Ae()]}],p:[{p:j()}],px:[{px:j()}],py:[{py:j()}],ps:[{ps:j()}],pe:[{pe:j()}],pt:[{pt:j()}],pr:[{pr:j()}],pb:[{pb:j()}],pl:[{pl:j()}],m:[{m:G()}],mx:[{mx:G()}],my:[{my:G()}],ms:[{ms:G()}],me:[{me:G()}],mt:[{mt:G()}],mr:[{mr:G()}],mb:[{mb:G()}],ml:[{ml:G()}],"space-x":[{"space-x":j()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":j()}],"space-y-reverse":["space-y-reverse"],size:[{size:se()}],w:[{w:[d,"screen",...se()]}],"min-w":[{"min-w":[d,"screen","none",...se()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[p]},...se()]}],h:[{h:["screen","lh",...se()]}],"min-h":[{"min-h":["screen","lh","none",...se()]}],"max-h":[{"max-h":["screen","lh",...se()]}],"font-size":[{text:["base",i,tl,Ko]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[l,ze,t0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",e0,je]}],"font-family":[{font:[v1,je,s]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[c,ze,je]}],"line-clamp":[{"line-clamp":[gt,"none",ze,t0]}],leading:[{leading:[u,...j()]}],"list-image":[{"list-image":["none",ze,je]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ze,je]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:W()}],"text-color":[{text:W()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ue(),"wavy"]}],"text-decoration-thickness":[{decoration:[gt,"from-font","auto",ze,Ko]}],"text-decoration-color":[{decoration:W()}],"underline-offset":[{"underline-offset":[gt,"auto",ze,je]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ze,je]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ze,je]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:re()}],"bg-repeat":[{bg:V()}],"bg-size":[{bg:T()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},mo,ze,je],radial:["",ze,je],conic:[mo,ze,je]},_1,A1]}],"bg-color":[{bg:W()}],"gradient-from-pos":[{from:z()}],"gradient-via-pos":[{via:z()}],"gradient-to-pos":[{to:z()}],"gradient-from":[{from:W()}],"gradient-via":[{via:W()}],"gradient-to":[{to:W()}],rounded:[{rounded:q()}],"rounded-s":[{"rounded-s":q()}],"rounded-e":[{"rounded-e":q()}],"rounded-t":[{"rounded-t":q()}],"rounded-r":[{"rounded-r":q()}],"rounded-b":[{"rounded-b":q()}],"rounded-l":[{"rounded-l":q()}],"rounded-ss":[{"rounded-ss":q()}],"rounded-se":[{"rounded-se":q()}],"rounded-ee":[{"rounded-ee":q()}],"rounded-es":[{"rounded-es":q()}],"rounded-tl":[{"rounded-tl":q()}],"rounded-tr":[{"rounded-tr":q()}],"rounded-br":[{"rounded-br":q()}],"rounded-bl":[{"rounded-bl":q()}],"border-w":[{border:$()}],"border-w-x":[{"border-x":$()}],"border-w-y":[{"border-y":$()}],"border-w-s":[{"border-s":$()}],"border-w-e":[{"border-e":$()}],"border-w-t":[{"border-t":$()}],"border-w-r":[{"border-r":$()}],"border-w-b":[{"border-b":$()}],"border-w-l":[{"border-l":$()}],"divide-x":[{"divide-x":$()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":$()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ue(),"hidden","none"]}],"divide-style":[{divide:[...ue(),"hidden","none"]}],"border-color":[{border:W()}],"border-color-x":[{"border-x":W()}],"border-color-y":[{"border-y":W()}],"border-color-s":[{"border-s":W()}],"border-color-e":[{"border-e":W()}],"border-color-t":[{"border-t":W()}],"border-color-r":[{"border-r":W()}],"border-color-b":[{"border-b":W()}],"border-color-l":[{"border-l":W()}],"divide-color":[{divide:W()}],"outline-style":[{outline:[...ue(),"none","hidden"]}],"outline-offset":[{"outline-offset":[gt,ze,je]}],"outline-w":[{outline:["",gt,tl,Ko]}],"outline-color":[{outline:W()}],shadow:[{shadow:["","none",x,qc,Wc]}],"shadow-color":[{shadow:W()}],"inset-shadow":[{"inset-shadow":["none",A,qc,Wc]}],"inset-shadow-color":[{"inset-shadow":W()}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:W()}],"ring-offset-w":[{"ring-offset":[gt,Ko]}],"ring-offset-color":[{"ring-offset":W()}],"inset-ring-w":[{"inset-ring":$()}],"inset-ring-color":[{"inset-ring":W()}],"text-shadow":[{"text-shadow":["none",b,qc,Wc]}],"text-shadow-color":[{"text-shadow":W()}],opacity:[{opacity:[gt,ze,je]}],"mix-blend":[{"mix-blend":[...pe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":pe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[gt]}],"mask-image-linear-from-pos":[{"mask-linear-from":ve()}],"mask-image-linear-to-pos":[{"mask-linear-to":ve()}],"mask-image-linear-from-color":[{"mask-linear-from":W()}],"mask-image-linear-to-color":[{"mask-linear-to":W()}],"mask-image-t-from-pos":[{"mask-t-from":ve()}],"mask-image-t-to-pos":[{"mask-t-to":ve()}],"mask-image-t-from-color":[{"mask-t-from":W()}],"mask-image-t-to-color":[{"mask-t-to":W()}],"mask-image-r-from-pos":[{"mask-r-from":ve()}],"mask-image-r-to-pos":[{"mask-r-to":ve()}],"mask-image-r-from-color":[{"mask-r-from":W()}],"mask-image-r-to-color":[{"mask-r-to":W()}],"mask-image-b-from-pos":[{"mask-b-from":ve()}],"mask-image-b-to-pos":[{"mask-b-to":ve()}],"mask-image-b-from-color":[{"mask-b-from":W()}],"mask-image-b-to-color":[{"mask-b-to":W()}],"mask-image-l-from-pos":[{"mask-l-from":ve()}],"mask-image-l-to-pos":[{"mask-l-to":ve()}],"mask-image-l-from-color":[{"mask-l-from":W()}],"mask-image-l-to-color":[{"mask-l-to":W()}],"mask-image-x-from-pos":[{"mask-x-from":ve()}],"mask-image-x-to-pos":[{"mask-x-to":ve()}],"mask-image-x-from-color":[{"mask-x-from":W()}],"mask-image-x-to-color":[{"mask-x-to":W()}],"mask-image-y-from-pos":[{"mask-y-from":ve()}],"mask-image-y-to-pos":[{"mask-y-to":ve()}],"mask-image-y-from-color":[{"mask-y-from":W()}],"mask-image-y-to-color":[{"mask-y-to":W()}],"mask-image-radial":[{"mask-radial":[ze,je]}],"mask-image-radial-from-pos":[{"mask-radial-from":ve()}],"mask-image-radial-to-pos":[{"mask-radial-to":ve()}],"mask-image-radial-from-color":[{"mask-radial-from":W()}],"mask-image-radial-to-color":[{"mask-radial-to":W()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":F()}],"mask-image-conic-pos":[{"mask-conic":[gt]}],"mask-image-conic-from-pos":[{"mask-conic-from":ve()}],"mask-image-conic-to-pos":[{"mask-conic-to":ve()}],"mask-image-conic-from-color":[{"mask-conic-from":W()}],"mask-image-conic-to-color":[{"mask-conic-to":W()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:re()}],"mask-repeat":[{mask:V()}],"mask-size":[{mask:T()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ze,je]}],filter:[{filter:["","none",ze,je]}],blur:[{blur:me()}],brightness:[{brightness:[gt,ze,je]}],contrast:[{contrast:[gt,ze,je]}],"drop-shadow":[{"drop-shadow":["","none",k,qc,Wc]}],"drop-shadow-color":[{"drop-shadow":W()}],grayscale:[{grayscale:["",gt,ze,je]}],"hue-rotate":[{"hue-rotate":[gt,ze,je]}],invert:[{invert:["",gt,ze,je]}],saturate:[{saturate:[gt,ze,je]}],sepia:[{sepia:["",gt,ze,je]}],"backdrop-filter":[{"backdrop-filter":["","none",ze,je]}],"backdrop-blur":[{"backdrop-blur":me()}],"backdrop-brightness":[{"backdrop-brightness":[gt,ze,je]}],"backdrop-contrast":[{"backdrop-contrast":[gt,ze,je]}],"backdrop-grayscale":[{"backdrop-grayscale":["",gt,ze,je]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[gt,ze,je]}],"backdrop-invert":[{"backdrop-invert":["",gt,ze,je]}],"backdrop-opacity":[{"backdrop-opacity":[gt,ze,je]}],"backdrop-saturate":[{"backdrop-saturate":[gt,ze,je]}],"backdrop-sepia":[{"backdrop-sepia":["",gt,ze,je]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":j()}],"border-spacing-x":[{"border-spacing-x":j()}],"border-spacing-y":[{"border-spacing-y":j()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ze,je]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[gt,"initial",ze,je]}],ease:[{ease:["linear","initial",S,ze,je]}],delay:[{delay:[gt,ze,je]}],animate:[{animate:["none",P,ze,je]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[C,ze,je]}],"perspective-origin":[{"perspective-origin":M()}],rotate:[{rotate:ge()}],"rotate-x":[{"rotate-x":ge()}],"rotate-y":[{"rotate-y":ge()}],"rotate-z":[{"rotate-z":ge()}],scale:[{scale:Pe()}],"scale-x":[{"scale-x":Pe()}],"scale-y":[{"scale-y":Pe()}],"scale-z":[{"scale-z":Pe()}],"scale-3d":["scale-3d"],skew:[{skew:We()}],"skew-x":[{"skew-x":We()}],"skew-y":[{"skew-y":We()}],transform:[{transform:[ze,je,"","none","gpu","cpu"]}],"transform-origin":[{origin:M()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ke()}],"translate-x":[{"translate-x":Ke()}],"translate-y":[{"translate-y":Ke()}],"translate-z":[{"translate-z":Ke()}],"translate-none":["translate-none"],accent:[{accent:W()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:W()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ze,je]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ze,je]}],fill:[{fill:["none",...W()]}],"stroke-w":[{stroke:[gt,tl,Ko,t0]}],stroke:[{stroke:["none",...W()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},E1=i1(C1);function ft(...n){return E1(Ex(n))}const Xt=D.forwardRef(({className:n,type:s,...i},l)=>_.jsx("input",{type:s,className:ft("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:l,...i}));Xt.displayName="Input";function pm(n,s){if(typeof n=="function")return n(s);n!=null&&(n.current=s)}function El(...n){return s=>{let i=!1;const l=n.map(c=>{const u=pm(c,s);return!i&&typeof u=="function"&&(i=!0),u});if(i)return()=>{for(let c=0;c<l.length;c++){const u=l[c];typeof u=="function"?u():pm(n[c],null)}}}}function kr(...n){return D.useCallback(El(...n),n)}var k1=Symbol.for("react.lazy"),Ku=L0[" use ".trim().toString()];function S1(n){return typeof n=="object"&&n!==null&&"then"in n}function Ox(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===k1&&"_payload"in n&&S1(n._payload)}function j0(n){const s=P1(n),i=D.forwardRef((l,c)=>{let{children:u,...p}=l;Ox(u)&&typeof Ku=="function"&&(u=Ku(u._payload));const d=D.Children.toArray(u),g=d.find(D1);if(g){const m=g.props.children,x=d.map(A=>A===g?D.Children.count(m)>1?D.Children.only(null):D.isValidElement(m)?m.props.children:null:A);return _.jsx(s,{...p,ref:c,children:D.isValidElement(m)?D.cloneElement(m,void 0,x):null})}return _.jsx(s,{...p,ref:c,children:u})});return i.displayName=`${n}.Slot`,i}var B1=j0("Slot");function P1(n){const s=D.forwardRef((i,l)=>{let{children:c,...u}=i;if(Ox(c)&&typeof Ku=="function"&&(c=Ku(c._payload)),D.isValidElement(c)){const p=N1(c),d=R1(u,c.props);return c.type!==D.Fragment&&(d.ref=l?El(l,p):p),D.cloneElement(c,d)}return D.Children.count(c)>1?D.Children.only(null):null});return s.displayName=`${n}.SlotClone`,s}var T1=Symbol("radix.slottable");function D1(n){return D.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===T1}function R1(n,s){const i={...s};for(const l in s){const c=n[l],u=s[l];/^on[A-Z]/.test(l)?c&&u?i[l]=(...d)=>{const g=u(...d);return c(...d),g}:c&&(i[l]=c):l==="style"?i[l]={...c,...u}:l==="className"&&(i[l]=[c,u].filter(Boolean).join(" "))}return{...n,...i}}function N1(n){var l,c;let s=(l=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:l.get,i=s&&"isReactWarning"in s&&s.isReactWarning;return i?n.ref:(s=(c=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:c.get,i=s&&"isReactWarning"in s&&s.isReactWarning,i?n.props.ref:n.props.ref||n.ref)}const mm=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,gm=Ex,z0=(n,s)=>i=>{var l;if((s==null?void 0:s.variants)==null)return gm(n,i==null?void 0:i.class,i==null?void 0:i.className);const{variants:c,defaultVariants:u}=s,p=Object.keys(c).map(m=>{const x=i==null?void 0:i[m],A=u==null?void 0:u[m];if(x===null)return null;const b=mm(x)||mm(A);return c[m][b]}),d=i&&Object.entries(i).reduce((m,x)=>{let[A,b]=x;return b===void 0||(m[A]=b),m},{}),g=s==null||(l=s.compoundVariants)===null||l===void 0?void 0:l.reduce((m,x)=>{let{class:A,className:b,...k}=x;return Object.entries(k).every(R=>{let[C,w]=R;return Array.isArray(w)?w.includes({...u,...d}[C]):{...u,...d}[C]===w})?[...m,A,b]:m},[]);return gm(n,p,g,i==null?void 0:i.class,i==null?void 0:i.className)},F1=z0("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Jt=D.forwardRef(({className:n,variant:s,size:i,asChild:l=!1,...c},u)=>{const p=l?B1:"button";return _.jsx(p,{className:ft(F1({variant:s,size:i,className:n})),ref:u,...c})});Jt.displayName="Button";function L1({contacts:n,channels:s,activeConversation:i,onSelectConversation:l,onNewMessage:c,lastMessageTimes:u,unreadCounts:p,mentions:d,showCracker:g,crackerRunning:m,onToggleCracker:x,onMarkAllRead:A,favorites:b,sortOrder:k="recent",onSortOrderChange:R}){const C=k,[w,S]=D.useState(""),P=()=>{const V=C==="alpha"?"recent":"alpha";R==null||R(V)},N=V=>{S(""),l(V)},F=(V,T)=>(i==null?void 0:i.type)===V&&(i==null?void 0:i.id)===T,M=(V,T)=>{const z=Ao(V,T);return p[z]||0},H=(V,T)=>{const z=Ao(V,T);return d[z]||!1},U=(V,T)=>{const z=Ao(V,T);return u[z]||0},j=s.reduce((V,T)=>(V.some(z=>z.name===T.name)||V.push(T),V),[]),ee=n.filter(V=>V.public_key&&V.public_key.length>0).sort((V,T)=>V.name&&!T.name?-1:!V.name&&T.name?1:(V.name||"").localeCompare(T.name||"")).reduce((V,T)=>(V.some(z=>z.public_key===T.public_key)||V.push(T),V),[]),Z=[...j].sort((V,T)=>{if(V.name==="Public")return-1;if(T.name==="Public")return 1;if(C==="recent"){const z=U("channel",V.key),q=U("channel",T.key);if(z&&q)return q-z;if(z&&!q)return-1;if(!z&&q)return 1}return V.name.localeCompare(T.name)}),Y=[...ee].sort((V,T)=>{const z=V.type===oi,q=T.type===oi;if(z&&!q)return 1;if(!z&&q)return-1;if(z&&q)return(V.name||V.public_key).localeCompare(T.name||T.public_key);if(C==="recent"){const $=U("contact",V.public_key),ue=U("contact",T.public_key);if($&&ue)return ue-$;if($&&!ue)return-1;if(!$&&ue)return 1}return(V.name||V.public_key).localeCompare(T.name||T.public_key)}),te=w.toLowerCase().trim(),K=te?Z.filter(V=>V.name.toLowerCase().includes(te)||V.key.toLowerCase().includes(te)):Z,ae=te?Y.filter(V=>{var T;return((T=V.name)==null?void 0:T.toLowerCase().includes(te))||V.public_key.toLowerCase().includes(te)}):Y,Ae=K.filter(V=>ns(b,"channel",V.key)),G=ae.filter(V=>ns(b,"contact",V.public_key)),se=K.filter(V=>!ns(b,"channel",V.key)),W=ae.filter(V=>!ns(b,"contact",V.public_key)),re=[...Ae.map(V=>({type:"channel",channel:V})),...G.map(V=>({type:"contact",contact:V}))].sort((V,T)=>{const z=V.type==="channel"?U("channel",V.channel.key):U("contact",V.contact.public_key),q=T.type==="channel"?U("channel",T.channel.key):U("contact",T.contact.public_key);if(z&&q)return q-z;if(z&&!q)return-1;if(!z&&q)return 1;const $=V.type==="channel"?V.channel.name:V.contact.name||V.contact.public_key,ue=T.type==="channel"?T.channel.name:T.contact.name||T.contact.public_key;return $.localeCompare(ue)});return _.jsxs("div",{className:"sidebar w-60 h-full min-h-0 bg-card border-r border-border flex flex-col",children:[_.jsxs("div",{className:"flex justify-between items-center px-3 py-3 border-b border-border",children:[_.jsx("h2",{className:"text-xs uppercase text-muted-foreground font-medium",children:"Conversations"}),_.jsx(Jt,{variant:"ghost",size:"sm",onClick:c,title:"New Message",className:"h-6 w-6 p-0 text-muted-foreground hover:text-foreground",children:"+"})]}),_.jsxs("div",{className:"relative px-3 py-2 border-b border-border",children:[_.jsx(Xt,{type:"text",placeholder:"Search...",value:w,onChange:V=>S(V.target.value),className:"h-8 text-sm pr-8"}),w&&_.jsx("button",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground text-lg leading-none",onClick:()=>S(""),title:"Clear search",children:""})]}),_.jsxs("div",{className:"flex-1 overflow-y-auto",children:[!te&&_.jsxs("div",{className:ft("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",F("raw","raw")&&"bg-accent border-l-primary"),onClick:()=>N({type:"raw",id:"raw",name:"Raw Packet Feed"}),children:[_.jsx("span",{className:"text-muted-foreground text-xs",children:""}),_.jsx("span",{className:"flex-1 truncate",children:"Packet Feed"})]}),!te&&_.jsxs("div",{className:ft("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",F("map","map")&&"bg-accent border-l-primary"),onClick:()=>N({type:"map",id:"map",name:"Node Map"}),children:[_.jsx("span",{className:"text-muted-foreground text-xs",children:""}),_.jsx("span",{className:"flex-1 truncate",children:"Node Map"})]}),!te&&_.jsxs("div",{className:ft("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",F("visualizer","visualizer")&&"bg-accent border-l-primary"),onClick:()=>N({type:"visualizer",id:"visualizer",name:"Mesh Visualizer"}),children:[_.jsx("span",{className:"text-muted-foreground text-xs",children:""}),_.jsx("span",{className:"flex-1 truncate",children:"Mesh Visualizer"})]}),!te&&_.jsxs("div",{className:ft("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",g&&"bg-accent border-l-primary"),onClick:x,children:[_.jsx("span",{className:"text-muted-foreground text-xs",children:""}),_.jsxs("span",{className:"flex-1 truncate",children:[g?"Hide":"Show"," Room Finder",_.jsxs("span",{className:ft("ml-1 text-xs",m?"text-green-500":"text-muted-foreground"),children:["(",m?"running":"stopped",")"]})]})]}),!te&&Object.keys(p).length>0&&_.jsxs("div",{className:"px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",onClick:A,children:[_.jsx("span",{className:"text-muted-foreground text-xs",children:""}),_.jsx("span",{className:"flex-1 truncate text-muted-foreground",children:"Mark all as read"})]}),re.length>0&&_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"flex justify-between items-center px-3 py-2 pt-3",children:_.jsx("span",{className:"text-[11px] uppercase text-muted-foreground",children:"Favorites"})}),re.map(V=>{if(V.type==="channel"){const T=V.channel,z=M("channel",T.key),q=H("channel",T.key);return _.jsxs("div",{className:ft("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",F("channel",T.key)&&"bg-accent border-l-primary",z>0&&"[&_.name]:font-bold [&_.name]:text-foreground"),onClick:()=>N({type:"channel",id:T.key,name:T.name}),children:[_.jsx("span",{className:"name flex-1 truncate",children:T.name}),z>0&&_.jsx("span",{className:ft("text-[10px] font-semibold px-1.5 py-0.5 rounded-full min-w-[18px] text-center",q?"bg-destructive text-destructive-foreground":"bg-primary text-primary-foreground"),children:z})]},`fav-chan-${T.key}`)}else{const T=V.contact,z=M("contact",T.public_key),q=H("contact",T.public_key);return _.jsxs("div",{className:ft("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",F("contact",T.public_key)&&"bg-accent border-l-primary",z>0&&"[&_.name]:font-bold [&_.name]:text-foreground"),onClick:()=>N({type:"contact",id:T.public_key,name:Ri(T.name,T.public_key)}),children:[_.jsx(x0,{name:T.name,publicKey:T.public_key,size:24,contactType:T.type}),_.jsx("span",{className:"name flex-1 truncate",children:Ri(T.name,T.public_key)}),z>0&&_.jsx("span",{className:ft("text-[10px] font-semibold px-1.5 py-0.5 rounded-full min-w-[18px] text-center",q?"bg-destructive text-destructive-foreground":"bg-primary text-primary-foreground"),children:z})]},`fav-contact-${T.public_key}`)}})]}),se.length>0&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"flex justify-between items-center px-3 py-2 pt-3",children:[_.jsx("span",{className:"text-[11px] uppercase text-muted-foreground",children:"Channels"}),_.jsx("button",{className:"bg-transparent border border-border text-muted-foreground px-1.5 py-0.5 text-[10px] rounded hover:bg-accent hover:text-foreground",onClick:P,title:C==="alpha"?"Sort by recent":"Sort alphabetically",children:C==="alpha"?"A-Z":""})]}),se.map(V=>{const T=M("channel",V.key),z=H("channel",V.key);return _.jsxs("div",{className:ft("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",F("channel",V.key)&&"bg-accent border-l-primary",T>0&&"[&_.name]:font-bold [&_.name]:text-foreground"),onClick:()=>N({type:"channel",id:V.key,name:V.name}),children:[_.jsx("span",{className:"name flex-1 truncate",children:V.name}),T>0&&_.jsx("span",{className:ft("text-[10px] font-semibold px-1.5 py-0.5 rounded-full min-w-[18px] text-center",z?"bg-destructive text-destructive-foreground":"bg-primary text-primary-foreground"),children:T})]},`chan-${V.key}`)})]}),W.length>0&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"flex justify-between items-center px-3 py-2 pt-3",children:[_.jsx("span",{className:"text-[11px] uppercase text-muted-foreground",children:"Contacts"}),se.length===0&&_.jsx("button",{className:"bg-transparent border border-border text-muted-foreground px-1.5 py-0.5 text-[10px] rounded hover:bg-accent hover:text-foreground",onClick:P,title:C==="alpha"?"Sort by recent":"Sort alphabetically",children:C==="alpha"?"A-Z":""})]}),W.map(V=>{const T=M("contact",V.public_key),z=H("contact",V.public_key);return _.jsxs("div",{className:ft("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",F("contact",V.public_key)&&"bg-accent border-l-primary",T>0&&"[&_.name]:font-bold [&_.name]:text-foreground"),onClick:()=>N({type:"contact",id:V.public_key,name:Ri(V.name,V.public_key)}),children:[_.jsx(x0,{name:V.name,publicKey:V.public_key,size:24,contactType:V.type}),_.jsx("span",{className:"name flex-1 truncate",children:Ri(V.name,V.public_key)}),T>0&&_.jsx("span",{className:ft("text-[10px] font-semibold px-1.5 py-0.5 rounded-full min-w-[18px] text-center",z?"bg-destructive text-destructive-foreground":"bg-primary text-primary-foreground"),children:T})]},V.public_key)})]}),W.length===0&&se.length===0&&re.length===0&&_.jsx("div",{className:"p-5 text-center text-muted-foreground",children:te?"No matches found":"No conversations yet"})]})]})}function xm(n){const s=n.indexOf(": ");if(s>0&&s<50){const i=n.substring(0,s);if(!i.includes(":"))return{sender:i,content:n.substring(s+2)}}return{sender:null,content:n}}function ra(n){const s=new Date(n*1e3),i=new Date,l=s.toDateString()===i.toDateString(),c=s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return l?c:`${s.toLocaleDateString([],{month:"short",day:"numeric"})} ${c}`}function M1(n){if(!n||n.length===0)return[];const s=n.toUpperCase(),i=[];for(let l=0;l<s.length;l+=2)l+1<s.length&&i.push(s.slice(l,l+2));return i}function I1(n,s,i=!0){const l=n.toUpperCase();return s.filter(c=>i&&c.type!==oi?!1:c.public_key.toUpperCase().startsWith(l))}function jr(n,s,i,l){if(n===null||s===null||i===null||l===null)return null;const c=6371,u=Gc(i-n),p=Gc(l-s),d=Math.sin(u/2)*Math.sin(u/2)+Math.cos(Gc(n))*Math.cos(Gc(i))*Math.sin(p/2)*Math.sin(p/2),g=2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d));return c*g}function Gc(n){return n*Math.PI/180}function Bt(n,s){return!(n===null||s===null||n===0&&s===0)}function rs(n){return n<1?`${Math.round(n*1e3)}m`:`${n.toFixed(1)}km`}function O1(n,s,i){return s===null||i===null?n:[...n].sort((l,c)=>{const u=jr(s,i,l.lat,l.lon),p=jr(s,i,c.lat,c.lon);return u===null&&p===null?0:u===null?1:p===null?-1:u-p})}function j1(n){return!n||n.length===0?0:Math.floor(n.length/2)}function z1(n){if(!n||n.length===0)return{display:"",allDirect:!0,hasMultiple:!1};const s=n.map(p=>j1(p.path)).sort((p,d)=>p-d),i=s.every(p=>p===0),l=n.length>1;return{display:s.map(p=>p===0?"d":p.toString()).join("/"),allDirect:i,hasMultiple:l}}function H1(n,s,i,l){var C;const c=M1(n),u=s.publicKeyOrPrefix.toUpperCase().slice(0,2),p={name:s.name,prefix:u,lat:s.lat,lon:s.lon},d=((C=l==null?void 0:l.public_key)==null?void 0:C.toUpperCase().slice(0,2))||"??",g={name:(l==null?void 0:l.name)||"Unknown",prefix:d,lat:(l==null?void 0:l.lat)??null,lon:(l==null?void 0:l.lon)??null,publicKey:(l==null?void 0:l.public_key)??null},m=[];let x=s.lat,A=s.lon,b=!Bt(s.lat,s.lon);for(const w of c){const S=I1(w,i,!0),P=O1(S,x,A);let N=null;const F=P.length===1&&Bt(P[0].lat,P[0].lon);!b&&F&&(N=jr(x,A,P[0].lat,P[0].lon)),m.push({prefix:w,matches:P,distanceFromPrev:N}),P.length===0?(b=!0,x=null,A=null):P.length>1?(b=!0,Bt(P[0].lat,P[0].lon)?(x=P[0].lat,A=P[0].lon):(x=null,A=null)):Bt(P[0].lat,P[0].lon)?(b=!1,x=P[0].lat,A=P[0].lon):(b=!0,x=null,A=null)}const k=V1(p,m,g),R=!Bt(p.lat,p.lon)||!Bt(g.lat,g.lon)||m.some(w=>w.matches.length!==1||!Bt(w.matches[0].lat,w.matches[0].lon));return{sender:p,hops:m,receiver:g,totalDistances:k,hasGaps:R}}function V1(n,s,i){if(s.length===0){if(!Bt(n.lat,n.lon)||!Bt(i.lat,i.lon))return null;const m=jr(n.lat,n.lon,i.lat,i.lon);return m!==null?[m]:null}let l=n.lat,c=n.lon,u=0;if(!Bt(l,c)){for(let m=0;m<s.length;m++){const x=s[m];if(x.matches.length===1&&Bt(x.matches[0].lat,x.matches[0].lon)){l=x.matches[0].lat,c=x.matches[0].lon,u=m+1;break}}if(!Bt(l,c))return null}let p=0,d=!1,g=-1;for(let m=u;m<s.length;m++){const x=s[m];if(x.matches.length!==1||!Bt(x.matches[0].lat,x.matches[0].lon)){l=null,c=null;continue}if(l!==null&&c!==null){const A=jr(l,c,x.matches[0].lat,x.matches[0].lon);A!==null&&(p+=A,d=!0)}l=x.matches[0].lat,c=x.matches[0].lon,g=m}if(g===s.length-1&&l!==null&&c!==null&&Bt(i.lat,i.lon)){const m=jr(l,c,i.lat,i.lon);m!==null&&(p+=m,d=!0)}return d?[p]:null}function hn(n,s,{checkForDefaultPrevented:i=!0}={}){return function(c){if(n==null||n(c),i===!1||!c.defaultPrevented)return s==null?void 0:s(c)}}function U1(n,s){const i=D.createContext(s),l=u=>{const{children:p,...d}=u,g=D.useMemo(()=>d,Object.values(d));return _.jsx(i.Provider,{value:g,children:p})};l.displayName=n+"Provider";function c(u){const p=D.useContext(i);if(p)return p;if(s!==void 0)return s;throw new Error(`\`${u}\` must be used within \`${n}\``)}return[l,c]}function kl(n,s=[]){let i=[];function l(u,p){const d=D.createContext(p),g=i.length;i=[...i,p];const m=A=>{var S;const{scope:b,children:k,...R}=A,C=((S=b==null?void 0:b[n])==null?void 0:S[g])||d,w=D.useMemo(()=>R,Object.values(R));return _.jsx(C.Provider,{value:w,children:k})};m.displayName=u+"Provider";function x(A,b){var C;const k=((C=b==null?void 0:b[n])==null?void 0:C[g])||d,R=D.useContext(k);if(R)return R;if(p!==void 0)return p;throw new Error(`\`${A}\` must be used within \`${u}\``)}return[m,x]}const c=()=>{const u=i.map(p=>D.createContext(p));return function(d){const g=(d==null?void 0:d[n])||u;return D.useMemo(()=>({[`__scope${n}`]:{...d,[n]:g}}),[d,g])}};return c.scopeName=n,[l,Z1(c,...s)]}function Z1(...n){const s=n[0];if(n.length===1)return s;const i=()=>{const l=n.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(u){const p=l.reduce((d,{useScope:g,scopeName:m})=>{const A=g(u)[`__scope${m}`];return{...d,...A}},{});return D.useMemo(()=>({[`__scope${s.scopeName}`]:p}),[p])}};return i.scopeName=s.scopeName,i}var ia=globalThis!=null&&globalThis.document?D.useLayoutEffect:()=>{},W1=L0[" useId ".trim().toString()]||(()=>{}),q1=0;function yl(n){const[s,i]=D.useState(W1());return ia(()=>{i(l=>l??String(q1++))},[n]),s?`radix-${s}`:""}var G1=L0[" useInsertionEffect ".trim().toString()]||ia;function rd({prop:n,defaultProp:s,onChange:i=()=>{},caller:l}){const[c,u,p]=$1({defaultProp:s,onChange:i}),d=n!==void 0,g=d?n:c;{const x=D.useRef(n!==void 0);D.useEffect(()=>{const A=x.current;A!==d&&console.warn(`${l} is changing from ${A?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),x.current=d},[d,l])}const m=D.useCallback(x=>{var A;if(d){const b=K1(x)?x(n):x;b!==n&&((A=p.current)==null||A.call(p,b))}else u(x)},[d,n,u,p]);return[g,m]}function $1({defaultProp:n,onChange:s}){const[i,l]=D.useState(n),c=D.useRef(i),u=D.useRef(s);return G1(()=>{u.current=s},[s]),D.useEffect(()=>{var p;c.current!==i&&((p=u.current)==null||p.call(u,i),c.current=i)},[i,c]),[i,l,u]}function K1(n){return typeof n=="function"}function Q1(n){const s=Y1(n),i=D.forwardRef((l,c)=>{const{children:u,...p}=l,d=D.Children.toArray(u),g=d.find(J1);if(g){const m=g.props.children,x=d.map(A=>A===g?D.Children.count(m)>1?D.Children.only(null):D.isValidElement(m)?m.props.children:null:A);return _.jsx(s,{...p,ref:c,children:D.isValidElement(m)?D.cloneElement(m,void 0,x):null})}return _.jsx(s,{...p,ref:c,children:u})});return i.displayName=`${n}.Slot`,i}function Y1(n){const s=D.forwardRef((i,l)=>{const{children:c,...u}=i;if(D.isValidElement(c)){const p=tw(c),d=ew(u,c.props);return c.type!==D.Fragment&&(d.ref=l?El(l,p):p),D.cloneElement(c,d)}return D.Children.count(c)>1?D.Children.only(null):null});return s.displayName=`${n}.SlotClone`,s}var X1=Symbol("radix.slottable");function J1(n){return D.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===X1}function ew(n,s){const i={...s};for(const l in s){const c=n[l],u=s[l];/^on[A-Z]/.test(l)?c&&u?i[l]=(...d)=>{const g=u(...d);return c(...d),g}:c&&(i[l]=c):l==="style"?i[l]={...c,...u}:l==="className"&&(i[l]=[c,u].filter(Boolean).join(" "))}return{...n,...i}}function tw(n){var l,c;let s=(l=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:l.get,i=s&&"isReactWarning"in s&&s.isReactWarning;return i?n.ref:(s=(c=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:c.get,i=s&&"isReactWarning"in s&&s.isReactWarning,i?n.props.ref:n.props.ref||n.ref)}var nw=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],An=nw.reduce((n,s)=>{const i=Q1(`Primitive.${s}`),l=D.forwardRef((c,u)=>{const{asChild:p,...d}=c,g=p?i:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),_.jsx(g,{...d,ref:u})});return l.displayName=`Primitive.${s}`,{...n,[s]:l}},{});function rw(n,s){n&&M0.flushSync(()=>n.dispatchEvent(s))}function oa(n){const s=D.useRef(n);return D.useEffect(()=>{s.current=n}),D.useMemo(()=>(...i)=>{var l;return(l=s.current)==null?void 0:l.call(s,...i)},[])}function iw(n,s=globalThis==null?void 0:globalThis.document){const i=oa(n);D.useEffect(()=>{const l=c=>{c.key==="Escape"&&i(c)};return s.addEventListener("keydown",l,{capture:!0}),()=>s.removeEventListener("keydown",l,{capture:!0})},[i,s])}var ow="DismissableLayer",v0="dismissableLayer.update",sw="dismissableLayer.pointerDownOutside",aw="dismissableLayer.focusOutside",Am,jx=D.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),zx=D.forwardRef((n,s)=>{const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:p,onDismiss:d,...g}=n,m=D.useContext(jx),[x,A]=D.useState(null),b=(x==null?void 0:x.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,k]=D.useState({}),R=kr(s,U=>A(U)),C=Array.from(m.layers),[w]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),S=C.indexOf(w),P=x?C.indexOf(x):-1,N=m.layersWithOutsidePointerEventsDisabled.size>0,F=P>=S,M=uw(U=>{const j=U.target,ee=[...m.branches].some(Z=>Z.contains(j));!F||ee||(c==null||c(U),p==null||p(U),U.defaultPrevented||d==null||d())},b),H=dw(U=>{const j=U.target;[...m.branches].some(Z=>Z.contains(j))||(u==null||u(U),p==null||p(U),U.defaultPrevented||d==null||d())},b);return iw(U=>{P===m.layers.size-1&&(l==null||l(U),!U.defaultPrevented&&d&&(U.preventDefault(),d()))},b),D.useEffect(()=>{if(x)return i&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(Am=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(x)),m.layers.add(x),vm(),()=>{i&&m.layersWithOutsidePointerEventsDisabled.size===1&&(b.body.style.pointerEvents=Am)}},[x,b,i,m]),D.useEffect(()=>()=>{x&&(m.layers.delete(x),m.layersWithOutsidePointerEventsDisabled.delete(x),vm())},[x,m]),D.useEffect(()=>{const U=()=>k({});return document.addEventListener(v0,U),()=>document.removeEventListener(v0,U)},[]),_.jsx(An.div,{...g,ref:R,style:{pointerEvents:N?F?"auto":"none":void 0,...n.style},onFocusCapture:hn(n.onFocusCapture,H.onFocusCapture),onBlurCapture:hn(n.onBlurCapture,H.onBlurCapture),onPointerDownCapture:hn(n.onPointerDownCapture,M.onPointerDownCapture)})});zx.displayName=ow;var lw="DismissableLayerBranch",cw=D.forwardRef((n,s)=>{const i=D.useContext(jx),l=D.useRef(null),c=kr(s,l);return D.useEffect(()=>{const u=l.current;if(u)return i.branches.add(u),()=>{i.branches.delete(u)}},[i.branches]),_.jsx(An.div,{...n,ref:c})});cw.displayName=lw;function uw(n,s=globalThis==null?void 0:globalThis.document){const i=oa(n),l=D.useRef(!1),c=D.useRef(()=>{});return D.useEffect(()=>{const u=d=>{if(d.target&&!l.current){let g=function(){Hx(sw,i,m,{discrete:!0})};const m={originalEvent:d};d.pointerType==="touch"?(s.removeEventListener("click",c.current),c.current=g,s.addEventListener("click",c.current,{once:!0})):g()}else s.removeEventListener("click",c.current);l.current=!1},p=window.setTimeout(()=>{s.addEventListener("pointerdown",u)},0);return()=>{window.clearTimeout(p),s.removeEventListener("pointerdown",u),s.removeEventListener("click",c.current)}},[s,i]),{onPointerDownCapture:()=>l.current=!0}}function dw(n,s=globalThis==null?void 0:globalThis.document){const i=oa(n),l=D.useRef(!1);return D.useEffect(()=>{const c=u=>{u.target&&!l.current&&Hx(aw,i,{originalEvent:u},{discrete:!1})};return s.addEventListener("focusin",c),()=>s.removeEventListener("focusin",c)},[s,i]),{onFocusCapture:()=>l.current=!0,onBlurCapture:()=>l.current=!1}}function vm(){const n=new CustomEvent(v0);document.dispatchEvent(n)}function Hx(n,s,i,{discrete:l}){const c=i.originalEvent.target,u=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:i});s&&c.addEventListener(n,s,{once:!0}),l?rw(c,u):c.dispatchEvent(u)}var n0="focusScope.autoFocusOnMount",r0="focusScope.autoFocusOnUnmount",ym={bubbles:!1,cancelable:!0},fw="FocusScope",Vx=D.forwardRef((n,s)=>{const{loop:i=!1,trapped:l=!1,onMountAutoFocus:c,onUnmountAutoFocus:u,...p}=n,[d,g]=D.useState(null),m=oa(c),x=oa(u),A=D.useRef(null),b=kr(s,C=>g(C)),k=D.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;D.useEffect(()=>{if(l){let C=function(N){if(k.paused||!d)return;const F=N.target;d.contains(F)?A.current=F:go(A.current,{select:!0})},w=function(N){if(k.paused||!d)return;const F=N.relatedTarget;F!==null&&(d.contains(F)||go(A.current,{select:!0}))},S=function(N){if(document.activeElement===document.body)for(const M of N)M.removedNodes.length>0&&go(d)};document.addEventListener("focusin",C),document.addEventListener("focusout",w);const P=new MutationObserver(S);return d&&P.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",C),document.removeEventListener("focusout",w),P.disconnect()}}},[l,d,k.paused]),D.useEffect(()=>{if(d){wm.add(k);const C=document.activeElement;if(!d.contains(C)){const S=new CustomEvent(n0,ym);d.addEventListener(n0,m),d.dispatchEvent(S),S.defaultPrevented||(hw(Aw(Ux(d)),{select:!0}),document.activeElement===C&&go(d))}return()=>{d.removeEventListener(n0,m),setTimeout(()=>{const S=new CustomEvent(r0,ym);d.addEventListener(r0,x),d.dispatchEvent(S),S.defaultPrevented||go(C??document.body,{select:!0}),d.removeEventListener(r0,x),wm.remove(k)},0)}}},[d,m,x,k]);const R=D.useCallback(C=>{if(!i&&!l||k.paused)return;const w=C.key==="Tab"&&!C.altKey&&!C.ctrlKey&&!C.metaKey,S=document.activeElement;if(w&&S){const P=C.currentTarget,[N,F]=pw(P);N&&F?!C.shiftKey&&S===F?(C.preventDefault(),i&&go(N,{select:!0})):C.shiftKey&&S===N&&(C.preventDefault(),i&&go(F,{select:!0})):S===P&&C.preventDefault()}},[i,l,k.paused]);return _.jsx(An.div,{tabIndex:-1,...p,ref:b,onKeyDown:R})});Vx.displayName=fw;function hw(n,{select:s=!1}={}){const i=document.activeElement;for(const l of n)if(go(l,{select:s}),document.activeElement!==i)return}function pw(n){const s=Ux(n),i=_m(s,n),l=_m(s.reverse(),n);return[i,l]}function Ux(n){const s=[],i=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:l=>{const c=l.tagName==="INPUT"&&l.type==="hidden";return l.disabled||l.hidden||c?NodeFilter.FILTER_SKIP:l.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)s.push(i.currentNode);return s}function _m(n,s){for(const i of n)if(!mw(i,{upTo:s}))return i}function mw(n,{upTo:s}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(s!==void 0&&n===s)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function gw(n){return n instanceof HTMLInputElement&&"select"in n}function go(n,{select:s=!1}={}){if(n&&n.focus){const i=document.activeElement;n.focus({preventScroll:!0}),n!==i&&gw(n)&&s&&n.select()}}var wm=xw();function xw(){let n=[];return{add(s){const i=n[0];s!==i&&(i==null||i.pause()),n=bm(n,s),n.unshift(s)},remove(s){var i;n=bm(n,s),(i=n[0])==null||i.resume()}}}function bm(n,s){const i=[...n],l=i.indexOf(s);return l!==-1&&i.splice(l,1),i}function Aw(n){return n.filter(s=>s.tagName!=="A")}var vw="Portal",Zx=D.forwardRef((n,s)=>{var d;const{container:i,...l}=n,[c,u]=D.useState(!1);ia(()=>u(!0),[]);const p=i||c&&((d=globalThis==null?void 0:globalThis.document)==null?void 0:d.body);return p?yx.createPortal(_.jsx(An.div,{...l,ref:s}),p):null});Zx.displayName=vw;function yw(n,s){return D.useReducer((i,l)=>s[i][l]??i,n)}var ua=n=>{const{present:s,children:i}=n,l=_w(s),c=typeof i=="function"?i({present:l.isPresent}):D.Children.only(i),u=kr(l.ref,ww(c));return typeof i=="function"||l.isPresent?D.cloneElement(c,{ref:u}):null};ua.displayName="Presence";function _w(n){const[s,i]=D.useState(),l=D.useRef(null),c=D.useRef(n),u=D.useRef("none"),p=n?"mounted":"unmounted",[d,g]=yw(p,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return D.useEffect(()=>{const m=$c(l.current);u.current=d==="mounted"?m:"none"},[d]),ia(()=>{const m=l.current,x=c.current;if(x!==n){const b=u.current,k=$c(m);n?g("MOUNT"):k==="none"||(m==null?void 0:m.display)==="none"?g("UNMOUNT"):g(x&&b!==k?"ANIMATION_OUT":"UNMOUNT"),c.current=n}},[n,g]),ia(()=>{if(s){let m;const x=s.ownerDocument.defaultView??window,A=k=>{const C=$c(l.current).includes(CSS.escape(k.animationName));if(k.target===s&&C&&(g("ANIMATION_END"),!c.current)){const w=s.style.animationFillMode;s.style.animationFillMode="forwards",m=x.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=w)})}},b=k=>{k.target===s&&(u.current=$c(l.current))};return s.addEventListener("animationstart",b),s.addEventListener("animationcancel",A),s.addEventListener("animationend",A),()=>{x.clearTimeout(m),s.removeEventListener("animationstart",b),s.removeEventListener("animationcancel",A),s.removeEventListener("animationend",A)}}else g("ANIMATION_END")},[s,g]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:D.useCallback(m=>{l.current=m?getComputedStyle(m):null,i(m)},[])}}function $c(n){return(n==null?void 0:n.animationName)||"none"}function ww(n){var l,c;let s=(l=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:l.get,i=s&&"isReactWarning"in s&&s.isReactWarning;return i?n.ref:(s=(c=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:c.get,i=s&&"isReactWarning"in s&&s.isReactWarning,i?n.props.ref:n.props.ref||n.ref)}var i0=0;function bw(){D.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??Cm()),document.body.insertAdjacentElement("beforeend",n[1]??Cm()),i0++,()=>{i0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),i0--}},[])}function Cm(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var ri=function(){return ri=Object.assign||function(s){for(var i,l=1,c=arguments.length;l<c;l++){i=arguments[l];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(s[u]=i[u])}return s},ri.apply(this,arguments)};function Wx(n,s){var i={};for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&s.indexOf(l)<0&&(i[l]=n[l]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,l=Object.getOwnPropertySymbols(n);c<l.length;c++)s.indexOf(l[c])<0&&Object.prototype.propertyIsEnumerable.call(n,l[c])&&(i[l[c]]=n[l[c]]);return i}function Cw(n,s,i){if(i||arguments.length===2)for(var l=0,c=s.length,u;l<c;l++)(u||!(l in s))&&(u||(u=Array.prototype.slice.call(s,0,l)),u[l]=s[l]);return n.concat(u||Array.prototype.slice.call(s))}var iu="right-scroll-bar-position",ou="width-before-scroll-bar",Ew="with-scroll-bars-hidden",kw="--removed-body-scroll-bar-size";function o0(n,s){return typeof n=="function"?n(s):n&&(n.current=s),n}function Sw(n,s){var i=D.useState(function(){return{value:n,callback:s,facade:{get current(){return i.value},set current(l){var c=i.value;c!==l&&(i.value=l,i.callback(l,c))}}}})[0];return i.callback=s,i.facade}var Bw=typeof window<"u"?D.useLayoutEffect:D.useEffect,Em=new WeakMap;function Pw(n,s){var i=Sw(null,function(l){return n.forEach(function(c){return o0(c,l)})});return Bw(function(){var l=Em.get(i);if(l){var c=new Set(l),u=new Set(n),p=i.current;c.forEach(function(d){u.has(d)||o0(d,null)}),u.forEach(function(d){c.has(d)||o0(d,p)})}Em.set(i,n)},[n]),i}function Tw(n){return n}function Dw(n,s){s===void 0&&(s=Tw);var i=[],l=!1,c={read:function(){if(l)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return i.length?i[i.length-1]:n},useMedium:function(u){var p=s(u,l);return i.push(p),function(){i=i.filter(function(d){return d!==p})}},assignSyncMedium:function(u){for(l=!0;i.length;){var p=i;i=[],p.forEach(u)}i={push:function(d){return u(d)},filter:function(){return i}}},assignMedium:function(u){l=!0;var p=[];if(i.length){var d=i;i=[],d.forEach(u),p=i}var g=function(){var x=p;p=[],x.forEach(u)},m=function(){return Promise.resolve().then(g)};m(),i={push:function(x){p.push(x),m()},filter:function(x){return p=p.filter(x),i}}}};return c}function Rw(n){n===void 0&&(n={});var s=Dw(null);return s.options=ri({async:!0,ssr:!1},n),s}var qx=function(n){var s=n.sideCar,i=Wx(n,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var l=s.read();if(!l)throw new Error("Sidecar medium not found");return D.createElement(l,ri({},i))};qx.isSideCarExport=!0;function Nw(n,s){return n.useMedium(s),qx}var Gx=Rw(),s0=function(){},id=D.forwardRef(function(n,s){var i=D.useRef(null),l=D.useState({onScrollCapture:s0,onWheelCapture:s0,onTouchMoveCapture:s0}),c=l[0],u=l[1],p=n.forwardProps,d=n.children,g=n.className,m=n.removeScrollBar,x=n.enabled,A=n.shards,b=n.sideCar,k=n.noRelative,R=n.noIsolation,C=n.inert,w=n.allowPinchZoom,S=n.as,P=S===void 0?"div":S,N=n.gapMode,F=Wx(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=b,H=Pw([i,s]),U=ri(ri({},F),c);return D.createElement(D.Fragment,null,x&&D.createElement(M,{sideCar:Gx,removeScrollBar:m,shards:A,noRelative:k,noIsolation:R,inert:C,setCallbacks:u,allowPinchZoom:!!w,lockRef:i,gapMode:N}),p?D.cloneElement(D.Children.only(d),ri(ri({},U),{ref:H})):D.createElement(P,ri({},U,{className:g,ref:H}),d))});id.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};id.classNames={fullWidth:ou,zeroRight:iu};var Fw=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Lw(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var s=Fw();return s&&n.setAttribute("nonce",s),n}function Mw(n,s){n.styleSheet?n.styleSheet.cssText=s:n.appendChild(document.createTextNode(s))}function Iw(n){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(n)}var Ow=function(){var n=0,s=null;return{add:function(i){n==0&&(s=Lw())&&(Mw(s,i),Iw(s)),n++},remove:function(){n--,!n&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},jw=function(){var n=Ow();return function(s,i){D.useEffect(function(){return n.add(s),function(){n.remove()}},[s&&i])}},$x=function(){var n=jw(),s=function(i){var l=i.styles,c=i.dynamic;return n(l,c),null};return s},zw={left:0,top:0,right:0,gap:0},a0=function(n){return parseInt(n||"",10)||0},Hw=function(n){var s=window.getComputedStyle(document.body),i=s[n==="padding"?"paddingLeft":"marginLeft"],l=s[n==="padding"?"paddingTop":"marginTop"],c=s[n==="padding"?"paddingRight":"marginRight"];return[a0(i),a0(l),a0(c)]},Vw=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return zw;var s=Hw(n),i=document.documentElement.clientWidth,l=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,l-i+s[2]-s[0])}},Uw=$x(),ta="data-scroll-locked",Zw=function(n,s,i,l){var c=n.left,u=n.top,p=n.right,d=n.gap;return i===void 0&&(i="margin"),`
  .`.concat(Ew,` {
   overflow: hidden `).concat(l,`;
   padding-right: `).concat(d,"px ").concat(l,`;
  }
  body[`).concat(ta,`] {
    overflow: hidden `).concat(l,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(l,";"),i==="margin"&&`
    padding-left: `.concat(c,`px;
    padding-top: `).concat(u,`px;
    padding-right: `).concat(p,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(l,`;
    `),i==="padding"&&"padding-right: ".concat(d,"px ").concat(l,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(iu,` {
    right: `).concat(d,"px ").concat(l,`;
  }
  
  .`).concat(ou,` {
    margin-right: `).concat(d,"px ").concat(l,`;
  }
  
  .`).concat(iu," .").concat(iu,` {
    right: 0 `).concat(l,`;
  }
  
  .`).concat(ou," .").concat(ou,` {
    margin-right: 0 `).concat(l,`;
  }
  
  body[`).concat(ta,`] {
    `).concat(kw,": ").concat(d,`px;
  }
`)},km=function(){var n=parseInt(document.body.getAttribute(ta)||"0",10);return isFinite(n)?n:0},Ww=function(){D.useEffect(function(){return document.body.setAttribute(ta,(km()+1).toString()),function(){var n=km()-1;n<=0?document.body.removeAttribute(ta):document.body.setAttribute(ta,n.toString())}},[])},qw=function(n){var s=n.noRelative,i=n.noImportant,l=n.gapMode,c=l===void 0?"margin":l;Ww();var u=D.useMemo(function(){return Vw(c)},[c]);return D.createElement(Uw,{styles:Zw(u,!s,c,i?"":"!important")})},y0=!1;if(typeof window<"u")try{var Kc=Object.defineProperty({},"passive",{get:function(){return y0=!0,!0}});window.addEventListener("test",Kc,Kc),window.removeEventListener("test",Kc,Kc)}catch{y0=!1}var Ys=y0?{passive:!1}:!1,Gw=function(n){return n.tagName==="TEXTAREA"},Kx=function(n,s){if(!(n instanceof Element))return!1;var i=window.getComputedStyle(n);return i[s]!=="hidden"&&!(i.overflowY===i.overflowX&&!Gw(n)&&i[s]==="visible")},$w=function(n){return Kx(n,"overflowY")},Kw=function(n){return Kx(n,"overflowX")},Sm=function(n,s){var i=s.ownerDocument,l=s;do{typeof ShadowRoot<"u"&&l instanceof ShadowRoot&&(l=l.host);var c=Qx(n,l);if(c){var u=Yx(n,l),p=u[1],d=u[2];if(p>d)return!0}l=l.parentNode}while(l&&l!==i.body);return!1},Qw=function(n){var s=n.scrollTop,i=n.scrollHeight,l=n.clientHeight;return[s,i,l]},Yw=function(n){var s=n.scrollLeft,i=n.scrollWidth,l=n.clientWidth;return[s,i,l]},Qx=function(n,s){return n==="v"?$w(s):Kw(s)},Yx=function(n,s){return n==="v"?Qw(s):Yw(s)},Xw=function(n,s){return n==="h"&&s==="rtl"?-1:1},Jw=function(n,s,i,l,c){var u=Xw(n,window.getComputedStyle(s).direction),p=u*l,d=i.target,g=s.contains(d),m=!1,x=p>0,A=0,b=0;do{if(!d)break;var k=Yx(n,d),R=k[0],C=k[1],w=k[2],S=C-w-u*R;(R||S)&&Qx(n,d)&&(A+=S,b+=R);var P=d.parentNode;d=P&&P.nodeType===Node.DOCUMENT_FRAGMENT_NODE?P.host:P}while(!g&&d!==document.body||g&&(s.contains(d)||s===d));return(x&&Math.abs(A)<1||!x&&Math.abs(b)<1)&&(m=!0),m},Qc=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},Bm=function(n){return[n.deltaX,n.deltaY]},Pm=function(n){return n&&"current"in n?n.current:n},eb=function(n,s){return n[0]===s[0]&&n[1]===s[1]},tb=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},nb=0,Xs=[];function rb(n){var s=D.useRef([]),i=D.useRef([0,0]),l=D.useRef(),c=D.useState(nb++)[0],u=D.useState($x)[0],p=D.useRef(n);D.useEffect(function(){p.current=n},[n]),D.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(c));var C=Cw([n.lockRef.current],(n.shards||[]).map(Pm),!0).filter(Boolean);return C.forEach(function(w){return w.classList.add("allow-interactivity-".concat(c))}),function(){document.body.classList.remove("block-interactivity-".concat(c)),C.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(c))})}}},[n.inert,n.lockRef.current,n.shards]);var d=D.useCallback(function(C,w){if("touches"in C&&C.touches.length===2||C.type==="wheel"&&C.ctrlKey)return!p.current.allowPinchZoom;var S=Qc(C),P=i.current,N="deltaX"in C?C.deltaX:P[0]-S[0],F="deltaY"in C?C.deltaY:P[1]-S[1],M,H=C.target,U=Math.abs(N)>Math.abs(F)?"h":"v";if("touches"in C&&U==="h"&&H.type==="range")return!1;var j=window.getSelection(),ee=j&&j.anchorNode,Z=ee?ee===H||ee.contains(H):!1;if(Z)return!1;var Y=Sm(U,H);if(!Y)return!0;if(Y?M=U:(M=U==="v"?"h":"v",Y=Sm(U,H)),!Y)return!1;if(!l.current&&"changedTouches"in C&&(N||F)&&(l.current=M),!M)return!0;var te=l.current||M;return Jw(te,w,C,te==="h"?N:F)},[]),g=D.useCallback(function(C){var w=C;if(!(!Xs.length||Xs[Xs.length-1]!==u)){var S="deltaY"in w?Bm(w):Qc(w),P=s.current.filter(function(M){return M.name===w.type&&(M.target===w.target||w.target===M.shadowParent)&&eb(M.delta,S)})[0];if(P&&P.should){w.cancelable&&w.preventDefault();return}if(!P){var N=(p.current.shards||[]).map(Pm).filter(Boolean).filter(function(M){return M.contains(w.target)}),F=N.length>0?d(w,N[0]):!p.current.noIsolation;F&&w.cancelable&&w.preventDefault()}}},[]),m=D.useCallback(function(C,w,S,P){var N={name:C,delta:w,target:S,should:P,shadowParent:ib(S)};s.current.push(N),setTimeout(function(){s.current=s.current.filter(function(F){return F!==N})},1)},[]),x=D.useCallback(function(C){i.current=Qc(C),l.current=void 0},[]),A=D.useCallback(function(C){m(C.type,Bm(C),C.target,d(C,n.lockRef.current))},[]),b=D.useCallback(function(C){m(C.type,Qc(C),C.target,d(C,n.lockRef.current))},[]);D.useEffect(function(){return Xs.push(u),n.setCallbacks({onScrollCapture:A,onWheelCapture:A,onTouchMoveCapture:b}),document.addEventListener("wheel",g,Ys),document.addEventListener("touchmove",g,Ys),document.addEventListener("touchstart",x,Ys),function(){Xs=Xs.filter(function(C){return C!==u}),document.removeEventListener("wheel",g,Ys),document.removeEventListener("touchmove",g,Ys),document.removeEventListener("touchstart",x,Ys)}},[]);var k=n.removeScrollBar,R=n.inert;return D.createElement(D.Fragment,null,R?D.createElement(u,{styles:tb(c)}):null,k?D.createElement(qw,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function ib(n){for(var s=null;n!==null;)n instanceof ShadowRoot&&(s=n.host,n=n.host),n=n.parentNode;return s}const ob=Nw(Gx,rb);var Xx=D.forwardRef(function(n,s){return D.createElement(id,ri({},n,{ref:s,sideCar:ob}))});Xx.classNames=id.classNames;var sb=function(n){if(typeof document>"u")return null;var s=Array.isArray(n)?n[0]:n;return s.ownerDocument.body},Js=new WeakMap,Yc=new WeakMap,Xc={},l0=0,Jx=function(n){return n&&(n.host||Jx(n.parentNode))},ab=function(n,s){return s.map(function(i){if(n.contains(i))return i;var l=Jx(i);return l&&n.contains(l)?l:(console.error("aria-hidden",i,"in not contained inside",n,". Doing nothing"),null)}).filter(function(i){return!!i})},lb=function(n,s,i,l){var c=ab(s,Array.isArray(n)?n:[n]);Xc[i]||(Xc[i]=new WeakMap);var u=Xc[i],p=[],d=new Set,g=new Set(c),m=function(A){!A||d.has(A)||(d.add(A),m(A.parentNode))};c.forEach(m);var x=function(A){!A||g.has(A)||Array.prototype.forEach.call(A.children,function(b){if(d.has(b))x(b);else try{var k=b.getAttribute(l),R=k!==null&&k!=="false",C=(Js.get(b)||0)+1,w=(u.get(b)||0)+1;Js.set(b,C),u.set(b,w),p.push(b),C===1&&R&&Yc.set(b,!0),w===1&&b.setAttribute(i,"true"),R||b.setAttribute(l,"true")}catch(S){console.error("aria-hidden: cannot operate on ",b,S)}})};return x(s),d.clear(),l0++,function(){p.forEach(function(A){var b=Js.get(A)-1,k=u.get(A)-1;Js.set(A,b),u.set(A,k),b||(Yc.has(A)||A.removeAttribute(l),Yc.delete(A)),k||A.removeAttribute(i)}),l0--,l0||(Js=new WeakMap,Js=new WeakMap,Yc=new WeakMap,Xc={})}},cb=function(n,s,i){i===void 0&&(i="data-aria-hidden");var l=Array.from(Array.isArray(n)?n:[n]),c=sb(n);return c?(l.push.apply(l,Array.from(c.querySelectorAll("[aria-live], script"))),lb(l,c,i,"aria-hidden")):function(){return null}};function ub(n){const s=db(n),i=D.forwardRef((l,c)=>{const{children:u,...p}=l,d=D.Children.toArray(u),g=d.find(hb);if(g){const m=g.props.children,x=d.map(A=>A===g?D.Children.count(m)>1?D.Children.only(null):D.isValidElement(m)?m.props.children:null:A);return _.jsx(s,{...p,ref:c,children:D.isValidElement(m)?D.cloneElement(m,void 0,x):null})}return _.jsx(s,{...p,ref:c,children:u})});return i.displayName=`${n}.Slot`,i}function db(n){const s=D.forwardRef((i,l)=>{const{children:c,...u}=i;if(D.isValidElement(c)){const p=mb(c),d=pb(u,c.props);return c.type!==D.Fragment&&(d.ref=l?El(l,p):p),D.cloneElement(c,d)}return D.Children.count(c)>1?D.Children.only(null):null});return s.displayName=`${n}.SlotClone`,s}var fb=Symbol("radix.slottable");function hb(n){return D.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===fb}function pb(n,s){const i={...s};for(const l in s){const c=n[l],u=s[l];/^on[A-Z]/.test(l)?c&&u?i[l]=(...d)=>{const g=u(...d);return c(...d),g}:c&&(i[l]=c):l==="style"?i[l]={...c,...u}:l==="className"&&(i[l]=[c,u].filter(Boolean).join(" "))}return{...n,...i}}function mb(n){var l,c;let s=(l=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:l.get,i=s&&"isReactWarning"in s&&s.isReactWarning;return i?n.ref:(s=(c=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:c.get,i=s&&"isReactWarning"in s&&s.isReactWarning,i?n.props.ref:n.props.ref||n.ref)}var od="Dialog",[eA]=kl(od),[gb,Hr]=eA(od),tA=n=>{const{__scopeDialog:s,children:i,open:l,defaultOpen:c,onOpenChange:u,modal:p=!0}=n,d=D.useRef(null),g=D.useRef(null),[m,x]=rd({prop:l,defaultProp:c??!1,onChange:u,caller:od});return _.jsx(gb,{scope:s,triggerRef:d,contentRef:g,contentId:yl(),titleId:yl(),descriptionId:yl(),open:m,onOpenChange:x,onOpenToggle:D.useCallback(()=>x(A=>!A),[x]),modal:p,children:i})};tA.displayName=od;var nA="DialogTrigger",xb=D.forwardRef((n,s)=>{const{__scopeDialog:i,...l}=n,c=Hr(nA,i),u=kr(s,c.triggerRef);return _.jsx(An.button,{type:"button","aria-haspopup":"dialog","aria-expanded":c.open,"aria-controls":c.contentId,"data-state":U0(c.open),...l,ref:u,onClick:hn(n.onClick,c.onOpenToggle)})});xb.displayName=nA;var H0="DialogPortal",[Ab,rA]=eA(H0,{forceMount:void 0}),iA=n=>{const{__scopeDialog:s,forceMount:i,children:l,container:c}=n,u=Hr(H0,s);return _.jsx(Ab,{scope:s,forceMount:i,children:D.Children.map(l,p=>_.jsx(ua,{present:i||u.open,children:_.jsx(Zx,{asChild:!0,container:c,children:p})}))})};iA.displayName=H0;var Qu="DialogOverlay",oA=D.forwardRef((n,s)=>{const i=rA(Qu,n.__scopeDialog),{forceMount:l=i.forceMount,...c}=n,u=Hr(Qu,n.__scopeDialog);return u.modal?_.jsx(ua,{present:l||u.open,children:_.jsx(yb,{...c,ref:s})}):null});oA.displayName=Qu;var vb=ub("DialogOverlay.RemoveScroll"),yb=D.forwardRef((n,s)=>{const{__scopeDialog:i,...l}=n,c=Hr(Qu,i);return _.jsx(Xx,{as:vb,allowPinchZoom:!0,shards:[c.contentRef],children:_.jsx(An.div,{"data-state":U0(c.open),...l,ref:s,style:{pointerEvents:"auto",...l.style}})})}),is="DialogContent",sA=D.forwardRef((n,s)=>{const i=rA(is,n.__scopeDialog),{forceMount:l=i.forceMount,...c}=n,u=Hr(is,n.__scopeDialog);return _.jsx(ua,{present:l||u.open,children:u.modal?_.jsx(_b,{...c,ref:s}):_.jsx(wb,{...c,ref:s})})});sA.displayName=is;var _b=D.forwardRef((n,s)=>{const i=Hr(is,n.__scopeDialog),l=D.useRef(null),c=kr(s,i.contentRef,l);return D.useEffect(()=>{const u=l.current;if(u)return cb(u)},[]),_.jsx(aA,{...n,ref:c,trapFocus:i.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:hn(n.onCloseAutoFocus,u=>{var p;u.preventDefault(),(p=i.triggerRef.current)==null||p.focus()}),onPointerDownOutside:hn(n.onPointerDownOutside,u=>{const p=u.detail.originalEvent,d=p.button===0&&p.ctrlKey===!0;(p.button===2||d)&&u.preventDefault()}),onFocusOutside:hn(n.onFocusOutside,u=>u.preventDefault())})}),wb=D.forwardRef((n,s)=>{const i=Hr(is,n.__scopeDialog),l=D.useRef(!1),c=D.useRef(!1);return _.jsx(aA,{...n,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:u=>{var p,d;(p=n.onCloseAutoFocus)==null||p.call(n,u),u.defaultPrevented||(l.current||(d=i.triggerRef.current)==null||d.focus(),u.preventDefault()),l.current=!1,c.current=!1},onInteractOutside:u=>{var g,m;(g=n.onInteractOutside)==null||g.call(n,u),u.defaultPrevented||(l.current=!0,u.detail.originalEvent.type==="pointerdown"&&(c.current=!0));const p=u.target;((m=i.triggerRef.current)==null?void 0:m.contains(p))&&u.preventDefault(),u.detail.originalEvent.type==="focusin"&&c.current&&u.preventDefault()}})}),aA=D.forwardRef((n,s)=>{const{__scopeDialog:i,trapFocus:l,onOpenAutoFocus:c,onCloseAutoFocus:u,...p}=n,d=Hr(is,i),g=D.useRef(null),m=kr(s,g);return bw(),_.jsxs(_.Fragment,{children:[_.jsx(Vx,{asChild:!0,loop:!0,trapped:l,onMountAutoFocus:c,onUnmountAutoFocus:u,children:_.jsx(zx,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":U0(d.open),...p,ref:m,onDismiss:()=>d.onOpenChange(!1)})}),_.jsxs(_.Fragment,{children:[_.jsx(bb,{titleId:d.titleId}),_.jsx(Eb,{contentRef:g,descriptionId:d.descriptionId})]})]})}),V0="DialogTitle",lA=D.forwardRef((n,s)=>{const{__scopeDialog:i,...l}=n,c=Hr(V0,i);return _.jsx(An.h2,{id:c.titleId,...l,ref:s})});lA.displayName=V0;var cA="DialogDescription",uA=D.forwardRef((n,s)=>{const{__scopeDialog:i,...l}=n,c=Hr(cA,i);return _.jsx(An.p,{id:c.descriptionId,...l,ref:s})});uA.displayName=cA;var dA="DialogClose",fA=D.forwardRef((n,s)=>{const{__scopeDialog:i,...l}=n,c=Hr(dA,i);return _.jsx(An.button,{type:"button",...l,ref:s,onClick:hn(n.onClick,()=>c.onOpenChange(!1))})});fA.displayName=dA;function U0(n){return n?"open":"closed"}var hA="DialogTitleWarning",[_S,pA]=U1(hA,{contentName:is,titleName:V0,docsSlug:"dialog"}),bb=({titleId:n})=>{const s=pA(hA),i=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return D.useEffect(()=>{n&&(document.getElementById(n)||console.error(i))},[i,n]),null},Cb="DialogDescriptionWarning",Eb=({contentRef:n,descriptionId:s})=>{const l=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${pA(Cb).contentName}}.`;return D.useEffect(()=>{var u;const c=(u=n.current)==null?void 0:u.getAttribute("aria-describedby");s&&c&&(document.getElementById(s)||console.warn(l))},[l,n,s]),null},mA=tA,gA=iA,sd=oA,ad=sA,ld=lA,cd=uA,xA=fA;const Z0=mA,kb=gA,AA=D.forwardRef(({className:n,...s},i)=>_.jsx(sd,{ref:i,className:ft("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...s}));AA.displayName=sd.displayName;const ud=D.forwardRef(({className:n,children:s,...i},l)=>_.jsxs(kb,{children:[_.jsx(AA,{}),_.jsxs(ad,{ref:l,className:ft("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...i,children:[s,_.jsxs(xA,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[_.jsx(wx,{className:"h-4 w-4"}),_.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ud.displayName=ad.displayName;const dd=({className:n,...s})=>_.jsx("div",{className:ft("flex flex-col space-y-1.5 text-center sm:text-left",n),...s});dd.displayName="DialogHeader";const W0=({className:n,...s})=>_.jsx("div",{className:ft("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...s});W0.displayName="DialogFooter";const fd=D.forwardRef(({className:n,...s},i)=>_.jsx(ld,{ref:i,className:ft("text-lg font-semibold leading-none tracking-tight",n),...s}));fd.displayName=ld.displayName;const hd=D.forwardRef(({className:n,...s},i)=>_.jsx(cd,{ref:i,className:ft("text-sm text-muted-foreground",n),...s}));hd.displayName=cd.displayName;function Tm(){const n=window.location.hash.slice(1);if(!n)return null;if(n==="raw")return{type:"raw",name:"raw"};if(n==="map")return{type:"map",name:"map"};if(n==="visualizer")return{type:"visualizer",name:"visualizer"};if(n.startsWith("map/focus/")){const c=n.slice(10);return c?{type:"map",name:"map",mapFocusKey:decodeURIComponent(c)}:{type:"map",name:"map"}}const s=n.indexOf("/");if(s===-1)return null;const i=n.slice(0,s),l=decodeURIComponent(n.slice(s+1));return(i==="channel"||i==="contact")&&l?{type:i,name:l}:null}function vA(n){return`#map/focus/${encodeURIComponent(n)}`}function Sb(n){if(!n)return"";if(n.type==="raw")return"#raw";if(n.type==="map")return"#map";if(n.type==="visualizer")return"#visualizer";const s=n.type==="channel"&&n.name.startsWith("#")?n.name.slice(1):n.name;return`#${n.type}/${encodeURIComponent(s)}`}function Bb(n){const s=Sb(n);s!==window.location.hash&&window.history.replaceState(null,"",s||window.location.pathname)}function Pb({open:n,onClose:s,paths:i,senderInfo:l,contacts:c,config:u}){const p=i.map(g=>({...g,resolved:H1(g.path,l,c,u)})),d=i.length===1;return _.jsx(Z0,{open:n,onOpenChange:g=>!g&&s(),children:_.jsxs(ud,{className:"max-w-md max-h-[80vh] flex flex-col",children:[_.jsxs(dd,{children:[_.jsxs(fd,{children:["Message Path",!d&&`s (${i.length})`]}),_.jsx(hd,{children:d?_.jsxs(_.Fragment,{children:["This shows ",_.jsx("em",{children:"one route"})," that this message traveled through the mesh network. Routers may be incorrectly identified due to prefix collisions between heard and non-heard router advertisements."]}):_.jsxs(_.Fragment,{children:["This message was received via ",_.jsxs("strong",{children:[i.length," different routes"]}),". Routers may be incorrectly identified due to prefix collisions."]})})]}),_.jsxs("div",{className:"flex-1 overflow-y-auto py-2 space-y-4",children:[p.map((g,m)=>_.jsxs("div",{children:[!d&&_.jsxs("div",{className:"text-xs text-muted-foreground font-medium mb-2 pb-1 border-b border-border",children:["Path ",m+1,"  received ",ra(g.received_at)]}),_.jsx(Tb,{resolved:g.resolved,senderInfo:l,hideStraightLine:!d})]},m)),!d&&p.length>0&&(()=>{const g=p[0].resolved;return Bt(g.sender.lat,g.sender.lon)&&Bt(g.receiver.lat,g.receiver.lon)?_.jsxs("div",{className:"pt-3 mt-1 border-t border-border",children:[_.jsx("span",{className:"text-sm text-muted-foreground",children:"Straight-line distance: "}),_.jsx("span",{className:"text-sm font-medium",children:rs(jr(g.sender.lat,g.sender.lon,g.receiver.lat,g.receiver.lon))})]}):null})()]}),_.jsx(W0,{children:_.jsx(Jt,{onClick:s,children:"Close"})})]})})}function Tb({resolved:n,senderInfo:s,hideStraightLine:i}){const l=c=>{if(c===0)return Bt(n.sender.lat,n.sender.lon)?{lat:n.sender.lat,lon:n.sender.lon}:null;const u=n.hops[c-1];return u.matches.length>1||u.matches.length===0?null:Bt(u.matches[0].lat,u.matches[0].lon)?{lat:u.matches[0].lat,lon:u.matches[0].lon}:null};return _.jsxs("div",{className:"space-y-0",children:[_.jsx(Dm,{label:"Sender",name:n.sender.name,prefix:n.sender.prefix,distance:null,isFirst:!0,lat:n.sender.lat,lon:n.sender.lon,publicKey:s.publicKeyOrPrefix}),n.hops.map((c,u)=>_.jsx(Db,{hop:c,hopNumber:u+1,prevLocation:l(u)},u)),_.jsx(Dm,{label:"Receiver (me)",name:n.receiver.name,prefix:n.receiver.prefix,distance:Rb(n),isLast:!0,lat:n.receiver.lat,lon:n.receiver.lon,publicKey:n.receiver.publicKey??void 0}),n.totalDistances&&n.totalDistances.length>0&&_.jsxs("div",{className:"pt-3 mt-3 border-t border-border",children:[_.jsxs("span",{className:"text-sm text-muted-foreground",children:["Presumed unambiguous distance covered:"," "]}),_.jsxs("span",{className:"text-sm font-medium",children:[n.hasGaps?">":"",rs(n.totalDistances[0])]})]}),!i&&Bt(n.sender.lat,n.sender.lon)&&Bt(n.receiver.lat,n.receiver.lon)&&_.jsxs("div",{className:n.totalDistances&&n.totalDistances.length>0?"pt-1":"pt-3 mt-3 border-t border-border",children:[_.jsx("span",{className:"text-sm text-muted-foreground",children:"Straight-line distance: "}),_.jsx("span",{className:"text-sm font-medium",children:rs(jr(n.sender.lat,n.sender.lon,n.receiver.lat,n.receiver.lon))})]})]})}function Dm({label:n,name:s,prefix:i,distance:l,isFirst:c,isLast:u,lat:p,lon:d,publicKey:g}){const m=Bt(p??null,d??null)&&g;return _.jsxs("div",{className:"flex gap-3",children:[_.jsxs("div",{className:"flex flex-col items-center w-4 flex-shrink-0",children:[!c&&_.jsx("div",{className:"w-0.5 h-3 bg-border"}),_.jsx("div",{className:"w-3 h-3 rounded-full bg-primary flex-shrink-0"}),!u&&_.jsx("div",{className:"w-0.5 flex-1 bg-border"})]}),_.jsxs("div",{className:"pb-3 flex-1 min-w-0",children:[_.jsx("div",{className:"text-xs text-muted-foreground font-medium",children:n}),_.jsxs("div",{className:"font-medium truncate",children:[s," ",_.jsxs("span",{className:"text-muted-foreground font-mono text-sm",children:["(",i,")"]}),l!==null&&_.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["- ",rs(l)]}),m&&_.jsx(_0,{lat:p,lon:d,publicKey:g})]})]})]})}function Db({hop:n,hopNumber:s,prevLocation:i}){const l=n.matches.length>1,c=n.matches.length===0,u=p=>!i||i.lat===null||i.lon===null||!Bt(p.lat,p.lon)?null:jr(i.lat,i.lon,p.lat,p.lon);return _.jsxs("div",{className:"flex gap-3",children:[_.jsxs("div",{className:"flex flex-col items-center w-4 flex-shrink-0",children:[_.jsx("div",{className:"w-0.5 h-3 bg-border"}),_.jsx("div",{className:"w-3 h-3 rounded-full bg-muted-foreground flex-shrink-0"}),_.jsx("div",{className:"w-0.5 flex-1 bg-border"})]}),_.jsxs("div",{className:"pb-3 flex-1 min-w-0",children:[_.jsxs("div",{className:"text-xs text-muted-foreground font-medium",children:["Hop ",s,l&&_.jsx("span",{className:"text-yellow-500 ml-1",children:"(ambiguous)"})]}),c?_.jsxs("div",{className:"font-medium text-muted-foreground/70",children:["<UNKNOWN ",_.jsx("span",{className:"font-mono text-sm",children:n.prefix}),">"]}):l?_.jsx("div",{children:n.matches.map(p=>{const d=u(p),g=Bt(p.lat,p.lon);return _.jsxs("div",{className:"font-medium truncate",children:[p.name||p.public_key.slice(0,12)," ",_.jsxs("span",{className:"text-muted-foreground font-mono text-sm",children:["(",p.public_key.slice(0,2).toUpperCase(),")"]}),d!==null&&_.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["- ",rs(d)]}),g&&_.jsx(_0,{lat:p.lat,lon:p.lon,publicKey:p.public_key})]},p.public_key)})}):_.jsxs("div",{className:"font-medium truncate",children:[n.matches[0].name||n.matches[0].public_key.slice(0,12)," ",_.jsxs("span",{className:"text-muted-foreground font-mono text-sm",children:["(",n.prefix,")"]}),n.distanceFromPrev!==null&&_.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["- ",rs(n.distanceFromPrev)]}),Bt(n.matches[0].lat,n.matches[0].lon)&&_.jsx(_0,{lat:n.matches[0].lat,lon:n.matches[0].lon,publicKey:n.matches[0].public_key})]})]})]})}function _0({lat:n,lon:s,publicKey:i}){const l=c=>{c.preventDefault(),c.stopPropagation();const u=window.location.origin+window.location.pathname+vA(i);window.open(u,"_blank")};return _.jsxs("span",{className:"text-xs text-muted-foreground/70 font-mono cursor-pointer hover:text-primary hover:underline ml-1",onClick:l,title:"View on map",children:["(",n.toFixed(4),", ",s.toFixed(4),")"]})}function Rb(n){let s=null,i=null;if(n.hops.length>0){const l=n.hops[n.hops.length-1];l.matches.length===1&&Bt(l.matches[0].lat,l.matches[0].lon)&&(s=l.matches[0].lat,i=l.matches[0].lon)}else Bt(n.sender.lat,n.sender.lon)&&(s=n.sender.lat,i=n.sender.lon);return s===null||i===null||!Bt(n.receiver.lat,n.receiver.lon)?null:jr(s,i,n.receiver.lat,n.receiver.lon)}const Rm=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/g;function Nm(n,s){const i=[];let l=0,c,u=0;for(Rm.lastIndex=0;(c=Rm.exec(n))!==null;)c.index>l&&i.push(n.slice(l,c.index)),i.push(_.jsx("a",{href:c[0],target:"_blank",rel:"noopener noreferrer",className:"text-primary underline hover:text-primary/80",children:c[0]},`${s}-link-${u++}`)),l=c.index+c[0].length;return l===0?[n]:(l<n.length&&i.push(n.slice(l)),i)}function Nb(n,s){const i=/@\[([^\]]+)\]/g,l=[];let c=0,u,p=0;for(;(u=i.exec(n))!==null;){u.index>c&&l.push(...Nm(n.slice(c,u.index),`pre-${p}`));const d=u[1],g=s?d===s:!1;l.push(_.jsxs("span",{className:ft("rounded px-0.5",g?"bg-primary/30 text-primary font-medium":"bg-muted-foreground/20"),children:["@[",d,"]"]},`mention-${p++}`)),c=u.index+u[0].length}return c<n.length&&l.push(...Nm(n.slice(c),`post-${p}`)),l.length>0?l:n}function Fm({paths:n,onClick:s,variant:i}){const c=`(${z1(n).display})`,u=i==="header"?"font-normal text-muted-foreground/70 ml-1 text-[11px] cursor-pointer hover:text-primary hover:underline":"text-[10px] text-muted-foreground/50 ml-1 cursor-pointer hover:text-primary hover:underline";return _.jsx("span",{className:u,onClick:p=>{p.stopPropagation(),s()},title:"View message path",children:c})}function Fb({messages:n,contacts:s,loading:i,loadingOlder:l=!1,hasOlderMessages:c=!1,onSenderClick:u,onLoadOlder:p,radioName:d,config:g}){const m=D.useRef(null),x=D.useRef(0),A=D.useRef(!0),[b,k]=D.useState(!1),[R,C]=D.useState(null),w=D.useRef({scrollTop:0,scrollHeight:0,clientHeight:0,wasNearTop:!1,wasNearBottom:!0});D.useLayoutEffect(()=>{if(!m.current)return;const j=m.current,ee=n.length-x.current;if(A.current&&n.length>0)j.scrollTop=j.scrollHeight,A.current=!1;else if(ee>0&&x.current>0){const Z=j.scrollHeight-w.current.scrollHeight;w.current.wasNearTop&&Z>0?j.scrollTop=w.current.scrollTop+Z:w.current.wasNearBottom&&(j.scrollTop=j.scrollHeight)}x.current=n.length},[n]),D.useEffect(()=>{n.length===0&&(A.current=!0,x.current=0,w.current={scrollTop:0,scrollHeight:0,clientHeight:0,wasNearTop:!1,wasNearBottom:!0})},[n.length]);const S=D.useCallback(()=>{if(!m.current)return;const{scrollTop:j,scrollHeight:ee,clientHeight:Z}=m.current,Y=ee-j-Z;w.current={scrollTop:j,scrollHeight:ee,clientHeight:Z,wasNearTop:j<150,wasNearBottom:Y<100},k(Y>100),!(!p||l||!c)&&j<100&&p()},[p,l,c]),P=D.useCallback(()=>{m.current&&(m.current.scrollTop=m.current.scrollHeight)},[]),N=j=>j&&s.find(ee=>ee.public_key===j)||null,F=j=>s.find(ee=>ee.name===j)||null,M=(j,ee,Z)=>{if(j.type==="PRIV"&&ee)return{name:ee.name||ee.public_key.slice(0,12),publicKeyOrPrefix:ee.public_key,lat:ee.lat,lon:ee.lon};if(Z){const Y=F(Z);if(Y)return{name:Z,publicKeyOrPrefix:Y.public_key,lat:Y.lat,lon:Y.lon}}return{name:Z||"Unknown",publicKeyOrPrefix:j.conversation_key||"",lat:null,lon:null}};if(i)return _.jsx("div",{className:"flex-1 overflow-y-auto p-5 text-center text-muted-foreground",children:"Loading messages..."});if(n.length===0)return _.jsx("div",{className:"flex-1 overflow-y-auto p-5 text-center text-muted-foreground",children:"No messages yet"});const H=[...n].sort((j,ee)=>j.received_at-ee.received_at),U=(j,ee)=>j.outgoing?"__outgoing__":j.type==="PRIV"&&j.conversation_key?j.conversation_key:ee||"__unknown__";return _.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[_.jsxs("div",{className:"h-full overflow-y-auto p-4 flex flex-col gap-0.5",ref:m,onScroll:S,children:[l&&_.jsx("div",{className:"text-center py-2 text-muted-foreground text-sm",children:"Loading older messages..."}),!l&&c&&_.jsx("div",{className:"text-center py-2 text-muted-foreground text-xs",children:"Scroll up for older messages"}),H.map((j,ee)=>{var q;const Z=j.type==="PRIV"?N(j.conversation_key):null,Y=(Z==null?void 0:Z.type)===oi,{sender:te,content:K}=Y?{sender:null,content:j.text}:xm(j.text),ae=j.outgoing?"You":(Z==null?void 0:Z.name)||te||((q=j.conversation_key)==null?void 0:q.slice(0,8))||"Unknown",Ae=!j.outgoing&&u&&ae!=="Unknown",G=U(j,te),se=H[ee-1],W=se?U(se,xm(se.text).sender):null,re=!j.outgoing&&G!==W,V=ee===0;let T=null,z="";if(!j.outgoing){if(j.type==="PRIV"&&j.conversation_key)T=(Z==null?void 0:Z.name)||null,z=j.conversation_key;else if(te){const $=F(te);T=te,z=($==null?void 0:$.public_key)||`name:${te}`}}return _.jsxs("div",{className:ft("flex items-start max-w-[85%]",j.outgoing&&"flex-row-reverse self-end",re&&!V&&"mt-3"),children:[!j.outgoing&&_.jsx("div",{className:"w-10 flex-shrink-0 flex items-start pt-0.5",children:re&&z&&_.jsx(x0,{name:T,publicKey:z,size:32})}),_.jsxs("div",{className:ft("py-1.5 px-3 rounded-lg min-w-0",j.outgoing?"bg-[#1e3a29]":"bg-muted"),children:[re&&_.jsxs("div",{className:"text-[13px] font-semibold text-muted-foreground mb-0.5",children:[Ae?_.jsx("span",{className:"cursor-pointer hover:text-primary hover:underline",onClick:()=>u(ae),title:`Mention ${ae}`,children:ae}):ae,_.jsx("span",{className:"font-normal text-muted-foreground/70 ml-2 text-[11px]",children:ra(j.sender_timestamp||j.received_at)}),!j.outgoing&&j.paths&&j.paths.length>0&&_.jsx(Fm,{paths:j.paths,variant:"header",onClick:()=>C({paths:j.paths,senderInfo:M(j,Z,te)})})]}),_.jsxs("div",{className:"break-words whitespace-pre-wrap",children:[K.split(`
`).map(($,ue,pe)=>_.jsxs("span",{children:[Nb($,d),ue<pe.length-1&&_.jsx("br",{})]},ue)),!re&&_.jsxs(_.Fragment,{children:[_.jsx("span",{className:"text-[10px] text-muted-foreground/50 ml-2",children:ra(j.sender_timestamp||j.received_at)}),!j.outgoing&&j.paths&&j.paths.length>0&&_.jsx(Fm,{paths:j.paths,variant:"inline",onClick:()=>C({paths:j.paths,senderInfo:M(j,Z,te)})})]}),j.outgoing&&(j.acked>0?` ${j.acked>1?j.acked:""}`:" ?")]})]})]},j.id)})]}),b&&_.jsx("button",{onClick:P,className:"absolute bottom-4 right-4 w-10 h-10 rounded-full bg-muted hover:bg-accent border border-border flex items-center justify-center shadow-lg transition-opacity",title:"Scroll to bottom",children:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-muted-foreground",children:_.jsx("polyline",{points:"6 9 12 15 18 9"})})}),R&&_.jsx(Pb,{open:!0,onClose:()=>C(null),paths:R.paths,senderInfo:R.senderInfo,contacts:s,config:g??null})]})}const Lm=156,Lb=140,Mb=156,Ib=120,Ob=8,jb=D.forwardRef(function({onSend:s,disabled:i,placeholder:l,isRepeaterMode:c,conversationType:u,senderName:p},d){const[g,m]=D.useState(""),[x,A]=D.useState(!1),b=D.useRef(null);D.useImperativeHandle(d,()=>({appendText:M=>{var H;m(U=>U+M),(H=b.current)==null||H.focus()}}));const k=D.useMemo(()=>{if(u==="contact")return{warningAt:Lb,dangerAt:Lm,hardLimit:Lm};if(u==="channel"){const M=(p==null?void 0:p.length)??10,H=Math.max(1,Mb-M-2);return{warningAt:Ib,dangerAt:Math.max(1,H-Ob),hardLimit:H}}return null},[u,p]),{limitState:R,warningMessage:C}=D.useMemo(()=>{if(!k)return{limitState:"normal",warningMessage:null};const M=g.length;return M>=k.hardLimit?{limitState:"error",warningMessage:"likely truncated by radio"}:M>=k.dangerAt?{limitState:"danger",warningMessage:"may impact multi-repeater hop delivery"}:M>=k.warningAt?{limitState:"warning",warningMessage:"may impact multi-repeater hop delivery"}:{limitState:"normal",warningMessage:null}},[g.length,k]),w=k?k.hardLimit-g.length:0,S=D.useCallback(async M=>{M.preventDefault();const H=g.trim();if(c){if(x||i)return;A(!0);try{await s(H),m("")}catch(U){console.error("Failed to request telemetry:",U),pt.error("Failed to request telemetry",{description:U instanceof Error?U.message:"Check radio connection"});return}finally{A(!1)}setTimeout(()=>{var U;return(U=b.current)==null?void 0:U.focus()},0)}else{if(!H||x||i)return;A(!0);try{await s(H),m("")}catch(U){console.error("Failed to send message:",U),pt.error("Failed to send message",{description:U instanceof Error?U.message:"Check radio connection"});return}finally{A(!1)}setTimeout(()=>{var U;return(U=b.current)==null?void 0:U.focus()},0)}},[g,x,i,s,c]),P=D.useCallback(M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),S(M))},[S]),N=c?!0:g.trim().length>0,F=!c&&k!==null;return _.jsxs("form",{className:"px-4 py-3 border-t border-border flex flex-col gap-1",onSubmit:S,children:[_.jsxs("div",{className:"flex gap-2",children:[_.jsx(Xt,{ref:b,type:c?"password":"text",autoComplete:c?"off":void 0,value:g,onChange:M=>m(M.target.value),onKeyDown:P,placeholder:l||(c?"Enter password for admin login...":"Type a message..."),disabled:i||x,className:"flex-1 min-w-0"}),_.jsx(Jt,{type:"submit",disabled:i||x||!N,className:"flex-shrink-0",children:x?c?"Logging in...":"Sending...":c?g.trim()?"Log in with password":"Log in as guest/use repeater ACLs":"Send"})]}),F&&_.jsxs("div",{className:"flex items-center justify-end gap-2 text-xs",children:[_.jsxs("span",{className:ft("tabular-nums",R==="error"||R==="danger"?"text-red-500 font-medium":R==="warning"?"text-yellow-500":"text-muted-foreground"),children:[g.length,"/",k.hardLimit,w<0&&` (${w})`]}),C&&_.jsxs("span",{className:ft(R==="error"?"text-red-500":"text-yellow-500"),children:[" ",C]})]})]})});function Mm(n){const s=zb(n),i=D.forwardRef((l,c)=>{const{children:u,...p}=l,d=D.Children.toArray(u),g=d.find(Vb);if(g){const m=g.props.children,x=d.map(A=>A===g?D.Children.count(m)>1?D.Children.only(null):D.isValidElement(m)?m.props.children:null:A);return _.jsx(s,{...p,ref:c,children:D.isValidElement(m)?D.cloneElement(m,void 0,x):null})}return _.jsx(s,{...p,ref:c,children:u})});return i.displayName=`${n}.Slot`,i}function zb(n){const s=D.forwardRef((i,l)=>{const{children:c,...u}=i;if(D.isValidElement(c)){const p=Zb(c),d=Ub(u,c.props);return c.type!==D.Fragment&&(d.ref=l?El(l,p):p),D.cloneElement(c,d)}return D.Children.count(c)>1?D.Children.only(null):null});return s.displayName=`${n}.SlotClone`,s}var Hb=Symbol("radix.slottable");function Vb(n){return D.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===Hb}function Ub(n,s){const i={...s};for(const l in s){const c=n[l],u=s[l];/^on[A-Z]/.test(l)?c&&u?i[l]=(...d)=>{const g=u(...d);return c(...d),g}:c&&(i[l]=c):l==="style"?i[l]={...c,...u}:l==="className"&&(i[l]=[c,u].filter(Boolean).join(" "))}return{...n,...i}}function Zb(n){var l,c;let s=(l=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:l.get,i=s&&"isReactWarning"in s&&s.isReactWarning;return i?n.ref:(s=(c=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:c.get,i=s&&"isReactWarning"in s&&s.isReactWarning,i?n.props.ref:n.props.ref||n.ref)}function Wb(n){const s=n+"CollectionProvider",[i,l]=kl(s),[c,u]=i(s,{collectionRef:{current:null},itemMap:new Map}),p=C=>{const{scope:w,children:S}=C,P=Te.useRef(null),N=Te.useRef(new Map).current;return _.jsx(c,{scope:w,itemMap:N,collectionRef:P,children:S})};p.displayName=s;const d=n+"CollectionSlot",g=Mm(d),m=Te.forwardRef((C,w)=>{const{scope:S,children:P}=C,N=u(d,S),F=kr(w,N.collectionRef);return _.jsx(g,{ref:F,children:P})});m.displayName=d;const x=n+"CollectionItemSlot",A="data-radix-collection-item",b=Mm(x),k=Te.forwardRef((C,w)=>{const{scope:S,children:P,...N}=C,F=Te.useRef(null),M=kr(w,F),H=u(x,S);return Te.useEffect(()=>(H.itemMap.set(F,{ref:F,...N}),()=>void H.itemMap.delete(F))),_.jsx(b,{[A]:"",ref:M,children:P})});k.displayName=x;function R(C){const w=u(n+"CollectionConsumer",C);return Te.useCallback(()=>{const P=w.collectionRef.current;if(!P)return[];const N=Array.from(P.querySelectorAll(`[${A}]`));return Array.from(w.itemMap.values()).sort((H,U)=>N.indexOf(H.ref.current)-N.indexOf(U.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:p,Slot:m,ItemSlot:k},R,l]}var qb=D.createContext(void 0);function yA(n){const s=D.useContext(qb);return n||s||"ltr"}var c0="rovingFocusGroup.onEntryFocus",Gb={bubbles:!1,cancelable:!0},Sl="RovingFocusGroup",[w0,_A,$b]=Wb(Sl),[Kb,wA]=kl(Sl,[$b]),[Qb,Yb]=Kb(Sl),bA=D.forwardRef((n,s)=>_.jsx(w0.Provider,{scope:n.__scopeRovingFocusGroup,children:_.jsx(w0.Slot,{scope:n.__scopeRovingFocusGroup,children:_.jsx(Xb,{...n,ref:s})})}));bA.displayName=Sl;var Xb=D.forwardRef((n,s)=>{const{__scopeRovingFocusGroup:i,orientation:l,loop:c=!1,dir:u,currentTabStopId:p,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:g,onEntryFocus:m,preventScrollOnEntryFocus:x=!1,...A}=n,b=D.useRef(null),k=kr(s,b),R=yA(u),[C,w]=rd({prop:p,defaultProp:d??null,onChange:g,caller:Sl}),[S,P]=D.useState(!1),N=oa(m),F=_A(i),M=D.useRef(!1),[H,U]=D.useState(0);return D.useEffect(()=>{const j=b.current;if(j)return j.addEventListener(c0,N),()=>j.removeEventListener(c0,N)},[N]),_.jsx(Qb,{scope:i,orientation:l,dir:R,loop:c,currentTabStopId:C,onItemFocus:D.useCallback(j=>w(j),[w]),onItemShiftTab:D.useCallback(()=>P(!0),[]),onFocusableItemAdd:D.useCallback(()=>U(j=>j+1),[]),onFocusableItemRemove:D.useCallback(()=>U(j=>j-1),[]),children:_.jsx(An.div,{tabIndex:S||H===0?-1:0,"data-orientation":l,...A,ref:k,style:{outline:"none",...n.style},onMouseDown:hn(n.onMouseDown,()=>{M.current=!0}),onFocus:hn(n.onFocus,j=>{const ee=!M.current;if(j.target===j.currentTarget&&ee&&!S){const Z=new CustomEvent(c0,Gb);if(j.currentTarget.dispatchEvent(Z),!Z.defaultPrevented){const Y=F().filter(G=>G.focusable),te=Y.find(G=>G.active),K=Y.find(G=>G.id===C),Ae=[te,K,...Y].filter(Boolean).map(G=>G.ref.current);kA(Ae,x)}}M.current=!1}),onBlur:hn(n.onBlur,()=>P(!1))})})}),CA="RovingFocusGroupItem",EA=D.forwardRef((n,s)=>{const{__scopeRovingFocusGroup:i,focusable:l=!0,active:c=!1,tabStopId:u,children:p,...d}=n,g=yl(),m=u||g,x=Yb(CA,i),A=x.currentTabStopId===m,b=_A(i),{onFocusableItemAdd:k,onFocusableItemRemove:R,currentTabStopId:C}=x;return D.useEffect(()=>{if(l)return k(),()=>R()},[l,k,R]),_.jsx(w0.ItemSlot,{scope:i,id:m,focusable:l,active:c,children:_.jsx(An.span,{tabIndex:A?0:-1,"data-orientation":x.orientation,...d,ref:s,onMouseDown:hn(n.onMouseDown,w=>{l?x.onItemFocus(m):w.preventDefault()}),onFocus:hn(n.onFocus,()=>x.onItemFocus(m)),onKeyDown:hn(n.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){x.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const S=t2(w,x.orientation,x.dir);if(S!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let N=b().filter(F=>F.focusable).map(F=>F.ref.current);if(S==="last")N.reverse();else if(S==="prev"||S==="next"){S==="prev"&&N.reverse();const F=N.indexOf(w.currentTarget);N=x.loop?n2(N,F+1):N.slice(F+1)}setTimeout(()=>kA(N))}}),children:typeof p=="function"?p({isCurrentTabStop:A,hasTabStop:C!=null}):p})})});EA.displayName=CA;var Jb={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function e2(n,s){return s!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function t2(n,s,i){const l=e2(n.key,i);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(l))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(l)))return Jb[l]}function kA(n,s=!1){const i=document.activeElement;for(const l of n)if(l===i||(l.focus({preventScroll:s}),document.activeElement!==i))return}function n2(n,s){return n.map((i,l)=>n[(s+l)%n.length])}var r2=bA,i2=EA,pd="Tabs",[o2]=kl(pd,[wA]),SA=wA(),[s2,q0]=o2(pd),BA=D.forwardRef((n,s)=>{const{__scopeTabs:i,value:l,onValueChange:c,defaultValue:u,orientation:p="horizontal",dir:d,activationMode:g="automatic",...m}=n,x=yA(d),[A,b]=rd({prop:l,onChange:c,defaultProp:u??"",caller:pd});return _.jsx(s2,{scope:i,baseId:yl(),value:A,onValueChange:b,orientation:p,dir:x,activationMode:g,children:_.jsx(An.div,{dir:x,"data-orientation":p,...m,ref:s})})});BA.displayName=pd;var PA="TabsList",TA=D.forwardRef((n,s)=>{const{__scopeTabs:i,loop:l=!0,...c}=n,u=q0(PA,i),p=SA(i);return _.jsx(r2,{asChild:!0,...p,orientation:u.orientation,dir:u.dir,loop:l,children:_.jsx(An.div,{role:"tablist","aria-orientation":u.orientation,...c,ref:s})})});TA.displayName=PA;var DA="TabsTrigger",RA=D.forwardRef((n,s)=>{const{__scopeTabs:i,value:l,disabled:c=!1,...u}=n,p=q0(DA,i),d=SA(i),g=LA(p.baseId,l),m=MA(p.baseId,l),x=l===p.value;return _.jsx(i2,{asChild:!0,...d,focusable:!c,active:x,children:_.jsx(An.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":m,"data-state":x?"active":"inactive","data-disabled":c?"":void 0,disabled:c,id:g,...u,ref:s,onMouseDown:hn(n.onMouseDown,A=>{!c&&A.button===0&&A.ctrlKey===!1?p.onValueChange(l):A.preventDefault()}),onKeyDown:hn(n.onKeyDown,A=>{[" ","Enter"].includes(A.key)&&p.onValueChange(l)}),onFocus:hn(n.onFocus,()=>{const A=p.activationMode!=="manual";!x&&!c&&A&&p.onValueChange(l)})})})});RA.displayName=DA;var NA="TabsContent",FA=D.forwardRef((n,s)=>{const{__scopeTabs:i,value:l,forceMount:c,children:u,...p}=n,d=q0(NA,i),g=LA(d.baseId,l),m=MA(d.baseId,l),x=l===d.value,A=D.useRef(x);return D.useEffect(()=>{const b=requestAnimationFrame(()=>A.current=!1);return()=>cancelAnimationFrame(b)},[]),_.jsx(ua,{present:c||x,children:({present:b})=>_.jsx(An.div,{"data-state":x?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":g,hidden:!b,id:m,tabIndex:0,...p,ref:s,style:{...n.style,animationDuration:A.current?"0s":void 0},children:b&&u})})});FA.displayName=NA;function LA(n,s){return`${n}-trigger-${s}`}function MA(n,s){return`${n}-content-${s}`}var a2=BA,IA=TA,OA=RA,jA=FA;const G0=a2,md=D.forwardRef(({className:n,...s},i)=>_.jsx(IA,{ref:i,className:ft("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...s}));md.displayName=IA.displayName;const Cr=D.forwardRef(({className:n,...s},i)=>_.jsx(OA,{ref:i,className:ft("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...s}));Cr.displayName=OA.displayName;const Er=D.forwardRef(({className:n,...s},i)=>_.jsx(jA,{ref:i,className:ft("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...s}));Er.displayName=jA.displayName;var l2=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],c2=l2.reduce((n,s)=>{const i=j0(`Primitive.${s}`),l=D.forwardRef((c,u)=>{const{asChild:p,...d}=c,g=p?i:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),_.jsx(g,{...d,ref:u})});return l.displayName=`Primitive.${s}`,{...n,[s]:l}},{}),u2="Label",zA=D.forwardRef((n,s)=>_.jsx(c2.label,{...n,ref:s,onMouseDown:i=>{var c;i.target.closest("button, input, select, textarea")||((c=n.onMouseDown)==null||c.call(n,i),!i.defaultPrevented&&i.detail>1&&i.preventDefault())}}));zA.displayName=u2;var HA=zA;const d2=z0("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Nt=D.forwardRef(({className:n,...s},i)=>_.jsx(HA,{ref:i,className:ft(d2(),n),...s}));Nt.displayName=HA.displayName;function f2(n){const s=D.useRef({value:n,previous:n});return D.useMemo(()=>(s.current.value!==n&&(s.current.previous=s.current.value,s.current.value=n),s.current.previous),[n])}function h2(n){const[s,i]=D.useState(void 0);return ia(()=>{if(n){i({width:n.offsetWidth,height:n.offsetHeight});const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const u=c[0];let p,d;if("borderBoxSize"in u){const g=u.borderBoxSize,m=Array.isArray(g)?g[0]:g;p=m.inlineSize,d=m.blockSize}else p=n.offsetWidth,d=n.offsetHeight;i({width:p,height:d})});return l.observe(n,{box:"border-box"}),()=>l.unobserve(n)}else i(void 0)},[n]),s}var gd="Checkbox",[p2]=kl(gd),[m2,$0]=p2(gd);function g2(n){const{__scopeCheckbox:s,checked:i,children:l,defaultChecked:c,disabled:u,form:p,name:d,onCheckedChange:g,required:m,value:x="on",internal_do_not_use_render:A}=n,[b,k]=rd({prop:i,defaultProp:c??!1,onChange:g,caller:gd}),[R,C]=D.useState(null),[w,S]=D.useState(null),P=D.useRef(!1),N=R?!!p||!!R.closest("form"):!0,F={checked:b,disabled:u,setChecked:k,control:R,setControl:C,name:d,form:p,value:x,hasConsumerStoppedPropagationRef:P,required:m,defaultChecked:vo(c)?!1:c,isFormControl:N,bubbleInput:w,setBubbleInput:S};return _.jsx(m2,{scope:s,...F,children:x2(A)?A(F):l})}var VA="CheckboxTrigger",UA=D.forwardRef(({__scopeCheckbox:n,onKeyDown:s,onClick:i,...l},c)=>{const{control:u,value:p,disabled:d,checked:g,required:m,setControl:x,setChecked:A,hasConsumerStoppedPropagationRef:b,isFormControl:k,bubbleInput:R}=$0(VA,n),C=kr(c,x),w=D.useRef(g);return D.useEffect(()=>{const S=u==null?void 0:u.form;if(S){const P=()=>A(w.current);return S.addEventListener("reset",P),()=>S.removeEventListener("reset",P)}},[u,A]),_.jsx(An.button,{type:"button",role:"checkbox","aria-checked":vo(g)?"mixed":g,"aria-required":m,"data-state":$A(g),"data-disabled":d?"":void 0,disabled:d,value:p,...l,ref:C,onKeyDown:hn(s,S=>{S.key==="Enter"&&S.preventDefault()}),onClick:hn(i,S=>{A(P=>vo(P)?!0:!P),R&&k&&(b.current=S.isPropagationStopped(),b.current||S.stopPropagation())})})});UA.displayName=VA;var K0=D.forwardRef((n,s)=>{const{__scopeCheckbox:i,name:l,checked:c,defaultChecked:u,required:p,disabled:d,value:g,onCheckedChange:m,form:x,...A}=n;return _.jsx(g2,{__scopeCheckbox:i,checked:c,defaultChecked:u,disabled:d,required:p,onCheckedChange:m,name:l,form:x,value:g,internal_do_not_use_render:({isFormControl:b})=>_.jsxs(_.Fragment,{children:[_.jsx(UA,{...A,ref:s,__scopeCheckbox:i}),b&&_.jsx(GA,{__scopeCheckbox:i})]})})});K0.displayName=gd;var ZA="CheckboxIndicator",WA=D.forwardRef((n,s)=>{const{__scopeCheckbox:i,forceMount:l,...c}=n,u=$0(ZA,i);return _.jsx(ua,{present:l||vo(u.checked)||u.checked===!0,children:_.jsx(An.span,{"data-state":$A(u.checked),"data-disabled":u.disabled?"":void 0,...c,ref:s,style:{pointerEvents:"none",...n.style}})})});WA.displayName=ZA;var qA="CheckboxBubbleInput",GA=D.forwardRef(({__scopeCheckbox:n,...s},i)=>{const{control:l,hasConsumerStoppedPropagationRef:c,checked:u,defaultChecked:p,required:d,disabled:g,name:m,value:x,form:A,bubbleInput:b,setBubbleInput:k}=$0(qA,n),R=kr(i,k),C=f2(u),w=h2(l);D.useEffect(()=>{const P=b;if(!P)return;const N=window.HTMLInputElement.prototype,M=Object.getOwnPropertyDescriptor(N,"checked").set,H=!c.current;if(C!==u&&M){const U=new Event("click",{bubbles:H});P.indeterminate=vo(u),M.call(P,vo(u)?!1:u),P.dispatchEvent(U)}},[b,C,u,c]);const S=D.useRef(vo(u)?!1:u);return _.jsx(An.input,{type:"checkbox","aria-hidden":!0,defaultChecked:p??S.current,required:d,disabled:g,name:m,value:x,form:A,...s,tabIndex:-1,ref:R,style:{...s.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});GA.displayName=qA;function x2(n){return typeof n=="function"}function vo(n){return n==="indeterminate"}function $A(n){return vo(n)?"indeterminate":n?"checked":"unchecked"}const Di=D.forwardRef(({className:n,...s},i)=>_.jsx(K0,{ref:i,className:ft("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...s,children:_.jsx(WA,{className:ft("flex items-center justify-center text-current"),children:_.jsx(C_,{className:"h-4 w-4"})})}));Di.displayName=K0.displayName;function A2({open:n,contacts:s,undecryptedCount:i,onClose:l,onSelectConversation:c,onCreateContact:u,onCreateChannel:p,onCreateHashtagChannel:d}){const[g,m]=D.useState("existing"),[x,A]=D.useState(""),[b,k]=D.useState(""),[R,C]=D.useState(""),[w,S]=D.useState(!1),[P,N]=D.useState(!1),[F,M]=D.useState(""),[H,U]=D.useState(!1),j=D.useRef(null),ee=async()=>{M(""),U(!0);try{if(g==="new-contact"){if(!x.trim()||!b.trim()){M("Name and public key are required");return}await u(x.trim(),b.trim(),w)}else if(g==="new-room"){if(!x.trim()||!R.trim()){M("Room name and key are required");return}await p(x.trim(),R.trim(),w)}else if(g==="hashtag"){const K=x.trim(),ae=Z(K);if(ae){M(ae);return}const Ae=P?K:K.toLowerCase();await d(`#${Ae}`,w)}l()}catch(K){M(K instanceof Error?K.message:"Failed to create")}finally{U(!1)}},Z=K=>K?/^[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*$/.test(K)?null:"Use letters, numbers, and single dashes (no leading/trailing dashes)":"Channel name is required",Y=async()=>{var Ae;M("");const K=x.trim(),ae=Z(K);if(ae){M(ae);return}U(!0);try{const G=P?K:K.toLowerCase();await d(`#${G}`,w),A(""),(Ae=j.current)==null||Ae.focus()}catch(G){M(G instanceof Error?G.message:"Failed to create")}finally{U(!1)}},te=g!=="existing"&&i>0;return _.jsx(Z0,{open:n,onOpenChange:K=>!K&&l(),children:_.jsxs(ud,{className:"sm:max-w-[500px]",children:[_.jsxs(dd,{children:[_.jsx(fd,{children:"New Conversation"}),_.jsxs(hd,{className:"sr-only",children:[g==="existing"&&"Select an existing contact to start a conversation",g==="new-contact"&&"Add a new contact by entering their name and public key",g==="new-room"&&"Create a private room with a shared encryption key",g==="hashtag"&&"Join a public hashtag channel"]})]}),_.jsxs(G0,{value:g,onValueChange:K=>m(K),className:"w-full",children:[_.jsxs(md,{className:"grid w-full grid-cols-4",children:[_.jsx(Cr,{value:"existing",children:"Existing"}),_.jsx(Cr,{value:"new-contact",children:"Contact"}),_.jsx(Cr,{value:"new-room",children:"Room"}),_.jsx(Cr,{value:"hashtag",children:"Hashtag"})]}),_.jsx(Er,{value:"existing",className:"mt-4",children:_.jsx("div",{className:"max-h-[300px] overflow-y-auto rounded-md border",children:s.length===0?_.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No contacts available"}):s.map(K=>_.jsx("div",{className:"cursor-pointer px-4 py-2 hover:bg-accent",onClick:()=>{c({type:"contact",id:K.public_key,name:Ri(K.name,K.public_key)}),l()},children:Ri(K.name,K.public_key)},K.public_key))})}),_.jsxs(Er,{value:"new-contact",className:"mt-4 space-y-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx(Nt,{htmlFor:"contact-name",children:"Name"}),_.jsx(Xt,{id:"contact-name",value:x,onChange:K=>A(K.target.value),placeholder:"Contact name"})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(Nt,{htmlFor:"contact-key",children:"Public Key"}),_.jsx(Xt,{id:"contact-key",value:b,onChange:K=>k(K.target.value),placeholder:"64-character hex public key"})]})]}),_.jsxs(Er,{value:"new-room",className:"mt-4 space-y-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx(Nt,{htmlFor:"room-name",children:"Room Name"}),_.jsx(Xt,{id:"room-name",value:x,onChange:K=>A(K.target.value),placeholder:"Room name"})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(Nt,{htmlFor:"room-key",children:"Room Key"}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx(Xt,{id:"room-key",value:R,onChange:K=>C(K.target.value),placeholder:"Pre-shared key (hex)",className:"flex-1"}),_.jsx(Jt,{type:"button",variant:"outline",size:"icon",onClick:()=>{const K=new Uint8Array(16);crypto.getRandomValues(K);const ae=Array.from(K).map(Ae=>Ae.toString(16).padStart(2,"0")).join("");C(ae)},title:"Generate random key",children:""})]})]})]}),_.jsxs(Er,{value:"hashtag",className:"mt-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx(Nt,{htmlFor:"hashtag-name",children:"Hashtag Channel"}),_.jsxs("div",{className:"flex items-center gap-1",children:[_.jsx("span",{className:"text-sm text-muted-foreground",children:"#"}),_.jsx(Xt,{ref:j,id:"hashtag-name",value:x,onChange:K=>A(K.target.value),placeholder:"channel-name",className:"flex-1"})]})]}),_.jsxs("div",{className:"mt-3 space-y-1",children:[_.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[_.jsx("input",{type:"checkbox",checked:P,onChange:K=>N(K.target.checked),className:"w-4 h-4 rounded border-input accent-primary"}),_.jsx("span",{className:"text-sm",children:"Permit capitals in room key derivation"})]}),_.jsx("p",{className:"text-xs text-muted-foreground pl-7",children:"Not recommended; most companions normalize to lowercase"})]})]})]}),te&&_.jsxs("div",{className:"space-y-1",children:[_.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[_.jsxs(Nt,{htmlFor:"try-historical",className:"text-sm text-muted-foreground cursor-pointer",children:["Try decrypting ",i.toLocaleString()," stored packet",i!==1?"s":""]}),_.jsx(Di,{id:"try-historical",checked:w,onCheckedChange:K=>S(K===!0)})]}),w&&_.jsx("p",{className:"text-xs text-muted-foreground text-right",children:"Messages will stream in as they decrypt in the background"})]}),F&&_.jsx("div",{className:"text-sm text-destructive",children:F}),_.jsxs(W0,{children:[_.jsx(Jt,{variant:"outline",onClick:l,children:"Cancel"}),g==="hashtag"&&_.jsx(Jt,{variant:"secondary",onClick:Y,disabled:H,children:H?"Creating...":"Create & Add Another"}),g!=="existing"&&_.jsx(Jt,{onClick:ee,disabled:H,children:H?"Creating...":"Create"})]})]})})}const v2="modulepreload",y2=function(n){return"/"+n},Im={},KA=function(s,i,l){let c=Promise.resolve();if(i&&i.length>0){let p=function(m){return Promise.all(m.map(x=>Promise.resolve(x).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),g=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));c=p(i.map(m=>{if(m=y2(m),m in Im)return;Im[m]=!0;const x=m.endsWith(".css"),A=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${A}`))return;const b=document.createElement("link");if(b.rel=x?"stylesheet":v2,x||(b.as="script"),b.crossOrigin="",b.href=m,g&&b.setAttribute("nonce",g),document.head.appendChild(b),x)return new Promise((k,R)=>{b.addEventListener("load",k),b.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${m}`)))})}))}function u(p){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=p,window.dispatchEvent(d),!d.defaultPrevented)throw p}return c.then(p=>{for(const d of p||[])d.status==="rejected"&&u(d.reason);return s().catch(u)})};var _2=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],w2=_2.reduce((n,s)=>{const i=j0(`Primitive.${s}`),l=D.forwardRef((c,u)=>{const{asChild:p,...d}=c,g=p?i:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),_.jsx(g,{...d,ref:u})});return l.displayName=`Primitive.${s}`,{...n,[s]:l}},{}),b2="Separator",Om="horizontal",C2=["horizontal","vertical"],QA=D.forwardRef((n,s)=>{const{decorative:i,orientation:l=Om,...c}=n,u=E2(l)?l:Om,d=i?{role:"none"}:{"aria-orientation":u==="vertical"?u:void 0,role:"separator"};return _.jsx(w2.div,{"data-orientation":u,...d,...c,ref:s})});QA.displayName=b2;function E2(n){return C2.includes(n)}var YA=QA;const Ti=D.forwardRef(({className:n,orientation:s="horizontal",decorative:i=!0,...l},c)=>_.jsx(YA,{ref:c,decorative:i,orientation:s,className:ft("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",n),...l}));Ti.displayName=YA.displayName;const k2=D.lazy(()=>KA(()=>import("./BotCodeEditor-BHtq6NSR.js"),[]).then(n=>({default:n.BotCodeEditor}))),u0=[{name:"USA/Canada",freq:910.525,bw:62.5,sf:7,cr:5},{name:"Australia",freq:915.8,bw:250,sf:10,cr:5},{name:"Australia (narrow)",freq:916.575,bw:62.5,sf:7,cr:8},{name:"Australia SA, WA",freq:923.125,bw:62.5,sf:8,cr:8},{name:"Australia QLD",freq:923.125,bw:62.5,sf:8,cr:5},{name:"New Zealand",freq:917.375,bw:250,sf:11,cr:5},{name:"New Zealand (narrow)",freq:917.375,bw:62.5,sf:7,cr:5},{name:"EU/UK/Switzerland Long Range",freq:869.525,bw:250,sf:11,cr:5},{name:"EU/UK/Switzerland Medium Range",freq:869.525,bw:250,sf:10,cr:5},{name:"EU/UK/Switzerland Narrow",freq:869.618,bw:62.5,sf:8,cr:8},{name:"Czech Republic (Narrow)",freq:869.432,bw:62.5,sf:7,cr:5},{name:"EU 433MHz Long Range",freq:433.65,bw:250,sf:11,cr:5},{name:"Portugal 433MHz",freq:433.375,bw:62.5,sf:9,cr:6},{name:"Portugal 868MHz",freq:869.618,bw:62.5,sf:7,cr:6},{name:"Vietnam",freq:920.25,bw:250,sf:11,cr:5}];function S2({open:n,config:s,health:i,appSettings:l,onClose:c,onSave:u,onSaveAppSettings:p,onSetPrivateKey:d,onReboot:g,onAdvertise:m,onHealthRefresh:x,onRefreshAppSettings:A}){const[b,k]=D.useState("radio"),[R,C]=D.useState(""),[w,S]=D.useState(""),[P,N]=D.useState(""),[F,M]=D.useState(""),[H,U]=D.useState(""),[j,ee]=D.useState(""),[Z,Y]=D.useState(""),[te,K]=D.useState(""),[ae,Ae]=D.useState(""),[G,se]=D.useState(""),[W,re]=D.useState(!1),[V,T]=D.useState(!1),[z,q]=D.useState(!1),[$,ue]=D.useState(!1),[pe,ve]=D.useState(""),[me,ge]=D.useState("14"),[Pe,We]=D.useState(!1),[Ke,ke]=D.useState(!1),[Ve,st]=D.useState("0"),mt=`def bot(
    sender_name: str | None,
    sender_key: str | None,
    message_text: str,
    is_dm: bool,
    channel_key: str | None,
    channel_name: str | None,
    sender_timestamp: int | None,
    path: str | None,
) -> str | list[str] | None:
    """
    Process incoming messages and optionally return a reply.

    Args:
        sender_name: Display name of sender (may be None)
        sender_key: 64-char hex public key (None for channel msgs)
        message_text: The message content
        is_dm: True for direct messages, False for channel
        channel_key: 32-char hex key for channels, None for DMs
        channel_name: Channel name with hash (e.g. "#bot"), None for DMs
        sender_timestamp: Sender's timestamp (unix seconds, may be None)
        path: Hex-encoded routing path (may be None)

    Returns:
        None for no reply, a string for a single reply,
        or a list of strings to send multiple messages in order
    """
    # Example: Only respond in #bot channel to "!pling" command
    if channel_name == "#bot" and "!pling" in message_text.lower():
        return "[BOT] Plong!"
    return None`,[et,at]=D.useState([]),[Ge,$e]=D.useState(null),[Ye,Le]=D.useState(null),[wt,It]=D.useState("");D.useEffect(()=>{s&&(C(s.name),S(String(s.lat)),N(String(s.lon)),M(String(s.tx_power)),U(String(s.radio.freq)),ee(String(s.radio.bw)),Y(String(s.radio.sf)),K(String(s.radio.cr)))},[s]),D.useEffect(()=>{l&&(se(String(l.max_radio_contacts)),ke(l.auto_decrypt_dm_on_advert),st(String(l.advert_interval)),at(l.bots||[]))},[l]),D.useEffect(()=>{n&&A()},[n,A]);const Nn=D.useMemo(()=>{const ie=parseFloat(H),Ee=parseFloat(j),ut=parseInt(Z,10),Ft=parseInt(te,10);for(const nn of u0)if(nn.freq===ie&&nn.bw===Ee&&nn.sf===ut&&nn.cr===Ft)return nn.name;return"custom"},[H,j,Z,te]),Ot=ie=>{if(ie==="custom")return;const Ee=u0.find(ut=>ut.name===ie);Ee&&(U(String(Ee.freq)),ee(String(Ee.bw)),Y(String(Ee.sf)),K(String(Ee.cr)))},en=()=>{if(!navigator.geolocation){pt.error("Geolocation not supported",{description:"Your browser does not support geolocation"});return}ue(!0),navigator.geolocation.getCurrentPosition(ie=>{S(ie.coords.latitude.toFixed(6)),N(ie.coords.longitude.toFixed(6)),ue(!1),pt.success("Location updated")},ie=>{ue(!1),pt.error("Failed to get location",{description:ie.message})},{enableHighAccuracy:!0,timeout:1e4})},sn=async()=>{ve(""),re(!0);try{const ie={lat:parseFloat(w),lon:parseFloat(P),tx_power:parseInt(F,10),radio:{freq:parseFloat(H),bw:parseFloat(j),sf:parseInt(Z,10),cr:parseInt(te,10)}};await u(ie),pt.success("Radio config saved, rebooting..."),re(!1),T(!0),await g(),c()}catch(ie){ve(ie instanceof Error?ie.message:"Failed to save"),re(!1)}finally{T(!1)}},yn=async()=>{ve(""),re(!0);try{await u({name:R});const Ee=parseInt(Ve,10);!isNaN(Ee)&&Ee!==(l==null?void 0:l.advert_interval)&&await p({advert_interval:Ee}),pt.success("Identity settings saved")}catch(ie){ve(ie instanceof Error?ie.message:"Failed to save")}finally{re(!1)}},Ht=async()=>{ve(""),re(!0);try{const ie=parseInt(G,10);!isNaN(ie)&&ie!==(l==null?void 0:l.max_radio_contacts)&&await p({max_radio_contacts:ie}),pt.success("Serial settings saved")}catch(ie){ve(ie instanceof Error?ie.message:"Failed to save")}finally{re(!1)}},Pt=async()=>{if(!ae.trim()){ve("Private key is required");return}ve(""),re(!0);try{await d(ae.trim()),Ae(""),pt.success("Private key set, rebooting..."),re(!1),T(!0),await g(),c()}catch(ie){ve(ie instanceof Error?ie.message:"Failed to set private key"),re(!1)}finally{T(!1)}},Vt=async()=>{if(confirm("Are you sure you want to reboot the radio? The connection will drop temporarily.")){ve(""),T(!0);try{await g(),c()}catch(ie){ve(ie instanceof Error?ie.message:"Failed to reboot radio")}finally{T(!1)}}},Fn=async()=>{q(!0);try{await m()}finally{q(!1)}},pn=async()=>{const ie=parseInt(me,10);if(isNaN(ie)||ie<1){pt.error("Invalid retention days",{description:"Retention days must be at least 1"});return}We(!0);try{const Ee=await rt.runMaintenance(ie);pt.success("Database cleanup complete",{description:`Deleted ${Ee.packets_deleted} old packet${Ee.packets_deleted===1?"":"s"}`}),await x()}catch(Ee){console.error("Failed to run maintenance:",Ee),pt.error("Database cleanup failed",{description:Ee instanceof Error?Ee.message:"Unknown error"})}finally{We(!1)}},ye=async()=>{re(!0),ve("");try{await p({auto_decrypt_dm_on_advert:Ke}),pt.success("Database settings saved")}catch(ie){console.error("Failed to save database settings:",ie),ve(ie instanceof Error?ie.message:"Failed to save"),pt.error("Failed to save settings")}finally{re(!1)}},Se=async()=>{re(!0),ve("");try{await p({bots:et}),pt.success("Bot settings saved")}catch(ie){console.error("Failed to save bot settings:",ie);const Ee=ie instanceof Error?ie.message:"Failed to save";ve(Ee),pt.error(Ee)}finally{re(!1)}},Ne=()=>{const ie={id:crypto.randomUUID(),name:`Bot ${et.length+1}`,enabled:!1,code:mt};at([...et,ie]),$e(ie.id)},ct=ie=>{const Ee=et.find(ut=>ut.id===ie);Ee&&Ee.code.trim()&&Ee.code!==mt&&!confirm(`Delete "${Ee.name}"? This will remove all its code.`)||(at(et.filter(ut=>ut.id!==ie)),Ge===ie&&$e(null))},tt=ie=>{at(et.map(Ee=>Ee.id===ie?{...Ee,enabled:!Ee.enabled}:Ee))},ne=(ie,Ee)=>{at(et.map(ut=>ut.id===ie?{...ut,code:Ee}:ut))},xe=ie=>{Le(ie.id),It(ie.name)},_e=()=>{Ye&&wt.trim()&&at(et.map(ie=>ie.id===Ye?{...ie,name:wt.trim()}:ie)),Le(null),It("")},Ue=ie=>{at(et.map(Ee=>Ee.id===ie?{...Ee,code:mt}:Ee))};return _.jsx(Z0,{open:n,onOpenChange:ie=>!ie&&c(),children:_.jsxs(ud,{className:"sm:max-w-[50vw] sm:min-w-[500px] max-h-[90vh] overflow-y-auto",children:[_.jsxs(dd,{children:[_.jsx(fd,{children:"Radio & Settings"}),_.jsxs(hd,{className:"sr-only",children:[b==="radio"&&"Configure radio frequency, power, and location settings",b==="identity"&&"Manage radio name, public key, private key, and advertising settings",b==="serial"&&"View serial port connection and configure contact sync",b==="database"&&"View database statistics and clean up old packets",b==="bot"&&"Configure automatic message bot with Python code"]})]}),s?_.jsxs(G0,{value:b,onValueChange:ie=>k(ie),className:"w-full",children:[_.jsxs(md,{className:"grid w-full grid-cols-5",children:[_.jsx(Cr,{value:"radio",children:"Radio"}),_.jsx(Cr,{value:"identity",children:"Identity"}),_.jsx(Cr,{value:"serial",children:"Serial"}),_.jsx(Cr,{value:"database",children:"Database"}),_.jsx(Cr,{value:"bot",children:"Bot"})]}),_.jsxs(Er,{value:"radio",className:"space-y-4 mt-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx(Nt,{htmlFor:"preset",children:"Preset"}),_.jsxs("select",{id:"preset",value:Nn,onChange:ie=>Ot(ie.target.value),className:"w-full h-10 px-3 rounded-md border border-input bg-background text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:[_.jsx("option",{value:"custom",children:"Custom"}),u0.map(ie=>_.jsx("option",{value:ie.name,children:ie.name},ie.name))]})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx(Nt,{htmlFor:"freq",children:"Frequency (MHz)"}),_.jsx(Xt,{id:"freq",type:"number",step:"any",value:H,onChange:ie=>U(ie.target.value)})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(Nt,{htmlFor:"bw",children:"Bandwidth (kHz)"}),_.jsx(Xt,{id:"bw",type:"number",step:"any",value:j,onChange:ie=>ee(ie.target.value)})]})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx(Nt,{htmlFor:"sf",children:"Spreading Factor"}),_.jsx(Xt,{id:"sf",type:"number",min:"7",max:"12",value:Z,onChange:ie=>Y(ie.target.value)})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(Nt,{htmlFor:"cr",children:"Coding Rate"}),_.jsx(Xt,{id:"cr",type:"number",min:"5",max:"8",value:te,onChange:ie=>K(ie.target.value)})]})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx(Nt,{htmlFor:"tx-power",children:"TX Power (dBm)"}),_.jsx(Xt,{id:"tx-power",type:"number",value:F,onChange:ie=>M(ie.target.value)})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(Nt,{htmlFor:"max-tx",children:"Max TX Power"}),_.jsx(Xt,{id:"max-tx",type:"number",value:s.max_tx_power,disabled:!0})]})]}),_.jsx(Ti,{}),_.jsxs("div",{className:"space-y-2",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx(Nt,{children:"Location"}),_.jsx(Jt,{type:"button",variant:"outline",size:"sm",onClick:en,disabled:$,children:$?"Getting...":" Use My Location"})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx(Nt,{htmlFor:"lat",className:"text-xs text-muted-foreground",children:"Latitude"}),_.jsx(Xt,{id:"lat",type:"number",step:"any",value:w,onChange:ie=>S(ie.target.value)})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(Nt,{htmlFor:"lon",className:"text-xs text-muted-foreground",children:"Longitude"}),_.jsx(Xt,{id:"lon",type:"number",step:"any",value:P,onChange:ie=>N(ie.target.value)})]})]})]}),pe&&_.jsx("div",{className:"text-sm text-destructive",children:pe}),_.jsx(Jt,{onClick:sn,disabled:W||V,className:"w-full",children:W||V?"Saving & Rebooting...":"Save Radio Config & Reboot"})]}),_.jsxs(Er,{value:"identity",className:"space-y-4 mt-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx(Nt,{htmlFor:"public-key",children:"Public Key"}),_.jsx(Xt,{id:"public-key",value:s.public_key,disabled:!0,className:"font-mono text-xs"})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(Nt,{htmlFor:"name",children:"Radio Name"}),_.jsx(Xt,{id:"name",value:R,onChange:ie=>C(ie.target.value)})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(Nt,{htmlFor:"advert-interval",children:"Periodic Advertising Interval"}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(Xt,{id:"advert-interval",type:"number",min:"0",value:Ve,onChange:ie=>st(ie.target.value),className:"w-28"}),_.jsx("span",{className:"text-sm text-muted-foreground",children:"seconds (0 = off)"})]}),_.jsx("p",{className:"text-xs text-muted-foreground",children:"How often to automatically advertise presence. Set to 0 to disable. Recommended: 86400 (24 hours) or higher."})]}),_.jsx(Jt,{onClick:yn,disabled:W,className:"w-full",children:W?"Saving...":"Save Identity Settings"}),_.jsx(Ti,{}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(Nt,{htmlFor:"private-key",children:"Set Private Key (write-only)"}),_.jsx(Xt,{id:"private-key",type:"password",autoComplete:"off",value:ae,onChange:ie=>Ae(ie.target.value),placeholder:"64-character hex private key"}),_.jsx(Jt,{onClick:Pt,disabled:W||V||!ae.trim(),className:"w-full",children:W||V?"Setting & Rebooting...":"Set Private Key & Reboot"})]}),_.jsx(Ti,{}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(Nt,{children:"Send Advertisement"}),_.jsx("p",{className:"text-xs text-muted-foreground",children:"Send a flood advertisement to announce your presence on the mesh network."}),_.jsx(Jt,{onClick:Fn,disabled:z||!(i!=null&&i.radio_connected),className:"w-full bg-yellow-600 hover:bg-yellow-700 text-white",children:z?"Sending...":"Send Advertisement"}),!(i!=null&&i.radio_connected)&&_.jsx("p",{className:"text-sm text-destructive",children:"Radio not connected"})]}),pe&&_.jsx("div",{className:"text-sm text-destructive",children:pe})]}),_.jsxs(Er,{value:"serial",className:"space-y-4 mt-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx(Nt,{children:"Serial Port"}),i!=null&&i.serial_port?_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),_.jsx("code",{className:"px-2 py-1 bg-muted rounded text-foreground text-sm",children:i.serial_port})]}):_.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[_.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500"}),_.jsx("span",{children:"Not connected"})]})]}),_.jsx(Ti,{}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(Nt,{htmlFor:"max-contacts",children:"Max Contacts on Radio"}),_.jsx(Xt,{id:"max-contacts",type:"number",min:"1",max:"1000",value:G,onChange:ie=>se(ie.target.value)}),_.jsx("p",{className:"text-xs text-muted-foreground",children:"Recent non-repeater contacts loaded to radio for DM auto-ACK (1-1000)"})]}),_.jsx(Jt,{onClick:Ht,disabled:W,className:"w-full",children:W?"Saving...":"Save Settings"}),_.jsx(Ti,{}),_.jsx(Jt,{variant:"outline",onClick:Vt,disabled:V||W,className:"w-full border-red-500/50 text-red-400 hover:bg-red-500/10",children:V?"Rebooting...":"Reboot Radio"}),pe&&_.jsx("div",{className:"text-sm text-destructive",children:pe})]}),_.jsxs(Er,{value:"database",className:"space-y-4 mt-4",children:[_.jsxs("div",{className:"space-y-3",children:[_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("span",{className:"text-sm text-muted-foreground",children:"Database size"}),_.jsxs("span",{className:"font-medium",children:[(i==null?void 0:i.database_size_mb)??"?"," MB"]})]}),i!=null&&i.oldest_undecrypted_timestamp?_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("span",{className:"text-sm text-muted-foreground",children:"Oldest undecrypted packet"}),_.jsxs("span",{className:"font-medium",children:[ra(i.oldest_undecrypted_timestamp),_.jsxs("span",{className:"text-muted-foreground ml-1",children:["(",Math.floor((Date.now()/1e3-i.oldest_undecrypted_timestamp)/86400)," ","days old)"]})]})]}):_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("span",{className:"text-sm text-muted-foreground",children:"Oldest undecrypted packet"}),_.jsx("span",{className:"text-muted-foreground",children:"None"})]})]}),_.jsx(Ti,{}),_.jsxs("div",{className:"space-y-3",children:[_.jsx(Nt,{children:"Cleanup Old Packets"}),_.jsx("p",{className:"text-xs text-muted-foreground",children:"Delete undecrypted packets older than the specified days. This helps manage storage for packets that couldn't be decrypted (unknown channel keys)."}),_.jsxs("div",{className:"flex gap-2 items-end",children:[_.jsxs("div",{className:"space-y-1",children:[_.jsx(Nt,{htmlFor:"retention-days",className:"text-xs",children:"Days to retain"}),_.jsx(Xt,{id:"retention-days",type:"number",min:"1",max:"365",value:me,onChange:ie=>ge(ie.target.value),className:"w-24"})]}),_.jsx(Jt,{variant:"outline",onClick:pn,disabled:Pe,children:Pe?"Cleaning...":"Cleanup"})]})]}),_.jsx(Ti,{}),_.jsxs("div",{className:"space-y-3",children:[_.jsx(Nt,{children:"DM Decryption"}),_.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[_.jsx("input",{type:"checkbox",checked:Ke,onChange:ie=>ke(ie.target.checked),className:"w-4 h-4 rounded border-input accent-primary"}),_.jsx("span",{className:"text-sm",children:"Auto-decrypt historical DMs when new contact advertises"})]}),_.jsx("p",{className:"text-xs text-muted-foreground",children:"When enabled, the server will automatically try to decrypt stored DM packets when a new contact sends an advertisement. This may cause brief delays on large packet backlogs."})]}),pe&&_.jsx("div",{className:"text-sm text-destructive",children:pe}),_.jsx(Jt,{onClick:ye,disabled:W,className:"w-full",children:W?"Saving...":"Save Settings"})]}),_.jsxs(Er,{value:"bot",className:"space-y-4 mt-4",children:[_.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-md",children:_.jsxs("p",{className:"text-sm text-red-500",children:[_.jsx("strong",{children:"Experimental:"})," This is an alpha feature and introduces automated message sending to your radio; unexpected behavior may occur. Use with caution, and please report any bugs!"]})}),_.jsx("div",{className:"p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-md",children:_.jsxs("p",{className:"text-sm text-yellow-500",children:[_.jsx("strong",{children:"Security Warning:"})," This feature executes arbitrary Python code on the server. Only run trusted code, and be cautious of arbitrary usage of message parameters."]})}),_.jsx("div",{className:"p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-md",children:_.jsxs("p",{className:"text-sm text-yellow-500",children:[_.jsx("strong",{children:"Don't wreck the mesh!"})," Bots process ALL messages, including their own. Be careful of creating infinite loops!"]})}),_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx(Nt,{children:"Bots"}),_.jsx(Jt,{type:"button",variant:"outline",size:"sm",onClick:Ne,children:"+ New Bot"})]}),et.length===0?_.jsxs("div",{className:"text-center py-8 border border-dashed border-input rounded-md",children:[_.jsx("p",{className:"text-muted-foreground mb-4",children:"No bots configured"}),_.jsx(Jt,{type:"button",variant:"outline",onClick:Ne,children:"Create your first bot"})]}):_.jsx("div",{className:"space-y-2",children:et.map(ie=>_.jsxs("div",{className:"border border-input rounded-md overflow-hidden",children:[_.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-muted/50 cursor-pointer hover:bg-muted/80",onClick:Ee=>{Ee.target.closest("input, button")||$e(Ge===ie.id?null:ie.id)},children:[_.jsx("span",{className:"text-muted-foreground",children:Ge===ie.id?"":""}),Ye===ie.id?_.jsx("input",{type:"text",value:wt,onChange:Ee=>It(Ee.target.value),onBlur:_e,onKeyDown:Ee=>{Ee.key==="Enter"&&_e(),Ee.key==="Escape"&&(Le(null),It(""))},autoFocus:!0,className:"px-2 py-0.5 text-sm bg-background border border-input rounded flex-1 max-w-[200px]",onClick:Ee=>Ee.stopPropagation()}):_.jsx("span",{className:"text-sm font-medium flex-1 hover:text-primary cursor-text",onClick:Ee=>{Ee.stopPropagation(),xe(ie)},title:"Click to rename",children:ie.name}),_.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer",onClick:Ee=>Ee.stopPropagation(),children:[_.jsx("input",{type:"checkbox",checked:ie.enabled,onChange:()=>tt(ie.id),className:"w-4 h-4 rounded border-input accent-primary"}),_.jsx("span",{className:"text-xs text-muted-foreground",children:"Enabled"})]}),_.jsx(Jt,{type:"button",variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-muted-foreground hover:text-destructive",onClick:Ee=>{Ee.stopPropagation(),ct(ie.id)},title:"Delete bot",children:""})]}),Ge===ie.id&&_.jsxs("div",{className:"p-3 space-y-3 border-t border-input",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("p",{className:"text-xs text-muted-foreground",children:["Define a ",_.jsx("code",{className:"bg-muted px-1 rounded",children:"bot()"})," function that receives message data and optionally returns a reply."]}),_.jsx(Jt,{type:"button",variant:"outline",size:"sm",onClick:()=>Ue(ie.id),children:"Reset to Example"})]}),_.jsx(D.Suspense,{fallback:_.jsx("div",{className:"h-64 rounded-md border border-input bg-[#282c34] flex items-center justify-center text-muted-foreground",children:"Loading editor..."}),children:_.jsx(k2,{value:ie.code,onChange:Ee=>ne(ie.id,Ee),id:`bot-code-${ie.id}`})})]})]},ie.id))}),_.jsx(Ti,{}),_.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[_.jsxs("p",{children:[_.jsx("strong",{children:"Available:"})," Standard Python libraries and any modules installed in the server environment."]}),_.jsxs("p",{children:[_.jsx("strong",{children:"Limits:"})," 10 second timeout per bot."]}),_.jsxs("p",{children:[_.jsx("strong",{children:"Note:"})," Bots respond to all messages, including your own. For channel messages, ",_.jsx("code",{children:"sender_key"})," is ",_.jsx("code",{children:"None"}),". Multiple enabled bots run serially, with a two-second delay between messages to prevent repeater collision."]})]}),pe&&_.jsx("div",{className:"text-sm text-destructive",children:pe}),_.jsx(Jt,{onClick:Se,disabled:W,className:"w-full",children:W?"Saving...":"Save Bot Settings"})]})]}):_.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"Loading configuration..."})]})})}var Si={},nl={},bn={},jm;function dr(){if(jm)return bn;jm=1,Object.defineProperty(bn,"__esModule",{value:!0}),bn.RequestType=bn.AdvertFlags=bn.DeviceRole=bn.PayloadVersion=bn.ControlSubType=bn.PayloadType=bn.RouteType=void 0;var n;(function(d){d[d.TransportFlood=0]="TransportFlood",d[d.Flood=1]="Flood",d[d.Direct=2]="Direct",d[d.TransportDirect=3]="TransportDirect"})(n||(bn.RouteType=n={}));var s;(function(d){d[d.Request=0]="Request",d[d.Response=1]="Response",d[d.TextMessage=2]="TextMessage",d[d.Ack=3]="Ack",d[d.Advert=4]="Advert",d[d.GroupText=5]="GroupText",d[d.GroupData=6]="GroupData",d[d.AnonRequest=7]="AnonRequest",d[d.Path=8]="Path",d[d.Trace=9]="Trace",d[d.Multipart=10]="Multipart",d[d.Control=11]="Control",d[d.RawCustom=15]="RawCustom"})(s||(bn.PayloadType=s={}));var i;(function(d){d[d.NodeDiscoverReq=128]="NodeDiscoverReq",d[d.NodeDiscoverResp=144]="NodeDiscoverResp"})(i||(bn.ControlSubType=i={}));var l;(function(d){d[d.Version1=0]="Version1",d[d.Version2=1]="Version2",d[d.Version3=2]="Version3",d[d.Version4=3]="Version4"})(l||(bn.PayloadVersion=l={}));var c;(function(d){d[d.Unknown=0]="Unknown",d[d.ChatNode=1]="ChatNode",d[d.Repeater=2]="Repeater",d[d.RoomServer=3]="RoomServer",d[d.Sensor=4]="Sensor"})(c||(bn.DeviceRole=c={}));var u;(function(d){d[d.HasLocation=16]="HasLocation",d[d.HasFeature1=32]="HasFeature1",d[d.HasFeature2=64]="HasFeature2",d[d.HasName=128]="HasName"})(u||(bn.AdvertFlags=u={}));var p;return(function(d){d[d.GetStats=1]="GetStats",d[d.Keepalive=2]="Keepalive",d[d.GetTelemetryData=3]="GetTelemetryData",d[d.GetMinMaxAvgData=4]="GetMinMaxAvgData",d[d.GetAccessList=5]="GetAccessList"})(p||(bn.RequestType=p={})),bn}var Qo={},zm;function Cn(){if(zm)return Qo;zm=1,Object.defineProperty(Qo,"__esModule",{value:!0}),Qo.byteToHex=n,Qo.bytesToHex=s,Qo.numberToHex=i,Qo.hexToBytes=l;function n(c){return c.toString(16).padStart(2,"0").toUpperCase()}function s(c){return Array.from(c).map(n).join("")}function i(c,u=8){return(c>>>0).toString(16).padStart(u,"0").toUpperCase()}function l(c){const u=c.replace(/\s/g,"").toUpperCase();if(!/^[0-9A-F]*$/.test(u))throw new Error("Invalid hex string: invalid characters at position 0");if(u.length%2!==0)throw new Error("Invalid hex string: odd length");const p=new Uint8Array(u.length/2);for(let d=0;d<u.length;d+=2)p[d/2]=parseInt(u.substr(d,2),16);return p}return Qo}var Bi={},Hm;function _l(){if(Hm)return Bi;Hm=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.getRouteTypeName=s,Bi.getPayloadTypeName=i,Bi.getPayloadVersionName=l,Bi.getDeviceRoleName=c,Bi.getRequestTypeName=u,Bi.getControlSubTypeName=p;const n=dr();function s(d){switch(d){case n.RouteType.Flood:return"Flood";case n.RouteType.Direct:return"Direct";case n.RouteType.TransportFlood:return"TransportFlood";case n.RouteType.TransportDirect:return"TransportDirect";default:return`Unknown (${d})`}}function i(d){switch(d){case n.PayloadType.RawCustom:return"RawCustom";case n.PayloadType.Trace:return"Trace";case n.PayloadType.Advert:return"Advert";case n.PayloadType.GroupText:return"GroupText";case n.PayloadType.GroupData:return"GroupData";case n.PayloadType.Request:return"Request";case n.PayloadType.Response:return"Response";case n.PayloadType.TextMessage:return"TextMessage";case n.PayloadType.AnonRequest:return"AnonRequest";case n.PayloadType.Ack:return"Ack";case n.PayloadType.Path:return"Path";case n.PayloadType.Multipart:return"Multipart";case n.PayloadType.Control:return"Control";default:return`Unknown (0x${d.toString(16)})`}}function l(d){switch(d){case n.PayloadVersion.Version1:return"Version 1";case n.PayloadVersion.Version2:return"Version 2";case n.PayloadVersion.Version3:return"Version 3";case n.PayloadVersion.Version4:return"Version 4";default:return`Unknown (${d})`}}function c(d){switch(d){case n.DeviceRole.Unknown:return"Unknown";case n.DeviceRole.ChatNode:return"Chat Node";case n.DeviceRole.Repeater:return"Repeater";case n.DeviceRole.RoomServer:return"Room Server";case n.DeviceRole.Sensor:return"Sensor";default:return`Unknown (${d})`}}function u(d){switch(d){case n.RequestType.GetStats:return"Get Stats";case n.RequestType.Keepalive:return"Keepalive (deprecated)";case n.RequestType.GetTelemetryData:return"Get Telemetry Data";case n.RequestType.GetMinMaxAvgData:return"Get Min/Max/Avg Data";case n.RequestType.GetAccessList:return"Get Access List";default:return`Unknown (${d})`}}function p(d){switch(d){case n.ControlSubType.NodeDiscoverReq:return"Node Discover Request";case n.ControlSubType.NodeDiscoverResp:return"Node Discover Response";default:return`Unknown (0x${d.toString(16)})`}}return Bi}var rl={},il={},su={exports:{}};function b0(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var au={exports:{}};const B2={},P2=Object.freeze(Object.defineProperty({__proto__:null,default:B2},Symbol.toStringTag,{value:"Module"})),Yu=gx(P2);var T2=au.exports,Vm;function vt(){return Vm||(Vm=1,(function(n,s){(function(i,l){n.exports=l()})(T2,function(){var i=i||(function(l,c){var u;if(typeof window<"u"&&window.crypto&&(u=window.crypto),typeof self<"u"&&self.crypto&&(u=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(u=globalThis.crypto),!u&&typeof window<"u"&&window.msCrypto&&(u=window.msCrypto),!u&&typeof $f<"u"&&$f.crypto&&(u=$f.crypto),!u&&typeof b0=="function")try{u=Yu}catch{}var p=function(){if(u){if(typeof u.getRandomValues=="function")try{return u.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof u.randomBytes=="function")try{return u.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},d=Object.create||(function(){function P(){}return function(N){var F;return P.prototype=N,F=new P,P.prototype=null,F}})(),g={},m=g.lib={},x=m.Base=(function(){return{extend:function(P){var N=d(this);return P&&N.mixIn(P),(!N.hasOwnProperty("init")||this.init===N.init)&&(N.init=function(){N.$super.init.apply(this,arguments)}),N.init.prototype=N,N.$super=this,N},create:function(){var P=this.extend();return P.init.apply(P,arguments),P},init:function(){},mixIn:function(P){for(var N in P)P.hasOwnProperty(N)&&(this[N]=P[N]);P.hasOwnProperty("toString")&&(this.toString=P.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),A=m.WordArray=x.extend({init:function(P,N){P=this.words=P||[],N!=c?this.sigBytes=N:this.sigBytes=P.length*4},toString:function(P){return(P||k).stringify(this)},concat:function(P){var N=this.words,F=P.words,M=this.sigBytes,H=P.sigBytes;if(this.clamp(),M%4)for(var U=0;U<H;U++){var j=F[U>>>2]>>>24-U%4*8&255;N[M+U>>>2]|=j<<24-(M+U)%4*8}else for(var ee=0;ee<H;ee+=4)N[M+ee>>>2]=F[ee>>>2];return this.sigBytes+=H,this},clamp:function(){var P=this.words,N=this.sigBytes;P[N>>>2]&=4294967295<<32-N%4*8,P.length=l.ceil(N/4)},clone:function(){var P=x.clone.call(this);return P.words=this.words.slice(0),P},random:function(P){for(var N=[],F=0;F<P;F+=4)N.push(p());return new A.init(N,P)}}),b=g.enc={},k=b.Hex={stringify:function(P){for(var N=P.words,F=P.sigBytes,M=[],H=0;H<F;H++){var U=N[H>>>2]>>>24-H%4*8&255;M.push((U>>>4).toString(16)),M.push((U&15).toString(16))}return M.join("")},parse:function(P){for(var N=P.length,F=[],M=0;M<N;M+=2)F[M>>>3]|=parseInt(P.substr(M,2),16)<<24-M%8*4;return new A.init(F,N/2)}},R=b.Latin1={stringify:function(P){for(var N=P.words,F=P.sigBytes,M=[],H=0;H<F;H++){var U=N[H>>>2]>>>24-H%4*8&255;M.push(String.fromCharCode(U))}return M.join("")},parse:function(P){for(var N=P.length,F=[],M=0;M<N;M++)F[M>>>2]|=(P.charCodeAt(M)&255)<<24-M%4*8;return new A.init(F,N)}},C=b.Utf8={stringify:function(P){try{return decodeURIComponent(escape(R.stringify(P)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(P){return R.parse(unescape(encodeURIComponent(P)))}},w=m.BufferedBlockAlgorithm=x.extend({reset:function(){this._data=new A.init,this._nDataBytes=0},_append:function(P){typeof P=="string"&&(P=C.parse(P)),this._data.concat(P),this._nDataBytes+=P.sigBytes},_process:function(P){var N,F=this._data,M=F.words,H=F.sigBytes,U=this.blockSize,j=U*4,ee=H/j;P?ee=l.ceil(ee):ee=l.max((ee|0)-this._minBufferSize,0);var Z=ee*U,Y=l.min(Z*4,H);if(Z){for(var te=0;te<Z;te+=U)this._doProcessBlock(M,te);N=M.splice(0,Z),F.sigBytes-=Y}return new A.init(N,Y)},clone:function(){var P=x.clone.call(this);return P._data=this._data.clone(),P},_minBufferSize:0});m.Hasher=w.extend({cfg:x.extend(),init:function(P){this.cfg=this.cfg.extend(P),this.reset()},reset:function(){w.reset.call(this),this._doReset()},update:function(P){return this._append(P),this._process(),this},finalize:function(P){P&&this._append(P);var N=this._doFinalize();return N},blockSize:16,_createHelper:function(P){return function(N,F){return new P.init(F).finalize(N)}},_createHmacHelper:function(P){return function(N,F){return new S.HMAC.init(P,F).finalize(N)}}});var S=g.algo={};return g})(Math);return i})})(au)),au.exports}var lu={exports:{}},D2=lu.exports,Um;function xd(){return Um||(Um=1,(function(n,s){(function(i,l){n.exports=l(vt())})(D2,function(i){return(function(l){var c=i,u=c.lib,p=u.Base,d=u.WordArray,g=c.x64={};g.Word=p.extend({init:function(m,x){this.high=m,this.low=x}}),g.WordArray=p.extend({init:function(m,x){m=this.words=m||[],x!=l?this.sigBytes=x:this.sigBytes=m.length*8},toX32:function(){for(var m=this.words,x=m.length,A=[],b=0;b<x;b++){var k=m[b];A.push(k.high),A.push(k.low)}return d.create(A,this.sigBytes)},clone:function(){for(var m=p.clone.call(this),x=m.words=this.words.slice(0),A=x.length,b=0;b<A;b++)x[b]=x[b].clone();return m}})})(),i})})(lu)),lu.exports}var cu={exports:{}},R2=cu.exports,Zm;function N2(){return Zm||(Zm=1,(function(n,s){(function(i,l){n.exports=l(vt())})(R2,function(i){return(function(){if(typeof ArrayBuffer=="function"){var l=i,c=l.lib,u=c.WordArray,p=u.init,d=u.init=function(g){if(g instanceof ArrayBuffer&&(g=new Uint8Array(g)),(g instanceof Int8Array||typeof Uint8ClampedArray<"u"&&g instanceof Uint8ClampedArray||g instanceof Int16Array||g instanceof Uint16Array||g instanceof Int32Array||g instanceof Uint32Array||g instanceof Float32Array||g instanceof Float64Array)&&(g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength)),g instanceof Uint8Array){for(var m=g.byteLength,x=[],A=0;A<m;A++)x[A>>>2]|=g[A]<<24-A%4*8;p.call(this,x,m)}else p.apply(this,arguments)};d.prototype=u}})(),i.lib.WordArray})})(cu)),cu.exports}var uu={exports:{}},F2=uu.exports,Wm;function L2(){return Wm||(Wm=1,(function(n,s){(function(i,l){n.exports=l(vt())})(F2,function(i){return(function(){var l=i,c=l.lib,u=c.WordArray,p=l.enc;p.Utf16=p.Utf16BE={stringify:function(g){for(var m=g.words,x=g.sigBytes,A=[],b=0;b<x;b+=2){var k=m[b>>>2]>>>16-b%4*8&65535;A.push(String.fromCharCode(k))}return A.join("")},parse:function(g){for(var m=g.length,x=[],A=0;A<m;A++)x[A>>>1]|=g.charCodeAt(A)<<16-A%2*16;return u.create(x,m*2)}},p.Utf16LE={stringify:function(g){for(var m=g.words,x=g.sigBytes,A=[],b=0;b<x;b+=2){var k=d(m[b>>>2]>>>16-b%4*8&65535);A.push(String.fromCharCode(k))}return A.join("")},parse:function(g){for(var m=g.length,x=[],A=0;A<m;A++)x[A>>>1]|=d(g.charCodeAt(A)<<16-A%2*16);return u.create(x,m*2)}};function d(g){return g<<8&4278255360|g>>>8&16711935}})(),i.enc.Utf16})})(uu)),uu.exports}var du={exports:{}},M2=du.exports,qm;function as(){return qm||(qm=1,(function(n,s){(function(i,l){n.exports=l(vt())})(M2,function(i){return(function(){var l=i,c=l.lib,u=c.WordArray,p=l.enc;p.Base64={stringify:function(g){var m=g.words,x=g.sigBytes,A=this._map;g.clamp();for(var b=[],k=0;k<x;k+=3)for(var R=m[k>>>2]>>>24-k%4*8&255,C=m[k+1>>>2]>>>24-(k+1)%4*8&255,w=m[k+2>>>2]>>>24-(k+2)%4*8&255,S=R<<16|C<<8|w,P=0;P<4&&k+P*.75<x;P++)b.push(A.charAt(S>>>6*(3-P)&63));var N=A.charAt(64);if(N)for(;b.length%4;)b.push(N);return b.join("")},parse:function(g){var m=g.length,x=this._map,A=this._reverseMap;if(!A){A=this._reverseMap=[];for(var b=0;b<x.length;b++)A[x.charCodeAt(b)]=b}var k=x.charAt(64);if(k){var R=g.indexOf(k);R!==-1&&(m=R)}return d(g,m,A)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function d(g,m,x){for(var A=[],b=0,k=0;k<m;k++)if(k%4){var R=x[g.charCodeAt(k-1)]<<k%4*2,C=x[g.charCodeAt(k)]>>>6-k%4*2,w=R|C;A[b>>>2]|=w<<24-b%4*8,b++}return u.create(A,b)}})(),i.enc.Base64})})(du)),du.exports}var fu={exports:{}},I2=fu.exports,Gm;function O2(){return Gm||(Gm=1,(function(n,s){(function(i,l){n.exports=l(vt())})(I2,function(i){return(function(){var l=i,c=l.lib,u=c.WordArray,p=l.enc;p.Base64url={stringify:function(g,m){m===void 0&&(m=!0);var x=g.words,A=g.sigBytes,b=m?this._safe_map:this._map;g.clamp();for(var k=[],R=0;R<A;R+=3)for(var C=x[R>>>2]>>>24-R%4*8&255,w=x[R+1>>>2]>>>24-(R+1)%4*8&255,S=x[R+2>>>2]>>>24-(R+2)%4*8&255,P=C<<16|w<<8|S,N=0;N<4&&R+N*.75<A;N++)k.push(b.charAt(P>>>6*(3-N)&63));var F=b.charAt(64);if(F)for(;k.length%4;)k.push(F);return k.join("")},parse:function(g,m){m===void 0&&(m=!0);var x=g.length,A=m?this._safe_map:this._map,b=this._reverseMap;if(!b){b=this._reverseMap=[];for(var k=0;k<A.length;k++)b[A.charCodeAt(k)]=k}var R=A.charAt(64);if(R){var C=g.indexOf(R);C!==-1&&(x=C)}return d(g,x,b)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function d(g,m,x){for(var A=[],b=0,k=0;k<m;k++)if(k%4){var R=x[g.charCodeAt(k-1)]<<k%4*2,C=x[g.charCodeAt(k)]>>>6-k%4*2,w=R|C;A[b>>>2]|=w<<24-b%4*8,b++}return u.create(A,b)}})(),i.enc.Base64url})})(fu)),fu.exports}var hu={exports:{}},j2=hu.exports,$m;function ls(){return $m||($m=1,(function(n,s){(function(i,l){n.exports=l(vt())})(j2,function(i){return(function(l){var c=i,u=c.lib,p=u.WordArray,d=u.Hasher,g=c.algo,m=[];(function(){for(var C=0;C<64;C++)m[C]=l.abs(l.sin(C+1))*4294967296|0})();var x=g.MD5=d.extend({_doReset:function(){this._hash=new p.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(C,w){for(var S=0;S<16;S++){var P=w+S,N=C[P];C[P]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360}var F=this._hash.words,M=C[w+0],H=C[w+1],U=C[w+2],j=C[w+3],ee=C[w+4],Z=C[w+5],Y=C[w+6],te=C[w+7],K=C[w+8],ae=C[w+9],Ae=C[w+10],G=C[w+11],se=C[w+12],W=C[w+13],re=C[w+14],V=C[w+15],T=F[0],z=F[1],q=F[2],$=F[3];T=A(T,z,q,$,M,7,m[0]),$=A($,T,z,q,H,12,m[1]),q=A(q,$,T,z,U,17,m[2]),z=A(z,q,$,T,j,22,m[3]),T=A(T,z,q,$,ee,7,m[4]),$=A($,T,z,q,Z,12,m[5]),q=A(q,$,T,z,Y,17,m[6]),z=A(z,q,$,T,te,22,m[7]),T=A(T,z,q,$,K,7,m[8]),$=A($,T,z,q,ae,12,m[9]),q=A(q,$,T,z,Ae,17,m[10]),z=A(z,q,$,T,G,22,m[11]),T=A(T,z,q,$,se,7,m[12]),$=A($,T,z,q,W,12,m[13]),q=A(q,$,T,z,re,17,m[14]),z=A(z,q,$,T,V,22,m[15]),T=b(T,z,q,$,H,5,m[16]),$=b($,T,z,q,Y,9,m[17]),q=b(q,$,T,z,G,14,m[18]),z=b(z,q,$,T,M,20,m[19]),T=b(T,z,q,$,Z,5,m[20]),$=b($,T,z,q,Ae,9,m[21]),q=b(q,$,T,z,V,14,m[22]),z=b(z,q,$,T,ee,20,m[23]),T=b(T,z,q,$,ae,5,m[24]),$=b($,T,z,q,re,9,m[25]),q=b(q,$,T,z,j,14,m[26]),z=b(z,q,$,T,K,20,m[27]),T=b(T,z,q,$,W,5,m[28]),$=b($,T,z,q,U,9,m[29]),q=b(q,$,T,z,te,14,m[30]),z=b(z,q,$,T,se,20,m[31]),T=k(T,z,q,$,Z,4,m[32]),$=k($,T,z,q,K,11,m[33]),q=k(q,$,T,z,G,16,m[34]),z=k(z,q,$,T,re,23,m[35]),T=k(T,z,q,$,H,4,m[36]),$=k($,T,z,q,ee,11,m[37]),q=k(q,$,T,z,te,16,m[38]),z=k(z,q,$,T,Ae,23,m[39]),T=k(T,z,q,$,W,4,m[40]),$=k($,T,z,q,M,11,m[41]),q=k(q,$,T,z,j,16,m[42]),z=k(z,q,$,T,Y,23,m[43]),T=k(T,z,q,$,ae,4,m[44]),$=k($,T,z,q,se,11,m[45]),q=k(q,$,T,z,V,16,m[46]),z=k(z,q,$,T,U,23,m[47]),T=R(T,z,q,$,M,6,m[48]),$=R($,T,z,q,te,10,m[49]),q=R(q,$,T,z,re,15,m[50]),z=R(z,q,$,T,Z,21,m[51]),T=R(T,z,q,$,se,6,m[52]),$=R($,T,z,q,j,10,m[53]),q=R(q,$,T,z,Ae,15,m[54]),z=R(z,q,$,T,H,21,m[55]),T=R(T,z,q,$,K,6,m[56]),$=R($,T,z,q,V,10,m[57]),q=R(q,$,T,z,Y,15,m[58]),z=R(z,q,$,T,W,21,m[59]),T=R(T,z,q,$,ee,6,m[60]),$=R($,T,z,q,G,10,m[61]),q=R(q,$,T,z,U,15,m[62]),z=R(z,q,$,T,ae,21,m[63]),F[0]=F[0]+T|0,F[1]=F[1]+z|0,F[2]=F[2]+q|0,F[3]=F[3]+$|0},_doFinalize:function(){var C=this._data,w=C.words,S=this._nDataBytes*8,P=C.sigBytes*8;w[P>>>5]|=128<<24-P%32;var N=l.floor(S/4294967296),F=S;w[(P+64>>>9<<4)+15]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,w[(P+64>>>9<<4)+14]=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360,C.sigBytes=(w.length+1)*4,this._process();for(var M=this._hash,H=M.words,U=0;U<4;U++){var j=H[U];H[U]=(j<<8|j>>>24)&16711935|(j<<24|j>>>8)&4278255360}return M},clone:function(){var C=d.clone.call(this);return C._hash=this._hash.clone(),C}});function A(C,w,S,P,N,F,M){var H=C+(w&S|~w&P)+N+M;return(H<<F|H>>>32-F)+w}function b(C,w,S,P,N,F,M){var H=C+(w&P|S&~P)+N+M;return(H<<F|H>>>32-F)+w}function k(C,w,S,P,N,F,M){var H=C+(w^S^P)+N+M;return(H<<F|H>>>32-F)+w}function R(C,w,S,P,N,F,M){var H=C+(S^(w|~P))+N+M;return(H<<F|H>>>32-F)+w}c.MD5=d._createHelper(x),c.HmacMD5=d._createHmacHelper(x)})(Math),i.MD5})})(hu)),hu.exports}var pu={exports:{}},z2=pu.exports,Km;function XA(){return Km||(Km=1,(function(n,s){(function(i,l){n.exports=l(vt())})(z2,function(i){return(function(){var l=i,c=l.lib,u=c.WordArray,p=c.Hasher,d=l.algo,g=[],m=d.SHA1=p.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(x,A){for(var b=this._hash.words,k=b[0],R=b[1],C=b[2],w=b[3],S=b[4],P=0;P<80;P++){if(P<16)g[P]=x[A+P]|0;else{var N=g[P-3]^g[P-8]^g[P-14]^g[P-16];g[P]=N<<1|N>>>31}var F=(k<<5|k>>>27)+S+g[P];P<20?F+=(R&C|~R&w)+1518500249:P<40?F+=(R^C^w)+1859775393:P<60?F+=(R&C|R&w|C&w)-1894007588:F+=(R^C^w)-899497514,S=w,w=C,C=R<<30|R>>>2,R=k,k=F}b[0]=b[0]+k|0,b[1]=b[1]+R|0,b[2]=b[2]+C|0,b[3]=b[3]+w|0,b[4]=b[4]+S|0},_doFinalize:function(){var x=this._data,A=x.words,b=this._nDataBytes*8,k=x.sigBytes*8;return A[k>>>5]|=128<<24-k%32,A[(k+64>>>9<<4)+14]=Math.floor(b/4294967296),A[(k+64>>>9<<4)+15]=b,x.sigBytes=A.length*4,this._process(),this._hash},clone:function(){var x=p.clone.call(this);return x._hash=this._hash.clone(),x}});l.SHA1=p._createHelper(m),l.HmacSHA1=p._createHmacHelper(m)})(),i.SHA1})})(pu)),pu.exports}var mu={exports:{}},H2=mu.exports,Qm;function Bl(){return Qm||(Qm=1,(function(n,s){(function(i,l){n.exports=l(vt())})(H2,function(i){return(function(l){var c=i,u=c.lib,p=u.WordArray,d=u.Hasher,g=c.algo,m=[],x=[];(function(){function k(S){for(var P=l.sqrt(S),N=2;N<=P;N++)if(!(S%N))return!1;return!0}function R(S){return(S-(S|0))*4294967296|0}for(var C=2,w=0;w<64;)k(C)&&(w<8&&(m[w]=R(l.pow(C,1/2))),x[w]=R(l.pow(C,1/3)),w++),C++})();var A=[],b=g.SHA256=d.extend({_doReset:function(){this._hash=new p.init(m.slice(0))},_doProcessBlock:function(k,R){for(var C=this._hash.words,w=C[0],S=C[1],P=C[2],N=C[3],F=C[4],M=C[5],H=C[6],U=C[7],j=0;j<64;j++){if(j<16)A[j]=k[R+j]|0;else{var ee=A[j-15],Z=(ee<<25|ee>>>7)^(ee<<14|ee>>>18)^ee>>>3,Y=A[j-2],te=(Y<<15|Y>>>17)^(Y<<13|Y>>>19)^Y>>>10;A[j]=Z+A[j-7]+te+A[j-16]}var K=F&M^~F&H,ae=w&S^w&P^S&P,Ae=(w<<30|w>>>2)^(w<<19|w>>>13)^(w<<10|w>>>22),G=(F<<26|F>>>6)^(F<<21|F>>>11)^(F<<7|F>>>25),se=U+G+K+x[j]+A[j],W=Ae+ae;U=H,H=M,M=F,F=N+se|0,N=P,P=S,S=w,w=se+W|0}C[0]=C[0]+w|0,C[1]=C[1]+S|0,C[2]=C[2]+P|0,C[3]=C[3]+N|0,C[4]=C[4]+F|0,C[5]=C[5]+M|0,C[6]=C[6]+H|0,C[7]=C[7]+U|0},_doFinalize:function(){var k=this._data,R=k.words,C=this._nDataBytes*8,w=k.sigBytes*8;return R[w>>>5]|=128<<24-w%32,R[(w+64>>>9<<4)+14]=l.floor(C/4294967296),R[(w+64>>>9<<4)+15]=C,k.sigBytes=R.length*4,this._process(),this._hash},clone:function(){var k=d.clone.call(this);return k._hash=this._hash.clone(),k}});c.SHA256=d._createHelper(b),c.HmacSHA256=d._createHmacHelper(b)})(Math),i.SHA256})})(mu)),mu.exports}var gu={exports:{}},V2=gu.exports,Ym;function U2(){return Ym||(Ym=1,(function(n,s){(function(i,l,c){n.exports=l(vt(),Bl())})(V2,function(i){return(function(){var l=i,c=l.lib,u=c.WordArray,p=l.algo,d=p.SHA256,g=p.SHA224=d.extend({_doReset:function(){this._hash=new u.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var m=d._doFinalize.call(this);return m.sigBytes-=4,m}});l.SHA224=d._createHelper(g),l.HmacSHA224=d._createHmacHelper(g)})(),i.SHA224})})(gu)),gu.exports}var xu={exports:{}},Z2=xu.exports,Xm;function JA(){return Xm||(Xm=1,(function(n,s){(function(i,l,c){n.exports=l(vt(),xd())})(Z2,function(i){return(function(){var l=i,c=l.lib,u=c.Hasher,p=l.x64,d=p.Word,g=p.WordArray,m=l.algo;function x(){return d.create.apply(d,arguments)}var A=[x(1116352408,3609767458),x(1899447441,602891725),x(3049323471,3964484399),x(3921009573,2173295548),x(961987163,4081628472),x(1508970993,3053834265),x(2453635748,2937671579),x(2870763221,3664609560),x(3624381080,2734883394),x(310598401,1164996542),x(607225278,1323610764),x(1426881987,3590304994),x(1925078388,4068182383),x(2162078206,991336113),x(2614888103,633803317),x(3248222580,3479774868),x(3835390401,2666613458),x(4022224774,944711139),x(264347078,2341262773),x(604807628,2007800933),x(770255983,1495990901),x(1249150122,1856431235),x(1555081692,3175218132),x(1996064986,2198950837),x(2554220882,3999719339),x(2821834349,766784016),x(2952996808,2566594879),x(3210313671,3203337956),x(3336571891,1034457026),x(3584528711,2466948901),x(113926993,3758326383),x(338241895,168717936),x(666307205,1188179964),x(773529912,1546045734),x(1294757372,1522805485),x(1396182291,2643833823),x(1695183700,2343527390),x(1986661051,1014477480),x(2177026350,1206759142),x(2456956037,344077627),x(2730485921,1290863460),x(2820302411,3158454273),x(3259730800,3505952657),x(3345764771,106217008),x(3516065817,3606008344),x(3600352804,1432725776),x(4094571909,1467031594),x(275423344,851169720),x(430227734,3100823752),x(506948616,1363258195),x(659060556,3750685593),x(883997877,3785050280),x(958139571,3318307427),x(1322822218,3812723403),x(1537002063,2003034995),x(1747873779,3602036899),x(1955562222,1575990012),x(2024104815,1125592928),x(2227730452,2716904306),x(2361852424,442776044),x(2428436474,593698344),x(2756734187,3733110249),x(3204031479,2999351573),x(3329325298,3815920427),x(3391569614,3928383900),x(3515267271,566280711),x(3940187606,3454069534),x(4118630271,4000239992),x(116418474,1914138554),x(174292421,2731055270),x(289380356,3203993006),x(460393269,320620315),x(685471733,587496836),x(852142971,1086792851),x(1017036298,365543100),x(1126000580,2618297676),x(1288033470,3409855158),x(1501505948,4234509866),x(1607167915,987167468),x(1816402316,1246189591)],b=[];(function(){for(var R=0;R<80;R++)b[R]=x()})();var k=m.SHA512=u.extend({_doReset:function(){this._hash=new g.init([new d.init(1779033703,4089235720),new d.init(3144134277,2227873595),new d.init(1013904242,4271175723),new d.init(2773480762,1595750129),new d.init(1359893119,2917565137),new d.init(2600822924,725511199),new d.init(528734635,4215389547),new d.init(1541459225,327033209)])},_doProcessBlock:function(R,C){for(var w=this._hash.words,S=w[0],P=w[1],N=w[2],F=w[3],M=w[4],H=w[5],U=w[6],j=w[7],ee=S.high,Z=S.low,Y=P.high,te=P.low,K=N.high,ae=N.low,Ae=F.high,G=F.low,se=M.high,W=M.low,re=H.high,V=H.low,T=U.high,z=U.low,q=j.high,$=j.low,ue=ee,pe=Z,ve=Y,me=te,ge=K,Pe=ae,We=Ae,Ke=G,ke=se,Ve=W,st=re,mt=V,et=T,at=z,Ge=q,$e=$,Ye=0;Ye<80;Ye++){var Le,wt,It=b[Ye];if(Ye<16)wt=It.high=R[C+Ye*2]|0,Le=It.low=R[C+Ye*2+1]|0;else{var Nn=b[Ye-15],Ot=Nn.high,en=Nn.low,sn=(Ot>>>1|en<<31)^(Ot>>>8|en<<24)^Ot>>>7,yn=(en>>>1|Ot<<31)^(en>>>8|Ot<<24)^(en>>>7|Ot<<25),Ht=b[Ye-2],Pt=Ht.high,Vt=Ht.low,Fn=(Pt>>>19|Vt<<13)^(Pt<<3|Vt>>>29)^Pt>>>6,pn=(Vt>>>19|Pt<<13)^(Vt<<3|Pt>>>29)^(Vt>>>6|Pt<<26),ye=b[Ye-7],Se=ye.high,Ne=ye.low,ct=b[Ye-16],tt=ct.high,ne=ct.low;Le=yn+Ne,wt=sn+Se+(Le>>>0<yn>>>0?1:0),Le=Le+pn,wt=wt+Fn+(Le>>>0<pn>>>0?1:0),Le=Le+ne,wt=wt+tt+(Le>>>0<ne>>>0?1:0),It.high=wt,It.low=Le}var xe=ke&st^~ke&et,_e=Ve&mt^~Ve&at,Ue=ue&ve^ue&ge^ve&ge,ie=pe&me^pe&Pe^me&Pe,Ee=(ue>>>28|pe<<4)^(ue<<30|pe>>>2)^(ue<<25|pe>>>7),ut=(pe>>>28|ue<<4)^(pe<<30|ue>>>2)^(pe<<25|ue>>>7),Ft=(ke>>>14|Ve<<18)^(ke>>>18|Ve<<14)^(ke<<23|Ve>>>9),nn=(Ve>>>14|ke<<18)^(Ve>>>18|ke<<14)^(Ve<<23|ke>>>9),ht=A[Ye],Tt=ht.high,Xn=ht.low,bt=$e+nn,Ut=Ge+Ft+(bt>>>0<$e>>>0?1:0),bt=bt+_e,Ut=Ut+xe+(bt>>>0<_e>>>0?1:0),bt=bt+Xn,Ut=Ut+Tt+(bt>>>0<Xn>>>0?1:0),bt=bt+Le,Ut=Ut+wt+(bt>>>0<Le>>>0?1:0),Kt=ut+ie,Fe=Ee+Ue+(Kt>>>0<ut>>>0?1:0);Ge=et,$e=at,et=st,at=mt,st=ke,mt=Ve,Ve=Ke+bt|0,ke=We+Ut+(Ve>>>0<Ke>>>0?1:0)|0,We=ge,Ke=Pe,ge=ve,Pe=me,ve=ue,me=pe,pe=bt+Kt|0,ue=Ut+Fe+(pe>>>0<bt>>>0?1:0)|0}Z=S.low=Z+pe,S.high=ee+ue+(Z>>>0<pe>>>0?1:0),te=P.low=te+me,P.high=Y+ve+(te>>>0<me>>>0?1:0),ae=N.low=ae+Pe,N.high=K+ge+(ae>>>0<Pe>>>0?1:0),G=F.low=G+Ke,F.high=Ae+We+(G>>>0<Ke>>>0?1:0),W=M.low=W+Ve,M.high=se+ke+(W>>>0<Ve>>>0?1:0),V=H.low=V+mt,H.high=re+st+(V>>>0<mt>>>0?1:0),z=U.low=z+at,U.high=T+et+(z>>>0<at>>>0?1:0),$=j.low=$+$e,j.high=q+Ge+($>>>0<$e>>>0?1:0)},_doFinalize:function(){var R=this._data,C=R.words,w=this._nDataBytes*8,S=R.sigBytes*8;C[S>>>5]|=128<<24-S%32,C[(S+128>>>10<<5)+30]=Math.floor(w/4294967296),C[(S+128>>>10<<5)+31]=w,R.sigBytes=C.length*4,this._process();var P=this._hash.toX32();return P},clone:function(){var R=u.clone.call(this);return R._hash=this._hash.clone(),R},blockSize:1024/32});l.SHA512=u._createHelper(k),l.HmacSHA512=u._createHmacHelper(k)})(),i.SHA512})})(xu)),xu.exports}var Au={exports:{}},W2=Au.exports,Jm;function q2(){return Jm||(Jm=1,(function(n,s){(function(i,l,c){n.exports=l(vt(),xd(),JA())})(W2,function(i){return(function(){var l=i,c=l.x64,u=c.Word,p=c.WordArray,d=l.algo,g=d.SHA512,m=d.SHA384=g.extend({_doReset:function(){this._hash=new p.init([new u.init(3418070365,3238371032),new u.init(1654270250,914150663),new u.init(2438529370,812702999),new u.init(355462360,4144912697),new u.init(1731405415,4290775857),new u.init(2394180231,1750603025),new u.init(3675008525,1694076839),new u.init(1203062813,3204075428)])},_doFinalize:function(){var x=g._doFinalize.call(this);return x.sigBytes-=16,x}});l.SHA384=g._createHelper(m),l.HmacSHA384=g._createHmacHelper(m)})(),i.SHA384})})(Au)),Au.exports}var vu={exports:{}},G2=vu.exports,eg;function $2(){return eg||(eg=1,(function(n,s){(function(i,l,c){n.exports=l(vt(),xd())})(G2,function(i){return(function(l){var c=i,u=c.lib,p=u.WordArray,d=u.Hasher,g=c.x64,m=g.Word,x=c.algo,A=[],b=[],k=[];(function(){for(var w=1,S=0,P=0;P<24;P++){A[w+5*S]=(P+1)*(P+2)/2%64;var N=S%5,F=(2*w+3*S)%5;w=N,S=F}for(var w=0;w<5;w++)for(var S=0;S<5;S++)b[w+5*S]=S+(2*w+3*S)%5*5;for(var M=1,H=0;H<24;H++){for(var U=0,j=0,ee=0;ee<7;ee++){if(M&1){var Z=(1<<ee)-1;Z<32?j^=1<<Z:U^=1<<Z-32}M&128?M=M<<1^113:M<<=1}k[H]=m.create(U,j)}})();var R=[];(function(){for(var w=0;w<25;w++)R[w]=m.create()})();var C=x.SHA3=d.extend({cfg:d.cfg.extend({outputLength:512}),_doReset:function(){for(var w=this._state=[],S=0;S<25;S++)w[S]=new m.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(w,S){for(var P=this._state,N=this.blockSize/2,F=0;F<N;F++){var M=w[S+2*F],H=w[S+2*F+1];M=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360,H=(H<<8|H>>>24)&16711935|(H<<24|H>>>8)&4278255360;var U=P[F];U.high^=H,U.low^=M}for(var j=0;j<24;j++){for(var ee=0;ee<5;ee++){for(var Z=0,Y=0,te=0;te<5;te++){var U=P[ee+5*te];Z^=U.high,Y^=U.low}var K=R[ee];K.high=Z,K.low=Y}for(var ee=0;ee<5;ee++)for(var ae=R[(ee+4)%5],Ae=R[(ee+1)%5],G=Ae.high,se=Ae.low,Z=ae.high^(G<<1|se>>>31),Y=ae.low^(se<<1|G>>>31),te=0;te<5;te++){var U=P[ee+5*te];U.high^=Z,U.low^=Y}for(var W=1;W<25;W++){var Z,Y,U=P[W],re=U.high,V=U.low,T=A[W];T<32?(Z=re<<T|V>>>32-T,Y=V<<T|re>>>32-T):(Z=V<<T-32|re>>>64-T,Y=re<<T-32|V>>>64-T);var z=R[b[W]];z.high=Z,z.low=Y}var q=R[0],$=P[0];q.high=$.high,q.low=$.low;for(var ee=0;ee<5;ee++)for(var te=0;te<5;te++){var W=ee+5*te,U=P[W],ue=R[W],pe=R[(ee+1)%5+5*te],ve=R[(ee+2)%5+5*te];U.high=ue.high^~pe.high&ve.high,U.low=ue.low^~pe.low&ve.low}var U=P[0],me=k[j];U.high^=me.high,U.low^=me.low}},_doFinalize:function(){var w=this._data,S=w.words;this._nDataBytes*8;var P=w.sigBytes*8,N=this.blockSize*32;S[P>>>5]|=1<<24-P%32,S[(l.ceil((P+1)/N)*N>>>5)-1]|=128,w.sigBytes=S.length*4,this._process();for(var F=this._state,M=this.cfg.outputLength/8,H=M/8,U=[],j=0;j<H;j++){var ee=F[j],Z=ee.high,Y=ee.low;Z=(Z<<8|Z>>>24)&16711935|(Z<<24|Z>>>8)&4278255360,Y=(Y<<8|Y>>>24)&16711935|(Y<<24|Y>>>8)&4278255360,U.push(Y),U.push(Z)}return new p.init(U,M)},clone:function(){for(var w=d.clone.call(this),S=w._state=this._state.slice(0),P=0;P<25;P++)S[P]=S[P].clone();return w}});c.SHA3=d._createHelper(C),c.HmacSHA3=d._createHmacHelper(C)})(Math),i.SHA3})})(vu)),vu.exports}var yu={exports:{}},K2=yu.exports,tg;function Q2(){return tg||(tg=1,(function(n,s){(function(i,l){n.exports=l(vt())})(K2,function(i){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return(function(l){var c=i,u=c.lib,p=u.WordArray,d=u.Hasher,g=c.algo,m=p.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),x=p.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),A=p.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),b=p.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),k=p.create([0,1518500249,1859775393,2400959708,2840853838]),R=p.create([1352829926,1548603684,1836072691,2053994217,0]),C=g.RIPEMD160=d.extend({_doReset:function(){this._hash=p.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(H,U){for(var j=0;j<16;j++){var ee=U+j,Z=H[ee];H[ee]=(Z<<8|Z>>>24)&16711935|(Z<<24|Z>>>8)&4278255360}var Y=this._hash.words,te=k.words,K=R.words,ae=m.words,Ae=x.words,G=A.words,se=b.words,W,re,V,T,z,q,$,ue,pe,ve;q=W=Y[0],$=re=Y[1],ue=V=Y[2],pe=T=Y[3],ve=z=Y[4];for(var me,j=0;j<80;j+=1)me=W+H[U+ae[j]]|0,j<16?me+=w(re,V,T)+te[0]:j<32?me+=S(re,V,T)+te[1]:j<48?me+=P(re,V,T)+te[2]:j<64?me+=N(re,V,T)+te[3]:me+=F(re,V,T)+te[4],me=me|0,me=M(me,G[j]),me=me+z|0,W=z,z=T,T=M(V,10),V=re,re=me,me=q+H[U+Ae[j]]|0,j<16?me+=F($,ue,pe)+K[0]:j<32?me+=N($,ue,pe)+K[1]:j<48?me+=P($,ue,pe)+K[2]:j<64?me+=S($,ue,pe)+K[3]:me+=w($,ue,pe)+K[4],me=me|0,me=M(me,se[j]),me=me+ve|0,q=ve,ve=pe,pe=M(ue,10),ue=$,$=me;me=Y[1]+V+pe|0,Y[1]=Y[2]+T+ve|0,Y[2]=Y[3]+z+q|0,Y[3]=Y[4]+W+$|0,Y[4]=Y[0]+re+ue|0,Y[0]=me},_doFinalize:function(){var H=this._data,U=H.words,j=this._nDataBytes*8,ee=H.sigBytes*8;U[ee>>>5]|=128<<24-ee%32,U[(ee+64>>>9<<4)+14]=(j<<8|j>>>24)&16711935|(j<<24|j>>>8)&4278255360,H.sigBytes=(U.length+1)*4,this._process();for(var Z=this._hash,Y=Z.words,te=0;te<5;te++){var K=Y[te];Y[te]=(K<<8|K>>>24)&16711935|(K<<24|K>>>8)&4278255360}return Z},clone:function(){var H=d.clone.call(this);return H._hash=this._hash.clone(),H}});function w(H,U,j){return H^U^j}function S(H,U,j){return H&U|~H&j}function P(H,U,j){return(H|~U)^j}function N(H,U,j){return H&j|U&~j}function F(H,U,j){return H^(U|~j)}function M(H,U){return H<<U|H>>>32-U}c.RIPEMD160=d._createHelper(C),c.HmacRIPEMD160=d._createHmacHelper(C)})(),i.RIPEMD160})})(yu)),yu.exports}var _u={exports:{}},Y2=_u.exports,ng;function Ad(){return ng||(ng=1,(function(n,s){(function(i,l){n.exports=l(vt())})(Y2,function(i){(function(){var l=i,c=l.lib,u=c.Base,p=l.enc,d=p.Utf8,g=l.algo;g.HMAC=u.extend({init:function(m,x){m=this._hasher=new m.init,typeof x=="string"&&(x=d.parse(x));var A=m.blockSize,b=A*4;x.sigBytes>b&&(x=m.finalize(x)),x.clamp();for(var k=this._oKey=x.clone(),R=this._iKey=x.clone(),C=k.words,w=R.words,S=0;S<A;S++)C[S]^=1549556828,w[S]^=909522486;k.sigBytes=R.sigBytes=b,this.reset()},reset:function(){var m=this._hasher;m.reset(),m.update(this._iKey)},update:function(m){return this._hasher.update(m),this},finalize:function(m){var x=this._hasher,A=x.finalize(m);x.reset();var b=x.finalize(this._oKey.clone().concat(A));return b}})})()})})(_u)),_u.exports}var wu={exports:{}},X2=wu.exports,rg;function J2(){return rg||(rg=1,(function(n,s){(function(i,l,c){n.exports=l(vt(),Bl(),Ad())})(X2,function(i){return(function(){var l=i,c=l.lib,u=c.Base,p=c.WordArray,d=l.algo,g=d.SHA256,m=d.HMAC,x=d.PBKDF2=u.extend({cfg:u.extend({keySize:128/32,hasher:g,iterations:25e4}),init:function(A){this.cfg=this.cfg.extend(A)},compute:function(A,b){for(var k=this.cfg,R=m.create(k.hasher,A),C=p.create(),w=p.create([1]),S=C.words,P=w.words,N=k.keySize,F=k.iterations;S.length<N;){var M=R.update(b).finalize(w);R.reset();for(var H=M.words,U=H.length,j=M,ee=1;ee<F;ee++){j=R.finalize(j),R.reset();for(var Z=j.words,Y=0;Y<U;Y++)H[Y]^=Z[Y]}C.concat(M),P[0]++}return C.sigBytes=N*4,C}});l.PBKDF2=function(A,b,k){return x.create(k).compute(A,b)}})(),i.PBKDF2})})(wu)),wu.exports}var bu={exports:{}},eC=bu.exports,ig;function _o(){return ig||(ig=1,(function(n,s){(function(i,l,c){n.exports=l(vt(),XA(),Ad())})(eC,function(i){return(function(){var l=i,c=l.lib,u=c.Base,p=c.WordArray,d=l.algo,g=d.MD5,m=d.EvpKDF=u.extend({cfg:u.extend({keySize:128/32,hasher:g,iterations:1}),init:function(x){this.cfg=this.cfg.extend(x)},compute:function(x,A){for(var b,k=this.cfg,R=k.hasher.create(),C=p.create(),w=C.words,S=k.keySize,P=k.iterations;w.length<S;){b&&R.update(b),b=R.update(x).finalize(A),R.reset();for(var N=1;N<P;N++)b=R.finalize(b),R.reset();C.concat(b)}return C.sigBytes=S*4,C}});l.EvpKDF=function(x,A,b){return m.create(b).compute(x,A)}})(),i.EvpKDF})})(bu)),bu.exports}var Cu={exports:{}},tC=Cu.exports,og;function vn(){return og||(og=1,(function(n,s){(function(i,l,c){n.exports=l(vt(),_o())})(tC,function(i){i.lib.Cipher||(function(l){var c=i,u=c.lib,p=u.Base,d=u.WordArray,g=u.BufferedBlockAlgorithm,m=c.enc;m.Utf8;var x=m.Base64,A=c.algo,b=A.EvpKDF,k=u.Cipher=g.extend({cfg:p.extend(),createEncryptor:function(Z,Y){return this.create(this._ENC_XFORM_MODE,Z,Y)},createDecryptor:function(Z,Y){return this.create(this._DEC_XFORM_MODE,Z,Y)},init:function(Z,Y,te){this.cfg=this.cfg.extend(te),this._xformMode=Z,this._key=Y,this.reset()},reset:function(){g.reset.call(this),this._doReset()},process:function(Z){return this._append(Z),this._process()},finalize:function(Z){Z&&this._append(Z);var Y=this._doFinalize();return Y},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:(function(){function Z(Y){return typeof Y=="string"?ee:H}return function(Y){return{encrypt:function(te,K,ae){return Z(K).encrypt(Y,te,K,ae)},decrypt:function(te,K,ae){return Z(K).decrypt(Y,te,K,ae)}}}})()});u.StreamCipher=k.extend({_doFinalize:function(){var Z=this._process(!0);return Z},blockSize:1});var R=c.mode={},C=u.BlockCipherMode=p.extend({createEncryptor:function(Z,Y){return this.Encryptor.create(Z,Y)},createDecryptor:function(Z,Y){return this.Decryptor.create(Z,Y)},init:function(Z,Y){this._cipher=Z,this._iv=Y}}),w=R.CBC=(function(){var Z=C.extend();Z.Encryptor=Z.extend({processBlock:function(te,K){var ae=this._cipher,Ae=ae.blockSize;Y.call(this,te,K,Ae),ae.encryptBlock(te,K),this._prevBlock=te.slice(K,K+Ae)}}),Z.Decryptor=Z.extend({processBlock:function(te,K){var ae=this._cipher,Ae=ae.blockSize,G=te.slice(K,K+Ae);ae.decryptBlock(te,K),Y.call(this,te,K,Ae),this._prevBlock=G}});function Y(te,K,ae){var Ae,G=this._iv;G?(Ae=G,this._iv=l):Ae=this._prevBlock;for(var se=0;se<ae;se++)te[K+se]^=Ae[se]}return Z})(),S=c.pad={},P=S.Pkcs7={pad:function(Z,Y){for(var te=Y*4,K=te-Z.sigBytes%te,ae=K<<24|K<<16|K<<8|K,Ae=[],G=0;G<K;G+=4)Ae.push(ae);var se=d.create(Ae,K);Z.concat(se)},unpad:function(Z){var Y=Z.words[Z.sigBytes-1>>>2]&255;Z.sigBytes-=Y}};u.BlockCipher=k.extend({cfg:k.cfg.extend({mode:w,padding:P}),reset:function(){var Z;k.reset.call(this);var Y=this.cfg,te=Y.iv,K=Y.mode;this._xformMode==this._ENC_XFORM_MODE?Z=K.createEncryptor:(Z=K.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==Z?this._mode.init(this,te&&te.words):(this._mode=Z.call(K,this,te&&te.words),this._mode.__creator=Z)},_doProcessBlock:function(Z,Y){this._mode.processBlock(Z,Y)},_doFinalize:function(){var Z,Y=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(Y.pad(this._data,this.blockSize),Z=this._process(!0)):(Z=this._process(!0),Y.unpad(Z)),Z},blockSize:128/32});var N=u.CipherParams=p.extend({init:function(Z){this.mixIn(Z)},toString:function(Z){return(Z||this.formatter).stringify(this)}}),F=c.format={},M=F.OpenSSL={stringify:function(Z){var Y,te=Z.ciphertext,K=Z.salt;return K?Y=d.create([1398893684,1701076831]).concat(K).concat(te):Y=te,Y.toString(x)},parse:function(Z){var Y,te=x.parse(Z),K=te.words;return K[0]==1398893684&&K[1]==1701076831&&(Y=d.create(K.slice(2,4)),K.splice(0,4),te.sigBytes-=16),N.create({ciphertext:te,salt:Y})}},H=u.SerializableCipher=p.extend({cfg:p.extend({format:M}),encrypt:function(Z,Y,te,K){K=this.cfg.extend(K);var ae=Z.createEncryptor(te,K),Ae=ae.finalize(Y),G=ae.cfg;return N.create({ciphertext:Ae,key:te,iv:G.iv,algorithm:Z,mode:G.mode,padding:G.padding,blockSize:Z.blockSize,formatter:K.format})},decrypt:function(Z,Y,te,K){K=this.cfg.extend(K),Y=this._parse(Y,K.format);var ae=Z.createDecryptor(te,K).finalize(Y.ciphertext);return ae},_parse:function(Z,Y){return typeof Z=="string"?Y.parse(Z,this):Z}}),U=c.kdf={},j=U.OpenSSL={execute:function(Z,Y,te,K,ae){if(K||(K=d.random(64/8)),ae)var Ae=b.create({keySize:Y+te,hasher:ae}).compute(Z,K);else var Ae=b.create({keySize:Y+te}).compute(Z,K);var G=d.create(Ae.words.slice(Y),te*4);return Ae.sigBytes=Y*4,N.create({key:Ae,iv:G,salt:K})}},ee=u.PasswordBasedCipher=H.extend({cfg:H.cfg.extend({kdf:j}),encrypt:function(Z,Y,te,K){K=this.cfg.extend(K);var ae=K.kdf.execute(te,Z.keySize,Z.ivSize,K.salt,K.hasher);K.iv=ae.iv;var Ae=H.encrypt.call(this,Z,Y,ae.key,K);return Ae.mixIn(ae),Ae},decrypt:function(Z,Y,te,K){K=this.cfg.extend(K),Y=this._parse(Y,K.format);var ae=K.kdf.execute(te,Z.keySize,Z.ivSize,Y.salt,K.hasher);K.iv=ae.iv;var Ae=H.decrypt.call(this,Z,Y,ae.key,K);return Ae}})})()})})(Cu)),Cu.exports}var Eu={exports:{}},nC=Eu.exports,sg;function rC(){return sg||(sg=1,(function(n,s){(function(i,l,c){n.exports=l(vt(),vn())})(nC,function(i){return i.mode.CFB=(function(){var l=i.lib.BlockCipherMode.extend();l.Encryptor=l.extend({processBlock:function(u,p){var d=this._cipher,g=d.blockSize;c.call(this,u,p,g,d),this._prevBlock=u.slice(p,p+g)}}),l.Decryptor=l.extend({processBlock:function(u,p){var d=this._cipher,g=d.blockSize,m=u.slice(p,p+g);c.call(this,u,p,g,d),this._prevBlock=m}});function c(u,p,d,g){var m,x=this._iv;x?(m=x.slice(0),this._iv=void 0):m=this._prevBlock,g.encryptBlock(m,0);for(var A=0;A<d;A++)u[p+A]^=m[A]}return l})(),i.mode.CFB})})(Eu)),Eu.exports}var ku={exports:{}},iC=ku.exports,ag;function oC(){return ag||(ag=1,(function(n,s){(function(i,l,c){n.exports=l(vt(),vn())})(iC,function(i){return i.mode.CTR=(function(){var l=i.lib.BlockCipherMode.extend(),c=l.Encryptor=l.extend({processBlock:function(u,p){var d=this._cipher,g=d.blockSize,m=this._iv,x=this._counter;m&&(x=this._counter=m.slice(0),this._iv=void 0);var A=x.slice(0);d.encryptBlock(A,0),x[g-1]=x[g-1]+1|0;for(var b=0;b<g;b++)u[p+b]^=A[b]}});return l.Decryptor=c,l})(),i.mode.CTR})})(ku)),ku.exports}var Su={exports:{}},sC=Su.exports,lg;function aC(){return lg||(lg=1,(function(n,s){(function(i,l,c){n.exports=l(vt(),vn())})(sC,function(i){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return i.mode.CTRGladman=(function(){var l=i.lib.BlockCipherMode.extend();function c(d){if((d>>24&255)===255){var g=d>>16&255,m=d>>8&255,x=d&255;g===255?(g=0,m===255?(m=0,x===255?x=0:++x):++m):++g,d=0,d+=g<<16,d+=m<<8,d+=x}else d+=1<<24;return d}function u(d){return(d[0]=c(d[0]))===0&&(d[1]=c(d[1])),d}var p=l.Encryptor=l.extend({processBlock:function(d,g){var m=this._cipher,x=m.blockSize,A=this._iv,b=this._counter;A&&(b=this._counter=A.slice(0),this._iv=void 0),u(b);var k=b.slice(0);m.encryptBlock(k,0);for(var R=0;R<x;R++)d[g+R]^=k[R]}});return l.Decryptor=p,l})(),i.mode.CTRGladman})})(Su)),Su.exports}var Bu={exports:{}},lC=Bu.exports,cg;function cC(){return cg||(cg=1,(function(n,s){(function(i,l,c){n.exports=l(vt(),vn())})(lC,function(i){return i.mode.OFB=(function(){var l=i.lib.BlockCipherMode.extend(),c=l.Encryptor=l.extend({processBlock:function(u,p){var d=this._cipher,g=d.blockSize,m=this._iv,x=this._keystream;m&&(x=this._keystream=m.slice(0),this._iv=void 0),d.encryptBlock(x,0);for(var A=0;A<g;A++)u[p+A]^=x[A]}});return l.Decryptor=c,l})(),i.mode.OFB})})(Bu)),Bu.exports}var Pu={exports:{}},uC=Pu.exports,ug;function dC(){return ug||(ug=1,(function(n,s){(function(i,l,c){n.exports=l(vt(),vn())})(uC,function(i){return i.mode.ECB=(function(){var l=i.lib.BlockCipherMode.extend();return l.Encryptor=l.extend({processBlock:function(c,u){this._cipher.encryptBlock(c,u)}}),l.Decryptor=l.extend({processBlock:function(c,u){this._cipher.decryptBlock(c,u)}}),l})(),i.mode.ECB})})(Pu)),Pu.exports}var Tu={exports:{}},fC=Tu.exports,dg;function hC(){return dg||(dg=1,(function(n,s){(function(i,l,c){n.exports=l(vt(),vn())})(fC,function(i){return i.pad.AnsiX923={pad:function(l,c){var u=l.sigBytes,p=c*4,d=p-u%p,g=u+d-1;l.clamp(),l.words[g>>>2]|=d<<24-g%4*8,l.sigBytes+=d},unpad:function(l){var c=l.words[l.sigBytes-1>>>2]&255;l.sigBytes-=c}},i.pad.Ansix923})})(Tu)),Tu.exports}var Du={exports:{}},pC=Du.exports,fg;function mC(){return fg||(fg=1,(function(n,s){(function(i,l,c){n.exports=l(vt(),vn())})(pC,function(i){return i.pad.Iso10126={pad:function(l,c){var u=c*4,p=u-l.sigBytes%u;l.concat(i.lib.WordArray.random(p-1)).concat(i.lib.WordArray.create([p<<24],1))},unpad:function(l){var c=l.words[l.sigBytes-1>>>2]&255;l.sigBytes-=c}},i.pad.Iso10126})})(Du)),Du.exports}var Ru={exports:{}},gC=Ru.exports,hg;function xC(){return hg||(hg=1,(function(n,s){(function(i,l,c){n.exports=l(vt(),vn())})(gC,function(i){return i.pad.Iso97971={pad:function(l,c){l.concat(i.lib.WordArray.create([2147483648],1)),i.pad.ZeroPadding.pad(l,c)},unpad:function(l){i.pad.ZeroPadding.unpad(l),l.sigBytes--}},i.pad.Iso97971})})(Ru)),Ru.exports}var Nu={exports:{}},AC=Nu.exports,pg;function vC(){return pg||(pg=1,(function(n,s){(function(i,l,c){n.exports=l(vt(),vn())})(AC,function(i){return i.pad.ZeroPadding={pad:function(l,c){var u=c*4;l.clamp(),l.sigBytes+=u-(l.sigBytes%u||u)},unpad:function(l){for(var c=l.words,u=l.sigBytes-1,u=l.sigBytes-1;u>=0;u--)if(c[u>>>2]>>>24-u%4*8&255){l.sigBytes=u+1;break}}},i.pad.ZeroPadding})})(Nu)),Nu.exports}var Fu={exports:{}},yC=Fu.exports,mg;function _C(){return mg||(mg=1,(function(n,s){(function(i,l,c){n.exports=l(vt(),vn())})(yC,function(i){return i.pad.NoPadding={pad:function(){},unpad:function(){}},i.pad.NoPadding})})(Fu)),Fu.exports}var Lu={exports:{}},wC=Lu.exports,gg;function bC(){return gg||(gg=1,(function(n,s){(function(i,l,c){n.exports=l(vt(),vn())})(wC,function(i){return(function(l){var c=i,u=c.lib,p=u.CipherParams,d=c.enc,g=d.Hex,m=c.format;m.Hex={stringify:function(x){return x.ciphertext.toString(g)},parse:function(x){var A=g.parse(x);return p.create({ciphertext:A})}}})(),i.format.Hex})})(Lu)),Lu.exports}var Mu={exports:{}},CC=Mu.exports,xg;function EC(){return xg||(xg=1,(function(n,s){(function(i,l,c){n.exports=l(vt(),as(),ls(),_o(),vn())})(CC,function(i){return(function(){var l=i,c=l.lib,u=c.BlockCipher,p=l.algo,d=[],g=[],m=[],x=[],A=[],b=[],k=[],R=[],C=[],w=[];(function(){for(var N=[],F=0;F<256;F++)F<128?N[F]=F<<1:N[F]=F<<1^283;for(var M=0,H=0,F=0;F<256;F++){var U=H^H<<1^H<<2^H<<3^H<<4;U=U>>>8^U&255^99,d[M]=U,g[U]=M;var j=N[M],ee=N[j],Z=N[ee],Y=N[U]*257^U*16843008;m[M]=Y<<24|Y>>>8,x[M]=Y<<16|Y>>>16,A[M]=Y<<8|Y>>>24,b[M]=Y;var Y=Z*16843009^ee*65537^j*257^M*16843008;k[U]=Y<<24|Y>>>8,R[U]=Y<<16|Y>>>16,C[U]=Y<<8|Y>>>24,w[U]=Y,M?(M=j^N[N[N[Z^j]]],H^=N[N[H]]):M=H=1}})();var S=[0,1,2,4,8,16,32,64,128,27,54],P=p.AES=u.extend({_doReset:function(){var N;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var F=this._keyPriorReset=this._key,M=F.words,H=F.sigBytes/4,U=this._nRounds=H+6,j=(U+1)*4,ee=this._keySchedule=[],Z=0;Z<j;Z++)Z<H?ee[Z]=M[Z]:(N=ee[Z-1],Z%H?H>6&&Z%H==4&&(N=d[N>>>24]<<24|d[N>>>16&255]<<16|d[N>>>8&255]<<8|d[N&255]):(N=N<<8|N>>>24,N=d[N>>>24]<<24|d[N>>>16&255]<<16|d[N>>>8&255]<<8|d[N&255],N^=S[Z/H|0]<<24),ee[Z]=ee[Z-H]^N);for(var Y=this._invKeySchedule=[],te=0;te<j;te++){var Z=j-te;if(te%4)var N=ee[Z];else var N=ee[Z-4];te<4||Z<=4?Y[te]=N:Y[te]=k[d[N>>>24]]^R[d[N>>>16&255]]^C[d[N>>>8&255]]^w[d[N&255]]}}},encryptBlock:function(N,F){this._doCryptBlock(N,F,this._keySchedule,m,x,A,b,d)},decryptBlock:function(N,F){var M=N[F+1];N[F+1]=N[F+3],N[F+3]=M,this._doCryptBlock(N,F,this._invKeySchedule,k,R,C,w,g);var M=N[F+1];N[F+1]=N[F+3],N[F+3]=M},_doCryptBlock:function(N,F,M,H,U,j,ee,Z){for(var Y=this._nRounds,te=N[F]^M[0],K=N[F+1]^M[1],ae=N[F+2]^M[2],Ae=N[F+3]^M[3],G=4,se=1;se<Y;se++){var W=H[te>>>24]^U[K>>>16&255]^j[ae>>>8&255]^ee[Ae&255]^M[G++],re=H[K>>>24]^U[ae>>>16&255]^j[Ae>>>8&255]^ee[te&255]^M[G++],V=H[ae>>>24]^U[Ae>>>16&255]^j[te>>>8&255]^ee[K&255]^M[G++],T=H[Ae>>>24]^U[te>>>16&255]^j[K>>>8&255]^ee[ae&255]^M[G++];te=W,K=re,ae=V,Ae=T}var W=(Z[te>>>24]<<24|Z[K>>>16&255]<<16|Z[ae>>>8&255]<<8|Z[Ae&255])^M[G++],re=(Z[K>>>24]<<24|Z[ae>>>16&255]<<16|Z[Ae>>>8&255]<<8|Z[te&255])^M[G++],V=(Z[ae>>>24]<<24|Z[Ae>>>16&255]<<16|Z[te>>>8&255]<<8|Z[K&255])^M[G++],T=(Z[Ae>>>24]<<24|Z[te>>>16&255]<<16|Z[K>>>8&255]<<8|Z[ae&255])^M[G++];N[F]=W,N[F+1]=re,N[F+2]=V,N[F+3]=T},keySize:256/32});l.AES=u._createHelper(P)})(),i.AES})})(Mu)),Mu.exports}var Iu={exports:{}},kC=Iu.exports,Ag;function SC(){return Ag||(Ag=1,(function(n,s){(function(i,l,c){n.exports=l(vt(),as(),ls(),_o(),vn())})(kC,function(i){return(function(){var l=i,c=l.lib,u=c.WordArray,p=c.BlockCipher,d=l.algo,g=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],m=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],x=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],A=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],b=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],k=d.DES=p.extend({_doReset:function(){for(var S=this._key,P=S.words,N=[],F=0;F<56;F++){var M=g[F]-1;N[F]=P[M>>>5]>>>31-M%32&1}for(var H=this._subKeys=[],U=0;U<16;U++){for(var j=H[U]=[],ee=x[U],F=0;F<24;F++)j[F/6|0]|=N[(m[F]-1+ee)%28]<<31-F%6,j[4+(F/6|0)]|=N[28+(m[F+24]-1+ee)%28]<<31-F%6;j[0]=j[0]<<1|j[0]>>>31;for(var F=1;F<7;F++)j[F]=j[F]>>>(F-1)*4+3;j[7]=j[7]<<5|j[7]>>>27}for(var Z=this._invSubKeys=[],F=0;F<16;F++)Z[F]=H[15-F]},encryptBlock:function(S,P){this._doCryptBlock(S,P,this._subKeys)},decryptBlock:function(S,P){this._doCryptBlock(S,P,this._invSubKeys)},_doCryptBlock:function(S,P,N){this._lBlock=S[P],this._rBlock=S[P+1],R.call(this,4,252645135),R.call(this,16,65535),C.call(this,2,858993459),C.call(this,8,16711935),R.call(this,1,1431655765);for(var F=0;F<16;F++){for(var M=N[F],H=this._lBlock,U=this._rBlock,j=0,ee=0;ee<8;ee++)j|=A[ee][((U^M[ee])&b[ee])>>>0];this._lBlock=U,this._rBlock=H^j}var Z=this._lBlock;this._lBlock=this._rBlock,this._rBlock=Z,R.call(this,1,1431655765),C.call(this,8,16711935),C.call(this,2,858993459),R.call(this,16,65535),R.call(this,4,252645135),S[P]=this._lBlock,S[P+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function R(S,P){var N=(this._lBlock>>>S^this._rBlock)&P;this._rBlock^=N,this._lBlock^=N<<S}function C(S,P){var N=(this._rBlock>>>S^this._lBlock)&P;this._lBlock^=N,this._rBlock^=N<<S}l.DES=p._createHelper(k);var w=d.TripleDES=p.extend({_doReset:function(){var S=this._key,P=S.words;if(P.length!==2&&P.length!==4&&P.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var N=P.slice(0,2),F=P.length<4?P.slice(0,2):P.slice(2,4),M=P.length<6?P.slice(0,2):P.slice(4,6);this._des1=k.createEncryptor(u.create(N)),this._des2=k.createEncryptor(u.create(F)),this._des3=k.createEncryptor(u.create(M))},encryptBlock:function(S,P){this._des1.encryptBlock(S,P),this._des2.decryptBlock(S,P),this._des3.encryptBlock(S,P)},decryptBlock:function(S,P){this._des3.decryptBlock(S,P),this._des2.encryptBlock(S,P),this._des1.decryptBlock(S,P)},keySize:192/32,ivSize:64/32,blockSize:64/32});l.TripleDES=p._createHelper(w)})(),i.TripleDES})})(Iu)),Iu.exports}var Ou={exports:{}},BC=Ou.exports,vg;function PC(){return vg||(vg=1,(function(n,s){(function(i,l,c){n.exports=l(vt(),as(),ls(),_o(),vn())})(BC,function(i){return(function(){var l=i,c=l.lib,u=c.StreamCipher,p=l.algo,d=p.RC4=u.extend({_doReset:function(){for(var x=this._key,A=x.words,b=x.sigBytes,k=this._S=[],R=0;R<256;R++)k[R]=R;for(var R=0,C=0;R<256;R++){var w=R%b,S=A[w>>>2]>>>24-w%4*8&255;C=(C+k[R]+S)%256;var P=k[R];k[R]=k[C],k[C]=P}this._i=this._j=0},_doProcessBlock:function(x,A){x[A]^=g.call(this)},keySize:256/32,ivSize:0});function g(){for(var x=this._S,A=this._i,b=this._j,k=0,R=0;R<4;R++){A=(A+1)%256,b=(b+x[A])%256;var C=x[A];x[A]=x[b],x[b]=C,k|=x[(x[A]+x[b])%256]<<24-R*8}return this._i=A,this._j=b,k}l.RC4=u._createHelper(d);var m=p.RC4Drop=d.extend({cfg:d.cfg.extend({drop:192}),_doReset:function(){d._doReset.call(this);for(var x=this.cfg.drop;x>0;x--)g.call(this)}});l.RC4Drop=u._createHelper(m)})(),i.RC4})})(Ou)),Ou.exports}var ju={exports:{}},TC=ju.exports,yg;function DC(){return yg||(yg=1,(function(n,s){(function(i,l,c){n.exports=l(vt(),as(),ls(),_o(),vn())})(TC,function(i){return(function(){var l=i,c=l.lib,u=c.StreamCipher,p=l.algo,d=[],g=[],m=[],x=p.Rabbit=u.extend({_doReset:function(){for(var b=this._key.words,k=this.cfg.iv,R=0;R<4;R++)b[R]=(b[R]<<8|b[R]>>>24)&16711935|(b[R]<<24|b[R]>>>8)&4278255360;var C=this._X=[b[0],b[3]<<16|b[2]>>>16,b[1],b[0]<<16|b[3]>>>16,b[2],b[1]<<16|b[0]>>>16,b[3],b[2]<<16|b[1]>>>16],w=this._C=[b[2]<<16|b[2]>>>16,b[0]&4294901760|b[1]&65535,b[3]<<16|b[3]>>>16,b[1]&4294901760|b[2]&65535,b[0]<<16|b[0]>>>16,b[2]&4294901760|b[3]&65535,b[1]<<16|b[1]>>>16,b[3]&4294901760|b[0]&65535];this._b=0;for(var R=0;R<4;R++)A.call(this);for(var R=0;R<8;R++)w[R]^=C[R+4&7];if(k){var S=k.words,P=S[0],N=S[1],F=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,M=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,H=F>>>16|M&4294901760,U=M<<16|F&65535;w[0]^=F,w[1]^=H,w[2]^=M,w[3]^=U,w[4]^=F,w[5]^=H,w[6]^=M,w[7]^=U;for(var R=0;R<4;R++)A.call(this)}},_doProcessBlock:function(b,k){var R=this._X;A.call(this),d[0]=R[0]^R[5]>>>16^R[3]<<16,d[1]=R[2]^R[7]>>>16^R[5]<<16,d[2]=R[4]^R[1]>>>16^R[7]<<16,d[3]=R[6]^R[3]>>>16^R[1]<<16;for(var C=0;C<4;C++)d[C]=(d[C]<<8|d[C]>>>24)&16711935|(d[C]<<24|d[C]>>>8)&4278255360,b[k+C]^=d[C]},blockSize:128/32,ivSize:64/32});function A(){for(var b=this._X,k=this._C,R=0;R<8;R++)g[R]=k[R];k[0]=k[0]+1295307597+this._b|0,k[1]=k[1]+3545052371+(k[0]>>>0<g[0]>>>0?1:0)|0,k[2]=k[2]+886263092+(k[1]>>>0<g[1]>>>0?1:0)|0,k[3]=k[3]+1295307597+(k[2]>>>0<g[2]>>>0?1:0)|0,k[4]=k[4]+3545052371+(k[3]>>>0<g[3]>>>0?1:0)|0,k[5]=k[5]+886263092+(k[4]>>>0<g[4]>>>0?1:0)|0,k[6]=k[6]+1295307597+(k[5]>>>0<g[5]>>>0?1:0)|0,k[7]=k[7]+3545052371+(k[6]>>>0<g[6]>>>0?1:0)|0,this._b=k[7]>>>0<g[7]>>>0?1:0;for(var R=0;R<8;R++){var C=b[R]+k[R],w=C&65535,S=C>>>16,P=((w*w>>>17)+w*S>>>15)+S*S,N=((C&4294901760)*C|0)+((C&65535)*C|0);m[R]=P^N}b[0]=m[0]+(m[7]<<16|m[7]>>>16)+(m[6]<<16|m[6]>>>16)|0,b[1]=m[1]+(m[0]<<8|m[0]>>>24)+m[7]|0,b[2]=m[2]+(m[1]<<16|m[1]>>>16)+(m[0]<<16|m[0]>>>16)|0,b[3]=m[3]+(m[2]<<8|m[2]>>>24)+m[1]|0,b[4]=m[4]+(m[3]<<16|m[3]>>>16)+(m[2]<<16|m[2]>>>16)|0,b[5]=m[5]+(m[4]<<8|m[4]>>>24)+m[3]|0,b[6]=m[6]+(m[5]<<16|m[5]>>>16)+(m[4]<<16|m[4]>>>16)|0,b[7]=m[7]+(m[6]<<8|m[6]>>>24)+m[5]|0}l.Rabbit=u._createHelper(x)})(),i.Rabbit})})(ju)),ju.exports}var zu={exports:{}},RC=zu.exports,_g;function NC(){return _g||(_g=1,(function(n,s){(function(i,l,c){n.exports=l(vt(),as(),ls(),_o(),vn())})(RC,function(i){return(function(){var l=i,c=l.lib,u=c.StreamCipher,p=l.algo,d=[],g=[],m=[],x=p.RabbitLegacy=u.extend({_doReset:function(){var b=this._key.words,k=this.cfg.iv,R=this._X=[b[0],b[3]<<16|b[2]>>>16,b[1],b[0]<<16|b[3]>>>16,b[2],b[1]<<16|b[0]>>>16,b[3],b[2]<<16|b[1]>>>16],C=this._C=[b[2]<<16|b[2]>>>16,b[0]&4294901760|b[1]&65535,b[3]<<16|b[3]>>>16,b[1]&4294901760|b[2]&65535,b[0]<<16|b[0]>>>16,b[2]&4294901760|b[3]&65535,b[1]<<16|b[1]>>>16,b[3]&4294901760|b[0]&65535];this._b=0;for(var w=0;w<4;w++)A.call(this);for(var w=0;w<8;w++)C[w]^=R[w+4&7];if(k){var S=k.words,P=S[0],N=S[1],F=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,M=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,H=F>>>16|M&4294901760,U=M<<16|F&65535;C[0]^=F,C[1]^=H,C[2]^=M,C[3]^=U,C[4]^=F,C[5]^=H,C[6]^=M,C[7]^=U;for(var w=0;w<4;w++)A.call(this)}},_doProcessBlock:function(b,k){var R=this._X;A.call(this),d[0]=R[0]^R[5]>>>16^R[3]<<16,d[1]=R[2]^R[7]>>>16^R[5]<<16,d[2]=R[4]^R[1]>>>16^R[7]<<16,d[3]=R[6]^R[3]>>>16^R[1]<<16;for(var C=0;C<4;C++)d[C]=(d[C]<<8|d[C]>>>24)&16711935|(d[C]<<24|d[C]>>>8)&4278255360,b[k+C]^=d[C]},blockSize:128/32,ivSize:64/32});function A(){for(var b=this._X,k=this._C,R=0;R<8;R++)g[R]=k[R];k[0]=k[0]+1295307597+this._b|0,k[1]=k[1]+3545052371+(k[0]>>>0<g[0]>>>0?1:0)|0,k[2]=k[2]+886263092+(k[1]>>>0<g[1]>>>0?1:0)|0,k[3]=k[3]+1295307597+(k[2]>>>0<g[2]>>>0?1:0)|0,k[4]=k[4]+3545052371+(k[3]>>>0<g[3]>>>0?1:0)|0,k[5]=k[5]+886263092+(k[4]>>>0<g[4]>>>0?1:0)|0,k[6]=k[6]+1295307597+(k[5]>>>0<g[5]>>>0?1:0)|0,k[7]=k[7]+3545052371+(k[6]>>>0<g[6]>>>0?1:0)|0,this._b=k[7]>>>0<g[7]>>>0?1:0;for(var R=0;R<8;R++){var C=b[R]+k[R],w=C&65535,S=C>>>16,P=((w*w>>>17)+w*S>>>15)+S*S,N=((C&4294901760)*C|0)+((C&65535)*C|0);m[R]=P^N}b[0]=m[0]+(m[7]<<16|m[7]>>>16)+(m[6]<<16|m[6]>>>16)|0,b[1]=m[1]+(m[0]<<8|m[0]>>>24)+m[7]|0,b[2]=m[2]+(m[1]<<16|m[1]>>>16)+(m[0]<<16|m[0]>>>16)|0,b[3]=m[3]+(m[2]<<8|m[2]>>>24)+m[1]|0,b[4]=m[4]+(m[3]<<16|m[3]>>>16)+(m[2]<<16|m[2]>>>16)|0,b[5]=m[5]+(m[4]<<8|m[4]>>>24)+m[3]|0,b[6]=m[6]+(m[5]<<16|m[5]>>>16)+(m[4]<<16|m[4]>>>16)|0,b[7]=m[7]+(m[6]<<8|m[6]>>>24)+m[5]|0}l.RabbitLegacy=u._createHelper(x)})(),i.RabbitLegacy})})(zu)),zu.exports}var Hu={exports:{}},FC=Hu.exports,wg;function LC(){return wg||(wg=1,(function(n,s){(function(i,l,c){n.exports=l(vt(),as(),ls(),_o(),vn())})(FC,function(i){return(function(){var l=i,c=l.lib,u=c.BlockCipher,p=l.algo;const d=16,g=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],m=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var x={pbox:[],sbox:[]};function A(w,S){let P=S>>24&255,N=S>>16&255,F=S>>8&255,M=S&255,H=w.sbox[0][P]+w.sbox[1][N];return H=H^w.sbox[2][F],H=H+w.sbox[3][M],H}function b(w,S,P){let N=S,F=P,M;for(let H=0;H<d;++H)N=N^w.pbox[H],F=A(w,N)^F,M=N,N=F,F=M;return M=N,N=F,F=M,F=F^w.pbox[d],N=N^w.pbox[d+1],{left:N,right:F}}function k(w,S,P){let N=S,F=P,M;for(let H=d+1;H>1;--H)N=N^w.pbox[H],F=A(w,N)^F,M=N,N=F,F=M;return M=N,N=F,F=M,F=F^w.pbox[1],N=N^w.pbox[0],{left:N,right:F}}function R(w,S,P){for(let U=0;U<4;U++){w.sbox[U]=[];for(let j=0;j<256;j++)w.sbox[U][j]=m[U][j]}let N=0;for(let U=0;U<d+2;U++)w.pbox[U]=g[U]^S[N],N++,N>=P&&(N=0);let F=0,M=0,H=0;for(let U=0;U<d+2;U+=2)H=b(w,F,M),F=H.left,M=H.right,w.pbox[U]=F,w.pbox[U+1]=M;for(let U=0;U<4;U++)for(let j=0;j<256;j+=2)H=b(w,F,M),F=H.left,M=H.right,w.sbox[U][j]=F,w.sbox[U][j+1]=M;return!0}var C=p.Blowfish=u.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var w=this._keyPriorReset=this._key,S=w.words,P=w.sigBytes/4;R(x,S,P)}},encryptBlock:function(w,S){var P=b(x,w[S],w[S+1]);w[S]=P.left,w[S+1]=P.right},decryptBlock:function(w,S){var P=k(x,w[S],w[S+1]);w[S]=P.left,w[S+1]=P.right},blockSize:64/32,keySize:128/32,ivSize:64/32});l.Blowfish=u._createHelper(C)})(),i.Blowfish})})(Hu)),Hu.exports}var MC=su.exports,bg;function ev(){return bg||(bg=1,(function(n,s){(function(i,l,c){n.exports=l(vt(),xd(),N2(),L2(),as(),O2(),ls(),XA(),Bl(),U2(),JA(),q2(),$2(),Q2(),Ad(),J2(),_o(),vn(),rC(),oC(),aC(),cC(),dC(),hC(),mC(),xC(),vC(),_C(),bC(),EC(),SC(),PC(),DC(),NC(),LC())})(MC,function(i){return i})})(su)),su.exports}var Cg;function Q0(){if(Cg)return il;Cg=1,Object.defineProperty(il,"__esModule",{value:!0}),il.ChannelCrypto=void 0;const n=ev(),s=Cn();class i{static decryptGroupTextMessage(c,u,p){try{const d=(0,s.hexToBytes)(p),g=(0,s.hexToBytes)(u),m=new Uint8Array(32);m.set(d,0);const x=(0,n.HmacSHA256)(n.enc.Hex.parse(c),n.enc.Hex.parse((0,s.bytesToHex)(m))),b=(0,s.hexToBytes)(x.toString(n.enc.Hex)).slice(0,2);if(b[0]!==g[0]||b[1]!==g[1])return{success:!1,error:"MAC verification failed"};const k=n.enc.Hex.parse(p),R=n.enc.Hex.parse(c),C=n.AES.decrypt(n.lib.CipherParams.create({ciphertext:R}),k,{mode:n.mode.ECB,padding:n.pad.NoPadding}),w=(0,s.hexToBytes)(C.toString(n.enc.Hex));if(!w||w.length<5)return{success:!1,error:"Decrypted content too short"};const S=w[0]|w[1]<<8|w[2]<<16|w[3]<<24,P=w[4],N=w.slice(5);let M=new TextDecoder("utf-8").decode(N);const H=M.indexOf("\0");H>=0&&(M=M.substring(0,H));const U=M.indexOf(": ");let j,ee;if(U>0&&U<50){const Z=M.substring(0,U);/[:\[\]]/.test(Z)?ee=M:(j=Z,ee=M.substring(U+2))}else ee=M;return{success:!0,data:{timestamp:S,flags:P,sender:j,message:ee}}}catch(d){return{success:!1,error:d instanceof Error?d.message:"Decryption failed"}}}static calculateChannelHash(c){const u=(0,n.SHA256)(n.enc.Hex.parse(c));return(0,s.hexToBytes)(u.toString(n.enc.Hex))[0].toString(16).padStart(2,"0")}}return il.ChannelCrypto=i,il}var Eg;function tv(){if(Eg)return rl;Eg=1,Object.defineProperty(rl,"__esModule",{value:!0}),rl.MeshCoreKeyStore=void 0;const n=Q0();class s{constructor(l){this.nodeKeys=new Map,this.channelHashToKeys=new Map,l!=null&&l.channelSecrets&&this.addChannelSecrets(l.channelSecrets),l!=null&&l.nodeKeys&&Object.entries(l.nodeKeys).forEach(([c,u])=>{this.addNodeKey(c,u)})}addNodeKey(l,c){const u=l.toUpperCase();this.nodeKeys.set(u,c)}hasChannelKey(l){const c=l.toLowerCase();return this.channelHashToKeys.has(c)}hasNodeKey(l){const c=l.toUpperCase();return this.nodeKeys.has(c)}getChannelKeys(l){const c=l.toLowerCase();return this.channelHashToKeys.get(c)||[]}getNodeKey(l){const c=l.toUpperCase();return this.nodeKeys.get(c)}addChannelSecrets(l){for(const c of l){const u=n.ChannelCrypto.calculateChannelHash(c).toLowerCase();this.channelHashToKeys.has(u)||this.channelHashToKeys.set(u,[]),this.channelHashToKeys.get(u).push(c)}}}return rl.MeshCoreKeyStore=s,rl}var ol={},Or={};/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const nv={p:0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,n:0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3edn,h:8n,a:0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffecn,d:0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3n,Gx:0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51an,Gy:0x6666666666666666666666666666666666666666666666666666666666666658n},{p:Rn,n:Vu,Gx:kg,Gy:Sg,a:d0,d:f0}=nv,IC=8n,ii=32,wl=64,ur=(n="")=>{throw new Error(n)},OC=n=>typeof n=="bigint",rv=n=>typeof n=="string",jC=n=>n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array",os=(n,s)=>!jC(n)||typeof s=="number"&&s>0&&n.length!==s?ur("Uint8Array expected"):n,vd=n=>new Uint8Array(n),Y0=n=>Uint8Array.from(n),iv=(n,s)=>n.toString(16).padStart(s,"0"),X0=n=>Array.from(os(n)).map(s=>iv(s,2)).join(""),Pi={_0:48,_9:57,A:65,F:70,a:97,f:102},Bg=n=>{if(n>=Pi._0&&n<=Pi._9)return n-Pi._0;if(n>=Pi.A&&n<=Pi.F)return n-(Pi.A-10);if(n>=Pi.a&&n<=Pi.f)return n-(Pi.a-10)},J0=n=>{const s="hex invalid";if(!rv(n))return ur(s);const i=n.length,l=i/2;if(i%2)return ur(s);const c=vd(l);for(let u=0,p=0;u<l;u++,p+=2){const d=Bg(n.charCodeAt(p)),g=Bg(n.charCodeAt(p+1));if(d===void 0||g===void 0)return ur(s);c[u]=d*16+g}return c},yo=(n,s)=>os(rv(n)?J0(n):Y0(os(n)),s),ov=()=>globalThis==null?void 0:globalThis.crypto,zC=()=>{var n;return((n=ov())==null?void 0:n.subtle)??ur("crypto.subtle must be defined")},bl=(...n)=>{const s=vd(n.reduce((l,c)=>l+os(c).length,0));let i=0;return n.forEach(l=>{s.set(l,i),i+=l.length}),s},sv=(n=ii)=>ov().getRandomValues(vd(n)),Xu=BigInt,es=(n,s,i,l="bad number: out of range")=>OC(n)&&s<=n&&n<i?n:ur(l),He=(n,s=Rn)=>{const i=n%s;return i>=0n?i:s+i},av=n=>He(n,Vu),lv=(n,s)=>{(n===0n||s<=0n)&&ur("no inverse n="+n+" mod="+s);let i=He(n,s),l=s,c=0n,u=1n;for(;i!==0n;){const p=l/i,d=l%i,g=c-u*p;l=i,i=d,c=u,u=g}return l===1n?He(c,s):ur("no inverse")},HC=n=>{const s=sh[n];return typeof s!="function"&&ur("hashes."+n+" not set"),s},Pg=n=>n instanceof zr?n:ur("Point expected"),C0=2n**256n,ni=class ni{constructor(s,i,l,c){Go(this,"ex");Go(this,"ey");Go(this,"ez");Go(this,"et");const u=C0;this.ex=es(s,0n,u),this.ey=es(i,0n,u),this.ez=es(l,1n,u),this.et=es(c,0n,u),Object.freeze(this)}static fromAffine(s){return new ni(s.x,s.y,1n,He(s.x*s.y))}static fromBytes(s,i=!1){const l=f0,c=Y0(os(s,ii)),u=s[31];c[31]=u&-129;const p=eh(c);es(p,0n,i?C0:Rn);const g=He(p*p),m=He(g-1n),x=He(l*g+1n);let{isValid:A,value:b}=UC(m,x);A||ur("bad point: y not sqrt");const k=(b&1n)===1n,R=(u&128)!==0;return!i&&b===0n&&R&&ur("bad point: x==0, isLastByteOdd"),R!==k&&(b=He(-b)),new ni(b,p,1n,He(b*p))}assertValidity(){const s=d0,i=f0,l=this;if(l.is0())throw new Error("bad point: ZERO");const{ex:c,ey:u,ez:p,et:d}=l,g=He(c*c),m=He(u*u),x=He(p*p),A=He(x*x),b=He(g*s),k=He(x*He(b+m)),R=He(A+He(i*He(g*m)));if(k!==R)throw new Error("bad point: equation left != right (1)");const C=He(c*u),w=He(p*d);if(C!==w)throw new Error("bad point: equation left != right (2)");return this}equals(s){const{ex:i,ey:l,ez:c}=this,{ex:u,ey:p,ez:d}=Pg(s),g=He(i*d),m=He(u*c),x=He(l*d),A=He(p*c);return g===m&&x===A}is0(){return this.equals(ea)}negate(){return new ni(He(-this.ex),this.ey,this.ez,He(-this.et))}double(){const{ex:s,ey:i,ez:l}=this,c=d0,u=He(s*s),p=He(i*i),d=He(2n*He(l*l)),g=He(c*u),m=s+i,x=He(He(m*m)-u-p),A=g+p,b=A-d,k=g-p,R=He(x*b),C=He(A*k),w=He(x*k),S=He(b*A);return new ni(R,C,S,w)}add(s){const{ex:i,ey:l,ez:c,et:u}=this,{ex:p,ey:d,ez:g,et:m}=Pg(s),x=d0,A=f0,b=He(i*p),k=He(l*d),R=He(u*A*m),C=He(c*g),w=He((i+l)*(p+d)-b-k),S=He(C-R),P=He(C+R),N=He(k-x*b),F=He(w*S),M=He(P*N),H=He(w*N),U=He(S*P);return new ni(F,M,U,H)}multiply(s,i=!0){if(!i&&(s===0n||this.is0()))return ea;if(es(s,1n,Vu),s===1n)return this;if(this.equals(Ni))return JC(s).p;let l=ea,c=Ni;for(let u=this;s>0n;u=u.double(),s>>=1n)s&1n?l=l.add(u):i&&(c=c.add(u));return l}toAffine(){const{ex:s,ey:i,ez:l}=this;if(this.equals(ea))return{x:0n,y:1n};const c=lv(l,Rn);return He(l*c)!==1n&&ur("invalid inverse"),{x:He(s*c),y:He(i*c)}}toBytes(){const{x:s,y:i}=this.assertValidity().toAffine(),l=cv(i);return l[31]|=s&1n?128:0,l}toHex(){return X0(this.toBytes())}clearCofactor(){return this.multiply(Xu(IC),!1)}isSmallOrder(){return this.clearCofactor().is0()}isTorsionFree(){let s=this.multiply(Vu/2n,!1).double();return Vu%2n&&(s=s.add(this)),s.is0()}static fromHex(s,i){return ni.fromBytes(yo(s),i)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}toRawBytes(){return this.toBytes()}};Go(ni,"BASE"),Go(ni,"ZERO");let zr=ni;const Ni=new zr(kg,Sg,1n,He(kg*Sg)),ea=new zr(0n,1n,1n,0n);zr.BASE=Ni;zr.ZERO=ea;const cv=n=>J0(iv(es(n,0n,C0),wl)).reverse(),eh=n=>Xu("0x"+X0(Y0(os(n)).reverse())),ti=(n,s)=>{let i=n;for(;s-- >0n;)i*=i,i%=Rn;return i},VC=n=>{const i=n*n%Rn*n%Rn,l=ti(i,2n)*i%Rn,c=ti(l,1n)*n%Rn,u=ti(c,5n)*c%Rn,p=ti(u,10n)*u%Rn,d=ti(p,20n)*p%Rn,g=ti(d,40n)*d%Rn,m=ti(g,80n)*g%Rn,x=ti(m,80n)*g%Rn,A=ti(x,10n)*u%Rn;return{pow_p_5_8:ti(A,2n)*n%Rn,b2:i}},Tg=0x2b8324804fc1df0b2b4d00993dfbd7a72f431806ad2fe478c4ee1b274a0ea0b0n,UC=(n,s)=>{const i=He(s*s*s),l=He(i*i*s),c=VC(n*l).pow_p_5_8;let u=He(n*i*c);const p=He(s*u*u),d=u,g=He(u*Tg),m=p===n,x=p===He(-n),A=p===He(-n*Tg);return m&&(u=d),(x||A)&&(u=g),(He(u)&1n)===1n&&(u=He(-u)),{isValid:m||x,value:u}},Ju=n=>av(eh(n)),th=(...n)=>sh.sha512Async(...n),nh=(...n)=>HC("sha512Sync")(...n),uv=n=>{const s=n.slice(0,ii);s[0]&=248,s[31]&=127,s[31]|=64;const i=n.slice(ii,wl),l=Ju(s),c=Ni.multiply(l),u=c.toBytes();return{head:s,prefix:i,scalar:l,point:c,pointBytes:u}},rh=n=>th(yo(n,ii)).then(uv),ih=n=>uv(nh(yo(n,ii))),ZC=n=>rh(n).then(s=>s.pointBytes),WC=n=>ih(n).pointBytes,dv=n=>th(n.hashable).then(n.finish),fv=n=>n.finish(nh(n.hashable)),hv=(n,s,i)=>{const{pointBytes:l,scalar:c}=n,u=Ju(s),p=Ni.multiply(u).toBytes();return{hashable:bl(p,l,i),finish:m=>{const x=av(u+Ju(m)*c);return os(bl(p,cv(x)),wl)}}},qC=async(n,s)=>{const i=yo(n),l=await rh(s),c=await th(l.prefix,i);return dv(hv(l,c,i))},GC=(n,s)=>{const i=yo(n),l=ih(s),c=nh(l.prefix,i);return fv(hv(l,c,i))},oh={zip215:!0},pv=(n,s,i,l=oh)=>{n=yo(n,wl),s=yo(s),i=yo(i,ii);const{zip215:c}=l;let u,p,d,g,m=Uint8Array.of();try{u=zr.fromHex(i,c),p=zr.fromHex(n.slice(0,ii),c),d=eh(n.slice(ii,wl)),g=Ni.multiply(d,!1),m=bl(p.toBytes(),u.toBytes(),s)}catch{}return{hashable:m,finish:A=>{if(g==null||!c&&u.isSmallOrder())return!1;const b=Ju(A);return p.add(u.multiply(b,!1)).add(g.negate()).clearCofactor().is0()}}},$C=async(n,s,i,l=oh)=>dv(pv(n,s,i,l)),KC=(n,s,i,l=oh)=>fv(pv(n,s,i,l)),sh={sha512Async:async(...n)=>{const s=zC(),i=bl(...n);return vd(await s.digest("SHA-512",i.buffer))},sha512Sync:void 0,bytesToHex:X0,hexToBytes:J0,concatBytes:bl,mod:He,invert:lv,randomBytes:sv},QC={getExtendedPublicKeyAsync:rh,getExtendedPublicKey:ih,randomPrivateKey:()=>sv(ii),precompute:(n=8,s=Ni)=>(s.multiply(3n),s)},ed=8,YC=256,mv=Math.ceil(YC/ed)+1,E0=2**(ed-1),XC=()=>{const n=[];let s=Ni,i=s;for(let l=0;l<mv;l++){i=s,n.push(i);for(let c=1;c<E0;c++)i=i.add(s),n.push(i);s=i.double()}return n};let Dg;const Rg=(n,s)=>{const i=s.negate();return n?i:s},JC=n=>{const s=Dg||(Dg=XC());let i=ea,l=Ni;const c=2**ed,u=c,p=Xu(c-1),d=Xu(ed);for(let g=0;g<mv;g++){let m=Number(n&p);n>>=d,m>E0&&(m-=u,n+=1n);const x=g*E0,A=x,b=x+Math.abs(m)-1,k=g%2!==0,R=m<0;m===0?l=l.add(Rg(k,s[A])):i=i.add(Rg(R,s[b]))}return{p:i,f:l}},eE=Object.freeze(Object.defineProperty({__proto__:null,CURVE:nv,ExtendedPoint:zr,Point:zr,etc:sh,getPublicKey:WC,getPublicKeyAsync:ZC,sign:GC,signAsync:qC,utils:QC,verify:KC,verifyAsync:$C},Symbol.toStringTag,{value:"Module"})),tE=gx(eE);var Yo={},h0={exports:{}},Ng;function nE(){return Ng||(Ng=1,(function(n,s){var i=(()=>{var c;var l=typeof document<"u"?(c=document.currentScript)==null?void 0:c.src:void 0;return(async function(u={}){var pn;var p,d=u,g=typeof window=="object",m=typeof WorkerGlobalScope<"u",x=typeof process=="object"&&((pn=process.versions)==null?void 0:pn.node)&&process.type!="renderer";typeof __filename<"u"?l=__filename:m&&(l=self.location.href);var A="";function b(ye){return d.locateFile?d.locateFile(ye,A):A+ye}var k,R;if(x){var C=Yu;A=__dirname+"/",R=ye=>{ye=N(ye)?new URL(ye):ye;var Se=C.readFileSync(ye);return Se},k=async(ye,Se=!0)=>{ye=N(ye)?new URL(ye):ye;var Ne=C.readFileSync(ye,Se?void 0:"utf8");return Ne},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2)}else if(g||m){try{A=new URL(".",l).href}catch{}m&&(R=ye=>{var Se=new XMLHttpRequest;return Se.open("GET",ye,!1),Se.responseType="arraybuffer",Se.send(null),new Uint8Array(Se.response)}),k=async ye=>{if(N(ye))return new Promise((Ne,ct)=>{var tt=new XMLHttpRequest;tt.open("GET",ye,!0),tt.responseType="arraybuffer",tt.onload=()=>{if(tt.status==200||tt.status==0&&tt.response){Ne(tt.response);return}ct(tt.status)},tt.onerror=ct,tt.send(null)});var Se=await fetch(ye,{credentials:"same-origin"});if(Se.ok)return Se.arrayBuffer();throw new Error(Se.status+" : "+Se.url)}}console.log.bind(console);var w=console.error.bind(console),S,P=!1,N=ye=>ye.startsWith("file://"),F,M,H,U,j,ee=!1;function Z(){var ye=H.buffer;d.HEAP8=U=new Int8Array(ye),d.HEAPU8=j=new Uint8Array(ye),d.HEAP32=new Int32Array(ye),d.HEAPU32=new Uint32Array(ye),new BigInt64Array(ye),new BigUint64Array(ye)}function Y(){if(d.preRun)for(typeof d.preRun=="function"&&(d.preRun=[d.preRun]);d.preRun.length;)We(d.preRun.shift());ve(Pe)}function te(){ee=!0,Pt.b()}function K(){if(d.postRun)for(typeof d.postRun=="function"&&(d.postRun=[d.postRun]);d.postRun.length;)ge(d.postRun.shift());ve(me)}var ae=0,Ae=null;function G(ye){var Se;ae++,(Se=d.monitorRunDependencies)==null||Se.call(d,ae)}function se(ye){var Ne;if(ae--,(Ne=d.monitorRunDependencies)==null||Ne.call(d,ae),ae==0&&Ae){var Se=Ae;Ae=null,Se()}}function W(ye){var Ne;(Ne=d.onAbort)==null||Ne.call(d,ye),ye="Aborted("+ye+")",w(ye),P=!0,ye+=". Build with -sASSERTIONS for more info.";var Se=new WebAssembly.RuntimeError(ye);throw M==null||M(Se),Se}var re;function V(){return b("orlp-ed25519.wasm")}function T(ye){if(ye==re&&S)return new Uint8Array(S);if(R)return R(ye);throw"both async and sync fetching of the wasm failed"}async function z(ye){if(!S)try{var Se=await k(ye);return new Uint8Array(Se)}catch{}return T(ye)}async function q(ye,Se){try{var Ne=await z(ye),ct=await WebAssembly.instantiate(Ne,Se);return ct}catch(tt){w(`failed to asynchronously prepare wasm: ${tt}`),W(tt)}}async function $(ye,Se,Ne){if(!ye&&typeof WebAssembly.instantiateStreaming=="function"&&!N(Se)&&!x)try{var ct=fetch(Se,{credentials:"same-origin"}),tt=await WebAssembly.instantiateStreaming(ct,Ne);return tt}catch(ne){w(`wasm streaming compile failed: ${ne}`),w("falling back to ArrayBuffer instantiation")}return q(Se,Ne)}function ue(){return{a:Ht}}async function pe(){function ye(ne,xe){return Pt=ne.exports,H=Pt.a,Z(),yn(Pt),se(),Pt}G();function Se(ne){return ye(ne.instance)}var Ne=ue();if(d.instantiateWasm)return new Promise((ne,xe)=>{d.instantiateWasm(Ne,(_e,Ue)=>{ne(ye(_e))})});re??(re=V());var ct=await $(S,re,Ne),tt=Se(ct);return tt}var ve=ye=>{for(;ye.length>0;)ye.shift()(d)},me=[],ge=ye=>me.push(ye),Pe=[],We=ye=>Pe.push(ye),Ke=ye=>Ot(ye),ke=()=>sn(),Ve=ye=>{var Se=d["_"+ye];return Se},st=(ye,Se)=>{U.set(ye,Se)},mt=ye=>{for(var Se=0,Ne=0;Ne<ye.length;++Ne){var ct=ye.charCodeAt(Ne);ct<=127?Se++:ct<=2047?Se+=2:ct>=55296&&ct<=57343?(Se+=4,++Ne):Se+=3}return Se},et=(ye,Se,Ne,ct)=>{if(!(ct>0))return 0;for(var tt=Ne,ne=Ne+ct-1,xe=0;xe<ye.length;++xe){var _e=ye.codePointAt(xe);if(_e<=127){if(Ne>=ne)break;Se[Ne++]=_e}else if(_e<=2047){if(Ne+1>=ne)break;Se[Ne++]=192|_e>>6,Se[Ne++]=128|_e&63}else if(_e<=65535){if(Ne+2>=ne)break;Se[Ne++]=224|_e>>12,Se[Ne++]=128|_e>>6&63,Se[Ne++]=128|_e&63}else{if(Ne+3>=ne)break;Se[Ne++]=240|_e>>18,Se[Ne++]=128|_e>>12&63,Se[Ne++]=128|_e>>6&63,Se[Ne++]=128|_e&63,xe++}}return Se[Ne]=0,Ne-tt},at=(ye,Se,Ne)=>et(ye,j,Se,Ne),Ge=ye=>en(ye),$e=ye=>{var Se=mt(ye)+1,Ne=Ge(Se);return at(ye,Ne,Se),Ne},Ye=typeof TextDecoder<"u"?new TextDecoder:void 0,Le=(ye,Se=0,Ne=NaN)=>{for(var ct=Se+Ne,tt=Se;ye[tt]&&!(tt>=ct);)++tt;if(tt-Se>16&&ye.buffer&&Ye)return Ye.decode(ye.subarray(Se,tt));for(var ne="";Se<tt;){var xe=ye[Se++];if(!(xe&128)){ne+=String.fromCharCode(xe);continue}var _e=ye[Se++]&63;if((xe&224)==192){ne+=String.fromCharCode((xe&31)<<6|_e);continue}var Ue=ye[Se++]&63;if((xe&240)==224?xe=(xe&15)<<12|_e<<6|Ue:xe=(xe&7)<<18|_e<<12|Ue<<6|ye[Se++]&63,xe<65536)ne+=String.fromCharCode(xe);else{var ie=xe-65536;ne+=String.fromCharCode(55296|ie>>10,56320|ie&1023)}}return ne},wt=(ye,Se)=>ye?Le(j,ye,Se):"",It=(ye,Se,Ne,ct,tt)=>{var ne={string:ht=>{var Tt=0;return ht!=null&&ht!==0&&(Tt=$e(ht)),Tt},array:ht=>{var Tt=Ge(ht.length);return st(ht,Tt),Tt}};function xe(ht){return Se==="string"?wt(ht):Se==="boolean"?!!ht:ht}var _e=Ve(ye),Ue=[],ie=0;if(ct)for(var Ee=0;Ee<ct.length;Ee++){var ut=ne[Ne[Ee]];ut?(ie===0&&(ie=ke()),Ue[Ee]=ut(ct[Ee])):Ue[Ee]=ct[Ee]}var Ft=_e(...Ue);function nn(ht){return ie!==0&&Ke(ie),xe(ht)}return Ft=nn(Ft),Ft},Nn=(ye,Se,Ne,ct)=>{var tt=!Ne||Ne.every(xe=>xe==="number"||xe==="boolean"),ne=Se!=="string";return ne&&tt&&!ct?Ve(ye):(...xe)=>It(ye,Se,Ne,xe)};d.noExitRuntime&&d.noExitRuntime,d.print&&d.print,d.printErr&&(w=d.printErr),d.wasmBinary&&(S=d.wasmBinary),d.arguments&&d.arguments,d.thisProgram&&d.thisProgram,d.ccall=It,d.cwrap=Nn;var Ot,en,sn;function yn(ye){d._orlp_derive_public_key=ye.c,d._orlp_validate_keypair=ye.d,d._orlp_sign=ye.e,d._orlp_verify=ye.f,Ot=ye.g,en=ye.h,sn=ye.i}var Ht={},Pt=await pe();function Vt(){if(ae>0){Ae=Vt;return}if(Y(),ae>0){Ae=Vt;return}function ye(){var Se;d.calledRun=!0,!P&&(te(),F==null||F(d),(Se=d.onRuntimeInitialized)==null||Se.call(d),K())}d.setStatus?(d.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>d.setStatus(""),1),ye()},1)):ye()}function Fn(){if(d.preInit)for(typeof d.preInit=="function"&&(d.preInit=[d.preInit]);d.preInit.length>0;)d.preInit.shift()()}return Fn(),Vt(),ee?p=d:p=new Promise((ye,Se)=>{F=ye,M=Se}),p})})();n.exports=i,n.exports.default=i})(h0)),h0.exports}var Fg;function ah(){if(Fg)return Yo;Fg=1,Object.defineProperty(Yo,"__esModule",{value:!0}),Yo.derivePublicKey=l,Yo.validateKeyPair=c,Yo.sign=u,Yo.verify=p;const n=Cn(),s=nE();async function i(){return await s()}async function l(d){const g=await i(),m=(0,n.hexToBytes)(d);if(m.length!==64)throw new Error(`Invalid private key length: expected 64 bytes, got ${m.length}`);const x=1024,A=1088;if(g.HEAPU8.set(m,x),g.ccall("orlp_derive_public_key","number",["number","number"],[A,x])!==0)throw new Error("orlp key derivation failed: invalid private key");const k=new Uint8Array(32);return k.set(g.HEAPU8.subarray(A,A+32)),(0,n.bytesToHex)(k)}async function c(d,g){try{const m=await i(),x=(0,n.hexToBytes)(d),A=(0,n.hexToBytes)(g);if(x.length!==64||A.length!==32)return!1;const b=2048,k=2112;return m.HEAPU8.set(x,b),m.HEAPU8.set(A,k),m.ccall("orlp_validate_keypair","number",["number","number"],[k,b])===1}catch{return!1}}async function u(d,g,m){const x=await i(),A=(0,n.hexToBytes)(d),b=(0,n.hexToBytes)(g),k=(0,n.hexToBytes)(m);if(b.length!==64)throw new Error(`Invalid private key length: expected 64 bytes, got ${b.length}`);if(k.length!==32)throw new Error(`Invalid public key length: expected 32 bytes, got ${k.length}`);const R=1e5,C=2e5,w=3e5,S=4e5;x.HEAPU8.set(A,R),x.HEAPU8.set(b,C),x.HEAPU8.set(k,w),x.ccall("orlp_sign","void",["number","number","number","number","number"],[S,R,A.length,w,C]);const P=new Uint8Array(64);return P.set(x.HEAPU8.subarray(S,S+64)),(0,n.bytesToHex)(P)}async function p(d,g,m){try{const x=await i(),A=(0,n.hexToBytes)(d),b=(0,n.hexToBytes)(g),k=(0,n.hexToBytes)(m);if(A.length!==64||k.length!==32)return!1;const R=5e5,C=6e5,w=7e5;return x.HEAPU8.set(A,C),x.HEAPU8.set(b,R),x.HEAPU8.set(k,w),x.ccall("orlp_verify","number",["number","number","number","number"],[C,R,b.length,w])===1}catch{return!1}}return Yo}var Lg;function gv(){if(Lg)return Or;Lg=1;var n=Or&&Or.__createBinding||(Object.create?(function(m,x,A,b){b===void 0&&(b=A);var k=Object.getOwnPropertyDescriptor(x,A);(!k||("get"in k?!x.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return x[A]}}),Object.defineProperty(m,b,k)}):(function(m,x,A,b){b===void 0&&(b=A),m[b]=x[A]})),s=Or&&Or.__setModuleDefault||(Object.create?(function(m,x){Object.defineProperty(m,"default",{enumerable:!0,value:x})}):function(m,x){m.default=x}),i=Or&&Or.__importStar||(function(){var m=function(x){return m=Object.getOwnPropertyNames||function(A){var b=[];for(var k in A)Object.prototype.hasOwnProperty.call(A,k)&&(b[b.length]=k);return b},m(x)};return function(x){if(x&&x.__esModule)return x;var A={};if(x!=null)for(var b=m(x),k=0;k<b.length;k++)b[k]!=="default"&&n(A,x,b[k]);return s(A,x),A}})();Object.defineProperty(Or,"__esModule",{value:!0}),Or.Ed25519SignatureVerifier=void 0;const l=i(tE),c=Cn(),u=ah();async function p(m){if(typeof globalThis<"u"&&globalThis.crypto&&globalThis.crypto.subtle){const x=await globalThis.crypto.subtle.digest("SHA-512",m);return new Uint8Array(x)}if(typeof b0<"u")try{const{createHash:x}=Yu;return x("sha512").update(m).digest()}catch{}throw new Error("No SHA-512 implementation available")}function d(m){if(typeof b0<"u")try{const{createHash:x}=Yu;return x("sha512").update(m).digest()}catch{}try{const x=ev(),A=x.lib.WordArray.create(m),b=x.SHA512(A),k=new Uint8Array(64);for(let R=0;R<16;R++){const C=b.words[R]||0;k[R*4]=C>>>24&255,k[R*4+1]=C>>>16&255,k[R*4+2]=C>>>8&255,k[R*4+3]=C&255}return k}catch{throw new Error("No SHA-512 implementation available for synchronous operation")}}l.etc.sha512Async=p;try{l.etc.sha512Sync=d}catch(m){console.debug("Could not set up synchronous SHA-512:",m)}class g{static async verifyAdvertisementSignature(x,A,b,k){try{const R=(0,c.hexToBytes)(x),C=(0,c.hexToBytes)(A),w=(0,c.hexToBytes)(k),S=this.constructAdvertSignedMessage(x,b,w);return await l.verify(C,S,R)}catch(R){return console.error("Ed25519 signature verification failed:",R),!1}}static constructAdvertSignedMessage(x,A,b){const k=(0,c.hexToBytes)(x),R=new Uint8Array(4);R[0]=A&255,R[1]=A>>8&255,R[2]=A>>16&255,R[3]=A>>24&255;const C=new Uint8Array(36+b.length);return C.set(k,0),C.set(R,32),C.set(b,36),C}static getSignedMessageDescription(x,A,b){return`Public Key: ${x} + Timestamp: ${A} (${new Date(A*1e3).toISOString()}) + App Data: ${b}`}static getSignedMessageHex(x,A,b){const k=(0,c.hexToBytes)(b),R=this.constructAdvertSignedMessage(x,A,k);return(0,c.bytesToHex)(R)}static async derivePublicKey(x){try{const A=(0,c.hexToBytes)(x);if(A.length!==64)throw new Error(`Invalid private key length: expected 64 bytes, got ${A.length}`);return await(0,u.derivePublicKey)(x)}catch(A){throw new Error(`Failed to derive public key: ${A instanceof Error?A.message:"Unknown error"}`)}}static derivePublicKeySync(x){try{const A=(0,c.hexToBytes)(x);throw A.length!==64?new Error(`Invalid private key length: expected 64 bytes, got ${A.length}`):new Error("Synchronous key derivation not supported with WASM. Use derivePublicKey() instead.")}catch(A){throw new Error(`Failed to derive public key: ${A instanceof Error?A.message:"Unknown error"}`)}}static async validateKeyPair(x,A){try{return await(0,u.validateKeyPair)(x,A)}catch{return!1}}}return Or.Ed25519SignatureVerifier=g,Or}var Mg;function rE(){if(Mg)return ol;Mg=1,Object.defineProperty(ol,"__esModule",{value:!0}),ol.AdvertPayloadDecoder=void 0;const n=dr(),s=Cn(),i=_l(),l=gv();class c{static decode(p,d){try{if(p.length<101){const S={type:n.PayloadType.Advert,version:n.PayloadVersion.Version1,isValid:!1,errors:["Advertisement payload too short"],publicKey:"",timestamp:0,signature:"",appData:{flags:0,deviceRole:n.DeviceRole.ChatNode,hasLocation:!1,hasName:!1}};return d!=null&&d.includeSegments&&(S.segments=[{name:"Invalid Advert Data",description:"Advert payload too short (minimum 101 bytes required)",startByte:d.segmentOffset||0,endByte:(d.segmentOffset||0)+p.length-1,value:(0,s.bytesToHex)(p)}]),S}const g=[],m=(d==null?void 0:d.segmentOffset)||0;let x=0;const A=(0,s.bytesToHex)(p.subarray(x,x+32));d!=null&&d.includeSegments&&g.push({name:"Public Key",description:"Ed25519 public key",startByte:m+x,endByte:m+x+31,value:A}),x+=32;const b=this.readUint32LE(p,x);if(d!=null&&d.includeSegments){const S=new Date(b*1e3);g.push({name:"Timestamp",description:`${b} (${S.toISOString().slice(0,19)}Z)`,startByte:m+x,endByte:m+x+3,value:(0,s.bytesToHex)(p.subarray(x,x+4))})}x+=4;const k=(0,s.bytesToHex)(p.subarray(x,x+64));d!=null&&d.includeSegments&&g.push({name:"Signature",description:"Ed25519 signature",startByte:m+x,endByte:m+x+63,value:k}),x+=64;const R=p[x];if(d!=null&&d.includeSegments){const S=R.toString(2).padStart(8,"0"),P=this.parseDeviceRole(R),F=` | Bits 0-3 (Role): ${(0,i.getDeviceRoleName)(P)} | Bit 4 (Location): ${R&n.AdvertFlags.HasLocation?"Yes":"No"} | Bit 7 (Name): ${R&n.AdvertFlags.HasName?"Yes":"No"}`;g.push({name:"App Flags",description:`Binary: ${S}${F}`,startByte:m+x,endByte:m+x,value:R.toString(16).padStart(2,"0").toUpperCase()})}x+=1;const C={type:n.PayloadType.Advert,version:n.PayloadVersion.Version1,isValid:!0,publicKey:A,timestamp:b,signature:k,appData:{flags:R,deviceRole:this.parseDeviceRole(R),hasLocation:!!(R&n.AdvertFlags.HasLocation),hasName:!!(R&n.AdvertFlags.HasName)}};let w=x;if(R&n.AdvertFlags.HasLocation&&p.length>=w+8){const S=this.readInt32LE(p,w)/1e6,P=this.readInt32LE(p,w+4)/1e6;C.appData.location={latitude:Math.round(S*1e6)/1e6,longitude:Math.round(P*1e6)/1e6},d!=null&&d.includeSegments&&(g.push({name:"Latitude",description:`${S} (${S})`,startByte:m+w,endByte:m+w+3,value:(0,s.bytesToHex)(p.subarray(w,w+4))}),g.push({name:"Longitude",description:`${P} (${P})`,startByte:m+w+4,endByte:m+w+7,value:(0,s.bytesToHex)(p.subarray(w+4,w+8))})),w+=8}if(R&n.AdvertFlags.HasFeature1&&(w+=2),R&n.AdvertFlags.HasFeature2&&(w+=2),R&n.AdvertFlags.HasName&&p.length>w){const S=p.subarray(w),P=new TextDecoder("utf-8").decode(S).replace(/\0.*$/,"");C.appData.name=this.sanitizeControlCharacters(P)||P,d!=null&&d.includeSegments&&g.push({name:"Node Name",description:`Node name: "${C.appData.name}"`,startByte:m+w,endByte:m+p.length-1,value:(0,s.bytesToHex)(S)})}return d!=null&&d.includeSegments&&(C.segments=g),C}catch(g){return{type:n.PayloadType.Advert,version:n.PayloadVersion.Version1,isValid:!1,errors:[g instanceof Error?g.message:"Failed to decode advertisement payload"],publicKey:"",timestamp:0,signature:"",appData:{flags:0,deviceRole:n.DeviceRole.ChatNode,hasLocation:!1,hasName:!1}}}}static async decodeWithVerification(p,d){const g=this.decode(p,d);if(!g||!g.isValid)return g;try{const x=p.subarray(100),A=(0,s.bytesToHex)(x),b=await l.Ed25519SignatureVerifier.verifyAdvertisementSignature(g.publicKey,g.signature,g.timestamp,A);g.signatureValid=b,b||(g.signatureError="Ed25519 signature verification failed",g.isValid=!1,g.errors||(g.errors=[]),g.errors.push("Invalid Ed25519 signature"))}catch(m){g.signatureValid=!1,g.signatureError=m instanceof Error?m.message:"Signature verification error",g.isValid=!1,g.errors||(g.errors=[]),g.errors.push("Signature verification failed: "+(m instanceof Error?m.message:"Unknown error"))}return g}static parseDeviceRole(p){switch(p&15){case 1:return n.DeviceRole.ChatNode;case 2:return n.DeviceRole.Repeater;case 3:return n.DeviceRole.RoomServer;case 4:return n.DeviceRole.Sensor;default:return n.DeviceRole.ChatNode}}static readUint32LE(p,d){return p[d]|p[d+1]<<8|p[d+2]<<16|p[d+3]<<24}static readInt32LE(p,d){const g=this.readUint32LE(p,d);return g>2147483647?g-4294967296:g}static sanitizeControlCharacters(p){return p&&p.trim().replace(/[\x00-\x1F\x7F]/g,"")||null}}return ol.AdvertPayloadDecoder=c,ol}var sl={},Ig;function iE(){if(Ig)return sl;Ig=1,Object.defineProperty(sl,"__esModule",{value:!0}),sl.TracePayloadDecoder=void 0;const n=dr(),s=Cn();class i{static decode(c,u,p){try{if(c.length<9){const P={type:n.PayloadType.Trace,version:n.PayloadVersion.Version1,isValid:!1,errors:["Trace payload too short (need at least tag(4) + auth(4) + flags(1))"],traceTag:"00000000",authCode:0,flags:0,pathHashes:[]};return p!=null&&p.includeSegments&&(P.segments=[{name:"Invalid Trace Data",description:"Trace payload too short (minimum 9 bytes required)",startByte:p.segmentOffset||0,endByte:(p.segmentOffset||0)+c.length-1,value:(0,s.bytesToHex)(c)}]),P}let d=0;const g=[],m=(p==null?void 0:p.segmentOffset)||0,x=this.readUint32LE(c,d),A=(0,s.numberToHex)(x,8);p!=null&&p.includeSegments&&g.push({name:"Trace Tag",description:`Unique identifier for this trace: 0x${x.toString(16).padStart(8,"0")}`,startByte:m+d,endByte:m+d+3,value:(0,s.bytesToHex)(c.slice(d,d+4))}),d+=4;const b=this.readUint32LE(c,d);p!=null&&p.includeSegments&&g.push({name:"Auth Code",description:`Authentication/verification code: ${b}`,startByte:m+d,endByte:m+d+3,value:(0,s.bytesToHex)(c.slice(d,d+4))}),d+=4;const k=c[d];p!=null&&p.includeSegments&&g.push({name:"Flags",description:`Application-defined control flags: 0x${k.toString(16).padStart(2,"0")} (${k.toString(2).padStart(8,"0")}b)`,startByte:m+d,endByte:m+d,value:k.toString(16).padStart(2,"0").toUpperCase()}),d+=1;const R=[],C=d;for(;d<c.length;)R.push((0,s.byteToHex)(c[d])),d++;if(p!=null&&p.includeSegments&&R.length>0){const P=R.join(" ");g.push({name:"Path Hashes",description:`Node hashes in trace path: ${P}`,startByte:m+C,endByte:m+c.length-1,value:(0,s.bytesToHex)(c.slice(C))})}let w;u&&u.length>0&&(w=u.map(P=>{const N=parseInt(P,16);return(N>127?N-256:N)/4}));const S={type:n.PayloadType.Trace,version:n.PayloadVersion.Version1,isValid:!0,traceTag:A,authCode:b,flags:k,pathHashes:R,snrValues:w};return p!=null&&p.includeSegments&&(S.segments=g),S}catch(d){return{type:n.PayloadType.Trace,version:n.PayloadVersion.Version1,isValid:!1,errors:[d instanceof Error?d.message:"Failed to decode trace payload"],traceTag:"00000000",authCode:0,flags:0,pathHashes:[]}}}static readUint32LE(c,u){return c[u]|c[u+1]<<8|c[u+2]<<16|c[u+3]<<24}}return sl.TracePayloadDecoder=i,sl}var al={},Og;function oE(){if(Og)return al;Og=1,Object.defineProperty(al,"__esModule",{value:!0}),al.GroupTextPayloadDecoder=void 0;const n=dr(),s=Q0(),i=Cn();class l{static decode(u,p){try{if(u.length<3){const R={type:n.PayloadType.GroupText,version:n.PayloadVersion.Version1,isValid:!1,errors:["GroupText payload too short (need at least channel_hash(1) + MAC(2))"],channelHash:"",cipherMac:"",ciphertext:"",ciphertextLength:0};return p!=null&&p.includeSegments&&(R.segments=[{name:"Invalid GroupText Data",description:"GroupText payload too short (minimum 3 bytes required)",startByte:p.segmentOffset||0,endByte:(p.segmentOffset||0)+u.length-1,value:(0,i.bytesToHex)(u)}]),R}const d=[],g=(p==null?void 0:p.segmentOffset)||0;let m=0;const x=(0,i.byteToHex)(u[m]);p!=null&&p.includeSegments&&d.push({name:"Channel Hash",description:"First byte of SHA256 of channel's shared key",startByte:g+m,endByte:g+m,value:x}),m+=1;const A=(0,i.bytesToHex)(u.subarray(m,m+2));p!=null&&p.includeSegments&&d.push({name:"Cipher MAC",description:"MAC for encrypted data",startByte:g+m,endByte:g+m+1,value:A}),m+=2;const b=(0,i.bytesToHex)(u.subarray(m));p!=null&&p.includeSegments&&u.length>m&&d.push({name:"Ciphertext",description:"Encrypted message content (timestamp + flags + message)",startByte:g+m,endByte:g+u.length-1,value:b});const k={type:n.PayloadType.GroupText,version:n.PayloadVersion.Version1,isValid:!0,channelHash:x,cipherMac:A,ciphertext:b,ciphertextLength:u.length-3};if(p!=null&&p.keyStore&&p.keyStore.hasChannelKey(x)){const R=p.keyStore.getChannelKeys(x);for(const C of R){const w=s.ChannelCrypto.decryptGroupTextMessage(b,A,C);if(w.success&&w.data){k.decrypted={timestamp:w.data.timestamp,flags:w.data.flags,sender:w.data.sender,message:w.data.message};break}}}return p!=null&&p.includeSegments&&(k.segments=d),k}catch(d){return{type:n.PayloadType.GroupText,version:n.PayloadVersion.Version1,isValid:!1,errors:[d instanceof Error?d.message:"Failed to decode GroupText payload"],channelHash:"",cipherMac:"",ciphertext:"",ciphertextLength:0}}}}return al.GroupTextPayloadDecoder=l,al}var ll={},jg;function sE(){if(jg)return ll;jg=1,Object.defineProperty(ll,"__esModule",{value:!0}),ll.RequestPayloadDecoder=void 0;const n=dr(),s=Cn();class i{static decode(c,u){try{if(c.length<4){const R={type:n.PayloadType.Request,version:n.PayloadVersion.Version1,isValid:!1,errors:["Request payload too short (minimum 4 bytes: dest hash + source hash + MAC)"],timestamp:0,requestType:n.RequestType.GetStats,requestData:"",destinationHash:"",sourceHash:"",cipherMac:"",ciphertext:""};return u!=null&&u.includeSegments&&(R.segments=[{name:"Invalid Request Data",description:"Request payload too short (minimum 4 bytes required: 1 for dest hash + 1 for source hash + 2 for MAC)",startByte:u.segmentOffset||0,endByte:(u.segmentOffset||0)+c.length-1,value:(0,s.bytesToHex)(c)}]),R}const p=[],d=(u==null?void 0:u.segmentOffset)||0;let g=0;const m=(0,s.bytesToHex)(c.subarray(g,g+1));u!=null&&u.includeSegments&&p.push({name:"Destination Hash",description:`First byte of destination node public key: 0x${m}`,startByte:d+g,endByte:d+g,value:m}),g+=1;const x=(0,s.bytesToHex)(c.subarray(g,g+1));u!=null&&u.includeSegments&&p.push({name:"Source Hash",description:`First byte of source node public key: 0x${x}`,startByte:d+g,endByte:d+g,value:x}),g+=1;const A=(0,s.bytesToHex)(c.subarray(g,g+2));u!=null&&u.includeSegments&&p.push({name:"Cipher MAC",description:"MAC for encrypted data verification (2 bytes)",startByte:d+g,endByte:d+g+1,value:A}),g+=2;const b=(0,s.bytesToHex)(c.subarray(g));u!=null&&u.includeSegments&&c.length>g&&p.push({name:"Ciphertext",description:`Encrypted message data (${c.length-g} bytes). Contains encrypted plaintext with this structure:
 Timestamp (4 bytes) - send time as unix timestamp
 Request Type (1 byte) - type of request (GetStats, GetTelemetryData, etc.)
 Request Data (remaining bytes) - additional request-specific data`,startByte:d+g,endByte:d+c.length-1,value:b});const k={type:n.PayloadType.Request,version:n.PayloadVersion.Version1,isValid:!0,timestamp:0,requestType:n.RequestType.GetStats,requestData:"",destinationHash:m,sourceHash:x,cipherMac:A,ciphertext:b};return u!=null&&u.includeSegments&&(k.segments=p),k}catch(p){return{type:n.PayloadType.Request,version:n.PayloadVersion.Version1,isValid:!1,errors:[p instanceof Error?p.message:"Failed to decode request payload"],timestamp:0,requestType:n.RequestType.GetStats,requestData:"",destinationHash:"",sourceHash:"",cipherMac:"",ciphertext:""}}}}return ll.RequestPayloadDecoder=i,ll}var cl={},zg;function aE(){if(zg)return cl;zg=1,Object.defineProperty(cl,"__esModule",{value:!0}),cl.ResponsePayloadDecoder=void 0;const n=dr(),s=Cn();class i{static decode(c,u){try{if(c.length<4){const R={type:n.PayloadType.Response,version:n.PayloadVersion.Version1,isValid:!1,errors:["Response payload too short (minimum 4 bytes: dest + source + MAC)"],destinationHash:"",sourceHash:"",cipherMac:"",ciphertext:"",ciphertextLength:0};return u!=null&&u.includeSegments&&(R.segments=[{name:"Invalid Response Data",description:"Response payload too short (minimum 4 bytes required)",startByte:u.segmentOffset||0,endByte:(u.segmentOffset||0)+c.length-1,value:(0,s.bytesToHex)(c)}]),R}const p=[],d=(u==null?void 0:u.segmentOffset)||0;let g=0;const m=(0,s.byteToHex)(c[g]);u!=null&&u.includeSegments&&p.push({name:"Destination Hash",description:"First byte of destination node public key",startByte:d+g,endByte:d+g,value:m}),g+=1;const x=(0,s.byteToHex)(c[g]);u!=null&&u.includeSegments&&p.push({name:"Source Hash",description:"First byte of source node public key",startByte:d+g,endByte:d+g,value:x}),g+=1;const A=(0,s.bytesToHex)(c.subarray(g,g+2));u!=null&&u.includeSegments&&p.push({name:"Cipher MAC",description:"MAC for encrypted data in next field",startByte:d+g,endByte:d+g+1,value:A}),g+=2;const b=(0,s.bytesToHex)(c.subarray(g));u!=null&&u.includeSegments&&c.length>g&&p.push({name:"Ciphertext",description:"Encrypted response data (tag + content)",startByte:d+g,endByte:d+c.length-1,value:b});const k={type:n.PayloadType.Response,version:n.PayloadVersion.Version1,isValid:!0,destinationHash:m,sourceHash:x,cipherMac:A,ciphertext:b,ciphertextLength:c.length-4};return u!=null&&u.includeSegments&&(k.segments=p),k}catch(p){return{type:n.PayloadType.Response,version:n.PayloadVersion.Version1,isValid:!1,errors:[p instanceof Error?p.message:"Failed to decode response payload"],destinationHash:"",sourceHash:"",cipherMac:"",ciphertext:"",ciphertextLength:0}}}}return cl.ResponsePayloadDecoder=i,cl}var ul={},Hg;function lE(){if(Hg)return ul;Hg=1,Object.defineProperty(ul,"__esModule",{value:!0}),ul.AnonRequestPayloadDecoder=void 0;const n=dr(),s=Cn();class i{static decode(c,u){try{if(c.length<35){const R={type:n.PayloadType.AnonRequest,version:n.PayloadVersion.Version1,isValid:!1,errors:["AnonRequest payload too short (minimum 35 bytes: dest + public key + MAC)"],destinationHash:"",senderPublicKey:"",cipherMac:"",ciphertext:"",ciphertextLength:0};return u!=null&&u.includeSegments&&(R.segments=[{name:"Invalid AnonRequest Data",description:"AnonRequest payload too short (minimum 35 bytes required: 1 for dest hash + 32 for public key + 2 for MAC)",startByte:u.segmentOffset||0,endByte:(u.segmentOffset||0)+c.length-1,value:(0,s.bytesToHex)(c)}]),R}const p=[],d=(u==null?void 0:u.segmentOffset)||0;let g=0;const m=(0,s.byteToHex)(c[0]);u!=null&&u.includeSegments&&p.push({name:"Destination Hash",description:`First byte of destination node public key: 0x${m}`,startByte:d+g,endByte:d+g,value:m}),g+=1;const x=(0,s.bytesToHex)(c.subarray(1,33));u!=null&&u.includeSegments&&p.push({name:"Sender Public Key",description:"Ed25519 public key of the sender (32 bytes)",startByte:d+g,endByte:d+g+31,value:x}),g+=32;const A=(0,s.bytesToHex)(c.subarray(33,35));u!=null&&u.includeSegments&&p.push({name:"Cipher MAC",description:"MAC for encrypted data verification (2 bytes)",startByte:d+g,endByte:d+g+1,value:A}),g+=2;const b=(0,s.bytesToHex)(c.subarray(35));u!=null&&u.includeSegments&&c.length>35&&p.push({name:"Ciphertext",description:`Encrypted message data (${c.length-35} bytes). Contains encrypted plaintext with this structure:
 Timestamp (4 bytes) - send time as unix timestamp
 Sync Timestamp (4 bytes) - room server only, sender's "sync messages SINCE x" timestamp  
 Password (remaining bytes) - password for repeater/room`,startByte:d+g,endByte:d+c.length-1,value:b});const k={type:n.PayloadType.AnonRequest,version:n.PayloadVersion.Version1,isValid:!0,destinationHash:m,senderPublicKey:x,cipherMac:A,ciphertext:b,ciphertextLength:c.length-35};return u!=null&&u.includeSegments&&(k.segments=p),k}catch(p){return{type:n.PayloadType.AnonRequest,version:n.PayloadVersion.Version1,isValid:!1,errors:[p instanceof Error?p.message:"Failed to decode AnonRequest payload"],destinationHash:"",senderPublicKey:"",cipherMac:"",ciphertext:"",ciphertextLength:0}}}}return ul.AnonRequestPayloadDecoder=i,ul}var dl={},Vg;function cE(){if(Vg)return dl;Vg=1,Object.defineProperty(dl,"__esModule",{value:!0}),dl.AckPayloadDecoder=void 0;const n=dr(),s=Cn();class i{static decode(c,u){try{if(c.length<4){const x={type:n.PayloadType.Ack,version:n.PayloadVersion.Version1,isValid:!1,errors:["Ack payload too short (minimum 4 bytes for checksum)"],checksum:""};return u!=null&&u.includeSegments&&(x.segments=[{name:"Invalid Ack Data",description:"Ack payload too short (minimum 4 bytes required for checksum)",startByte:u.segmentOffset||0,endByte:(u.segmentOffset||0)+c.length-1,value:(0,s.bytesToHex)(c)}]),x}const p=[],d=(u==null?void 0:u.segmentOffset)||0,g=(0,s.bytesToHex)(c.subarray(0,4));u!=null&&u.includeSegments&&p.push({name:"Checksum",description:`CRC checksum of message timestamp, text, and sender pubkey: 0x${g}`,startByte:d,endByte:d+3,value:g}),u!=null&&u.includeSegments&&c.length>4&&p.push({name:"Additional Data",description:"Extra data in Ack payload",startByte:d+4,endByte:d+c.length-1,value:(0,s.bytesToHex)(c.subarray(4))});const m={type:n.PayloadType.Ack,version:n.PayloadVersion.Version1,isValid:!0,checksum:g};return u!=null&&u.includeSegments&&(m.segments=p),m}catch(p){return{type:n.PayloadType.Ack,version:n.PayloadVersion.Version1,isValid:!1,errors:[p instanceof Error?p.message:"Failed to decode Ack payload"],checksum:""}}}}return dl.AckPayloadDecoder=i,dl}var fl={},Ug;function uE(){if(Ug)return fl;Ug=1,Object.defineProperty(fl,"__esModule",{value:!0}),fl.PathPayloadDecoder=void 0;const n=dr(),s=Cn();class i{static decode(c){try{if(c.length<2)return{type:n.PayloadType.Path,version:n.PayloadVersion.Version1,isValid:!1,errors:["Path payload too short (minimum 2 bytes: path length + extra type)"],pathLength:0,pathHashes:[],extraType:0,extraData:""};const u=c[0];if(c.length<1+u+1)return{type:n.PayloadType.Path,version:n.PayloadVersion.Version1,isValid:!1,errors:[`Path payload too short (need ${1+u+1} bytes for path length + path + extra type)`],pathLength:u,pathHashes:[],extraType:0,extraData:""};const p=[];for(let m=0;m<u;m++)p.push((0,s.byteToHex)(c[1+m]));const d=c[1+u];let g="";return c.length>1+u+1&&(g=(0,s.bytesToHex)(c.subarray(1+u+1))),{type:n.PayloadType.Path,version:n.PayloadVersion.Version1,isValid:!0,pathLength:u,pathHashes:p,extraType:d,extraData:g}}catch(u){return{type:n.PayloadType.Path,version:n.PayloadVersion.Version1,isValid:!1,errors:[u instanceof Error?u.message:"Failed to decode Path payload"],pathLength:0,pathHashes:[],extraType:0,extraData:""}}}}return fl.PathPayloadDecoder=i,fl}var hl={},Zg;function dE(){if(Zg)return hl;Zg=1,Object.defineProperty(hl,"__esModule",{value:!0}),hl.TextMessagePayloadDecoder=void 0;const n=dr(),s=Cn();class i{static decode(c,u){try{if(c.length<4){const R={type:n.PayloadType.TextMessage,version:n.PayloadVersion.Version1,isValid:!1,errors:["TextMessage payload too short (minimum 4 bytes: dest + source + MAC)"],destinationHash:"",sourceHash:"",cipherMac:"",ciphertext:"",ciphertextLength:0};return u!=null&&u.includeSegments&&(R.segments=[{name:"Invalid TextMessage Data",description:"TextMessage payload too short (minimum 4 bytes required)",startByte:u.segmentOffset||0,endByte:(u.segmentOffset||0)+c.length-1,value:(0,s.bytesToHex)(c)}]),R}const p=[],d=(u==null?void 0:u.segmentOffset)||0;let g=0;const m=(0,s.byteToHex)(c[g]);u!=null&&u.includeSegments&&p.push({name:"Destination Hash",description:"First byte of destination node public key",startByte:d+g,endByte:d+g,value:m}),g+=1;const x=(0,s.byteToHex)(c[g]);u!=null&&u.includeSegments&&p.push({name:"Source Hash",description:"First byte of source node public key",startByte:d+g,endByte:d+g,value:x}),g+=1;const A=(0,s.bytesToHex)(c.subarray(g,g+2));u!=null&&u.includeSegments&&p.push({name:"Cipher MAC",description:"MAC for encrypted data in next field",startByte:d+g,endByte:d+g+1,value:A}),g+=2;const b=(0,s.bytesToHex)(c.subarray(g));u!=null&&u.includeSegments&&c.length>g&&p.push({name:"Ciphertext",description:"Encrypted message data (timestamp + message text)",startByte:d+g,endByte:d+c.length-1,value:b});const k={type:n.PayloadType.TextMessage,version:n.PayloadVersion.Version1,isValid:!0,destinationHash:m,sourceHash:x,cipherMac:A,ciphertext:b,ciphertextLength:c.length-4};return u!=null&&u.includeSegments&&(k.segments=p),k}catch(p){return{type:n.PayloadType.TextMessage,version:n.PayloadVersion.Version1,isValid:!1,errors:[p instanceof Error?p.message:"Failed to decode TextMessage payload"],destinationHash:"",sourceHash:"",cipherMac:"",ciphertext:"",ciphertextLength:0}}}}return hl.TextMessagePayloadDecoder=i,hl}var pl={},Wg;function fE(){if(Wg)return pl;Wg=1,Object.defineProperty(pl,"__esModule",{value:!0}),pl.ControlPayloadDecoder=void 0;const n=dr(),s=Cn(),i=_l();class l{static decode(u,p){try{if(u.length<1)return this.createErrorPayload("Control payload too short (minimum 1 byte required)",u,p);const g=u[0]&240;switch(g){case n.ControlSubType.NodeDiscoverReq:return this.decodeDiscoverReq(u,p);case n.ControlSubType.NodeDiscoverResp:return this.decodeDiscoverResp(u,p);default:return this.createErrorPayload(`Unknown control sub-type: 0x${g.toString(16).padStart(2,"0")}`,u,p)}}catch(d){return this.createErrorPayload(d instanceof Error?d.message:"Failed to decode control payload",u,p)}}static decodeDiscoverReq(u,p){const d=[],g=(p==null?void 0:p.segmentOffset)??0;if(u.length<6){const S={type:n.PayloadType.Control,version:n.PayloadVersion.Version1,isValid:!1,errors:["DISCOVER_REQ payload too short (minimum 6 bytes required)"],subType:n.ControlSubType.NodeDiscoverReq,rawFlags:u[0],prefixOnly:!1,typeFilter:0,typeFilterNames:[],tag:0,since:0};return p!=null&&p.includeSegments&&(S.segments=[{name:"Invalid DISCOVER_REQ Data",description:"DISCOVER_REQ payload too short (minimum 6 bytes required)",startByte:g,endByte:g+u.length-1,value:(0,s.bytesToHex)(u)}]),S}let m=0;const x=u[m],A=(x&1)!==0;p!=null&&p.includeSegments&&d.push({name:"Flags",description:`Sub-type: DISCOVER_REQ (0x8) | Prefix Only: ${A}`,startByte:g+m,endByte:g+m,value:x.toString(16).padStart(2,"0").toUpperCase()}),m+=1;const b=u[m],k=this.parseTypeFilter(b);p!=null&&p.includeSegments&&d.push({name:"Type Filter",description:`Filter mask: 0b${b.toString(2).padStart(8,"0")} | Types: ${k.length>0?k.join(", "):"None"}`,startByte:g+m,endByte:g+m,value:b.toString(16).padStart(2,"0").toUpperCase()}),m+=1;const R=this.readUint32LE(u,m);p!=null&&p.includeSegments&&d.push({name:"Tag",description:`Random tag for response matching: 0x${R.toString(16).padStart(8,"0")}`,startByte:g+m,endByte:g+m+3,value:(0,s.bytesToHex)(u.slice(m,m+4))}),m+=4;let C=0;if(u.length>=m+4&&(C=this.readUint32LE(u,m),p!=null&&p.includeSegments)){const S=C>0?new Date(C*1e3).toISOString().slice(0,19)+"Z":"N/A";d.push({name:"Since",description:`Filter timestamp: ${C} (${S})`,startByte:g+m,endByte:g+m+3,value:(0,s.bytesToHex)(u.slice(m,m+4))})}const w={type:n.PayloadType.Control,version:n.PayloadVersion.Version1,isValid:!0,subType:n.ControlSubType.NodeDiscoverReq,rawFlags:x,prefixOnly:A,typeFilter:b,typeFilterNames:k,tag:R,since:C};return p!=null&&p.includeSegments&&(w.segments=d),w}static decodeDiscoverResp(u,p){const d=[],g=(p==null?void 0:p.segmentOffset)??0;if(u.length<14){const H={type:n.PayloadType.Control,version:n.PayloadVersion.Version1,isValid:!1,errors:["DISCOVER_RESP payload too short (minimum 14 bytes required)"],subType:n.ControlSubType.NodeDiscoverResp,rawFlags:u.length>0?u[0]:0,nodeType:n.DeviceRole.Unknown,nodeTypeName:"Unknown",snr:0,tag:0,publicKey:"",publicKeyLength:0};return p!=null&&p.includeSegments&&(H.segments=[{name:"Invalid DISCOVER_RESP Data",description:"DISCOVER_RESP payload too short (minimum 14 bytes required)",startByte:g,endByte:g+u.length-1,value:(0,s.bytesToHex)(u)}]),H}let m=0;const x=u[m],A=x&15,b=(0,i.getDeviceRoleName)(A);p!=null&&p.includeSegments&&d.push({name:"Flags",description:`Sub-type: DISCOVER_RESP (0x9) | Node Type: ${b}`,startByte:g+m,endByte:g+m,value:x.toString(16).padStart(2,"0").toUpperCase()}),m+=1;const k=u[m],R=k>127?k-256:k,C=R/4;p!=null&&p.includeSegments&&d.push({name:"SNR",description:`Inbound SNR: ${C.toFixed(2)} dB (raw: ${k}, signed: ${R})`,startByte:g+m,endByte:g+m,value:k.toString(16).padStart(2,"0").toUpperCase()}),m+=1;const w=this.readUint32LE(u,m);p!=null&&p.includeSegments&&d.push({name:"Tag",description:`Reflected tag from request: 0x${w.toString(16).padStart(8,"0")}`,startByte:g+m,endByte:g+m+3,value:(0,s.bytesToHex)(u.slice(m,m+4))}),m+=4;const P=u.length-m,N=u.slice(m,m+P),F=(0,s.bytesToHex)(N);if(p!=null&&p.includeSegments){const H=P===32?"Full Public Key":"Public Key Prefix";d.push({name:H,description:`${H} (${P} bytes)`,startByte:g+m,endByte:g+m+P-1,value:F})}const M={type:n.PayloadType.Control,version:n.PayloadVersion.Version1,isValid:!0,subType:n.ControlSubType.NodeDiscoverResp,rawFlags:x,nodeType:A,nodeTypeName:b,snr:C,tag:w,publicKey:F,publicKeyLength:P};return p!=null&&p.includeSegments&&(M.segments=d),M}static parseTypeFilter(u){const p=[];return u&1<<n.DeviceRole.ChatNode&&p.push("Chat"),u&1<<n.DeviceRole.Repeater&&p.push("Repeater"),u&1<<n.DeviceRole.RoomServer&&p.push("Room"),u&1<<n.DeviceRole.Sensor&&p.push("Sensor"),p}static createErrorPayload(u,p,d){const g={type:n.PayloadType.Control,version:n.PayloadVersion.Version1,isValid:!1,errors:[u],subType:n.ControlSubType.NodeDiscoverReq,rawFlags:p.length>0?p[0]:0,prefixOnly:!1,typeFilter:0,typeFilterNames:[],tag:0,since:0};return d!=null&&d.includeSegments&&(g.segments=[{name:"Invalid Control Data",description:u,startByte:d.segmentOffset??0,endByte:(d.segmentOffset??0)+p.length-1,value:(0,s.bytesToHex)(p)}]),g}static readUint32LE(u,p){return(u[p]|u[p+1]<<8|u[p+2]<<16|u[p+3]<<24)>>>0}}return pl.ControlPayloadDecoder=l,pl}var qg;function Gg(){if(qg)return nl;qg=1,Object.defineProperty(nl,"__esModule",{value:!0}),nl.MeshCorePacketDecoder=void 0;const n=dr(),s=Cn(),i=_l(),l=tv(),c=rE(),u=iE(),p=oE(),d=sE(),g=aE(),m=lE(),x=cE(),A=uE(),b=dE(),k=fE();class R{static decode(w,S){return this.parseInternal(w,!1,S).packet}static async decodeWithVerification(w,S){return(await this.parseInternalAsync(w,!1,S)).packet}static analyzeStructure(w,S){return this.parseInternal(w,!0,S).structure}static async analyzeStructureWithVerification(w,S){return(await this.parseInternalAsync(w,!0,S)).structure}static parseInternal(w,S,P){const N=(0,s.hexToBytes)(w),F=[];if(N.length<2){const M={messageHash:"",routeType:n.RouteType.Flood,payloadType:n.PayloadType.RawCustom,payloadVersion:n.PayloadVersion.Version1,pathLength:0,path:null,payload:{raw:"",decoded:null},totalBytes:N.length,isValid:!1,errors:["Packet too short (minimum 2 bytes required)"]},H={segments:[],totalBytes:N.length,rawHex:w.toUpperCase(),messageHash:"",payload:{segments:[],hex:"",startByte:0,type:"Unknown"}};return{packet:M,structure:H}}try{let M=0;const H=N[0],U=H&3,j=H>>2&15,ee=H>>6&3;S&&F.push({name:"Header",description:"Header byte breakdown",startByte:0,endByte:0,value:`0x${H.toString(16).padStart(2,"0")}`,headerBreakdown:{fullBinary:H.toString(2).padStart(8,"0"),fields:[{bits:"0-1",field:"Route Type",value:(0,i.getRouteTypeName)(U),binary:(H&3).toString(2).padStart(2,"0")},{bits:"2-5",field:"Payload Type",value:(0,i.getPayloadTypeName)(j),binary:(H>>2&15).toString(2).padStart(4,"0")},{bits:"6-7",field:"Version",value:ee.toString(),binary:(H>>6&3).toString(2).padStart(2,"0")}]}}),M=1;let Z;if(U===n.RouteType.TransportFlood||U===n.RouteType.TransportDirect){if(N.length<M+4)throw new Error("Packet too short for transport codes");const T=N[M]|N[M+1]<<8,z=N[M+2]|N[M+3]<<8;if(Z=[T,z],S){const q=N[M]|N[M+1]<<8|N[M+2]<<16|N[M+3]<<24;F.push({name:"Transport Code",description:"Used for Direct/Response routing",startByte:M,endByte:M+3,value:`0x${q.toString(16).padStart(8,"0")}`})}M+=4}if(N.length<M+1)throw new Error("Packet too short for path length");const Y=N[M];if(S){let T=`Path contains ${Y} bytes`;U===n.RouteType.Direct||U===n.RouteType.TransportDirect?T=`For "Direct" packets, this contains routing instructions. ${Y} bytes of routing instructions (decreases as packet travels)`:(U===n.RouteType.Flood||U===n.RouteType.TransportFlood)&&(T=`${Y} bytes showing route taken (increases as packet floods)`),F.push({name:"Path Length",description:T,startByte:M,endByte:M,value:`0x${Y.toString(16).padStart(2,"0")}`})}if(M+=1,N.length<M+Y)throw new Error("Packet too short for path data");const te=N.subarray(M,M+Y),K=Y>0?Array.from(te).map(s.byteToHex):null;if(S&&Y>0)if(j===n.PayloadType.Trace){const T=[];for(let z=0;z<Y;z++){const q=N[M+z],ue=(q>127?q-256:q)/4;T.push(`${ue.toFixed(2)}dB (0x${q.toString(16).padStart(2,"0")})`)}F.push({name:"Path SNR Data",description:`SNR values collected during trace: ${T.join(", ")}`,startByte:M,endByte:M+Y-1,value:(0,s.bytesToHex)(N.slice(M,M+Y))})}else{let T="Routing path information";U===n.RouteType.Direct||U===n.RouteType.TransportDirect?T="Routing instructions (bytes are stripped at each hop as packet travels to destination)":(U===n.RouteType.Flood||U===n.RouteType.TransportFlood)&&(T="Historical route taken (bytes are added as packet floods through network)"),F.push({name:"Path Data",description:T,startByte:M,endByte:M+Y-1,value:(0,s.bytesToHex)(N.slice(M,M+Y))})}M+=Y;const ae=N.subarray(M),Ae=(0,s.bytesToHex)(ae);S&&N.length>M&&F.push({name:"Payload",description:`${(0,i.getPayloadTypeName)(j)} payload data`,startByte:M,endByte:N.length-1,value:(0,s.bytesToHex)(N.slice(M))});let G=null;const se=[];if(j===n.PayloadType.Advert){const T=c.AdvertPayloadDecoder.decode(ae,{includeSegments:S,segmentOffset:0});G=T,T!=null&&T.segments&&(se.push(...T.segments),delete T.segments)}else if(j===n.PayloadType.Trace){const T=u.TracePayloadDecoder.decode(ae,K,{includeSegments:S,segmentOffset:0});G=T,T!=null&&T.segments&&(se.push(...T.segments),delete T.segments)}else if(j===n.PayloadType.GroupText){const T=p.GroupTextPayloadDecoder.decode(ae,{...P,includeSegments:S,segmentOffset:0});G=T,T!=null&&T.segments&&(se.push(...T.segments),delete T.segments)}else if(j===n.PayloadType.Request){const T=d.RequestPayloadDecoder.decode(ae,{includeSegments:S,segmentOffset:0});G=T,T!=null&&T.segments&&(se.push(...T.segments),delete T.segments)}else if(j===n.PayloadType.Response){const T=g.ResponsePayloadDecoder.decode(ae,{includeSegments:S,segmentOffset:0});G=T,T!=null&&T.segments&&(se.push(...T.segments),delete T.segments)}else if(j===n.PayloadType.AnonRequest){const T=m.AnonRequestPayloadDecoder.decode(ae,{includeSegments:S,segmentOffset:0});G=T,T!=null&&T.segments&&(se.push(...T.segments),delete T.segments)}else if(j===n.PayloadType.Ack){const T=x.AckPayloadDecoder.decode(ae,{includeSegments:S,segmentOffset:0});G=T,T!=null&&T.segments&&(se.push(...T.segments),delete T.segments)}else if(j===n.PayloadType.Path)G=A.PathPayloadDecoder.decode(ae);else if(j===n.PayloadType.TextMessage){const T=b.TextMessagePayloadDecoder.decode(ae,{includeSegments:S,segmentOffset:0});G=T,T!=null&&T.segments&&(se.push(...T.segments),delete T.segments)}else if(j===n.PayloadType.Control){const T=k.ControlPayloadDecoder.decode(ae,{includeSegments:S,segmentOffset:0});G=T,T!=null&&T.segments&&(se.push(...T.segments),delete T.segments)}S&&se.length===0&&N.length>M&&se.push({name:`${(0,i.getPayloadTypeName)(j)} Payload`,description:`Raw ${(0,i.getPayloadTypeName)(j)} payload data (${ae.length} bytes)`,startByte:0,endByte:ae.length-1,value:(0,s.bytesToHex)(ae)});const W=this.calculateMessageHash(N,U,j,ee),re={messageHash:W,routeType:U,payloadType:j,payloadVersion:ee,transportCodes:Z,pathLength:Y,path:K,payload:{raw:Ae,decoded:G},totalBytes:N.length,isValid:!0},V={segments:F,totalBytes:N.length,rawHex:w.toUpperCase(),messageHash:W,payload:{segments:se,hex:Ae,startByte:M,type:(0,i.getPayloadTypeName)(j)}};return{packet:re,structure:V}}catch(M){const H={messageHash:"",routeType:n.RouteType.Flood,payloadType:n.PayloadType.RawCustom,payloadVersion:n.PayloadVersion.Version1,pathLength:0,path:null,payload:{raw:"",decoded:null},totalBytes:N.length,isValid:!1,errors:[M instanceof Error?M.message:"Unknown decoding error"]},U={segments:[],totalBytes:N.length,rawHex:w.toUpperCase(),messageHash:"",payload:{segments:[],hex:"",startByte:0,type:"Unknown"}};return{packet:H,structure:U}}}static async parseInternalAsync(w,S,P){const N=this.parseInternal(w,S,P);if(N.packet.payloadType===n.PayloadType.Advert&&N.packet.payload.decoded)try{const F=N.packet.payload.decoded,M=await c.AdvertPayloadDecoder.decodeWithVerification((0,s.hexToBytes)(N.packet.payload.raw),{includeSegments:S,segmentOffset:0});M&&(N.packet.payload.decoded=M,M.isValid||(N.packet.isValid=!1,N.packet.errors=M.errors||["Invalid advertisement signature"]),S&&M.segments&&(N.structure.payload.segments=M.segments,delete M.segments))}catch(F){console.error("Signature verification failed:",F)}return N}static validate(w){const S=(0,s.hexToBytes)(w),P=[];if(S.length<2)return P.push("Packet too short (minimum 2 bytes required)"),{isValid:!1,errors:P};try{let N=1;const M=S[0]&3;if((M===n.RouteType.TransportFlood||M===n.RouteType.TransportDirect)&&(S.length<N+4&&P.push("Packet too short for transport codes"),N+=4),S.length<N+1)P.push("Packet too short for path length");else{const H=S[N];N+=1,S.length<N+H&&P.push("Packet too short for path data"),N+=H}N>=S.length&&P.push("No payload data found")}catch(N){P.push(N instanceof Error?N.message:"Validation error")}return{isValid:P.length===0,errors:P.length>0?P:void 0}}static calculateMessageHash(w,S,P,N){if(P===n.PayloadType.Trace&&w.length>=13){let ee=1;if((S===n.RouteType.TransportFlood||S===n.RouteType.TransportDirect)&&(ee+=4),w.length>ee){const Z=w[ee];ee+=1+Z}if(w.length>=ee+4){const Z=w[ee]|w[ee+1]<<8|w[ee+2]<<16|w[ee+3]<<24;return(0,s.numberToHex)(Z,8)}}const F=P<<2|N<<6;let M=1;if((S===n.RouteType.TransportFlood||S===n.RouteType.TransportDirect)&&(M+=4),w.length>M){const ee=w[M];M+=1+ee}const H=w.slice(M),U=[F,...Array.from(H)];let j=0;for(let ee=0;ee<U.length;ee++)j=(j<<5)-j+U[ee]&4294967295;return(0,s.numberToHex)(j,8)}static createKeyStore(w){return new l.MeshCoreKeyStore(w)}}return nl.MeshCorePacketDecoder=R,nl}var Xo={},$g;function Kg(){if($g)return Xo;$g=1,Object.defineProperty(Xo,"__esModule",{value:!0}),Xo.createAuthToken=c,Xo.verifyAuthToken=u,Xo.parseAuthToken=p,Xo.decodeAuthTokenPayload=d;const n=ah(),s=Cn();function i(g){let m="";if(typeof Buffer<"u")m=Buffer.from(g).toString("base64");else{const x=String.fromCharCode(...Array.from(g));m=btoa(x)}return m.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function l(g){let m=g.replace(/-/g,"+").replace(/_/g,"/");for(;m.length%4;)m+="=";if(typeof Buffer<"u")return new Uint8Array(Buffer.from(m,"base64"));{const x=atob(m),A=new Uint8Array(x.length);for(let b=0;b<x.length;b++)A[b]=x.charCodeAt(b);return A}}async function c(g,m,x){const A={alg:"Ed25519",typ:"JWT"};g.publicKey?g.publicKey=g.publicKey.toUpperCase():g.publicKey=x.toUpperCase(),g.iat||(g.iat=Math.floor(Date.now()/1e3));const b=JSON.stringify(A),k=JSON.stringify(g),R=new TextEncoder().encode(b),C=new TextEncoder().encode(k),w=i(R),S=i(C),P=`${w}.${S}`,N=new TextEncoder().encode(P),F=(0,s.bytesToHex)(N),M=await(0,n.sign)(F,m,g.publicKey);return`${w}.${S}.${M}`}async function u(g,m){try{const x=g.split(".");if(x.length!==3)return null;const[A,b,k]=x,R=l(A),C=l(b),w=new TextDecoder().decode(R),S=new TextDecoder().decode(C),P=JSON.parse(w),N=JSON.parse(S);if(P.alg!=="Ed25519"||P.typ!=="JWT"||!N.publicKey||!N.iat||m&&N.publicKey.toUpperCase()!==m.toUpperCase()||N.exp&&Math.floor(Date.now()/1e3)>N.exp)return null;const F=`${A}.${b}`,M=new TextEncoder().encode(F),H=(0,s.bytesToHex)(M);return await(0,n.verify)(k,H,N.publicKey)?N:null}catch{return null}}function p(g){try{const m=g.split(".");return m.length!==3?null:{header:m[0],payload:m[1],signature:m[2]}}catch{return null}}function d(g){try{const m=g.split(".");if(m.length!==3)return null;const x=l(m[1]),A=new TextDecoder().decode(x);return JSON.parse(A)}catch{return null}}return Xo}var Qg;function hE(){return Qg||(Qg=1,(function(n){var s=Si&&Si.__createBinding||(Object.create?(function(S,P,N,F){F===void 0&&(F=N);var M=Object.getOwnPropertyDescriptor(P,N);(!M||("get"in M?!P.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return P[N]}}),Object.defineProperty(S,F,M)}):(function(S,P,N,F){F===void 0&&(F=N),S[F]=P[N]})),i=Si&&Si.__setModuleDefault||(Object.create?(function(S,P){Object.defineProperty(S,"default",{enumerable:!0,value:P})}):function(S,P){S.default=P}),l=Si&&Si.__importStar||(function(){var S=function(P){return S=Object.getOwnPropertyNames||function(N){var F=[];for(var M in N)Object.prototype.hasOwnProperty.call(N,M)&&(F[F.length]=M);return F},S(P)};return function(P){if(P&&P.__esModule)return P;var N={};if(P!=null)for(var F=S(P),M=0;M<F.length;M++)F[M]!=="default"&&s(N,P,F[M]);return i(N,P),N}})();Object.defineProperty(n,"__esModule",{value:!0}),n.Utils=n.decodeAuthTokenPayload=n.parseAuthToken=n.verifyAuthToken=n.createAuthToken=n.getControlSubTypeName=n.getRequestTypeName=n.getDeviceRoleName=n.getPayloadVersionName=n.getPayloadTypeName=n.getRouteTypeName=n.numberToHex=n.byteToHex=n.bytesToHex=n.hexToBytes=n.Ed25519SignatureVerifier=n.ChannelCrypto=n.MeshCoreKeyStore=n.ControlSubType=n.RequestType=n.AdvertFlags=n.DeviceRole=n.PayloadVersion=n.PayloadType=n.RouteType=n.MeshCoreDecoder=n.MeshCorePacketDecoder=void 0;var c=Gg();Object.defineProperty(n,"MeshCorePacketDecoder",{enumerable:!0,get:function(){return c.MeshCorePacketDecoder}});var u=Gg();Object.defineProperty(n,"MeshCoreDecoder",{enumerable:!0,get:function(){return u.MeshCorePacketDecoder}});var p=dr();Object.defineProperty(n,"RouteType",{enumerable:!0,get:function(){return p.RouteType}}),Object.defineProperty(n,"PayloadType",{enumerable:!0,get:function(){return p.PayloadType}}),Object.defineProperty(n,"PayloadVersion",{enumerable:!0,get:function(){return p.PayloadVersion}}),Object.defineProperty(n,"DeviceRole",{enumerable:!0,get:function(){return p.DeviceRole}}),Object.defineProperty(n,"AdvertFlags",{enumerable:!0,get:function(){return p.AdvertFlags}}),Object.defineProperty(n,"RequestType",{enumerable:!0,get:function(){return p.RequestType}}),Object.defineProperty(n,"ControlSubType",{enumerable:!0,get:function(){return p.ControlSubType}});var d=tv();Object.defineProperty(n,"MeshCoreKeyStore",{enumerable:!0,get:function(){return d.MeshCoreKeyStore}});var g=Q0();Object.defineProperty(n,"ChannelCrypto",{enumerable:!0,get:function(){return g.ChannelCrypto}});var m=gv();Object.defineProperty(n,"Ed25519SignatureVerifier",{enumerable:!0,get:function(){return m.Ed25519SignatureVerifier}});var x=Cn();Object.defineProperty(n,"hexToBytes",{enumerable:!0,get:function(){return x.hexToBytes}}),Object.defineProperty(n,"bytesToHex",{enumerable:!0,get:function(){return x.bytesToHex}}),Object.defineProperty(n,"byteToHex",{enumerable:!0,get:function(){return x.byteToHex}}),Object.defineProperty(n,"numberToHex",{enumerable:!0,get:function(){return x.numberToHex}});var A=_l();Object.defineProperty(n,"getRouteTypeName",{enumerable:!0,get:function(){return A.getRouteTypeName}}),Object.defineProperty(n,"getPayloadTypeName",{enumerable:!0,get:function(){return A.getPayloadTypeName}}),Object.defineProperty(n,"getPayloadVersionName",{enumerable:!0,get:function(){return A.getPayloadVersionName}}),Object.defineProperty(n,"getDeviceRoleName",{enumerable:!0,get:function(){return A.getDeviceRoleName}}),Object.defineProperty(n,"getRequestTypeName",{enumerable:!0,get:function(){return A.getRequestTypeName}}),Object.defineProperty(n,"getControlSubTypeName",{enumerable:!0,get:function(){return A.getControlSubTypeName}});var b=Kg();Object.defineProperty(n,"createAuthToken",{enumerable:!0,get:function(){return b.createAuthToken}}),Object.defineProperty(n,"verifyAuthToken",{enumerable:!0,get:function(){return b.verifyAuthToken}}),Object.defineProperty(n,"parseAuthToken",{enumerable:!0,get:function(){return b.parseAuthToken}}),Object.defineProperty(n,"decodeAuthTokenPayload",{enumerable:!0,get:function(){return b.decodeAuthTokenPayload}});const k=l(_l()),R=l(Cn()),C=l(Kg()),w=ah();n.Utils={...k,...R,...C,derivePublicKey:w.derivePublicKey,validateKeyPair:w.validateKeyPair,sign:w.sign,verify:w.verify}})(Si)),Si}var yt=hE();function pE(n){return new Date(n*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}function mE(n){const s=[];return n.snr!==null&&n.snr!==void 0&&s.push(`SNR: ${n.snr.toFixed(1)} dB`),n.rssi!==null&&n.rssi!==void 0&&s.push(`RSSI: ${n.rssi} dBm`),s.join(" | ")}function gE(n,s){var i;try{const l=yt.MeshCoreDecoder.decode(n);if(!l.isValid)return{summary:"Invalid packet",routeType:"Unknown"};const c=yt.Utils.getRouteTypeName(l.routeType),u=yt.Utils.getPayloadTypeName(l.payloadType),p=l.path&&l.path.length>0?` via ${l.path.join("-")}`:"";let d=u,g;switch(l.payloadType){case yt.PayloadType.TextMessage:{const m=l.payload.decoded;m!=null&&m.sourceHash&&(m!=null&&m.destinationHash)?d=`DM from ${m.sourceHash} to ${m.destinationHash}${p}`:d=`DM${p}`;break}case yt.PayloadType.GroupText:{const m=l.payload.decoded;s!=null&&s.channel_name?s.sender?d=`GT from ${s.sender} in ${s.channel_name}${p}`:d=`GT in ${s.channel_name}${p}`:m!=null&&m.channelHash?d=`GT ch:${m.channelHash}${p}`:d=`GroupText${p}`;break}case yt.PayloadType.Advert:{const m=l.payload.decoded;if((i=m==null?void 0:m.appData)!=null&&i.name){const x=m.appData.deviceRole!==void 0?yt.Utils.getDeviceRoleName(m.appData.deviceRole):"";d=`Advert: ${m.appData.name}${x?` (${x})`:""}${p}`}else m!=null&&m.publicKey?d=`Advert: ${m.publicKey.slice(0,8)}...${p}`:d=`Advert${p}`;break}case yt.PayloadType.Ack:{d=`ACK${p}`;break}case yt.PayloadType.Request:{d=`Request${p}`;break}case yt.PayloadType.Response:{d=`Response${p}`;break}case yt.PayloadType.Trace:{d=`Trace${p}`;break}case yt.PayloadType.Path:{d=`Path${p}`;break}default:d=`${u}${p}`}return{summary:d,routeType:c,details:g}}catch{return{summary:"Decode error",routeType:"Unknown"}}}function xE(n){switch(n){case"Flood":return"bg-blue-500/20 text-blue-400";case"Direct":return"bg-green-500/20 text-green-400";case"Transport Flood":return"bg-purple-500/20 text-purple-400";case"Transport Direct":return"bg-orange-500/20 text-orange-400";default:return"bg-gray-500/20 text-gray-400"}}function AE(n){switch(n){case"Flood":return"F";case"Direct":return"D";case"Transport Flood":return"TF";case"Transport Direct":return"TD";default:return"?"}}function k0({packets:n}){const s=D.useRef(null),i=D.useMemo(()=>n.map(c=>({packet:c,decoded:gE(c.data,c.decrypted_info)})),[n]);if(D.useEffect(()=>{s.current&&(s.current.scrollTop=s.current.scrollHeight)},[n]),n.length===0)return _.jsx("div",{className:"h-full overflow-y-auto p-5 text-center text-muted-foreground",children:"No packets received yet. Packets will appear here in real-time."});const l=[...i].sort((c,u)=>c.packet.timestamp-u.packet.timestamp);return _.jsx("div",{className:"h-full overflow-y-auto p-4 flex flex-col gap-3",ref:s,children:l.map(({packet:c,decoded:u})=>_.jsxs("div",{className:"py-2 px-3 bg-muted rounded",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:`text-[10px] font-mono px-1.5 py-0.5 rounded ${xE(u.routeType)}`,title:u.routeType,children:AE(u.routeType)}),!c.decrypted&&_.jsx("span",{title:"Encrypted",children:""}),_.jsx("span",{className:c.decrypted?"text-primary":"text-foreground",children:u.summary}),_.jsx("span",{className:"text-muted-foreground ml-auto text-sm",children:pE(c.timestamp)})]}),(c.snr!==null||c.rssi!==null)&&_.jsx("div",{className:"text-[11px] text-muted-foreground mt-0.5",children:mE(c)}),_.jsx("div",{className:"font-mono text-[10px] break-all text-muted-foreground/70 mt-1 p-1 bg-background/50 rounded",children:c.data.toUpperCase()})]},c.id))})}function xv(n,s){const i=D.useRef(s);D.useEffect(function(){s!==i.current&&n.attributionControl!=null&&(i.current!=null&&n.attributionControl.removeAttribution(i.current),s!=null&&n.attributionControl.addAttribution(s)),i.current=s},[n,s])}function vE(n,s,i){s.center!==i.center&&n.setLatLng(s.center),s.radius!=null&&s.radius!==i.radius&&n.setRadius(s.radius)}const yE=1;function _E(n){return Object.freeze({__version:yE,map:n})}function wE(n,s){return Object.freeze({...n,...s})}const Av=D.createContext(null),vv=Av.Provider;function yd(){const n=D.useContext(Av);if(n==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}function bE(n){function s(i,l){const{instance:c,context:u}=n(i).current;return D.useImperativeHandle(l,()=>c),i.children==null?null:Te.createElement(vv,{value:u},i.children)}return D.forwardRef(s)}function CE(n){function s(i,l){const[c,u]=D.useState(!1),{instance:p}=n(i,u).current;D.useImperativeHandle(l,()=>p),D.useEffect(function(){c&&p.update()},[p,c,i.children]);const d=p._contentNode;return d?M0.createPortal(i.children,d):null}return D.forwardRef(s)}function EE(n){function s(i,l){const{instance:c}=n(i).current;return D.useImperativeHandle(l,()=>c),null}return D.forwardRef(s)}function lh(n,s){const i=D.useRef();D.useEffect(function(){return s!=null&&n.instance.on(s),i.current=s,function(){i.current!=null&&n.instance.off(i.current),i.current=null}},[n,s])}function _d(n,s){const i=n.pane??s.pane;return i?{...n,pane:i}:n}function kE(n,s){return function(l,c){const u=yd(),p=n(_d(l,u),u);return xv(u.map,l.attribution),lh(p.current,l.eventHandlers),s(p.current,u,l,c),p}}var gl={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var SE=gl.exports,Yg;function BE(){return Yg||(Yg=1,(function(n,s){(function(i,l){l(s)})(SE,(function(i){var l="1.9.4";function c(t){var o,f,v,B;for(f=1,v=arguments.length;f<v;f++){B=arguments[f];for(o in B)t[o]=B[o]}return t}var u=Object.create||(function(){function t(){}return function(o){return t.prototype=o,new t}})();function p(t,o){var f=Array.prototype.slice;if(t.bind)return t.bind.apply(t,f.call(arguments,1));var v=f.call(arguments,2);return function(){return t.apply(o,v.length?v.concat(f.call(arguments)):arguments)}}var d=0;function g(t){return"_leaflet_id"in t||(t._leaflet_id=++d),t._leaflet_id}function m(t,o,f){var v,B,O,X;return X=function(){v=!1,B&&(O.apply(f,B),B=!1)},O=function(){v?B=arguments:(t.apply(f,arguments),setTimeout(X,o),v=!0)},O}function x(t,o,f){var v=o[1],B=o[0],O=v-B;return t===v&&f?t:((t-B)%O+O)%O+B}function A(){return!1}function b(t,o){if(o===!1)return t;var f=Math.pow(10,o===void 0?6:o);return Math.round(t*f)/f}function k(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function R(t){return k(t).split(/\s+/)}function C(t,o){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?u(t.options):{});for(var f in o)t.options[f]=o[f];return t.options}function w(t,o,f){var v=[];for(var B in t)v.push(encodeURIComponent(f?B.toUpperCase():B)+"="+encodeURIComponent(t[B]));return(!o||o.indexOf("?")===-1?"?":"&")+v.join("&")}var S=/\{ *([\w_ -]+) *\}/g;function P(t,o){return t.replace(S,function(f,v){var B=o[v];if(B===void 0)throw new Error("No value provided for variable "+f);return typeof B=="function"&&(B=B(o)),B})}var N=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function F(t,o){for(var f=0;f<t.length;f++)if(t[f]===o)return f;return-1}var M="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function H(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var U=0;function j(t){var o=+new Date,f=Math.max(0,16-(o-U));return U=o+f,window.setTimeout(t,f)}var ee=window.requestAnimationFrame||H("RequestAnimationFrame")||j,Z=window.cancelAnimationFrame||H("CancelAnimationFrame")||H("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function Y(t,o,f){if(f&&ee===j)t.call(o);else return ee.call(window,p(t,o))}function te(t){t&&Z.call(window,t)}var K={__proto__:null,extend:c,create:u,bind:p,get lastId(){return d},stamp:g,throttle:m,wrapNum:x,falseFn:A,formatNum:b,trim:k,splitWords:R,setOptions:C,getParamString:w,template:P,isArray:N,indexOf:F,emptyImageUrl:M,requestFn:ee,cancelFn:Z,requestAnimFrame:Y,cancelAnimFrame:te};function ae(){}ae.extend=function(t){var o=function(){C(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},f=o.__super__=this.prototype,v=u(f);v.constructor=o,o.prototype=v;for(var B in this)Object.prototype.hasOwnProperty.call(this,B)&&B!=="prototype"&&B!=="__super__"&&(o[B]=this[B]);return t.statics&&c(o,t.statics),t.includes&&(Ae(t.includes),c.apply(null,[v].concat(t.includes))),c(v,t),delete v.statics,delete v.includes,v.options&&(v.options=f.options?u(f.options):{},c(v.options,t.options)),v._initHooks=[],v.callInitHooks=function(){if(!this._initHooksCalled){f.callInitHooks&&f.callInitHooks.call(this),this._initHooksCalled=!0;for(var O=0,X=v._initHooks.length;O<X;O++)v._initHooks[O].call(this)}},o},ae.include=function(t){var o=this.prototype.options;return c(this.prototype,t),t.options&&(this.prototype.options=o,this.mergeOptions(t.options)),this},ae.mergeOptions=function(t){return c(this.prototype.options,t),this},ae.addInitHook=function(t){var o=Array.prototype.slice.call(arguments,1),f=typeof t=="function"?t:function(){this[t].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(f),this};function Ae(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=N(t)?t:[t];for(var o=0;o<t.length;o++)t[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var G={on:function(t,o,f){if(typeof t=="object")for(var v in t)this._on(v,t[v],o);else{t=R(t);for(var B=0,O=t.length;B<O;B++)this._on(t[B],o,f)}return this},off:function(t,o,f){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var v in t)this._off(v,t[v],o);else{t=R(t);for(var B=arguments.length===1,O=0,X=t.length;O<X;O++)B?this._off(t[O]):this._off(t[O],o,f)}return this},_on:function(t,o,f,v){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(t,o,f)===!1){f===this&&(f=void 0);var B={fn:o,ctx:f};v&&(B.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(B)}},_off:function(t,o,f){var v,B,O;if(this._events&&(v=this._events[t],!!v)){if(arguments.length===1){if(this._firingCount)for(B=0,O=v.length;B<O;B++)v[B].fn=A;delete this._events[t];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var X=this._listens(t,o,f);if(X!==!1){var le=v[X];this._firingCount&&(le.fn=A,this._events[t]=v=v.slice()),v.splice(X,1)}}},fire:function(t,o,f){if(!this.listens(t,f))return this;var v=c({},o,{type:t,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var B=this._events[t];if(B){this._firingCount=this._firingCount+1||1;for(var O=0,X=B.length;O<X;O++){var le=B[O],fe=le.fn;le.once&&this.off(t,fe,le.ctx),fe.call(le.ctx||this,v)}this._firingCount--}}return f&&this._propagateEvent(v),this},listens:function(t,o,f,v){typeof t!="string"&&console.warn('"string" type argument expected');var B=o;typeof o!="function"&&(v=!!o,B=void 0,f=void 0);var O=this._events&&this._events[t];if(O&&O.length&&this._listens(t,B,f)!==!1)return!0;if(v){for(var X in this._eventParents)if(this._eventParents[X].listens(t,o,f,v))return!0}return!1},_listens:function(t,o,f){if(!this._events)return!1;var v=this._events[t]||[];if(!o)return!!v.length;f===this&&(f=void 0);for(var B=0,O=v.length;B<O;B++)if(v[B].fn===o&&v[B].ctx===f)return B;return!1},once:function(t,o,f){if(typeof t=="object")for(var v in t)this._on(v,t[v],o,!0);else{t=R(t);for(var B=0,O=t.length;B<O;B++)this._on(t[B],o,f,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[g(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[g(t)],this},_propagateEvent:function(t){for(var o in this._eventParents)this._eventParents[o].fire(t.type,c({layer:t.target,propagatedFrom:t.target},t),!0)}};G.addEventListener=G.on,G.removeEventListener=G.clearAllEventListeners=G.off,G.addOneTimeEventListener=G.once,G.fireEvent=G.fire,G.hasEventListeners=G.listens;var se=ae.extend(G);function W(t,o,f){this.x=f?Math.round(t):t,this.y=f?Math.round(o):o}var re=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};W.prototype={clone:function(){return new W(this.x,this.y)},add:function(t){return this.clone()._add(V(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(V(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new W(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new W(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=re(this.x),this.y=re(this.y),this},distanceTo:function(t){t=V(t);var o=t.x-this.x,f=t.y-this.y;return Math.sqrt(o*o+f*f)},equals:function(t){return t=V(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=V(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+b(this.x)+", "+b(this.y)+")"}};function V(t,o,f){return t instanceof W?t:N(t)?new W(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new W(t.x,t.y):new W(t,o,f)}function T(t,o){if(t)for(var f=o?[t,o]:t,v=0,B=f.length;v<B;v++)this.extend(f[v])}T.prototype={extend:function(t){var o,f;if(!t)return this;if(t instanceof W||typeof t[0]=="number"||"x"in t)o=f=V(t);else if(t=z(t),o=t.min,f=t.max,!o||!f)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=f.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(f.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(f.y,this.max.y)),this},getCenter:function(t){return V((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return V(this.min.x,this.max.y)},getTopRight:function(){return V(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var o,f;return typeof t[0]=="number"||t instanceof W?t=V(t):t=z(t),t instanceof T?(o=t.min,f=t.max):o=f=t,o.x>=this.min.x&&f.x<=this.max.x&&o.y>=this.min.y&&f.y<=this.max.y},intersects:function(t){t=z(t);var o=this.min,f=this.max,v=t.min,B=t.max,O=B.x>=o.x&&v.x<=f.x,X=B.y>=o.y&&v.y<=f.y;return O&&X},overlaps:function(t){t=z(t);var o=this.min,f=this.max,v=t.min,B=t.max,O=B.x>o.x&&v.x<f.x,X=B.y>o.y&&v.y<f.y;return O&&X},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var o=this.min,f=this.max,v=Math.abs(o.x-f.x)*t,B=Math.abs(o.y-f.y)*t;return z(V(o.x-v,o.y-B),V(f.x+v,f.y+B))},equals:function(t){return t?(t=z(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function z(t,o){return!t||t instanceof T?t:new T(t,o)}function q(t,o){if(t)for(var f=o?[t,o]:t,v=0,B=f.length;v<B;v++)this.extend(f[v])}q.prototype={extend:function(t){var o=this._southWest,f=this._northEast,v,B;if(t instanceof ue)v=t,B=t;else if(t instanceof q){if(v=t._southWest,B=t._northEast,!v||!B)return this}else return t?this.extend(pe(t)||$(t)):this;return!o&&!f?(this._southWest=new ue(v.lat,v.lng),this._northEast=new ue(B.lat,B.lng)):(o.lat=Math.min(v.lat,o.lat),o.lng=Math.min(v.lng,o.lng),f.lat=Math.max(B.lat,f.lat),f.lng=Math.max(B.lng,f.lng)),this},pad:function(t){var o=this._southWest,f=this._northEast,v=Math.abs(o.lat-f.lat)*t,B=Math.abs(o.lng-f.lng)*t;return new q(new ue(o.lat-v,o.lng-B),new ue(f.lat+v,f.lng+B))},getCenter:function(){return new ue((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ue(this.getNorth(),this.getWest())},getSouthEast:function(){return new ue(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof ue||"lat"in t?t=pe(t):t=$(t);var o=this._southWest,f=this._northEast,v,B;return t instanceof q?(v=t.getSouthWest(),B=t.getNorthEast()):v=B=t,v.lat>=o.lat&&B.lat<=f.lat&&v.lng>=o.lng&&B.lng<=f.lng},intersects:function(t){t=$(t);var o=this._southWest,f=this._northEast,v=t.getSouthWest(),B=t.getNorthEast(),O=B.lat>=o.lat&&v.lat<=f.lat,X=B.lng>=o.lng&&v.lng<=f.lng;return O&&X},overlaps:function(t){t=$(t);var o=this._southWest,f=this._northEast,v=t.getSouthWest(),B=t.getNorthEast(),O=B.lat>o.lat&&v.lat<f.lat,X=B.lng>o.lng&&v.lng<f.lng;return O&&X},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,o){return t?(t=$(t),this._southWest.equals(t.getSouthWest(),o)&&this._northEast.equals(t.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function $(t,o){return t instanceof q?t:new q(t,o)}function ue(t,o,f){if(isNaN(t)||isNaN(o))throw new Error("Invalid LatLng object: ("+t+", "+o+")");this.lat=+t,this.lng=+o,f!==void 0&&(this.alt=+f)}ue.prototype={equals:function(t,o){if(!t)return!1;t=pe(t);var f=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return f<=(o===void 0?1e-9:o)},toString:function(t){return"LatLng("+b(this.lat,t)+", "+b(this.lng,t)+")"},distanceTo:function(t){return me.distance(this,pe(t))},wrap:function(){return me.wrapLatLng(this)},toBounds:function(t){var o=180*t/40075017,f=o/Math.cos(Math.PI/180*this.lat);return $([this.lat-o,this.lng-f],[this.lat+o,this.lng+f])},clone:function(){return new ue(this.lat,this.lng,this.alt)}};function pe(t,o,f){return t instanceof ue?t:N(t)&&typeof t[0]!="object"?t.length===3?new ue(t[0],t[1],t[2]):t.length===2?new ue(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new ue(t.lat,"lng"in t?t.lng:t.lon,t.alt):o===void 0?null:new ue(t,o,f)}var ve={latLngToPoint:function(t,o){var f=this.projection.project(t),v=this.scale(o);return this.transformation._transform(f,v)},pointToLatLng:function(t,o){var f=this.scale(o),v=this.transformation.untransform(t,f);return this.projection.unproject(v)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var o=this.projection.bounds,f=this.scale(t),v=this.transformation.transform(o.min,f),B=this.transformation.transform(o.max,f);return new T(v,B)},infinite:!1,wrapLatLng:function(t){var o=this.wrapLng?x(t.lng,this.wrapLng,!0):t.lng,f=this.wrapLat?x(t.lat,this.wrapLat,!0):t.lat,v=t.alt;return new ue(f,o,v)},wrapLatLngBounds:function(t){var o=t.getCenter(),f=this.wrapLatLng(o),v=o.lat-f.lat,B=o.lng-f.lng;if(v===0&&B===0)return t;var O=t.getSouthWest(),X=t.getNorthEast(),le=new ue(O.lat-v,O.lng-B),fe=new ue(X.lat-v,X.lng-B);return new q(le,fe)}},me=c({},ve,{wrapLng:[-180,180],R:6371e3,distance:function(t,o){var f=Math.PI/180,v=t.lat*f,B=o.lat*f,O=Math.sin((o.lat-t.lat)*f/2),X=Math.sin((o.lng-t.lng)*f/2),le=O*O+Math.cos(v)*Math.cos(B)*X*X,fe=2*Math.atan2(Math.sqrt(le),Math.sqrt(1-le));return this.R*fe}}),ge=6378137,Pe={R:ge,MAX_LATITUDE:85.0511287798,project:function(t){var o=Math.PI/180,f=this.MAX_LATITUDE,v=Math.max(Math.min(f,t.lat),-f),B=Math.sin(v*o);return new W(this.R*t.lng*o,this.R*Math.log((1+B)/(1-B))/2)},unproject:function(t){var o=180/Math.PI;return new ue((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*o,t.x*o/this.R)},bounds:(function(){var t=ge*Math.PI;return new T([-t,-t],[t,t])})()};function We(t,o,f,v){if(N(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=o,this._c=f,this._d=v}We.prototype={transform:function(t,o){return this._transform(t.clone(),o)},_transform:function(t,o){return o=o||1,t.x=o*(this._a*t.x+this._b),t.y=o*(this._c*t.y+this._d),t},untransform:function(t,o){return o=o||1,new W((t.x/o-this._b)/this._a,(t.y/o-this._d)/this._c)}};function Ke(t,o,f,v){return new We(t,o,f,v)}var ke=c({},me,{code:"EPSG:3857",projection:Pe,transformation:(function(){var t=.5/(Math.PI*Pe.R);return Ke(t,.5,-t,.5)})()}),Ve=c({},ke,{code:"EPSG:900913"});function st(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function mt(t,o){var f="",v,B,O,X,le,fe;for(v=0,O=t.length;v<O;v++){for(le=t[v],B=0,X=le.length;B<X;B++)fe=le[B],f+=(B?"L":"M")+fe.x+" "+fe.y;f+=o?Fe.svg?"z":"x":""}return f||"M0 0"}var et=document.documentElement.style,at="ActiveXObject"in window,Ge=at&&!document.addEventListener,$e="msLaunchUri"in navigator&&!("documentMode"in document),Ye=Kt("webkit"),Le=Kt("android"),wt=Kt("android 2")||Kt("android 3"),It=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Nn=Le&&Kt("Google")&&It<537&&!("AudioNode"in window),Ot=!!window.opera,en=!$e&&Kt("chrome"),sn=Kt("gecko")&&!Ye&&!Ot&&!at,yn=!en&&Kt("safari"),Ht=Kt("phantom"),Pt="OTransition"in et,Vt=navigator.platform.indexOf("Win")===0,Fn=at&&"transition"in et,pn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!wt,ye="MozPerspective"in et,Se=!window.L_DISABLE_3D&&(Fn||pn||ye)&&!Pt&&!Ht,Ne=typeof orientation<"u"||Kt("mobile"),ct=Ne&&Ye,tt=Ne&&pn,ne=!window.PointerEvent&&window.MSPointerEvent,xe=!!(window.PointerEvent||ne),_e="ontouchstart"in window||!!window.TouchEvent,Ue=!window.L_NO_TOUCH&&(_e||xe),ie=Ne&&Ot,Ee=Ne&&sn,ut=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ft=(function(){var t=!1;try{var o=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",A,o),window.removeEventListener("testPassiveEventSupport",A,o)}catch{}return t})(),nn=(function(){return!!document.createElement("canvas").getContext})(),ht=!!(document.createElementNS&&st("svg").createSVGRect),Tt=!!ht&&(function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Xn=!ht&&(function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var o=t.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}})(),bt=navigator.platform.indexOf("Mac")===0,Ut=navigator.platform.indexOf("Linux")===0;function Kt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Fe={ie:at,ielt9:Ge,edge:$e,webkit:Ye,android:Le,android23:wt,androidStock:Nn,opera:Ot,chrome:en,gecko:sn,safari:yn,phantom:Ht,opera12:Pt,win:Vt,ie3d:Fn,webkit3d:pn,gecko3d:ye,any3d:Se,mobile:Ne,mobileWebkit:ct,mobileWebkit3d:tt,msPointer:ne,pointer:xe,touch:Ue,touchNative:_e,mobileOpera:ie,mobileGecko:Ee,retina:ut,passiveEvents:Ft,canvas:nn,svg:ht,vml:Xn,inlineSvg:Tt,mac:bt,linux:Ut},Fi=Fe.msPointer?"MSPointerDown":"pointerdown",cs=Fe.msPointer?"MSPointerMove":"pointermove",Pl=Fe.msPointer?"MSPointerUp":"pointerup",Tl=Fe.msPointer?"MSPointerCancel":"pointercancel",da={touchstart:Fi,touchmove:cs,touchend:Pl,touchcancel:Tl},Vr={touchstart:Wt,touchmove:us,touchend:us,touchcancel:us},si={},fa=!1;function Ed(t,o,f){return o==="touchstart"&&kd(),Vr[o]?(f=Vr[o].bind(this,f),t.addEventListener(da[o],f,!1),f):(console.warn("wrong event specified:",o),A)}function Dl(t,o,f){if(!da[o]){console.warn("wrong event specified:",o);return}t.removeEventListener(da[o],f,!1)}function Rl(t){si[t.pointerId]=t}function Nl(t){si[t.pointerId]&&(si[t.pointerId]=t)}function ha(t){delete si[t.pointerId]}function kd(){fa||(document.addEventListener(Fi,Rl,!0),document.addEventListener(cs,Nl,!0),document.addEventListener(Pl,ha,!0),document.addEventListener(Tl,ha,!0),fa=!0)}function us(t,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var f in si)o.touches.push(si[f]);o.changedTouches=[o],t(o)}}function Wt(t,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&qt(o),us(t,o)}function Sd(t){var o={},f,v;for(v in t)f=t[v],o[v]=f&&f.bind?f.bind(t):f;return t=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var pa=200;function Fl(t,o){t.addEventListener("dblclick",o);var f=0,v;function B(O){if(O.detail!==1){v=O.detail;return}if(!(O.pointerType==="mouse"||O.sourceCapabilities&&!O.sourceCapabilities.firesTouchEvents)){var X=ci(O);if(!(X.some(function(fe){return fe instanceof HTMLLabelElement&&fe.attributes.for})&&!X.some(function(fe){return fe instanceof HTMLInputElement||fe instanceof HTMLSelectElement}))){var le=Date.now();le-f<=pa?(v++,v===2&&o(Sd(O))):v=1,f=le}}}return t.addEventListener("click",B),{dblclick:o,simDblclick:B}}function ds(t,o){t.removeEventListener("dblclick",o.dblclick),t.removeEventListener("click",o.simDblclick)}var ma=Oi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Li=Oi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),wo=Li==="webkitTransition"||Li==="OTransition"?Li+"End":"transitionend";function Jn(t){return typeof t=="string"?document.getElementById(t):t}function bo(t,o){var f=t.style[o]||t.currentStyle&&t.currentStyle[o];if((!f||f==="auto")&&document.defaultView){var v=document.defaultView.getComputedStyle(t,null);f=v?v[o]:null}return f==="auto"?null:f}function lt(t,o,f){var v=document.createElement(t);return v.className=o||"",f&&f.appendChild(v),v}function jt(t){var o=t.parentNode;o&&o.removeChild(t)}function fs(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Mi(t){var o=t.parentNode;o&&o.lastChild!==t&&o.appendChild(t)}function Sr(t){var o=t.parentNode;o&&o.firstChild!==t&&o.insertBefore(t,o.firstChild)}function Ii(t,o){if(t.classList!==void 0)return t.classList.contains(o);var f=hs(t);return f.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(f)}function ot(t,o){if(t.classList!==void 0)for(var f=R(o),v=0,B=f.length;v<B;v++)t.classList.add(f[v]);else if(!Ii(t,o)){var O=hs(t);ga(t,(O?O+" ":"")+o)}}function Lt(t,o){t.classList!==void 0?t.classList.remove(o):ga(t,k((" "+hs(t)+" ").replace(" "+o+" "," ")))}function ga(t,o){t.className.baseVal===void 0?t.className=o:t.className.baseVal=o}function hs(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function En(t,o){"opacity"in t.style?t.style.opacity=o:"filter"in t.style&&Ll(t,o)}function Ll(t,o){var f=!1,v="DXImageTransform.Microsoft.Alpha";try{f=t.filters.item(v)}catch{if(o===1)return}o=Math.round(o*100),f?(f.Enabled=o!==100,f.Opacity=o):t.style.filter+=" progid:"+v+"(opacity="+o+")"}function Oi(t){for(var o=document.documentElement.style,f=0;f<t.length;f++)if(t[f]in o)return t[f];return!1}function er(t,o,f){var v=o||new W(0,0);t.style[ma]=(Fe.ie3d?"translate("+v.x+"px,"+v.y+"px)":"translate3d("+v.x+"px,"+v.y+"px,0)")+(f?" scale("+f+")":"")}function Qt(t,o){t._leaflet_pos=o,Fe.any3d?er(t,o):(t.style.left=o.x+"px",t.style.top=o.y+"px")}function Br(t){return t._leaflet_pos||new W(0,0)}var _t,ji,ps;if("onselectstart"in document)_t=function(){nt(window,"selectstart",qt)},ji=function(){Dt(window,"selectstart",qt)};else{var ai=Oi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);_t=function(){if(ai){var t=document.documentElement.style;ps=t[ai],t[ai]="none"}},ji=function(){ai&&(document.documentElement.style[ai]=ps,ps=void 0)}}function ms(){nt(window,"dragstart",qt)}function gs(){Dt(window,"dragstart",qt)}var Co,Eo;function zi(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(tr(),Co=t,Eo=t.style.outlineStyle,t.style.outlineStyle="none",nt(window,"keydown",tr))}function tr(){Co&&(Co.style.outlineStyle=Eo,Co=void 0,Eo=void 0,Dt(window,"keydown",tr))}function Pr(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function fr(t){var o=t.getBoundingClientRect();return{x:o.width/t.offsetWidth||1,y:o.height/t.offsetHeight||1,boundingClientRect:o}}var ko={__proto__:null,TRANSFORM:ma,TRANSITION:Li,TRANSITION_END:wo,get:Jn,getStyle:bo,create:lt,remove:jt,empty:fs,toFront:Mi,toBack:Sr,hasClass:Ii,addClass:ot,removeClass:Lt,setClass:ga,getClass:hs,setOpacity:En,testProp:Oi,setTransform:er,setPosition:Qt,getPosition:Br,get disableTextSelection(){return _t},get enableTextSelection(){return ji},disableImageDrag:ms,enableImageDrag:gs,preventOutline:zi,restoreOutline:tr,getSizedParentNode:Pr,getScale:fr};function nt(t,o,f,v){if(o&&typeof o=="object")for(var B in o)Aa(t,B,o[B],f);else{o=R(o);for(var O=0,X=o.length;O<X;O++)Aa(t,o[O],f,v)}return this}var an="_leaflet_events";function Dt(t,o,f,v){if(arguments.length===1)xa(t),delete t[an];else if(o&&typeof o=="object")for(var B in o)xs(t,B,o[B],f);else if(o=R(o),arguments.length===2)xa(t,function(le){return F(o,le)!==-1});else for(var O=0,X=o.length;O<X;O++)xs(t,o[O],f,v);return this}function xa(t,o){for(var f in t[an]){var v=f.split(/\d/)[0];(!o||o(v))&&xs(t,v,null,null,f)}}var li={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Aa(t,o,f,v){var B=o+g(f)+(v?"_"+g(v):"");if(t[an]&&t[an][B])return this;var O=function(le){return f.call(v||t,le||window.event)},X=O;!Fe.touchNative&&Fe.pointer&&o.indexOf("touch")===0?O=Ed(t,o,O):Fe.touch&&o==="dblclick"?O=Fl(t,O):"addEventListener"in t?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?t.addEventListener(li[o]||o,O,Fe.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(O=function(le){le=le||window.event,Po(t,le)&&X(le)},t.addEventListener(li[o],O,!1)):t.addEventListener(o,X,!1):t.attachEvent("on"+o,O),t[an]=t[an]||{},t[an][B]=O}function xs(t,o,f,v,B){B=B||o+g(f)+(v?"_"+g(v):"");var O=t[an]&&t[an][B];if(!O)return this;!Fe.touchNative&&Fe.pointer&&o.indexOf("touch")===0?Dl(t,o,O):Fe.touch&&o==="dblclick"?ds(t,O):"removeEventListener"in t?t.removeEventListener(li[o]||o,O,!1):t.detachEvent("on"+o,O),t[an][B]=null}function hr(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function As(t){return Aa(t,"wheel",hr),this}function So(t){return nt(t,"mousedown touchstart dblclick contextmenu",hr),t._leaflet_disable_click=!0,this}function qt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function nr(t){return qt(t),hr(t),this}function ci(t){if(t.composedPath)return t.composedPath();for(var o=[],f=t.target;f;)o.push(f),f=f.parentNode;return o}function Bo(t,o){if(!o)return new W(t.clientX,t.clientY);var f=fr(o),v=f.boundingClientRect;return new W((t.clientX-v.left)/f.x-o.clientLeft,(t.clientY-v.top)/f.y-o.clientTop)}var Bd=Fe.linux&&Fe.chrome?window.devicePixelRatio:Fe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ml(t){return Fe.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Bd:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function Po(t,o){var f=o.relatedTarget;if(!f)return!0;try{for(;f&&f!==t;)f=f.parentNode}catch{return!1}return f!==t}var vs={__proto__:null,on:nt,off:Dt,stopPropagation:hr,disableScrollPropagation:As,disableClickPropagation:So,preventDefault:qt,stop:nr,getPropagationPath:ci,getMousePosition:Bo,getWheelDelta:Ml,isExternalTarget:Po,addListener:nt,removeListener:Dt},ys=se.extend({run:function(t,o,f,v){this.stop(),this._el=t,this._inProgress=!0,this._duration=f||.25,this._easeOutPower=1/Math.max(v||.5,.2),this._startPos=Br(t),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Y(this._animate,this),this._step()},_step:function(t){var o=+new Date-this._startTime,f=this._duration*1e3;o<f?this._runFrame(this._easeOut(o/f),t):(this._runFrame(1),this._complete())},_runFrame:function(t,o){var f=this._startPos.add(this._offset.multiplyBy(t));o&&f._round(),Qt(this._el,f),this.fire("step")},_complete:function(){te(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),At=se.extend({options:{crs:ke,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,o){o=C(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=p(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(pe(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Li&&Fe.any3d&&!Fe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),nt(this._proxy,wo,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,o,f){if(o=o===void 0?this._zoom:this._limitZoom(o),t=this._limitCenter(pe(t),o,this.options.maxBounds),f=f||{},this._stop(),this._loaded&&!f.reset&&f!==!0){f.animate!==void 0&&(f.zoom=c({animate:f.animate},f.zoom),f.pan=c({animate:f.animate,duration:f.duration},f.pan));var v=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,o,f.zoom):this._tryAnimatedPan(t,f.pan);if(v)return clearTimeout(this._sizeTimer),this}return this._resetView(t,o,f.pan&&f.pan.noMoveStart),this},setZoom:function(t,o){return this._loaded?this.setView(this.getCenter(),t,{zoom:o}):(this._zoom=t,this)},zoomIn:function(t,o){return t=t||(Fe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,o)},zoomOut:function(t,o){return t=t||(Fe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,o)},setZoomAround:function(t,o,f){var v=this.getZoomScale(o),B=this.getSize().divideBy(2),O=t instanceof W?t:this.latLngToContainerPoint(t),X=O.subtract(B).multiplyBy(1-1/v),le=this.containerPointToLatLng(B.add(X));return this.setView(le,o,{zoom:f})},_getBoundsCenterZoom:function(t,o){o=o||{},t=t.getBounds?t.getBounds():$(t);var f=V(o.paddingTopLeft||o.padding||[0,0]),v=V(o.paddingBottomRight||o.padding||[0,0]),B=this.getBoundsZoom(t,!1,f.add(v));if(B=typeof o.maxZoom=="number"?Math.min(o.maxZoom,B):B,B===1/0)return{center:t.getCenter(),zoom:B};var O=v.subtract(f).divideBy(2),X=this.project(t.getSouthWest(),B),le=this.project(t.getNorthEast(),B),fe=this.unproject(X.add(le).divideBy(2).add(O),B);return{center:fe,zoom:B}},fitBounds:function(t,o){if(t=$(t),!t.isValid())throw new Error("Bounds are not valid.");var f=this._getBoundsCenterZoom(t,o);return this.setView(f.center,f.zoom,o)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,o){return this.setView(t,this._zoom,{pan:o})},panBy:function(t,o){if(t=V(t).round(),o=o||{},!t.x&&!t.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ys,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){ot(this._mapPane,"leaflet-pan-anim");var f=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,f,o.duration||.25,o.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,o,f){if(f=f||{},f.animate===!1||!Fe.any3d)return this.setView(t,o,f);this._stop();var v=this.project(this.getCenter()),B=this.project(t),O=this.getSize(),X=this._zoom;t=pe(t),o=o===void 0?X:o;var le=Math.max(O.x,O.y),fe=le*this.getZoomScale(X,o),we=B.distanceTo(v)||1,Re=1.42,Qe=Re*Re;function dt(kt){var to=kt?-1:1,Vd=kt?fe:le,Ud=fe*fe-le*le+to*Qe*Qe*we*we,gi=2*Vd*Qe*we,xi=Ud/gi,Ai=Math.sqrt(xi*xi+1)-xi,Fs=Ai<1e-9?-18:Math.log(Ai);return Fs}function ln(kt){return(Math.exp(kt)-Math.exp(-kt))/2}function rn(kt){return(Math.exp(kt)+Math.exp(-kt))/2}function In(kt){return ln(kt)/rn(kt)}var Sn=dt(0);function Ji(kt){return le*(rn(Sn)/rn(Sn+Re*kt))}function ja(kt){return le*(rn(Sn)*In(Sn+Re*kt)-ln(Sn))/Qe}function Qr(kt){return 1-Math.pow(1-kt,1.5)}var rc=Date.now(),mi=(dt(1)-Sn)/Re,xr=f.duration?1e3*f.duration:1e3*mi*.8;function eo(){var kt=(Date.now()-rc)/xr,to=Qr(kt)*mi;kt<=1?(this._flyToFrame=Y(eo,this),this._move(this.unproject(v.add(B.subtract(v).multiplyBy(ja(to)/we)),X),this.getScaleZoom(le/Ji(to),X),{flyTo:!0})):this._move(t,o)._moveEnd(!0)}return this._moveStart(!0,f.noMoveStart),eo.call(this),this},flyToBounds:function(t,o){var f=this._getBoundsCenterZoom(t,o);return this.flyTo(f.center,f.zoom,o)},setMaxBounds:function(t){return t=$(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var o=this.options.minZoom;return this.options.minZoom=t,this._loaded&&o!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var o=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&o!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,o){this._enforcingBounds=!0;var f=this.getCenter(),v=this._limitCenter(f,this._zoom,$(t));return f.equals(v)||this.panTo(v,o),this._enforcingBounds=!1,this},panInside:function(t,o){o=o||{};var f=V(o.paddingTopLeft||o.padding||[0,0]),v=V(o.paddingBottomRight||o.padding||[0,0]),B=this.project(this.getCenter()),O=this.project(t),X=this.getPixelBounds(),le=z([X.min.add(f),X.max.subtract(v)]),fe=le.getSize();if(!le.contains(O)){this._enforcingBounds=!0;var we=O.subtract(le.getCenter()),Re=le.extend(O).getSize().subtract(fe);B.x+=we.x<0?-Re.x:Re.x,B.y+=we.y<0?-Re.y:Re.y,this.panTo(this.unproject(B),o),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=c({animate:!1,pan:!0},t===!0?{animate:!0}:t);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var f=this.getSize(),v=o.divideBy(2).round(),B=f.divideBy(2).round(),O=v.subtract(B);return!O.x&&!O.y?this:(t.animate&&t.pan?this.panBy(O):(t.pan&&this._rawPanBy(O),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(p(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:f}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=c({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=p(this._handleGeolocationResponse,this),f=p(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,f,t):navigator.geolocation.getCurrentPosition(o,f,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var o=t.code,f=t.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+f+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var o=t.coords.latitude,f=t.coords.longitude,v=new ue(o,f),B=v.toBounds(t.coords.accuracy*2),O=this._locateOptions;if(O.setView){var X=this.getBoundsZoom(B);this.setView(v,O.maxZoom?Math.min(X,O.maxZoom):X)}var le={latlng:v,bounds:B,timestamp:t.timestamp};for(var fe in t.coords)typeof t.coords[fe]=="number"&&(le[fe]=t.coords[fe]);this.fire("locationfound",le)}},addHandler:function(t,o){if(!o)return this;var f=this[t]=new o(this);return this._handlers.push(f),this.options[t]&&f.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),jt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(te(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)jt(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,o){var f="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),v=lt("div",f,o||this._mapPane);return t&&(this._panes[t]=v),v},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),o=this.unproject(t.getBottomLeft()),f=this.unproject(t.getTopRight());return new q(o,f)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,o,f){t=$(t),f=V(f||[0,0]);var v=this.getZoom()||0,B=this.getMinZoom(),O=this.getMaxZoom(),X=t.getNorthWest(),le=t.getSouthEast(),fe=this.getSize().subtract(f),we=z(this.project(le,v),this.project(X,v)).getSize(),Re=Fe.any3d?this.options.zoomSnap:1,Qe=fe.x/we.x,dt=fe.y/we.y,ln=o?Math.max(Qe,dt):Math.min(Qe,dt);return v=this.getScaleZoom(ln,v),Re&&(v=Math.round(v/(Re/100))*(Re/100),v=o?Math.ceil(v/Re)*Re:Math.floor(v/Re)*Re),Math.max(B,Math.min(O,v))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new W(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,o){var f=this._getTopLeftPoint(t,o);return new T(f,f.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,o){var f=this.options.crs;return o=o===void 0?this._zoom:o,f.scale(t)/f.scale(o)},getScaleZoom:function(t,o){var f=this.options.crs;o=o===void 0?this._zoom:o;var v=f.zoom(t*f.scale(o));return isNaN(v)?1/0:v},project:function(t,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(pe(t),o)},unproject:function(t,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(V(t),o)},layerPointToLatLng:function(t){var o=V(t).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(t){var o=this.project(pe(t))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(pe(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds($(t))},distance:function(t,o){return this.options.crs.distance(pe(t),pe(o))},containerPointToLayerPoint:function(t){return V(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return V(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var o=this.containerPointToLayerPoint(V(t));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(pe(t)))},mouseEventToContainerPoint:function(t){return Bo(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var o=this._container=Jn(t);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");nt(o,"scroll",this._onScroll,this),this._containerId=g(o)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&Fe.any3d,ot(t,"leaflet-container"+(Fe.touch?" leaflet-touch":"")+(Fe.retina?" leaflet-retina":"")+(Fe.ielt9?" leaflet-oldie":"")+(Fe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=bo(t,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Qt(this._mapPane,new W(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ot(t.markerPane,"leaflet-zoom-hide"),ot(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,o,f){Qt(this._mapPane,new W(0,0));var v=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var B=this._zoom!==o;this._moveStart(B,f)._move(t,o)._moveEnd(B),this.fire("viewreset"),v&&this.fire("load")},_moveStart:function(t,o){return t&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(t,o,f,v){o===void 0&&(o=this._zoom);var B=this._zoom!==o;return this._zoom=o,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),v?f&&f.pinch&&this.fire("zoom",f):((B||f&&f.pinch)&&this.fire("zoom",f),this.fire("move",f)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return te(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Qt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[g(this._container)]=this;var o=t?Dt:nt;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),Fe.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){te(this._resizeRequest),this._resizeRequest=Y(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,o){for(var f=[],v,B=o==="mouseout"||o==="mouseover",O=t.target||t.srcElement,X=!1;O;){if(v=this._targets[g(O)],v&&(o==="click"||o==="preclick")&&this._draggableMoved(v)){X=!0;break}if(v&&v.listens(o,!0)&&(B&&!Po(O,t)||(f.push(v),B))||O===this._container)break;O=O.parentNode}return!f.length&&!X&&!B&&this.listens(o,!0)&&(f=[this]),f},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var o=t.target||t.srcElement;if(!(!this._loaded||o._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(o))){var f=t.type;f==="mousedown"&&zi(o),this._fireDOMEvent(t,f)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,o,f){if(t.type==="click"){var v=c({},t);v.type="preclick",this._fireDOMEvent(v,v.type,f)}var B=this._findEventTargets(t,o);if(f){for(var O=[],X=0;X<f.length;X++)f[X].listens(o,!0)&&O.push(f[X]);B=O.concat(B)}if(B.length){o==="contextmenu"&&qt(t);var le=B[0],fe={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var we=le.getLatLng&&(!le._radius||le._radius<=10);fe.containerPoint=we?this.latLngToContainerPoint(le.getLatLng()):this.mouseEventToContainerPoint(t),fe.layerPoint=this.containerPointToLayerPoint(fe.containerPoint),fe.latlng=we?le.getLatLng():this.layerPointToLatLng(fe.layerPoint)}for(X=0;X<B.length;X++)if(B[X].fire(o,fe,!0),fe.originalEvent._stopped||B[X].options.bubblingMouseEvents===!1&&F(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,o=this._handlers.length;t<o;t++)this._handlers[t].disable()},whenReady:function(t,o){return this._loaded?t.call(o||this,{target:this}):this.on("load",t,o),this},_getMapPanePos:function(){return Br(this._mapPane)||new W(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,o){var f=t&&o!==void 0?this._getNewPixelOrigin(t,o):this.getPixelOrigin();return f.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,o){var f=this.getSize()._divideBy(2);return this.project(t,o)._subtract(f)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,o,f){var v=this._getNewPixelOrigin(f,o);return this.project(t,o)._subtract(v)},_latLngBoundsToNewLayerBounds:function(t,o,f){var v=this._getNewPixelOrigin(f,o);return z([this.project(t.getSouthWest(),o)._subtract(v),this.project(t.getNorthWest(),o)._subtract(v),this.project(t.getSouthEast(),o)._subtract(v),this.project(t.getNorthEast(),o)._subtract(v)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,o,f){if(!f)return t;var v=this.project(t,o),B=this.getSize().divideBy(2),O=new T(v.subtract(B),v.add(B)),X=this._getBoundsOffset(O,f,o);return Math.abs(X.x)<=1&&Math.abs(X.y)<=1?t:this.unproject(v.add(X),o)},_limitOffset:function(t,o){if(!o)return t;var f=this.getPixelBounds(),v=new T(f.min.add(t),f.max.add(t));return t.add(this._getBoundsOffset(v,o))},_getBoundsOffset:function(t,o,f){var v=z(this.project(o.getNorthEast(),f),this.project(o.getSouthWest(),f)),B=v.min.subtract(t.min),O=v.max.subtract(t.max),X=this._rebound(B.x,-O.x),le=this._rebound(B.y,-O.y);return new W(X,le)},_rebound:function(t,o){return t+o>0?Math.round(t-o)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(o))},_limitZoom:function(t){var o=this.getMinZoom(),f=this.getMaxZoom(),v=Fe.any3d?this.options.zoomSnap:1;return v&&(t=Math.round(t/v)*v),Math.max(o,Math.min(f,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Lt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,o){var f=this._getCenterOffset(t)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(f)?!1:(this.panBy(f,o),!0)},_createAnimProxy:function(){var t=this._proxy=lt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(o){var f=ma,v=this._proxy.style[f];er(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),v===this._proxy.style[f]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){jt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),o=this.getZoom();er(this._proxy,this.project(t,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,o,f){if(this._animatingZoom)return!0;if(f=f||{},!this._zoomAnimated||f.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var v=this.getZoomScale(o),B=this._getCenterOffset(t)._divideBy(1-1/v);return f.animate!==!0&&!this.getSize().contains(B)?!1:(Y(function(){this._moveStart(!0,f.noMoveStart||!1)._animateZoom(t,o,!0)},this),!0)},_animateZoom:function(t,o,f,v){this._mapPane&&(f&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=o,ot(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:o,noUpdate:v}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(p(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Lt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ur(t,o){return new At(t,o)}var Ln=ae.extend({options:{position:"topright"},initialize:function(t){C(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var o=this._map;return o&&o.removeControl(this),this.options.position=t,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var o=this._container=this.onAdd(t),f=this.getPosition(),v=t._controlCorners[f];return ot(o,"leaflet-control"),f.indexOf("bottom")!==-1?v.insertBefore(o,v.firstChild):v.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(jt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Zr=function(t){return new Ln(t)};At.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},o="leaflet-",f=this._controlContainer=lt("div",o+"control-container",this._container);function v(B,O){var X=o+B+" "+o+O;t[B+O]=lt("div",X,f)}v("top","left"),v("top","right"),v("bottom","left"),v("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)jt(this._controlCorners[t]);jt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var va=Ln.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,o,f,v){return f<v?-1:v<f?1:0}},initialize:function(t,o,f){C(this,f),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var v in t)this._addLayer(t[v],v);for(v in o)this._addLayer(o[v],v,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Ln.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,o){return this._addLayer(t,o),this._map?this._update():this},addOverlay:function(t,o){return this._addLayer(t,o,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var o=this._getLayer(g(t));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){ot(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(ot(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):Lt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Lt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",o=this._container=lt("div",t),f=this.options.collapsed;o.setAttribute("aria-haspopup",!0),So(o),As(o);var v=this._section=lt("section",t+"-list");f&&(this._map.on("click",this.collapse,this),nt(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var B=this._layersLink=lt("a",t+"-toggle",o);B.href="#",B.title="Layers",B.setAttribute("role","button"),nt(B,{keydown:function(O){O.keyCode===13&&this._expandSafely()},click:function(O){qt(O),this._expandSafely()}},this),f||this.expand(),this._baseLayersList=lt("div",t+"-base",v),this._separator=lt("div",t+"-separator",v),this._overlaysList=lt("div",t+"-overlays",v),o.appendChild(v)},_getLayer:function(t){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&g(this._layers[o].layer)===t)return this._layers[o]},_addLayer:function(t,o,f){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:o,overlay:f}),this.options.sortLayers&&this._layers.sort(p(function(v,B){return this.options.sortFunction(v.layer,B.layer,v.name,B.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;fs(this._baseLayersList),fs(this._overlaysList),this._layerControlInputs=[];var t,o,f,v,B=0;for(f=0;f<this._layers.length;f++)v=this._layers[f],this._addItem(v),o=o||v.overlay,t=t||!v.overlay,B+=v.overlay?0:1;return this.options.hideSingleBase&&(t=t&&B>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=o&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var o=this._getLayer(g(t.target)),f=o.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;f&&this._map.fire(f,o)},_createRadioElement:function(t,o){var f='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(o?' checked="checked"':"")+"/>",v=document.createElement("div");return v.innerHTML=f,v.firstChild},_addItem:function(t){var o=document.createElement("label"),f=this._map.hasLayer(t.layer),v;t.overlay?(v=document.createElement("input"),v.type="checkbox",v.className="leaflet-control-layers-selector",v.defaultChecked=f):v=this._createRadioElement("leaflet-base-layers_"+g(this),f),this._layerControlInputs.push(v),v.layerId=g(t.layer),nt(v,"click",this._onInputClick,this);var B=document.createElement("span");B.innerHTML=" "+t.name;var O=document.createElement("span");o.appendChild(O),O.appendChild(v),O.appendChild(B);var X=t.overlay?this._overlaysList:this._baseLayersList;return X.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,o,f,v=[],B=[];this._handlingClick=!0;for(var O=t.length-1;O>=0;O--)o=t[O],f=this._getLayer(o.layerId).layer,o.checked?v.push(f):o.checked||B.push(f);for(O=0;O<B.length;O++)this._map.hasLayer(B[O])&&this._map.removeLayer(B[O]);for(O=0;O<v.length;O++)this._map.hasLayer(v[O])||this._map.addLayer(v[O]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,o,f,v=this._map.getZoom(),B=t.length-1;B>=0;B--)o=t[B],f=this._getLayer(o.layerId).layer,o.disabled=f.options.minZoom!==void 0&&v<f.options.minZoom||f.options.maxZoom!==void 0&&v>f.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,nt(t,"click",qt),this.expand();var o=this;setTimeout(function(){Dt(t,"click",qt),o._preventClick=!1})}}),_s=function(t,o,f){return new va(t,o,f)},Hi=Ln.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var o="leaflet-control-zoom",f=lt("div",o+" leaflet-bar"),v=this.options;return this._zoomInButton=this._createButton(v.zoomInText,v.zoomInTitle,o+"-in",f,this._zoomIn),this._zoomOutButton=this._createButton(v.zoomOutText,v.zoomOutTitle,o+"-out",f,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),f},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,o,f,v,B){var O=lt("a",f,v);return O.innerHTML=t,O.href="#",O.title=o,O.setAttribute("role","button"),O.setAttribute("aria-label",o),So(O),nt(O,"click",nr),nt(O,"click",B,this),nt(O,"click",this._refocusOnMap,this),O},_updateDisabled:function(){var t=this._map,o="leaflet-disabled";Lt(this._zoomInButton,o),Lt(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(ot(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(ot(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});At.mergeOptions({zoomControl:!0}),At.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Hi,this.addControl(this.zoomControl))});var Il=function(t){return new Hi(t)},kn=Ln.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var o="leaflet-control-scale",f=lt("div",o),v=this.options;return this._addScales(v,o+"-line",f),t.on(v.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),f},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,o,f){t.metric&&(this._mScale=lt("div",o,f)),t.imperial&&(this._iScale=lt("div",o,f))},_update:function(){var t=this._map,o=t.getSize().y/2,f=t.distance(t.containerPointToLatLng([0,o]),t.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(f)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var o=this._getRoundNum(t),f=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,f,o/t)},_updateImperial:function(t){var o=t*3.2808399,f,v,B;o>5280?(f=o/5280,v=this._getRoundNum(f),this._updateScale(this._iScale,v+" mi",v/f)):(B=this._getRoundNum(o),this._updateScale(this._iScale,B+" ft",B/o))},_updateScale:function(t,o,f){t.style.width=Math.round(this.options.maxWidth*f)+"px",t.innerHTML=o},_getRoundNum:function(t){var o=Math.pow(10,(Math.floor(t)+"").length-1),f=t/o;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:1,o*f}}),Vi=function(t){return new kn(t)},ya='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ui=Ln.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Fe.inlineSvg?ya+" ":"")+"Leaflet</a>"},initialize:function(t){C(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=lt("div","leaflet-control-attribution"),So(this._container);for(var o in t._layers)t._layers[o].getAttribution&&this.addAttribution(t._layers[o].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var o in this._attributions)this._attributions[o]&&t.push(o);var f=[];this.options.prefix&&f.push(this.options.prefix),t.length&&f.push(t.join(", ")),this._container.innerHTML=f.join(' <span aria-hidden="true">|</span> ')}}});At.mergeOptions({attributionControl:!0}),At.addInitHook(function(){this.options.attributionControl&&new ui().addTo(this)});var Pd=function(t){return new ui(t)};Ln.Layers=va,Ln.Zoom=Hi,Ln.Scale=kn,Ln.Attribution=ui,Zr.layers=_s,Zr.zoom=Il,Zr.scale=Vi,Zr.attribution=Pd;var Un=ae.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Un.addTo=function(t,o){return t.addHandler(o,this),this};var _a={Events:G},Ui=Fe.touch?"touchstart mousedown":"mousedown",rr=se.extend({options:{clickTolerance:3},initialize:function(t,o,f,v){C(this,v),this._element=t,this._dragStartTarget=o||t,this._preventOutline=f},enable:function(){this._enabled||(nt(this._dragStartTarget,Ui,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(rr._dragging===this&&this.finishDrag(!0),Dt(this._dragStartTarget,Ui,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!Ii(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){rr._dragging===this&&this.finishDrag();return}if(!(rr._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(rr._dragging=this,this._preventOutline&&zi(this._element),ms(),_t(),!this._moving)){this.fire("down");var o=t.touches?t.touches[0]:t,f=Pr(this._element);this._startPoint=new W(o.clientX,o.clientY),this._startPos=Br(this._element),this._parentScale=fr(f);var v=t.type==="mousedown";nt(document,v?"mousemove":"touchmove",this._onMove,this),nt(document,v?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var o=t.touches&&t.touches.length===1?t.touches[0]:t,f=new W(o.clientX,o.clientY)._subtract(this._startPoint);!f.x&&!f.y||Math.abs(f.x)+Math.abs(f.y)<this.options.clickTolerance||(f.x/=this._parentScale.x,f.y/=this._parentScale.y,qt(t),this._moved||(this.fire("dragstart"),this._moved=!0,ot(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ot(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Qt(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){Lt(document.body,"leaflet-dragging"),this._lastTarget&&(Lt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Dt(document,"mousemove touchmove",this._onMove,this),Dt(document,"mouseup touchend touchcancel",this._onUp,this),gs(),ji();var o=this._moved&&this._moving;this._moving=!1,rr._dragging=!1,o&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function wa(t,o,f){var v,B=[1,4,2,8],O,X,le,fe,we,Re,Qe,dt;for(O=0,Re=t.length;O<Re;O++)t[O]._code=di(t[O],o);for(le=0;le<4;le++){for(Qe=B[le],v=[],O=0,Re=t.length,X=Re-1;O<Re;X=O++)fe=t[O],we=t[X],fe._code&Qe?we._code&Qe||(dt=bs(we,fe,Qe,o,f),dt._code=di(dt,o),v.push(dt)):(we._code&Qe&&(dt=bs(we,fe,Qe,o,f),dt._code=di(dt,o),v.push(dt)),v.push(fe));t=v}return t}function Ol(t,o){var f,v,B,O,X,le,fe,we,Re;if(!t||t.length===0)throw new Error("latlngs not passed");Zn(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var Qe=pe([0,0]),dt=$(t),ln=dt.getNorthWest().distanceTo(dt.getSouthWest())*dt.getNorthEast().distanceTo(dt.getNorthWest());ln<1700&&(Qe=ba(t));var rn=t.length,In=[];for(f=0;f<rn;f++){var Sn=pe(t[f]);In.push(o.project(pe([Sn.lat-Qe.lat,Sn.lng-Qe.lng])))}for(le=fe=we=0,f=0,v=rn-1;f<rn;v=f++)B=In[f],O=In[v],X=B.y*O.x-O.y*B.x,fe+=(B.x+O.x)*X,we+=(B.y+O.y)*X,le+=X*3;le===0?Re=In[0]:Re=[fe/le,we/le];var Ji=o.unproject(V(Re));return pe([Ji.lat+Qe.lat,Ji.lng+Qe.lng])}function ba(t){for(var o=0,f=0,v=0,B=0;B<t.length;B++){var O=pe(t[B]);o+=O.lat,f+=O.lng,v++}return pe([o/v,f/v])}var Td={__proto__:null,clipPolygon:wa,polygonCenter:Ol,centroid:ba};function ws(t,o){if(!o||!t.length)return t.slice();var f=o*o;return t=Nd(t,f),t=Rd(t,f),t}function jl(t,o,f){return Math.sqrt(fi(t,o,f,!0))}function Dd(t,o,f){return fi(t,o,f)}function Rd(t,o){var f=t.length,v=typeof Uint8Array<"u"?Uint8Array:Array,B=new v(f);B[0]=B[f-1]=1,Ca(t,B,o,0,f-1);var O,X=[];for(O=0;O<f;O++)B[O]&&X.push(t[O]);return X}function Ca(t,o,f,v,B){var O=0,X,le,fe;for(le=v+1;le<=B-1;le++)fe=fi(t[le],t[v],t[B],!0),fe>O&&(X=le,O=fe);O>f&&(o[X]=1,Ca(t,o,f,v,X),Ca(t,o,f,X,B))}function Nd(t,o){for(var f=[t[0]],v=1,B=0,O=t.length;v<O;v++)Fd(t[v],t[B])>o&&(f.push(t[v]),B=v);return B<O-1&&f.push(t[O-1]),f}var Ea;function zl(t,o,f,v,B){var O=v?Ea:di(t,f),X=di(o,f),le,fe,we;for(Ea=X;;){if(!(O|X))return[t,o];if(O&X)return!1;le=O||X,fe=bs(t,o,le,f,B),we=di(fe,f),le===O?(t=fe,O=we):(o=fe,X=we)}}function bs(t,o,f,v,B){var O=o.x-t.x,X=o.y-t.y,le=v.min,fe=v.max,we,Re;return f&8?(we=t.x+O*(fe.y-t.y)/X,Re=fe.y):f&4?(we=t.x+O*(le.y-t.y)/X,Re=le.y):f&2?(we=fe.x,Re=t.y+X*(fe.x-t.x)/O):f&1&&(we=le.x,Re=t.y+X*(le.x-t.x)/O),new W(we,Re,B)}function di(t,o){var f=0;return t.x<o.min.x?f|=1:t.x>o.max.x&&(f|=2),t.y<o.min.y?f|=4:t.y>o.max.y&&(f|=8),f}function Fd(t,o){var f=o.x-t.x,v=o.y-t.y;return f*f+v*v}function fi(t,o,f,v){var B=o.x,O=o.y,X=f.x-B,le=f.y-O,fe=X*X+le*le,we;return fe>0&&(we=((t.x-B)*X+(t.y-O)*le)/fe,we>1?(B=f.x,O=f.y):we>0&&(B+=X*we,O+=le*we)),X=t.x-B,le=t.y-O,v?X*X+le*le:new W(B,O)}function Zn(t){return!N(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Hl(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Zn(t)}function Vl(t,o){var f,v,B,O,X,le,fe,we;if(!t||t.length===0)throw new Error("latlngs not passed");Zn(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var Re=pe([0,0]),Qe=$(t),dt=Qe.getNorthWest().distanceTo(Qe.getSouthWest())*Qe.getNorthEast().distanceTo(Qe.getNorthWest());dt<1700&&(Re=ba(t));var ln=t.length,rn=[];for(f=0;f<ln;f++){var In=pe(t[f]);rn.push(o.project(pe([In.lat-Re.lat,In.lng-Re.lng])))}for(f=0,v=0;f<ln-1;f++)v+=rn[f].distanceTo(rn[f+1])/2;if(v===0)we=rn[0];else for(f=0,O=0;f<ln-1;f++)if(X=rn[f],le=rn[f+1],B=X.distanceTo(le),O+=B,O>v){fe=(O-v)/B,we=[le.x-fe*(le.x-X.x),le.y-fe*(le.y-X.y)];break}var Sn=o.unproject(V(we));return pe([Sn.lat+Re.lat,Sn.lng+Re.lng])}var Ul={__proto__:null,simplify:ws,pointToSegmentDistance:jl,closestPointOnSegment:Dd,clipSegment:zl,_getEdgeIntersection:bs,_getBitCode:di,_sqClosestPointOnSegment:fi,isFlat:Zn,_flat:Hl,polylineCenter:Vl},ka={project:function(t){return new W(t.lng,t.lat)},unproject:function(t){return new ue(t.y,t.x)},bounds:new T([-180,-90],[180,90])},Sa={R:6378137,R_MINOR:6356752314245179e-9,bounds:new T([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var o=Math.PI/180,f=this.R,v=t.lat*o,B=this.R_MINOR/f,O=Math.sqrt(1-B*B),X=O*Math.sin(v),le=Math.tan(Math.PI/4-v/2)/Math.pow((1-X)/(1+X),O/2);return v=-f*Math.log(Math.max(le,1e-10)),new W(t.lng*o*f,v)},unproject:function(t){for(var o=180/Math.PI,f=this.R,v=this.R_MINOR/f,B=Math.sqrt(1-v*v),O=Math.exp(-t.y/f),X=Math.PI/2-2*Math.atan(O),le=0,fe=.1,we;le<15&&Math.abs(fe)>1e-7;le++)we=B*Math.sin(X),we=Math.pow((1-we)/(1+we),B/2),fe=Math.PI/2-2*Math.atan(O*we)-X,X+=fe;return new ue(X*o,t.x*o/f)}},Ld={__proto__:null,LonLat:ka,Mercator:Sa,SphericalMercator:Pe},Md=c({},me,{code:"EPSG:3395",projection:Sa,transformation:(function(){var t=.5/(Math.PI*Sa.R);return Ke(t,.5,-t,.5)})()}),Zl=c({},me,{code:"EPSG:4326",projection:ka,transformation:Ke(1/180,1,-1/180,.5)}),Id=c({},ve,{projection:ka,transformation:Ke(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,o){var f=o.lng-t.lng,v=o.lat-t.lat;return Math.sqrt(f*f+v*v)},infinite:!0});ve.Earth=me,ve.EPSG3395=Md,ve.EPSG3857=ke,ve.EPSG900913=Ve,ve.EPSG4326=Zl,ve.Simple=Id;var ir=se.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[g(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[g(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var o=t.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var f=this.getEvents();o.on(f,this),this.once("remove",function(){o.off(f,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});At.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var o=g(t);return this._layers[o]?this:(this._layers[o]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var o=g(t);return this._layers[o]?(this._loaded&&t.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return g(t)in this._layers},eachLayer:function(t,o){for(var f in this._layers)t.call(o,this._layers[f]);return this},_addLayers:function(t){t=t?N(t)?t:[t]:[];for(var o=0,f=t.length;o<f;o++)this.addLayer(t[o])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[g(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var o=g(t);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,o=-1/0,f=this._getZoomSpan();for(var v in this._zoomBoundLayers){var B=this._zoomBoundLayers[v].options;t=B.minZoom===void 0?t:Math.min(t,B.minZoom),o=B.maxZoom===void 0?o:Math.max(o,B.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=t===1/0?void 0:t,f!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Wr=ir.extend({initialize:function(t,o){C(this,o),this._layers={};var f,v;if(t)for(f=0,v=t.length;f<v;f++)this.addLayer(t[f])},addLayer:function(t){var o=this.getLayerId(t);return this._layers[o]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var o=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(t){var o=typeof t=="number"?t:this.getLayerId(t);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var o=Array.prototype.slice.call(arguments,1),f,v;for(f in this._layers)v=this._layers[f],v[t]&&v[t].apply(v,o);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,o){for(var f in this._layers)t.call(o,this._layers[f]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return g(t)}}),To=function(t,o){return new Wr(t,o)},Tr=Wr.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Wr.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Wr.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new q;for(var o in this._layers){var f=this._layers[o];t.extend(f.getBounds?f.getBounds():f.getLatLng())}return t}}),Wl=function(t,o){return new Tr(t,o)},hi=ae.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){C(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,o){var f=this._getIconUrl(t);if(!f){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var v=this._createImg(f,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(v,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),v},_setIconStyles:function(t,o){var f=this.options,v=f[o+"Size"];typeof v=="number"&&(v=[v,v]);var B=V(v),O=V(o==="shadow"&&f.shadowAnchor||f.iconAnchor||B&&B.divideBy(2,!0));t.className="leaflet-marker-"+o+" "+(f.className||""),O&&(t.style.marginLeft=-O.x+"px",t.style.marginTop=-O.y+"px"),B&&(t.style.width=B.x+"px",t.style.height=B.y+"px")},_createImg:function(t,o){return o=o||document.createElement("img"),o.src=t,o},_getIconUrl:function(t){return Fe.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function ql(t){return new hi(t)}var Zi=hi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Zi.imagePath!="string"&&(Zi.imagePath=this._detectIconPath()),(this.options.imagePath||Zi.imagePath)+hi.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var o=function(f,v,B){var O=v.exec(f);return O&&O[B]};return t=o(t,/^url\((['"])?(.+)\1\)$/,2),t&&o(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=lt("div","leaflet-default-icon-path",document.body),o=bo(t,"background-image")||bo(t,"backgroundImage");if(document.body.removeChild(t),o=this._stripUrl(o),o)return o;var f=document.querySelector('link[href$="leaflet.css"]');return f?f.href.substring(0,f.href.length-11-1):""}}),Ba=Un.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new rr(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ot(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Lt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var o=this._marker,f=o._map,v=this._marker.options.autoPanSpeed,B=this._marker.options.autoPanPadding,O=Br(o._icon),X=f.getPixelBounds(),le=f.getPixelOrigin(),fe=z(X.min._subtract(le).add(B),X.max._subtract(le).subtract(B));if(!fe.contains(O)){var we=V((Math.max(fe.max.x,O.x)-fe.max.x)/(X.max.x-fe.max.x)-(Math.min(fe.min.x,O.x)-fe.min.x)/(X.min.x-fe.min.x),(Math.max(fe.max.y,O.y)-fe.max.y)/(X.max.y-fe.max.y)-(Math.min(fe.min.y,O.y)-fe.min.y)/(X.min.y-fe.min.y)).multiplyBy(v);f.panBy(we,{animate:!1}),this._draggable._newPos._add(we),this._draggable._startPos._add(we),Qt(o._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=Y(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(te(this._panRequest),this._panRequest=Y(this._adjustPan.bind(this,t)))},_onDrag:function(t){var o=this._marker,f=o._shadow,v=Br(o._icon),B=o._map.layerPointToLatLng(v);f&&Qt(f,v),o._latlng=B,t.latlng=B,t.oldLatLng=this._oldLatLng,o.fire("move",t).fire("drag",t)},_onDragEnd:function(t){te(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Dr=ir.extend({options:{icon:new Zi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,o){C(this,o),this._latlng=pe(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var o=this._latlng;return this._latlng=pe(t),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),f=t.icon.createIcon(this._icon),v=!1;f!==this._icon&&(this._icon&&this._removeIcon(),v=!0,t.title&&(f.title=t.title),f.tagName==="IMG"&&(f.alt=t.alt||"")),ot(f,o),t.keyboard&&(f.tabIndex="0",f.setAttribute("role","button")),this._icon=f,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&nt(f,"focus",this._panOnFocus,this);var B=t.icon.createShadow(this._shadow),O=!1;B!==this._shadow&&(this._removeShadow(),O=!0),B&&(ot(B,o),B.alt=""),this._shadow=B,t.opacity<1&&this._updateOpacity(),v&&this.getPane().appendChild(this._icon),this._initInteraction(),B&&O&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Dt(this._icon,"focus",this._panOnFocus,this),jt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&jt(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&Qt(this._icon,t),this._shadow&&Qt(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(ot(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ba)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ba(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&En(this._icon,t),this._shadow&&En(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var o=this.options.icon.options,f=o.iconSize?V(o.iconSize):V(0,0),v=o.iconAnchor?V(o.iconAnchor):V(0,0);t.panInside(this._latlng,{paddingTopLeft:v,paddingBottomRight:f.subtract(v)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Od(t,o){return new Dr(t,o)}var qr=ir.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return C(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Cs=qr.extend({options:{fill:!0,radius:10},initialize:function(t,o){C(this,o),this._latlng=pe(t),this._radius=this.options.radius},setLatLng:function(t){var o=this._latlng;return this._latlng=pe(t),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var o=t&&t.radius||this._radius;return qr.prototype.setStyle.call(this,t),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,o=this._radiusY||t,f=this._clickTolerance(),v=[t+f,o+f];this._pxBounds=new T(this._point.subtract(v),this._point.add(v))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Gl(t,o){return new Cs(t,o)}var Es=Cs.extend({initialize:function(t,o,f){if(typeof o=="number"&&(o=c({},f,{radius:o})),C(this,o),this._latlng=pe(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new q(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:qr.prototype.setStyle,_project:function(){var t=this._latlng.lng,o=this._latlng.lat,f=this._map,v=f.options.crs;if(v.distance===me.distance){var B=Math.PI/180,O=this._mRadius/me.R/B,X=f.project([o+O,t]),le=f.project([o-O,t]),fe=X.add(le).divideBy(2),we=f.unproject(fe).lat,Re=Math.acos((Math.cos(O*B)-Math.sin(o*B)*Math.sin(we*B))/(Math.cos(o*B)*Math.cos(we*B)))/B;(isNaN(Re)||Re===0)&&(Re=O/Math.cos(Math.PI/180*o)),this._point=fe.subtract(f.getPixelOrigin()),this._radius=isNaN(Re)?0:fe.x-f.project([we,t-Re]).x,this._radiusY=fe.y-X.y}else{var Qe=v.unproject(v.project(this._latlng).subtract([this._mRadius,0]));this._point=f.latLngToLayerPoint(this._latlng),this._radius=this._point.x-f.latLngToLayerPoint(Qe).x}this._updateBounds()}});function Do(t,o,f){return new Es(t,o,f)}var Mn=qr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,o){C(this,o),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var o=1/0,f=null,v=fi,B,O,X=0,le=this._parts.length;X<le;X++)for(var fe=this._parts[X],we=1,Re=fe.length;we<Re;we++){B=fe[we-1],O=fe[we];var Qe=v(t,B,O,!0);Qe<o&&(o=Qe,f=v(t,B,O))}return f&&(f.distance=Math.sqrt(o)),f},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Vl(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,o){return o=o||this._defaultShape(),t=pe(t),o.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new q,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Zn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var o=[],f=Zn(t),v=0,B=t.length;v<B;v++)f?(o[v]=pe(t[v]),this._bounds.extend(o[v])):o[v]=this._convertLatLngs(t[v]);return o},_project:function(){var t=new T;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),o=new W(t,t);this._rawPxBounds&&(this._pxBounds=new T([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(t,o,f){var v=t[0]instanceof ue,B=t.length,O,X;if(v){for(X=[],O=0;O<B;O++)X[O]=this._map.latLngToLayerPoint(t[O]),f.extend(X[O]);o.push(X)}else for(O=0;O<B;O++)this._projectLatlngs(t[O],o,f)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,f,v,B,O,X,le,fe;for(f=0,B=0,O=this._rings.length;f<O;f++)for(fe=this._rings[f],v=0,X=fe.length;v<X-1;v++)le=zl(fe[v],fe[v+1],t,v,!0),le&&(o[B]=o[B]||[],o[B].push(le[0]),(le[1]!==fe[v+1]||v===X-2)&&(o[B].push(le[1]),B++))}},_simplifyPoints:function(){for(var t=this._parts,o=this.options.smoothFactor,f=0,v=t.length;f<v;f++)t[f]=ws(t[f],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,o){var f,v,B,O,X,le,fe=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(f=0,O=this._parts.length;f<O;f++)for(le=this._parts[f],v=0,X=le.length,B=X-1;v<X;B=v++)if(!(!o&&v===0)&&jl(t,le[B],le[v])<=fe)return!0;return!1}});function jd(t,o){return new Mn(t,o)}Mn._flat=Hl;var Rr=Mn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ol(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var o=Mn.prototype._convertLatLngs.call(this,t),f=o.length;return f>=2&&o[0]instanceof ue&&o[0].equals(o[f-1])&&o.pop(),o},_setLatLngs:function(t){Mn.prototype._setLatLngs.call(this,t),Zn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Zn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,o=this.options.weight,f=new W(o,o);if(t=new T(t.min.subtract(f),t.max.add(f)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var v=0,B=this._rings.length,O;v<B;v++)O=wa(this._rings[v],t,!0),O.length&&this._parts.push(O)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var o=!1,f,v,B,O,X,le,fe,we;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(O=0,fe=this._parts.length;O<fe;O++)for(f=this._parts[O],X=0,we=f.length,le=we-1;X<we;le=X++)v=f[X],B=f[le],v.y>t.y!=B.y>t.y&&t.x<(B.x-v.x)*(t.y-v.y)/(B.y-v.y)+v.x&&(o=!o);return o||Mn.prototype._containsPoint.call(this,t,!0)}});function zd(t,o){return new Rr(t,o)}var pr=Tr.extend({initialize:function(t,o){C(this,o),this._layers={},t&&this.addData(t)},addData:function(t){var o=N(t)?t:t.features,f,v,B;if(o){for(f=0,v=o.length;f<v;f++)B=o[f],(B.geometries||B.geometry||B.features||B.coordinates)&&this.addData(B);return this}var O=this.options;if(O.filter&&!O.filter(t))return this;var X=Wi(t,O);return X?(X.feature=Ts(t),X.defaultOptions=X.options,this.resetStyle(X),O.onEachFeature&&O.onEachFeature(t,X),this.addLayer(X)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=c({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(o){this._setLayerStyle(o,t)},this)},_setLayerStyle:function(t,o){t.setStyle&&(typeof o=="function"&&(o=o(t.feature)),t.setStyle(o))}});function Wi(t,o){var f=t.type==="Feature"?t.geometry:t,v=f?f.coordinates:null,B=[],O=o&&o.pointToLayer,X=o&&o.coordsToLatLng||Ss,le,fe,we,Re;if(!v&&!f)return null;switch(f.type){case"Point":return le=X(v),ks(O,t,le,o);case"MultiPoint":for(we=0,Re=v.length;we<Re;we++)le=X(v[we]),B.push(ks(O,t,le,o));return new Tr(B);case"LineString":case"MultiLineString":return fe=Ro(v,f.type==="LineString"?0:1,X),new Mn(fe,o);case"Polygon":case"MultiPolygon":return fe=Ro(v,f.type==="Polygon"?1:2,X),new Rr(fe,o);case"GeometryCollection":for(we=0,Re=f.geometries.length;we<Re;we++){var Qe=Wi({geometry:f.geometries[we],type:"Feature",properties:t.properties},o);Qe&&B.push(Qe)}return new Tr(B);case"FeatureCollection":for(we=0,Re=f.features.length;we<Re;we++){var dt=Wi(f.features[we],o);dt&&B.push(dt)}return new Tr(B);default:throw new Error("Invalid GeoJSON object.")}}function ks(t,o,f,v){return t?t(o,f):new Dr(f,v&&v.markersInheritOptions&&v)}function Ss(t){return new ue(t[1],t[0],t[2])}function Ro(t,o,f){for(var v=[],B=0,O=t.length,X;B<O;B++)X=o?Ro(t[B],o-1,f):(f||Ss)(t[B]),v.push(X);return v}function Bs(t,o){return t=pe(t),t.alt!==void 0?[b(t.lng,o),b(t.lat,o),b(t.alt,o)]:[b(t.lng,o),b(t.lat,o)]}function Ps(t,o,f,v){for(var B=[],O=0,X=t.length;O<X;O++)B.push(o?Ps(t[O],Zn(t[O])?0:o-1,f,v):Bs(t[O],v));return!o&&f&&B.length>0&&B.push(B[0].slice()),B}function qi(t,o){return t.feature?c({},t.feature,{geometry:o}):Ts(o)}function Ts(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Pa={toGeoJSON:function(t){return qi(this,{type:"Point",coordinates:Bs(this.getLatLng(),t)})}};Dr.include(Pa),Es.include(Pa),Cs.include(Pa),Mn.include({toGeoJSON:function(t){var o=!Zn(this._latlngs),f=Ps(this._latlngs,o?1:0,!1,t);return qi(this,{type:(o?"Multi":"")+"LineString",coordinates:f})}}),Rr.include({toGeoJSON:function(t){var o=!Zn(this._latlngs),f=o&&!Zn(this._latlngs[0]),v=Ps(this._latlngs,f?2:o?1:0,!0,t);return o||(v=[v]),qi(this,{type:(f?"Multi":"")+"Polygon",coordinates:v})}}),Wr.include({toMultiPoint:function(t){var o=[];return this.eachLayer(function(f){o.push(f.toGeoJSON(t).geometry.coordinates)}),qi(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(t){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(t);var f=o==="GeometryCollection",v=[];return this.eachLayer(function(B){if(B.toGeoJSON){var O=B.toGeoJSON(t);if(f)v.push(O.geometry);else{var X=Ts(O);X.type==="FeatureCollection"?v.push.apply(v,X.features):v.push(X)}}}),f?qi(this,{geometries:v,type:"GeometryCollection"}):{type:"FeatureCollection",features:v}}});function $l(t,o){return new pr(t,o)}var or=$l,Gr=ir.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,o,f){this._url=t,this._bounds=$(o),C(this,f)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ot(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){jt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Mi(this._image),this},bringToBack:function(){return this._map&&Sr(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=$(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",o=this._image=t?this._url:lt("img");if(ot(o,"leaflet-image-layer"),this._zoomAnimated&&ot(o,"leaflet-zoom-animated"),this.options.className&&ot(o,this.options.className),o.onselectstart=A,o.onmousemove=A,o.onload=p(this.fire,this,"load"),o.onerror=p(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(t){var o=this._map.getZoomScale(t.zoom),f=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;er(this._image,f,o)},_reset:function(){var t=this._image,o=new T(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),f=o.getSize();Qt(t,o.min),t.style.width=f.x+"px",t.style.height=f.y+"px"},_updateOpacity:function(){En(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Kl=function(t,o,f){return new Gr(t,o,f)},Ta=Gr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",o=this._image=t?this._url:lt("video");if(ot(o,"leaflet-image-layer"),this._zoomAnimated&&ot(o,"leaflet-zoom-animated"),this.options.className&&ot(o,this.options.className),o.onselectstart=A,o.onmousemove=A,o.onloadeddata=p(this.fire,this,"load"),t){for(var f=o.getElementsByTagName("source"),v=[],B=0;B<f.length;B++)v.push(f[B].src);this._url=f.length>0?v:[o.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var O=0;O<this._url.length;O++){var X=lt("source");X.src=this._url[O],o.appendChild(X)}}});function Ql(t,o,f){return new Ta(t,o,f)}var Da=Gr.extend({_initImage:function(){var t=this._image=this._url;ot(t,"leaflet-image-layer"),this._zoomAnimated&&ot(t,"leaflet-zoom-animated"),this.options.className&&ot(t,this.options.className),t.onselectstart=A,t.onmousemove=A}});function Ra(t,o,f){return new Da(t,o,f)}var mr=ir.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,o){t&&(t instanceof ue||N(t))?(this._latlng=pe(t),C(this,o)):(C(this,t),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&En(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&En(this._container,1),this.bringToFront(),this.options.interactive&&(ot(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(En(this._container,0),this._removeTimeout=setTimeout(p(jt,void 0,this._container),200)):jt(this._container),this.options.interactive&&(Lt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=pe(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Mi(this._container),this},bringToBack:function(){return this._map&&Sr(this._container),this},_prepareOpen:function(t){var o=this._source;if(!o._map)return!1;if(o instanceof Tr){o=null;var f=this._source._layers;for(var v in f)if(f[v]._map){o=f[v];break}if(!o)return!1;this._source=o}if(!t)if(o.getCenter)t=o.getCenter();else if(o.getLatLng)t=o.getLatLng();else if(o.getBounds)t=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")t.innerHTML=o;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),o=V(this.options.offset),f=this._getAnchor();this._zoomAnimated?Qt(this._container,t.add(f)):o=o.add(t).add(f);var v=this._containerBottom=-o.y,B=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=v+"px",this._container.style.left=B+"px"}},_getAnchor:function(){return[0,0]}});At.include({_initOverlay:function(t,o,f,v){var B=o;return B instanceof t||(B=new t(v).setContent(o)),f&&B.setLatLng(f),B}}),ir.include({_initOverlay:function(t,o,f,v){var B=f;return B instanceof t?(C(B,v),B._source=this):(B=o&&!v?o:new t(v,this),B.setContent(f)),B}});var Ds=mr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,mr.prototype.openOn.call(this,t)},onAdd:function(t){mr.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof qr||this._source.on("preclick",hr))},onRemove:function(t){mr.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof qr||this._source.off("preclick",hr))},getEvents:function(){var t=mr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",o=this._container=lt("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),f=this._wrapper=lt("div",t+"-content-wrapper",o);if(this._contentNode=lt("div",t+"-content",f),So(o),As(this._contentNode),nt(o,"contextmenu",hr),this._tipContainer=lt("div",t+"-tip-container",o),this._tip=lt("div",t+"-tip",this._tipContainer),this.options.closeButton){var v=this._closeButton=lt("a",t+"-close-button",o);v.setAttribute("role","button"),v.setAttribute("aria-label","Close popup"),v.href="#close",v.innerHTML='<span aria-hidden="true">&#215;</span>',nt(v,"click",function(B){qt(B),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,o=t.style;o.width="",o.whiteSpace="nowrap";var f=t.offsetWidth;f=Math.min(f,this.options.maxWidth),f=Math.max(f,this.options.minWidth),o.width=f+1+"px",o.whiteSpace="",o.height="";var v=t.offsetHeight,B=this.options.maxHeight,O="leaflet-popup-scrolled";B&&v>B?(o.height=B+"px",ot(t,O)):Lt(t,O),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),f=this._getAnchor();Qt(this._container,o.add(f))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,o=parseInt(bo(this._container,"marginBottom"),10)||0,f=this._container.offsetHeight+o,v=this._containerWidth,B=new W(this._containerLeft,-f-this._containerBottom);B._add(Br(this._container));var O=t.layerPointToContainerPoint(B),X=V(this.options.autoPanPadding),le=V(this.options.autoPanPaddingTopLeft||X),fe=V(this.options.autoPanPaddingBottomRight||X),we=t.getSize(),Re=0,Qe=0;O.x+v+fe.x>we.x&&(Re=O.x+v-we.x+fe.x),O.x-Re-le.x<0&&(Re=O.x-le.x),O.y+f+fe.y>we.y&&(Qe=O.y+f-we.y+fe.y),O.y-Qe-le.y<0&&(Qe=O.y-le.y),(Re||Qe)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([Re,Qe]))}},_getAnchor:function(){return V(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Gi=function(t,o){return new Ds(t,o)};At.mergeOptions({closePopupOnClick:!0}),At.include({openPopup:function(t,o,f){return this._initOverlay(Ds,t,o,f).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),ir.include({bindPopup:function(t,o){return this._popup=this._initOverlay(Ds,this._popup,t,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Tr||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){nr(t);var o=t.layer||t.target;if(this._popup._source===o&&!(o instanceof qr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=o,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var $i=mr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){mr.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){mr.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=mr.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",o=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=lt("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+g(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var o,f,v=this._map,B=this._container,O=v.latLngToContainerPoint(v.getCenter()),X=v.layerPointToContainerPoint(t),le=this.options.direction,fe=B.offsetWidth,we=B.offsetHeight,Re=V(this.options.offset),Qe=this._getAnchor();le==="top"?(o=fe/2,f=we):le==="bottom"?(o=fe/2,f=0):le==="center"?(o=fe/2,f=we/2):le==="right"?(o=0,f=we/2):le==="left"?(o=fe,f=we/2):X.x<O.x?(le="right",o=0,f=we/2):(le="left",o=fe+(Re.x+Qe.x)*2,f=we/2),t=t.subtract(V(o,f,!0)).add(Re).add(Qe),Lt(B,"leaflet-tooltip-right"),Lt(B,"leaflet-tooltip-left"),Lt(B,"leaflet-tooltip-top"),Lt(B,"leaflet-tooltip-bottom"),ot(B,"leaflet-tooltip-"+le),Qt(B,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&En(this._container,t)},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(o)},_getAnchor:function(){return V(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),No=function(t,o){return new $i(t,o)};At.include({openTooltip:function(t,o,f){return this._initOverlay($i,t,o,f).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),ir.include({bindTooltip:function(t,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay($i,this._tooltip,t,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var o=t?"off":"on",f={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?f.add=this._openTooltip:(f.mouseover=this._openTooltip,f.mouseout=this.closeTooltip,f.click=this._openTooltip,this._map?this._addFocusListeners():f.add=this._addFocusListeners),this._tooltip.options.sticky&&(f.mousemove=this._moveTooltip),this[o](f),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Tr||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var o=typeof t.getElement=="function"&&t.getElement();o&&(nt(o,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),nt(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var o=typeof t.getElement=="function"&&t.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var o=t.latlng,f,v;this._tooltip.options.sticky&&t.originalEvent&&(f=this._map.mouseEventToContainerPoint(t.originalEvent),v=this._map.containerPointToLayerPoint(f),o=this._map.layerPointToLatLng(v)),this._tooltip.setLatLng(o)}});var Rs=hi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var o=t&&t.tagName==="DIV"?t:document.createElement("div"),f=this.options;if(f.html instanceof Element?(fs(o),o.appendChild(f.html)):o.innerHTML=f.html!==!1?f.html:"",f.bgPos){var v=V(f.bgPos);o.style.backgroundPosition=-v.x+"px "+-v.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function Yl(t){return new Rs(t)}hi.Default=Zi;var $r=ir.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Fe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){C(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),jt(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Mi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Sr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof W?t:new W(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var o=this.getPane().children,f=-t(-1/0,1/0),v=0,B=o.length,O;v<B;v++)O=o[v].style.zIndex,o[v]!==this._container&&O&&(f=t(f,+O));isFinite(f)&&(this.options.zIndex=f+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Fe.ielt9){En(this._container,this.options.opacity);var t=+new Date,o=!1,f=!1;for(var v in this._tiles){var B=this._tiles[v];if(!(!B.current||!B.loaded)){var O=Math.min(1,(t-B.loaded)/200);En(B.el,O),O<1?o=!0:(B.active?f=!0:this._onOpaqueTile(B),B.active=!0)}}f&&!this._noPrune&&this._pruneTiles(),o&&(te(this._fadeFrame),this._fadeFrame=Y(this._updateOpacity,this))}},_onOpaqueTile:A,_initContainer:function(){this._container||(this._container=lt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,o=this.options.maxZoom;if(t!==void 0){for(var f in this._levels)f=Number(f),this._levels[f].el.children.length||f===t?(this._levels[f].el.style.zIndex=o-Math.abs(t-f),this._onUpdateLevel(f)):(jt(this._levels[f].el),this._removeTilesAtZoom(f),this._onRemoveLevel(f),delete this._levels[f]);var v=this._levels[t],B=this._map;return v||(v=this._levels[t]={},v.el=lt("div","leaflet-tile-container leaflet-zoom-animated",this._container),v.el.style.zIndex=o,v.origin=B.project(B.unproject(B.getPixelOrigin()),t).round(),v.zoom=t,this._setZoomTransform(v,B.getCenter(),B.getZoom()),A(v.el.offsetWidth),this._onCreateLevel(v)),this._level=v,v}},_onUpdateLevel:A,_onRemoveLevel:A,_onCreateLevel:A,_pruneTiles:function(){if(this._map){var t,o,f=this._map.getZoom();if(f>this.options.maxZoom||f<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)o=this._tiles[t],o.retain=o.current;for(t in this._tiles)if(o=this._tiles[t],o.current&&!o.active){var v=o.coords;this._retainParent(v.x,v.y,v.z,v.z-5)||this._retainChildren(v.x,v.y,v.z,v.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var o in this._tiles)this._tiles[o].coords.z===t&&this._removeTile(o)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)jt(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,o,f,v){var B=Math.floor(t/2),O=Math.floor(o/2),X=f-1,le=new W(+B,+O);le.z=+X;var fe=this._tileCoordsToKey(le),we=this._tiles[fe];return we&&we.active?(we.retain=!0,!0):(we&&we.loaded&&(we.retain=!0),X>v?this._retainParent(B,O,X,v):!1)},_retainChildren:function(t,o,f,v){for(var B=2*t;B<2*t+2;B++)for(var O=2*o;O<2*o+2;O++){var X=new W(B,O);X.z=f+1;var le=this._tileCoordsToKey(X),fe=this._tiles[le];if(fe&&fe.active){fe.retain=!0;continue}else fe&&fe.loaded&&(fe.retain=!0);f+1<v&&this._retainChildren(B,O,f+1,v)}},_resetView:function(t){var o=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var o=this.options;return o.minNativeZoom!==void 0&&t<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<t?o.maxNativeZoom:t},_setView:function(t,o,f,v){var B=Math.round(o);this.options.maxZoom!==void 0&&B>this.options.maxZoom||this.options.minZoom!==void 0&&B<this.options.minZoom?B=void 0:B=this._clampZoom(B);var O=this.options.updateWhenZooming&&B!==this._tileZoom;(!v||O)&&(this._tileZoom=B,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),B!==void 0&&this._update(t),f||this._pruneTiles(),this._noPrune=!!f),this._setZoomTransforms(t,o)},_setZoomTransforms:function(t,o){for(var f in this._levels)this._setZoomTransform(this._levels[f],t,o)},_setZoomTransform:function(t,o,f){var v=this._map.getZoomScale(f,t.zoom),B=t.origin.multiplyBy(v).subtract(this._map._getNewPixelOrigin(o,f)).round();Fe.any3d?er(t.el,B,v):Qt(t.el,B)},_resetGrid:function(){var t=this._map,o=t.options.crs,f=this._tileSize=this.getTileSize(),v=this._tileZoom,B=this._map.getPixelWorldBounds(this._tileZoom);B&&(this._globalTileRange=this._pxBoundsToTileRange(B)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,o.wrapLng[0]],v).x/f.x),Math.ceil(t.project([0,o.wrapLng[1]],v).x/f.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([o.wrapLat[0],0],v).y/f.x),Math.ceil(t.project([o.wrapLat[1],0],v).y/f.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var o=this._map,f=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),v=o.getZoomScale(f,this._tileZoom),B=o.project(t,this._tileZoom).floor(),O=o.getSize().divideBy(v*2);return new T(B.subtract(O),B.add(O))},_update:function(t){var o=this._map;if(o){var f=this._clampZoom(o.getZoom());if(t===void 0&&(t=o.getCenter()),this._tileZoom!==void 0){var v=this._getTiledPixelBounds(t),B=this._pxBoundsToTileRange(v),O=B.getCenter(),X=[],le=this.options.keepBuffer,fe=new T(B.getBottomLeft().subtract([le,-le]),B.getTopRight().add([le,-le]));if(!(isFinite(B.min.x)&&isFinite(B.min.y)&&isFinite(B.max.x)&&isFinite(B.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var we in this._tiles){var Re=this._tiles[we].coords;(Re.z!==this._tileZoom||!fe.contains(new W(Re.x,Re.y)))&&(this._tiles[we].current=!1)}if(Math.abs(f-this._tileZoom)>1){this._setView(t,f);return}for(var Qe=B.min.y;Qe<=B.max.y;Qe++)for(var dt=B.min.x;dt<=B.max.x;dt++){var ln=new W(dt,Qe);if(ln.z=this._tileZoom,!!this._isValidTile(ln)){var rn=this._tiles[this._tileCoordsToKey(ln)];rn?rn.current=!0:X.push(ln)}}if(X.sort(function(Sn,Ji){return Sn.distanceTo(O)-Ji.distanceTo(O)}),X.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var In=document.createDocumentFragment();for(dt=0;dt<X.length;dt++)this._addTile(X[dt],In);this._level.el.appendChild(In)}}}},_isValidTile:function(t){var o=this._map.options.crs;if(!o.infinite){var f=this._globalTileRange;if(!o.wrapLng&&(t.x<f.min.x||t.x>f.max.x)||!o.wrapLat&&(t.y<f.min.y||t.y>f.max.y))return!1}if(!this.options.bounds)return!0;var v=this._tileCoordsToBounds(t);return $(this.options.bounds).overlaps(v)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var o=this._map,f=this.getTileSize(),v=t.scaleBy(f),B=v.add(f),O=o.unproject(v,t.z),X=o.unproject(B,t.z);return[O,X]},_tileCoordsToBounds:function(t){var o=this._tileCoordsToNwSe(t),f=new q(o[0],o[1]);return this.options.noWrap||(f=this._map.wrapLatLngBounds(f)),f},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var o=t.split(":"),f=new W(+o[0],+o[1]);return f.z=+o[2],f},_removeTile:function(t){var o=this._tiles[t];o&&(jt(o.el),delete this._tiles[t],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){ot(t,"leaflet-tile");var o=this.getTileSize();t.style.width=o.x+"px",t.style.height=o.y+"px",t.onselectstart=A,t.onmousemove=A,Fe.ielt9&&this.options.opacity<1&&En(t,this.options.opacity)},_addTile:function(t,o){var f=this._getTilePos(t),v=this._tileCoordsToKey(t),B=this.createTile(this._wrapCoords(t),p(this._tileReady,this,t));this._initTile(B),this.createTile.length<2&&Y(p(this._tileReady,this,t,null,B)),Qt(B,f),this._tiles[v]={el:B,coords:t,current:!0},o.appendChild(B),this.fire("tileloadstart",{tile:B,coords:t})},_tileReady:function(t,o,f){o&&this.fire("tileerror",{error:o,tile:f,coords:t});var v=this._tileCoordsToKey(t);f=this._tiles[v],f&&(f.loaded=+new Date,this._map._fadeAnimated?(En(f.el,0),te(this._fadeFrame),this._fadeFrame=Y(this._updateOpacity,this)):(f.active=!0,this._pruneTiles()),o||(ot(f.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:f.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Fe.ielt9||!this._map._fadeAnimated?Y(this._pruneTiles,this):setTimeout(p(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var o=new W(this._wrapX?x(t.x,this._wrapX):t.x,this._wrapY?x(t.y,this._wrapY):t.y);return o.z=t.z,o},_pxBoundsToTileRange:function(t){var o=this.getTileSize();return new T(t.min.unscaleBy(o).floor(),t.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Ki(t){return new $r(t)}var Kr=$r.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,o){this._url=t,o=C(this,o),o.detectRetina&&Fe.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,o){return this._url===t&&o===void 0&&(o=!0),this._url=t,o||this.redraw(),this},createTile:function(t,o){var f=document.createElement("img");return nt(f,"load",p(this._tileOnLoad,this,o,f)),nt(f,"error",p(this._tileOnError,this,o,f)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(f.referrerPolicy=this.options.referrerPolicy),f.alt="",f.src=this.getTileUrl(t),f},getTileUrl:function(t){var o={r:Fe.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var f=this._globalTileRange.max.y-t.y;this.options.tms&&(o.y=f),o["-y"]=f}return P(this._url,c(o,this.options))},_tileOnLoad:function(t,o){Fe.ielt9?setTimeout(p(t,this,null,o),0):t(null,o)},_tileOnError:function(t,o,f){var v=this.options.errorTileUrl;v&&o.getAttribute("src")!==v&&(o.src=v),t(f,o)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,o=this.options.maxZoom,f=this.options.zoomReverse,v=this.options.zoomOffset;return f&&(t=o-t),t+v},_getSubdomain:function(t){var o=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var t,o;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(o=this._tiles[t].el,o.onload=A,o.onerror=A,!o.complete)){o.src=M;var f=this._tiles[t].coords;jt(o),delete this._tiles[t],this.fire("tileabort",{tile:o,coords:f})}},_removeTile:function(t){var o=this._tiles[t];if(o)return o.el.setAttribute("src",M),$r.prototype._removeTile.call(this,t)},_tileReady:function(t,o,f){if(!(!this._map||f&&f.getAttribute("src")===M))return $r.prototype._tileReady.call(this,t,o,f)}});function Na(t,o){return new Kr(t,o)}var Fo=Kr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,o){this._url=t;var f=c({},this.defaultWmsParams);for(var v in o)v in this.options||(f[v]=o[v]);o=C(this,o);var B=o.detectRetina&&Fe.retina?2:1,O=this.getTileSize();f.width=O.x*B,f.height=O.y*B,this.wmsParams=f},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,Kr.prototype.onAdd.call(this,t)},getTileUrl:function(t){var o=this._tileCoordsToNwSe(t),f=this._crs,v=z(f.project(o[0]),f.project(o[1])),B=v.min,O=v.max,X=(this._wmsVersion>=1.3&&this._crs===Zl?[B.y,B.x,O.y,O.x]:[B.x,B.y,O.x,O.y]).join(","),le=Kr.prototype.getTileUrl.call(this,t);return le+w(this.wmsParams,le,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+X},setParams:function(t,o){return c(this.wmsParams,t),o||this.redraw(),this}});function Xl(t,o){return new Fo(t,o)}Kr.WMS=Fo,Na.wms=Xl;var gr=ir.extend({options:{padding:.1},initialize:function(t){C(this,t),g(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ot(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,o){var f=this._map.getZoomScale(o,this._zoom),v=this._map.getSize().multiplyBy(.5+this.options.padding),B=this._map.project(this._center,o),O=v.multiplyBy(-f).add(B).subtract(this._map._getNewPixelOrigin(t,o));Fe.any3d?er(this._container,O,f):Qt(this._container,O)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,o=this._map.getSize(),f=this._map.containerPointToLayerPoint(o.multiplyBy(-t)).round();this._bounds=new T(f,f.add(o.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Fa=gr.extend({options:{tolerance:0},getEvents:function(){var t=gr.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){gr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");nt(t,"mousemove",this._onMouseMove,this),nt(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),nt(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){te(this._redrawRequest),delete this._ctx,jt(this._container),Dt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var o in this._layers)t=this._layers[o],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){gr.prototype._update.call(this);var t=this._bounds,o=this._container,f=t.getSize(),v=Fe.retina?2:1;Qt(o,t.min),o.width=v*f.x,o.height=v*f.y,o.style.width=f.x+"px",o.style.height=f.y+"px",Fe.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){gr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[g(t)]=t;var o=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var o=t._order,f=o.next,v=o.prev;f?f.prev=v:this._drawLast=v,v?v.next=f:this._drawFirst=f,delete t._order,delete this._layers[g(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var o=t.options.dashArray.split(/[, ]+/),f=[],v,B;for(B=0;B<o.length;B++){if(v=Number(o[B]),isNaN(v))return;f.push(v)}t.options._dashArray=f}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||Y(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var o=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new T,this._redrawBounds.extend(t._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(t._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var o=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,o=this._redrawBounds;if(this._ctx.save(),o){var f=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,f.x,f.y),this._ctx.clip()}this._drawing=!0;for(var v=this._drawFirst;v;v=v.next)t=v.layer,(!o||t._pxBounds&&t._pxBounds.intersects(o))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,o){if(this._drawing){var f,v,B,O,X=t._parts,le=X.length,fe=this._ctx;if(le){for(fe.beginPath(),f=0;f<le;f++){for(v=0,B=X[f].length;v<B;v++)O=X[f][v],fe[v?"lineTo":"moveTo"](O.x,O.y);o&&fe.closePath()}this._fillStroke(fe,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var o=t._point,f=this._ctx,v=Math.max(Math.round(t._radius),1),B=(Math.max(Math.round(t._radiusY),1)||v)/v;B!==1&&(f.save(),f.scale(1,B)),f.beginPath(),f.arc(o.x,o.y/B,v,0,Math.PI*2,!1),B!==1&&f.restore(),this._fillStroke(f,t)}},_fillStroke:function(t,o){var f=o.options;f.fill&&(t.globalAlpha=f.fillOpacity,t.fillStyle=f.fillColor||f.color,t.fill(f.fillRule||"evenodd")),f.stroke&&f.weight!==0&&(t.setLineDash&&t.setLineDash(o.options&&o.options._dashArray||[]),t.globalAlpha=f.opacity,t.lineWidth=f.weight,t.strokeStyle=f.color,t.lineCap=f.lineCap,t.lineJoin=f.lineJoin,t.stroke())},_onClick:function(t){for(var o=this._map.mouseEventToLayerPoint(t),f,v,B=this._drawFirst;B;B=B.next)f=B.layer,f.options.interactive&&f._containsPoint(o)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(f))&&(v=f);this._fireEvent(v?[v]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,o)}},_handleMouseOut:function(t){var o=this._hoveredLayer;o&&(Lt(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,o){if(!this._mouseHoverThrottled){for(var f,v,B=this._drawFirst;B;B=B.next)f=B.layer,f.options.interactive&&f._containsPoint(o)&&(v=f);v!==this._hoveredLayer&&(this._handleMouseOut(t),v&&(ot(this._container,"leaflet-interactive"),this._fireEvent([v],t,"mouseover"),this._hoveredLayer=v)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(p(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,o,f){this._map._fireDOMEvent(o,f||o.type,t)},_bringToFront:function(t){var o=t._order;if(o){var f=o.next,v=o.prev;if(f)f.prev=v;else return;v?v.next=f:f&&(this._drawFirst=f),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(t)}},_bringToBack:function(t){var o=t._order;if(o){var f=o.next,v=o.prev;if(v)v.next=f;else return;f?f.prev=v:v&&(this._drawLast=v),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(t)}}});function La(t){return Fe.canvas?new Fa(t):null}var Qi=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Jl={_initContainer:function(){this._container=lt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(gr.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var o=t._container=Qi("shape");ot(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",t._path=Qi("path"),o.appendChild(t._path),this._updateStyle(t),this._layers[g(t)]=t},_addPath:function(t){var o=t._container;this._container.appendChild(o),t.options.interactive&&t.addInteractiveTarget(o)},_removePath:function(t){var o=t._container;jt(o),t.removeInteractiveTarget(o),delete this._layers[g(t)]},_updateStyle:function(t){var o=t._stroke,f=t._fill,v=t.options,B=t._container;B.stroked=!!v.stroke,B.filled=!!v.fill,v.stroke?(o||(o=t._stroke=Qi("stroke")),B.appendChild(o),o.weight=v.weight+"px",o.color=v.color,o.opacity=v.opacity,v.dashArray?o.dashStyle=N(v.dashArray)?v.dashArray.join(" "):v.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=v.lineCap.replace("butt","flat"),o.joinstyle=v.lineJoin):o&&(B.removeChild(o),t._stroke=null),v.fill?(f||(f=t._fill=Qi("fill")),B.appendChild(f),f.color=v.fillColor||v.color,f.opacity=v.fillOpacity):f&&(B.removeChild(f),t._fill=null)},_updateCircle:function(t){var o=t._point.round(),f=Math.round(t._radius),v=Math.round(t._radiusY||f);this._setPath(t,t._empty()?"M0 0":"AL "+o.x+","+o.y+" "+f+","+v+" 0,"+65535*360)},_setPath:function(t,o){t._path.v=o},_bringToFront:function(t){Mi(t._container)},_bringToBack:function(t){Sr(t._container)}},sr=Fe.vml?Qi:st,pi=gr.extend({_initContainer:function(){this._container=sr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=sr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){jt(this._container),Dt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){gr.prototype._update.call(this);var t=this._bounds,o=t.getSize(),f=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,f.setAttribute("width",o.x),f.setAttribute("height",o.y)),Qt(f,t.min),f.setAttribute("viewBox",[t.min.x,t.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(t){var o=t._path=sr("path");t.options.className&&ot(o,t.options.className),t.options.interactive&&ot(o,"leaflet-interactive"),this._updateStyle(t),this._layers[g(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){jt(t._path),t.removeInteractiveTarget(t._path),delete this._layers[g(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var o=t._path,f=t.options;o&&(f.stroke?(o.setAttribute("stroke",f.color),o.setAttribute("stroke-opacity",f.opacity),o.setAttribute("stroke-width",f.weight),o.setAttribute("stroke-linecap",f.lineCap),o.setAttribute("stroke-linejoin",f.lineJoin),f.dashArray?o.setAttribute("stroke-dasharray",f.dashArray):o.removeAttribute("stroke-dasharray"),f.dashOffset?o.setAttribute("stroke-dashoffset",f.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),f.fill?(o.setAttribute("fill",f.fillColor||f.color),o.setAttribute("fill-opacity",f.fillOpacity),o.setAttribute("fill-rule",f.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(t,o){this._setPath(t,mt(t._parts,o))},_updateCircle:function(t){var o=t._point,f=Math.max(Math.round(t._radius),1),v=Math.max(Math.round(t._radiusY),1)||f,B="a"+f+","+v+" 0 1,0 ",O=t._empty()?"M0 0":"M"+(o.x-f)+","+o.y+B+f*2+",0 "+B+-f*2+",0 ";this._setPath(t,O)},_setPath:function(t,o){t._path.setAttribute("d",o)},_bringToFront:function(t){Mi(t._path)},_bringToBack:function(t){Sr(t._path)}});Fe.vml&&pi.include(Jl);function Ns(t){return Fe.svg||Fe.vml?new pi(t):null}At.include({getRenderer:function(t){var o=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var o=this._paneRenderers[t];return o===void 0&&(o=this._createRenderer({pane:t}),this._paneRenderers[t]=o),o},_createRenderer:function(t){return this.options.preferCanvas&&La(t)||Ns(t)}});var ec=Rr.extend({initialize:function(t,o){Rr.prototype.initialize.call(this,this._boundsToLatLngs(t),o)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=$(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Hd(t,o){return new ec(t,o)}pi.create=sr,pi.pointsToPath=mt,pr.geometryToLayer=Wi,pr.coordsToLatLng=Ss,pr.coordsToLatLngs=Ro,pr.latLngToCoords=Bs,pr.latLngsToCoords=Ps,pr.getFeature=qi,pr.asFeature=Ts,At.mergeOptions({boxZoom:!0});var Yi=Un.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){nt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Dt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){jt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),_t(),ms(),this._startPoint=this._map.mouseEventToContainerPoint(t),nt(document,{contextmenu:nr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=lt("div","leaflet-zoom-box",this._container),ot(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var o=new T(this._point,this._startPoint),f=o.getSize();Qt(this._box,o.min),this._box.style.width=f.x+"px",this._box.style.height=f.y+"px"},_finish:function(){this._moved&&(jt(this._box),Lt(this._container,"leaflet-crosshair")),ji(),gs(),Dt(document,{contextmenu:nr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(p(this._resetState,this),0);var o=new q(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});At.addInitHook("addHandler","boxZoom",Yi),At.mergeOptions({doubleClickZoom:!0});var tc=Un.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var o=this._map,f=o.getZoom(),v=o.options.zoomDelta,B=t.originalEvent.shiftKey?f-v:f+v;o.options.doubleClickZoom==="center"?o.setZoom(B):o.setZoomAround(t.containerPoint,B)}});At.addInitHook("addHandler","doubleClickZoom",tc),At.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ma=Un.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new rr(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}ot(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Lt(this._map._container,"leaflet-grab"),Lt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=$(this._map.options.maxBounds);this._offsetLimit=z(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var o=this._lastTime=+new Date,f=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(f),this._times.push(o),this._prunePositions(o)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,o){return t-(t-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;t.x<o.min.x&&(t.x=this._viscousLimit(t.x,o.min.x)),t.y<o.min.y&&(t.y=this._viscousLimit(t.y,o.min.y)),t.x>o.max.x&&(t.x=this._viscousLimit(t.x,o.max.x)),t.y>o.max.y&&(t.y=this._viscousLimit(t.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,o=Math.round(t/2),f=this._initialWorldOffset,v=this._draggable._newPos.x,B=(v-o+f)%t+o-f,O=(v+o+f)%t-o-f,X=Math.abs(B+f)<Math.abs(O+f)?B:O;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=X},_onDragEnd:function(t){var o=this._map,f=o.options,v=!f.inertia||t.noInertia||this._times.length<2;if(o.fire("dragend",t),v)o.fire("moveend");else{this._prunePositions(+new Date);var B=this._lastPos.subtract(this._positions[0]),O=(this._lastTime-this._times[0])/1e3,X=f.easeLinearity,le=B.multiplyBy(X/O),fe=le.distanceTo([0,0]),we=Math.min(f.inertiaMaxSpeed,fe),Re=le.multiplyBy(we/fe),Qe=we/(f.inertiaDeceleration*X),dt=Re.multiplyBy(-Qe/2).round();!dt.x&&!dt.y?o.fire("moveend"):(dt=o._limitOffset(dt,o.options.maxBounds),Y(function(){o.panBy(dt,{duration:Qe,easeLinearity:X,noMoveStart:!0,animate:!0})}))}}});At.addInitHook("addHandler","dragging",Ma),At.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ia=Un.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),nt(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Dt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,o=document.documentElement,f=t.scrollTop||o.scrollTop,v=t.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(v,f)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var o=this._panKeys={},f=this.keyCodes,v,B;for(v=0,B=f.left.length;v<B;v++)o[f.left[v]]=[-1*t,0];for(v=0,B=f.right.length;v<B;v++)o[f.right[v]]=[t,0];for(v=0,B=f.down.length;v<B;v++)o[f.down[v]]=[0,t];for(v=0,B=f.up.length;v<B;v++)o[f.up[v]]=[0,-1*t]},_setZoomDelta:function(t){var o=this._zoomKeys={},f=this.keyCodes,v,B;for(v=0,B=f.zoomIn.length;v<B;v++)o[f.zoomIn[v]]=t;for(v=0,B=f.zoomOut.length;v<B;v++)o[f.zoomOut[v]]=-t},_addHooks:function(){nt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Dt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var o=t.keyCode,f=this._map,v;if(o in this._panKeys){if(!f._panAnim||!f._panAnim._inProgress)if(v=this._panKeys[o],t.shiftKey&&(v=V(v).multiplyBy(3)),f.options.maxBounds&&(v=f._limitOffset(V(v),f.options.maxBounds)),f.options.worldCopyJump){var B=f.wrapLatLng(f.unproject(f.project(f.getCenter()).add(v)));f.panTo(B)}else f.panBy(v)}else if(o in this._zoomKeys)f.setZoom(f.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&f._popup&&f._popup.options.closeOnEscapeKey)f.closePopup();else return;nr(t)}}});At.addInitHook("addHandler","keyboard",Ia),At.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Rt=Un.extend({addHooks:function(){nt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Dt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var o=Ml(t),f=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var v=Math.max(f-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(p(this._performZoom,this),v),nr(t)},_performZoom:function(){var t=this._map,o=t.getZoom(),f=this._map.options.zoomSnap||0;t._stop();var v=this._delta/(this._map.options.wheelPxPerZoomLevel*4),B=4*Math.log(2/(1+Math.exp(-Math.abs(v))))/Math.LN2,O=f?Math.ceil(B/f)*f:B,X=t._limitZoom(o+(this._delta>0?O:-O))-o;this._delta=0,this._startTime=null,X&&(t.options.scrollWheelZoom==="center"?t.setZoom(o+X):t.setZoomAround(this._lastMousePos,o+X))}});At.addInitHook("addHandler","scrollWheelZoom",Rt);var Oa=600;At.mergeOptions({tapHold:Fe.touchNative&&Fe.safari&&Fe.mobile,tapTolerance:15});var Lo=Un.extend({addHooks:function(){nt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Dt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var o=t.touches[0];this._startPos=this._newPos=new W(o.clientX,o.clientY),this._holdTimeout=setTimeout(p(function(){this._cancel(),this._isTapValid()&&(nt(document,"touchend",qt),nt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),Oa),nt(document,"touchend touchcancel contextmenu",this._cancel,this),nt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Dt(document,"touchend",qt),Dt(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Dt(document,"touchend touchcancel contextmenu",this._cancel,this),Dt(document,"touchmove",this._onMove,this)},_onMove:function(t){var o=t.touches[0];this._newPos=new W(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,o){var f=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});f._simulated=!0,o.target.dispatchEvent(f)}});At.addInitHook("addHandler","tapHold",Lo),At.mergeOptions({touchZoom:Fe.touch,bounceAtZoomLimits:!0});var Xi=Un.extend({addHooks:function(){ot(this._map._container,"leaflet-touch-zoom"),nt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Lt(this._map._container,"leaflet-touch-zoom"),Dt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var o=this._map;if(!(!t.touches||t.touches.length!==2||o._animatingZoom||this._zooming)){var f=o.mouseEventToContainerPoint(t.touches[0]),v=o.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(f.add(v)._divideBy(2))),this._startDist=f.distanceTo(v),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),nt(document,"touchmove",this._onTouchMove,this),nt(document,"touchend touchcancel",this._onTouchEnd,this),qt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var o=this._map,f=o.mouseEventToContainerPoint(t.touches[0]),v=o.mouseEventToContainerPoint(t.touches[1]),B=f.distanceTo(v)/this._startDist;if(this._zoom=o.getScaleZoom(B,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&B<1||this._zoom>o.getMaxZoom()&&B>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,B===1)return}else{var O=f._add(v)._divideBy(2)._subtract(this._centerPoint);if(B===1&&O.x===0&&O.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(O),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),te(this._animRequest);var X=p(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Y(X,this,!0),qt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,te(this._animRequest),Dt(document,"touchmove",this._onTouchMove,this),Dt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});At.addInitHook("addHandler","touchZoom",Xi),At.BoxZoom=Yi,At.DoubleClickZoom=tc,At.Drag=Ma,At.Keyboard=Ia,At.ScrollWheelZoom=Rt,At.TapHold=Lo,At.TouchZoom=Xi,i.Bounds=T,i.Browser=Fe,i.CRS=ve,i.Canvas=Fa,i.Circle=Es,i.CircleMarker=Cs,i.Class=ae,i.Control=Ln,i.DivIcon=Rs,i.DivOverlay=mr,i.DomEvent=vs,i.DomUtil=ko,i.Draggable=rr,i.Evented=se,i.FeatureGroup=Tr,i.GeoJSON=pr,i.GridLayer=$r,i.Handler=Un,i.Icon=hi,i.ImageOverlay=Gr,i.LatLng=ue,i.LatLngBounds=q,i.Layer=ir,i.LayerGroup=Wr,i.LineUtil=Ul,i.Map=At,i.Marker=Dr,i.Mixin=_a,i.Path=qr,i.Point=W,i.PolyUtil=Td,i.Polygon=Rr,i.Polyline=Mn,i.Popup=Ds,i.PosAnimation=ys,i.Projection=Ld,i.Rectangle=ec,i.Renderer=gr,i.SVG=pi,i.SVGOverlay=Da,i.TileLayer=Kr,i.Tooltip=$i,i.Transformation=We,i.Util=K,i.VideoOverlay=Ta,i.bind=p,i.bounds=z,i.canvas=La,i.circle=Do,i.circleMarker=Gl,i.control=Zr,i.divIcon=Yl,i.extend=c,i.featureGroup=Wl,i.geoJSON=$l,i.geoJson=or,i.gridLayer=Ki,i.icon=ql,i.imageOverlay=Kl,i.latLng=pe,i.latLngBounds=$,i.layerGroup=To,i.map=Ur,i.marker=Od,i.point=V,i.polygon=zd,i.polyline=jd,i.popup=Gi,i.rectangle=Hd,i.setOptions=C,i.stamp=g,i.svg=Ns,i.svgOverlay=Ra,i.tileLayer=Na,i.tooltip=No,i.transformation=Ke,i.version=l,i.videoOverlay=Ql;var nc=window.L;i.noConflict=function(){return window.L=nc,this},window.L=i}))})(gl,gl.exports)),gl.exports}var wd=BE();function ch(n,s,i){return Object.freeze({instance:n,context:s,container:i})}function uh(n,s){return s==null?function(l,c){const u=D.useRef();return u.current||(u.current=n(l,c)),u}:function(l,c){const u=D.useRef();u.current||(u.current=n(l,c));const p=D.useRef(l),{instance:d}=u.current;return D.useEffect(function(){p.current!==l&&(s(d,l,p.current),p.current=l)},[d,l,c]),u}}function yv(n,s){D.useEffect(function(){return(s.layerContainer??s.map).addLayer(n.instance),function(){var u;(u=s.layerContainer)==null||u.removeLayer(n.instance),s.map.removeLayer(n.instance)}},[s,n])}function PE(n){return function(i){const l=yd(),c=n(_d(i,l),l);return xv(l.map,i.attribution),lh(c.current,i.eventHandlers),yv(c.current,l),c}}function TE(n,s){const i=D.useRef();D.useEffect(function(){if(s.pathOptions!==i.current){const c=s.pathOptions??{};n.instance.setStyle(c),i.current=c}},[n,s])}function DE(n){return function(i){const l=yd(),c=n(_d(i,l),l);return lh(c.current,i.eventHandlers),yv(c.current,l),TE(c.current,i),c}}function RE(n,s){const i=uh(n),l=kE(i,s);return CE(l)}function NE(n,s){const i=uh(n,s),l=DE(i);return bE(l)}function FE(n,s){const i=uh(n,s),l=PE(i);return EE(l)}function LE(n,s,i){const{opacity:l,zIndex:c}=s;l!=null&&l!==i.opacity&&n.setOpacity(l),c!=null&&c!==i.zIndex&&n.setZIndex(c)}function ME(){return yd().map}const IE=NE(function({center:s,children:i,...l},c){const u=new wd.CircleMarker(s,l);return ch(u,wE(c,{overlayContainer:u}))},vE);function S0(){return S0=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var i=arguments[s];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(n[l]=i[l])}return n},S0.apply(this,arguments)}function OE({bounds:n,boundsOptions:s,center:i,children:l,className:c,id:u,placeholder:p,style:d,whenReady:g,zoom:m,...x},A){const[b]=D.useState({className:c,id:u,style:d}),[k,R]=D.useState(null);D.useImperativeHandle(A,()=>(k==null?void 0:k.map)??null,[k]);const C=D.useCallback(S=>{if(S!==null&&k===null){const P=new wd.Map(S,x);i!=null&&m!=null?P.setView(i,m):n!=null&&P.fitBounds(n,s),g!=null&&P.whenReady(g),R(_E(P))}},[]);D.useEffect(()=>()=>{k==null||k.map.remove()},[k]);const w=k?Te.createElement(vv,{value:k},l):p??null;return Te.createElement("div",S0({},b,{ref:C}),w)}const jE=D.forwardRef(OE),zE=RE(function(s,i){const l=new wd.Popup(s,i.overlayContainer);return ch(l,i)},function(s,i,{position:l},c){D.useEffect(function(){const{instance:p}=s;function d(m){m.popup===p&&(p.update(),c(!0))}function g(m){m.popup===p&&c(!1)}return i.map.on({popupopen:d,popupclose:g}),i.overlayContainer==null?(l!=null&&p.setLatLng(l),p.openOn(i.map)):i.overlayContainer.bindPopup(p),function(){var x;i.map.off({popupopen:d,popupclose:g}),(x=i.overlayContainer)==null||x.unbindPopup(),i.map.removeLayer(p)}},[s,i,c,l])}),HE=FE(function({url:s,...i},l){const c=new wd.TileLayer(s,_d(i,l));return ch(c,l)},function(s,i,l){LE(s,i,l);const{url:c}=i;c!=null&&c!==l.url&&s.setUrl(c)});function VE(n){const i=Date.now()/1e3-n,l=3600,c=86400;return i<l?"#22c55e":i<c?"#4ade80":i<3*c?"#a3e635":"#9ca3af"}function UE({contacts:n,focusedContact:s}){const i=ME(),[l,c]=D.useState(!1);return D.useEffect(()=>{if(s&&s.lat!=null&&s.lon!=null){i.setView([s.lat,s.lon],12),c(!0);return}if(l)return;const u=()=>{if(n.length===0){i.setView([20,0],2),c(!0);return}if(n.length===1){i.setView([n[0].lat,n[0].lon],10),c(!0);return}const p=n.map(d=>[d.lat,d.lon]);i.fitBounds(p,{padding:[50,50],maxZoom:12}),c(!0)};"geolocation"in navigator?navigator.geolocation.getCurrentPosition(p=>{i.setView([p.coords.latitude,p.coords.longitude],8),c(!0)},()=>{u()},{timeout:5e3,maximumAge:3e5}):u()},[i,n,l,s]),null}function ZE({contacts:n,focusedKey:s}){const i=D.useMemo(()=>{const p=Date.now()/1e3-604800;return n.filter(d=>d.lat!=null&&d.lon!=null&&d.last_seen!=null&&d.last_seen>p)},[n]),l=D.useMemo(()=>s&&i.find(p=>p.public_key===s)||null,[s,i]),c=D.useRef({}),u=D.useCallback((p,d)=>{c.current[p]=d},[]);return D.useEffect(()=>{if(l&&c.current[l.public_key]){const p=setTimeout(()=>{var d;(d=c.current[l.public_key])==null||d.openPopup()},100);return()=>clearTimeout(p)}},[l]),_.jsxs("div",{className:"flex flex-col h-full",children:[_.jsxs("div",{className:"px-4 py-2 bg-muted/50 text-xs text-muted-foreground flex items-center justify-between",children:[_.jsxs("span",{children:["Showing ",i.length," contact",i.length!==1?"s":""," heard in the last 7 days"]}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsxs("span",{className:"flex items-center gap-1",children:[_.jsx("span",{className:"w-3 h-3 rounded-full bg-[#22c55e]"})," <1h"]}),_.jsxs("span",{className:"flex items-center gap-1",children:[_.jsx("span",{className:"w-3 h-3 rounded-full bg-[#4ade80]"})," <1d"]}),_.jsxs("span",{className:"flex items-center gap-1",children:[_.jsx("span",{className:"w-3 h-3 rounded-full bg-[#a3e635]"})," <3d"]}),_.jsxs("span",{className:"flex items-center gap-1",children:[_.jsx("span",{className:"w-3 h-3 rounded-full bg-[#9ca3af]"})," older"]})]})]}),_.jsx("div",{className:"flex-1 relative",style:{zIndex:0},children:_.jsxs(jE,{center:[20,0],zoom:2,className:"h-full w-full",style:{background:"#1a1a2e"},children:[_.jsx(HE,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),_.jsx(UE,{contacts:i,focusedContact:l}),i.map(p=>{const d=p.type===oi,g=VE(p.last_seen),m=p.name||p.public_key.slice(0,12);return _.jsx(IE,{ref:x=>u(p.public_key,x),center:[p.lat,p.lon],radius:d?10:7,pathOptions:{color:d?g:"#000",fillColor:g,fillOpacity:.8,weight:d?0:1},children:_.jsx(zE,{children:_.jsxs("div",{className:"text-sm",children:[_.jsxs("div",{className:"font-medium flex items-center gap-1",children:[d&&_.jsx("span",{title:"Repeater",children:""}),m]}),_.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Last heard: ",ra(p.last_seen)]}),_.jsxs("div",{className:"text-xs text-gray-400 mt-1 font-mono",children:[p.lat.toFixed(5),", ",p.lon.toFixed(5)]})]})})},p.public_key)})]})})]})}function Xg(n,s){var i,l=1;n==null&&(n=0),s==null&&(s=0);function c(){var u,p=i.length,d,g=0,m=0;for(u=0;u<p;++u)d=i[u],g+=d.x,m+=d.y;for(g=(g/p-n)*l,m=(m/p-s)*l,u=0;u<p;++u)d=i[u],d.x-=g,d.y-=m}return c.initialize=function(u){i=u},c.x=function(u){return arguments.length?(n=+u,c):n},c.y=function(u){return arguments.length?(s=+u,c):s},c.strength=function(u){return arguments.length?(l=+u,c):l},c}function WE(n){const s=+this._x.call(null,n),i=+this._y.call(null,n);return _v(this.cover(s,i),s,i,n)}function _v(n,s,i,l){if(isNaN(s)||isNaN(i))return n;var c,u=n._root,p={data:l},d=n._x0,g=n._y0,m=n._x1,x=n._y1,A,b,k,R,C,w,S,P;if(!u)return n._root=p,n;for(;u.length;)if((C=s>=(A=(d+m)/2))?d=A:m=A,(w=i>=(b=(g+x)/2))?g=b:x=b,c=u,!(u=u[S=w<<1|C]))return c[S]=p,n;if(k=+n._x.call(null,u.data),R=+n._y.call(null,u.data),s===k&&i===R)return p.next=u,c?c[S]=p:n._root=p,n;do c=c?c[S]=new Array(4):n._root=new Array(4),(C=s>=(A=(d+m)/2))?d=A:m=A,(w=i>=(b=(g+x)/2))?g=b:x=b;while((S=w<<1|C)===(P=(R>=b)<<1|k>=A));return c[P]=u,c[S]=p,n}function qE(n){var s,i,l=n.length,c,u,p=new Array(l),d=new Array(l),g=1/0,m=1/0,x=-1/0,A=-1/0;for(i=0;i<l;++i)isNaN(c=+this._x.call(null,s=n[i]))||isNaN(u=+this._y.call(null,s))||(p[i]=c,d[i]=u,c<g&&(g=c),c>x&&(x=c),u<m&&(m=u),u>A&&(A=u));if(g>x||m>A)return this;for(this.cover(g,m).cover(x,A),i=0;i<l;++i)_v(this,p[i],d[i],n[i]);return this}function GE(n,s){if(isNaN(n=+n)||isNaN(s=+s))return this;var i=this._x0,l=this._y0,c=this._x1,u=this._y1;if(isNaN(i))c=(i=Math.floor(n))+1,u=(l=Math.floor(s))+1;else{for(var p=c-i||1,d=this._root,g,m;i>n||n>=c||l>s||s>=u;)switch(m=(s<l)<<1|n<i,g=new Array(4),g[m]=d,d=g,p*=2,m){case 0:c=i+p,u=l+p;break;case 1:i=c-p,u=l+p;break;case 2:c=i+p,l=u-p;break;case 3:i=c-p,l=u-p;break}this._root&&this._root.length&&(this._root=d)}return this._x0=i,this._y0=l,this._x1=c,this._y1=u,this}function $E(){var n=[];return this.visit(function(s){if(!s.length)do n.push(s.data);while(s=s.next)}),n}function KE(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function zn(n,s,i,l,c){this.node=n,this.x0=s,this.y0=i,this.x1=l,this.y1=c}function QE(n,s,i){var l,c=this._x0,u=this._y0,p,d,g,m,x=this._x1,A=this._y1,b=[],k=this._root,R,C;for(k&&b.push(new zn(k,c,u,x,A)),i==null?i=1/0:(c=n-i,u=s-i,x=n+i,A=s+i,i*=i);R=b.pop();)if(!(!(k=R.node)||(p=R.x0)>x||(d=R.y0)>A||(g=R.x1)<c||(m=R.y1)<u))if(k.length){var w=(p+g)/2,S=(d+m)/2;b.push(new zn(k[3],w,S,g,m),new zn(k[2],p,S,w,m),new zn(k[1],w,d,g,S),new zn(k[0],p,d,w,S)),(C=(s>=S)<<1|n>=w)&&(R=b[b.length-1],b[b.length-1]=b[b.length-1-C],b[b.length-1-C]=R)}else{var P=n-+this._x.call(null,k.data),N=s-+this._y.call(null,k.data),F=P*P+N*N;if(F<i){var M=Math.sqrt(i=F);c=n-M,u=s-M,x=n+M,A=s+M,l=k.data}}return l}function YE(n){if(isNaN(x=+this._x.call(null,n))||isNaN(A=+this._y.call(null,n)))return this;var s,i=this._root,l,c,u,p=this._x0,d=this._y0,g=this._x1,m=this._y1,x,A,b,k,R,C,w,S;if(!i)return this;if(i.length)for(;;){if((R=x>=(b=(p+g)/2))?p=b:g=b,(C=A>=(k=(d+m)/2))?d=k:m=k,s=i,!(i=i[w=C<<1|R]))return this;if(!i.length)break;(s[w+1&3]||s[w+2&3]||s[w+3&3])&&(l=s,S=w)}for(;i.data!==n;)if(c=i,!(i=i.next))return this;return(u=i.next)&&delete i.next,c?(u?c.next=u:delete c.next,this):s?(u?s[w]=u:delete s[w],(i=s[0]||s[1]||s[2]||s[3])&&i===(s[3]||s[2]||s[1]||s[0])&&!i.length&&(l?l[S]=i:this._root=i),this):(this._root=u,this)}function XE(n){for(var s=0,i=n.length;s<i;++s)this.remove(n[s]);return this}function JE(){return this._root}function ek(){var n=0;return this.visit(function(s){if(!s.length)do++n;while(s=s.next)}),n}function tk(n){var s=[],i,l=this._root,c,u,p,d,g;for(l&&s.push(new zn(l,this._x0,this._y0,this._x1,this._y1));i=s.pop();)if(!n(l=i.node,u=i.x0,p=i.y0,d=i.x1,g=i.y1)&&l.length){var m=(u+d)/2,x=(p+g)/2;(c=l[3])&&s.push(new zn(c,m,x,d,g)),(c=l[2])&&s.push(new zn(c,u,x,m,g)),(c=l[1])&&s.push(new zn(c,m,p,d,x)),(c=l[0])&&s.push(new zn(c,u,p,m,x))}return this}function nk(n){var s=[],i=[],l;for(this._root&&s.push(new zn(this._root,this._x0,this._y0,this._x1,this._y1));l=s.pop();){var c=l.node;if(c.length){var u,p=l.x0,d=l.y0,g=l.x1,m=l.y1,x=(p+g)/2,A=(d+m)/2;(u=c[0])&&s.push(new zn(u,p,d,x,A)),(u=c[1])&&s.push(new zn(u,x,d,g,A)),(u=c[2])&&s.push(new zn(u,p,A,x,m)),(u=c[3])&&s.push(new zn(u,x,A,g,m))}i.push(l)}for(;l=i.pop();)n(l.node,l.x0,l.y0,l.x1,l.y1);return this}function rk(n){return n[0]}function ik(n){return arguments.length?(this._x=n,this):this._x}function ok(n){return n[1]}function sk(n){return arguments.length?(this._y=n,this):this._y}function dh(n,s,i){var l=new fh(s??rk,i??ok,NaN,NaN,NaN,NaN);return n==null?l:l.addAll(n)}function fh(n,s,i,l,c,u){this._x=n,this._y=s,this._x0=i,this._y0=l,this._x1=c,this._y1=u,this._root=void 0}function Jg(n){for(var s={data:n.data},i=s;n=n.next;)i=i.next={data:n.data};return s}var Vn=dh.prototype=fh.prototype;Vn.copy=function(){var n=new fh(this._x,this._y,this._x0,this._y0,this._x1,this._y1),s=this._root,i,l;if(!s)return n;if(!s.length)return n._root=Jg(s),n;for(i=[{source:s,target:n._root=new Array(4)}];s=i.pop();)for(var c=0;c<4;++c)(l=s.source[c])&&(l.length?i.push({source:l,target:s.target[c]=new Array(4)}):s.target[c]=Jg(l));return n};Vn.add=WE;Vn.addAll=qE;Vn.cover=GE;Vn.data=$E;Vn.extent=KE;Vn.find=QE;Vn.remove=YE;Vn.removeAll=XE;Vn.root=JE;Vn.size=ek;Vn.visit=tk;Vn.visitAfter=nk;Vn.x=ik;Vn.y=sk;function Hn(n){return function(){return n}}function xo(n){return(n()-.5)*1e-6}function ak(n){return n.x+n.vx}function lk(n){return n.y+n.vy}function ck(n){var s,i,l,c=1,u=1;typeof n!="function"&&(n=Hn(n==null?1:+n));function p(){for(var m,x=s.length,A,b,k,R,C,w,S=0;S<u;++S)for(A=dh(s,ak,lk).visitAfter(d),m=0;m<x;++m)b=s[m],C=i[b.index],w=C*C,k=b.x+b.vx,R=b.y+b.vy,A.visit(P);function P(N,F,M,H,U){var j=N.data,ee=N.r,Z=C+ee;if(j){if(j.index>b.index){var Y=k-j.x-j.vx,te=R-j.y-j.vy,K=Y*Y+te*te;K<Z*Z&&(Y===0&&(Y=xo(l),K+=Y*Y),te===0&&(te=xo(l),K+=te*te),K=(Z-(K=Math.sqrt(K)))/K*c,b.vx+=(Y*=K)*(Z=(ee*=ee)/(w+ee)),b.vy+=(te*=K)*Z,j.vx-=Y*(Z=1-Z),j.vy-=te*Z)}return}return F>k+Z||H<k-Z||M>R+Z||U<R-Z}}function d(m){if(m.data)return m.r=i[m.data.index];for(var x=m.r=0;x<4;++x)m[x]&&m[x].r>m.r&&(m.r=m[x].r)}function g(){if(s){var m,x=s.length,A;for(i=new Array(x),m=0;m<x;++m)A=s[m],i[A.index]=+n(A,m,s)}}return p.initialize=function(m,x){s=m,l=x,g()},p.iterations=function(m){return arguments.length?(u=+m,p):u},p.strength=function(m){return arguments.length?(c=+m,p):c},p.radius=function(m){return arguments.length?(n=typeof m=="function"?m:Hn(+m),g(),p):n},p}function uk(n){return n.index}function ex(n,s){var i=n.get(s);if(!i)throw new Error("node not found: "+s);return i}function Jc(n){var s=uk,i=A,l,c=Hn(30),u,p,d,g,m,x=1;n==null&&(n=[]);function A(w){return 1/Math.min(d[w.source.index],d[w.target.index])}function b(w){for(var S=0,P=n.length;S<x;++S)for(var N=0,F,M,H,U,j,ee,Z;N<P;++N)F=n[N],M=F.source,H=F.target,U=H.x+H.vx-M.x-M.vx||xo(m),j=H.y+H.vy-M.y-M.vy||xo(m),ee=Math.sqrt(U*U+j*j),ee=(ee-u[N])/ee*w*l[N],U*=ee,j*=ee,H.vx-=U*(Z=g[N]),H.vy-=j*Z,M.vx+=U*(Z=1-Z),M.vy+=j*Z}function k(){if(p){var w,S=p.length,P=n.length,N=new Map(p.map((M,H)=>[s(M,H,p),M])),F;for(w=0,d=new Array(S);w<P;++w)F=n[w],F.index=w,typeof F.source!="object"&&(F.source=ex(N,F.source)),typeof F.target!="object"&&(F.target=ex(N,F.target)),d[F.source.index]=(d[F.source.index]||0)+1,d[F.target.index]=(d[F.target.index]||0)+1;for(w=0,g=new Array(P);w<P;++w)F=n[w],g[w]=d[F.source.index]/(d[F.source.index]+d[F.target.index]);l=new Array(P),R(),u=new Array(P),C()}}function R(){if(p)for(var w=0,S=n.length;w<S;++w)l[w]=+i(n[w],w,n)}function C(){if(p)for(var w=0,S=n.length;w<S;++w)u[w]=+c(n[w],w,n)}return b.initialize=function(w,S){p=w,m=S,k()},b.links=function(w){return arguments.length?(n=w,k(),b):n},b.id=function(w){return arguments.length?(s=w,b):s},b.iterations=function(w){return arguments.length?(x=+w,b):x},b.strength=function(w){return arguments.length?(i=typeof w=="function"?w:Hn(+w),R(),b):i},b.distance=function(w){return arguments.length?(c=typeof w=="function"?w:Hn(+w),C(),b):c},b}var dk={value:()=>{}};function wv(){for(var n=0,s=arguments.length,i={},l;n<s;++n){if(!(l=arguments[n]+"")||l in i||/[\s.]/.test(l))throw new Error("illegal type: "+l);i[l]=[]}return new Uu(i)}function Uu(n){this._=n}function fk(n,s){return n.trim().split(/^|\s+/).map(function(i){var l="",c=i.indexOf(".");if(c>=0&&(l=i.slice(c+1),i=i.slice(0,c)),i&&!s.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:l}})}Uu.prototype=wv.prototype={constructor:Uu,on:function(n,s){var i=this._,l=fk(n+"",i),c,u=-1,p=l.length;if(arguments.length<2){for(;++u<p;)if((c=(n=l[u]).type)&&(c=hk(i[c],n.name)))return c;return}if(s!=null&&typeof s!="function")throw new Error("invalid callback: "+s);for(;++u<p;)if(c=(n=l[u]).type)i[c]=tx(i[c],n.name,s);else if(s==null)for(c in i)i[c]=tx(i[c],n.name,null);return this},copy:function(){var n={},s=this._;for(var i in s)n[i]=s[i].slice();return new Uu(n)},call:function(n,s){if((c=arguments.length-2)>0)for(var i=new Array(c),l=0,c,u;l<c;++l)i[l]=arguments[l+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(u=this._[n],l=0,c=u.length;l<c;++l)u[l].value.apply(s,i)},apply:function(n,s,i){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var l=this._[n],c=0,u=l.length;c<u;++c)l[c].value.apply(s,i)}};function hk(n,s){for(var i=0,l=n.length,c;i<l;++i)if((c=n[i]).name===s)return c.value}function tx(n,s,i){for(var l=0,c=n.length;l<c;++l)if(n[l].name===s){n[l]=dk,n=n.slice(0,l).concat(n.slice(l+1));break}return i!=null&&n.push({name:s,value:i}),n}var sa=0,xl=0,ml=0,bv=1e3,td,Al,nd=0,ss=0,bd=0,Cl=typeof performance=="object"&&performance.now?performance:Date,Cv=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Ev(){return ss||(Cv(pk),ss=Cl.now()+bd)}function pk(){ss=0}function B0(){this._call=this._time=this._next=null}B0.prototype=kv.prototype={constructor:B0,restart:function(n,s,i){if(typeof n!="function")throw new TypeError("callback is not a function");i=(i==null?Ev():+i)+(s==null?0:+s),!this._next&&Al!==this&&(Al?Al._next=this:td=this,Al=this),this._call=n,this._time=i,P0()},stop:function(){this._call&&(this._call=null,this._time=1/0,P0())}};function kv(n,s,i){var l=new B0;return l.restart(n,s,i),l}function mk(){Ev(),++sa;for(var n=td,s;n;)(s=ss-n._time)>=0&&n._call.call(void 0,s),n=n._next;--sa}function nx(){ss=(nd=Cl.now())+bd,sa=xl=0;try{mk()}finally{sa=0,xk(),ss=0}}function gk(){var n=Cl.now(),s=n-nd;s>bv&&(bd-=s,nd=n)}function xk(){for(var n,s=td,i,l=1/0;s;)s._call?(l>s._time&&(l=s._time),n=s,s=s._next):(i=s._next,s._next=null,s=n?n._next=i:td=i);Al=n,P0(l)}function P0(n){if(!sa){xl&&(xl=clearTimeout(xl));var s=n-ss;s>24?(n<1/0&&(xl=setTimeout(nx,n-Cl.now()-bd)),ml&&(ml=clearInterval(ml))):(ml||(nd=Cl.now(),ml=setInterval(gk,bv)),sa=1,Cv(nx))}}const Ak=1664525,vk=1013904223,rx=4294967296;function yk(){let n=1;return()=>(n=(Ak*n+vk)%rx)/rx}function _k(n){return n.x}function wk(n){return n.y}var bk=10,Ck=Math.PI*(3-Math.sqrt(5));function Ek(n){var s,i=1,l=.001,c=1-Math.pow(l,1/300),u=0,p=.6,d=new Map,g=kv(A),m=wv("tick","end"),x=yk();n==null&&(n=[]);function A(){b(),m.call("tick",s),i<l&&(g.stop(),m.call("end",s))}function b(C){var w,S=n.length,P;C===void 0&&(C=1);for(var N=0;N<C;++N)for(i+=(u-i)*c,d.forEach(function(F){F(i)}),w=0;w<S;++w)P=n[w],P.fx==null?P.x+=P.vx*=p:(P.x=P.fx,P.vx=0),P.fy==null?P.y+=P.vy*=p:(P.y=P.fy,P.vy=0);return s}function k(){for(var C=0,w=n.length,S;C<w;++C){if(S=n[C],S.index=C,S.fx!=null&&(S.x=S.fx),S.fy!=null&&(S.y=S.fy),isNaN(S.x)||isNaN(S.y)){var P=bk*Math.sqrt(.5+C),N=C*Ck;S.x=P*Math.cos(N),S.y=P*Math.sin(N)}(isNaN(S.vx)||isNaN(S.vy))&&(S.vx=S.vy=0)}}function R(C){return C.initialize&&C.initialize(n,x),C}return k(),s={tick:b,restart:function(){return g.restart(A),s},stop:function(){return g.stop(),s},nodes:function(C){return arguments.length?(n=C,k(),d.forEach(R),s):n},alpha:function(C){return arguments.length?(i=+C,s):i},alphaMin:function(C){return arguments.length?(l=+C,s):l},alphaDecay:function(C){return arguments.length?(c=+C,s):+c},alphaTarget:function(C){return arguments.length?(u=+C,s):u},velocityDecay:function(C){return arguments.length?(p=1-C,s):1-p},randomSource:function(C){return arguments.length?(x=C,d.forEach(R),s):x},force:function(C,w){return arguments.length>1?(w==null?d.delete(C):d.set(C,R(w)),s):d.get(C)},find:function(C,w,S){var P=0,N=n.length,F,M,H,U,j;for(S==null?S=1/0:S*=S,P=0;P<N;++P)U=n[P],F=C-U.x,M=w-U.y,H=F*F+M*M,H<S&&(j=U,S=H);return j},on:function(C,w){return arguments.length>1?(m.on(C,w),s):m.on(C)}}}function eu(){var n,s,i,l,c=Hn(-30),u,p=1,d=1/0,g=.81;function m(k){var R,C=n.length,w=dh(n,_k,wk).visitAfter(A);for(l=k,R=0;R<C;++R)s=n[R],w.visit(b)}function x(){if(n){var k,R=n.length,C;for(u=new Array(R),k=0;k<R;++k)C=n[k],u[C.index]=+c(C,k,n)}}function A(k){var R=0,C,w,S=0,P,N,F;if(k.length){for(P=N=F=0;F<4;++F)(C=k[F])&&(w=Math.abs(C.value))&&(R+=C.value,S+=w,P+=w*C.x,N+=w*C.y);k.x=P/S,k.y=N/S}else{C=k,C.x=C.data.x,C.y=C.data.y;do R+=u[C.data.index];while(C=C.next)}k.value=R}function b(k,R,C,w){if(!k.value)return!0;var S=k.x-s.x,P=k.y-s.y,N=w-R,F=S*S+P*P;if(N*N/g<F)return F<d&&(S===0&&(S=xo(i),F+=S*S),P===0&&(P=xo(i),F+=P*P),F<p&&(F=Math.sqrt(p*F)),s.vx+=S*k.value*l/F,s.vy+=P*k.value*l/F),!0;if(k.length||F>=d)return;(k.data!==s||k.next)&&(S===0&&(S=xo(i),F+=S*S),P===0&&(P=xo(i),F+=P*P),F<p&&(F=Math.sqrt(p*F)));do k.data!==s&&(N=u[k.data.index]*l/F,s.vx+=S*N,s.vy+=P*N);while(k=k.next)}return m.initialize=function(k,R){n=k,i=R,x()},m.strength=function(k){return arguments.length?(c=typeof k=="function"?k:Hn(+k),x(),m):c},m.distanceMin=function(k){return arguments.length?(p=k*k,m):Math.sqrt(p)},m.distanceMax=function(k){return arguments.length?(d=k*k,m):Math.sqrt(d)},m.theta=function(k){return arguments.length?(g=k*k,m):Math.sqrt(g)},m}function ix(n){var s=Hn(.1),i,l,c;typeof n!="function"&&(n=Hn(n==null?0:+n));function u(d){for(var g=0,m=i.length,x;g<m;++g)x=i[g],x.vx+=(c[g]-x.x)*l[g]*d}function p(){if(i){var d,g=i.length;for(l=new Array(g),c=new Array(g),d=0;d<g;++d)l[d]=isNaN(c[d]=+n(i[d],d,i))?0:+s(i[d],d,i)}}return u.initialize=function(d){i=d,p()},u.strength=function(d){return arguments.length?(s=typeof d=="function"?d:Hn(+d),p(),u):s},u.x=function(d){return arguments.length?(n=typeof d=="function"?d:Hn(+d),p(),u):n},u}function ox(n){var s=Hn(.1),i,l,c;typeof n!="function"&&(n=Hn(n==null?0:+n));function u(d){for(var g=0,m=i.length,x;g<m;++g)x=i[g],x.vy+=(c[g]-x.y)*l[g]*d}function p(){if(i){var d,g=i.length;for(l=new Array(g),c=new Array(g),d=0;d<g;++d)l[d]=isNaN(c[d]=+n(i[d],d,i))?0:+s(i[d],d,i)}}return u.initialize=function(d){i=d,p()},u.strength=function(d){return arguments.length?(s=typeof d=="function"?d:Hn(+d),p(),u):s},u.y=function(d){return arguments.length?(n=typeof d=="function"?d:Hn(+d),p(),u):n},u}const fn={background:"#0a0a0a",link:"#4b5563",ambiguous:"#9ca3af",particleAD:"#f59e0b",particleGT:"#06b6d4",particleDM:"#8b5cf6",particleACK:"#22c55e",particleTR:"#f97316",particleRQ:"#ec4899",particleRS:"#14b8a6",particleUnknown:"#6b7280"},kk={AD:fn.particleAD,GT:fn.particleGT,DM:fn.particleDM,ACK:fn.particleACK,TR:fn.particleTR,RQ:fn.particleRQ,RS:fn.particleRS,"?":fn.particleUnknown},Sk=.008,Bk=15,Pk=2880*60*1e3,Tk=20,sx=200,Sv=1800*1e3,Dk=[{emoji:"",label:"You",size:"text-xl"},{emoji:"",label:"Repeater",size:"text-base"},{emoji:"",label:"Node",size:"text-base"},{emoji:"",label:"Unknown",size:"text-base"}],Rk=[{label:"AD",color:fn.particleAD,description:"Advertisement"},{label:"GT",color:fn.particleGT,description:"Group Text"},{label:"DM",color:fn.particleDM,description:"Direct Message"},{label:"ACK",color:fn.particleACK,description:"Acknowledgment"},{label:"TR",color:fn.particleTR,description:"Trace"},{label:"RQ",color:fn.particleRQ,description:"Request"},{label:"RS",color:fn.particleRS,description:"Response"},{label:"?",color:fn.particleUnknown,description:"Other"}];function Nk(n){let s=0;for(let i=0;i<n.length;i++)s=(s<<5)-s+n.charCodeAt(i),s=s&s;return Math.abs(s).toString(16).padStart(8,"0")}function Fk(n){var s;try{const i=yt.MeshCoreDecoder.decode(n);if(!i.isValid)return null;const l={payloadType:i.payloadType,pathBytes:i.path||[],srcHash:null,dstHash:null,advertPubkey:null,groupTextSender:null,anonRequestPubkey:null};if(i.payloadType===yt.PayloadType.TextMessage&&i.payload.decoded){const c=i.payload.decoded;l.srcHash=c.sourceHash||null,l.dstHash=c.destinationHash||null}else if(i.payloadType===yt.PayloadType.Advert&&i.payload.decoded)l.advertPubkey=i.payload.decoded.publicKey||null;else if(i.payloadType===yt.PayloadType.GroupText&&i.payload.decoded){const c=i.payload.decoded;l.groupTextSender=((s=c.decrypted)==null?void 0:s.sender)||null}else if(i.payloadType===yt.PayloadType.AnonRequest&&i.payload.decoded){const c=i.payload.decoded;l.anonRequestPubkey=c.senderPublicKey||null}return l}catch{return null}}function Lk(n){switch(n){case yt.PayloadType.Advert:return"AD";case yt.PayloadType.GroupText:return"GT";case yt.PayloadType.TextMessage:return"DM";case yt.PayloadType.Ack:return"ACK";case yt.PayloadType.Trace:return"TR";case yt.PayloadType.Request:case yt.PayloadType.AnonRequest:return"RQ";case yt.PayloadType.Response:return"RS";default:return"?"}}function Mk(n,s){var l,c;const i=Nk(s.data).slice(0,8);if(n.payloadType===yt.PayloadType.Advert&&n.advertPubkey)return`ad:${n.advertPubkey.slice(0,12)}`;if(n.payloadType===yt.PayloadType.GroupText){const u=n.groupTextSender||((l=s.decrypted_info)==null?void 0:l.sender)||"?";return`gt:${((c=s.decrypted_info)==null?void 0:c.channel_name)||"?"}:${u}:${i}`}return n.payloadType===yt.PayloadType.TextMessage?`dm:${n.srcHash||"?"}:${n.dstHash||"?"}:${i}`:n.payloadType===yt.PayloadType.AnonRequest&&n.anonRequestPubkey?`rq:${n.anonRequestPubkey.slice(0,12)}:${i}`:`other:${i}`}function Bv(n){return{sourceId:typeof n.source=="string"?n.source:n.source.id,targetId:typeof n.target=="string"?n.target:n.target.id}}function Ik(n,s){const i=n.toLowerCase(),l=s.filter(c=>c.public_key.toLowerCase().startsWith(i));return l.length===1?l[0]:null}function Ok(n,s){const i=n.toLowerCase();return s.filter(l=>l.public_key.toLowerCase().startsWith(i))}function jk(n,s){return s.find(i=>i.name===n)||null}function tu(n){return(n==null?void 0:n.type)===oi?"repeater":"client"}function ax(n){return n.filter((s,i)=>i===0||s!==n[i-1])}function zk(n){const s=Date.now(),i=n.observations.filter(u=>s-u.timestamp<Sv),l=new Map;for(const u of i){const p=u.nextHop??"self";l.has(p)||l.set(p,new Set),l.get(p).add(u.source)}if(l.size<=1)return{shouldSplit:!1,disjointGroups:null};const c=new Map;for(const[u,p]of l)for(const d of p)c.has(d)||c.set(d,[]),c.get(d).push(u);for(const[,u]of c)if(u.length>1)return{shouldSplit:!1,disjointGroups:null};for(const[,u]of l)if(u.size<Tk)return{shouldSplit:!1,disjointGroups:null};return{shouldSplit:!0,disjointGroups:l}}function Hk(n,s,i,l){const c=s.toLowerCase(),u=Date.now();n.has(c)||n.set(c,{prefix:c,observations:[]});const p=n.get(c);p.observations.push({source:i,nextHop:l,timestamp:u}),p.observations=p.observations.filter(d=>u-d.timestamp<Sv),p.observations.length>sx&&(p.observations=p.observations.slice(-sx))}function Vk({packets:n,contacts:s,config:i,showAmbiguousPaths:l,showAmbiguousNodes:c,splitAmbiguousByTraffic:u,chargeStrength:p,letEmDrift:d,particleSpeedMultiplier:g,observationWindowSec:m,dimensions:x}){const A=D.useRef(new Map),b=D.useRef(new Map),k=D.useRef([]),R=D.useRef(null),C=D.useRef(new Set),w=D.useRef(new Map),S=D.useRef(new Map),P=D.useRef(new Map),N=D.useRef(g),F=D.useRef(m*1e3),[M,H]=D.useState({processed:0,animated:0,nodes:0,links:0});D.useEffect(()=>{N.current=g},[g]),D.useEffect(()=>{F.current=m*1e3},[m]),D.useEffect(()=>{const G=Ek([]).force("link",Jc([]).id(se=>se.id).distance(80).strength(.3)).force("charge",eu().strength(se=>se.id==="self"?-1200:-200).distanceMax(500)).force("center",Xg(x.width/2,x.height/2)).force("collide",ck(40)).force("selfX",ix(x.width/2).strength(se=>se.id==="self"?.1:0)).force("selfY",ox(x.height/2).strength(se=>se.id==="self"?.1:0)).alphaDecay(.02).velocityDecay(.5).alphaTarget(.03);return R.current=G,()=>{G.stop()}},[]),D.useEffect(()=>{const G=R.current;G&&(G.force("center",Xg(x.width/2,x.height/2)),G.force("selfX",ix(x.width/2).strength(se=>se.id==="self"?.1:0)),G.force("selfY",ox(x.height/2).strength(se=>se.id==="self"?.1:0)),G.force("charge",eu().strength(se=>se.id==="self"?p*6:p).distanceMax(500)),G.alpha(.3).restart())},[x,p]),D.useEffect(()=>{const G=R.current;G&&G.alphaTarget(d?.05:0)},[d]),D.useEffect(()=>{A.current.has("self")||(A.current.set("self",{id:"self",name:(i==null?void 0:i.name)||"Me",type:"self",isAmbiguous:!1,lastActivity:Date.now(),x:x.width/2,y:x.height/2}),U())},[i,x]),D.useEffect(()=>{C.current.clear();const G=A.current.get("self");A.current.clear(),G&&A.current.set("self",G),b.current.clear(),k.current=[],w.current.clear(),S.current.forEach(se=>clearTimeout(se)),S.current.clear(),P.current.clear(),H({processed:0,animated:0,nodes:G?1:0,links:0})},[l,c,u]);const U=D.useCallback(()=>{const G=R.current;if(!G)return;const se=Array.from(A.current.values()),W=Array.from(b.current.values());G.nodes(se);const re=G.force("link");re==null||re.links(W),G.alpha(.15).restart(),H(V=>({...V,nodes:se.length,links:W.length}))},[]),j=D.useCallback((G,se,W,re,V,T)=>{const z=A.current.get(G);if(z)z.lastActivity=Date.now(),se&&!z.name&&(z.name=se),V&&(z.ambiguousNames=V),T!==void 0&&(z.lastSeen=T);else{const q=A.current.get("self");A.current.set(G,{id:G,name:se,type:W,isAmbiguous:re,lastActivity:Date.now(),lastSeen:T,ambiguousNames:V,x:((q==null?void 0:q.x)??400)+(Math.random()-.5)*100,y:((q==null?void 0:q.y)??300)+(Math.random()-.5)*100})}},[]),ee=D.useCallback((G,se)=>{const W=[G,se].sort().join("->"),re=b.current.get(W);re?re.lastActivity=Date.now():b.current.set(W,{source:G,target:se,lastActivity:Date.now()})},[]),Z=D.useCallback(G=>{const se=w.current.get(G);if(se){w.current.delete(G),S.current.delete(G);for(const W of se.paths){const re=ax(W.nodes);if(!(re.length<2))for(let V=0;V<re.length-1;V++)k.current.push({linkKey:[re[V],re[V+1]].sort().join("->"),progress:-V,speed:Sk*N.current,color:kk[se.label],label:se.label,fromNodeId:re[V],toNodeId:re[V+1]})}}},[]),Y=D.useCallback((G,se,W,re,V)=>{if(G.type==="pubkey"){if(G.value.length<12)return null;const z=G.value.slice(0,12).toLowerCase();if(re&&z===re)return"self";const q=s.find($=>$.public_key.toLowerCase().startsWith(z));return j(z,(q==null?void 0:q.name)||null,tu(q),!1,void 0,q==null?void 0:q.last_seen),z}if(G.type==="name"){const z=jk(G.value,s);if(z){const $=z.public_key.slice(0,12).toLowerCase();return re&&$===re?"self":(j($,z.name,tu(z),!1,void 0,z.last_seen),$)}const q=`name:${G.value}`;return j(q,G.value,"client",!1),q}const T=Ik(G.value,s);if(T){const z=T.public_key.slice(0,12).toLowerCase();return re&&z===re?"self":(j(z,T.name,tu(T),!1,void 0,T.last_seen),z)}if(W){const z=Ok(G.value,s),q=se?z.filter($=>$.type===oi):z.filter($=>$.type!==oi);if(q.length===1){const $=q[0],ue=$.public_key.slice(0,12).toLowerCase();return j(ue,$.name,tu($),!1,void 0,$.last_seen),ue}if(q.length>1||q.length===0&&se){const $=q.map(me=>me.name||me.public_key.slice(0,8)),ue=q.reduce((me,ge)=>ge.last_seen&&(!me||ge.last_seen>me)?ge.last_seen:me,null);let pe=`?${G.value.toLowerCase()}`,ve=G.value.toUpperCase();if(u&&se&&V){const me=G.value.toLowerCase();V.packetSource&&Hk(P.current,me,V.packetSource,V.nextPrefix);const ge=P.current.get(me);if(ge&&zk(ge).shouldSplit&&V.nextPrefix){const We=V.nextPrefix.slice(0,2).toLowerCase();pe=`?${me}:>${We}`,ve=`${G.value.toUpperCase()}:>${We}`}}return j(pe,ve,se?"repeater":"client",!0,$.length>0?$:void 0,ue),pe}}return null},[s,j,u]),te=D.useCallback((G,se,W)=>{var T;const re=[];let V=null;if(G.payloadType===yt.PayloadType.Advert&&G.advertPubkey){const z=Y({type:"pubkey",value:G.advertPubkey},!1,!1,W);z&&(re.push(z),V=z)}else if(G.payloadType===yt.PayloadType.AnonRequest&&G.anonRequestPubkey){const z=Y({type:"pubkey",value:G.anonRequestPubkey},!1,!1,W);z&&(re.push(z),V=z)}else if(G.payloadType===yt.PayloadType.TextMessage&&G.srcHash)if(W&&G.srcHash.toLowerCase()===W)re.push("self"),V="self";else{const z=Y({type:"prefix",value:G.srcHash},!1,c,W);z&&(re.push(z),V=z)}else if(G.payloadType===yt.PayloadType.GroupText){const z=G.groupTextSender||((T=se.decrypted_info)==null?void 0:T.sender);if(z){const q=Y({type:"name",value:z},!1,!1,W);q&&(re.push(q),V=q)}}for(let z=0;z<G.pathBytes.length;z++){const q=G.pathBytes[z],$=G.pathBytes[z+1]||null,ue=Y({type:"prefix",value:q},!0,l,W,{packetSource:V,nextPrefix:$});ue&&re.push(ue)}if(G.payloadType===yt.PayloadType.TextMessage&&G.dstHash)if(W&&G.dstHash.toLowerCase()===W)re.push("self");else{const z=Y({type:"prefix",value:G.dstHash},!1,c,W);z?re.push(z):re.push("self")}else re.length>0&&re.push("self");return re.length>0&&re[re.length-1]!=="self"&&re.push("self"),ax(re)},[Y,l,c]);D.useEffect(()=>{var V;let G=0,se=0,W=!1;const re=((V=i==null?void 0:i.public_key)==null?void 0:V.slice(0,12).toLowerCase())||null;for(const T of n){if(C.current.has(T.id))continue;C.current.add(T.id),G++,C.current.size>1e3&&(C.current=new Set(Array.from(C.current).slice(-500)));const z=Fk(T.data);if(!z)continue;const q=te(z,T,re);if(q.length<2)continue;for(let ve=0;ve<q.length-1;ve++)q[ve]!==q[ve+1]&&(ee(q[ve],q[ve+1]),W=!0);const $=Mk(z,T),ue=Date.now(),pe=w.current.get($);if(pe&&ue<pe.expiresAt)pe.paths.push({nodes:q,snr:T.snr??null,timestamp:ue});else{S.current.has($)&&clearTimeout(S.current.get($));const ve=F.current;w.current.set($,{key:$,label:Lk(z.payloadType),paths:[{nodes:q,snr:T.snr??null,timestamp:ue}],firstSeen:ue,expiresAt:ue+ve}),S.current.set($,setTimeout(()=>Z($),ve))}if(w.current.size>100){const ve=Array.from(w.current.entries()).sort((me,ge)=>me[1].firstSeen-ge[1].firstSeen).slice(0,50);for(const[me]of ve)clearTimeout(S.current.get(me)),S.current.delete(me),w.current.delete(me)}se++}W&&U(),G>0&&H(T=>({...T,processed:T.processed+G,animated:T.animated+se}))},[n,i,te,ee,U,Z]);const K=D.useCallback(()=>{const G=R.current;if(!G)return;const se=x.width/2,W=x.height/2,re=Math.min(x.width,x.height)*.4;for(const V of A.current.values()){if(V.id==="self")V.x=se,V.y=W;else{const T=Math.random()*2*Math.PI,z=Math.random()*re;V.x=se+z*Math.cos(T),V.y=W+z*Math.sin(T)}V.vx=0,V.vy=0}G.alpha(1).restart()},[x]),ae=D.useCallback(()=>{const G=R.current;if(!G)return;const se=p,W=-5e3,re=.3,V=.02,T=1e3,z=2e3,q=1e3,$=performance.now(),ue=pe=>{const ve=pe-$;let me,ge;if(ve<T){const Pe=ve/T;me=se+(W-se)*Pe,ge=re+(V-re)*Pe}else if(ve<T+z)me=W,ge=V;else if(ve<T+z+q){const Pe=(ve-T-z)/q;me=W+(se-W)*Pe,ge=V+(re-V)*Pe}else{G.force("charge",eu().strength(Pe=>Pe.id==="self"?se*6:se).distanceMax(500)),G.force("link",Jc(Array.from(b.current.values())).id(Pe=>Pe.id).distance(80).strength(re)),G.alpha(.3).restart();return}G.force("charge",eu().strength(Pe=>Pe.id==="self"?me*6:me).distanceMax(500)),G.force("link",Jc(Array.from(b.current.values())).id(Pe=>Pe.id).distance(80).strength(ge)),G.alpha(.5).restart(),requestAnimationFrame(ue)};requestAnimationFrame(ue)},[p]),Ae=D.useCallback(()=>{for(const W of S.current.values())clearTimeout(W);S.current.clear(),w.current.clear(),C.current.clear(),P.current.clear(),k.current.length=0,b.current.clear();const G=A.current.get("self");A.current.clear(),G&&(G.x=x.width/2,G.y=x.height/2,G.vx=0,G.vy=0,G.lastActivity=Date.now(),A.current.set("self",G));const se=R.current;se&&(se.nodes(Array.from(A.current.values())),se.force("link",Jc([]).id(W=>W.id).distance(80).strength(.3)),se.alpha(.3).restart()),H({processed:0,animated:0,nodes:1,links:0})},[x]);return{nodes:A.current,links:b.current,particles:k.current,simulation:R.current,stats:M,randomizePositions:K,expandContract:ae,clearAndReset:Ae}}function Uk(n,s,i){n.strokeStyle=fn.link,n.lineWidth=2;for(const l of s){const{sourceId:c,targetId:u}=Bv(l),p=i.get(c),d=i.get(u);(p==null?void 0:p.x)!=null&&(p==null?void 0:p.y)!=null&&(d==null?void 0:d.x)!=null&&(d==null?void 0:d.y)!=null&&(n.beginPath(),n.moveTo(p.x,p.y),n.lineTo(d.x,d.y),n.stroke())}}function Zk(n,s,i,l){const c=[];for(const u of s){const p=i.get(u.fromNodeId),d=i.get(u.toNodeId),g=l.has(u.fromNodeId)&&l.has(u.toNodeId);if(u.progress+=u.speed,u.progress>1||(c.push(u),!g||!(p!=null&&p.x)||!(d!=null&&d.x)||p.y==null||d.y==null)||u.progress<0)continue;const m=u.progress,x=p.x+(d.x-p.x)*m,A=p.y+(d.y-p.y)*m;n.fillStyle=u.color+"40",n.beginPath(),n.arc(x,A,14,0,Math.PI*2),n.fill(),n.fillStyle=u.color,n.beginPath(),n.arc(x,A,10,0,Math.PI*2),n.fill(),n.fillStyle="#ffffff",n.font="bold 8px sans-serif",n.textAlign="center",n.textBaseline="middle",n.fillText(u.label,x,A)}return c}function Wk(n,s,i){var l;for(const c of s){if(c.x==null||c.y==null)continue;const u=c.type==="self"?"":c.type==="repeater"?"":c.isAmbiguous?"":"",p=c.type==="self"?36:18;n.font=`${p}px sans-serif`,n.textAlign="center",n.textBaseline="middle",n.fillText(u,c.x,c.y);const d=c.isAmbiguous?c.id:c.name||(c.type==="self"?"Me":c.id.slice(0,8));if(n.font="11px sans-serif",n.textBaseline="top",n.fillStyle=c.isAmbiguous?fn.ambiguous:"#e5e7eb",n.fillText(d,c.x,c.y+p/2+4),c.isAmbiguous&&((l=c.ambiguousNames)!=null&&l.length)){n.font="9px sans-serif",n.fillStyle="#6b7280";let g=c.y+p/2+18;if(i===c.id)for(const m of c.ambiguousNames)n.fillText(m,c.x,g),g+=11;else c.ambiguousNames.length===1?n.fillText(c.ambiguousNames[0],c.x,g):n.fillText(`${c.ambiguousNames[0]} +${c.ambiguousNames.length-1} more`,c.x,g)}}}function lx({packets:n,contacts:s,config:i,fullScreen:l,onFullScreenChange:c,onClearPackets:u}){const p=D.useRef(null),d=D.useRef(null),[g,m]=D.useState({width:800,height:600}),[x,A]=D.useState(!0),[b,k]=D.useState(!1),[R,C]=D.useState(!1),[w,S]=D.useState(-200),[P,N]=D.useState(!1),[F,M]=D.useState(Bk),[H,U]=D.useState(!0),[j,ee]=D.useState(2),[Z,Y]=D.useState(!1),[te,K]=D.useState({x:0,y:0,scale:1}),ae=D.useRef(!1),Ae=D.useRef({x:0,y:0}),G=D.useRef(null),[se,W]=D.useState(null),re=Vk({packets:n,contacts:s,config:i,showAmbiguousPaths:x,showAmbiguousNodes:b,splitAmbiguousByTraffic:R,chargeStrength:w,letEmDrift:H,particleSpeedMultiplier:j,observationWindowSec:F,dimensions:g});D.useEffect(()=>{const ge=()=>{if(d.current){const We=d.current.getBoundingClientRect();m({width:We.width,height:We.height})}};ge();const Pe=new ResizeObserver(ge);return d.current&&Pe.observe(d.current),()=>Pe.disconnect()},[]);const V=D.useCallback(()=>{const ge=p.current,Pe=ge==null?void 0:ge.getContext("2d");if(!ge||!Pe)return;const{width:We,height:Ke}=g,ke=window.devicePixelRatio||1;ge.width=We*ke,ge.height=Ke*ke,ge.style.width=`${We}px`,ge.style.height=`${Ke}px`,Pe.scale(ke,ke),Pe.fillStyle=fn.background,Pe.fillRect(0,0,We,Ke),Pe.save(),Pe.translate(We/2,Ke/2),Pe.scale(te.scale,te.scale),Pe.translate(te.x-We/2,te.y-Ke/2);const Ve=Date.now(),st=Array.from(re.nodes.values()),mt=new Set,et=st.filter($e=>{if($e.type==="self"||$e.type==="client")return mt.add($e.id),!0;if(P&&$e.type==="repeater"){const Ye=$e.lastSeen?$e.lastSeen*1e3:$e.lastActivity;if(Ve-Ye>Pk)return!1}return mt.add($e.id),!0}),Ge=Array.from(re.links.values()).filter($e=>{const{sourceId:Ye,targetId:Le}=Bv($e);return mt.has(Ye)&&mt.has(Le)});Uk(Pe,Ge,re.nodes),re.particles.splice(0,re.particles.length,...Zk(Pe,re.particles,re.nodes,mt)),Wk(Pe,et,se),Pe.restore()},[g,te,re,se,P]);D.useEffect(()=>{let ge=!0;const Pe=()=>{ge&&(V(),requestAnimationFrame(Pe))};return Pe(),()=>{ge=!1}},[V]);const T=D.useCallback((ge,Pe)=>{const{width:We,height:Ke}=g,ke=(ge-We/2)/te.scale-te.x+We/2,Ve=(Pe-Ke/2)/te.scale-te.y+Ke/2;return{x:ke,y:Ve}},[g,te]),z=D.useCallback((ge,Pe)=>{for(const We of re.nodes.values())if(!(We.x==null||We.y==null)&&Math.hypot(ge-We.x,Pe-We.y)<20)return We;return null},[re.nodes]),q=D.useCallback(ge=>{var Ve;const Pe=p.current;if(!Pe)return;const We=Pe.getBoundingClientRect(),Ke=T(ge.clientX-We.left,ge.clientY-We.top),ke=z(Ke.x,Ke.y);ke?(G.current=ke,ke.fx=ke.x,ke.fy=ke.y,(Ve=re.simulation)==null||Ve.alpha(.3).restart()):ae.current=!0,Ae.current={x:ge.clientX,y:ge.clientY}},[T,z,re.simulation]),$=D.useCallback(ge=>{var st;const Pe=p.current;if(!Pe)return;const We=Pe.getBoundingClientRect(),Ke=T(ge.clientX-We.left,ge.clientY-We.top);if(W(((st=z(Ke.x,Ke.y))==null?void 0:st.id)||null),G.current){G.current.fx=Ke.x,G.current.fy=Ke.y;return}if(!ae.current)return;const ke=ge.clientX-Ae.current.x,Ve=ge.clientY-Ae.current.y;Ae.current={x:ge.clientX,y:ge.clientY},K(mt=>({...mt,x:mt.x+ke/mt.scale,y:mt.y+Ve/mt.scale}))},[T,z]),ue=D.useCallback(()=>{G.current&&(G.current.fx=null,G.current.fy=null,G.current=null),ae.current=!1},[]),pe=D.useCallback(()=>{G.current&&(G.current.fx=null,G.current.fy=null,G.current=null),ae.current=!1,W(null)},[]),ve=D.useCallback(ge=>{ge.preventDefault();const Pe=ge.deltaY>0?1/1.1:1.1;K(We=>({...We,scale:Math.min(Math.max(We.scale*Pe,.1),5)}))},[]);D.useEffect(()=>{const ge=p.current;if(ge)return ge.addEventListener("wheel",ve,{passive:!1}),()=>ge.removeEventListener("wheel",ve)},[ve]);const me=()=>G.current?"grabbing":se?"pointer":"grab";return _.jsxs("div",{ref:d,className:"w-full h-full bg-background relative overflow-hidden",children:[_.jsx("canvas",{ref:p,className:"w-full h-full",style:{display:"block",cursor:me()},onMouseDown:q,onMouseMove:$,onMouseUp:ue,onMouseLeave:pe}),!Z&&_.jsx("div",{className:"absolute bottom-4 left-4 bg-background/80 backdrop-blur-sm rounded-lg p-3 text-xs border border-border",children:_.jsxs("div",{className:"flex gap-6",children:[_.jsxs("div",{className:"flex flex-col gap-1.5",children:[_.jsx("div",{className:"text-muted-foreground font-medium mb-1",children:"Nodes"}),Dk.map(ge=>_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:ge.size,children:ge.emoji}),_.jsx("span",{children:ge.label})]},ge.label))]}),_.jsxs("div",{className:"flex flex-col gap-1.5",children:[_.jsx("div",{className:"text-muted-foreground font-medium mb-1",children:"Packets"}),Rk.map(ge=>_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center text-[8px] font-bold text-white",style:{backgroundColor:ge.color},children:ge.label}),_.jsx("span",{children:ge.description})]},ge.label))]})]})}),_.jsx("div",{className:"absolute top-4 right-4 bg-background/80 backdrop-blur-sm rounded-lg p-3 text-xs border border-border",children:_.jsxs("div",{className:"flex flex-col gap-2",children:[!Z&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{children:["Nodes: ",re.stats.nodes]}),_.jsxs("div",{children:["Links: ",re.stats.links]}),_.jsxs("div",{className:"border-t border-border pt-2 mt-1 flex flex-col gap-2",children:[_.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[_.jsx(Di,{checked:x,onCheckedChange:ge=>A(ge===!0)}),_.jsx("span",{title:"Show placeholder nodes for repeaters when the 1-byte prefix matches multiple contacts",children:"Ambiguous repeaters"})]}),_.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[_.jsx(Di,{checked:b,onCheckedChange:ge=>k(ge===!0)}),_.jsx("span",{title:"Show placeholder nodes for senders/recipients when only a 1-byte prefix is known",children:"Ambiguous sender/recipient"})]}),_.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[_.jsx(Di,{checked:R,onCheckedChange:ge=>C(ge===!0),disabled:!x}),_.jsx("span",{title:"Split ambiguous repeaters into separate nodes based on traffic patterns (prevnext). Helps identify colliding prefixes representing different physical nodes.",className:x?"":"text-muted-foreground",children:"Hueristically group repeaters by traffic pattern"})]}),_.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[_.jsx(Di,{checked:P,onCheckedChange:ge=>N(ge===!0)}),_.jsx("span",{title:"Hide repeaters not heard within the last 48 hours",children:"Hide repeaters >48hrs heard"})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("label",{className:"text-muted-foreground",title:"How long to wait for duplicate packets via different paths before animating",children:"Observation window:"}),_.jsx("input",{type:"number",min:"1",max:"60",value:F,onChange:ge=>M(Math.max(1,Math.min(60,parseInt(ge.target.value)||1))),className:"w-12 px-1 py-0.5 bg-background border border-border rounded text-xs text-center"}),_.jsx("span",{className:"text-muted-foreground",children:"sec"})]}),_.jsxs("div",{className:"border-t border-border pt-2 mt-1 flex flex-col gap-2",children:[_.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[_.jsx(Di,{checked:H,onCheckedChange:ge=>U(ge===!0)}),_.jsx("span",{title:"When enabled, the graph continuously reorganizes itself into a better layout",children:"Let 'em drift"})]}),_.jsxs("div",{className:"flex flex-col gap-1 mt-1",children:[_.jsxs("label",{className:"text-muted-foreground",title:"How strongly nodes repel each other. Higher values spread nodes out more.",children:["Repulsion: ",Math.abs(w)]}),_.jsx("input",{type:"range",min:"50",max:"2500",value:Math.abs(w),onChange:ge=>S(-parseInt(ge.target.value)),className:"w-full h-2 bg-border rounded-lg appearance-none cursor-pointer accent-primary"})]}),_.jsxs("div",{className:"flex flex-col gap-1 mt-1",children:[_.jsxs("label",{className:"text-muted-foreground",title:"How fast particles travel along links. Higher values make packets move faster.",children:["Packet speed: ",j,"x"]}),_.jsx("input",{type:"range",min:"1",max:"5",step:"0.5",value:j,onChange:ge=>ee(parseFloat(ge.target.value)),className:"w-full h-2 bg-border rounded-lg appearance-none cursor-pointer accent-primary"})]})]}),_.jsx("button",{onClick:re.randomizePositions,className:"mt-2 px-3 py-1.5 bg-primary/20 hover:bg-primary/30 text-primary rounded text-xs transition-colors",title:"Randomize node positions and let the simulation settle into a new layout",children:"Shuffle layout"}),_.jsx("button",{onClick:re.expandContract,className:"mt-1 px-3 py-1.5 bg-primary/20 hover:bg-primary/30 text-primary rounded text-xs transition-colors",title:"Expand nodes apart then contract back - can help untangle the graph",children:"Oooh Big Stretch!"}),_.jsx("button",{onClick:()=>{re.clearAndReset(),u==null||u()},className:"mt-1 px-3 py-1.5 bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-500 rounded text-xs transition-colors",title:"Clear all nodes, links, and packets - reset to initial state",children:"Clear & Reset"})]})]}),_.jsxs("div",{className:Z?"":"border-t border-border pt-2 mt-1 flex flex-col gap-2",children:[_.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[_.jsx(Di,{checked:Z,onCheckedChange:ge=>Y(ge===!0)}),_.jsx("span",{title:"Hide legends and controls for a cleaner view",children:"Hide UI"})]}),c&&_.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[_.jsx(Di,{checked:l,onCheckedChange:ge=>c(ge===!0)}),_.jsx("span",{title:"Hide the packet feed panel",children:"Full screen"})]})]})]})})]})}function qk({packets:n,contacts:s,config:i,onClearPackets:l}){const[c,u]=D.useState(!1);return _.jsxs("div",{className:"flex flex-col h-full",children:[_.jsx("div",{className:"flex justify-between items-center px-4 py-3 border-b border-border font-medium text-lg",children:_.jsx("span",{children:"Mesh Visualizer"})}),_.jsx("div",{className:"flex-1 overflow-hidden md:hidden",children:_.jsxs(G0,{defaultValue:"visualizer",className:"h-full flex flex-col",children:[_.jsxs(md,{className:"mx-4 mt-2 grid grid-cols-2",children:[_.jsx(Cr,{value:"visualizer",children:"Visualizer"}),_.jsx(Cr,{value:"packets",children:"Packet Feed"})]}),_.jsx(Er,{value:"visualizer",className:"flex-1 m-0 overflow-hidden",children:_.jsx(lx,{packets:n,contacts:s,config:i,onClearPackets:l})}),_.jsx(Er,{value:"packets",className:"flex-1 m-0 overflow-hidden",children:_.jsx(k0,{packets:n})})]})}),_.jsxs("div",{className:"hidden md:flex flex-1 overflow-hidden",children:[_.jsx("div",{className:ft("overflow-hidden transition-all duration-200",c?"flex-1":"flex-1 border-r border-border"),children:_.jsx(lx,{packets:n,contacts:s,config:i,fullScreen:c,onFullScreenChange:u,onClearPackets:l})}),_.jsx("div",{className:ft("overflow-hidden transition-all duration-200",c?"w-0":"w-[31rem] lg:w-[38rem]"),children:_.jsxs("div",{className:"h-full flex flex-col",children:[_.jsx("div",{className:"px-3 py-2 border-b border-border text-sm font-medium text-muted-foreground",children:"Packet Feed"}),_.jsx("div",{className:"flex-1 overflow-hidden",children:_.jsx(k0,{packets:n})})]})})]})]})}var Gk=Bl();const Pv=aa(Gk);var Zu={exports:{}},$k=Zu.exports,cx;function Kk(){return cx||(cx=1,(function(n,s){(function(i,l,c){n.exports=l(vt(),Bl(),Ad())})($k,function(i){return i.HmacSHA256})})(Zu)),Zu.exports}var Qk=Kk();const Yk=aa(Qk);var Wu={exports:{}},Xk=Wu.exports,ux;function Jk(){return ux||(ux=1,(function(n,s){(function(i,l){n.exports=l(vt())})(Xk,function(i){return i.enc.Hex})})(Wu)),Wu.exports}var eS=Jk();const na=aa(eS),Tv="abcdefghijklmnopqrstuvwxyz0123456789",Jo=Tv.length,Dv=Tv+"-",T0="[[public room]]",qu="8b3387e9c5cdea6ac9e5edbaa115cd72",D0=720*60*60;function tS(n){if(!n||n.length===0)return null;const s=n.length;let i=0,l=1;for(let c=0;c<s;c++){const u=n[c],p=Dv.indexOf(u);if(p===-1)return null;const d=c===0,g=c===s-1,m=d||g?36:37;if((d||g)&&p===36)return null;i+=p*l,l*=m}return{length:s,index:i}}function ts(n,s){if(n<=0)return null;let i="",l=s,c=!1;for(let u=0;u<n;u++){const p=u===0,d=u===n-1,g=p||d?36:37,m=l%g;l=Math.floor(l/g);const x=m===36;if(x&&c)return null;c=x,i+=Dv[m]}return i}function R0(n){return n===T0?qu:Pv(n).toString(na).substring(0,32)}function N0(n){return Pv(na.parse(n)).toString(na).substring(0,2)}function Rv(n,s,i){const l=i.padEnd(64,"0");return Yk(na.parse(n),na.parse(l)).toString(na).substring(0,4).toLowerCase()===s.toLowerCase()}function vl(n){if(n===1)return Jo;if(n===2)return Jo*Jo;let s=Jo,i=1;for(let c=2;c<=n-2;c++){const u=(s+i)*Jo,p=s;s=u,i=p}const l=n>2?s+i:1;return Jo*l*Jo}function nS(n,s=D0,i){const l=Math.floor(Date.now()/1e3);return n<=l&&n>=l-s}function rS(n){return!n.includes("")}class Cd{constructor(){this.device=null,this.pipeline=null,this.bindGroupLayout=null,this.paramsBuffer=null,this.matchCountBuffer=null,this.matchIndicesBuffer=null,this.ciphertextBuffer=null,this.ciphertextBufferSize=0,this.matchCountReadBuffers=[null,null],this.matchIndicesReadBuffers=[null,null],this.currentReadBufferIndex=0,this.bindGroup=null,this.bindGroupDirty=!0,this.shaderCode=`
// SHA256 round constants
const K: array<u32, 64> = array<u32, 64>(
  0x428a2f98u, 0x71374491u, 0xb5c0fbcfu, 0xe9b5dba5u, 0x3956c25bu, 0x59f111f1u, 0x923f82a4u, 0xab1c5ed5u,
  0xd807aa98u, 0x12835b01u, 0x243185beu, 0x550c7dc3u, 0x72be5d74u, 0x80deb1feu, 0x9bdc06a7u, 0xc19bf174u,
  0xe49b69c1u, 0xefbe4786u, 0x0fc19dc6u, 0x240ca1ccu, 0x2de92c6fu, 0x4a7484aau, 0x5cb0a9dcu, 0x76f988dau,
  0x983e5152u, 0xa831c66du, 0xb00327c8u, 0xbf597fc7u, 0xc6e00bf3u, 0xd5a79147u, 0x06ca6351u, 0x14292967u,
  0x27b70a85u, 0x2e1b2138u, 0x4d2c6dfcu, 0x53380d13u, 0x650a7354u, 0x766a0abbu, 0x81c2c92eu, 0x92722c85u,
  0xa2bfe8a1u, 0xa81a664bu, 0xc24b8b70u, 0xc76c51a3u, 0xd192e819u, 0xd6990624u, 0xf40e3585u, 0x106aa070u,
  0x19a4c116u, 0x1e376c08u, 0x2748774cu, 0x34b0bcb5u, 0x391c0cb3u, 0x4ed8aa4au, 0x5b9cca4fu, 0x682e6ff3u,
  0x748f82eeu, 0x78a5636fu, 0x84c87814u, 0x8cc70208u, 0x90befffau, 0xa4506cebu, 0xbef9a3f7u, 0xc67178f2u
);

// Character lookup table (a-z = 0-25, 0-9 = 26-35, dash = 36)
const CHARS: array<u32, 37> = array<u32, 37>(
  0x61u, 0x62u, 0x63u, 0x64u, 0x65u, 0x66u, 0x67u, 0x68u, 0x69u, 0x6au, // a-j
  0x6bu, 0x6cu, 0x6du, 0x6eu, 0x6fu, 0x70u, 0x71u, 0x72u, 0x73u, 0x74u, // k-t
  0x75u, 0x76u, 0x77u, 0x78u, 0x79u, 0x7au,                             // u-z
  0x30u, 0x31u, 0x32u, 0x33u, 0x34u, 0x35u, 0x36u, 0x37u, 0x38u, 0x39u, // 0-9
  0x2du                                                                  // dash
);

struct Params {
  target_channel_hash: u32,
  batch_offset: u32,
  name_length: u32,
  batch_size: u32,
  target_mac: u32,           // First 2 bytes of target MAC (in high 16 bits)
  ciphertext_words: u32,     // Number of 32-bit words in ciphertext
  ciphertext_len_bits: u32,  // Length of ciphertext in bits
  verify_mac: u32,           // 1 to verify MAC, 0 to skip
}

@group(0) @binding(0) var<uniform> params: Params;
@group(0) @binding(1) var<storage, read_write> match_count: atomic<u32>;
@group(0) @binding(2) var<storage, read_write> match_indices: array<u32>;
@group(0) @binding(3) var<storage, read> ciphertext: array<u32>; // Ciphertext data

fn rotr(x: u32, n: u32) -> u32 {
  return (x >> n) | (x << (32u - n));
}

fn ch(x: u32, y: u32, z: u32) -> u32 {
  return (x & y) ^ (~x & z);
}

fn maj(x: u32, y: u32, z: u32) -> u32 {
  return (x & y) ^ (x & z) ^ (y & z);
}

fn sigma0(x: u32) -> u32 {
  return rotr(x, 2u) ^ rotr(x, 13u) ^ rotr(x, 22u);
}

fn sigma1(x: u32) -> u32 {
  return rotr(x, 6u) ^ rotr(x, 11u) ^ rotr(x, 25u);
}

fn gamma0(x: u32) -> u32 {
  return rotr(x, 7u) ^ rotr(x, 18u) ^ (x >> 3u);
}

fn gamma1(x: u32) -> u32 {
  return rotr(x, 17u) ^ rotr(x, 19u) ^ (x >> 10u);
}

// Convert index to room name bytes, returns the hash as a u32 for the first byte check
fn index_to_room_name(idx: u32, length: u32, msg: ptr<function, array<u32, 16>>) -> bool {
  // Message starts with '#' (0x23)
  var byte_pos = 0u;
  var word_idx = 0u;
  var current_word = 0x23000000u; // '#' in big-endian position 0
  byte_pos = 1u;

  var remaining = idx;
  var prev_was_dash = false;

  // Generate room name from index
  for (var i = 0u; i < length; i++) {
    let char_count = select(37u, 36u, i == 0u || i == length - 1u); // no dash at start/end
    var char_idx = remaining % char_count;
    remaining = remaining / char_count;

    // Check for consecutive dashes (invalid)
    let is_dash = char_idx == 36u && i > 0u && i < length - 1u;
    if (is_dash && prev_was_dash) {
      return false; // Invalid: consecutive dashes
    }
    prev_was_dash = is_dash;

    // Map char index to actual character
    let c = CHARS[char_idx];

    // Pack byte into current word (big-endian)
    let shift = (3u - byte_pos % 4u) * 8u;
    if (byte_pos % 4u == 0u && byte_pos > 0u) {
      (*msg)[word_idx] = current_word;
      word_idx = word_idx + 1u;
      current_word = 0u;
    }
    current_word = current_word | (c << shift);
    byte_pos = byte_pos + 1u;
  }

  // Add padding: 0x80 followed by zeros, then length in bits
  let msg_len_bits = (length + 1u) * 8u; // +1 for '#'

  // Add 0x80 padding byte
  let shift = (3u - byte_pos % 4u) * 8u;
  if (byte_pos % 4u == 0u) {
    (*msg)[word_idx] = current_word;
    word_idx = word_idx + 1u;
    current_word = 0x80000000u;
  } else {
    current_word = current_word | (0x80u << shift);
  }
  byte_pos = byte_pos + 1u;

  // Store current word
  if (byte_pos % 4u == 0u || word_idx < 14u) {
    (*msg)[word_idx] = current_word;
    word_idx = word_idx + 1u;
  }

  // Zero-fill until word 14
  for (var i = word_idx; i < 14u; i++) {
    (*msg)[i] = 0u;
  }

  // Length in bits (64-bit, but we only use lower 32 bits for short messages)
  (*msg)[14u] = 0u;
  (*msg)[15u] = msg_len_bits;

  return true;
}

fn sha256_block(msg: ptr<function, array<u32, 16>>) -> array<u32, 8> {
  // Initialize hash values
  var h: array<u32, 8> = array<u32, 8>(
    0x6a09e667u, 0xbb67ae85u, 0x3c6ef372u, 0xa54ff53au,
    0x510e527fu, 0x9b05688cu, 0x1f83d9abu, 0x5be0cd19u
  );

  // Message schedule
  var w: array<u32, 64>;
  for (var i = 0u; i < 16u; i++) {
    w[i] = (*msg)[i];
  }
  for (var i = 16u; i < 64u; i++) {
    w[i] = gamma1(w[i-2u]) + w[i-7u] + gamma0(w[i-15u]) + w[i-16u];
  }

  // Compression
  var a = h[0]; var b = h[1]; var c = h[2]; var d = h[3];
  var e = h[4]; var f = h[5]; var g = h[6]; var hh = h[7];

  for (var i = 0u; i < 64u; i++) {
    let t1 = hh + sigma1(e) + ch(e, f, g) + K[i] + w[i];
    let t2 = sigma0(a) + maj(a, b, c);
    hh = g; g = f; f = e; e = d + t1;
    d = c; c = b; b = a; a = t1 + t2;
  }

  h[0] = h[0] + a; h[1] = h[1] + b; h[2] = h[2] + c; h[3] = h[3] + d;
  h[4] = h[4] + e; h[5] = h[5] + f; h[6] = h[6] + g; h[7] = h[7] + hh;

  return h;
}

// Compute SHA256 of the key (16 bytes) to get channel hash
fn sha256_key(key: array<u32, 4>) -> u32 {
  var msg: array<u32, 16>;

  // Key bytes (16 bytes = 4 words)
  msg[0] = key[0];
  msg[1] = key[1];
  msg[2] = key[2];
  msg[3] = key[3];

  // Padding: 0x80 followed by zeros
  msg[4] = 0x80000000u;
  for (var i = 5u; i < 14u; i++) {
    msg[i] = 0u;
  }

  // Length: 128 bits
  msg[14] = 0u;
  msg[15] = 128u;

  let hash = sha256_block(&msg);

  // Return first byte of hash (big-endian)
  return hash[0] >> 24u;
}

// HMAC-SHA256 for MAC verification
// Key is 16 bytes (4 words), padded to 32 bytes with zeros for MeshCore
// Returns first 2 bytes of HMAC (as u32 in high 16 bits)
fn hmac_sha256_mac(key: array<u32, 4>, ciphertext_len: u32) -> u32 {
  // HMAC: H((K' ^ opad) || H((K' ^ ipad) || message))
  // K' is 64 bytes (32 bytes key + 32 bytes zero padding for MeshCore, then padded to 64)
  // ipad = 0x36 repeated, opad = 0x5c repeated

  // Build padded key (64 bytes = 16 words)
  // MeshCore uses 32-byte secret: 16-byte key + 16 zero bytes
  var k_pad: array<u32, 16>;
  k_pad[0] = key[0];
  k_pad[1] = key[1];
  k_pad[2] = key[2];
  k_pad[3] = key[3];
  for (var i = 4u; i < 16u; i++) {
    k_pad[i] = 0u;
  }

  // Inner hash: SHA256((K' ^ ipad) || message)
  // First block: K' ^ ipad (64 bytes)
  var inner_block: array<u32, 16>;
  for (var i = 0u; i < 16u; i++) {
    inner_block[i] = k_pad[i] ^ 0x36363636u;
  }

  // Initialize hash state with first block
  var h: array<u32, 8> = sha256_block(&inner_block);

  // Process ciphertext blocks (continuing from h state)
  let ciphertext_words = params.ciphertext_words;
  var word_idx = 0u;

  // Process full 64-byte blocks of ciphertext
  while (word_idx + 16u <= ciphertext_words) {
    var block: array<u32, 16>;
    for (var i = 0u; i < 16u; i++) {
      block[i] = ciphertext[word_idx + i];
    }
    h = sha256_block_continue(&block, h);
    word_idx = word_idx + 16u;
  }

  // Final block with remaining ciphertext + padding
  var final_block: array<u32, 16>;
  var remaining = ciphertext_words - word_idx;
  for (var i = 0u; i < 16u; i++) {
    if (i < remaining) {
      final_block[i] = ciphertext[word_idx + i];
    } else if (i == remaining) {
      // Add 0x80 padding
      final_block[i] = 0x80000000u;
    } else {
      final_block[i] = 0u;
    }
  }

  // Add length (64 bytes of ipad + ciphertext length)
  let total_bits = 512u + params.ciphertext_len_bits;
  if (remaining < 14u) {
    final_block[14] = 0u;
    final_block[15] = total_bits;
    h = sha256_block_continue(&final_block, h);
  } else {
    // Need extra block for length
    h = sha256_block_continue(&final_block, h);
    var len_block: array<u32, 16>;
    for (var i = 0u; i < 14u; i++) {
      len_block[i] = 0u;
    }
    len_block[14] = 0u;
    len_block[15] = total_bits;
    h = sha256_block_continue(&len_block, h);
  }

  let inner_hash = h;

  // Outer hash: SHA256((K' ^ opad) || inner_hash)
  var outer_block: array<u32, 16>;
  for (var i = 0u; i < 16u; i++) {
    outer_block[i] = k_pad[i] ^ 0x5c5c5c5cu;
  }
  h = sha256_block(&outer_block);

  // Second block: inner_hash (32 bytes) + padding
  var hash_block: array<u32, 16>;
  for (var i = 0u; i < 8u; i++) {
    hash_block[i] = inner_hash[i];
  }
  hash_block[8] = 0x80000000u;
  for (var i = 9u; i < 14u; i++) {
    hash_block[i] = 0u;
  }
  hash_block[14] = 0u;
  hash_block[15] = 512u + 256u; // 64 bytes opad + 32 bytes inner hash

  h = sha256_block_continue(&hash_block, h);

  // Return first 2 bytes (high 16 bits of first word)
  return h[0] & 0xFFFF0000u;
}

// SHA256 block computation continuing from existing state
fn sha256_block_continue(msg: ptr<function, array<u32, 16>>, h_in: array<u32, 8>) -> array<u32, 8> {
  var h = h_in;

  // Message schedule
  var w: array<u32, 64>;
  for (var i = 0u; i < 16u; i++) {
    w[i] = (*msg)[i];
  }
  for (var i = 16u; i < 64u; i++) {
    w[i] = gamma1(w[i-2u]) + w[i-7u] + gamma0(w[i-15u]) + w[i-16u];
  }

  // Compression
  var a = h[0]; var b = h[1]; var c = h[2]; var d = h[3];
  var e = h[4]; var f = h[5]; var g = h[6]; var hh = h[7];

  for (var i = 0u; i < 64u; i++) {
    let t1 = hh + sigma1(e) + ch(e, f, g) + K[i] + w[i];
    let t2 = sigma0(a) + maj(a, b, c);
    hh = g; g = f; f = e; e = d + t1;
    d = c; c = b; b = a; a = t1 + t2;
  }

  h[0] = h[0] + a; h[1] = h[1] + b; h[2] = h[2] + c; h[3] = h[3] + d;
  h[4] = h[4] + e; h[5] = h[5] + f; h[6] = h[6] + g; h[7] = h[7] + hh;

  return h;
}

// Process a single candidate and record match if found
fn process_candidate(name_idx: u32) {
  // Generate message for this room name
  var msg: array<u32, 16>;
  let valid = index_to_room_name(name_idx, params.name_length, &msg);

  if (!valid) {
    return;
  }

  // Compute SHA256("#roomname") - this gives us the key
  let key_hash = sha256_block(&msg);

  // Take first 16 bytes (4 words) as the key
  var key: array<u32, 4>;
  key[0] = key_hash[0];
  key[1] = key_hash[1];
  key[2] = key_hash[2];
  key[3] = key_hash[3];

  // Compute SHA256(key) to get channel hash
  let channel_hash = sha256_key(key);

  // Check if channel hash matches target
  if (channel_hash != params.target_channel_hash) {
    return;
  }

  // Channel hash matches - verify MAC if enabled
  if (params.verify_mac == 1u) {
    let computed_mac = hmac_sha256_mac(key, params.ciphertext_len_bits);
    if (computed_mac != params.target_mac) {
      return;
    }
  }

  // Found a match - record the index
  let match_idx = atomicAdd(&match_count, 1u);
  if (match_idx < 1024u) { // Limit stored matches
    match_indices[match_idx] = name_idx;
  }
}

// Each thread processes 32 candidates to amortize thread overhead
const CANDIDATES_PER_THREAD: u32 = 32u;

@compute @workgroup_size(256)
fn main(@builtin(global_invocation_id) global_id: vec3<u32>) {
  let base_idx = global_id.x * CANDIDATES_PER_THREAD;

  for (var i = 0u; i < CANDIDATES_PER_THREAD; i++) {
    let idx = base_idx + i;
    if (idx >= params.batch_size) {
      return;
    }
    let name_idx = params.batch_offset + idx;
    process_candidate(name_idx);
  }
}
`}async init(){if(!navigator.gpu)return console.warn("WebGPU not supported"),!1;try{const s=await navigator.gpu.requestAdapter();if(!s)return console.warn("No GPU adapter found"),!1;this.device=await s.requestDevice(),this.bindGroupLayout=this.device.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}}]}),this.paramsBuffer=this.device.createBuffer({size:32,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.matchCountBuffer=this.device.createBuffer({size:4,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST}),this.matchIndicesBuffer=this.device.createBuffer({size:1024*4,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC});for(let c=0;c<2;c++)this.matchCountReadBuffers[c]=this.device.createBuffer({size:4,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST}),this.matchIndicesReadBuffers[c]=this.device.createBuffer({size:1024*4,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST});const i=this.device.createShaderModule({code:this.shaderCode}),l=this.device.createPipelineLayout({bindGroupLayouts:[this.bindGroupLayout]});return this.pipeline=this.device.createComputePipeline({layout:l,compute:{module:i,entryPoint:"main"}}),!0}catch(s){return console.error("WebGPU initialization failed:",s),!1}}isAvailable(){return this.device!==null&&this.pipeline!==null}indexToRoomName(s,i){return ts(i,s)}countNamesForLength(s){return vl(s)}async runBatch(s,i,l,c,u,p){if(!this.device||!this.pipeline||!this.bindGroupLayout||!this.paramsBuffer||!this.matchCountBuffer||!this.matchIndicesBuffer||!this.matchCountReadBuffers[0]||!this.matchCountReadBuffers[1]||!this.matchIndicesReadBuffers[0]||!this.matchIndicesReadBuffers[1])throw new Error("GPU not initialized");const d=this.currentReadBufferIndex;this.currentReadBufferIndex=1-this.currentReadBufferIndex;const g=this.matchCountReadBuffers[d],m=this.matchIndicesReadBuffers[d],x=u&&p?1:0;let A,b=0,k=0;if(x){const M=new Uint8Array(u.length/2);for(let Z=0;Z<M.length;Z++)M[Z]=parseInt(u.substr(Z*2,2),16);b=M.length*8;const H=Math.ceil(M.length/4)*4,U=new Uint8Array(H);U.set(M),A=new Uint32Array(H/4);for(let Z=0;Z<A.length;Z++)A[Z]=U[Z*4]<<24|U[Z*4+1]<<16|U[Z*4+2]<<8|U[Z*4+3];const j=parseInt(p.substr(0,2),16),ee=parseInt(p.substr(2,2),16);k=j<<24|ee<<16}else A=new Uint32Array([0]);const R=Math.max(A.length*4,4);(!this.ciphertextBuffer||this.ciphertextBufferSize<R)&&(this.ciphertextBuffer&&this.ciphertextBuffer.destroy(),this.ciphertextBuffer=this.device.createBuffer({size:R,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST}),this.ciphertextBufferSize=R,this.bindGroupDirty=!0);const C=new Uint32Array([s,l,i,c,k,A.length,b,x]);this.device.queue.writeBuffer(this.paramsBuffer,0,C),this.device.queue.writeBuffer(this.ciphertextBuffer,0,A),this.device.queue.writeBuffer(this.matchCountBuffer,0,Cd.ZERO_DATA),(this.bindGroupDirty||!this.bindGroup)&&(this.bindGroup=this.device.createBindGroup({layout:this.bindGroupLayout,entries:[{binding:0,resource:{buffer:this.paramsBuffer}},{binding:1,resource:{buffer:this.matchCountBuffer}},{binding:2,resource:{buffer:this.matchIndicesBuffer}},{binding:3,resource:{buffer:this.ciphertextBuffer}}]}),this.bindGroupDirty=!1);const w=this.device.createCommandEncoder(),S=w.beginComputePass();S.setPipeline(this.pipeline),S.setBindGroup(0,this.bindGroup),S.dispatchWorkgroups(Math.ceil(c/(256*32))),S.end(),w.copyBufferToBuffer(this.matchCountBuffer,0,g,0,4),w.copyBufferToBuffer(this.matchIndicesBuffer,0,m,0,1024*4),this.device.queue.submit([w.finish()]),await g.mapAsync(GPUMapMode.READ);const N=new Uint32Array(g.getMappedRange())[0];g.unmap();const F=[];if(N>0){await m.mapAsync(GPUMapMode.READ);const M=new Uint32Array(m.getMappedRange());for(let H=0;H<Math.min(N,1024);H++)F.push(M[H]);m.unmap()}return F}destroy(){var s,i,l,c,u,p,d,g;(s=this.paramsBuffer)==null||s.destroy(),(i=this.matchCountBuffer)==null||i.destroy(),(l=this.matchIndicesBuffer)==null||l.destroy(),(c=this.ciphertextBuffer)==null||c.destroy(),(u=this.matchCountReadBuffers[0])==null||u.destroy(),(p=this.matchCountReadBuffers[1])==null||p.destroy(),(d=this.matchIndicesReadBuffers[0])==null||d.destroy(),(g=this.matchIndicesReadBuffers[1])==null||g.destroy(),this.paramsBuffer=null,this.matchCountBuffer=null,this.matchIndicesBuffer=null,this.ciphertextBuffer=null,this.ciphertextBufferSize=0,this.matchCountReadBuffers=[null,null],this.matchIndicesReadBuffers=[null,null],this.currentReadBufferIndex=0,this.bindGroup=null,this.bindGroupDirty=!0,this.device&&(this.device.destroy(),this.device=null),this.pipeline=null,this.bindGroupLayout=null}}Cd.ZERO_DATA=new Uint32Array([0]);function iS(){return typeof navigator<"u"&&"gpu"in navigator}class dx{runBatch(s,i,l,c,u,p){const d=[],g=s.toString(16).padStart(2,"0"),m=!!(u&&p);for(let x=0;x<c;x++){const A=l+x,b=ts(i,A);if(!b)continue;const k=R0("#"+b);N0(k)===g&&(m&&!Rv(u,p,k)||d.push(A))}return d}destroy(){}}const oS=/^[a-z0-9-]+$/,sS=/^[a-z0-9].*[a-z0-9]$|^[a-z0-9]$/,aS=/--/;function fx(n){return!(!n||n.length===0||!oS.test(n)||n.length>1&&!sS.test(n)||aS.test(n))}class lS{constructor(){this.gpuInstance=null,this.cpuInstance=null,this.wordlist=[],this.abortFlag=!1,this.useTimestampFilter=!0,this.useUtf8Filter=!0,this.useSenderFilter=!0,this.validSeconds=D0,this.useCpu=!1}async loadWordlist(s){const i=await fetch(s);if(!i.ok)throw new Error(`Failed to load wordlist: ${i.status} ${i.statusText}`);const c=(await i.text()).split(`
`).map(u=>u.trim().toLowerCase()).filter(u=>u.length>0);this.wordlist=c.filter(fx)}setWordlist(s){this.wordlist=s.map(i=>i.trim().toLowerCase()).filter(fx)}abort(){this.abortFlag=!0}isGpuAvailable(){return iS()}async decodePacket(s){var l;const i=s.trim().replace(/\s+/g,"").replace(/^0x/i,"");if(!i||!/^[0-9a-fA-F]+$/.test(i))return null;try{const u=(l=(await yt.MeshCorePacketDecoder.decodeWithVerification(i,{})).payload)==null?void 0:l.decoded;return!(u!=null&&u.channelHash)||!(u!=null&&u.ciphertext)||!(u!=null&&u.cipherMac)?null:{channelHash:u.channelHash,ciphertext:u.ciphertext,cipherMac:u.cipherMac,isGroupText:!0}}catch{return null}}async crack(s,i,l){this.abortFlag=!1,this.useTimestampFilter=(i==null?void 0:i.useTimestampFilter)??!0,this.useUtf8Filter=(i==null?void 0:i.useUtf8Filter)??!0,this.useSenderFilter=(i==null?void 0:i.useSenderFilter)??!0,this.validSeconds=(i==null?void 0:i.validSeconds)??D0,this.useCpu=(i==null?void 0:i.forceCpu)??!1;const c=(i==null?void 0:i.maxLength)??8,u=(i==null?void 0:i.startingLength)??1,p=(i==null?void 0:i.useDictionary)??!0,d=(i==null?void 0:i.startFromType)??"bruteforce",g=s.toLowerCase(),m=await this.decodePacket(g);if(!m)return{found:!1,error:"Invalid packet or not a GroupText packet"};const{channelHash:x,ciphertext:A,cipherMac:b}=m,k=parseInt(x,16);this.useCpu?this.cpuInstance||(this.cpuInstance=new dx):this.gpuInstance||(this.gpuInstance=new Cd,await this.gpuInstance.init()||(this.useCpu=!0,this.cpuInstance=new dx));const R=performance.now();let C=0,w=performance.now(),S=u,P=0,N=0,F=!1;if(i!=null&&i.startFrom){const K=i.startFrom.toLowerCase();if(d==="dictionary"){const ae=this.wordlist.indexOf(K);ae>=0&&(N=ae+1)}else{F=!0;const ae=tS(K);ae&&(S=Math.max(u,ae.length),P=ae.index+1,P>=vl(S)&&(S++,P=0))}}let M=0;p&&!F&&this.wordlist.length>0&&(M+=this.wordlist.length-N);for(let K=S;K<=c;K++)M+=vl(K);M-=P;const H=(K,ae,Ae)=>{if(!l)return;const se=(performance.now()-R)/1e3,W=se>0?Math.round(C/se):0,re=M-C,V=W>0?re/W:0;l({checked:C,total:M,percent:M>0?Math.min(100,C/M*100):0,rateKeysPerSec:W,etaSeconds:V,elapsedSeconds:se,currentLength:ae,currentPosition:Ae,phase:K})},U=K=>{if(!Rv(A,b,K))return{valid:!1};const ae=yt.ChannelCrypto.decryptGroupTextMessage(A,b,K);return!ae.success||!ae.data?{valid:!1}:this.useTimestampFilter&&!nS(ae.data.timestamp,this.validSeconds)?{valid:!1}:this.useUtf8Filter&&!rS(ae.data.message)?{valid:!1}:this.useSenderFilter&&!ae.data.sender?{valid:!1}:{valid:!0,message:ae.data.sender?`${ae.data.sender}: ${ae.data.message}`:ae.data.message}};if(!F&&N===0&&S===u&&P===0){H("public-key",0,T0);const K=N0(qu);if(x===K){const ae=U(qu);if(ae.valid)return{found:!0,roomName:T0,key:qu,decryptedMessage:ae.message}}}if(p&&!F&&this.wordlist.length>0)for(let K=N;K<this.wordlist.length;K++){if(this.abortFlag)return{found:!1,aborted:!0,resumeFrom:this.wordlist[K],resumeType:"dictionary"};const ae=this.wordlist[K],Ae=R0("#"+ae),G=N0(Ae);if(parseInt(G,16)===k){const W=U(Ae);if(W.valid)return{found:!0,roomName:ae,key:Ae,decryptedMessage:W.message,resumeFrom:ae,resumeType:"dictionary"}}C++;const se=performance.now();se-w>=200&&(H("wordlist",ae.length,ae),w=se,await new Promise(W=>setTimeout(W,0)))}const j=this.useCpu?1024:32768,ee=(i==null?void 0:i.gpuDispatchMs)??1e3;let Z=j,Y=!1;for(let K=S;K<=c;K++){if(this.abortFlag)return{found:!1,aborted:!0,resumeFrom:ts(K,0)||void 0,resumeType:"bruteforce"};const ae=vl(K);let Ae=K===S?P:0;for(;Ae<ae;){if(this.abortFlag)return{found:!1,aborted:!0,resumeFrom:ts(K,Ae)||void 0,resumeType:"bruteforce"};const G=Math.min(Z,ae-Ae),se=performance.now();let W;this.useCpu?W=this.cpuInstance.runBatch(k,K,Ae,G,A,b):W=await this.gpuInstance.runBatch(k,K,Ae,G,A,b);const re=performance.now()-se;if(C+=G,!this.useCpu&&!Y&&G>=j&&re>0){const T=ee/re,z=Math.round(G*T),q=Math.pow(2,Math.round(Math.log2(Math.max(j,z))));Z=Math.max(j,q),Y=!0}for(const T of W){const z=ts(K,T);if(!z)continue;const q=R0("#"+z),$=U(q);if($.valid)return{found:!0,roomName:z,key:q,decryptedMessage:$.message,resumeFrom:z,resumeType:"bruteforce"}}Ae+=G;const V=performance.now();if(V-w>=200){const T=ts(K,Math.min(Ae,ae-1))||"";H("bruteforce",K,T),w=V,await new Promise(z=>setTimeout(z,0))}}}return{found:!1,resumeFrom:ts(c,vl(c)-1)||void 0,resumeType:"bruteforce"}}destroy(){this.gpuInstance&&(this.gpuInstance.destroy(),this.gpuInstance=null),this.cpuInstance&&(this.cpuInstance.destroy(),this.cpuInstance=null)}}var p0,hx;function cS(){return hx||(hx=1,p0={webm:"data:video/webm;base64,GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4EEQoWBAhhTgGcBAAAAAAAVkhFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsghV17AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU1LjMzLjEwMFdBjUxhdmY1NS4zMy4xMDBzpJBlrrXf3DCDVB8KcgbMpcr+RImIQJBgAAAAAAAWVK5rAQAAAAAAD++uAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDiDgQEj44OEAmJaAOABAAAAAAAABrCBsLqBkK4BAAAAAAAPq9eBAnPFgQKcgQAitZyDdW5khohBX1ZPUkJJU4OBAuEBAAAAAAAAEZ+BArWIQOdwAAAAAABiZIEgY6JPbwIeVgF2b3JiaXMAAAAAAoC7AAAAAAAAgLUBAAAAAAC4AQN2b3JiaXMtAAAAWGlwaC5PcmcgbGliVm9yYmlzIEkgMjAxMDExMDEgKFNjaGF1ZmVudWdnZXQpAQAAABUAAABlbmNvZGVyPUxhdmM1NS41Mi4xMDIBBXZvcmJpcyVCQ1YBAEAAACRzGCpGpXMWhBAaQlAZ4xxCzmvsGUJMEYIcMkxbyyVzkCGkoEKIWyiB0JBVAABAAACHQXgUhIpBCCGEJT1YkoMnPQghhIg5eBSEaUEIIYQQQgghhBBCCCGERTlokoMnQQgdhOMwOAyD5Tj4HIRFOVgQgydB6CCED0K4moOsOQghhCQ1SFCDBjnoHITCLCiKgsQwuBaEBDUojILkMMjUgwtCiJqDSTX4GoRnQXgWhGlBCCGEJEFIkIMGQcgYhEZBWJKDBjm4FITLQagahCo5CB+EIDRkFQCQAACgoiiKoigKEBqyCgDIAAAQQFEUx3EcyZEcybEcCwgNWQUAAAEACAAAoEiKpEiO5EiSJFmSJVmSJVmS5omqLMuyLMuyLMsyEBqyCgBIAABQUQxFcRQHCA1ZBQBkAAAIoDiKpViKpWiK54iOCISGrAIAgAAABAAAEDRDUzxHlETPVFXXtm3btm3btm3btm3btm1blmUZCA1ZBQBAAAAQ0mlmqQaIMAMZBkJDVgEACAAAgBGKMMSA0JBVAABAAACAGEoOogmtOd+c46BZDppKsTkdnEi1eZKbirk555xzzsnmnDHOOeecopxZDJoJrTnnnMSgWQqaCa0555wnsXnQmiqtOeeccc7pYJwRxjnnnCateZCajbU555wFrWmOmkuxOeecSLl5UptLtTnnnHPOOeecc84555zqxekcnBPOOeecqL25lpvQxTnnnE/G6d6cEM4555xzzjnnnHPOOeecIDRkFQAABABAEIaNYdwpCNLnaCBGEWIaMulB9+gwCRqDnELq0ehopJQ6CCWVcVJKJwgNWQUAAAIAQAghhRRSSCGFFFJIIYUUYoghhhhyyimnoIJKKqmooowyyyyzzDLLLLPMOuyssw47DDHEEEMrrcRSU2011lhr7jnnmoO0VlprrbVSSimllFIKQkNWAQAgAAAEQgYZZJBRSCGFFGKIKaeccgoqqIDQkFUAACAAgAAAAABP8hzRER3RER3RER3RER3R8RzPESVREiVREi3TMjXTU0VVdWXXlnVZt31b2IVd933d933d+HVhWJZlWZZlWZZlWZZlWZZlWZYgNGQVAAACAAAghBBCSCGFFFJIKcYYc8w56CSUEAgNWQUAAAIACAAAAHAUR3EcyZEcSbIkS9IkzdIsT/M0TxM9URRF0zRV0RVdUTdtUTZl0zVdUzZdVVZtV5ZtW7Z125dl2/d93/d93/d93/d93/d9XQdCQ1YBABIAADqSIymSIimS4ziOJElAaMgqAEAGAEAAAIriKI7jOJIkSZIlaZJneZaomZrpmZ4qqkBoyCoAABAAQAAAAAAAAIqmeIqpeIqoeI7oiJJomZaoqZoryqbsuq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq4LhIasAgAkAAB0JEdyJEdSJEVSJEdygNCQVQCADACAAAAcwzEkRXIsy9I0T/M0TxM90RM901NFV3SB0JBVAAAgAIAAAAAAAAAMybAUy9EcTRIl1VItVVMt1VJF1VNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVN0zRNEwgNWQkAkAEAkBBTLS3GmgmLJGLSaqugYwxS7KWxSCpntbfKMYUYtV4ah5RREHupJGOKQcwtpNApJq3WVEKFFKSYYyoVUg5SIDRkhQAQmgHgcBxAsixAsiwAAAAAAAAAkDQN0DwPsDQPAAAAAAAAACRNAyxPAzTPAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAA0DwP8DwR8EQRAAAAAAAAACzPAzTRAzxRBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAAsDwP8EQR0DwRAAAAAAAAACzPAzxRBDzRAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAEOAAABBgIRQasiIAiBMAcEgSJAmSBM0DSJYFTYOmwTQBkmVB06BpME0AAAAAAAAAAAAAJE2DpkHTIIoASdOgadA0iCIAAAAAAAAAAAAAkqZB06BpEEWApGnQNGgaRBEAAAAAAAAAAAAAzzQhihBFmCbAM02IIkQRpgkAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAGHAAAAgwoQwUGrIiAIgTAHA4imUBAIDjOJYFAACO41gWAABYliWKAABgWZooAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAYcAAACDChDBQashIAiAIAcCiKZQHHsSzgOJYFJMmyAJYF0DyApgFEEQAIAAAocAAACLBBU2JxgEJDVgIAUQAABsWxLE0TRZKkaZoniiRJ0zxPFGma53meacLzPM80IYqiaJoQRVE0TZimaaoqME1VFQAAUOAAABBgg6bE4gCFhqwEAEICAByKYlma5nmeJ4qmqZokSdM8TxRF0TRNU1VJkqZ5niiKommapqqyLE3zPFEURdNUVVWFpnmeKIqiaaqq6sLzPE8URdE0VdV14XmeJ4qiaJqq6roQRVE0TdNUTVV1XSCKpmmaqqqqrgtETxRNU1Vd13WB54miaaqqq7ouEE3TVFVVdV1ZBpimaaqq68oyQFVV1XVdV5YBqqqqruu6sgxQVdd1XVmWZQCu67qyLMsCAAAOHAAAAoygk4wqi7DRhAsPQKEhKwKAKAAAwBimFFPKMCYhpBAaxiSEFEImJaXSUqogpFJSKRWEVEoqJaOUUmopVRBSKamUCkIqJZVSAADYgQMA2IGFUGjISgAgDwCAMEYpxhhzTiKkFGPOOScRUoox55yTSjHmnHPOSSkZc8w556SUzjnnnHNSSuacc845KaVzzjnnnJRSSuecc05KKSWEzkEnpZTSOeecEwAAVOAAABBgo8jmBCNBhYasBABSAQAMjmNZmuZ5omialiRpmud5niiapiZJmuZ5nieKqsnzPE8URdE0VZXneZ4oiqJpqirXFUXTNE1VVV2yLIqmaZqq6rowTdNUVdd1XZimaaqq67oubFtVVdV1ZRm2raqq6rqyDFzXdWXZloEsu67s2rIAAPAEBwCgAhtWRzgpGgssNGQlAJABAEAYg5BCCCFlEEIKIYSUUggJAAAYcAAACDChDBQashIASAUAAIyx1lprrbXWQGettdZaa62AzFprrbXWWmuttdZaa6211lJrrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmstpZRSSimllFJKKaWUUkoppZRSSgUA+lU4APg/2LA6wknRWGChISsBgHAAAMAYpRhzDEIppVQIMeacdFRai7FCiDHnJKTUWmzFc85BKCGV1mIsnnMOQikpxVZjUSmEUlJKLbZYi0qho5JSSq3VWIwxqaTWWoutxmKMSSm01FqLMRYjbE2ptdhqq7EYY2sqLbQYY4zFCF9kbC2m2moNxggjWywt1VprMMYY3VuLpbaaizE++NpSLDHWXAAAd4MDAESCjTOsJJ0VjgYXGrISAAgJACAQUooxxhhzzjnnpFKMOeaccw5CCKFUijHGnHMOQgghlIwx5pxzEEIIIYRSSsaccxBCCCGEkFLqnHMQQgghhBBKKZ1zDkIIIYQQQimlgxBCCCGEEEoopaQUQgghhBBCCKmklEIIIYRSQighlZRSCCGEEEIpJaSUUgohhFJCCKGElFJKKYUQQgillJJSSimlEkoJJYQSUikppRRKCCGUUkpKKaVUSgmhhBJKKSWllFJKIYQQSikFAAAcOAAABBhBJxlVFmGjCRcegEJDVgIAZAAAkKKUUiktRYIipRikGEtGFXNQWoqocgxSzalSziDmJJaIMYSUk1Qy5hRCDELqHHVMKQYtlRhCxhik2HJLoXMOAAAAQQCAgJAAAAMEBTMAwOAA4XMQdAIERxsAgCBEZohEw0JweFAJEBFTAUBigkIuAFRYXKRdXECXAS7o4q4DIQQhCEEsDqCABByccMMTb3jCDU7QKSp1IAAAAAAADADwAACQXAAREdHMYWRobHB0eHyAhIiMkAgAAAAAABcAfAAAJCVAREQ0cxgZGhscHR4fICEiIyQBAIAAAgAAAAAggAAEBAQAAAAAAAIAAAAEBB9DtnUBAAAAAAAEPueBAKOFggAAgACjzoEAA4BwBwCdASqwAJAAAEcIhYWIhYSIAgIABhwJ7kPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99YAD+/6tQgKOFggADgAqjhYIAD4AOo4WCACSADqOZgQArADECAAEQEAAYABhYL/QACIBDmAYAAKOFggA6gA6jhYIAT4AOo5mBAFMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAGSADqOFggB6gA6jmYEAewAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAj4AOo5mBAKMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAKSADqOFggC6gA6jmYEAywAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAz4AOo4WCAOSADqOZgQDzADECAAEQEAAYABhYL/QACIBDmAYAAKOFggD6gA6jhYIBD4AOo5iBARsAEQIAARAQFGAAYWC/0AAiAQ5gGACjhYIBJIAOo4WCATqADqOZgQFDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggFPgA6jhYIBZIAOo5mBAWsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAXqADqOFggGPgA6jmYEBkwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIBpIAOo4WCAbqADqOZgQG7ADECAAEQEAAYABhYL/QACIBDmAYAAKOFggHPgA6jmYEB4wAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIB5IAOo4WCAfqADqOZgQILADECAAEQEAAYABhYL/QACIBDmAYAAKOFggIPgA6jhYICJIAOo5mBAjMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAjqADqOFggJPgA6jmYECWwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYICZIAOo4WCAnqADqOZgQKDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggKPgA6jhYICpIAOo5mBAqsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCArqADqOFggLPgA6jmIEC0wARAgABEBAUYABhYL/QACIBDmAYAKOFggLkgA6jhYIC+oAOo5mBAvsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAw+ADqOZgQMjADECAAEQEAAYABhYL/QACIBDmAYAAKOFggMkgA6jhYIDOoAOo5mBA0sAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA0+ADqOFggNkgA6jmYEDcwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIDeoAOo4WCA4+ADqOZgQObADECAAEQEAAYABhYL/QACIBDmAYAAKOFggOkgA6jhYIDuoAOo5mBA8MAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA8+ADqOFggPkgA6jhYID+oAOo4WCBA+ADhxTu2sBAAAAAAAAEbuPs4EDt4r3gQHxghEr8IEK",mp4:"data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"}),p0}var m0,px;function uS(){if(px)return m0;px=1;const{webm:n,mp4:s}=cS(),i=()=>typeof navigator<"u"&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,l=()=>"wakeLock"in navigator;class c{constructor(){if(this.enabled=!1,l()){this._wakeLock=null;const p=()=>{this._wakeLock!==null&&document.visibilityState==="visible"&&this.enable()};document.addEventListener("visibilitychange",p),document.addEventListener("fullscreenchange",p)}else i()?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("title","No Sleep"),this.noSleepVideo.setAttribute("playsinline",""),this._addSourceToVideo(this.noSleepVideo,"webm",n),this._addSourceToVideo(this.noSleepVideo,"mp4",s),this.noSleepVideo.addEventListener("loadedmetadata",()=>{this.noSleepVideo.duration<=1?this.noSleepVideo.setAttribute("loop",""):this.noSleepVideo.addEventListener("timeupdate",()=>{this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())})}))}_addSourceToVideo(p,d,g){var m=document.createElement("source");m.src=g,m.type=`video/${d}`,p.appendChild(m)}get isEnabled(){return this.enabled}enable(){return l()?navigator.wakeLock.request("screen").then(p=>{this._wakeLock=p,this.enabled=!0,console.log("Wake Lock active."),this._wakeLock.addEventListener("release",()=>{console.log("Wake Lock released.")})}).catch(p=>{throw this.enabled=!1,console.error(`${p.name}, ${p.message}`),p}):i()?(this.disable(),console.warn(`
        NoSleep enabled for older iOS devices. This can interrupt
        active or long-running network requests from completing successfully.
        See https://github.com/richtr/NoSleep.js/issues/15 for more details.
      `),this.noSleepTimer=window.setInterval(()=>{document.hidden||(window.location.href=window.location.href.split("#")[0],window.setTimeout(window.stop,0))},15e3),this.enabled=!0,Promise.resolve()):this.noSleepVideo.play().then(d=>(this.enabled=!0,d)).catch(d=>{throw this.enabled=!1,d})}disable(){l()?(this._wakeLock&&this._wakeLock.release(),this._wakeLock=null):i()?this.noSleepTimer&&(console.warn(`
          NoSleep now disabled for older iOS devices.
        `),window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause(),this.enabled=!1}}return m0=c,m0}var dS=uS();const fS=aa(dS);function hS(n){if(n.length<4)return null;try{const i=parseInt(n.slice(0,2),16)&3;let l=2;if(i===0||i===3){if(n.length<l+8)return null;l+=8}if(n.length<l+2)return null;const c=parseInt(n.slice(l,l+2),16);l+=2;const u=c*2;return n.length<l+u?null:(l+=u,n.slice(l))}catch{return null}}function pS({packets:n,channels:s,onChannelCreate:i,onRunningChange:l,visible:c=!1}){const[u,p]=D.useState(!1),[d,g]=D.useState(6),[m,x]=D.useState(!1),[A,b]=D.useState(!0),[k,R]=D.useState(!1),[C,w]=D.useState(null),[S,P]=D.useState(new Map),[N,F]=D.useState([]),[M,H]=D.useState(!1),[U,j]=D.useState(null),[ee,Z]=D.useState(null),[Y,te]=D.useState(0),K=D.useRef(null),ae=D.useRef(null),Ae=D.useRef(!1),G=D.useRef(!1),se=D.useRef(!1),W=D.useRef(new Map),re=D.useRef(!1),V=D.useRef(6),T=D.useRef(!0),z=D.useRef(!1),q=D.useRef(new Set),$=D.useRef(new Set);D.useEffect(()=>{const ke=new lS;K.current=ke,j(ke.isGpuAvailable());const Ve=new fS;return ae.current=Ve,()=>{ke.destroy(),K.current=null,Ve.disable(),ae.current=null}},[]),D.useEffect(()=>{!c||M||KA(async()=>{const{ENGLISH_WORDLIST:ke}=await import("./wordlist-BtmChKSf.js");return{ENGLISH_WORDLIST:ke}},[]).then(({ENGLISH_WORDLIST:ke})=>{K.current&&(K.current.setWordlist(ke),H(!0))}).catch(ke=>{console.error("Failed to load wordlist:",ke),pt.error("Failed to load wordlist",{description:"Cracking will not be available"})})},[c,M]),D.useEffect(()=>{const ke=()=>{rt.getUndecryptedPacketCount().then(({count:st})=>Z(st)).catch(()=>Z(null))};ke();const Ve=setInterval(ke,36e5);return()=>clearInterval(Ve)},[]);const ue=D.useMemo(()=>new Set(s.map(ke=>ke.key.toUpperCase())),[s]),pe=n.filter(ke=>ke.payload_type==="GROUP_TEXT"&&!ke.decrypted);D.useEffect(()=>{let ke=0;P(Ve=>{const st=new Map(Ve);let mt=!1;for(const et of pe)if(!st.has(et.id)){const at=hS(et.data);if(at&&$.current.has(at)){ke++;continue}at&&$.current.add(at),st.set(et.id,{packet:et,attempts:0,lastAttemptLength:0,status:"pending"}),mt=!0}return mt?(W.current=st,st):Ve}),ke>0&&te(Ve=>Ve+ke)},[pe.length]),D.useEffect(()=>{W.current=S},[S]),D.useEffect(()=>{re.current=m},[m]),D.useEffect(()=>{V.current=d},[d]),D.useEffect(()=>{T.current=A},[A]),D.useEffect(()=>{z.current=k},[k]),D.useEffect(()=>{q.current=new Set(pe.map(ke=>ke.id))},[pe]),D.useEffect(()=>{l==null||l(u)},[u,l]);const ve=Array.from(S.values()).filter(ke=>ke.status==="pending").length,me=Array.from(S.values()).filter(ke=>ke.status==="cracked").length,ge=Array.from(S.values()).filter(ke=>ke.status==="failed").length,Pe=D.useCallback(async()=>{if(se.current||!K.current||!Ae.current)return;const ke=W.current;let Ve=null,st=null;for(const[Ge,$e]of ke.entries())if($e.status==="pending"){Ve=$e,st=Ge;break}if(!Ve&&re.current){const Ge=Array.from(ke.entries()).filter(([,$e])=>$e.status==="failed"&&$e.lastAttemptLength<10);Ge.length>0&&(Ge.sort(($e,Ye)=>$e[1].lastAttemptLength-Ye[1].lastAttemptLength),[st,Ve]=Ge[0])}if(!Ve||st===null){Ae.current&&setTimeout(()=>Pe(),1e3);return}if(!q.current.has(st)){P(Ge=>{const $e=new Map(Ge);return $e.delete(st),$e}),Ae.current&&setTimeout(()=>Pe(),10);return}se.current=!0;const mt=V.current,et=Ve.lastAttemptLength>0,at=et?Ve.lastAttemptLength+1:mt;try{const Ge=await K.current.crack(Ve.packet.data,{maxLength:at,useSenderFilter:!0,useTimestampFilter:!0,useUtf8Filter:!0,...z.current&&{gpuDispatchMs:1e4},...et&&{useDictionary:!1,startingLength:at}},$e=>{w($e)});if(G.current){G.current=!1,se.current=!1,w(null);return}if(Ge.found&&Ge.roomName&&Ge.key){P(Le=>{const wt=new Map(Le),It=wt.get(st);return It&&wt.set(st,{...It,status:"cracked",attempts:It.attempts+1,lastAttemptLength:at}),wt});const $e={roomName:Ge.roomName,key:Ge.key,packetId:st,message:Ge.decryptedMessage||"",crackedAt:Date.now()};F(Le=>[...Le,$e]);const Ye=Ge.key.toUpperCase();if(!ue.has(Ye))try{const Le="#"+Ge.roomName;await i(Le,Ge.key),T.current&&await rt.decryptHistoricalPackets({key_type:"channel",channel_name:Le})}catch(Le){console.error("Failed to create channel or decrypt historical:",Le),pt.error("Failed to save cracked channel",{description:Le instanceof Error?Le.message:"Channel discovered but could not be saved"})}}else P($e=>{const Ye=new Map($e),Le=Ye.get(st);return Le&&Ye.set(st,{...Le,status:"failed",attempts:Le.attempts+1,lastAttemptLength:at}),Ye})}catch(Ge){console.error("Cracking error:",Ge),P($e=>{const Ye=new Map($e),Le=Ye.get(st);return Le&&Ye.set(st,{...Le,status:"failed",attempts:Le.attempts+1,lastAttemptLength:at}),Ye})}se.current=!1,w(null),Ae.current&&setTimeout(()=>Pe(),100)},[ue,i]),We=()=>{var ke;if(!U){pt.error("WebGPU not available",{description:"Cracking requires Chrome 113+ or Edge 113+ with WebGPU support."});return}p(!0),Ae.current=!0,G.current=!1,(ke=ae.current)==null||ke.enable(),Pe()},Ke=()=>{var ke,Ve;p(!1),Ae.current=!1,G.current=!0,(ke=K.current)==null||ke.abort(),(Ve=ae.current)==null||Ve.disable()};return _.jsxs("div",{className:"flex flex-col h-full p-3 gap-3 bg-background border-t border-border overflow-auto",children:[_.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("label",{className:"text-sm text-muted-foreground",children:"Max Length:"}),_.jsx("input",{type:"number",min:1,max:10,value:d,onChange:ke=>g(Math.min(10,Math.max(1,parseInt(ke.target.value)||6))),className:"w-14 px-2 py-1 text-sm bg-muted border border-border rounded"})]}),_.jsxs("label",{className:"flex items-center gap-2 text-sm text-muted-foreground cursor-pointer",children:[_.jsx("input",{type:"checkbox",checked:m,onChange:ke=>x(ke.target.checked),className:"rounded"}),"Retry failed at n+1"]}),_.jsxs("label",{className:"flex items-center gap-2 text-sm text-muted-foreground cursor-pointer",children:[_.jsx("input",{type:"checkbox",checked:A,onChange:ke=>b(ke.target.checked),className:"rounded"}),"Decrypt historical packets if key found"]}),A&&_.jsx("span",{className:"text-xs text-muted-foreground",children:ee!==null&&ee>0?`(${ee.toLocaleString()} packets; messages will stream in as decrypted)`:"(messages will stream in as decrypted)"}),_.jsxs("label",{className:"flex items-center gap-2 text-sm text-muted-foreground cursor-pointer",children:[_.jsx("input",{type:"checkbox",checked:k,onChange:ke=>R(ke.target.checked),className:"rounded"}),"Turbo mode (experimental)"]})]}),_.jsx("button",{onClick:u?Ke:We,disabled:!M||U===!1,className:ft("w-48 px-4 py-1.5 rounded text-sm font-medium",u?"bg-destructive text-destructive-foreground hover:bg-destructive/90":"bg-primary text-primary-foreground hover:bg-primary/90","disabled:opacity-50 disabled:cursor-not-allowed"),children:u?"Stop Search":U===!1?"GPU Not Available":M?"Find Rooms":"Loading dictionary..."}),_.jsxs("div",{className:"flex gap-4 text-sm",children:[_.jsxs("span",{className:"text-muted-foreground",children:["Pending: ",_.jsx("span",{className:"text-foreground font-medium",children:ve})]}),_.jsxs("span",{className:"text-muted-foreground",children:["Cracked: ",_.jsx("span",{className:"text-green-500 font-medium",children:me})]}),_.jsxs("span",{className:"text-muted-foreground",children:["Failed: ",_.jsx("span",{className:"text-destructive font-medium",children:ge})]}),Y>0&&_.jsxs("span",{className:"text-muted-foreground",children:["Skipped (dup):"," ",_.jsx("span",{className:"text-muted-foreground font-medium",children:Y})]})]}),C&&_.jsxs("div",{className:"space-y-1",children:[_.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[_.jsxs("span",{children:[C.phase==="wordlist"?"Dictionary":C.phase==="bruteforce"?"Bruteforce":"Public Key",C.phase==="bruteforce"&&` - Length ${C.currentLength}`,":"," ",C.currentPosition]}),_.jsxs("span",{children:[C.rateKeysPerSec>=1e9?`${(C.rateKeysPerSec/1e9).toFixed(2)} Gkeys/s`:`${(C.rateKeysPerSec/1e6).toFixed(1)} Mkeys/s`," "," ETA:"," ",C.etaSeconds<60?`${Math.round(C.etaSeconds)}s`:`${Math.round(C.etaSeconds/60)}m`]})]}),_.jsx("div",{className:"h-2 bg-muted rounded overflow-hidden",children:_.jsx("div",{className:"h-full bg-primary transition-all duration-200",style:{width:`${C.percent}%`}})})]}),U===!1&&_.jsx("div",{className:"text-sm text-destructive",children:"WebGPU not available. Cracking requires Chrome 113+ or Edge 113+."}),!M&&U!==!1&&_.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading wordlist..."}),N.length>0&&_.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0",children:[_.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Cracked Rooms:"}),_.jsx("div",{className:"space-y-1",children:N.map((ke,Ve)=>_.jsxs("div",{className:"text-sm bg-green-950/30 border border-green-900/50 rounded px-2 py-1",children:[_.jsxs("span",{className:"text-green-400 font-medium",children:["#",ke.roomName]}),_.jsxs("span",{className:"text-muted-foreground ml-2 text-xs",children:['"',ke.message.slice(0,50),ke.message.length>50?"...":"",'"']})]},Ve))})]}),_.jsx("hr",{className:"border-border"}),_.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:["For unknown-keyed GroupText packets, this will attempt to dictionary attack, then brute force payloads as they arrive, testing room names up to the specified length to discover active rooms on the local mesh (GroupText packets may not be hashtag messages; we have no way of knowing but try as if they are).",_.jsx("strong",{children:" Retry failed at n+1"})," will let the cracker return to the failed queue and pick up messages it couldn't crack, attempting them at one longer length.",_.jsx("strong",{children:" Decrypt historical"})," will run an async job on any room name it finds to see if any historically captured packets will decrypt with that key.",_.jsx("strong",{children:" Turbo mode"})," will push your GPU to the max (target dispatch time of 10s) and may allow accelerated cracking and/or system instability."]})]})}const mS=mA,gS=gA,Nv=D.forwardRef(({className:n,...s},i)=>_.jsx(sd,{className:ft("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...s,ref:i}));Nv.displayName=sd.displayName;const xS=z0("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Fv=D.forwardRef(({side:n="right",className:s,children:i,hideCloseButton:l=!1,...c},u)=>_.jsxs(gS,{children:[_.jsx(Nv,{}),_.jsxs(ad,{ref:u,className:ft(xS({side:n}),s),...c,children:[!l&&_.jsxs(xA,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[_.jsx(wx,{className:"h-4 w-4"}),_.jsx("span",{className:"sr-only",children:"Close"})]}),i]})]}));Fv.displayName=ad.displayName;const Lv=({className:n,...s})=>_.jsx("div",{className:ft("flex flex-col space-y-2 text-center sm:text-left",n),...s});Lv.displayName="SheetHeader";const Mv=D.forwardRef(({className:n,...s},i)=>_.jsx(ld,{ref:i,className:ft("text-lg font-semibold text-foreground",n),...s}));Mv.displayName=ld.displayName;const AS=D.forwardRef(({className:n,...s},i)=>_.jsx(cd,{ref:i,className:ft("text-sm text-muted-foreground",n),...s}));AS.displayName=cd.displayName;const mx=500;function vS(){const n=D.useRef(null),s=D.useRef(null),i=D.useRef(new Set),[l,c]=D.useState(null),[u,p]=D.useState(null),[d,g]=D.useState(null),[m,x]=D.useState([]),[A,b]=D.useState([]),[k,R]=D.useState([]),[C,w]=D.useState(null),[S,P]=D.useState(!1),[N,F]=D.useState(!1),[M,H]=D.useState(!1),[U,j]=D.useState(0),[ee,Z]=D.useState(!1),[Y,te]=D.useState(!1),K=(d==null?void 0:d.favorites)??[],ae=D.useRef(null),Ae=D.useRef(null);D.useEffect(()=>{Ae.current=(u==null?void 0:u.name)??null},[u==null?void 0:u.name]);const G=D.useCallback(ne=>{const xe=Ae.current;if(!xe)return!1;const _e=xe.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return new RegExp(`@\\[${_e}\\]`,"i").test(ne)},[]),{messages:se,messagesLoading:W,loadingOlder:re,hasOlderMessages:V,setMessages:T,fetchMessages:z,fetchOlderMessages:q,addMessageIfNew:$,updateMessageAck:ue}=x_(C),{unreadCounts:pe,mentions:ve,lastMessageTimes:me,incrementUnread:ge,markAllRead:Pe,trackNewMessage:We}=Vy(A,m,C,u==null?void 0:u.name),{repeaterLoggedIn:Ke,activeContactIsRepeater:ke,handleTelemetryRequest:Ve,handleRepeaterCommand:st}=jy(C,m,T),mt=D.useMemo(()=>({onHealth:ne=>{const xe=ae.current;ae.current=ne,c(ne),xe!==null&&xe.radio_connected!==ne.radio_connected&&(ne.radio_connected?(pt.success("Radio connected",{description:ne.serial_port?`Connected to ${ne.serial_port}`:void 0}),rt.getRadioConfig().then(p).catch(console.error)):pt.error("Radio disconnected",{description:"Check radio connection and power"}))},onError:ne=>{pt.error(ne.message,{description:ne.details})},onSuccess:ne=>{pt.success(ne.message,{description:ne.details})},onContacts:ne=>x(ne),onChannels:ne=>b(ne),onMessage:ne=>{const xe=s.current,_e=xe&&(ne.type==="CHAN"&&xe.type==="channel"||ne.type==="PRIV"&&xe.type==="contact")?ne.conversation_key===xe.id:!1;if(_e&&$(ne),We(ne),!ne.outgoing&&!_e){const Ue=ru(ne);if(i.current.has(Ue))return;if(i.current.add(Ue),i.current.size>1e3){const Ee=Array.from(i.current);i.current=new Set(Ee.slice(-500))}let ie=null;if(ne.type==="CHAN"&&ne.conversation_key?ie=Ao("channel",ne.conversation_key):ne.type==="PRIV"&&ne.conversation_key&&(ie=Ao("contact",ne.conversation_key)),ie){const Ee=G(ne.text);ge(ie,Ee)}}},onContact:ne=>{x(xe=>{const _e=xe.findIndex(Ue=>Ue.public_key===ne.public_key);if(_e>=0){const Ue=[...xe],ie=xe[_e];return Ue[_e]={...ie,...ne,name:ne.name??ie.name,last_path:ne.last_path??ie.last_path,lat:ne.lat??ie.lat,lon:ne.lon??ie.lon},Ue}return[...xe,ne]})},onRawPacket:ne=>{R(xe=>{if(xe.some(Ue=>Ue.id===ne.id))return xe;const _e=[...xe,ne];return _e.length>mx?_e.slice(-mx):_e})},onMessageAcked:(ne,xe,_e)=>{ue(ne,xe,_e)}}),[$,We,ge,ue,G]);Dy(mt);const et=D.useCallback(async()=>{try{const ne=await rt.getRadioConfig();p(ne)}catch(ne){console.error("Failed to fetch config:",ne)}},[]),at=D.useCallback(async()=>{try{const ne=await rt.getSettings();g(ne),tm(ne.last_message_times??{})}catch(ne){console.error("Failed to fetch app settings:",ne)}},[]),Ge=D.useCallback(async()=>{try{const ne=await rt.getUndecryptedPacketCount();j(ne.count)}catch(ne){console.error("Failed to fetch undecrypted count:",ne)}},[]),$e=D.useCallback(async()=>{const xe=await rt.getContacts(1e3,0);if(xe.length<1e3)return xe;let _e=[...xe],Ue=1e3;for(;;){const ie=await rt.getContacts(1e3,Ue);if(_e=_e.concat(ie),ie.length<1e3)break;Ue+=1e3}return _e},[]);D.useEffect(()=>{et(),at(),Ge(),rt.getChannels().then(b).catch(console.error),$e().then(x).catch(console.error)},[et,at,Ge,$e]);const Ye=D.useRef(!1);D.useEffect(()=>{if(!d||Ye.current)return;if(d.preferences_migrated){lm(),im(),Ye.current=!0;return}const ne=I_(),xe=Hy(),_e=zy();if(!(ne.length>0||xe!=="recent"||Object.keys(_e).length>0)){Ye.current=!0;return}Ye.current=!0,(async()=>{try{const Ee=await rt.migratePreferences({favorites:ne,sort_order:xe,last_message_times:_e});Ee.migrated&&pt.success("Preferences migrated",{description:`Migrated ${ne.length} favorites to server`}),g(Ee.settings),tm(Ee.settings.last_message_times??{}),lm(),im()}catch(Ee){console.error("Failed to migrate preferences:",Ee)}})()},[d]);const Le=D.useRef(!1);D.useEffect(()=>{if(Le.current||C||A.length===0)return;const ne=Tm();if((ne==null?void 0:ne.type)==="raw"){w({type:"raw",id:"raw",name:"Raw Packet Feed"}),Le.current=!0;return}if((ne==null?void 0:ne.type)==="map"){w({type:"map",id:"map",name:"Node Map",mapFocusKey:ne.mapFocusKey}),Le.current=!0;return}if((ne==null?void 0:ne.type)==="visualizer"){w({type:"visualizer",id:"visualizer",name:"Mesh Visualizer"}),Le.current=!0;return}if((ne==null?void 0:ne.type)==="channel"){const _e=A.find(Ue=>Ue.name===ne.name||Ue.name===`#${ne.name}`);if(_e){w({type:"channel",id:_e.key,name:_e.name}),Le.current=!0;return}}if((ne==null?void 0:ne.type)==="contact")return;const xe=A.find(_e=>_e.name==="Public");xe&&(w({type:"channel",id:xe.key,name:xe.name}),Le.current=!0)},[A,C]),D.useEffect(()=>{if(Le.current||C||m.length===0)return;const ne=Tm();if((ne==null?void 0:ne.type)==="contact"){const xe=m.find(_e=>Ri(_e.name,_e.public_key)===ne.name);if(xe){w({type:"contact",id:xe.public_key,name:Ri(xe.name,xe.public_key)}),Le.current=!0;return}}if(A.length>0){const xe=A.find(_e=>_e.name==="Public");xe&&(w({type:"channel",id:xe.key,name:xe.name}),Le.current=!0)}},[m,A,C]),D.useEffect(()=>{s.current=C,C&&Bb(C)},[C]);const wt=D.useCallback(async ne=>{C&&(C.type==="channel"?await rt.sendChannelMessage(C.id,ne):await rt.sendDirectMessage(C.id,ne),await z())},[C,z]),It=D.useCallback(async ne=>{await rt.updateRadioConfig(ne),await et()},[et]),Nn=D.useCallback(async ne=>{await rt.updateSettings(ne),await at()},[at]),Ot=D.useCallback(async ne=>{await rt.setPrivateKey(ne),await et()},[et]),en=D.useCallback(async()=>{await rt.rebootRadio(),c(xe=>xe&&{...xe,radio_connected:!1}),(async()=>{for(let xe=0;xe<30;xe++){await new Promise(_e=>setTimeout(_e,1e3));try{const _e=await rt.getHealth();if(c(_e),_e.radio_connected){et();return}}catch{}}})()},[et]),sn=D.useCallback(async()=>{try{await rt.sendAdvertisement(!0),pt.success("Advertisement sent")}catch(ne){console.error("Failed to send advertisement:",ne),pt.error("Failed to send advertisement",{description:ne instanceof Error?ne.message:"Check radio connection"})}},[]),yn=D.useCallback(ne=>{var xe;(xe=n.current)==null||xe.appendText(`@[${ne}] `)},[]),Ht=D.useCallback(ne=>{w(ne),H(!1)},[]),Pt=D.useCallback(async(ne,xe)=>{g(_e=>{if(!_e)return _e;const Ue=_e.favorites??[],Ee=ns(Ue,ne,xe)?Ue.filter(ut=>!(ut.type===ne&&ut.id===xe)):[...Ue,{type:ne,id:xe}];return{..._e,favorites:Ee}});try{const _e=await rt.toggleFavorite(ne,xe);g(_e)}catch(_e){console.error("Failed to toggle favorite:",_e);try{const Ue=await rt.getSettings();g(Ue)}catch{}pt.error("Failed to update favorite")}},[]),Vt=D.useCallback(async ne=>{if(confirm("Delete this channel? Message history will be preserved."))try{await rt.deleteChannel(ne),b(xe=>xe.filter(_e=>_e.key!==ne)),w(null),pt.success("Channel deleted")}catch(xe){console.error("Failed to delete channel:",xe),pt.error("Failed to delete channel",{description:xe instanceof Error?xe.message:void 0})}},[]),Fn=D.useCallback(async ne=>{if(confirm("Delete this contact? Message history will be preserved."))try{await rt.deleteContact(ne),x(xe=>xe.filter(_e=>_e.public_key!==ne)),w(null),pt.success("Contact deleted")}catch(xe){console.error("Failed to delete contact:",xe),pt.error("Failed to delete contact",{description:xe instanceof Error?xe.message:void 0})}},[]),pn=D.useCallback(async(ne,xe,_e)=>{const Ue=await rt.createContact(xe,ne||void 0,_e),ie=await rt.getContacts();x(ie),w({type:"contact",id:Ue.public_key,name:Ri(Ue.name,Ue.public_key)})},[]),ye=D.useCallback(async(ne,xe,_e)=>{const Ue=await rt.createChannel(ne,xe),ie=await rt.getChannels();b(ie),w({type:"channel",id:Ue.key,name:ne}),_e&&(await rt.decryptHistoricalPackets({key_type:"channel",channel_key:Ue.key}),Ge())},[Ge]),Se=D.useCallback(async(ne,xe)=>{const _e=ne.startsWith("#")?ne:`#${ne}`,Ue=await rt.createChannel(_e),ie=await rt.getChannels();b(ie),w({type:"channel",id:Ue.key,name:_e}),xe&&(await rt.decryptHistoricalPackets({key_type:"channel",channel_name:_e}),Ge())},[Ge]),Ne=D.useCallback(async()=>{if(!(!C||C.type!=="contact")){pt("Trace started...");try{const ne=await rt.requestTrace(C.id),xe=[];ne.remote_snr!==null&&xe.push(`Remote SNR: ${ne.remote_snr.toFixed(1)} dB`),ne.local_snr!==null&&xe.push(`Local SNR: ${ne.local_snr.toFixed(1)} dB`);const _e=xe.join(", ");pt.success(_e?`Trace complete! ${_e}`:"Trace complete!")}catch{pt.error("No trace response heard")}}},[C]),ct=D.useCallback(async ne=>{const xe=(d==null?void 0:d.sidebar_sort_order)??"recent";g(_e=>_e&&{..._e,sidebar_sort_order:ne});try{const _e=await rt.updateSettings({sidebar_sort_order:ne});g(_e)}catch(_e){console.error("Failed to update sort order:",_e),g(Ue=>Ue&&{...Ue,sidebar_sort_order:xe}),pt.error("Failed to save sort preference")}},[d==null?void 0:d.sidebar_sort_order]),tt=_.jsx(L1,{contacts:m,channels:A,activeConversation:C,onSelectConversation:Ht,onNewMessage:()=>{P(!0),H(!1)},lastMessageTimes:me,unreadCounts:pe,mentions:ve,showCracker:ee,crackerRunning:Y,onToggleCracker:()=>Z(ne=>!ne),onMarkAllRead:Pe,favorites:K,sortOrder:(d==null?void 0:d.sidebar_sort_order)??"recent",onSortOrderChange:ct});return _.jsxs("div",{className:"flex flex-col h-dvh",children:[_.jsx(B_,{health:l,config:u,onSettingsClick:()=>F(!0),onMenuClick:()=>H(!0)}),_.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[_.jsx("div",{className:"hidden md:block",children:tt}),_.jsx(mS,{open:M,onOpenChange:H,children:_.jsxs(Fv,{side:"left",className:"w-[280px] p-0 flex flex-col",hideCloseButton:!0,children:[_.jsx(Lv,{className:"sr-only",children:_.jsx(Mv,{children:"Navigation"})}),_.jsx("div",{className:"flex-1 overflow-hidden",children:tt})]})}),_.jsx("div",{className:"flex-1 flex flex-col bg-background min-w-0",children:C?C.type==="map"?_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"flex justify-between items-center px-4 py-3 border-b border-border font-medium text-lg",children:"Node Map"}),_.jsx("div",{className:"flex-1 overflow-hidden",children:_.jsx(ZE,{contacts:m,focusedKey:C.mapFocusKey})})]}):C.type==="visualizer"?_.jsx(qk,{packets:k,contacts:m,config:u,onClearPackets:()=>R([])}):C.type==="raw"?_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"flex justify-between items-center px-4 py-3 border-b border-border font-medium text-lg",children:"Raw Packet Feed"}),_.jsx("div",{className:"flex-1 overflow-hidden",children:_.jsx(k0,{packets:k})})]}):_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-border font-medium text-lg gap-2",children:[_.jsxs("span",{className:"flex flex-wrap items-baseline gap-x-2 min-w-0 flex-1",children:[_.jsxs("span",{className:"flex-shrink-0",children:[C.type==="channel"&&!C.name.startsWith("#")&&C.name!=="Public"?"#":"",C.name]}),_.jsx("span",{className:"font-normal text-sm text-muted-foreground font-mono truncate cursor-pointer hover:text-primary",onClick:ne=>{ne.stopPropagation(),navigator.clipboard.writeText(C.id),pt.success(C.type==="channel"?"Room key copied!":"Contact key copied!")},title:"Click to copy",children:C.type==="channel"?C.id.toLowerCase():C.id}),C.type==="contact"&&(()=>{const ne=m.find(_e=>_e.public_key===C.id);if(!ne)return null;const xe=[];if(ne.last_seen&&xe.push(`Last heard: ${ra(ne.last_seen)}`),ne.last_path_len===-1?xe.push("flood"):ne.last_path_len===0?xe.push("direct"):ne.last_path_len>0&&xe.push(`${ne.last_path_len} hop${ne.last_path_len>1?"s":""}`),Bt(ne.lat,ne.lon)){const _e=u&&Bt(u.lat,u.lon)?jr(u.lat,u.lon,ne.lat,ne.lon):null;xe.push(_.jsxs("span",{children:[_.jsxs("span",{className:"font-mono cursor-pointer hover:text-primary hover:underline",onClick:Ue=>{Ue.stopPropagation();const ie=window.location.origin+window.location.pathname+vA(ne.public_key);window.open(ie,"_blank")},title:"View on map",children:[ne.lat.toFixed(3),", ",ne.lon.toFixed(3)]}),_e!==null&&` (${rs(_e)})`]},"coords"))}return xe.length>0?_.jsxs("span",{className:"font-normal text-sm text-muted-foreground flex-shrink-0",children:["(",xe.map((_e,Ue)=>_.jsxs("span",{children:[Ue>0&&", ",_e]},Ue)),")"]}):null})()]}),_.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[C.type==="contact"&&_.jsx("button",{className:"p-1.5 rounded hover:bg-accent text-xl leading-none",onClick:Ne,title:"Direct Trace",children:""}),(C.type==="channel"||C.type==="contact")&&_.jsx("button",{className:"p-1.5 rounded hover:bg-accent text-xl leading-none",onClick:()=>Pt(C.type,C.id),title:ns(K,C.type,C.id)?"Remove from favorites":"Add to favorites",children:ns(K,C.type,C.id)?_.jsx("span",{className:"text-yellow-500",children:""}):_.jsx("span",{className:"text-muted-foreground",children:""})}),!(C.type==="channel"&&C.name==="Public")&&_.jsx("button",{className:"p-1.5 rounded hover:bg-destructive/20 text-destructive text-xl leading-none",onClick:()=>{C.type==="channel"?Vt(C.id):Fn(C.id)},title:"Delete",children:""})]})]}),_.jsx(Fb,{messages:se,contacts:m,loading:W,loadingOlder:re,hasOlderMessages:V,onSenderClick:C.type==="channel"?yn:void 0,onLoadOlder:q,radioName:u==null?void 0:u.name,config:u}),_.jsx(jb,{ref:n,onSend:ke?Ke?st:Ve:wt,disabled:!(l!=null&&l.radio_connected),isRepeaterMode:ke&&!Ke,conversationType:C.type,senderName:u==null?void 0:u.name,placeholder:l!=null&&l.radio_connected?ke?Ke?"Send CLI command (requires admin login)...":`Enter password for ${C.name} (or . for none)...`:`Message ${C.name}...`:"Radio not connected"})]}):_.jsx("div",{className:"flex-1 flex items-center justify-center text-muted-foreground",children:"Select a conversation or start a new one"})})]}),_.jsx("div",{className:ft("border-t border-border bg-background transition-all duration-200 overflow-hidden",ee?"h-[275px]":"h-0"),children:_.jsx(pS,{packets:k,channels:A,visible:ee,onChannelCreate:async(ne,xe)=>{const _e=await rt.createChannel(ne,xe),Ue=await rt.getChannels();b(Ue),await rt.decryptHistoricalPackets({key_type:"channel",channel_key:_e.key}),Ge()},onRunningChange:te})}),_.jsx(A2,{open:S,contacts:m,undecryptedCount:U,onClose:()=>P(!1),onSelectConversation:ne=>{w(ne),P(!1)},onCreateContact:pn,onCreateChannel:ye,onCreateHashtagChannel:Se}),_.jsx(S2,{open:N,config:u,health:l,appSettings:d,onClose:()=>F(!1),onSave:It,onSaveAppSettings:Nn,onSetPrivateKey:Ot,onReboot:en,onAdvertise:sn,onHealthRefresh:async()=>{const ne=await rt.getHealth();c(ne)},onRefreshAppSettings:at}),_.jsx(g_,{position:"top-right"})]})}By.createRoot(document.getElementById("root")).render(_.jsx(D.StrictMode,{children:_.jsx(vS,{})}));export{_ as j,D as r};
//# sourceMappingURL=index-Bns2erWl.js.map
