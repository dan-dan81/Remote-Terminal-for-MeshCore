var gy=Object.defineProperty;var xy=(n,s,i)=>s in n?gy(n,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[s]=i;var Wo=(n,s,i)=>xy(n,typeof s!="symbol"?s+"":s,i);function Ay(n,s){for(var i=0;i<s.length;i++){const l=s[i];if(typeof l!="string"&&!Array.isArray(l)){for(const c in l)if(c!=="default"&&!(c in n)){const u=Object.getOwnPropertyDescriptor(l,c);u&&Object.defineProperty(n,c,u.get?u:{enumerable:!0,get:()=>l[c]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const p of u.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&l(p)}).observe(document,{childList:!0,subtree:!0});function i(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(c){if(c.ep)return;c.ep=!0;const u=i(c);fetch(c.href,u)}})();var Qf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function aa(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function gx(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var s=n.default;if(typeof s=="function"){var i=function l(){return this instanceof l?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};i.prototype=s.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(n).forEach(function(l){var c=Object.getOwnPropertyDescriptor(n,l);Object.defineProperty(i,l,c.get?c:{enumerable:!0,get:function(){return n[l]}})}),i}var Yf={exports:{}},el={},Xf={exports:{}},mt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kp;function vy(){if(Kp)return mt;Kp=1;var n=Symbol.for("react.element"),s=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),p=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),A=Symbol.iterator;function _(P){return P===null||typeof P!="object"?null:(P=A&&P[A]||P["@@iterator"],typeof P=="function"?P:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,C={};function b(P,V,q){this.props=P,this.context=V,this.refs=C,this.updater=q||k}b.prototype.isReactComponent={},b.prototype.setState=function(P,V){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,V,"setState")},b.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function S(){}S.prototype=b.prototype;function B(P,V,q){this.props=P,this.context=V,this.refs=C,this.updater=q||k}var D=B.prototype=new S;D.constructor=B,N(D,b.prototype),D.isPureReactComponent=!0;var F=Array.isArray,M=Object.prototype.hasOwnProperty,z={current:null},U={key:!0,ref:!0,__self:!0,__source:!0};function j(P,V,q){var Q,pe={},ue=null,se=null;if(V!=null)for(Q in V.ref!==void 0&&(se=V.ref),V.key!==void 0&&(ue=""+V.key),V)M.call(V,Q)&&!U.hasOwnProperty(Q)&&(pe[Q]=V[Q]);var he=arguments.length-2;if(he===1)pe.children=q;else if(1<he){for(var Ee=Array(he),We=0;We<he;We++)Ee[We]=arguments[We+2];pe.children=Ee}if(P&&P.defaultProps)for(Q in he=P.defaultProps,he)pe[Q]===void 0&&(pe[Q]=he[Q]);return{$$typeof:n,type:P,key:ue,ref:se,props:pe,_owner:z.current}}function te(P,V){return{$$typeof:n,type:P.type,key:V,ref:P.ref,props:P.props,_owner:P._owner}}function Z(P){return typeof P=="object"&&P!==null&&P.$$typeof===n}function K(P){var V={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(q){return V[q]})}var ee=/\/+/g;function G(P,V){return typeof P=="object"&&P!==null&&P.key!=null?K(""+P.key):V.toString(36)}function oe(P,V,q,Q,pe){var ue=typeof P;(ue==="undefined"||ue==="boolean")&&(P=null);var se=!1;if(P===null)se=!0;else switch(ue){case"string":case"number":se=!0;break;case"object":switch(P.$$typeof){case n:case s:se=!0}}if(se)return se=P,pe=pe(se),P=Q===""?"."+G(se,0):Q,F(pe)?(q="",P!=null&&(q=P.replace(ee,"$&/")+"/"),oe(pe,V,q,"",function(We){return We})):pe!=null&&(Z(pe)&&(pe=te(pe,q+(!pe.key||se&&se.key===pe.key?"":(""+pe.key).replace(ee,"$&/")+"/")+P)),V.push(pe)),1;if(se=0,Q=Q===""?".":Q+":",F(P))for(var he=0;he<P.length;he++){ue=P[he];var Ee=Q+G(ue,he);se+=oe(ue,V,q,Ee,pe)}else if(Ee=_(P),typeof Ee=="function")for(P=Ee.call(P),he=0;!(ue=P.next()).done;)ue=ue.value,Ee=Q+G(ue,he++),se+=oe(ue,V,q,Ee,pe);else if(ue==="object")throw V=String(P),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.");return se}function J(P,V,q){if(P==null)return P;var Q=[],pe=0;return oe(P,Q,"","",function(ue){return V.call(q,ue,pe++)}),Q}function Y(P){if(P._status===-1){var V=P._result;V=V(),V.then(function(q){(P._status===0||P._status===-1)&&(P._status=1,P._result=q)},function(q){(P._status===0||P._status===-1)&&(P._status=2,P._result=q)}),P._status===-1&&(P._status=0,P._result=V)}if(P._status===1)return P._result.default;throw P._result}var de={current:null},W={transition:null},ae={ReactCurrentDispatcher:de,ReactCurrentBatchConfig:W,ReactCurrentOwner:z};function H(){throw Error("act(...) is not supported in production builds of React.")}return mt.Children={map:J,forEach:function(P,V,q){J(P,function(){V.apply(this,arguments)},q)},count:function(P){var V=0;return J(P,function(){V++}),V},toArray:function(P){return J(P,function(V){return V})||[]},only:function(P){if(!Z(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},mt.Component=b,mt.Fragment=i,mt.Profiler=c,mt.PureComponent=B,mt.StrictMode=l,mt.Suspense=g,mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ae,mt.act=H,mt.cloneElement=function(P,V,q){if(P==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+P+".");var Q=N({},P.props),pe=P.key,ue=P.ref,se=P._owner;if(V!=null){if(V.ref!==void 0&&(ue=V.ref,se=z.current),V.key!==void 0&&(pe=""+V.key),P.type&&P.type.defaultProps)var he=P.type.defaultProps;for(Ee in V)M.call(V,Ee)&&!U.hasOwnProperty(Ee)&&(Q[Ee]=V[Ee]===void 0&&he!==void 0?he[Ee]:V[Ee])}var Ee=arguments.length-2;if(Ee===1)Q.children=q;else if(1<Ee){he=Array(Ee);for(var We=0;We<Ee;We++)he[We]=arguments[We+2];Q.children=he}return{$$typeof:n,type:P.type,key:pe,ref:ue,props:Q,_owner:se}},mt.createContext=function(P){return P={$$typeof:p,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},P.Provider={$$typeof:u,_context:P},P.Consumer=P},mt.createElement=j,mt.createFactory=function(P){var V=j.bind(null,P);return V.type=P,V},mt.createRef=function(){return{current:null}},mt.forwardRef=function(P){return{$$typeof:d,render:P}},mt.isValidElement=Z,mt.lazy=function(P){return{$$typeof:x,_payload:{_status:-1,_result:P},_init:Y}},mt.memo=function(P,V){return{$$typeof:m,type:P,compare:V===void 0?null:V}},mt.startTransition=function(P){var V=W.transition;W.transition={};try{P()}finally{W.transition=V}},mt.unstable_act=H,mt.useCallback=function(P,V){return de.current.useCallback(P,V)},mt.useContext=function(P){return de.current.useContext(P)},mt.useDebugValue=function(){},mt.useDeferredValue=function(P){return de.current.useDeferredValue(P)},mt.useEffect=function(P,V){return de.current.useEffect(P,V)},mt.useId=function(){return de.current.useId()},mt.useImperativeHandle=function(P,V,q){return de.current.useImperativeHandle(P,V,q)},mt.useInsertionEffect=function(P,V){return de.current.useInsertionEffect(P,V)},mt.useLayoutEffect=function(P,V){return de.current.useLayoutEffect(P,V)},mt.useMemo=function(P,V){return de.current.useMemo(P,V)},mt.useReducer=function(P,V,q){return de.current.useReducer(P,V,q)},mt.useRef=function(P){return de.current.useRef(P)},mt.useState=function(P){return de.current.useState(P)},mt.useSyncExternalStore=function(P,V,q){return de.current.useSyncExternalStore(P,V,q)},mt.useTransition=function(){return de.current.useTransition()},mt.version="18.3.1",mt}var Qp;function I0(){return Qp||(Qp=1,Xf.exports=vy()),Xf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yp;function yy(){if(Yp)return el;Yp=1;var n=I0(),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,c=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function p(d,g,m){var x,A={},_=null,k=null;m!==void 0&&(_=""+m),g.key!==void 0&&(_=""+g.key),g.ref!==void 0&&(k=g.ref);for(x in g)l.call(g,x)&&!u.hasOwnProperty(x)&&(A[x]=g[x]);if(d&&d.defaultProps)for(x in g=d.defaultProps,g)A[x]===void 0&&(A[x]=g[x]);return{$$typeof:s,type:d,key:_,ref:k,props:A,_owner:c.current}}return el.Fragment=i,el.jsx=p,el.jsxs=p,el}var Xp;function _y(){return Xp||(Xp=1,Yf.exports=yy()),Yf.exports}var w=_y(),R=I0();const ke=aa(R),O0=Ay({__proto__:null,default:ke},[R]);var Vc={},Jf={exports:{}},Kn={},e0={exports:{}},t0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jp;function wy(){return Jp||(Jp=1,(function(n){function s(W,ae){var H=W.length;W.push(ae);e:for(;0<H;){var P=H-1>>>1,V=W[P];if(0<c(V,ae))W[P]=ae,W[H]=V,H=P;else break e}}function i(W){return W.length===0?null:W[0]}function l(W){if(W.length===0)return null;var ae=W[0],H=W.pop();if(H!==ae){W[0]=H;e:for(var P=0,V=W.length,q=V>>>1;P<q;){var Q=2*(P+1)-1,pe=W[Q],ue=Q+1,se=W[ue];if(0>c(pe,H))ue<V&&0>c(se,pe)?(W[P]=se,W[ue]=H,P=ue):(W[P]=pe,W[Q]=H,P=Q);else if(ue<V&&0>c(se,H))W[P]=se,W[ue]=H,P=ue;else break e}}return ae}function c(W,ae){var H=W.sortIndex-ae.sortIndex;return H!==0?H:W.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var p=Date,d=p.now();n.unstable_now=function(){return p.now()-d}}var g=[],m=[],x=1,A=null,_=3,k=!1,N=!1,C=!1,b=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(W){for(var ae=i(m);ae!==null;){if(ae.callback===null)l(m);else if(ae.startTime<=W)l(m),ae.sortIndex=ae.expirationTime,s(g,ae);else break;ae=i(m)}}function F(W){if(C=!1,D(W),!N)if(i(g)!==null)N=!0,Y(M);else{var ae=i(m);ae!==null&&de(F,ae.startTime-W)}}function M(W,ae){N=!1,C&&(C=!1,S(j),j=-1),k=!0;var H=_;try{for(D(ae),A=i(g);A!==null&&(!(A.expirationTime>ae)||W&&!K());){var P=A.callback;if(typeof P=="function"){A.callback=null,_=A.priorityLevel;var V=P(A.expirationTime<=ae);ae=n.unstable_now(),typeof V=="function"?A.callback=V:A===i(g)&&l(g),D(ae)}else l(g);A=i(g)}if(A!==null)var q=!0;else{var Q=i(m);Q!==null&&de(F,Q.startTime-ae),q=!1}return q}finally{A=null,_=H,k=!1}}var z=!1,U=null,j=-1,te=5,Z=-1;function K(){return!(n.unstable_now()-Z<te)}function ee(){if(U!==null){var W=n.unstable_now();Z=W;var ae=!0;try{ae=U(!0,W)}finally{ae?G():(z=!1,U=null)}}else z=!1}var G;if(typeof B=="function")G=function(){B(ee)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,J=oe.port2;oe.port1.onmessage=ee,G=function(){J.postMessage(null)}}else G=function(){b(ee,0)};function Y(W){U=W,z||(z=!0,G())}function de(W,ae){j=b(function(){W(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_continueExecution=function(){N||k||(N=!0,Y(M))},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_getFirstCallbackNode=function(){return i(g)},n.unstable_next=function(W){switch(_){case 1:case 2:case 3:var ae=3;break;default:ae=_}var H=_;_=ae;try{return W()}finally{_=H}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(W,ae){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var H=_;_=W;try{return ae()}finally{_=H}},n.unstable_scheduleCallback=function(W,ae,H){var P=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?P+H:P):H=P,W){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=H+V,W={id:x++,callback:ae,priorityLevel:W,startTime:H,expirationTime:V,sortIndex:-1},H>P?(W.sortIndex=H,s(m,W),i(g)===null&&W===i(m)&&(C?(S(j),j=-1):C=!0,de(F,H-P))):(W.sortIndex=V,s(g,W),N||k||(N=!0,Y(M))),W},n.unstable_shouldYield=K,n.unstable_wrapCallback=function(W){var ae=_;return function(){var H=_;_=ae;try{return W.apply(this,arguments)}finally{_=H}}}})(t0)),t0}var em;function by(){return em||(em=1,e0.exports=wy()),e0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tm;function Cy(){if(tm)return Kn;tm=1;var n=I0(),s=by();function i(e){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=new Set,c={};function u(e,r){p(e,r),p(e+"Capture",r)}function p(e,r){for(c[e]=r,e=0;e<r.length;e++)l.add(r[e])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},A={};function _(e){return g.call(A,e)?!0:g.call(x,e)?!1:m.test(e)?A[e]=!0:(x[e]=!0,!1)}function k(e,r,a,h){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function N(e,r,a,h){if(r===null||typeof r>"u"||k(e,r,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function C(e,r,a,h,y,E,I){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=h,this.attributeNamespace=y,this.mustUseProperty=a,this.propertyName=e,this.type=r,this.sanitizeURL=E,this.removeEmptyString=I}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){b[e]=new C(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var r=e[0];b[r]=new C(r,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){b[e]=new C(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){b[e]=new C(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){b[e]=new C(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){b[e]=new C(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){b[e]=new C(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){b[e]=new C(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){b[e]=new C(e,5,!1,e.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function B(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var r=e.replace(S,B);b[r]=new C(r,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var r=e.replace(S,B);b[r]=new C(r,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var r=e.replace(S,B);b[r]=new C(r,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){b[e]=new C(e,1,!1,e.toLowerCase(),null,!1,!1)}),b.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){b[e]=new C(e,1,!1,e.toLowerCase(),null,!0,!0)});function D(e,r,a,h){var y=b.hasOwnProperty(r)?b[r]:null;(y!==null?y.type!==0:h||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(N(r,a,y,h)&&(a=null),h||y===null?_(r)&&(a===null?e.removeAttribute(r):e.setAttribute(r,""+a)):y.mustUseProperty?e[y.propertyName]=a===null?y.type===3?!1:"":a:(r=y.attributeName,h=y.attributeNamespace,a===null?e.removeAttribute(r):(y=y.type,a=y===3||y===4&&a===!0?"":""+a,h?e.setAttributeNS(h,r,a):e.setAttribute(r,a))))}var F=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),z=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),Z=Symbol.for("react.provider"),K=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),de=Symbol.for("react.offscreen"),W=Symbol.iterator;function ae(e){return e===null||typeof e!="object"?null:(e=W&&e[W]||e["@@iterator"],typeof e=="function"?e:null)}var H=Object.assign,P;function V(e){if(P===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);P=r&&r[1]||""}return`
`+P+e}var q=!1;function Q(e,r){if(!e||q)return"";q=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(ge){var h=ge}Reflect.construct(e,[],r)}else{try{r.call()}catch(ge){h=ge}e.call(r.prototype)}else{try{throw Error()}catch(ge){h=ge}e()}}catch(ge){if(ge&&h&&typeof ge.stack=="string"){for(var y=ge.stack.split(`
`),E=h.stack.split(`
`),I=y.length-1,$=E.length-1;1<=I&&0<=$&&y[I]!==E[$];)$--;for(;1<=I&&0<=$;I--,$--)if(y[I]!==E[$]){if(I!==1||$!==1)do if(I--,$--,0>$||y[I]!==E[$]){var ne=`
`+y[I].replace(" at new "," at ");return e.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",e.displayName)),ne}while(1<=I&&0<=$);break}}}finally{q=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?V(e):""}function pe(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=Q(e.type,!1),e;case 11:return e=Q(e.type.render,!1),e;case 1:return e=Q(e.type,!0),e;default:return""}}function ue(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case U:return"Fragment";case z:return"Portal";case te:return"Profiler";case j:return"StrictMode";case G:return"Suspense";case oe:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case K:return(e.displayName||"Context")+".Consumer";case Z:return(e._context.displayName||"Context")+".Provider";case ee:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case J:return r=e.displayName||null,r!==null?r:ue(e.type)||"Memo";case Y:r=e._payload,e=e._init;try{return ue(e(r))}catch{}}return null}function se(e){var r=e.type;switch(e.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=r.render,e=e.displayName||e.name||"",r.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ue(r);case 8:return r===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function he(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ee(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function We(e){var r=Ee(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),h=""+e[r];if(!e.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var y=a.get,E=a.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return y.call(this)},set:function(I){h=""+I,E.call(this,I)}}),Object.defineProperty(e,r,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(I){h=""+I},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function dt(e){e._valueTracker||(e._valueTracker=We(e))}function ot(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var a=r.getValue(),h="";return e&&(h=Ee(e)?e.checked?"true":"false":e.value),e=h,e!==a?(r.setValue(e),!0):!1}function Be(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ie(e,r){var a=r.checked;return H({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??e._wrapperState.initialChecked})}function ft(e,r){var a=r.defaultValue==null?"":r.defaultValue,h=r.checked!=null?r.checked:r.defaultChecked;a=he(r.value!=null?r.value:a),e._wrapperState={initialChecked:h,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Nt(e,r){r=r.checked,r!=null&&D(e,"checked",r,!1)}function lt(e,r){Nt(e,r);var a=he(r.value),h=r.type;if(a!=null)h==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if(h==="submit"||h==="reset"){e.removeAttribute("value");return}r.hasOwnProperty("value")?qe(e,r.type,a):r.hasOwnProperty("defaultValue")&&qe(e,r.type,he(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(e.defaultChecked=!!r.defaultChecked)}function Qe(e,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var h=r.type;if(!(h!=="submit"&&h!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+e._wrapperState.initialValue,a||r===e.value||(e.value=r),e.defaultValue=r}a=e.name,a!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,a!==""&&(e.name=a)}function qe(e,r,a){(r!=="number"||Be(e.ownerDocument)!==e)&&(a==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var et=Array.isArray;function rt(e,r,a,h){if(e=e.options,r){r={};for(var y=0;y<a.length;y++)r["$"+a[y]]=!0;for(a=0;a<e.length;a++)y=r.hasOwnProperty("$"+e[a].value),e[a].selected!==y&&(e[a].selected=y),y&&h&&(e[a].defaultSelected=!0)}else{for(a=""+he(a),r=null,y=0;y<e.length;y++){if(e[y].value===a){e[y].selected=!0,h&&(e[y].defaultSelected=!0);return}r!==null||e[y].disabled||(r=e[y])}r!==null&&(r.selected=!0)}}function Ue(e,r){if(r.dangerouslySetInnerHTML!=null)throw Error(i(91));return H({},r,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function kt(e,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(i(92));if(et(a)){if(1<a.length)throw Error(i(93));a=a[0]}r=a}r==null&&(r=""),a=r}e._wrapperState={initialValue:he(a)}}function $t(e,r){var a=he(r.value),h=he(r.defaultValue);a!=null&&(a=""+a,a!==e.value&&(e.value=a),r.defaultValue==null&&e.defaultValue!==a&&(e.defaultValue=a)),h!=null&&(e.defaultValue=""+h)}function Pe(e){var r=e.textContent;r===e._wrapperState.initialValue&&r!==""&&r!==null&&(e.value=r)}function pt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ut(e,r){return e==null||e==="http://www.w3.org/1999/xhtml"?pt(r):e==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var sn,en=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,h,y){MSApp.execUnsafeLocalFunction(function(){return e(r,a,h,y)})}:e})(function(e,r){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=r;else{for(sn=sn||document.createElement("div"),sn.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=sn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;r.firstChild;)e.appendChild(r.firstChild)}});function Kt(e,r){if(r){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=r;return}}e.textContent=r}var Ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qt=["Webkit","ms","Moz","O"];Object.keys(Ft).forEach(function(e){Qt.forEach(function(r){r=r+e.charAt(0).toUpperCase()+e.substring(1),Ft[r]=Ft[e]})});function Yn(e,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||Ft.hasOwnProperty(e)&&Ft[e]?(""+r).trim():r+"px"}function Cn(e,r){e=e.style;for(var a in r)if(r.hasOwnProperty(a)){var h=a.indexOf("--")===0,y=Yn(a,r[a],h);a==="float"&&(a="cssFloat"),h?e.setProperty(a,y):e[a]=y}}var xe=H({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ce(e,r){if(r){if(xe[e]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(i(137,e));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(i(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(i(61))}if(r.style!=null&&typeof r.style!="object")throw Error(i(62))}}function Ne(e,r){if(e.indexOf("-")===-1)return typeof r.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ct=null;function ie(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ae=null,_e=null,De=null;function Ye(e){if(e=xi(e)){if(typeof Ae!="function")throw Error(i(280));var r=e.stateNode;r&&(r=Ns(r),Ae(e.stateNode,e.type,r))}}function Fe(e){_e?De?De.push(e):De=[e]:_e=e}function wt(){if(_e){var e=_e,r=De;if(De=_e=null,Ye(e),r)for(e=0;e<r.length;e++)Ye(r[e])}}function Rt(e,r){return e(r)}function zt(){}var Hn=!1;function ut(e,r,a){if(Hn)return e(r,a);Hn=!0;try{return Rt(e,r,a)}finally{Hn=!1,(_e!==null||De!==null)&&(zt(),wt())}}function Pt(e,r){var a=e.stateNode;if(a===null)return null;var h=Ns(a);if(h===null)return null;a=h[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(e=e.type,h=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!h;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var Xn=!1;if(d)try{var bt={};Object.defineProperty(bt,"passive",{get:function(){Xn=!0}}),window.addEventListener("test",bt,bt),window.removeEventListener("test",bt,bt)}catch{Xn=!1}function Ht(e,r,a,h,y,E,I,$,ne){var ge=Array.prototype.slice.call(arguments,3);try{r.apply(a,ge)}catch(we){this.onError(we)}}var Yt=!1,Re=null,Ni=!1,ls=null,Pl={onError:function(e){Yt=!0,Re=e}};function Tl(e,r,a,h,y,E,I,$,ne){Yt=!1,Re=null,Ht.apply(Pl,arguments)}function da(e,r,a,h,y,E,I,$,ne){if(Tl.apply(this,arguments),Yt){if(Yt){var ge=Re;Yt=!1,Re=null}else throw Error(i(198));Ni||(Ni=!0,ls=ge)}}function Ur(e){var r=e,a=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,(r.flags&4098)!==0&&(a=r.return),e=r.return;while(e)}return r.tag===3?a:null}function si(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function fa(e){if(Ur(e)!==e)throw Error(i(188))}function Sd(e){var r=e.alternate;if(!r){if(r=Ur(e),r===null)throw Error(i(188));return r!==e?null:e}for(var a=e,h=r;;){var y=a.return;if(y===null)break;var E=y.alternate;if(E===null){if(h=y.return,h!==null){a=h;continue}break}if(y.child===E.child){for(E=y.child;E;){if(E===a)return fa(y),e;if(E===h)return fa(y),r;E=E.sibling}throw Error(i(188))}if(a.return!==h.return)a=y,h=E;else{for(var I=!1,$=y.child;$;){if($===a){I=!0,a=y,h=E;break}if($===h){I=!0,h=y,a=E;break}$=$.sibling}if(!I){for($=E.child;$;){if($===a){I=!0,a=E,h=y;break}if($===h){I=!0,h=E,a=y;break}$=$.sibling}if(!I)throw Error(i(189))}}if(a.alternate!==h)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?e:r}function Dl(e){return e=Sd(e),e!==null?Rl(e):null}function Rl(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var r=Rl(e);if(r!==null)return r;e=e.sibling}return null}var Nl=s.unstable_scheduleCallback,ha=s.unstable_cancelCallback,Bd=s.unstable_shouldYield,cs=s.unstable_requestPaint,Zt=s.unstable_now,Pd=s.unstable_getCurrentPriorityLevel,pa=s.unstable_ImmediatePriority,Fl=s.unstable_UserBlockingPriority,us=s.unstable_NormalPriority,ma=s.unstable_LowPriority,Fi=s.unstable_IdlePriority,yo=null,Jn=null;function _o(e){if(Jn&&typeof Jn.onCommitFiberRoot=="function")try{Jn.onCommitFiberRoot(yo,e,void 0,(e.current.flags&128)===128)}catch{}}var it=Math.clz32?Math.clz32:Li,It=Math.log,ds=Math.LN2;function Li(e){return e>>>=0,e===0?32:31-(It(e)/ds|0)|0}var Sr=64,Mi=4194304;function tt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Lt(e,r){var a=e.pendingLanes;if(a===0)return 0;var h=0,y=e.suspendedLanes,E=e.pingedLanes,I=a&268435455;if(I!==0){var $=I&~y;$!==0?h=tt($):(E&=I,E!==0&&(h=tt(E)))}else I=a&~y,I!==0?h=tt(I):E!==0&&(h=tt(E));if(h===0)return 0;if(r!==0&&r!==h&&(r&y)===0&&(y=h&-h,E=r&-r,y>=E||y===16&&(E&4194240)!==0))return r;if((h&4)!==0&&(h|=a&16),r=e.entangledLanes,r!==0)for(e=e.entanglements,r&=h;0<r;)a=31-it(r),y=1<<a,h|=e[a],r&=~y;return h}function ga(e,r){switch(e){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fs(e,r){for(var a=e.suspendedLanes,h=e.pingedLanes,y=e.expirationTimes,E=e.pendingLanes;0<E;){var I=31-it(E),$=1<<I,ne=y[I];ne===-1?(($&a)===0||($&h)!==0)&&(y[I]=ga($,r)):ne<=r&&(e.expiredLanes|=$),E&=~$}}function En(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ll(){var e=Sr;return Sr<<=1,(Sr&4194240)===0&&(Sr=64),e}function Ii(e){for(var r=[],a=0;31>a;a++)r.push(e);return r}function er(e,r,a){e.pendingLanes|=r,r!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,r=31-it(r),e[r]=a}function Xt(e,r){var a=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;var h=e.eventTimes;for(e=e.expirationTimes;0<a;){var y=31-it(a),E=1<<y;r[y]=0,h[y]=-1,e[y]=-1,a&=~E}}function Br(e,r){var a=e.entangledLanes|=r;for(e=e.entanglements;a;){var h=31-it(a),y=1<<h;y&r|e[h]&r&&(e[h]|=r),a&=~y}}var _t=0;function Oi(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var hs,ai,ps,ms,wo,bo=!1,ji=[],tr=null,Pr=null,fr=null,Co=new Map,Xe=new Map,an=[],Tt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xa(e,r){switch(e){case"focusin":case"focusout":tr=null;break;case"dragenter":case"dragleave":Pr=null;break;case"mouseover":case"mouseout":fr=null;break;case"pointerover":case"pointerout":Co.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xe.delete(r.pointerId)}}function li(e,r,a,h,y,E){return e===null||e.nativeEvent!==E?(e={blockedOn:r,domEventName:a,eventSystemFlags:h,nativeEvent:E,targetContainers:[y]},r!==null&&(r=xi(r),r!==null&&ai(r)),e):(e.eventSystemFlags|=h,r=e.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),e)}function Aa(e,r,a,h,y){switch(r){case"focusin":return tr=li(tr,e,r,a,h,y),!0;case"dragenter":return Pr=li(Pr,e,r,a,h,y),!0;case"mouseover":return fr=li(fr,e,r,a,h,y),!0;case"pointerover":var E=y.pointerId;return Co.set(E,li(Co.get(E)||null,e,r,a,h,y)),!0;case"gotpointercapture":return E=y.pointerId,Xe.set(E,li(Xe.get(E)||null,e,r,a,h,y)),!0}return!1}function gs(e){var r=gi(e.target);if(r!==null){var a=Ur(r);if(a!==null){if(r=a.tag,r===13){if(r=si(a),r!==null){e.blockedOn=r,wo(e.priority,function(){ps(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hr(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var a=vs(e.domEventName,e.eventSystemFlags,r[0],e.nativeEvent);if(a===null){a=e.nativeEvent;var h=new a.constructor(a.type,a);ct=h,a.target.dispatchEvent(h),ct=null}else return r=xi(a),r!==null&&ai(r),e.blockedOn=a,!1;r.shift()}return!0}function xs(e,r,a){hr(e)&&a.delete(r)}function Eo(){bo=!1,tr!==null&&hr(tr)&&(tr=null),Pr!==null&&hr(Pr)&&(Pr=null),fr!==null&&hr(fr)&&(fr=null),Co.forEach(xs),Xe.forEach(xs)}function Wt(e,r){e.blockedOn===r&&(e.blockedOn=null,bo||(bo=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Eo)))}function nr(e){function r(y){return Wt(y,e)}if(0<ji.length){Wt(ji[0],e);for(var a=1;a<ji.length;a++){var h=ji[a];h.blockedOn===e&&(h.blockedOn=null)}}for(tr!==null&&Wt(tr,e),Pr!==null&&Wt(Pr,e),fr!==null&&Wt(fr,e),Co.forEach(r),Xe.forEach(r),a=0;a<an.length;a++)h=an[a],h.blockedOn===e&&(h.blockedOn=null);for(;0<an.length&&(a=an[0],a.blockedOn===null);)gs(a),a.blockedOn===null&&an.shift()}var ci=F.ReactCurrentBatchConfig,ko=!0;function Td(e,r,a,h){var y=_t,E=ci.transition;ci.transition=null;try{_t=1,So(e,r,a,h)}finally{_t=y,ci.transition=E}}function Ml(e,r,a,h){var y=_t,E=ci.transition;ci.transition=null;try{_t=4,So(e,r,a,h)}finally{_t=y,ci.transition=E}}function So(e,r,a,h){if(ko){var y=vs(e,r,a,h);if(y===null)t(e,r,h,As,a),xa(e,h);else if(Aa(y,e,r,a,h))h.stopPropagation();else if(xa(e,h),r&4&&-1<Tt.indexOf(e)){for(;y!==null;){var E=xi(y);if(E!==null&&hs(E),E=vs(e,r,a,h),E===null&&t(e,r,h,As,a),E===y)break;y=E}y!==null&&h.stopPropagation()}else t(e,r,h,null,a)}}var As=null;function vs(e,r,a,h){if(As=null,e=ie(h),e=gi(e),e!==null)if(r=Ur(e),r===null)e=null;else if(a=r.tag,a===13){if(e=si(r),e!==null)return e;e=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null);return As=e,null}function xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pd()){case pa:return 1;case Fl:return 4;case us:case ma:return 16;case Fi:return 536870912;default:return 16}default:return 16}}var Zr=null,Nn=null,Wr=null;function va(){if(Wr)return Wr;var e,r=Nn,a=r.length,h,y="value"in Zr?Zr.value:Zr.textContent,E=y.length;for(e=0;e<a&&r[e]===y[e];e++);var I=a-e;for(h=1;h<=I&&r[a-h]===y[E-h];h++);return Wr=y.slice(e,1<h?1-h:void 0)}function ys(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function zi(){return!0}function Il(){return!1}function kn(e){function r(a,h,y,E,I){this._reactName=a,this._targetInst=y,this.type=h,this.nativeEvent=E,this.target=I,this.currentTarget=null;for(var $ in e)e.hasOwnProperty($)&&(a=e[$],this[$]=a?a(E):E[$]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?zi:Il,this.isPropagationStopped=Il,this}return H(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=zi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=zi)},persist:function(){},isPersistent:zi}),r}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ya=kn(Hi),ui=H({},Hi,{view:0,detail:0}),Dd=kn(ui),Vn,_a,Vi,rr=H({},ui,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Vi&&(Vi&&e.type==="mousemove"?(Vn=e.screenX-Vi.screenX,_a=e.screenY-Vi.screenY):_a=Vn=0,Vi=e),Vn)},movementY:function(e){return"movementY"in e?e.movementY:_a}}),wa=kn(rr),Ol=H({},rr,{dataTransfer:0}),ba=kn(Ol),Rd=H({},ui,{relatedTarget:0}),_s=kn(Rd),jl=H({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),Nd=kn(jl),Fd=H({},Hi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ca=kn(Fd),Ld=H({},Hi,{data:0}),Ea=kn(Ld),zl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ws={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},di={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Md(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=di[e])?!!r[e]:!1}function fi(){return Md}var Un=H({},ui,{key:function(e){if(e.key){var r=zl[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=ys(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ws[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fi,charCode:function(e){return e.type==="keypress"?ys(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ys(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hl=kn(Un),Vl=H({},rr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ul=kn(Vl),ka=H({},ui,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fi}),Sa=kn(ka),Id=H({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Od=kn(Id),Zl=H({},rr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jd=kn(Zl),ir=[9,13,27,32],qr=d&&"CompositionEvent"in window,Bo=null;d&&"documentMode"in document&&(Bo=document.documentMode);var Tr=d&&"TextEvent"in window&&!Bo,Wl=d&&(!qr||Bo&&8<Bo&&11>=Bo),hi=" ",ql=!1;function Ui(e,r){switch(e){case"keyup":return ir.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ba(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Dr=!1;function zd(e,r){switch(e){case"compositionend":return Ba(r);case"keypress":return r.which!==32?null:(ql=!0,hi);case"textInput":return e=r.data,e===hi&&ql?null:e;default:return null}}function Gr(e,r){if(Dr)return e==="compositionend"||!qr&&Ui(e,r)?(e=va(),Wr=Nn=Zr=null,Dr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Wl&&r.locale!=="ko"?null:r.data;default:return null}}var bs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gl(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!bs[e.type]:r==="textarea"}function Cs(e,r,a,h){Fe(h),r=f(r,"onChange"),0<r.length&&(a=new ya("onChange","change",null,a,h),e.push({event:a,listeners:r}))}var Po=null,Fn=null;function Hd(e){Ia(e,0)}function Rr(e){var r=Ai(e);if(ot(r))return e}function Vd(e,r){if(e==="change")return r}var pr=!1;if(d){var Zi;if(d){var Es="oninput"in document;if(!Es){var ks=document.createElement("div");ks.setAttribute("oninput","return;"),Es=typeof ks.oninput=="function"}Zi=Es}else Zi=!1;pr=Zi&&(!document.documentMode||9<document.documentMode)}function To(){Po&&(Po.detachEvent("onpropertychange",Ss),Fn=Po=null)}function Ss(e){if(e.propertyName==="value"&&Rr(Fn)){var r=[];Cs(r,Fn,e,ie(e)),ut(Hd,r)}}function Bs(e,r,a){e==="focusin"?(To(),Po=r,Fn=a,Po.attachEvent("onpropertychange",Ss)):e==="focusout"&&To()}function Wi(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Rr(Fn)}function Ps(e,r){if(e==="click")return Rr(r)}function Pa(e,r){if(e==="input"||e==="change")return Rr(r)}function $l(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var or=typeof Object.is=="function"?Object.is:$l;function $r(e,r){if(or(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var a=Object.keys(e),h=Object.keys(r);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var y=a[h];if(!g.call(r,y)||!or(e[y],r[y]))return!1}return!0}function Kl(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ta(e,r){var a=Kl(e);e=0;for(var h;a;){if(a.nodeType===3){if(h=e+a.textContent.length,e<=r&&h>=r)return{node:a,offset:r-e};e=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Kl(a)}}function Ql(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?Ql(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function Da(){for(var e=window,r=Be();r instanceof e.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)e=r.contentWindow;else break;r=Be(e.document)}return r}function Ra(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}function mr(e){var r=Da(),a=e.focusedElem,h=e.selectionRange;if(r!==a&&a&&a.ownerDocument&&Ql(a.ownerDocument.documentElement,a)){if(h!==null&&Ra(a)){if(r=h.start,e=h.end,e===void 0&&(e=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(e,a.value.length);else if(e=(r=a.ownerDocument||document)&&r.defaultView||window,e.getSelection){e=e.getSelection();var y=a.textContent.length,E=Math.min(h.start,y);h=h.end===void 0?E:Math.min(h.end,y),!e.extend&&E>h&&(y=h,h=E,E=y),y=Ta(a,E);var I=Ta(a,h);y&&I&&(e.rangeCount!==1||e.anchorNode!==y.node||e.anchorOffset!==y.offset||e.focusNode!==I.node||e.focusOffset!==I.offset)&&(r=r.createRange(),r.setStart(y.node,y.offset),e.removeAllRanges(),E>h?(e.addRange(r),e.extend(I.node,I.offset)):(r.setEnd(I.node,I.offset),e.addRange(r)))}}for(r=[],e=a;e=e.parentNode;)e.nodeType===1&&r.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)e=r[a],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ts=d&&"documentMode"in document&&11>=document.documentMode,qi=null,Gi=null,Do=null,Ds=!1;function Yl(e,r,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ds||qi==null||qi!==Be(h)||(h=qi,"selectionStart"in h&&Ra(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Do&&$r(Do,h)||(Do=h,h=f(Gi,"onSelect"),0<h.length&&(r=new ya("onSelect","select",null,r,a),e.push({event:r,listeners:h}),r.target=qi)))}function Kr(e,r){var a={};return a[e.toLowerCase()]=r.toLowerCase(),a["Webkit"+e]="webkit"+r,a["Moz"+e]="moz"+r,a}var $i={animationend:Kr("Animation","AnimationEnd"),animationiteration:Kr("Animation","AnimationIteration"),animationstart:Kr("Animation","AnimationStart"),transitionend:Kr("Transition","TransitionEnd")},Qr={},Na={};d&&(Na=document.createElement("div").style,"AnimationEvent"in window||(delete $i.animationend.animation,delete $i.animationiteration.animation,delete $i.animationstart.animation),"TransitionEvent"in window||delete $i.transitionend.transition);function Ro(e){if(Qr[e])return Qr[e];if(!$i[e])return e;var r=$i[e],a;for(a in r)if(r.hasOwnProperty(a)&&a in Na)return Qr[e]=r[a];return e}var Xl=Ro("animationend"),gr=Ro("animationiteration"),Fa=Ro("animationstart"),La=Ro("transitionend"),Ki=new Map,Jl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sr(e,r){Ki.set(e,r),u(r,[e])}for(var pi=0;pi<Jl.length;pi++){var Rs=Jl[pi],ec=Rs.toLowerCase(),Ud=Rs[0].toUpperCase()+Rs.slice(1);sr(ec,"on"+Ud)}sr(Xl,"onAnimationEnd"),sr(gr,"onAnimationIteration"),sr(Fa,"onAnimationStart"),sr("dblclick","onDoubleClick"),sr("focusin","onFocus"),sr("focusout","onBlur"),sr(La,"onTransitionEnd"),p("onMouseEnter",["mouseout","mouseover"]),p("onMouseLeave",["mouseout","mouseover"]),p("onPointerEnter",["pointerout","pointerover"]),p("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tc=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qi));function Ma(e,r,a){var h=e.type||"unknown-event";e.currentTarget=a,da(h,r,void 0,e),e.currentTarget=null}function Ia(e,r){r=(r&4)!==0;for(var a=0;a<e.length;a++){var h=e[a],y=h.event;h=h.listeners;e:{var E=void 0;if(r)for(var I=h.length-1;0<=I;I--){var $=h[I],ne=$.instance,ge=$.currentTarget;if($=$.listener,ne!==E&&y.isPropagationStopped())break e;Ma(y,$,ge),E=ne}else for(I=0;I<h.length;I++){if($=h[I],ne=$.instance,ge=$.currentTarget,$=$.listener,ne!==E&&y.isPropagationStopped())break e;Ma(y,$,ge),E=ne}}}if(Ni)throw e=ls,Ni=!1,ls=null,e}function Dt(e,r){var a=r[eo];a===void 0&&(a=r[eo]=new Set);var h=e+"__bubble";a.has(h)||(nc(r,e,2,!1),a.add(h))}function Oa(e,r,a){var h=0;r&&(h|=4),nc(a,e,h,r)}var No="_reactListening"+Math.random().toString(36).slice(2);function Yi(e){if(!e[No]){e[No]=!0,l.forEach(function(a){a!=="selectionchange"&&(tc.has(a)||Oa(a,!1,e),Oa(a,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[No]||(r[No]=!0,Oa("selectionchange",!1,r))}}function nc(e,r,a,h){switch(xt(r)){case 1:var y=Td;break;case 4:y=Ml;break;default:y=So}a=y.bind(null,r,a,e),y=void 0,!Xn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),h?y!==void 0?e.addEventListener(r,a,{capture:!0,passive:y}):e.addEventListener(r,a,!0):y!==void 0?e.addEventListener(r,a,{passive:y}):e.addEventListener(r,a,!1)}function t(e,r,a,h,y){var E=h;if((r&1)===0&&(r&2)===0&&h!==null)e:for(;;){if(h===null)return;var I=h.tag;if(I===3||I===4){var $=h.stateNode.containerInfo;if($===y||$.nodeType===8&&$.parentNode===y)break;if(I===4)for(I=h.return;I!==null;){var ne=I.tag;if((ne===3||ne===4)&&(ne=I.stateNode.containerInfo,ne===y||ne.nodeType===8&&ne.parentNode===y))return;I=I.return}for(;$!==null;){if(I=gi($),I===null)return;if(ne=I.tag,ne===5||ne===6){h=E=I;continue e}$=$.parentNode}}h=h.return}ut(function(){var ge=E,we=ie(a),be=[];e:{var ye=Ki.get(e);if(ye!==void 0){var Le=ya,Oe=e;switch(e){case"keypress":if(ys(a)===0)break e;case"keydown":case"keyup":Le=Hl;break;case"focusin":Oe="focus",Le=_s;break;case"focusout":Oe="blur",Le=_s;break;case"beforeblur":case"afterblur":Le=_s;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Le=wa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Le=ba;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Le=Sa;break;case Xl:case gr:case Fa:Le=Nd;break;case La:Le=Od;break;case"scroll":Le=Dd;break;case"wheel":Le=jd;break;case"copy":case"cut":case"paste":Le=Ca;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Le=Ul}var Ve=(r&4)!==0,tn=!Ve&&e==="scroll",ce=Ve?ye!==null?ye+"Capture":null:ye;Ve=[];for(var re=ge,fe;re!==null;){fe=re;var Se=fe.stateNode;if(fe.tag===5&&Se!==null&&(fe=Se,ce!==null&&(Se=Pt(re,ce),Se!=null&&Ve.push(o(re,Se,fe)))),tn)break;re=re.return}0<Ve.length&&(ye=new Le(ye,Oe,null,a,we),be.push({event:ye,listeners:Ve}))}}if((r&7)===0){e:{if(ye=e==="mouseover"||e==="pointerover",Le=e==="mouseout"||e==="pointerout",ye&&a!==ct&&(Oe=a.relatedTarget||a.fromElement)&&(gi(Oe)||Oe[St]))break e;if((Le||ye)&&(ye=we.window===we?we:(ye=we.ownerDocument)?ye.defaultView||ye.parentWindow:window,Le?(Oe=a.relatedTarget||a.toElement,Le=ge,Oe=Oe?gi(Oe):null,Oe!==null&&(tn=Ur(Oe),Oe!==tn||Oe.tag!==5&&Oe.tag!==6)&&(Oe=null)):(Le=null,Oe=ge),Le!==Oe)){if(Ve=wa,Se="onMouseLeave",ce="onMouseEnter",re="mouse",(e==="pointerout"||e==="pointerover")&&(Ve=Ul,Se="onPointerLeave",ce="onPointerEnter",re="pointer"),tn=Le==null?ye:Ai(Le),fe=Oe==null?ye:Ai(Oe),ye=new Ve(Se,re+"leave",Le,a,we),ye.target=tn,ye.relatedTarget=fe,Se=null,gi(we)===ge&&(Ve=new Ve(ce,re+"enter",Oe,a,we),Ve.target=fe,Ve.relatedTarget=tn,Se=Ve),tn=Se,Le&&Oe)t:{for(Ve=Le,ce=Oe,re=0,fe=Ve;fe;fe=v(fe))re++;for(fe=0,Se=ce;Se;Se=v(Se))fe++;for(;0<re-fe;)Ve=v(Ve),re--;for(;0<fe-re;)ce=v(ce),fe--;for(;re--;){if(Ve===ce||ce!==null&&Ve===ce.alternate)break t;Ve=v(Ve),ce=v(ce)}Ve=null}else Ve=null;Le!==null&&T(be,ye,Le,Ve,!1),Oe!==null&&tn!==null&&T(be,tn,Oe,Ve,!0)}}e:{if(ye=ge?Ai(ge):window,Le=ye.nodeName&&ye.nodeName.toLowerCase(),Le==="select"||Le==="input"&&ye.type==="file")var Ze=Vd;else if(Gl(ye))if(pr)Ze=Pa;else{Ze=Wi;var $e=Bs}else(Le=ye.nodeName)&&Le.toLowerCase()==="input"&&(ye.type==="checkbox"||ye.type==="radio")&&(Ze=Ps);if(Ze&&(Ze=Ze(e,ge))){Cs(be,Ze,a,we);break e}$e&&$e(e,ye,ge),e==="focusout"&&($e=ye._wrapperState)&&$e.controlled&&ye.type==="number"&&qe(ye,"number",ye.value)}switch($e=ge?Ai(ge):window,e){case"focusin":(Gl($e)||$e.contentEditable==="true")&&(qi=$e,Gi=ge,Do=null);break;case"focusout":Do=Gi=qi=null;break;case"mousedown":Ds=!0;break;case"contextmenu":case"mouseup":case"dragend":Ds=!1,Yl(be,a,we);break;case"selectionchange":if(Ts)break;case"keydown":case"keyup":Yl(be,a,we)}var Ke;if(qr)e:{switch(e){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else Dr?Ui(e,a)&&(Je="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Je="onCompositionStart");Je&&(Wl&&a.locale!=="ko"&&(Dr||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&Dr&&(Ke=va()):(Zr=we,Nn="value"in Zr?Zr.value:Zr.textContent,Dr=!0)),$e=f(ge,Je),0<$e.length&&(Je=new Ea(Je,e,null,a,we),be.push({event:Je,listeners:$e}),Ke?Je.data=Ke:(Ke=Ba(a),Ke!==null&&(Je.data=Ke)))),(Ke=Tr?zd(e,a):Gr(e,a))&&(ge=f(ge,"onBeforeInput"),0<ge.length&&(we=new Ea("onBeforeInput","beforeinput",null,a,we),be.push({event:we,listeners:ge}),we.data=Ke))}Ia(be,r)})}function o(e,r,a){return{instance:e,listener:r,currentTarget:a}}function f(e,r){for(var a=r+"Capture",h=[];e!==null;){var y=e,E=y.stateNode;y.tag===5&&E!==null&&(y=E,E=Pt(e,a),E!=null&&h.unshift(o(e,E,y)),E=Pt(e,r),E!=null&&h.push(o(e,E,y))),e=e.return}return h}function v(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function T(e,r,a,h,y){for(var E=r._reactName,I=[];a!==null&&a!==h;){var $=a,ne=$.alternate,ge=$.stateNode;if(ne!==null&&ne===h)break;$.tag===5&&ge!==null&&($=ge,y?(ne=Pt(a,E),ne!=null&&I.unshift(o(a,ne,$))):y||(ne=Pt(a,E),ne!=null&&I.push(o(a,ne,$)))),a=a.return}I.length!==0&&e.push({event:r,listeners:I})}var O=/\r\n?/g,X=/\u0000|\uFFFD/g;function le(e){return(typeof e=="string"?e:""+e).replace(O,`
`).replace(X,"")}function me(e,r,a){if(r=le(r),le(e)!==r&&a)throw Error(i(425))}function ve(){}var Te=null,Ge=null;function st(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ln=typeof setTimeout=="function"?setTimeout:void 0,rn=typeof clearTimeout=="function"?clearTimeout:void 0,Ln=typeof Promise=="function"?Promise:void 0,Sn=typeof queueMicrotask=="function"?queueMicrotask:typeof Ln<"u"?function(e){return Ln.resolve(null).then(e).catch(Xi)}:ln;function Xi(e){setTimeout(function(){throw e})}function ja(e,r){var a=r,h=0;do{var y=a.nextSibling;if(e.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"){if(h===0){e.removeChild(y),nr(r);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=y}while(a);nr(r)}function Yr(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return e}function rc(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return e;r--}else a==="/$"&&r++}e=e.previousSibling}return null}var mi=Math.random().toString(36).slice(2),xr="__reactFiber$"+mi,Ji="__reactProps$"+mi,St="__reactContainer$"+mi,eo="__reactEvents$"+mi,Zd="__reactListeners$"+mi,Wd="__reactHandles$"+mi;function gi(e){var r=e[xr];if(r)return r;for(var a=e.parentNode;a;){if(r=a[St]||a[xr]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(e=rc(e);e!==null;){if(a=e[xr])return a;e=rc(e)}return r}e=a,a=e.parentNode}return null}function xi(e){return e=e[xr]||e[St],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ai(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(i(33))}function Ns(e){return e[Ji]||null}var qd=[],Fs=-1;function to(e){return{current:e}}function Ot(e){0>Fs||(e.current=qd[Fs],qd[Fs]=null,Fs--)}function Mt(e,r){Fs++,qd[Fs]=e.current,e.current=r}var no={},Bn=to(no),Zn=to(!1),Fo=no;function Ls(e,r){var a=e.type.contextTypes;if(!a)return no;var h=e.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===r)return h.__reactInternalMemoizedMaskedChildContext;var y={},E;for(E in a)y[E]=r[E];return h&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=y),y}function Wn(e){return e=e.childContextTypes,e!=null}function ic(){Ot(Zn),Ot(Bn)}function xh(e,r,a){if(Bn.current!==no)throw Error(i(168));Mt(Bn,r),Mt(Zn,a)}function Ah(e,r,a){var h=e.stateNode;if(r=r.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var y in h)if(!(y in r))throw Error(i(108,se(e)||"Unknown",y));return H({},a,h)}function oc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||no,Fo=Bn.current,Mt(Bn,e),Mt(Zn,Zn.current),!0}function vh(e,r,a){var h=e.stateNode;if(!h)throw Error(i(169));a?(e=Ah(e,r,Fo),h.__reactInternalMemoizedMergedChildContext=e,Ot(Zn),Ot(Bn),Mt(Bn,e)):Ot(Zn),Mt(Zn,a)}var vi=null,sc=!1,Gd=!1;function yh(e){vi===null?vi=[e]:vi.push(e)}function Lv(e){sc=!0,yh(e)}function ro(){if(!Gd&&vi!==null){Gd=!0;var e=0,r=_t;try{var a=vi;for(_t=1;e<a.length;e++){var h=a[e];do h=h(!0);while(h!==null)}vi=null,sc=!1}catch(y){throw vi!==null&&(vi=vi.slice(e+1)),Nl(pa,ro),y}finally{_t=r,Gd=!1}}return null}var Ms=[],Is=0,ac=null,lc=0,Ar=[],vr=0,Lo=null,yi=1,_i="";function Mo(e,r){Ms[Is++]=lc,Ms[Is++]=ac,ac=e,lc=r}function _h(e,r,a){Ar[vr++]=yi,Ar[vr++]=_i,Ar[vr++]=Lo,Lo=e;var h=yi;e=_i;var y=32-it(h)-1;h&=~(1<<y),a+=1;var E=32-it(r)+y;if(30<E){var I=y-y%5;E=(h&(1<<I)-1).toString(32),h>>=I,y-=I,yi=1<<32-it(r)+y|a<<y|h,_i=E+e}else yi=1<<E|a<<y|h,_i=e}function $d(e){e.return!==null&&(Mo(e,1),_h(e,1,0))}function Kd(e){for(;e===ac;)ac=Ms[--Is],Ms[Is]=null,lc=Ms[--Is],Ms[Is]=null;for(;e===Lo;)Lo=Ar[--vr],Ar[vr]=null,_i=Ar[--vr],Ar[vr]=null,yi=Ar[--vr],Ar[vr]=null}var ar=null,lr=null,Vt=!1,Nr=null;function wh(e,r){var a=br(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=e,r=e.deletions,r===null?(e.deletions=[a],e.flags|=16):r.push(a)}function bh(e,r){switch(e.tag){case 5:var a=e.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(e.stateNode=r,ar=e,lr=Yr(r.firstChild),!0):!1;case 6:return r=e.pendingProps===""||r.nodeType!==3?null:r,r!==null?(e.stateNode=r,ar=e,lr=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=Lo!==null?{id:yi,overflow:_i}:null,e.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=br(18,null,null,0),a.stateNode=r,a.return=e,e.child=a,ar=e,lr=null,!0):!1;default:return!1}}function Qd(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Yd(e){if(Vt){var r=lr;if(r){var a=r;if(!bh(e,r)){if(Qd(e))throw Error(i(418));r=Yr(a.nextSibling);var h=ar;r&&bh(e,r)?wh(h,a):(e.flags=e.flags&-4097|2,Vt=!1,ar=e)}}else{if(Qd(e))throw Error(i(418));e.flags=e.flags&-4097|2,Vt=!1,ar=e}}}function Ch(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ar=e}function cc(e){if(e!==ar)return!1;if(!Vt)return Ch(e),Vt=!0,!1;var r;if((r=e.tag!==3)&&!(r=e.tag!==5)&&(r=e.type,r=r!=="head"&&r!=="body"&&!st(e.type,e.memoizedProps)),r&&(r=lr)){if(Qd(e))throw Eh(),Error(i(418));for(;r;)wh(e,r),r=Yr(r.nextSibling)}if(Ch(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,r=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"){if(r===0){lr=Yr(e.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}e=e.nextSibling}lr=null}}else lr=ar?Yr(e.stateNode.nextSibling):null;return!0}function Eh(){for(var e=lr;e;)e=Yr(e.nextSibling)}function Os(){lr=ar=null,Vt=!1}function Xd(e){Nr===null?Nr=[e]:Nr.push(e)}var Mv=F.ReactCurrentBatchConfig;function za(e,r,a){if(e=a.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(i(309));var h=a.stateNode}if(!h)throw Error(i(147,e));var y=h,E=""+e;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===E?r.ref:(r=function(I){var $=y.refs;I===null?delete $[E]:$[E]=I},r._stringRef=E,r)}if(typeof e!="string")throw Error(i(284));if(!a._owner)throw Error(i(290,e))}return e}function uc(e,r){throw e=Object.prototype.toString.call(r),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}function kh(e){var r=e._init;return r(e._payload)}function Sh(e){function r(ce,re){if(e){var fe=ce.deletions;fe===null?(ce.deletions=[re],ce.flags|=16):fe.push(re)}}function a(ce,re){if(!e)return null;for(;re!==null;)r(ce,re),re=re.sibling;return null}function h(ce,re){for(ce=new Map;re!==null;)re.key!==null?ce.set(re.key,re):ce.set(re.index,re),re=re.sibling;return ce}function y(ce,re){return ce=fo(ce,re),ce.index=0,ce.sibling=null,ce}function E(ce,re,fe){return ce.index=fe,e?(fe=ce.alternate,fe!==null?(fe=fe.index,fe<re?(ce.flags|=2,re):fe):(ce.flags|=2,re)):(ce.flags|=1048576,re)}function I(ce){return e&&ce.alternate===null&&(ce.flags|=2),ce}function $(ce,re,fe,Se){return re===null||re.tag!==6?(re=Zf(fe,ce.mode,Se),re.return=ce,re):(re=y(re,fe),re.return=ce,re)}function ne(ce,re,fe,Se){var Ze=fe.type;return Ze===U?we(ce,re,fe.props.children,Se,fe.key):re!==null&&(re.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===Y&&kh(Ze)===re.type)?(Se=y(re,fe.props),Se.ref=za(ce,re,fe),Se.return=ce,Se):(Se=Fc(fe.type,fe.key,fe.props,null,ce.mode,Se),Se.ref=za(ce,re,fe),Se.return=ce,Se)}function ge(ce,re,fe,Se){return re===null||re.tag!==4||re.stateNode.containerInfo!==fe.containerInfo||re.stateNode.implementation!==fe.implementation?(re=Wf(fe,ce.mode,Se),re.return=ce,re):(re=y(re,fe.children||[]),re.return=ce,re)}function we(ce,re,fe,Se,Ze){return re===null||re.tag!==7?(re=Zo(fe,ce.mode,Se,Ze),re.return=ce,re):(re=y(re,fe),re.return=ce,re)}function be(ce,re,fe){if(typeof re=="string"&&re!==""||typeof re=="number")return re=Zf(""+re,ce.mode,fe),re.return=ce,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case M:return fe=Fc(re.type,re.key,re.props,null,ce.mode,fe),fe.ref=za(ce,null,re),fe.return=ce,fe;case z:return re=Wf(re,ce.mode,fe),re.return=ce,re;case Y:var Se=re._init;return be(ce,Se(re._payload),fe)}if(et(re)||ae(re))return re=Zo(re,ce.mode,fe,null),re.return=ce,re;uc(ce,re)}return null}function ye(ce,re,fe,Se){var Ze=re!==null?re.key:null;if(typeof fe=="string"&&fe!==""||typeof fe=="number")return Ze!==null?null:$(ce,re,""+fe,Se);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case M:return fe.key===Ze?ne(ce,re,fe,Se):null;case z:return fe.key===Ze?ge(ce,re,fe,Se):null;case Y:return Ze=fe._init,ye(ce,re,Ze(fe._payload),Se)}if(et(fe)||ae(fe))return Ze!==null?null:we(ce,re,fe,Se,null);uc(ce,fe)}return null}function Le(ce,re,fe,Se,Ze){if(typeof Se=="string"&&Se!==""||typeof Se=="number")return ce=ce.get(fe)||null,$(re,ce,""+Se,Ze);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case M:return ce=ce.get(Se.key===null?fe:Se.key)||null,ne(re,ce,Se,Ze);case z:return ce=ce.get(Se.key===null?fe:Se.key)||null,ge(re,ce,Se,Ze);case Y:var $e=Se._init;return Le(ce,re,fe,$e(Se._payload),Ze)}if(et(Se)||ae(Se))return ce=ce.get(fe)||null,we(re,ce,Se,Ze,null);uc(re,Se)}return null}function Oe(ce,re,fe,Se){for(var Ze=null,$e=null,Ke=re,Je=re=0,gn=null;Ke!==null&&Je<fe.length;Je++){Ke.index>Je?(gn=Ke,Ke=null):gn=Ke.sibling;var Et=ye(ce,Ke,fe[Je],Se);if(Et===null){Ke===null&&(Ke=gn);break}e&&Ke&&Et.alternate===null&&r(ce,Ke),re=E(Et,re,Je),$e===null?Ze=Et:$e.sibling=Et,$e=Et,Ke=gn}if(Je===fe.length)return a(ce,Ke),Vt&&Mo(ce,Je),Ze;if(Ke===null){for(;Je<fe.length;Je++)Ke=be(ce,fe[Je],Se),Ke!==null&&(re=E(Ke,re,Je),$e===null?Ze=Ke:$e.sibling=Ke,$e=Ke);return Vt&&Mo(ce,Je),Ze}for(Ke=h(ce,Ke);Je<fe.length;Je++)gn=Le(Ke,ce,Je,fe[Je],Se),gn!==null&&(e&&gn.alternate!==null&&Ke.delete(gn.key===null?Je:gn.key),re=E(gn,re,Je),$e===null?Ze=gn:$e.sibling=gn,$e=gn);return e&&Ke.forEach(function(ho){return r(ce,ho)}),Vt&&Mo(ce,Je),Ze}function Ve(ce,re,fe,Se){var Ze=ae(fe);if(typeof Ze!="function")throw Error(i(150));if(fe=Ze.call(fe),fe==null)throw Error(i(151));for(var $e=Ze=null,Ke=re,Je=re=0,gn=null,Et=fe.next();Ke!==null&&!Et.done;Je++,Et=fe.next()){Ke.index>Je?(gn=Ke,Ke=null):gn=Ke.sibling;var ho=ye(ce,Ke,Et.value,Se);if(ho===null){Ke===null&&(Ke=gn);break}e&&Ke&&ho.alternate===null&&r(ce,Ke),re=E(ho,re,Je),$e===null?Ze=ho:$e.sibling=ho,$e=ho,Ke=gn}if(Et.done)return a(ce,Ke),Vt&&Mo(ce,Je),Ze;if(Ke===null){for(;!Et.done;Je++,Et=fe.next())Et=be(ce,Et.value,Se),Et!==null&&(re=E(Et,re,Je),$e===null?Ze=Et:$e.sibling=Et,$e=Et);return Vt&&Mo(ce,Je),Ze}for(Ke=h(ce,Ke);!Et.done;Je++,Et=fe.next())Et=Le(Ke,ce,Je,Et.value,Se),Et!==null&&(e&&Et.alternate!==null&&Ke.delete(Et.key===null?Je:Et.key),re=E(Et,re,Je),$e===null?Ze=Et:$e.sibling=Et,$e=Et);return e&&Ke.forEach(function(my){return r(ce,my)}),Vt&&Mo(ce,Je),Ze}function tn(ce,re,fe,Se){if(typeof fe=="object"&&fe!==null&&fe.type===U&&fe.key===null&&(fe=fe.props.children),typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case M:e:{for(var Ze=fe.key,$e=re;$e!==null;){if($e.key===Ze){if(Ze=fe.type,Ze===U){if($e.tag===7){a(ce,$e.sibling),re=y($e,fe.props.children),re.return=ce,ce=re;break e}}else if($e.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===Y&&kh(Ze)===$e.type){a(ce,$e.sibling),re=y($e,fe.props),re.ref=za(ce,$e,fe),re.return=ce,ce=re;break e}a(ce,$e);break}else r(ce,$e);$e=$e.sibling}fe.type===U?(re=Zo(fe.props.children,ce.mode,Se,fe.key),re.return=ce,ce=re):(Se=Fc(fe.type,fe.key,fe.props,null,ce.mode,Se),Se.ref=za(ce,re,fe),Se.return=ce,ce=Se)}return I(ce);case z:e:{for($e=fe.key;re!==null;){if(re.key===$e)if(re.tag===4&&re.stateNode.containerInfo===fe.containerInfo&&re.stateNode.implementation===fe.implementation){a(ce,re.sibling),re=y(re,fe.children||[]),re.return=ce,ce=re;break e}else{a(ce,re);break}else r(ce,re);re=re.sibling}re=Wf(fe,ce.mode,Se),re.return=ce,ce=re}return I(ce);case Y:return $e=fe._init,tn(ce,re,$e(fe._payload),Se)}if(et(fe))return Oe(ce,re,fe,Se);if(ae(fe))return Ve(ce,re,fe,Se);uc(ce,fe)}return typeof fe=="string"&&fe!==""||typeof fe=="number"?(fe=""+fe,re!==null&&re.tag===6?(a(ce,re.sibling),re=y(re,fe),re.return=ce,ce=re):(a(ce,re),re=Zf(fe,ce.mode,Se),re.return=ce,ce=re),I(ce)):a(ce,re)}return tn}var js=Sh(!0),Bh=Sh(!1),dc=to(null),fc=null,zs=null,Jd=null;function ef(){Jd=zs=fc=null}function tf(e){var r=dc.current;Ot(dc),e._currentValue=r}function nf(e,r,a){for(;e!==null;){var h=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,h!==null&&(h.childLanes|=r)):h!==null&&(h.childLanes&r)!==r&&(h.childLanes|=r),e===a)break;e=e.return}}function Hs(e,r){fc=e,Jd=zs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&r)!==0&&(qn=!0),e.firstContext=null)}function yr(e){var r=e._currentValue;if(Jd!==e)if(e={context:e,memoizedValue:r,next:null},zs===null){if(fc===null)throw Error(i(308));zs=e,fc.dependencies={lanes:0,firstContext:e}}else zs=zs.next=e;return r}var Io=null;function rf(e){Io===null?Io=[e]:Io.push(e)}function Ph(e,r,a,h){var y=r.interleaved;return y===null?(a.next=a,rf(r)):(a.next=y.next,y.next=a),r.interleaved=a,wi(e,h)}function wi(e,r){e.lanes|=r;var a=e.alternate;for(a!==null&&(a.lanes|=r),a=e,e=e.return;e!==null;)e.childLanes|=r,a=e.alternate,a!==null&&(a.childLanes|=r),a=e,e=e.return;return a.tag===3?a.stateNode:null}var io=!1;function of(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Th(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bi(e,r){return{eventTime:e,lane:r,tag:0,payload:null,callback:null,next:null}}function oo(e,r,a){var h=e.updateQueue;if(h===null)return null;if(h=h.shared,(Ct&2)!==0){var y=h.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),h.pending=r,wi(e,a)}return y=h.interleaved,y===null?(r.next=r,rf(h)):(r.next=y.next,y.next=r),h.interleaved=r,wi(e,a)}function hc(e,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var h=r.lanes;h&=e.pendingLanes,a|=h,r.lanes=a,Br(e,a)}}function Dh(e,r){var a=e.updateQueue,h=e.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var y=null,E=null;if(a=a.firstBaseUpdate,a!==null){do{var I={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};E===null?y=E=I:E=E.next=I,a=a.next}while(a!==null);E===null?y=E=r:E=E.next=r}else y=E=r;a={baseState:h.baseState,firstBaseUpdate:y,lastBaseUpdate:E,shared:h.shared,effects:h.effects},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=r:e.next=r,a.lastBaseUpdate=r}function pc(e,r,a,h){var y=e.updateQueue;io=!1;var E=y.firstBaseUpdate,I=y.lastBaseUpdate,$=y.shared.pending;if($!==null){y.shared.pending=null;var ne=$,ge=ne.next;ne.next=null,I===null?E=ge:I.next=ge,I=ne;var we=e.alternate;we!==null&&(we=we.updateQueue,$=we.lastBaseUpdate,$!==I&&($===null?we.firstBaseUpdate=ge:$.next=ge,we.lastBaseUpdate=ne))}if(E!==null){var be=y.baseState;I=0,we=ge=ne=null,$=E;do{var ye=$.lane,Le=$.eventTime;if((h&ye)===ye){we!==null&&(we=we.next={eventTime:Le,lane:0,tag:$.tag,payload:$.payload,callback:$.callback,next:null});e:{var Oe=e,Ve=$;switch(ye=r,Le=a,Ve.tag){case 1:if(Oe=Ve.payload,typeof Oe=="function"){be=Oe.call(Le,be,ye);break e}be=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Ve.payload,ye=typeof Oe=="function"?Oe.call(Le,be,ye):Oe,ye==null)break e;be=H({},be,ye);break e;case 2:io=!0}}$.callback!==null&&$.lane!==0&&(e.flags|=64,ye=y.effects,ye===null?y.effects=[$]:ye.push($))}else Le={eventTime:Le,lane:ye,tag:$.tag,payload:$.payload,callback:$.callback,next:null},we===null?(ge=we=Le,ne=be):we=we.next=Le,I|=ye;if($=$.next,$===null){if($=y.shared.pending,$===null)break;ye=$,$=ye.next,ye.next=null,y.lastBaseUpdate=ye,y.shared.pending=null}}while(!0);if(we===null&&(ne=be),y.baseState=ne,y.firstBaseUpdate=ge,y.lastBaseUpdate=we,r=y.shared.interleaved,r!==null){y=r;do I|=y.lane,y=y.next;while(y!==r)}else E===null&&(y.shared.lanes=0);zo|=I,e.lanes=I,e.memoizedState=be}}function Rh(e,r,a){if(e=r.effects,r.effects=null,e!==null)for(r=0;r<e.length;r++){var h=e[r],y=h.callback;if(y!==null){if(h.callback=null,h=a,typeof y!="function")throw Error(i(191,y));y.call(h)}}}var Ha={},Xr=to(Ha),Va=to(Ha),Ua=to(Ha);function Oo(e){if(e===Ha)throw Error(i(174));return e}function sf(e,r){switch(Mt(Ua,r),Mt(Va,e),Mt(Xr,Ha),e=r.nodeType,e){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Ut(null,"");break;default:e=e===8?r.parentNode:r,r=e.namespaceURI||null,e=e.tagName,r=Ut(r,e)}Ot(Xr),Mt(Xr,r)}function Vs(){Ot(Xr),Ot(Va),Ot(Ua)}function Nh(e){Oo(Ua.current);var r=Oo(Xr.current),a=Ut(r,e.type);r!==a&&(Mt(Va,e),Mt(Xr,a))}function af(e){Va.current===e&&(Ot(Xr),Ot(Va))}var qt=to(0);function mc(e){for(var r=e;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var lf=[];function cf(){for(var e=0;e<lf.length;e++)lf[e]._workInProgressVersionPrimary=null;lf.length=0}var gc=F.ReactCurrentDispatcher,uf=F.ReactCurrentBatchConfig,jo=0,Gt=null,cn=null,pn=null,xc=!1,Za=!1,Wa=0,Iv=0;function Pn(){throw Error(i(321))}function df(e,r){if(r===null)return!1;for(var a=0;a<r.length&&a<e.length;a++)if(!or(e[a],r[a]))return!1;return!0}function ff(e,r,a,h,y,E){if(jo=E,Gt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,gc.current=e===null||e.memoizedState===null?Hv:Vv,e=a(h,y),Za){E=0;do{if(Za=!1,Wa=0,25<=E)throw Error(i(301));E+=1,pn=cn=null,r.updateQueue=null,gc.current=Uv,e=a(h,y)}while(Za)}if(gc.current=yc,r=cn!==null&&cn.next!==null,jo=0,pn=cn=Gt=null,xc=!1,r)throw Error(i(300));return e}function hf(){var e=Wa!==0;return Wa=0,e}function Jr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?Gt.memoizedState=pn=e:pn=pn.next=e,pn}function _r(){if(cn===null){var e=Gt.alternate;e=e!==null?e.memoizedState:null}else e=cn.next;var r=pn===null?Gt.memoizedState:pn.next;if(r!==null)pn=r,cn=e;else{if(e===null)throw Error(i(310));cn=e,e={memoizedState:cn.memoizedState,baseState:cn.baseState,baseQueue:cn.baseQueue,queue:cn.queue,next:null},pn===null?Gt.memoizedState=pn=e:pn=pn.next=e}return pn}function qa(e,r){return typeof r=="function"?r(e):r}function pf(e){var r=_r(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=e;var h=cn,y=h.baseQueue,E=a.pending;if(E!==null){if(y!==null){var I=y.next;y.next=E.next,E.next=I}h.baseQueue=y=E,a.pending=null}if(y!==null){E=y.next,h=h.baseState;var $=I=null,ne=null,ge=E;do{var we=ge.lane;if((jo&we)===we)ne!==null&&(ne=ne.next={lane:0,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),h=ge.hasEagerState?ge.eagerState:e(h,ge.action);else{var be={lane:we,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null};ne===null?($=ne=be,I=h):ne=ne.next=be,Gt.lanes|=we,zo|=we}ge=ge.next}while(ge!==null&&ge!==E);ne===null?I=h:ne.next=$,or(h,r.memoizedState)||(qn=!0),r.memoizedState=h,r.baseState=I,r.baseQueue=ne,a.lastRenderedState=h}if(e=a.interleaved,e!==null){y=e;do E=y.lane,Gt.lanes|=E,zo|=E,y=y.next;while(y!==e)}else y===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function mf(e){var r=_r(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=e;var h=a.dispatch,y=a.pending,E=r.memoizedState;if(y!==null){a.pending=null;var I=y=y.next;do E=e(E,I.action),I=I.next;while(I!==y);or(E,r.memoizedState)||(qn=!0),r.memoizedState=E,r.baseQueue===null&&(r.baseState=E),a.lastRenderedState=E}return[E,h]}function Fh(){}function Lh(e,r){var a=Gt,h=_r(),y=r(),E=!or(h.memoizedState,y);if(E&&(h.memoizedState=y,qn=!0),h=h.queue,gf(Oh.bind(null,a,h,e),[e]),h.getSnapshot!==r||E||pn!==null&&pn.memoizedState.tag&1){if(a.flags|=2048,Ga(9,Ih.bind(null,a,h,y,r),void 0,null),mn===null)throw Error(i(349));(jo&30)!==0||Mh(a,r,y)}return y}function Mh(e,r,a){e.flags|=16384,e={getSnapshot:r,value:a},r=Gt.updateQueue,r===null?(r={lastEffect:null,stores:null},Gt.updateQueue=r,r.stores=[e]):(a=r.stores,a===null?r.stores=[e]:a.push(e))}function Ih(e,r,a,h){r.value=a,r.getSnapshot=h,jh(r)&&zh(e)}function Oh(e,r,a){return a(function(){jh(r)&&zh(e)})}function jh(e){var r=e.getSnapshot;e=e.value;try{var a=r();return!or(e,a)}catch{return!0}}function zh(e){var r=wi(e,1);r!==null&&Ir(r,e,1,-1)}function Hh(e){var r=Jr();return typeof e=="function"&&(e=e()),r.memoizedState=r.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:e},r.queue=e,e=e.dispatch=zv.bind(null,Gt,e),[r.memoizedState,e]}function Ga(e,r,a,h){return e={tag:e,create:r,destroy:a,deps:h,next:null},r=Gt.updateQueue,r===null?(r={lastEffect:null,stores:null},Gt.updateQueue=r,r.lastEffect=e.next=e):(a=r.lastEffect,a===null?r.lastEffect=e.next=e:(h=a.next,a.next=e,e.next=h,r.lastEffect=e)),e}function Vh(){return _r().memoizedState}function Ac(e,r,a,h){var y=Jr();Gt.flags|=e,y.memoizedState=Ga(1|r,a,void 0,h===void 0?null:h)}function vc(e,r,a,h){var y=_r();h=h===void 0?null:h;var E=void 0;if(cn!==null){var I=cn.memoizedState;if(E=I.destroy,h!==null&&df(h,I.deps)){y.memoizedState=Ga(r,a,E,h);return}}Gt.flags|=e,y.memoizedState=Ga(1|r,a,E,h)}function Uh(e,r){return Ac(8390656,8,e,r)}function gf(e,r){return vc(2048,8,e,r)}function Zh(e,r){return vc(4,2,e,r)}function Wh(e,r){return vc(4,4,e,r)}function qh(e,r){if(typeof r=="function")return e=e(),r(e),function(){r(null)};if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function Gh(e,r,a){return a=a!=null?a.concat([e]):null,vc(4,4,qh.bind(null,r,e),a)}function xf(){}function $h(e,r){var a=_r();r=r===void 0?null:r;var h=a.memoizedState;return h!==null&&r!==null&&df(r,h[1])?h[0]:(a.memoizedState=[e,r],e)}function Kh(e,r){var a=_r();r=r===void 0?null:r;var h=a.memoizedState;return h!==null&&r!==null&&df(r,h[1])?h[0]:(e=e(),a.memoizedState=[e,r],e)}function Qh(e,r,a){return(jo&21)===0?(e.baseState&&(e.baseState=!1,qn=!0),e.memoizedState=a):(or(a,r)||(a=Ll(),Gt.lanes|=a,zo|=a,e.baseState=!0),r)}function Ov(e,r){var a=_t;_t=a!==0&&4>a?a:4,e(!0);var h=uf.transition;uf.transition={};try{e(!1),r()}finally{_t=a,uf.transition=h}}function Yh(){return _r().memoizedState}function jv(e,r,a){var h=co(e);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},Xh(e))Jh(r,a);else if(a=Ph(e,r,a,h),a!==null){var y=In();Ir(a,e,h,y),ep(a,r,h)}}function zv(e,r,a){var h=co(e),y={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(Xh(e))Jh(r,y);else{var E=e.alternate;if(e.lanes===0&&(E===null||E.lanes===0)&&(E=r.lastRenderedReducer,E!==null))try{var I=r.lastRenderedState,$=E(I,a);if(y.hasEagerState=!0,y.eagerState=$,or($,I)){var ne=r.interleaved;ne===null?(y.next=y,rf(r)):(y.next=ne.next,ne.next=y),r.interleaved=y;return}}catch{}finally{}a=Ph(e,r,y,h),a!==null&&(y=In(),Ir(a,e,h,y),ep(a,r,h))}}function Xh(e){var r=e.alternate;return e===Gt||r!==null&&r===Gt}function Jh(e,r){Za=xc=!0;var a=e.pending;a===null?r.next=r:(r.next=a.next,a.next=r),e.pending=r}function ep(e,r,a){if((a&4194240)!==0){var h=r.lanes;h&=e.pendingLanes,a|=h,r.lanes=a,Br(e,a)}}var yc={readContext:yr,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useInsertionEffect:Pn,useLayoutEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useMutableSource:Pn,useSyncExternalStore:Pn,useId:Pn,unstable_isNewReconciler:!1},Hv={readContext:yr,useCallback:function(e,r){return Jr().memoizedState=[e,r===void 0?null:r],e},useContext:yr,useEffect:Uh,useImperativeHandle:function(e,r,a){return a=a!=null?a.concat([e]):null,Ac(4194308,4,qh.bind(null,r,e),a)},useLayoutEffect:function(e,r){return Ac(4194308,4,e,r)},useInsertionEffect:function(e,r){return Ac(4,2,e,r)},useMemo:function(e,r){var a=Jr();return r=r===void 0?null:r,e=e(),a.memoizedState=[e,r],e},useReducer:function(e,r,a){var h=Jr();return r=a!==void 0?a(r):r,h.memoizedState=h.baseState=r,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},h.queue=e,e=e.dispatch=jv.bind(null,Gt,e),[h.memoizedState,e]},useRef:function(e){var r=Jr();return e={current:e},r.memoizedState=e},useState:Hh,useDebugValue:xf,useDeferredValue:function(e){return Jr().memoizedState=e},useTransition:function(){var e=Hh(!1),r=e[0];return e=Ov.bind(null,e[1]),Jr().memoizedState=e,[r,e]},useMutableSource:function(){},useSyncExternalStore:function(e,r,a){var h=Gt,y=Jr();if(Vt){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),mn===null)throw Error(i(349));(jo&30)!==0||Mh(h,r,a)}y.memoizedState=a;var E={value:a,getSnapshot:r};return y.queue=E,Uh(Oh.bind(null,h,E,e),[e]),h.flags|=2048,Ga(9,Ih.bind(null,h,E,a,r),void 0,null),a},useId:function(){var e=Jr(),r=mn.identifierPrefix;if(Vt){var a=_i,h=yi;a=(h&~(1<<32-it(h)-1)).toString(32)+a,r=":"+r+"R"+a,a=Wa++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=Iv++,r=":"+r+"r"+a.toString(32)+":";return e.memoizedState=r},unstable_isNewReconciler:!1},Vv={readContext:yr,useCallback:$h,useContext:yr,useEffect:gf,useImperativeHandle:Gh,useInsertionEffect:Zh,useLayoutEffect:Wh,useMemo:Kh,useReducer:pf,useRef:Vh,useState:function(){return pf(qa)},useDebugValue:xf,useDeferredValue:function(e){var r=_r();return Qh(r,cn.memoizedState,e)},useTransition:function(){var e=pf(qa)[0],r=_r().memoizedState;return[e,r]},useMutableSource:Fh,useSyncExternalStore:Lh,useId:Yh,unstable_isNewReconciler:!1},Uv={readContext:yr,useCallback:$h,useContext:yr,useEffect:gf,useImperativeHandle:Gh,useInsertionEffect:Zh,useLayoutEffect:Wh,useMemo:Kh,useReducer:mf,useRef:Vh,useState:function(){return mf(qa)},useDebugValue:xf,useDeferredValue:function(e){var r=_r();return cn===null?r.memoizedState=e:Qh(r,cn.memoizedState,e)},useTransition:function(){var e=mf(qa)[0],r=_r().memoizedState;return[e,r]},useMutableSource:Fh,useSyncExternalStore:Lh,useId:Yh,unstable_isNewReconciler:!1};function Fr(e,r){if(e&&e.defaultProps){r=H({},r),e=e.defaultProps;for(var a in e)r[a]===void 0&&(r[a]=e[a]);return r}return r}function Af(e,r,a,h){r=e.memoizedState,a=a(h,r),a=a==null?r:H({},r,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var _c={isMounted:function(e){return(e=e._reactInternals)?Ur(e)===e:!1},enqueueSetState:function(e,r,a){e=e._reactInternals;var h=In(),y=co(e),E=bi(h,y);E.payload=r,a!=null&&(E.callback=a),r=oo(e,E,y),r!==null&&(Ir(r,e,y,h),hc(r,e,y))},enqueueReplaceState:function(e,r,a){e=e._reactInternals;var h=In(),y=co(e),E=bi(h,y);E.tag=1,E.payload=r,a!=null&&(E.callback=a),r=oo(e,E,y),r!==null&&(Ir(r,e,y,h),hc(r,e,y))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var a=In(),h=co(e),y=bi(a,h);y.tag=2,r!=null&&(y.callback=r),r=oo(e,y,h),r!==null&&(Ir(r,e,h,a),hc(r,e,h))}};function tp(e,r,a,h,y,E,I){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(h,E,I):r.prototype&&r.prototype.isPureReactComponent?!$r(a,h)||!$r(y,E):!0}function np(e,r,a){var h=!1,y=no,E=r.contextType;return typeof E=="object"&&E!==null?E=yr(E):(y=Wn(r)?Fo:Bn.current,h=r.contextTypes,E=(h=h!=null)?Ls(e,y):no),r=new r(a,E),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=_c,e.stateNode=r,r._reactInternals=e,h&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=y,e.__reactInternalMemoizedMaskedChildContext=E),r}function rp(e,r,a,h){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,h),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,h),r.state!==e&&_c.enqueueReplaceState(r,r.state,null)}function vf(e,r,a,h){var y=e.stateNode;y.props=a,y.state=e.memoizedState,y.refs={},of(e);var E=r.contextType;typeof E=="object"&&E!==null?y.context=yr(E):(E=Wn(r)?Fo:Bn.current,y.context=Ls(e,E)),y.state=e.memoizedState,E=r.getDerivedStateFromProps,typeof E=="function"&&(Af(e,r,E,a),y.state=e.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(r=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),r!==y.state&&_c.enqueueReplaceState(y,y.state,null),pc(e,a,y,h),y.state=e.memoizedState),typeof y.componentDidMount=="function"&&(e.flags|=4194308)}function Us(e,r){try{var a="",h=r;do a+=pe(h),h=h.return;while(h);var y=a}catch(E){y=`
Error generating stack: `+E.message+`
`+E.stack}return{value:e,source:r,stack:y,digest:null}}function yf(e,r,a){return{value:e,source:null,stack:a??null,digest:r??null}}function _f(e,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var Zv=typeof WeakMap=="function"?WeakMap:Map;function ip(e,r,a){a=bi(-1,a),a.tag=3,a.payload={element:null};var h=r.value;return a.callback=function(){Bc||(Bc=!0,Mf=h),_f(e,r)},a}function op(e,r,a){a=bi(-1,a),a.tag=3;var h=e.type.getDerivedStateFromError;if(typeof h=="function"){var y=r.value;a.payload=function(){return h(y)},a.callback=function(){_f(e,r)}}var E=e.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(a.callback=function(){_f(e,r),typeof h!="function"&&(ao===null?ao=new Set([this]):ao.add(this));var I=r.stack;this.componentDidCatch(r.value,{componentStack:I!==null?I:""})}),a}function sp(e,r,a){var h=e.pingCache;if(h===null){h=e.pingCache=new Zv;var y=new Set;h.set(r,y)}else y=h.get(r),y===void 0&&(y=new Set,h.set(r,y));y.has(a)||(y.add(a),e=iy.bind(null,e,r,a),r.then(e,e))}function ap(e){do{var r;if((r=e.tag===13)&&(r=e.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return e;e=e.return}while(e!==null);return null}function lp(e,r,a,h,y){return(e.mode&1)===0?(e===r?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=bi(-1,1),r.tag=2,oo(a,r,1))),a.lanes|=1),e):(e.flags|=65536,e.lanes=y,e)}var Wv=F.ReactCurrentOwner,qn=!1;function Mn(e,r,a,h){r.child=e===null?Bh(r,null,a,h):js(r,e.child,a,h)}function cp(e,r,a,h,y){a=a.render;var E=r.ref;return Hs(r,y),h=ff(e,r,a,h,E,y),a=hf(),e!==null&&!qn?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~y,Ci(e,r,y)):(Vt&&a&&$d(r),r.flags|=1,Mn(e,r,h,y),r.child)}function up(e,r,a,h,y){if(e===null){var E=a.type;return typeof E=="function"&&!Uf(E)&&E.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=E,dp(e,r,E,h,y)):(e=Fc(a.type,null,h,r,r.mode,y),e.ref=r.ref,e.return=r,r.child=e)}if(E=e.child,(e.lanes&y)===0){var I=E.memoizedProps;if(a=a.compare,a=a!==null?a:$r,a(I,h)&&e.ref===r.ref)return Ci(e,r,y)}return r.flags|=1,e=fo(E,h),e.ref=r.ref,e.return=r,r.child=e}function dp(e,r,a,h,y){if(e!==null){var E=e.memoizedProps;if($r(E,h)&&e.ref===r.ref)if(qn=!1,r.pendingProps=h=E,(e.lanes&y)!==0)(e.flags&131072)!==0&&(qn=!0);else return r.lanes=e.lanes,Ci(e,r,y)}return wf(e,r,a,h,y)}function fp(e,r,a){var h=r.pendingProps,y=h.children,E=e!==null?e.memoizedState:null;if(h.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mt(Ws,cr),cr|=a;else{if((a&1073741824)===0)return e=E!==null?E.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:e,cachePool:null,transitions:null},r.updateQueue=null,Mt(Ws,cr),cr|=e,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=E!==null?E.baseLanes:a,Mt(Ws,cr),cr|=h}else E!==null?(h=E.baseLanes|a,r.memoizedState=null):h=a,Mt(Ws,cr),cr|=h;return Mn(e,r,y,a),r.child}function hp(e,r){var a=r.ref;(e===null&&a!==null||e!==null&&e.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function wf(e,r,a,h,y){var E=Wn(a)?Fo:Bn.current;return E=Ls(r,E),Hs(r,y),a=ff(e,r,a,h,E,y),h=hf(),e!==null&&!qn?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~y,Ci(e,r,y)):(Vt&&h&&$d(r),r.flags|=1,Mn(e,r,a,y),r.child)}function pp(e,r,a,h,y){if(Wn(a)){var E=!0;oc(r)}else E=!1;if(Hs(r,y),r.stateNode===null)bc(e,r),np(r,a,h),vf(r,a,h,y),h=!0;else if(e===null){var I=r.stateNode,$=r.memoizedProps;I.props=$;var ne=I.context,ge=a.contextType;typeof ge=="object"&&ge!==null?ge=yr(ge):(ge=Wn(a)?Fo:Bn.current,ge=Ls(r,ge));var we=a.getDerivedStateFromProps,be=typeof we=="function"||typeof I.getSnapshotBeforeUpdate=="function";be||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||($!==h||ne!==ge)&&rp(r,I,h,ge),io=!1;var ye=r.memoizedState;I.state=ye,pc(r,h,I,y),ne=r.memoizedState,$!==h||ye!==ne||Zn.current||io?(typeof we=="function"&&(Af(r,a,we,h),ne=r.memoizedState),($=io||tp(r,a,$,h,ye,ne,ge))?(be||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(r.flags|=4194308)):(typeof I.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=h,r.memoizedState=ne),I.props=h,I.state=ne,I.context=ge,h=$):(typeof I.componentDidMount=="function"&&(r.flags|=4194308),h=!1)}else{I=r.stateNode,Th(e,r),$=r.memoizedProps,ge=r.type===r.elementType?$:Fr(r.type,$),I.props=ge,be=r.pendingProps,ye=I.context,ne=a.contextType,typeof ne=="object"&&ne!==null?ne=yr(ne):(ne=Wn(a)?Fo:Bn.current,ne=Ls(r,ne));var Le=a.getDerivedStateFromProps;(we=typeof Le=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||($!==be||ye!==ne)&&rp(r,I,h,ne),io=!1,ye=r.memoizedState,I.state=ye,pc(r,h,I,y);var Oe=r.memoizedState;$!==be||ye!==Oe||Zn.current||io?(typeof Le=="function"&&(Af(r,a,Le,h),Oe=r.memoizedState),(ge=io||tp(r,a,ge,h,ye,Oe,ne)||!1)?(we||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(h,Oe,ne),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(h,Oe,ne)),typeof I.componentDidUpdate=="function"&&(r.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof I.componentDidUpdate!="function"||$===e.memoizedProps&&ye===e.memoizedState||(r.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||$===e.memoizedProps&&ye===e.memoizedState||(r.flags|=1024),r.memoizedProps=h,r.memoizedState=Oe),I.props=h,I.state=Oe,I.context=ne,h=ge):(typeof I.componentDidUpdate!="function"||$===e.memoizedProps&&ye===e.memoizedState||(r.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||$===e.memoizedProps&&ye===e.memoizedState||(r.flags|=1024),h=!1)}return bf(e,r,a,h,E,y)}function bf(e,r,a,h,y,E){hp(e,r);var I=(r.flags&128)!==0;if(!h&&!I)return y&&vh(r,a,!1),Ci(e,r,E);h=r.stateNode,Wv.current=r;var $=I&&typeof a.getDerivedStateFromError!="function"?null:h.render();return r.flags|=1,e!==null&&I?(r.child=js(r,e.child,null,E),r.child=js(r,null,$,E)):Mn(e,r,$,E),r.memoizedState=h.state,y&&vh(r,a,!0),r.child}function mp(e){var r=e.stateNode;r.pendingContext?xh(e,r.pendingContext,r.pendingContext!==r.context):r.context&&xh(e,r.context,!1),sf(e,r.containerInfo)}function gp(e,r,a,h,y){return Os(),Xd(y),r.flags|=256,Mn(e,r,a,h),r.child}var Cf={dehydrated:null,treeContext:null,retryLane:0};function Ef(e){return{baseLanes:e,cachePool:null,transitions:null}}function xp(e,r,a){var h=r.pendingProps,y=qt.current,E=!1,I=(r.flags&128)!==0,$;if(($=I)||($=e!==null&&e.memoizedState===null?!1:(y&2)!==0),$?(E=!0,r.flags&=-129):(e===null||e.memoizedState!==null)&&(y|=1),Mt(qt,y&1),e===null)return Yd(r),e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((r.mode&1)===0?r.lanes=1:e.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(I=h.children,e=h.fallback,E?(h=r.mode,E=r.child,I={mode:"hidden",children:I},(h&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=I):E=Lc(I,h,0,null),e=Zo(e,h,a,null),E.return=r,e.return=r,E.sibling=e,r.child=E,r.child.memoizedState=Ef(a),r.memoizedState=Cf,e):kf(r,I));if(y=e.memoizedState,y!==null&&($=y.dehydrated,$!==null))return qv(e,r,I,h,$,y,a);if(E){E=h.fallback,I=r.mode,y=e.child,$=y.sibling;var ne={mode:"hidden",children:h.children};return(I&1)===0&&r.child!==y?(h=r.child,h.childLanes=0,h.pendingProps=ne,r.deletions=null):(h=fo(y,ne),h.subtreeFlags=y.subtreeFlags&14680064),$!==null?E=fo($,E):(E=Zo(E,I,a,null),E.flags|=2),E.return=r,h.return=r,h.sibling=E,r.child=h,h=E,E=r.child,I=e.child.memoizedState,I=I===null?Ef(a):{baseLanes:I.baseLanes|a,cachePool:null,transitions:I.transitions},E.memoizedState=I,E.childLanes=e.childLanes&~a,r.memoizedState=Cf,h}return E=e.child,e=E.sibling,h=fo(E,{mode:"visible",children:h.children}),(r.mode&1)===0&&(h.lanes=a),h.return=r,h.sibling=null,e!==null&&(a=r.deletions,a===null?(r.deletions=[e],r.flags|=16):a.push(e)),r.child=h,r.memoizedState=null,h}function kf(e,r){return r=Lc({mode:"visible",children:r},e.mode,0,null),r.return=e,e.child=r}function wc(e,r,a,h){return h!==null&&Xd(h),js(r,e.child,null,a),e=kf(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function qv(e,r,a,h,y,E,I){if(a)return r.flags&256?(r.flags&=-257,h=yf(Error(i(422))),wc(e,r,I,h)):r.memoizedState!==null?(r.child=e.child,r.flags|=128,null):(E=h.fallback,y=r.mode,h=Lc({mode:"visible",children:h.children},y,0,null),E=Zo(E,y,I,null),E.flags|=2,h.return=r,E.return=r,h.sibling=E,r.child=h,(r.mode&1)!==0&&js(r,e.child,null,I),r.child.memoizedState=Ef(I),r.memoizedState=Cf,E);if((r.mode&1)===0)return wc(e,r,I,null);if(y.data==="$!"){if(h=y.nextSibling&&y.nextSibling.dataset,h)var $=h.dgst;return h=$,E=Error(i(419)),h=yf(E,h,void 0),wc(e,r,I,h)}if($=(I&e.childLanes)!==0,qn||$){if(h=mn,h!==null){switch(I&-I){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(h.suspendedLanes|I))!==0?0:y,y!==0&&y!==E.retryLane&&(E.retryLane=y,wi(e,y),Ir(h,e,y,-1))}return Vf(),h=yf(Error(i(421))),wc(e,r,I,h)}return y.data==="$?"?(r.flags|=128,r.child=e.child,r=oy.bind(null,e),y._reactRetry=r,null):(e=E.treeContext,lr=Yr(y.nextSibling),ar=r,Vt=!0,Nr=null,e!==null&&(Ar[vr++]=yi,Ar[vr++]=_i,Ar[vr++]=Lo,yi=e.id,_i=e.overflow,Lo=r),r=kf(r,h.children),r.flags|=4096,r)}function Ap(e,r,a){e.lanes|=r;var h=e.alternate;h!==null&&(h.lanes|=r),nf(e.return,r,a)}function Sf(e,r,a,h,y){var E=e.memoizedState;E===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:y}:(E.isBackwards=r,E.rendering=null,E.renderingStartTime=0,E.last=h,E.tail=a,E.tailMode=y)}function vp(e,r,a){var h=r.pendingProps,y=h.revealOrder,E=h.tail;if(Mn(e,r,h.children,a),h=qt.current,(h&2)!==0)h=h&1|2,r.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ap(e,a,r);else if(e.tag===19)Ap(e,a,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}h&=1}if(Mt(qt,h),(r.mode&1)===0)r.memoizedState=null;else switch(y){case"forwards":for(a=r.child,y=null;a!==null;)e=a.alternate,e!==null&&mc(e)===null&&(y=a),a=a.sibling;a=y,a===null?(y=r.child,r.child=null):(y=a.sibling,a.sibling=null),Sf(r,!1,y,a,E);break;case"backwards":for(a=null,y=r.child,r.child=null;y!==null;){if(e=y.alternate,e!==null&&mc(e)===null){r.child=y;break}e=y.sibling,y.sibling=a,a=y,y=e}Sf(r,!0,a,null,E);break;case"together":Sf(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function bc(e,r){(r.mode&1)===0&&e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2)}function Ci(e,r,a){if(e!==null&&(r.dependencies=e.dependencies),zo|=r.lanes,(a&r.childLanes)===0)return null;if(e!==null&&r.child!==e.child)throw Error(i(153));if(r.child!==null){for(e=r.child,a=fo(e,e.pendingProps),r.child=a,a.return=r;e.sibling!==null;)e=e.sibling,a=a.sibling=fo(e,e.pendingProps),a.return=r;a.sibling=null}return r.child}function Gv(e,r,a){switch(r.tag){case 3:mp(r),Os();break;case 5:Nh(r);break;case 1:Wn(r.type)&&oc(r);break;case 4:sf(r,r.stateNode.containerInfo);break;case 10:var h=r.type._context,y=r.memoizedProps.value;Mt(dc,h._currentValue),h._currentValue=y;break;case 13:if(h=r.memoizedState,h!==null)return h.dehydrated!==null?(Mt(qt,qt.current&1),r.flags|=128,null):(a&r.child.childLanes)!==0?xp(e,r,a):(Mt(qt,qt.current&1),e=Ci(e,r,a),e!==null?e.sibling:null);Mt(qt,qt.current&1);break;case 19:if(h=(a&r.childLanes)!==0,(e.flags&128)!==0){if(h)return vp(e,r,a);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Mt(qt,qt.current),h)break;return null;case 22:case 23:return r.lanes=0,fp(e,r,a)}return Ci(e,r,a)}var yp,Bf,_p,wp;yp=function(e,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Bf=function(){},_p=function(e,r,a,h){var y=e.memoizedProps;if(y!==h){e=r.stateNode,Oo(Xr.current);var E=null;switch(a){case"input":y=Ie(e,y),h=Ie(e,h),E=[];break;case"select":y=H({},y,{value:void 0}),h=H({},h,{value:void 0}),E=[];break;case"textarea":y=Ue(e,y),h=Ue(e,h),E=[];break;default:typeof y.onClick!="function"&&typeof h.onClick=="function"&&(e.onclick=ve)}Ce(a,h);var I;a=null;for(ge in y)if(!h.hasOwnProperty(ge)&&y.hasOwnProperty(ge)&&y[ge]!=null)if(ge==="style"){var $=y[ge];for(I in $)$.hasOwnProperty(I)&&(a||(a={}),a[I]="")}else ge!=="dangerouslySetInnerHTML"&&ge!=="children"&&ge!=="suppressContentEditableWarning"&&ge!=="suppressHydrationWarning"&&ge!=="autoFocus"&&(c.hasOwnProperty(ge)?E||(E=[]):(E=E||[]).push(ge,null));for(ge in h){var ne=h[ge];if($=y!=null?y[ge]:void 0,h.hasOwnProperty(ge)&&ne!==$&&(ne!=null||$!=null))if(ge==="style")if($){for(I in $)!$.hasOwnProperty(I)||ne&&ne.hasOwnProperty(I)||(a||(a={}),a[I]="");for(I in ne)ne.hasOwnProperty(I)&&$[I]!==ne[I]&&(a||(a={}),a[I]=ne[I])}else a||(E||(E=[]),E.push(ge,a)),a=ne;else ge==="dangerouslySetInnerHTML"?(ne=ne?ne.__html:void 0,$=$?$.__html:void 0,ne!=null&&$!==ne&&(E=E||[]).push(ge,ne)):ge==="children"?typeof ne!="string"&&typeof ne!="number"||(E=E||[]).push(ge,""+ne):ge!=="suppressContentEditableWarning"&&ge!=="suppressHydrationWarning"&&(c.hasOwnProperty(ge)?(ne!=null&&ge==="onScroll"&&Dt("scroll",e),E||$===ne||(E=[])):(E=E||[]).push(ge,ne))}a&&(E=E||[]).push("style",a);var ge=E;(r.updateQueue=ge)&&(r.flags|=4)}},wp=function(e,r,a,h){a!==h&&(r.flags|=4)};function $a(e,r){if(!Vt)switch(e.tailMode){case"hidden":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:h.sibling=null}}function Tn(e){var r=e.alternate!==null&&e.alternate.child===e.child,a=0,h=0;if(r)for(var y=e.child;y!==null;)a|=y.lanes|y.childLanes,h|=y.subtreeFlags&14680064,h|=y.flags&14680064,y.return=e,y=y.sibling;else for(y=e.child;y!==null;)a|=y.lanes|y.childLanes,h|=y.subtreeFlags,h|=y.flags,y.return=e,y=y.sibling;return e.subtreeFlags|=h,e.childLanes=a,r}function $v(e,r,a){var h=r.pendingProps;switch(Kd(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tn(r),null;case 1:return Wn(r.type)&&ic(),Tn(r),null;case 3:return h=r.stateNode,Vs(),Ot(Zn),Ot(Bn),cf(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(e===null||e.child===null)&&(cc(r)?r.flags|=4:e===null||e.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Nr!==null&&(jf(Nr),Nr=null))),Bf(e,r),Tn(r),null;case 5:af(r);var y=Oo(Ua.current);if(a=r.type,e!==null&&r.stateNode!=null)_p(e,r,a,h,y),e.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!h){if(r.stateNode===null)throw Error(i(166));return Tn(r),null}if(e=Oo(Xr.current),cc(r)){h=r.stateNode,a=r.type;var E=r.memoizedProps;switch(h[xr]=r,h[Ji]=E,e=(r.mode&1)!==0,a){case"dialog":Dt("cancel",h),Dt("close",h);break;case"iframe":case"object":case"embed":Dt("load",h);break;case"video":case"audio":for(y=0;y<Qi.length;y++)Dt(Qi[y],h);break;case"source":Dt("error",h);break;case"img":case"image":case"link":Dt("error",h),Dt("load",h);break;case"details":Dt("toggle",h);break;case"input":ft(h,E),Dt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!E.multiple},Dt("invalid",h);break;case"textarea":kt(h,E),Dt("invalid",h)}Ce(a,E),y=null;for(var I in E)if(E.hasOwnProperty(I)){var $=E[I];I==="children"?typeof $=="string"?h.textContent!==$&&(E.suppressHydrationWarning!==!0&&me(h.textContent,$,e),y=["children",$]):typeof $=="number"&&h.textContent!==""+$&&(E.suppressHydrationWarning!==!0&&me(h.textContent,$,e),y=["children",""+$]):c.hasOwnProperty(I)&&$!=null&&I==="onScroll"&&Dt("scroll",h)}switch(a){case"input":dt(h),Qe(h,E,!0);break;case"textarea":dt(h),Pe(h);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(h.onclick=ve)}h=y,r.updateQueue=h,h!==null&&(r.flags|=4)}else{I=y.nodeType===9?y:y.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=pt(a)),e==="http://www.w3.org/1999/xhtml"?a==="script"?(e=I.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof h.is=="string"?e=I.createElement(a,{is:h.is}):(e=I.createElement(a),a==="select"&&(I=e,h.multiple?I.multiple=!0:h.size&&(I.size=h.size))):e=I.createElementNS(e,a),e[xr]=r,e[Ji]=h,yp(e,r,!1,!1),r.stateNode=e;e:{switch(I=Ne(a,h),a){case"dialog":Dt("cancel",e),Dt("close",e),y=h;break;case"iframe":case"object":case"embed":Dt("load",e),y=h;break;case"video":case"audio":for(y=0;y<Qi.length;y++)Dt(Qi[y],e);y=h;break;case"source":Dt("error",e),y=h;break;case"img":case"image":case"link":Dt("error",e),Dt("load",e),y=h;break;case"details":Dt("toggle",e),y=h;break;case"input":ft(e,h),y=Ie(e,h),Dt("invalid",e);break;case"option":y=h;break;case"select":e._wrapperState={wasMultiple:!!h.multiple},y=H({},h,{value:void 0}),Dt("invalid",e);break;case"textarea":kt(e,h),y=Ue(e,h),Dt("invalid",e);break;default:y=h}Ce(a,y),$=y;for(E in $)if($.hasOwnProperty(E)){var ne=$[E];E==="style"?Cn(e,ne):E==="dangerouslySetInnerHTML"?(ne=ne?ne.__html:void 0,ne!=null&&en(e,ne)):E==="children"?typeof ne=="string"?(a!=="textarea"||ne!=="")&&Kt(e,ne):typeof ne=="number"&&Kt(e,""+ne):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(c.hasOwnProperty(E)?ne!=null&&E==="onScroll"&&Dt("scroll",e):ne!=null&&D(e,E,ne,I))}switch(a){case"input":dt(e),Qe(e,h,!1);break;case"textarea":dt(e),Pe(e);break;case"option":h.value!=null&&e.setAttribute("value",""+he(h.value));break;case"select":e.multiple=!!h.multiple,E=h.value,E!=null?rt(e,!!h.multiple,E,!1):h.defaultValue!=null&&rt(e,!!h.multiple,h.defaultValue,!0);break;default:typeof y.onClick=="function"&&(e.onclick=ve)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Tn(r),null;case 6:if(e&&r.stateNode!=null)wp(e,r,e.memoizedProps,h);else{if(typeof h!="string"&&r.stateNode===null)throw Error(i(166));if(a=Oo(Ua.current),Oo(Xr.current),cc(r)){if(h=r.stateNode,a=r.memoizedProps,h[xr]=r,(E=h.nodeValue!==a)&&(e=ar,e!==null))switch(e.tag){case 3:me(h.nodeValue,a,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&me(h.nodeValue,a,(e.mode&1)!==0)}E&&(r.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[xr]=r,r.stateNode=h}return Tn(r),null;case 13:if(Ot(qt),h=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Vt&&lr!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Eh(),Os(),r.flags|=98560,E=!1;else if(E=cc(r),h!==null&&h.dehydrated!==null){if(e===null){if(!E)throw Error(i(318));if(E=r.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(i(317));E[xr]=r}else Os(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Tn(r),E=!1}else Nr!==null&&(jf(Nr),Nr=null),E=!0;if(!E)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=a,r):(h=h!==null,h!==(e!==null&&e.memoizedState!==null)&&h&&(r.child.flags|=8192,(r.mode&1)!==0&&(e===null||(qt.current&1)!==0?un===0&&(un=3):Vf())),r.updateQueue!==null&&(r.flags|=4),Tn(r),null);case 4:return Vs(),Bf(e,r),e===null&&Yi(r.stateNode.containerInfo),Tn(r),null;case 10:return tf(r.type._context),Tn(r),null;case 17:return Wn(r.type)&&ic(),Tn(r),null;case 19:if(Ot(qt),E=r.memoizedState,E===null)return Tn(r),null;if(h=(r.flags&128)!==0,I=E.rendering,I===null)if(h)$a(E,!1);else{if(un!==0||e!==null&&(e.flags&128)!==0)for(e=r.child;e!==null;){if(I=mc(e),I!==null){for(r.flags|=128,$a(E,!1),h=I.updateQueue,h!==null&&(r.updateQueue=h,r.flags|=4),r.subtreeFlags=0,h=a,a=r.child;a!==null;)E=a,e=h,E.flags&=14680066,I=E.alternate,I===null?(E.childLanes=0,E.lanes=e,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=I.childLanes,E.lanes=I.lanes,E.child=I.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=I.memoizedProps,E.memoizedState=I.memoizedState,E.updateQueue=I.updateQueue,E.type=I.type,e=I.dependencies,E.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return Mt(qt,qt.current&1|2),r.child}e=e.sibling}E.tail!==null&&Zt()>qs&&(r.flags|=128,h=!0,$a(E,!1),r.lanes=4194304)}else{if(!h)if(e=mc(I),e!==null){if(r.flags|=128,h=!0,a=e.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),$a(E,!0),E.tail===null&&E.tailMode==="hidden"&&!I.alternate&&!Vt)return Tn(r),null}else 2*Zt()-E.renderingStartTime>qs&&a!==1073741824&&(r.flags|=128,h=!0,$a(E,!1),r.lanes=4194304);E.isBackwards?(I.sibling=r.child,r.child=I):(a=E.last,a!==null?a.sibling=I:r.child=I,E.last=I)}return E.tail!==null?(r=E.tail,E.rendering=r,E.tail=r.sibling,E.renderingStartTime=Zt(),r.sibling=null,a=qt.current,Mt(qt,h?a&1|2:a&1),r):(Tn(r),null);case 22:case 23:return Hf(),h=r.memoizedState!==null,e!==null&&e.memoizedState!==null!==h&&(r.flags|=8192),h&&(r.mode&1)!==0?(cr&1073741824)!==0&&(Tn(r),r.subtreeFlags&6&&(r.flags|=8192)):Tn(r),null;case 24:return null;case 25:return null}throw Error(i(156,r.tag))}function Kv(e,r){switch(Kd(r),r.tag){case 1:return Wn(r.type)&&ic(),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return Vs(),Ot(Zn),Ot(Bn),cf(),e=r.flags,(e&65536)!==0&&(e&128)===0?(r.flags=e&-65537|128,r):null;case 5:return af(r),null;case 13:if(Ot(qt),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Os()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return Ot(qt),null;case 4:return Vs(),null;case 10:return tf(r.type._context),null;case 22:case 23:return Hf(),null;case 24:return null;default:return null}}var Cc=!1,Dn=!1,Qv=typeof WeakSet=="function"?WeakSet:Set,Me=null;function Zs(e,r){var a=e.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){Jt(e,r,h)}else a.current=null}function Pf(e,r,a){try{a()}catch(h){Jt(e,r,h)}}var bp=!1;function Yv(e,r){if(Te=ko,e=Da(),Ra(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var y=h.anchorOffset,E=h.focusNode;h=h.focusOffset;try{a.nodeType,E.nodeType}catch{a=null;break e}var I=0,$=-1,ne=-1,ge=0,we=0,be=e,ye=null;t:for(;;){for(var Le;be!==a||y!==0&&be.nodeType!==3||($=I+y),be!==E||h!==0&&be.nodeType!==3||(ne=I+h),be.nodeType===3&&(I+=be.nodeValue.length),(Le=be.firstChild)!==null;)ye=be,be=Le;for(;;){if(be===e)break t;if(ye===a&&++ge===y&&($=I),ye===E&&++we===h&&(ne=I),(Le=be.nextSibling)!==null)break;be=ye,ye=be.parentNode}be=Le}a=$===-1||ne===-1?null:{start:$,end:ne}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ge={focusedElem:e,selectionRange:a},ko=!1,Me=r;Me!==null;)if(r=Me,e=r.child,(r.subtreeFlags&1028)!==0&&e!==null)e.return=r,Me=e;else for(;Me!==null;){r=Me;try{var Oe=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(Oe!==null){var Ve=Oe.memoizedProps,tn=Oe.memoizedState,ce=r.stateNode,re=ce.getSnapshotBeforeUpdate(r.elementType===r.type?Ve:Fr(r.type,Ve),tn);ce.__reactInternalSnapshotBeforeUpdate=re}break;case 3:var fe=r.stateNode.containerInfo;fe.nodeType===1?fe.textContent="":fe.nodeType===9&&fe.documentElement&&fe.removeChild(fe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(Se){Jt(r,r.return,Se)}if(e=r.sibling,e!==null){e.return=r.return,Me=e;break}Me=r.return}return Oe=bp,bp=!1,Oe}function Ka(e,r,a){var h=r.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var y=h=h.next;do{if((y.tag&e)===e){var E=y.destroy;y.destroy=void 0,E!==void 0&&Pf(r,a,E)}y=y.next}while(y!==h)}}function Ec(e,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var h=a.create;a.destroy=h()}a=a.next}while(a!==r)}}function Tf(e){var r=e.ref;if(r!==null){var a=e.stateNode;switch(e.tag){case 5:e=a;break;default:e=a}typeof r=="function"?r(e):r.current=e}}function Cp(e){var r=e.alternate;r!==null&&(e.alternate=null,Cp(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&(delete r[xr],delete r[Ji],delete r[eo],delete r[Zd],delete r[Wd])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ep(e){return e.tag===5||e.tag===3||e.tag===4}function kp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ep(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Df(e,r,a){var h=e.tag;if(h===5||h===6)e=e.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(e,r):a.insertBefore(e,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(e,a)):(r=a,r.appendChild(e)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=ve));else if(h!==4&&(e=e.child,e!==null))for(Df(e,r,a),e=e.sibling;e!==null;)Df(e,r,a),e=e.sibling}function Rf(e,r,a){var h=e.tag;if(h===5||h===6)e=e.stateNode,r?a.insertBefore(e,r):a.appendChild(e);else if(h!==4&&(e=e.child,e!==null))for(Rf(e,r,a),e=e.sibling;e!==null;)Rf(e,r,a),e=e.sibling}var vn=null,Lr=!1;function so(e,r,a){for(a=a.child;a!==null;)Sp(e,r,a),a=a.sibling}function Sp(e,r,a){if(Jn&&typeof Jn.onCommitFiberUnmount=="function")try{Jn.onCommitFiberUnmount(yo,a)}catch{}switch(a.tag){case 5:Dn||Zs(a,r);case 6:var h=vn,y=Lr;vn=null,so(e,r,a),vn=h,Lr=y,vn!==null&&(Lr?(e=vn,a=a.stateNode,e.nodeType===8?e.parentNode.removeChild(a):e.removeChild(a)):vn.removeChild(a.stateNode));break;case 18:vn!==null&&(Lr?(e=vn,a=a.stateNode,e.nodeType===8?ja(e.parentNode,a):e.nodeType===1&&ja(e,a),nr(e)):ja(vn,a.stateNode));break;case 4:h=vn,y=Lr,vn=a.stateNode.containerInfo,Lr=!0,so(e,r,a),vn=h,Lr=y;break;case 0:case 11:case 14:case 15:if(!Dn&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){y=h=h.next;do{var E=y,I=E.destroy;E=E.tag,I!==void 0&&((E&2)!==0||(E&4)!==0)&&Pf(a,r,I),y=y.next}while(y!==h)}so(e,r,a);break;case 1:if(!Dn&&(Zs(a,r),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch($){Jt(a,r,$)}so(e,r,a);break;case 21:so(e,r,a);break;case 22:a.mode&1?(Dn=(h=Dn)||a.memoizedState!==null,so(e,r,a),Dn=h):so(e,r,a);break;default:so(e,r,a)}}function Bp(e){var r=e.updateQueue;if(r!==null){e.updateQueue=null;var a=e.stateNode;a===null&&(a=e.stateNode=new Qv),r.forEach(function(h){var y=sy.bind(null,e,h);a.has(h)||(a.add(h),h.then(y,y))})}}function Mr(e,r){var a=r.deletions;if(a!==null)for(var h=0;h<a.length;h++){var y=a[h];try{var E=e,I=r,$=I;e:for(;$!==null;){switch($.tag){case 5:vn=$.stateNode,Lr=!1;break e;case 3:vn=$.stateNode.containerInfo,Lr=!0;break e;case 4:vn=$.stateNode.containerInfo,Lr=!0;break e}$=$.return}if(vn===null)throw Error(i(160));Sp(E,I,y),vn=null,Lr=!1;var ne=y.alternate;ne!==null&&(ne.return=null),y.return=null}catch(ge){Jt(y,r,ge)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Pp(r,e),r=r.sibling}function Pp(e,r){var a=e.alternate,h=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Mr(r,e),ei(e),h&4){try{Ka(3,e,e.return),Ec(3,e)}catch(Ve){Jt(e,e.return,Ve)}try{Ka(5,e,e.return)}catch(Ve){Jt(e,e.return,Ve)}}break;case 1:Mr(r,e),ei(e),h&512&&a!==null&&Zs(a,a.return);break;case 5:if(Mr(r,e),ei(e),h&512&&a!==null&&Zs(a,a.return),e.flags&32){var y=e.stateNode;try{Kt(y,"")}catch(Ve){Jt(e,e.return,Ve)}}if(h&4&&(y=e.stateNode,y!=null)){var E=e.memoizedProps,I=a!==null?a.memoizedProps:E,$=e.type,ne=e.updateQueue;if(e.updateQueue=null,ne!==null)try{$==="input"&&E.type==="radio"&&E.name!=null&&Nt(y,E),Ne($,I);var ge=Ne($,E);for(I=0;I<ne.length;I+=2){var we=ne[I],be=ne[I+1];we==="style"?Cn(y,be):we==="dangerouslySetInnerHTML"?en(y,be):we==="children"?Kt(y,be):D(y,we,be,ge)}switch($){case"input":lt(y,E);break;case"textarea":$t(y,E);break;case"select":var ye=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!E.multiple;var Le=E.value;Le!=null?rt(y,!!E.multiple,Le,!1):ye!==!!E.multiple&&(E.defaultValue!=null?rt(y,!!E.multiple,E.defaultValue,!0):rt(y,!!E.multiple,E.multiple?[]:"",!1))}y[Ji]=E}catch(Ve){Jt(e,e.return,Ve)}}break;case 6:if(Mr(r,e),ei(e),h&4){if(e.stateNode===null)throw Error(i(162));y=e.stateNode,E=e.memoizedProps;try{y.nodeValue=E}catch(Ve){Jt(e,e.return,Ve)}}break;case 3:if(Mr(r,e),ei(e),h&4&&a!==null&&a.memoizedState.isDehydrated)try{nr(r.containerInfo)}catch(Ve){Jt(e,e.return,Ve)}break;case 4:Mr(r,e),ei(e);break;case 13:Mr(r,e),ei(e),y=e.child,y.flags&8192&&(E=y.memoizedState!==null,y.stateNode.isHidden=E,!E||y.alternate!==null&&y.alternate.memoizedState!==null||(Lf=Zt())),h&4&&Bp(e);break;case 22:if(we=a!==null&&a.memoizedState!==null,e.mode&1?(Dn=(ge=Dn)||we,Mr(r,e),Dn=ge):Mr(r,e),ei(e),h&8192){if(ge=e.memoizedState!==null,(e.stateNode.isHidden=ge)&&!we&&(e.mode&1)!==0)for(Me=e,we=e.child;we!==null;){for(be=Me=we;Me!==null;){switch(ye=Me,Le=ye.child,ye.tag){case 0:case 11:case 14:case 15:Ka(4,ye,ye.return);break;case 1:Zs(ye,ye.return);var Oe=ye.stateNode;if(typeof Oe.componentWillUnmount=="function"){h=ye,a=ye.return;try{r=h,Oe.props=r.memoizedProps,Oe.state=r.memoizedState,Oe.componentWillUnmount()}catch(Ve){Jt(h,a,Ve)}}break;case 5:Zs(ye,ye.return);break;case 22:if(ye.memoizedState!==null){Rp(be);continue}}Le!==null?(Le.return=ye,Me=Le):Rp(be)}we=we.sibling}e:for(we=null,be=e;;){if(be.tag===5){if(we===null){we=be;try{y=be.stateNode,ge?(E=y.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):($=be.stateNode,ne=be.memoizedProps.style,I=ne!=null&&ne.hasOwnProperty("display")?ne.display:null,$.style.display=Yn("display",I))}catch(Ve){Jt(e,e.return,Ve)}}}else if(be.tag===6){if(we===null)try{be.stateNode.nodeValue=ge?"":be.memoizedProps}catch(Ve){Jt(e,e.return,Ve)}}else if((be.tag!==22&&be.tag!==23||be.memoizedState===null||be===e)&&be.child!==null){be.child.return=be,be=be.child;continue}if(be===e)break e;for(;be.sibling===null;){if(be.return===null||be.return===e)break e;we===be&&(we=null),be=be.return}we===be&&(we=null),be.sibling.return=be.return,be=be.sibling}}break;case 19:Mr(r,e),ei(e),h&4&&Bp(e);break;case 21:break;default:Mr(r,e),ei(e)}}function ei(e){var r=e.flags;if(r&2){try{e:{for(var a=e.return;a!==null;){if(Ep(a)){var h=a;break e}a=a.return}throw Error(i(160))}switch(h.tag){case 5:var y=h.stateNode;h.flags&32&&(Kt(y,""),h.flags&=-33);var E=kp(e);Rf(e,E,y);break;case 3:case 4:var I=h.stateNode.containerInfo,$=kp(e);Df(e,$,I);break;default:throw Error(i(161))}}catch(ne){Jt(e,e.return,ne)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function Xv(e,r,a){Me=e,Tp(e)}function Tp(e,r,a){for(var h=(e.mode&1)!==0;Me!==null;){var y=Me,E=y.child;if(y.tag===22&&h){var I=y.memoizedState!==null||Cc;if(!I){var $=y.alternate,ne=$!==null&&$.memoizedState!==null||Dn;$=Cc;var ge=Dn;if(Cc=I,(Dn=ne)&&!ge)for(Me=y;Me!==null;)I=Me,ne=I.child,I.tag===22&&I.memoizedState!==null?Np(y):ne!==null?(ne.return=I,Me=ne):Np(y);for(;E!==null;)Me=E,Tp(E),E=E.sibling;Me=y,Cc=$,Dn=ge}Dp(e)}else(y.subtreeFlags&8772)!==0&&E!==null?(E.return=y,Me=E):Dp(e)}}function Dp(e){for(;Me!==null;){var r=Me;if((r.flags&8772)!==0){var a=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Dn||Ec(5,r);break;case 1:var h=r.stateNode;if(r.flags&4&&!Dn)if(a===null)h.componentDidMount();else{var y=r.elementType===r.type?a.memoizedProps:Fr(r.type,a.memoizedProps);h.componentDidUpdate(y,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var E=r.updateQueue;E!==null&&Rh(r,E,h);break;case 3:var I=r.updateQueue;if(I!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}Rh(r,I,a)}break;case 5:var $=r.stateNode;if(a===null&&r.flags&4){a=$;var ne=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":ne.autoFocus&&a.focus();break;case"img":ne.src&&(a.src=ne.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var ge=r.alternate;if(ge!==null){var we=ge.memoizedState;if(we!==null){var be=we.dehydrated;be!==null&&nr(be)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}Dn||r.flags&512&&Tf(r)}catch(ye){Jt(r,r.return,ye)}}if(r===e){Me=null;break}if(a=r.sibling,a!==null){a.return=r.return,Me=a;break}Me=r.return}}function Rp(e){for(;Me!==null;){var r=Me;if(r===e){Me=null;break}var a=r.sibling;if(a!==null){a.return=r.return,Me=a;break}Me=r.return}}function Np(e){for(;Me!==null;){var r=Me;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{Ec(4,r)}catch(ne){Jt(r,a,ne)}break;case 1:var h=r.stateNode;if(typeof h.componentDidMount=="function"){var y=r.return;try{h.componentDidMount()}catch(ne){Jt(r,y,ne)}}var E=r.return;try{Tf(r)}catch(ne){Jt(r,E,ne)}break;case 5:var I=r.return;try{Tf(r)}catch(ne){Jt(r,I,ne)}}}catch(ne){Jt(r,r.return,ne)}if(r===e){Me=null;break}var $=r.sibling;if($!==null){$.return=r.return,Me=$;break}Me=r.return}}var Jv=Math.ceil,kc=F.ReactCurrentDispatcher,Nf=F.ReactCurrentOwner,wr=F.ReactCurrentBatchConfig,Ct=0,mn=null,on=null,yn=0,cr=0,Ws=to(0),un=0,Qa=null,zo=0,Sc=0,Ff=0,Ya=null,Gn=null,Lf=0,qs=1/0,Ei=null,Bc=!1,Mf=null,ao=null,Pc=!1,lo=null,Tc=0,Xa=0,If=null,Dc=-1,Rc=0;function In(){return(Ct&6)!==0?Zt():Dc!==-1?Dc:Dc=Zt()}function co(e){return(e.mode&1)===0?1:(Ct&2)!==0&&yn!==0?yn&-yn:Mv.transition!==null?(Rc===0&&(Rc=Ll()),Rc):(e=_t,e!==0||(e=window.event,e=e===void 0?16:xt(e.type)),e)}function Ir(e,r,a,h){if(50<Xa)throw Xa=0,If=null,Error(i(185));er(e,a,h),((Ct&2)===0||e!==mn)&&(e===mn&&((Ct&2)===0&&(Sc|=a),un===4&&uo(e,yn)),$n(e,h),a===1&&Ct===0&&(r.mode&1)===0&&(qs=Zt()+500,sc&&ro()))}function $n(e,r){var a=e.callbackNode;fs(e,r);var h=Lt(e,e===mn?yn:0);if(h===0)a!==null&&ha(a),e.callbackNode=null,e.callbackPriority=0;else if(r=h&-h,e.callbackPriority!==r){if(a!=null&&ha(a),r===1)e.tag===0?Lv(Lp.bind(null,e)):yh(Lp.bind(null,e)),Sn(function(){(Ct&6)===0&&ro()}),a=null;else{switch(Oi(h)){case 1:a=pa;break;case 4:a=Fl;break;case 16:a=us;break;case 536870912:a=Fi;break;default:a=us}a=Up(a,Fp.bind(null,e))}e.callbackPriority=r,e.callbackNode=a}}function Fp(e,r){if(Dc=-1,Rc=0,(Ct&6)!==0)throw Error(i(327));var a=e.callbackNode;if(Gs()&&e.callbackNode!==a)return null;var h=Lt(e,e===mn?yn:0);if(h===0)return null;if((h&30)!==0||(h&e.expiredLanes)!==0||r)r=Nc(e,h);else{r=h;var y=Ct;Ct|=2;var E=Ip();(mn!==e||yn!==r)&&(Ei=null,qs=Zt()+500,Vo(e,r));do try{ny();break}catch($){Mp(e,$)}while(!0);ef(),kc.current=E,Ct=y,on!==null?r=0:(mn=null,yn=0,r=un)}if(r!==0){if(r===2&&(y=En(e),y!==0&&(h=y,r=Of(e,y))),r===1)throw a=Qa,Vo(e,0),uo(e,h),$n(e,Zt()),a;if(r===6)uo(e,h);else{if(y=e.current.alternate,(h&30)===0&&!ey(y)&&(r=Nc(e,h),r===2&&(E=En(e),E!==0&&(h=E,r=Of(e,E))),r===1))throw a=Qa,Vo(e,0),uo(e,h),$n(e,Zt()),a;switch(e.finishedWork=y,e.finishedLanes=h,r){case 0:case 1:throw Error(i(345));case 2:Uo(e,Gn,Ei);break;case 3:if(uo(e,h),(h&130023424)===h&&(r=Lf+500-Zt(),10<r)){if(Lt(e,0)!==0)break;if(y=e.suspendedLanes,(y&h)!==h){In(),e.pingedLanes|=e.suspendedLanes&y;break}e.timeoutHandle=ln(Uo.bind(null,e,Gn,Ei),r);break}Uo(e,Gn,Ei);break;case 4:if(uo(e,h),(h&4194240)===h)break;for(r=e.eventTimes,y=-1;0<h;){var I=31-it(h);E=1<<I,I=r[I],I>y&&(y=I),h&=~E}if(h=y,h=Zt()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*Jv(h/1960))-h,10<h){e.timeoutHandle=ln(Uo.bind(null,e,Gn,Ei),h);break}Uo(e,Gn,Ei);break;case 5:Uo(e,Gn,Ei);break;default:throw Error(i(329))}}}return $n(e,Zt()),e.callbackNode===a?Fp.bind(null,e):null}function Of(e,r){var a=Ya;return e.current.memoizedState.isDehydrated&&(Vo(e,r).flags|=256),e=Nc(e,r),e!==2&&(r=Gn,Gn=a,r!==null&&jf(r)),e}function jf(e){Gn===null?Gn=e:Gn.push.apply(Gn,e)}function ey(e){for(var r=e;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var y=a[h],E=y.getSnapshot;y=y.value;try{if(!or(E(),y))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function uo(e,r){for(r&=~Ff,r&=~Sc,e.suspendedLanes|=r,e.pingedLanes&=~r,e=e.expirationTimes;0<r;){var a=31-it(r),h=1<<a;e[a]=-1,r&=~h}}function Lp(e){if((Ct&6)!==0)throw Error(i(327));Gs();var r=Lt(e,0);if((r&1)===0)return $n(e,Zt()),null;var a=Nc(e,r);if(e.tag!==0&&a===2){var h=En(e);h!==0&&(r=h,a=Of(e,h))}if(a===1)throw a=Qa,Vo(e,0),uo(e,r),$n(e,Zt()),a;if(a===6)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=r,Uo(e,Gn,Ei),$n(e,Zt()),null}function zf(e,r){var a=Ct;Ct|=1;try{return e(r)}finally{Ct=a,Ct===0&&(qs=Zt()+500,sc&&ro())}}function Ho(e){lo!==null&&lo.tag===0&&(Ct&6)===0&&Gs();var r=Ct;Ct|=1;var a=wr.transition,h=_t;try{if(wr.transition=null,_t=1,e)return e()}finally{_t=h,wr.transition=a,Ct=r,(Ct&6)===0&&ro()}}function Hf(){cr=Ws.current,Ot(Ws)}function Vo(e,r){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(a!==-1&&(e.timeoutHandle=-1,rn(a)),on!==null)for(a=on.return;a!==null;){var h=a;switch(Kd(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&ic();break;case 3:Vs(),Ot(Zn),Ot(Bn),cf();break;case 5:af(h);break;case 4:Vs();break;case 13:Ot(qt);break;case 19:Ot(qt);break;case 10:tf(h.type._context);break;case 22:case 23:Hf()}a=a.return}if(mn=e,on=e=fo(e.current,null),yn=cr=r,un=0,Qa=null,Ff=Sc=zo=0,Gn=Ya=null,Io!==null){for(r=0;r<Io.length;r++)if(a=Io[r],h=a.interleaved,h!==null){a.interleaved=null;var y=h.next,E=a.pending;if(E!==null){var I=E.next;E.next=y,h.next=I}a.pending=h}Io=null}return e}function Mp(e,r){do{var a=on;try{if(ef(),gc.current=yc,xc){for(var h=Gt.memoizedState;h!==null;){var y=h.queue;y!==null&&(y.pending=null),h=h.next}xc=!1}if(jo=0,pn=cn=Gt=null,Za=!1,Wa=0,Nf.current=null,a===null||a.return===null){un=1,Qa=r,on=null;break}e:{var E=e,I=a.return,$=a,ne=r;if(r=yn,$.flags|=32768,ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var ge=ne,we=$,be=we.tag;if((we.mode&1)===0&&(be===0||be===11||be===15)){var ye=we.alternate;ye?(we.updateQueue=ye.updateQueue,we.memoizedState=ye.memoizedState,we.lanes=ye.lanes):(we.updateQueue=null,we.memoizedState=null)}var Le=ap(I);if(Le!==null){Le.flags&=-257,lp(Le,I,$,E,r),Le.mode&1&&sp(E,ge,r),r=Le,ne=ge;var Oe=r.updateQueue;if(Oe===null){var Ve=new Set;Ve.add(ne),r.updateQueue=Ve}else Oe.add(ne);break e}else{if((r&1)===0){sp(E,ge,r),Vf();break e}ne=Error(i(426))}}else if(Vt&&$.mode&1){var tn=ap(I);if(tn!==null){(tn.flags&65536)===0&&(tn.flags|=256),lp(tn,I,$,E,r),Xd(Us(ne,$));break e}}E=ne=Us(ne,$),un!==4&&(un=2),Ya===null?Ya=[E]:Ya.push(E),E=I;do{switch(E.tag){case 3:E.flags|=65536,r&=-r,E.lanes|=r;var ce=ip(E,ne,r);Dh(E,ce);break e;case 1:$=ne;var re=E.type,fe=E.stateNode;if((E.flags&128)===0&&(typeof re.getDerivedStateFromError=="function"||fe!==null&&typeof fe.componentDidCatch=="function"&&(ao===null||!ao.has(fe)))){E.flags|=65536,r&=-r,E.lanes|=r;var Se=op(E,$,r);Dh(E,Se);break e}}E=E.return}while(E!==null)}jp(a)}catch(Ze){r=Ze,on===a&&a!==null&&(on=a=a.return);continue}break}while(!0)}function Ip(){var e=kc.current;return kc.current=yc,e===null?yc:e}function Vf(){(un===0||un===3||un===2)&&(un=4),mn===null||(zo&268435455)===0&&(Sc&268435455)===0||uo(mn,yn)}function Nc(e,r){var a=Ct;Ct|=2;var h=Ip();(mn!==e||yn!==r)&&(Ei=null,Vo(e,r));do try{ty();break}catch(y){Mp(e,y)}while(!0);if(ef(),Ct=a,kc.current=h,on!==null)throw Error(i(261));return mn=null,yn=0,un}function ty(){for(;on!==null;)Op(on)}function ny(){for(;on!==null&&!Bd();)Op(on)}function Op(e){var r=Vp(e.alternate,e,cr);e.memoizedProps=e.pendingProps,r===null?jp(e):on=r,Nf.current=null}function jp(e){var r=e;do{var a=r.alternate;if(e=r.return,(r.flags&32768)===0){if(a=$v(a,r,cr),a!==null){on=a;return}}else{if(a=Kv(a,r),a!==null){a.flags&=32767,on=a;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{un=6,on=null;return}}if(r=r.sibling,r!==null){on=r;return}on=r=e}while(r!==null);un===0&&(un=5)}function Uo(e,r,a){var h=_t,y=wr.transition;try{wr.transition=null,_t=1,ry(e,r,a,h)}finally{wr.transition=y,_t=h}return null}function ry(e,r,a,h){do Gs();while(lo!==null);if((Ct&6)!==0)throw Error(i(327));a=e.finishedWork;var y=e.finishedLanes;if(a===null)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var E=a.lanes|a.childLanes;if(Xt(e,E),e===mn&&(on=mn=null,yn=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Pc||(Pc=!0,Up(us,function(){return Gs(),null})),E=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||E){E=wr.transition,wr.transition=null;var I=_t;_t=1;var $=Ct;Ct|=4,Nf.current=null,Yv(e,a),Pp(a,e),mr(Ge),ko=!!Te,Ge=Te=null,e.current=a,Xv(a),cs(),Ct=$,_t=I,wr.transition=E}else e.current=a;if(Pc&&(Pc=!1,lo=e,Tc=y),E=e.pendingLanes,E===0&&(ao=null),_o(a.stateNode),$n(e,Zt()),r!==null)for(h=e.onRecoverableError,a=0;a<r.length;a++)y=r[a],h(y.value,{componentStack:y.stack,digest:y.digest});if(Bc)throw Bc=!1,e=Mf,Mf=null,e;return(Tc&1)!==0&&e.tag!==0&&Gs(),E=e.pendingLanes,(E&1)!==0?e===If?Xa++:(Xa=0,If=e):Xa=0,ro(),null}function Gs(){if(lo!==null){var e=Oi(Tc),r=wr.transition,a=_t;try{if(wr.transition=null,_t=16>e?16:e,lo===null)var h=!1;else{if(e=lo,lo=null,Tc=0,(Ct&6)!==0)throw Error(i(331));var y=Ct;for(Ct|=4,Me=e.current;Me!==null;){var E=Me,I=E.child;if((Me.flags&16)!==0){var $=E.deletions;if($!==null){for(var ne=0;ne<$.length;ne++){var ge=$[ne];for(Me=ge;Me!==null;){var we=Me;switch(we.tag){case 0:case 11:case 15:Ka(8,we,E)}var be=we.child;if(be!==null)be.return=we,Me=be;else for(;Me!==null;){we=Me;var ye=we.sibling,Le=we.return;if(Cp(we),we===ge){Me=null;break}if(ye!==null){ye.return=Le,Me=ye;break}Me=Le}}}var Oe=E.alternate;if(Oe!==null){var Ve=Oe.child;if(Ve!==null){Oe.child=null;do{var tn=Ve.sibling;Ve.sibling=null,Ve=tn}while(Ve!==null)}}Me=E}}if((E.subtreeFlags&2064)!==0&&I!==null)I.return=E,Me=I;else e:for(;Me!==null;){if(E=Me,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:Ka(9,E,E.return)}var ce=E.sibling;if(ce!==null){ce.return=E.return,Me=ce;break e}Me=E.return}}var re=e.current;for(Me=re;Me!==null;){I=Me;var fe=I.child;if((I.subtreeFlags&2064)!==0&&fe!==null)fe.return=I,Me=fe;else e:for(I=re;Me!==null;){if($=Me,($.flags&2048)!==0)try{switch($.tag){case 0:case 11:case 15:Ec(9,$)}}catch(Ze){Jt($,$.return,Ze)}if($===I){Me=null;break e}var Se=$.sibling;if(Se!==null){Se.return=$.return,Me=Se;break e}Me=$.return}}if(Ct=y,ro(),Jn&&typeof Jn.onPostCommitFiberRoot=="function")try{Jn.onPostCommitFiberRoot(yo,e)}catch{}h=!0}return h}finally{_t=a,wr.transition=r}}return!1}function zp(e,r,a){r=Us(a,r),r=ip(e,r,1),e=oo(e,r,1),r=In(),e!==null&&(er(e,1,r),$n(e,r))}function Jt(e,r,a){if(e.tag===3)zp(e,e,a);else for(;r!==null;){if(r.tag===3){zp(r,e,a);break}else if(r.tag===1){var h=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ao===null||!ao.has(h))){e=Us(a,e),e=op(r,e,1),r=oo(r,e,1),e=In(),r!==null&&(er(r,1,e),$n(r,e));break}}r=r.return}}function iy(e,r,a){var h=e.pingCache;h!==null&&h.delete(r),r=In(),e.pingedLanes|=e.suspendedLanes&a,mn===e&&(yn&a)===a&&(un===4||un===3&&(yn&130023424)===yn&&500>Zt()-Lf?Vo(e,0):Ff|=a),$n(e,r)}function Hp(e,r){r===0&&((e.mode&1)===0?r=1:(r=Mi,Mi<<=1,(Mi&130023424)===0&&(Mi=4194304)));var a=In();e=wi(e,r),e!==null&&(er(e,r,a),$n(e,a))}function oy(e){var r=e.memoizedState,a=0;r!==null&&(a=r.retryLane),Hp(e,a)}function sy(e,r){var a=0;switch(e.tag){case 13:var h=e.stateNode,y=e.memoizedState;y!==null&&(a=y.retryLane);break;case 19:h=e.stateNode;break;default:throw Error(i(314))}h!==null&&h.delete(r),Hp(e,a)}var Vp;Vp=function(e,r,a){if(e!==null)if(e.memoizedProps!==r.pendingProps||Zn.current)qn=!0;else{if((e.lanes&a)===0&&(r.flags&128)===0)return qn=!1,Gv(e,r,a);qn=(e.flags&131072)!==0}else qn=!1,Vt&&(r.flags&1048576)!==0&&_h(r,lc,r.index);switch(r.lanes=0,r.tag){case 2:var h=r.type;bc(e,r),e=r.pendingProps;var y=Ls(r,Bn.current);Hs(r,a),y=ff(null,r,h,e,y,a);var E=hf();return r.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Wn(h)?(E=!0,oc(r)):E=!1,r.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,of(r),y.updater=_c,r.stateNode=y,y._reactInternals=r,vf(r,h,e,a),r=bf(null,r,h,!0,E,a)):(r.tag=0,Vt&&E&&$d(r),Mn(null,r,y,a),r=r.child),r;case 16:h=r.elementType;e:{switch(bc(e,r),e=r.pendingProps,y=h._init,h=y(h._payload),r.type=h,y=r.tag=ly(h),e=Fr(h,e),y){case 0:r=wf(null,r,h,e,a);break e;case 1:r=pp(null,r,h,e,a);break e;case 11:r=cp(null,r,h,e,a);break e;case 14:r=up(null,r,h,Fr(h.type,e),a);break e}throw Error(i(306,h,""))}return r;case 0:return h=r.type,y=r.pendingProps,y=r.elementType===h?y:Fr(h,y),wf(e,r,h,y,a);case 1:return h=r.type,y=r.pendingProps,y=r.elementType===h?y:Fr(h,y),pp(e,r,h,y,a);case 3:e:{if(mp(r),e===null)throw Error(i(387));h=r.pendingProps,E=r.memoizedState,y=E.element,Th(e,r),pc(r,h,null,a);var I=r.memoizedState;if(h=I.element,E.isDehydrated)if(E={element:h,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},r.updateQueue.baseState=E,r.memoizedState=E,r.flags&256){y=Us(Error(i(423)),r),r=gp(e,r,h,a,y);break e}else if(h!==y){y=Us(Error(i(424)),r),r=gp(e,r,h,a,y);break e}else for(lr=Yr(r.stateNode.containerInfo.firstChild),ar=r,Vt=!0,Nr=null,a=Bh(r,null,h,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Os(),h===y){r=Ci(e,r,a);break e}Mn(e,r,h,a)}r=r.child}return r;case 5:return Nh(r),e===null&&Yd(r),h=r.type,y=r.pendingProps,E=e!==null?e.memoizedProps:null,I=y.children,st(h,y)?I=null:E!==null&&st(h,E)&&(r.flags|=32),hp(e,r),Mn(e,r,I,a),r.child;case 6:return e===null&&Yd(r),null;case 13:return xp(e,r,a);case 4:return sf(r,r.stateNode.containerInfo),h=r.pendingProps,e===null?r.child=js(r,null,h,a):Mn(e,r,h,a),r.child;case 11:return h=r.type,y=r.pendingProps,y=r.elementType===h?y:Fr(h,y),cp(e,r,h,y,a);case 7:return Mn(e,r,r.pendingProps,a),r.child;case 8:return Mn(e,r,r.pendingProps.children,a),r.child;case 12:return Mn(e,r,r.pendingProps.children,a),r.child;case 10:e:{if(h=r.type._context,y=r.pendingProps,E=r.memoizedProps,I=y.value,Mt(dc,h._currentValue),h._currentValue=I,E!==null)if(or(E.value,I)){if(E.children===y.children&&!Zn.current){r=Ci(e,r,a);break e}}else for(E=r.child,E!==null&&(E.return=r);E!==null;){var $=E.dependencies;if($!==null){I=E.child;for(var ne=$.firstContext;ne!==null;){if(ne.context===h){if(E.tag===1){ne=bi(-1,a&-a),ne.tag=2;var ge=E.updateQueue;if(ge!==null){ge=ge.shared;var we=ge.pending;we===null?ne.next=ne:(ne.next=we.next,we.next=ne),ge.pending=ne}}E.lanes|=a,ne=E.alternate,ne!==null&&(ne.lanes|=a),nf(E.return,a,r),$.lanes|=a;break}ne=ne.next}}else if(E.tag===10)I=E.type===r.type?null:E.child;else if(E.tag===18){if(I=E.return,I===null)throw Error(i(341));I.lanes|=a,$=I.alternate,$!==null&&($.lanes|=a),nf(I,a,r),I=E.sibling}else I=E.child;if(I!==null)I.return=E;else for(I=E;I!==null;){if(I===r){I=null;break}if(E=I.sibling,E!==null){E.return=I.return,I=E;break}I=I.return}E=I}Mn(e,r,y.children,a),r=r.child}return r;case 9:return y=r.type,h=r.pendingProps.children,Hs(r,a),y=yr(y),h=h(y),r.flags|=1,Mn(e,r,h,a),r.child;case 14:return h=r.type,y=Fr(h,r.pendingProps),y=Fr(h.type,y),up(e,r,h,y,a);case 15:return dp(e,r,r.type,r.pendingProps,a);case 17:return h=r.type,y=r.pendingProps,y=r.elementType===h?y:Fr(h,y),bc(e,r),r.tag=1,Wn(h)?(e=!0,oc(r)):e=!1,Hs(r,a),np(r,h,y),vf(r,h,y,a),bf(null,r,h,!0,e,a);case 19:return vp(e,r,a);case 22:return fp(e,r,a)}throw Error(i(156,r.tag))};function Up(e,r){return Nl(e,r)}function ay(e,r,a,h){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function br(e,r,a,h){return new ay(e,r,a,h)}function Uf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ly(e){if(typeof e=="function")return Uf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ee)return 11;if(e===J)return 14}return 2}function fo(e,r){var a=e.alternate;return a===null?(a=br(e.tag,r,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=r,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&14680064,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,r=e.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function Fc(e,r,a,h,y,E){var I=2;if(h=e,typeof e=="function")Uf(e)&&(I=1);else if(typeof e=="string")I=5;else e:switch(e){case U:return Zo(a.children,y,E,r);case j:I=8,y|=8;break;case te:return e=br(12,a,r,y|2),e.elementType=te,e.lanes=E,e;case G:return e=br(13,a,r,y),e.elementType=G,e.lanes=E,e;case oe:return e=br(19,a,r,y),e.elementType=oe,e.lanes=E,e;case de:return Lc(a,y,E,r);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Z:I=10;break e;case K:I=9;break e;case ee:I=11;break e;case J:I=14;break e;case Y:I=16,h=null;break e}throw Error(i(130,e==null?e:typeof e,""))}return r=br(I,a,r,y),r.elementType=e,r.type=h,r.lanes=E,r}function Zo(e,r,a,h){return e=br(7,e,h,r),e.lanes=a,e}function Lc(e,r,a,h){return e=br(22,e,h,r),e.elementType=de,e.lanes=a,e.stateNode={isHidden:!1},e}function Zf(e,r,a){return e=br(6,e,null,r),e.lanes=a,e}function Wf(e,r,a){return r=br(4,e.children!==null?e.children:[],e.key,r),r.lanes=a,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}function cy(e,r,a,h,y){this.tag=r,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ii(0),this.expirationTimes=Ii(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ii(0),this.identifierPrefix=h,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function qf(e,r,a,h,y,E,I,$,ne){return e=new cy(e,r,a,$,ne),r===1?(r=1,E===!0&&(r|=8)):r=0,E=br(3,null,null,r),e.current=E,E.stateNode=e,E.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},of(E),e}function uy(e,r,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:h==null?null:""+h,children:e,containerInfo:r,implementation:a}}function Zp(e){if(!e)return no;e=e._reactInternals;e:{if(Ur(e)!==e||e.tag!==1)throw Error(i(170));var r=e;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Wn(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(i(171))}if(e.tag===1){var a=e.type;if(Wn(a))return Ah(e,a,r)}return r}function Wp(e,r,a,h,y,E,I,$,ne){return e=qf(a,h,!0,e,y,E,I,$,ne),e.context=Zp(null),a=e.current,h=In(),y=co(a),E=bi(h,y),E.callback=r??null,oo(a,E,y),e.current.lanes=y,er(e,y,h),$n(e,h),e}function Mc(e,r,a,h){var y=r.current,E=In(),I=co(y);return a=Zp(a),r.context===null?r.context=a:r.pendingContext=a,r=bi(E,I),r.payload={element:e},h=h===void 0?null:h,h!==null&&(r.callback=h),e=oo(y,r,I),e!==null&&(Ir(e,y,I,E),hc(e,y,I)),I}function Ic(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function qp(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<r?a:r}}function Gf(e,r){qp(e,r),(e=e.alternate)&&qp(e,r)}function dy(){return null}var Gp=typeof reportError=="function"?reportError:function(e){console.error(e)};function $f(e){this._internalRoot=e}Oc.prototype.render=$f.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(i(409));Mc(e,r,null,null)},Oc.prototype.unmount=$f.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;Ho(function(){Mc(null,e,null,null)}),r[St]=null}};function Oc(e){this._internalRoot=e}Oc.prototype.unstable_scheduleHydration=function(e){if(e){var r=ms();e={blockedOn:null,target:e,priority:r};for(var a=0;a<an.length&&r!==0&&r<an[a].priority;a++);an.splice(a,0,e),a===0&&gs(e)}};function Kf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function jc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function $p(){}function fy(e,r,a,h,y){if(y){if(typeof h=="function"){var E=h;h=function(){var ge=Ic(I);E.call(ge)}}var I=Wp(r,h,e,0,null,!1,!1,"",$p);return e._reactRootContainer=I,e[St]=I.current,Yi(e.nodeType===8?e.parentNode:e),Ho(),I}for(;y=e.lastChild;)e.removeChild(y);if(typeof h=="function"){var $=h;h=function(){var ge=Ic(ne);$.call(ge)}}var ne=qf(e,0,!1,null,null,!1,!1,"",$p);return e._reactRootContainer=ne,e[St]=ne.current,Yi(e.nodeType===8?e.parentNode:e),Ho(function(){Mc(r,ne,a,h)}),ne}function zc(e,r,a,h,y){var E=a._reactRootContainer;if(E){var I=E;if(typeof y=="function"){var $=y;y=function(){var ne=Ic(I);$.call(ne)}}Mc(r,I,e,y)}else I=fy(a,r,e,y,h);return Ic(I)}hs=function(e){switch(e.tag){case 3:var r=e.stateNode;if(r.current.memoizedState.isDehydrated){var a=tt(r.pendingLanes);a!==0&&(Br(r,a|1),$n(r,Zt()),(Ct&6)===0&&(qs=Zt()+500,ro()))}break;case 13:Ho(function(){var h=wi(e,1);if(h!==null){var y=In();Ir(h,e,1,y)}}),Gf(e,1)}},ai=function(e){if(e.tag===13){var r=wi(e,134217728);if(r!==null){var a=In();Ir(r,e,134217728,a)}Gf(e,134217728)}},ps=function(e){if(e.tag===13){var r=co(e),a=wi(e,r);if(a!==null){var h=In();Ir(a,e,r,h)}Gf(e,r)}},ms=function(){return _t},wo=function(e,r){var a=_t;try{return _t=e,r()}finally{_t=a}},Ae=function(e,r,a){switch(r){case"input":if(lt(e,a),r=a.name,a.type==="radio"&&r!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var h=a[r];if(h!==e&&h.form===e.form){var y=Ns(h);if(!y)throw Error(i(90));ot(h),lt(h,y)}}}break;case"textarea":$t(e,a);break;case"select":r=a.value,r!=null&&rt(e,!!a.multiple,r,!1)}},Rt=zf,zt=Ho;var hy={usingClientEntryPoint:!1,Events:[xi,Ai,Ns,Fe,wt,zf]},Ja={findFiberByHostInstance:gi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},py={bundleType:Ja.bundleType,version:Ja.version,rendererPackageName:Ja.rendererPackageName,rendererConfig:Ja.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Dl(e),e===null?null:e.stateNode},findFiberByHostInstance:Ja.findFiberByHostInstance||dy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hc.isDisabled&&Hc.supportsFiber)try{yo=Hc.inject(py),Jn=Hc}catch{}}return Kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hy,Kn.createPortal=function(e,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kf(r))throw Error(i(200));return uy(e,r,null,a)},Kn.createRoot=function(e,r){if(!Kf(e))throw Error(i(299));var a=!1,h="",y=Gp;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onRecoverableError!==void 0&&(y=r.onRecoverableError)),r=qf(e,1,!1,null,null,a,!1,h,y),e[St]=r.current,Yi(e.nodeType===8?e.parentNode:e),new $f(r)},Kn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=Dl(r),e=e===null?null:e.stateNode,e},Kn.flushSync=function(e){return Ho(e)},Kn.hydrate=function(e,r,a){if(!jc(r))throw Error(i(200));return zc(null,e,r,!0,a)},Kn.hydrateRoot=function(e,r,a){if(!Kf(e))throw Error(i(405));var h=a!=null&&a.hydratedSources||null,y=!1,E="",I=Gp;if(a!=null&&(a.unstable_strictMode===!0&&(y=!0),a.identifierPrefix!==void 0&&(E=a.identifierPrefix),a.onRecoverableError!==void 0&&(I=a.onRecoverableError)),r=Wp(r,null,e,1,a??null,y,!1,E,I),e[St]=r.current,Yi(e),h)for(e=0;e<h.length;e++)a=h[e],y=a._getVersion,y=y(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,y]:r.mutableSourceEagerHydrationData.push(a,y);return new Oc(r)},Kn.render=function(e,r,a){if(!jc(r))throw Error(i(200));return zc(null,e,r,!1,a)},Kn.unmountComponentAtNode=function(e){if(!jc(e))throw Error(i(40));return e._reactRootContainer?(Ho(function(){zc(null,null,e,!1,function(){e._reactRootContainer=null,e[St]=null})}),!0):!1},Kn.unstable_batchedUpdates=zf,Kn.unstable_renderSubtreeIntoContainer=function(e,r,a,h){if(!jc(a))throw Error(i(200));if(e==null||e._reactInternals===void 0)throw Error(i(38));return zc(e,r,a,!1,h)},Kn.version="18.3.1-next-f1338f8080-20240426",Kn}var nm;function xx(){if(nm)return Jf.exports;nm=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(s){console.error(s)}}return n(),Jf.exports=Cy(),Jf.exports}var rm;function Ey(){if(rm)return Vc;rm=1;var n=xx();return Vc.createRoot=n.createRoot,Vc.hydrateRoot=n.hydrateRoot,Vc}var ky=Ey();const Sy="/api",j0=100;async function gt(n,s){const i=await fetch(`${Sy}${n}`,{...s,headers:{"Content-Type":"application/json",...s==null?void 0:s.headers}});if(!i.ok){const l=await i.text();let c=l||i.statusText;try{const u=JSON.parse(l);u.detail&&(c=u.detail)}catch{}throw new Error(c)}return i.json()}function By(n){return n instanceof DOMException&&n.name==="AbortError"?!0:n instanceof Error&&n.name==="AbortError"}const nt={getHealth:()=>gt("/health"),getRadioConfig:()=>gt("/radio/config"),updateRadioConfig:n=>gt("/radio/config",{method:"PATCH",body:JSON.stringify(n)}),setPrivateKey:n=>gt("/radio/private-key",{method:"PUT",body:JSON.stringify({private_key:n})}),sendAdvertisement:(n=!0)=>gt(`/radio/advertise?flood=${n}`,{method:"POST"}),rebootRadio:()=>gt("/radio/reboot",{method:"POST"}),reconnectRadio:()=>gt("/radio/reconnect",{method:"POST"}),getContacts:(n=100,s=0)=>gt(`/contacts?limit=${n}&offset=${s}`),getContact:n=>gt(`/contacts/${n}`),syncContacts:()=>gt("/contacts/sync",{method:"POST"}),addContactToRadio:n=>gt(`/contacts/${n}/add-to-radio`,{method:"POST"}),removeContactFromRadio:n=>gt(`/contacts/${n}/remove-from-radio`,{method:"POST"}),deleteContact:n=>gt(`/contacts/${n}`,{method:"DELETE"}),createContact:(n,s,i)=>gt("/contacts",{method:"POST",body:JSON.stringify({public_key:n,name:s,try_historical:i})}),markContactRead:n=>gt(`/contacts/${n}/mark-read`,{method:"POST"}),requestTelemetry:(n,s)=>gt(`/contacts/${n}/telemetry`,{method:"POST",body:JSON.stringify({password:s})}),sendRepeaterCommand:(n,s)=>gt(`/contacts/${n}/command`,{method:"POST",body:JSON.stringify({command:s})}),getChannels:()=>gt("/channels"),getChannel:n=>gt(`/channels/${n}`),createChannel:(n,s)=>gt("/channels",{method:"POST",body:JSON.stringify({name:n,key:s})}),syncChannels:()=>gt("/channels/sync",{method:"POST"}),deleteChannel:n=>gt(`/channels/${n}`,{method:"DELETE"}),markChannelRead:n=>gt(`/channels/${n}/mark-read`,{method:"POST"}),getMessages:(n,s)=>{const i=new URLSearchParams;n!=null&&n.limit&&i.set("limit",n.limit.toString()),n!=null&&n.offset&&i.set("offset",n.offset.toString()),n!=null&&n.type&&i.set("type",n.type),n!=null&&n.conversation_key&&i.set("conversation_key",n.conversation_key);const l=i.toString();return gt(`/messages${l?`?${l}`:""}`,{signal:s})},getMessagesBulk:(n,s=j0)=>gt(`/messages/bulk?limit_per_conversation=${s}`,{method:"POST",body:JSON.stringify(n)}),sendDirectMessage:(n,s)=>gt("/messages/direct",{method:"POST",body:JSON.stringify({destination:n,text:s})}),sendChannelMessage:(n,s)=>gt("/messages/channel",{method:"POST",body:JSON.stringify({channel_key:n,text:s})}),getUndecryptedPacketCount:()=>gt("/packets/undecrypted/count"),decryptHistoricalPackets:n=>gt("/packets/decrypt/historical",{method:"POST",body:JSON.stringify(n)}),runMaintenance:n=>gt("/packets/maintenance",{method:"POST",body:JSON.stringify({prune_undecrypted_days:n})}),markAllRead:()=>gt("/read-state/mark-all-read",{method:"POST"}),getSettings:()=>gt("/settings"),updateSettings:n=>gt("/settings",{method:"PATCH",body:JSON.stringify(n)}),addFavorite:(n,s)=>gt("/settings/favorites",{method:"POST",body:JSON.stringify({type:n,id:s})}),removeFavorite:(n,s)=>gt("/settings/favorites",{method:"DELETE",body:JSON.stringify({type:n,id:s})}),toggleFavorite:(n,s)=>gt("/settings/favorites/toggle",{method:"POST",body:JSON.stringify({type:n,id:s})}),updateLastMessageTime:(n,s)=>gt("/settings/last-message-time",{method:"POST",body:JSON.stringify({state_key:n,timestamp:s})}),migratePreferences:n=>gt("/settings/migrate",{method:"POST",body:JSON.stringify(n)})};function Py(n){const s=R.useRef(null),i=R.useRef(null),[l,c]=R.useState(!1),u=R.useRef(n);R.useEffect(()=>{u.current=n},[n]);const p=R.useCallback(()=>{const d=window.location.protocol==="https:"?"wss:":"ws:",m=window.location.port==="5173"?"ws://localhost:8000/api/ws":`${d}//${window.location.host}/api/ws`,x=new WebSocket(m);x.onopen=()=>{console.log("WebSocket connected"),c(!0)},x.onclose=()=>{console.log("WebSocket disconnected"),c(!1),s.current=null,i.current=window.setTimeout(()=>{console.log("Attempting WebSocket reconnect..."),p()},3e3)},x.onerror=A=>{console.error("WebSocket error:",A)},x.onmessage=A=>{var _,k,N,C,b,S,B,D,F;try{const M=JSON.parse(A.data),z=u.current;switch(M.type){case"health":(_=z.onHealth)==null||_.call(z,M.data);break;case"contacts":(k=z.onContacts)==null||k.call(z,M.data);break;case"channels":(N=z.onChannels)==null||N.call(z,M.data);break;case"message":(C=z.onMessage)==null||C.call(z,M.data);break;case"contact":(b=z.onContact)==null||b.call(z,M.data);break;case"raw_packet":(S=z.onRawPacket)==null||S.call(z,M.data);break;case"message_acked":{const U=M.data;(B=z.onMessageAcked)==null||B.call(z,U.message_id,U.ack_count,U.paths);break}case"error":(D=z.onError)==null||D.call(z,M.data);break;case"success":(F=z.onSuccess)==null||F.call(z,M.data);break;case"pong":break;default:console.log("Unknown WebSocket message type:",M.type)}}catch(M){console.error("Failed to parse WebSocket message:",M)}},s.current=x},[]);return R.useEffect(()=>{p();const d=setInterval(()=>{var g;((g=s.current)==null?void 0:g.readyState)===WebSocket.OPEN&&s.current.send("ping")},3e4);return()=>{clearInterval(d),i.current&&clearTimeout(i.current),s.current&&s.current.close()}},[p]),{connected:l}}const id=2,Ty=300*1e3;function im(n){const s=Math.floor(n/3600),i=Math.floor(n%3600/60),l=Math.floor(n%60);return`${s}h${i}m${l}s`}function Dy(n){return n<=5?"":n<=10?"":n<=25?"":n<=50?"":""}function Ry(n,s){const l=Math.floor(Date.now()/1e3)-n.startTime,c=s.uptime_seconds-n.uptime,u=s.airtime_seconds-n.txAirtime,p=s.rx_airtime_seconds-n.rxAirtime,d=s.sent_flood-n.sentFlood,g=s.sent_direct-n.sentDirect,m=s.recv_flood-n.recvFlood,x=s.recv_direct-n.recvDirect,A=c>0?u/c*100:0,_=c>0?p/c*100:0,k=d+g,N=m+x,C=k>0?A*(d/k):0,b=k>0?A*(g/k):0,S=N>0?_*(m/N):0,B=N>0?_*(x/N):0,D=Dy(A),F=Math.max(0,100-A-_);return["Airtime/Duty Cycle Statistics",`Duration: ${im(l)} (uptime delta: ${im(c)})`,"",`${D} TX Airtime: ${A.toFixed(3)}% (${k.toLocaleString()} pkts)`,`  Flood: ${C.toFixed(3)}% (${d.toLocaleString()} pkts)`,`  Direct: ${b.toFixed(3)}% (${g.toLocaleString()} pkts)`,"",`RX Airtime: ${_.toFixed(3)}% (${N.toLocaleString()} pkts)`,`  Flood: ${S.toFixed(3)}% (${m.toLocaleString()} pkts)`,`  Direct: ${B.toFixed(3)}% (${x.toLocaleString()} pkts)`,"",`Idle: ${F.toFixed(3)}%`].join(`
`)}function $s(n,s,i){const l=Math.floor(Date.now()/1e3);return{id:-Date.now(),type:"PRIV",conversation_key:n,text:s,sender_timestamp:l,received_at:l,paths:null,txt_type:0,signature:null,outgoing:i,acked:1}}function Ny(n){const s=R.useRef(null),i=R.useRef(null),l=R.useCallback(()=>{i.current!==null&&(clearInterval(i.current),i.current=null),s.current=null},[]),c=R.useCallback(async()=>{const p=s.current;if(!p)return;let d=null,g=null;for(let m=0;m<2;m++)try{d=await nt.requestTelemetry(p.conversationId,"");break}catch(x){g=x instanceof Error?x:new Error("Unknown error"),m===0&&await new Promise(A=>setTimeout(A,2e3))}if(d){const m=$s(p.conversationId,Ry(p,d),!1);n(x=>[...x,m])}else{const m=$s(p.conversationId,`Duty cycle poll failed after retry: ${(g==null?void 0:g.message)??"Unknown error"}`,!1);n(x=>[...x,m])}},[n]),u=R.useCallback(async(p,d)=>{const g=p.trim().toLowerCase();if(g==="dutycycle_start"){l();let m=null,x=null;for(let k=0;k<2;k++)try{m=await nt.requestTelemetry(d,"");break}catch(N){x=N instanceof Error?N:new Error("Unknown error"),k===0&&await new Promise(C=>setTimeout(C,2e3))}if(!m){const k=$s(d,`Failed to start duty cycle tracking after retry: ${(x==null?void 0:x.message)??"Unknown error"}`,!1);return n(N=>[...N,k]),!0}const A=Math.floor(Date.now()/1e3);s.current={startTime:A,uptime:m.uptime_seconds,txAirtime:m.airtime_seconds,rxAirtime:m.rx_airtime_seconds,sentFlood:m.sent_flood,sentDirect:m.sent_direct,recvFlood:m.recv_flood,recvDirect:m.recv_direct,conversationId:d};const _=$s(d,`Airtime/duty cycle statistics gathering begins at ${A}. Logs will follow every 5 minutes. To stop, run dutycycle_stop or navigate away from this conversation.`,!1);return n(k=>[...k,_]),i.current=window.setInterval(c,Ty),!0}if(g==="dutycycle_stop"){if(s.current&&s.current.conversationId===d){await c(),l();const m=$s(d,"Airtime/duty cycle statistics gathering stopped.",!1);n(x=>[...x,m])}else{const m=$s(d,"Duty cycle tracking is not active.",!1);n(x=>[...x,m])}return!0}return!1},[n,l,c]);return R.useEffect(()=>()=>{i.current!==null&&clearInterval(i.current)},[]),{handleAirtimeCommand:u,stopTracking:l}}function ru(n){if(n<60)return`${n}s`;const s=Math.floor(n/86400),i=Math.floor(n%86400/3600),l=Math.floor(n%3600/60);return s>0?i>0&&l>0?`${s}d${i}h${l}m`:i>0?`${s}d${i}h`:l>0?`${s}d${l}m`:`${s}d`:i>0?l>0?`${i}h${l}m`:`${i}h`:`${l}m`}function Fy(n){return["Telemetry",`Battery Voltage: ${n.battery_volts.toFixed(3)}V`,`Uptime: ${ru(n.uptime_seconds)}`,`TX Airtime: ${ru(n.airtime_seconds)}`,`RX Airtime: ${ru(n.rx_airtime_seconds)}`,"",`Noise Floor: ${n.noise_floor_dbm} dBm`,`Last RSSI: ${n.last_rssi_dbm} dBm`,`Last SNR: ${n.last_snr_db.toFixed(1)} dB`,"",`Packets: ${n.packets_received.toLocaleString()} rx / ${n.packets_sent.toLocaleString()} tx`,`Flood: ${n.recv_flood.toLocaleString()} rx / ${n.sent_flood.toLocaleString()} tx`,`Direct: ${n.recv_direct.toLocaleString()} rx / ${n.sent_direct.toLocaleString()} tx`,`Duplicates: ${n.flood_dups.toLocaleString()} flood / ${n.direct_dups.toLocaleString()} direct`,"",`TX Queue: ${n.tx_queue_len}`,`Debug Flags: ${n.full_events}`].join(`
`)}function Ly(n){if(n.length===0)return`Neighbors
No neighbors reported`;const s=[...n].sort((l,c)=>c.snr-l.snr),i=[`Neighbors (${s.length})`];for(const l of s){const c=l.name||l.pubkey_prefix,u=l.snr>=0?`+${l.snr.toFixed(1)}`:l.snr.toFixed(1);i.push(`${c}, ${u} dB [${ru(l.last_heard_seconds)} ago]`)}return i.join(`
`)}function My(n){if(n.length===0)return`ACL
No ACL entries`;const s=[`ACL (${n.length})`];for(const i of n){const l=i.name||i.pubkey_prefix;s.push(`${l}: ${i.permission_name}`)}return s.join(`
`)}function qo(n,s,i,l=0){const c=Math.floor(Date.now()/1e3);return{id:-Date.now()-l,type:"PRIV",conversation_key:n,text:s,sender_timestamp:c,received_at:c,paths:null,txt_type:0,signature:null,outgoing:i,acked:1}}function Iy(n,s,i){const[l,c]=R.useState(!1),{handleAirtimeCommand:u,stopTracking:p}=Ny(i);R.useEffect(()=>{c(!1),p()},[n==null?void 0:n.id,p]);const d=R.useMemo(()=>{if(!n||n.type!=="contact")return!1;const x=s.find(A=>A.public_key===n.id);return(x==null?void 0:x.type)===id},[n,s]),g=R.useCallback(async x=>{if(!(!n||n.type!=="contact")&&d)try{const A=await nt.requestTelemetry(n.id,x),_=qo(n.id,Fy(A),!1,0),k=qo(n.id,Ly(A.neighbors),!1,1),N=qo(n.id,My(A.acl),!1,2);i(C=>[...C,_,k,N]),c(!0)}catch(A){const _=qo(n.id,`Telemetry request failed: ${A instanceof Error?A.message:"Unknown error"}`,!1,0);i(k=>[...k,_])}},[n,d,i]),m=R.useCallback(async x=>{if(!n||n.type!=="contact"||!d||!l||await u(x,n.id))return;const _=qo(n.id,`> ${x}`,!0,0);i(k=>[...k,_]);try{const k=await nt.sendRepeaterCommand(n.id,x),N=qo(n.id,k.response,!1,1);k.sender_timestamp&&(N.sender_timestamp=k.sender_timestamp),i(C=>[...C,N])}catch(k){const N=qo(n.id,`Command failed: ${k instanceof Error?k.message:"Unknown error"}`,!1,1);i(C=>[...C,N])}},[n,d,l,i,u]);return{repeaterLoggedIn:l,activeContactIsRepeater:d,handleTelemetryRequest:g,handleRepeaterCommand:m}}const Ax="remoteterm-lastMessageTime",vx="remoteterm-sortOrder";let $u={};function om(n){$u={...n}}function sm(){return{...$u}}function n0(n,s){return $u[n]=s,{...$u}}function jr(n,s){return`${n}-${s}`}function Oy(){try{const n=localStorage.getItem(Ax);return n?JSON.parse(n):{}}catch{return{}}}function jy(){try{return localStorage.getItem(vx)==="alpha"?"alpha":"recent"}catch{return"recent"}}function am(){try{localStorage.removeItem(Ax),localStorage.removeItem(vx)}catch{}}function lm(n,s){if(!s)return!1;const i=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return new RegExp(`@\\[${i}\\]`,"i").test(n)}function zy(n,s,i,l=null){const[c,u]=R.useState({}),[p,d]=R.useState({}),[g,m]=R.useState(sm),x=R.useRef(l);R.useEffect(()=>{x.current=l},[l]);const A=R.useRef(new Set),_=R.useRef(new Set);R.useEffect(()=>{const S=n.filter(F=>!A.current.has(F.key)),B=s.filter(F=>F.public_key&&!_.current.has(F.public_key));if(S.length===0&&B.length===0)return;S.forEach(F=>A.current.add(F.key)),B.forEach(F=>_.current.add(F.public_key)),(async()=>{const F=[...S.map(M=>({type:"CHAN",conversation_key:M.key})),...B.map(M=>({type:"PRIV",conversation_key:M.public_key}))];if(F.length!==0)try{const z={};for(let Z=0;Z<F.length;Z+=200){const K=F.slice(Z,Z+200),ee=await nt.getMessagesBulk(K,j0);Object.assign(z,ee)}const U={},j={},te={};for(const Z of S){const K=z[`CHAN:${Z.key}`]||[];if(K.length>0){const ee=jr("channel",Z.key),G=Z.last_read_at||0,oe=K.filter(Y=>!Y.outgoing&&Y.received_at>G);oe.length>0&&(U[ee]=oe.length,oe.some(Y=>lm(Y.text,x.current))&&(j[ee]=!0));const J=Math.max(...K.map(Y=>Y.received_at));te[ee]=J,n0(ee,J)}}for(const Z of B){const K=z[`PRIV:${Z.public_key}`]||[];if(K.length>0){const ee=jr("contact",Z.public_key),G=Z.last_read_at||0,oe=K.filter(Y=>!Y.outgoing&&Y.received_at>G);oe.length>0&&(U[ee]=oe.length,oe.some(Y=>lm(Y.text,x.current))&&(j[ee]=!0));const J=Math.max(...K.map(Y=>Y.received_at));te[ee]=J,n0(ee,J)}}Object.keys(U).length>0&&u(Z=>({...Z,...U})),Object.keys(j).length>0&&d(Z=>({...Z,...j})),m(sm())}catch(M){console.error("Failed to fetch messages bulk:",M)}})()},[n,s]),R.useEffect(()=>{if(i&&i.type!=="raw"&&i.type!=="map"){const S=jr(i.type,i.id);u(B=>{if(B[S]){const D={...B};return delete D[S],D}return B}),d(B=>{if(B[S]){const D={...B};return delete D[S],D}return B}),i.type==="channel"?nt.markChannelRead(i.id).catch(B=>{console.error("Failed to mark channel as read on server:",B)}):i.type==="contact"&&nt.markContactRead(i.id).catch(B=>{console.error("Failed to mark contact as read on server:",B)})}},[i]);const k=R.useCallback((S,B)=>{u(D=>({...D,[S]:(D[S]||0)+1})),B&&d(D=>({...D,[S]:!0}))},[]),N=R.useCallback(()=>{u({}),d({}),nt.markAllRead().catch(S=>{console.error("Failed to mark all as read on server:",S)})},[]),C=R.useCallback(S=>{if(S.type==="raw"||S.type==="map")return;const B=jr(S.type,S.id);u(D=>{if(D[B]){const F={...D};return delete F[B],F}return D}),d(D=>{if(D[B]){const F={...D};return delete F[B],F}return D}),S.type==="channel"?nt.markChannelRead(S.id).catch(D=>{console.error("Failed to mark channel as read on server:",D)}):S.type==="contact"&&nt.markContactRead(S.id).catch(D=>{console.error("Failed to mark contact as read on server:",D)})},[]),b=R.useCallback(S=>{let B=null;if(S.type==="CHAN"&&S.conversation_key?B=jr("channel",S.conversation_key):S.type==="PRIV"&&S.conversation_key&&(B=jr("contact",S.conversation_key)),B){const D=S.received_at||Math.floor(Date.now()/1e3),F=n0(B,D);m(F)}},[]);return{unreadCounts:c,mentions:p,lastMessageTimes:g,incrementUnread:k,markAllRead:N,markConversationRead:C,trackNewMessage:b}}var z0=xx();const yx=aa(z0);function Hy(n){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",s.appendChild(i),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n))}const Vy=n=>{switch(n){case"success":return Wy;case"info":return Gy;case"warning":return qy;case"error":return $y;default:return null}},Uy=Array(12).fill(0),Zy=({visible:n,className:s})=>ke.createElement("div",{className:["sonner-loading-wrapper",s].filter(Boolean).join(" "),"data-visible":n},ke.createElement("div",{className:"sonner-spinner"},Uy.map((i,l)=>ke.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${l}`})))),Wy=ke.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ke.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),qy=ke.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ke.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Gy=ke.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ke.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),$y=ke.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ke.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Ky=ke.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ke.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ke.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Qy=()=>{const[n,s]=ke.useState(document.hidden);return ke.useEffect(()=>{const i=()=>{s(document.hidden)};return document.addEventListener("visibilitychange",i),()=>window.removeEventListener("visibilitychange",i)},[]),n};let v0=1;class Yy{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{const i=this.subscribers.indexOf(s);this.subscribers.splice(i,1)}),this.publish=s=>{this.subscribers.forEach(i=>i(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var i;const{message:l,...c}=s,u=typeof(s==null?void 0:s.id)=="number"||((i=s.id)==null?void 0:i.length)>0?s.id:v0++,p=this.toasts.find(g=>g.id===u),d=s.dismissible===void 0?!0:s.dismissible;return this.dismissedToasts.has(u)&&this.dismissedToasts.delete(u),p?this.toasts=this.toasts.map(g=>g.id===u?(this.publish({...g,...s,id:u,title:l}),{...g,...s,id:u,dismissible:d,title:l}):g):this.addToast({title:l,...c,dismissible:d,id:u}),u},this.dismiss=s=>(s?(this.dismissedToasts.add(s),requestAnimationFrame(()=>this.subscribers.forEach(i=>i({id:s,dismiss:!0})))):this.toasts.forEach(i=>{this.subscribers.forEach(l=>l({id:i.id,dismiss:!0}))}),s),this.message=(s,i)=>this.create({...i,message:s}),this.error=(s,i)=>this.create({...i,message:s,type:"error"}),this.success=(s,i)=>this.create({...i,type:"success",message:s}),this.info=(s,i)=>this.create({...i,type:"info",message:s}),this.warning=(s,i)=>this.create({...i,type:"warning",message:s}),this.loading=(s,i)=>this.create({...i,type:"loading",message:s}),this.promise=(s,i)=>{if(!i)return;let l;i.loading!==void 0&&(l=this.create({...i,promise:s,type:"loading",message:i.loading,description:typeof i.description!="function"?i.description:void 0}));const c=Promise.resolve(s instanceof Function?s():s);let u=l!==void 0,p;const d=c.then(async m=>{if(p=["resolve",m],ke.isValidElement(m))u=!1,this.create({id:l,type:"default",message:m});else if(Jy(m)&&!m.ok){u=!1;const A=typeof i.error=="function"?await i.error(`HTTP error! status: ${m.status}`):i.error,_=typeof i.description=="function"?await i.description(`HTTP error! status: ${m.status}`):i.description,N=typeof A=="object"&&!ke.isValidElement(A)?A:{message:A};this.create({id:l,type:"error",description:_,...N})}else if(m instanceof Error){u=!1;const A=typeof i.error=="function"?await i.error(m):i.error,_=typeof i.description=="function"?await i.description(m):i.description,N=typeof A=="object"&&!ke.isValidElement(A)?A:{message:A};this.create({id:l,type:"error",description:_,...N})}else if(i.success!==void 0){u=!1;const A=typeof i.success=="function"?await i.success(m):i.success,_=typeof i.description=="function"?await i.description(m):i.description,N=typeof A=="object"&&!ke.isValidElement(A)?A:{message:A};this.create({id:l,type:"success",description:_,...N})}}).catch(async m=>{if(p=["reject",m],i.error!==void 0){u=!1;const x=typeof i.error=="function"?await i.error(m):i.error,A=typeof i.description=="function"?await i.description(m):i.description,k=typeof x=="object"&&!ke.isValidElement(x)?x:{message:x};this.create({id:l,type:"error",description:A,...k})}}).finally(()=>{u&&(this.dismiss(l),l=void 0),i.finally==null||i.finally.call(i)}),g=()=>new Promise((m,x)=>d.then(()=>p[0]==="reject"?x(p[1]):m(p[1])).catch(x));return typeof l!="string"&&typeof l!="number"?{unwrap:g}:Object.assign(l,{unwrap:g})},this.custom=(s,i)=>{const l=(i==null?void 0:i.id)||v0++;return this.create({jsx:s(l),id:l,...i}),l},this.getActiveToasts=()=>this.toasts.filter(s=>!this.dismissedToasts.has(s.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Qn=new Yy,Xy=(n,s)=>{const i=(s==null?void 0:s.id)||v0++;return Qn.addToast({title:n,...s,id:i}),i},Jy=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",e_=Xy,t_=()=>Qn.toasts,n_=()=>Qn.getActiveToasts(),vt=Object.assign(e_,{success:Qn.success,info:Qn.info,warning:Qn.warning,error:Qn.error,custom:Qn.custom,message:Qn.message,promise:Qn.promise,dismiss:Qn.dismiss,loading:Qn.loading},{getHistory:t_,getToasts:n_});Hy("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Uc(n){return n.label!==void 0}const r_=3,i_="24px",o_="16px",cm=4e3,s_=356,a_=14,l_=45,c_=200;function ti(...n){return n.filter(Boolean).join(" ")}function u_(n){const[s,i]=n.split("-"),l=[];return s&&l.push(s),i&&l.push(i),l}const d_=n=>{var s,i,l,c,u,p,d,g,m;const{invert:x,toast:A,unstyled:_,interacting:k,setHeights:N,visibleToasts:C,heights:b,index:S,toasts:B,expanded:D,removeToast:F,defaultRichColors:M,closeButton:z,style:U,cancelButtonStyle:j,actionButtonStyle:te,className:Z="",descriptionClassName:K="",duration:ee,position:G,gap:oe,expandByDefault:J,classNames:Y,icons:de,closeButtonAriaLabel:W="Close toast"}=n,[ae,H]=ke.useState(null),[P,V]=ke.useState(null),[q,Q]=ke.useState(!1),[pe,ue]=ke.useState(!1),[se,he]=ke.useState(!1),[Ee,We]=ke.useState(!1),[dt,ot]=ke.useState(!1),[Be,Ie]=ke.useState(0),[ft,Nt]=ke.useState(0),lt=ke.useRef(A.duration||ee||cm),Qe=ke.useRef(null),qe=ke.useRef(null),et=S===0,rt=S+1<=C,Ue=A.type,kt=A.dismissible!==!1,$t=A.className||"",Pe=A.descriptionClassName||"",pt=ke.useMemo(()=>b.findIndex(Fe=>Fe.toastId===A.id)||0,[b,A.id]),Ut=ke.useMemo(()=>{var Fe;return(Fe=A.closeButton)!=null?Fe:z},[A.closeButton,z]),sn=ke.useMemo(()=>A.duration||ee||cm,[A.duration,ee]),en=ke.useRef(0),Kt=ke.useRef(0),Ft=ke.useRef(0),Qt=ke.useRef(null),[Yn,Cn]=G.split("-"),xe=ke.useMemo(()=>b.reduce((Fe,wt,Rt)=>Rt>=pt?Fe:Fe+wt.height,0),[b,pt]),Ce=Qy(),Ne=A.invert||x,ct=Ue==="loading";Kt.current=ke.useMemo(()=>pt*oe+xe,[pt,xe]),ke.useEffect(()=>{lt.current=sn},[sn]),ke.useEffect(()=>{Q(!0)},[]),ke.useEffect(()=>{const Fe=qe.current;if(Fe){const wt=Fe.getBoundingClientRect().height;return Nt(wt),N(Rt=>[{toastId:A.id,height:wt,position:A.position},...Rt]),()=>N(Rt=>Rt.filter(zt=>zt.toastId!==A.id))}},[N,A.id]),ke.useLayoutEffect(()=>{if(!q)return;const Fe=qe.current,wt=Fe.style.height;Fe.style.height="auto";const Rt=Fe.getBoundingClientRect().height;Fe.style.height=wt,Nt(Rt),N(zt=>zt.find(ut=>ut.toastId===A.id)?zt.map(ut=>ut.toastId===A.id?{...ut,height:Rt}:ut):[{toastId:A.id,height:Rt,position:A.position},...zt])},[q,A.title,A.description,N,A.id,A.jsx,A.action,A.cancel]);const ie=ke.useCallback(()=>{ue(!0),Ie(Kt.current),N(Fe=>Fe.filter(wt=>wt.toastId!==A.id)),setTimeout(()=>{F(A)},c_)},[A,F,N,Kt]);ke.useEffect(()=>{if(A.promise&&Ue==="loading"||A.duration===1/0||A.type==="loading")return;let Fe;return D||k||Ce?(()=>{if(Ft.current<en.current){const zt=new Date().getTime()-en.current;lt.current=lt.current-zt}Ft.current=new Date().getTime()})():(()=>{lt.current!==1/0&&(en.current=new Date().getTime(),Fe=setTimeout(()=>{A.onAutoClose==null||A.onAutoClose.call(A,A),ie()},lt.current))})(),()=>clearTimeout(Fe)},[D,k,A,Ue,Ce,ie]),ke.useEffect(()=>{A.delete&&(ie(),A.onDismiss==null||A.onDismiss.call(A,A))},[ie,A.delete]);function Ae(){var Fe;if(de!=null&&de.loading){var wt;return ke.createElement("div",{className:ti(Y==null?void 0:Y.loader,A==null||(wt=A.classNames)==null?void 0:wt.loader,"sonner-loader"),"data-visible":Ue==="loading"},de.loading)}return ke.createElement(Zy,{className:ti(Y==null?void 0:Y.loader,A==null||(Fe=A.classNames)==null?void 0:Fe.loader),visible:Ue==="loading"})}const _e=A.icon||(de==null?void 0:de[Ue])||Vy(Ue);var De,Ye;return ke.createElement("li",{tabIndex:0,ref:qe,className:ti(Z,$t,Y==null?void 0:Y.toast,A==null||(s=A.classNames)==null?void 0:s.toast,Y==null?void 0:Y.default,Y==null?void 0:Y[Ue],A==null||(i=A.classNames)==null?void 0:i[Ue]),"data-sonner-toast":"","data-rich-colors":(De=A.richColors)!=null?De:M,"data-styled":!(A.jsx||A.unstyled||_),"data-mounted":q,"data-promise":!!A.promise,"data-swiped":dt,"data-removed":pe,"data-visible":rt,"data-y-position":Yn,"data-x-position":Cn,"data-index":S,"data-front":et,"data-swiping":se,"data-dismissible":kt,"data-type":Ue,"data-invert":Ne,"data-swipe-out":Ee,"data-swipe-direction":P,"data-expanded":!!(D||J&&q),"data-testid":A.testId,style:{"--index":S,"--toasts-before":S,"--z-index":B.length-S,"--offset":`${pe?Be:Kt.current}px`,"--initial-height":J?"auto":`${ft}px`,...U,...A.style},onDragEnd:()=>{he(!1),H(null),Qt.current=null},onPointerDown:Fe=>{Fe.button!==2&&(ct||!kt||(Qe.current=new Date,Ie(Kt.current),Fe.target.setPointerCapture(Fe.pointerId),Fe.target.tagName!=="BUTTON"&&(he(!0),Qt.current={x:Fe.clientX,y:Fe.clientY})))},onPointerUp:()=>{var Fe,wt,Rt;if(Ee||!kt)return;Qt.current=null;const zt=Number(((Fe=qe.current)==null?void 0:Fe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Hn=Number(((wt=qe.current)==null?void 0:wt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ut=new Date().getTime()-((Rt=Qe.current)==null?void 0:Rt.getTime()),Pt=ae==="x"?zt:Hn,Xn=Math.abs(Pt)/ut;if(Math.abs(Pt)>=l_||Xn>.11){Ie(Kt.current),A.onDismiss==null||A.onDismiss.call(A,A),V(ae==="x"?zt>0?"right":"left":Hn>0?"down":"up"),ie(),We(!0);return}else{var bt,Ht;(bt=qe.current)==null||bt.style.setProperty("--swipe-amount-x","0px"),(Ht=qe.current)==null||Ht.style.setProperty("--swipe-amount-y","0px")}ot(!1),he(!1),H(null)},onPointerMove:Fe=>{var wt,Rt,zt;if(!Qt.current||!kt||((wt=window.getSelection())==null?void 0:wt.toString().length)>0)return;const ut=Fe.clientY-Qt.current.y,Pt=Fe.clientX-Qt.current.x;var Xn;const bt=(Xn=n.swipeDirections)!=null?Xn:u_(G);!ae&&(Math.abs(Pt)>1||Math.abs(ut)>1)&&H(Math.abs(Pt)>Math.abs(ut)?"x":"y");let Ht={x:0,y:0};const Yt=Re=>1/(1.5+Math.abs(Re)/20);if(ae==="y"){if(bt.includes("top")||bt.includes("bottom"))if(bt.includes("top")&&ut<0||bt.includes("bottom")&&ut>0)Ht.y=ut;else{const Re=ut*Yt(ut);Ht.y=Math.abs(Re)<Math.abs(ut)?Re:ut}}else if(ae==="x"&&(bt.includes("left")||bt.includes("right")))if(bt.includes("left")&&Pt<0||bt.includes("right")&&Pt>0)Ht.x=Pt;else{const Re=Pt*Yt(Pt);Ht.x=Math.abs(Re)<Math.abs(Pt)?Re:Pt}(Math.abs(Ht.x)>0||Math.abs(Ht.y)>0)&&ot(!0),(Rt=qe.current)==null||Rt.style.setProperty("--swipe-amount-x",`${Ht.x}px`),(zt=qe.current)==null||zt.style.setProperty("--swipe-amount-y",`${Ht.y}px`)}},Ut&&!A.jsx&&Ue!=="loading"?ke.createElement("button",{"aria-label":W,"data-disabled":ct,"data-close-button":!0,onClick:ct||!kt?()=>{}:()=>{ie(),A.onDismiss==null||A.onDismiss.call(A,A)},className:ti(Y==null?void 0:Y.closeButton,A==null||(l=A.classNames)==null?void 0:l.closeButton)},(Ye=de==null?void 0:de.close)!=null?Ye:Ky):null,(Ue||A.icon||A.promise)&&A.icon!==null&&((de==null?void 0:de[Ue])!==null||A.icon)?ke.createElement("div",{"data-icon":"",className:ti(Y==null?void 0:Y.icon,A==null||(c=A.classNames)==null?void 0:c.icon)},A.promise||A.type==="loading"&&!A.icon?A.icon||Ae():null,A.type!=="loading"?_e:null):null,ke.createElement("div",{"data-content":"",className:ti(Y==null?void 0:Y.content,A==null||(u=A.classNames)==null?void 0:u.content)},ke.createElement("div",{"data-title":"",className:ti(Y==null?void 0:Y.title,A==null||(p=A.classNames)==null?void 0:p.title)},A.jsx?A.jsx:typeof A.title=="function"?A.title():A.title),A.description?ke.createElement("div",{"data-description":"",className:ti(K,Pe,Y==null?void 0:Y.description,A==null||(d=A.classNames)==null?void 0:d.description)},typeof A.description=="function"?A.description():A.description):null),ke.isValidElement(A.cancel)?A.cancel:A.cancel&&Uc(A.cancel)?ke.createElement("button",{"data-button":!0,"data-cancel":!0,style:A.cancelButtonStyle||j,onClick:Fe=>{Uc(A.cancel)&&kt&&(A.cancel.onClick==null||A.cancel.onClick.call(A.cancel,Fe),ie())},className:ti(Y==null?void 0:Y.cancelButton,A==null||(g=A.classNames)==null?void 0:g.cancelButton)},A.cancel.label):null,ke.isValidElement(A.action)?A.action:A.action&&Uc(A.action)?ke.createElement("button",{"data-button":!0,"data-action":!0,style:A.actionButtonStyle||te,onClick:Fe=>{Uc(A.action)&&(A.action.onClick==null||A.action.onClick.call(A.action,Fe),!Fe.defaultPrevented&&ie())},className:ti(Y==null?void 0:Y.actionButton,A==null||(m=A.classNames)==null?void 0:m.actionButton)},A.action.label):null)};function um(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function f_(n,s){const i={};return[n,s].forEach((l,c)=>{const u=c===1,p=u?"--mobile-offset":"--offset",d=u?o_:i_;function g(m){["top","right","bottom","left"].forEach(x=>{i[`${p}-${x}`]=typeof m=="number"?`${m}px`:m})}typeof l=="number"||typeof l=="string"?g(l):typeof l=="object"?["top","right","bottom","left"].forEach(m=>{l[m]===void 0?i[`${p}-${m}`]=d:i[`${p}-${m}`]=typeof l[m]=="number"?`${l[m]}px`:l[m]}):g(d)}),i}const h_=ke.forwardRef(function(s,i){const{id:l,invert:c,position:u="bottom-right",hotkey:p=["altKey","KeyT"],expand:d,closeButton:g,className:m,offset:x,mobileOffset:A,theme:_="light",richColors:k,duration:N,style:C,visibleToasts:b=r_,toastOptions:S,dir:B=um(),gap:D=a_,icons:F,containerAriaLabel:M="Notifications"}=s,[z,U]=ke.useState([]),j=ke.useMemo(()=>l?z.filter(q=>q.toasterId===l):z.filter(q=>!q.toasterId),[z,l]),te=ke.useMemo(()=>Array.from(new Set([u].concat(j.filter(q=>q.position).map(q=>q.position)))),[j,u]),[Z,K]=ke.useState([]),[ee,G]=ke.useState(!1),[oe,J]=ke.useState(!1),[Y,de]=ke.useState(_!=="system"?_:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),W=ke.useRef(null),ae=p.join("+").replace(/Key/g,"").replace(/Digit/g,""),H=ke.useRef(null),P=ke.useRef(!1),V=ke.useCallback(q=>{U(Q=>{var pe;return(pe=Q.find(ue=>ue.id===q.id))!=null&&pe.delete||Qn.dismiss(q.id),Q.filter(({id:ue})=>ue!==q.id)})},[]);return ke.useEffect(()=>Qn.subscribe(q=>{if(q.dismiss){requestAnimationFrame(()=>{U(Q=>Q.map(pe=>pe.id===q.id?{...pe,delete:!0}:pe))});return}setTimeout(()=>{yx.flushSync(()=>{U(Q=>{const pe=Q.findIndex(ue=>ue.id===q.id);return pe!==-1?[...Q.slice(0,pe),{...Q[pe],...q},...Q.slice(pe+1)]:[q,...Q]})})})}),[z]),ke.useEffect(()=>{if(_!=="system"){de(_);return}if(_==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?de("dark"):de("light")),typeof window>"u")return;const q=window.matchMedia("(prefers-color-scheme: dark)");try{q.addEventListener("change",({matches:Q})=>{de(Q?"dark":"light")})}catch{q.addListener(({matches:pe})=>{try{de(pe?"dark":"light")}catch(ue){console.error(ue)}})}},[_]),ke.useEffect(()=>{z.length<=1&&G(!1)},[z]),ke.useEffect(()=>{const q=Q=>{var pe;if(p.every(he=>Q[he]||Q.code===he)){var se;G(!0),(se=W.current)==null||se.focus()}Q.code==="Escape"&&(document.activeElement===W.current||(pe=W.current)!=null&&pe.contains(document.activeElement))&&G(!1)};return document.addEventListener("keydown",q),()=>document.removeEventListener("keydown",q)},[p]),ke.useEffect(()=>{if(W.current)return()=>{H.current&&(H.current.focus({preventScroll:!0}),H.current=null,P.current=!1)}},[W.current]),ke.createElement("section",{ref:i,"aria-label":`${M} ${ae}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},te.map((q,Q)=>{var pe;const[ue,se]=q.split("-");return j.length?ke.createElement("ol",{key:q,dir:B==="auto"?um():B,tabIndex:-1,ref:W,className:m,"data-sonner-toaster":!0,"data-sonner-theme":Y,"data-y-position":ue,"data-x-position":se,style:{"--front-toast-height":`${((pe=Z[0])==null?void 0:pe.height)||0}px`,"--width":`${s_}px`,"--gap":`${D}px`,...C,...f_(x,A)},onBlur:he=>{P.current&&!he.currentTarget.contains(he.relatedTarget)&&(P.current=!1,H.current&&(H.current.focus({preventScroll:!0}),H.current=null))},onFocus:he=>{he.target instanceof HTMLElement&&he.target.dataset.dismissible==="false"||P.current||(P.current=!0,H.current=he.relatedTarget)},onMouseEnter:()=>G(!0),onMouseMove:()=>G(!0),onMouseLeave:()=>{oe||G(!1)},onDragEnd:()=>G(!1),onPointerDown:he=>{he.target instanceof HTMLElement&&he.target.dataset.dismissible==="false"||J(!0)},onPointerUp:()=>J(!1)},j.filter(he=>!he.position&&Q===0||he.position===q).map((he,Ee)=>{var We,dt;return ke.createElement(d_,{key:he.id,icons:F,index:Ee,toast:he,defaultRichColors:k,duration:(We=S==null?void 0:S.duration)!=null?We:N,className:S==null?void 0:S.className,descriptionClassName:S==null?void 0:S.descriptionClassName,invert:c,visibleToasts:b,closeButton:(dt=S==null?void 0:S.closeButton)!=null?dt:g,interacting:oe,position:q,style:S==null?void 0:S.style,unstyled:S==null?void 0:S.unstyled,classNames:S==null?void 0:S.classNames,cancelButtonStyle:S==null?void 0:S.cancelButtonStyle,actionButtonStyle:S==null?void 0:S.actionButtonStyle,closeButtonAriaLabel:S==null?void 0:S.closeButtonAriaLabel,removeToast:V,toasts:j.filter(ot=>ot.position==he.position),heights:Z.filter(ot=>ot.position==he.position),setHeights:K,expandByDefault:d,gap:D,expanded:ee,swipeDirections:s.swipeDirections})})):null}))}),p_=({...n})=>w.jsx(h_,{theme:"dark",className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-card group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground",error:"group-[.toaster]:bg-[#2a1a1a] group-[.toaster]:text-[#e8a0a0] group-[.toaster]:border-[#4a2a2a] [&_[data-description]]:text-[#b08080]"}},...n}),Zc=200;function iu(n){return`${n.type}-${n.conversation_key}-${n.text}-${n.sender_timestamp}`}function m_(n){const[s,i]=R.useState([]),[l,c]=R.useState(!1),[u,p]=R.useState(!1),[d,g]=R.useState(!1),m=R.useRef(new Set),x=R.useRef(null),A=R.useRef(null),_=R.useCallback(async(b=!1,S)=>{if(!n||n.type==="raw"){i([]),g(!1);return}const B=n.id;b&&(c(!0),i([]));try{const D=await nt.getMessages({type:n.type==="channel"?"CHAN":"PRIV",conversation_key:n.id,limit:Zc},S);if(A.current!==B)return;i(D),m.current.clear();for(const F of D)m.current.add(iu(F));g(D.length>=Zc)}catch(D){if(By(D))return;console.error("Failed to fetch messages:",D),vt.error("Failed to load messages",{description:D instanceof Error?D.message:"Check your connection"})}finally{b&&c(!1)}},[n]),k=R.useCallback(async()=>{if(!(!n||n.type==="raw"||u||!d)){p(!0);try{const b=await nt.getMessages({type:n.type==="channel"?"CHAN":"PRIV",conversation_key:n.id,limit:Zc,offset:s.length});if(b.length>0){i(S=>[...S,...b]);for(const S of b)m.current.add(iu(S))}g(b.length>=Zc)}catch(b){console.error("Failed to fetch older messages:",b),vt.error("Failed to load older messages",{description:b instanceof Error?b.message:"Check your connection"})}finally{p(!1)}}},[n,u,d,s.length]);R.useEffect(()=>{if(x.current&&x.current.abort(),A.current=(n==null?void 0:n.id)??null,!n||n.type==="raw"){i([]),g(!1);return}const b=new AbortController;return x.current=b,_(!0,b.signal),()=>{b.abort()}},[n==null?void 0:n.id,n==null?void 0:n.type]);const N=R.useCallback(b=>{const S=iu(b);if(m.current.has(S))return console.debug("Duplicate message content ignored:",S.slice(0,50)),!1;if(m.current.add(S),m.current.size>1e3){const B=Array.from(m.current);m.current=new Set(B.slice(-500))}return i(B=>B.some(D=>D.id===b.id)?B:[...B,b]),!0},[]),C=R.useCallback((b,S,B)=>{i(D=>{const F=D.findIndex(M=>M.id===b);if(F>=0){const M=[...D];return M[F]={...D[F],acked:S,...B!==void 0&&{paths:B}},M}return D})},[]);return{messages:s,messagesLoading:l,loadingOlder:u,hasOlderMessages:d,setMessages:i,fetchMessages:_,fetchOlderMessages:k,addMessageIfNew:N,updateMessageAck:C}}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),x_=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,i,l)=>l?l.toUpperCase():i.toLowerCase()),dm=n=>{const s=x_(n);return s.charAt(0).toUpperCase()+s.slice(1)},_x=(...n)=>n.filter((s,i,l)=>!!s&&s.trim()!==""&&l.indexOf(s)===i).join(" ").trim(),A_=n=>{for(const s in n)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var v_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=R.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:c="",children:u,iconNode:p,...d},g)=>R.createElement("svg",{ref:g,...v_,width:s,height:s,stroke:n,strokeWidth:l?Number(i)*24/Number(s):i,className:_x("lucide",c),...!u&&!A_(d)&&{"aria-hidden":"true"},...d},[...p.map(([m,x])=>R.createElement(m,x)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=(n,s)=>{const i=R.forwardRef(({className:l,...c},u)=>R.createElement(y_,{ref:u,iconNode:s,className:_x(`lucide-${g_(dm(n))}`,`lucide-${n}`,l),...c}));return i.displayName=dm(n),i};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],w_=H0("check",__);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],C_=H0("menu",b_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],wx=H0("x",E_);function k_({health:n,config:s,onSettingsClick:i,onMenuClick:l}){const c=(n==null?void 0:n.radio_connected)??!1,[u,p]=R.useState(!1),d=async()=>{p(!0);try{const g=await nt.reconnectRadio();g.connected&&vt.success("Reconnected",{description:g.message})}catch(g){vt.error("Reconnection failed",{description:g instanceof Error?g.message:"Check radio connection and power"})}finally{p(!1)}};return w.jsxs("div",{className:"flex items-center gap-4 px-4 py-2 bg-[#252525] border-b border-[#333] text-xs",children:[l&&w.jsx("button",{onClick:l,className:"md:hidden p-1 bg-transparent border-none text-[#e0e0e0] cursor-pointer","aria-label":"Open menu",children:w.jsx(C_,{className:"h-5 w-5"})}),w.jsx("h1",{className:"text-base font-semibold mr-auto",children:"RemoteTerm"}),w.jsxs("div",{className:"flex items-center gap-1 text-[#888]",children:[w.jsx("div",{className:`w-2 h-2 rounded-full ${c?"bg-[#4caf50]":"bg-[#666]"}`}),w.jsx("span",{className:"hidden lg:inline text-[#e0e0e0]",children:c?"Connected":"Disconnected"})]}),s&&w.jsxs("div",{className:"hidden lg:flex items-center gap-2 text-[#888]",children:[w.jsx("span",{className:"text-[#e0e0e0]",children:s.name||"Unnamed"}),w.jsx("span",{className:"font-mono text-[#888] cursor-pointer hover:text-[#4a9eff]",onClick:()=>{navigator.clipboard.writeText(s.public_key),vt.success("Public key copied!")},title:"Click to copy public key",children:s.public_key.toLowerCase()})]}),!c&&w.jsx("button",{onClick:d,disabled:u,className:"px-3 py-1 bg-[#4a3000] border border-[#6b4500] text-[#ffa500] rounded text-xs cursor-pointer hover:bg-[#5a3a00] disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Reconnecting...":"Reconnect"}),w.jsxs("button",{onClick:i,className:"px-3 py-1 bg-[#333] border border-[#444] text-[#e0e0e0] rounded text-xs cursor-pointer hover:bg-[#444]",children:[w.jsx("span",{role:"img","aria-label":"Settings",children:""})," ","Radio & Config"]})]})}const S_=12;function B_(n){return n.slice(0,S_)}function Di(n,s){return n||B_(s)}const na=2,P_={text:"",background:"#444444",textColor:"#ffffff"};function T_(n){let s=0;for(let i=0;i<n.length;i++){const l=n.charCodeAt(i);s=(s<<5)-s+l,s=s&s}return Math.abs(s)}const D_=/[\u{1F300}-\u{1F9FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]|[\u{1F600}-\u{1F64F}]|[\u{1F680}-\u{1F6FF}]|[\u{1F1E0}-\u{1F1FF}]/u;function R_(n,s){if(!n)return s.slice(0,2).toUpperCase();const i=n.match(D_);if(i)return i[0];const l=n.match(/[a-zA-Z]/g);if(!l||l.length===0)return s.slice(0,2).toUpperCase();const c=n.indexOf(" ");if(c!==-1){const u=l[0],p=n.slice(c+1).match(/[a-zA-Z]/);if(p)return(u+p[0]).toUpperCase()}return l[0].toUpperCase()}function N_(n){const s=T_(n),i=s%360,l=50+(s>>8)%30,c=35+(s>>16)%20,u=`hsl(${i}, ${l}%, ${c}%)`,p=c<45?"#ffffff":"#000000";return{background:u,text:p}}function F_(n,s,i){if(i===na)return P_;const l=R_(n,s),c=N_(s);return{text:l,background:c.background,textColor:c.text}}function y0({name:n,publicKey:s,size:i=28,contactType:l}){const c=F_(n,s,l);return w.jsx("div",{className:"flex items-center justify-center rounded-full font-semibold flex-shrink-0 select-none",style:{backgroundColor:c.background,color:c.textColor,width:i,height:i,fontSize:i*.45},children:c.text})}const bx="remoteterm-favorites";function ts(n,s,i){return n.some(l=>l.type===s&&l.id===i)}function L_(){try{const n=localStorage.getItem(bx);return n?JSON.parse(n):[]}catch{return[]}}function fm(){try{localStorage.removeItem(bx)}catch{}}function Cx(n){var s,i,l="";if(typeof n=="string"||typeof n=="number")l+=n;else if(typeof n=="object")if(Array.isArray(n)){var c=n.length;for(s=0;s<c;s++)n[s]&&(i=Cx(n[s]))&&(l&&(l+=" "),l+=i)}else for(i in n)n[i]&&(l&&(l+=" "),l+=i);return l}function Ex(){for(var n,s,i=0,l="",c=arguments.length;i<c;i++)(n=arguments[i])&&(s=Cx(n))&&(l&&(l+=" "),l+=s);return l}const M_=(n,s)=>{const i=new Array(n.length+s.length);for(let l=0;l<n.length;l++)i[l]=n[l];for(let l=0;l<s.length;l++)i[n.length+l]=s[l];return i},I_=(n,s)=>({classGroupId:n,validator:s}),kx=(n=new Map,s=null,i)=>({nextPart:n,validators:s,classGroupId:i}),Ku="-",hm=[],O_="arbitrary..",j_=n=>{const s=H_(n),{conflictingClassGroups:i,conflictingClassGroupModifiers:l}=n;return{getClassGroupId:p=>{if(p.startsWith("[")&&p.endsWith("]"))return z_(p);const d=p.split(Ku),g=d[0]===""&&d.length>1?1:0;return Sx(d,g,s)},getConflictingClassGroupIds:(p,d)=>{if(d){const g=l[p],m=i[p];return g?m?M_(m,g):g:m||hm}return i[p]||hm}}},Sx=(n,s,i)=>{if(n.length-s===0)return i.classGroupId;const c=n[s],u=i.nextPart.get(c);if(u){const m=Sx(n,s+1,u);if(m)return m}const p=i.validators;if(p===null)return;const d=s===0?n.join(Ku):n.slice(s).join(Ku),g=p.length;for(let m=0;m<g;m++){const x=p[m];if(x.validator(d))return x.classGroupId}},z_=n=>n.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const s=n.slice(1,-1),i=s.indexOf(":"),l=s.slice(0,i);return l?O_+l:void 0})(),H_=n=>{const{theme:s,classGroups:i}=n;return V_(i,s)},V_=(n,s)=>{const i=kx();for(const l in n){const c=n[l];V0(c,i,l,s)}return i},V0=(n,s,i,l)=>{const c=n.length;for(let u=0;u<c;u++){const p=n[u];U_(p,s,i,l)}},U_=(n,s,i,l)=>{if(typeof n=="string"){Z_(n,s,i);return}if(typeof n=="function"){W_(n,s,i,l);return}q_(n,s,i,l)},Z_=(n,s,i)=>{const l=n===""?s:Bx(s,n);l.classGroupId=i},W_=(n,s,i,l)=>{if(G_(n)){V0(n(l),s,i,l);return}s.validators===null&&(s.validators=[]),s.validators.push(I_(i,n))},q_=(n,s,i,l)=>{const c=Object.entries(n),u=c.length;for(let p=0;p<u;p++){const[d,g]=c[p];V0(g,Bx(s,d),i,l)}},Bx=(n,s)=>{let i=n;const l=s.split(Ku),c=l.length;for(let u=0;u<c;u++){const p=l[u];let d=i.nextPart.get(p);d||(d=kx(),i.nextPart.set(p,d)),i=d}return i},G_=n=>"isThemeGetter"in n&&n.isThemeGetter===!0,$_=n=>{if(n<1)return{get:()=>{},set:()=>{}};let s=0,i=Object.create(null),l=Object.create(null);const c=(u,p)=>{i[u]=p,s++,s>n&&(s=0,l=i,i=Object.create(null))};return{get(u){let p=i[u];if(p!==void 0)return p;if((p=l[u])!==void 0)return c(u,p),p},set(u,p){u in i?i[u]=p:c(u,p)}}},_0="!",pm=":",K_=[],mm=(n,s,i,l,c)=>({modifiers:n,hasImportantModifier:s,baseClassName:i,maybePostfixModifierPosition:l,isExternal:c}),Q_=n=>{const{prefix:s,experimentalParseClassName:i}=n;let l=c=>{const u=[];let p=0,d=0,g=0,m;const x=c.length;for(let C=0;C<x;C++){const b=c[C];if(p===0&&d===0){if(b===pm){u.push(c.slice(g,C)),g=C+1;continue}if(b==="/"){m=C;continue}}b==="["?p++:b==="]"?p--:b==="("?d++:b===")"&&d--}const A=u.length===0?c:c.slice(g);let _=A,k=!1;A.endsWith(_0)?(_=A.slice(0,-1),k=!0):A.startsWith(_0)&&(_=A.slice(1),k=!0);const N=m&&m>g?m-g:void 0;return mm(u,k,_,N)};if(s){const c=s+pm,u=l;l=p=>p.startsWith(c)?u(p.slice(c.length)):mm(K_,!1,p,void 0,!0)}if(i){const c=l;l=u=>i({className:u,parseClassName:c})}return l},Y_=n=>{const s=new Map;return n.orderSensitiveModifiers.forEach((i,l)=>{s.set(i,1e6+l)}),i=>{const l=[];let c=[];for(let u=0;u<i.length;u++){const p=i[u],d=p[0]==="[",g=s.has(p);d||g?(c.length>0&&(c.sort(),l.push(...c),c=[]),l.push(p)):c.push(p)}return c.length>0&&(c.sort(),l.push(...c)),l}},X_=n=>({cache:$_(n.cacheSize),parseClassName:Q_(n),sortModifiers:Y_(n),...j_(n)}),J_=/\s+/,e1=(n,s)=>{const{parseClassName:i,getClassGroupId:l,getConflictingClassGroupIds:c,sortModifiers:u}=s,p=[],d=n.trim().split(J_);let g="";for(let m=d.length-1;m>=0;m-=1){const x=d[m],{isExternal:A,modifiers:_,hasImportantModifier:k,baseClassName:N,maybePostfixModifierPosition:C}=i(x);if(A){g=x+(g.length>0?" "+g:g);continue}let b=!!C,S=l(b?N.substring(0,C):N);if(!S){if(!b){g=x+(g.length>0?" "+g:g);continue}if(S=l(N),!S){g=x+(g.length>0?" "+g:g);continue}b=!1}const B=_.length===0?"":_.length===1?_[0]:u(_).join(":"),D=k?B+_0:B,F=D+S;if(p.indexOf(F)>-1)continue;p.push(F);const M=c(S,b);for(let z=0;z<M.length;++z){const U=M[z];p.push(D+U)}g=x+(g.length>0?" "+g:g)}return g},t1=(...n)=>{let s=0,i,l,c="";for(;s<n.length;)(i=n[s++])&&(l=Px(i))&&(c&&(c+=" "),c+=l);return c},Px=n=>{if(typeof n=="string")return n;let s,i="";for(let l=0;l<n.length;l++)n[l]&&(s=Px(n[l]))&&(i&&(i+=" "),i+=s);return i},n1=(n,...s)=>{let i,l,c,u;const p=g=>{const m=s.reduce((x,A)=>A(x),n());return i=X_(m),l=i.cache.get,c=i.cache.set,u=d,d(g)},d=g=>{const m=l(g);if(m)return m;const x=e1(g,i);return c(g,x),x};return u=p,(...g)=>u(t1(...g))},r1=[],dn=n=>{const s=i=>i[n]||r1;return s.isThemeGetter=!0,s},Tx=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Dx=/^\((?:(\w[\w-]*):)?(.+)\)$/i,i1=/^\d+\/\d+$/,o1=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,s1=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,a1=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,l1=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,c1=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ks=n=>i1.test(n),ht=n=>!!n&&!Number.isNaN(Number(n)),po=n=>!!n&&Number.isInteger(Number(n)),r0=n=>n.endsWith("%")&&ht(n.slice(0,-1)),ki=n=>o1.test(n),u1=()=>!0,d1=n=>s1.test(n)&&!a1.test(n),Rx=()=>!1,f1=n=>l1.test(n),h1=n=>c1.test(n),p1=n=>!je(n)&&!ze(n),m1=n=>la(n,Lx,Rx),je=n=>Tx.test(n),Go=n=>la(n,Mx,d1),i0=n=>la(n,y1,ht),gm=n=>la(n,Nx,Rx),g1=n=>la(n,Fx,h1),Wc=n=>la(n,Ix,f1),ze=n=>Dx.test(n),tl=n=>ca(n,Mx),x1=n=>ca(n,_1),xm=n=>ca(n,Nx),A1=n=>ca(n,Lx),v1=n=>ca(n,Fx),qc=n=>ca(n,Ix,!0),la=(n,s,i)=>{const l=Tx.exec(n);return l?l[1]?s(l[1]):i(l[2]):!1},ca=(n,s,i=!1)=>{const l=Dx.exec(n);return l?l[1]?s(l[1]):i:!1},Nx=n=>n==="position"||n==="percentage",Fx=n=>n==="image"||n==="url",Lx=n=>n==="length"||n==="size"||n==="bg-size",Mx=n=>n==="length",y1=n=>n==="number",_1=n=>n==="family-name",Ix=n=>n==="shadow",w1=()=>{const n=dn("color"),s=dn("font"),i=dn("text"),l=dn("font-weight"),c=dn("tracking"),u=dn("leading"),p=dn("breakpoint"),d=dn("container"),g=dn("spacing"),m=dn("radius"),x=dn("shadow"),A=dn("inset-shadow"),_=dn("text-shadow"),k=dn("drop-shadow"),N=dn("blur"),C=dn("perspective"),b=dn("aspect"),S=dn("ease"),B=dn("animate"),D=()=>["auto","avoid","all","avoid-page","page","left","right","column"],F=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],M=()=>[...F(),ze,je],z=()=>["auto","hidden","clip","visible","scroll"],U=()=>["auto","contain","none"],j=()=>[ze,je,g],te=()=>[Ks,"full","auto",...j()],Z=()=>[po,"none","subgrid",ze,je],K=()=>["auto",{span:["full",po,ze,je]},po,ze,je],ee=()=>[po,"auto",ze,je],G=()=>["auto","min","max","fr",ze,je],oe=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],J=()=>["start","end","center","stretch","center-safe","end-safe"],Y=()=>["auto",...j()],de=()=>[Ks,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...j()],W=()=>[n,ze,je],ae=()=>[...F(),xm,gm,{position:[ze,je]}],H=()=>["no-repeat",{repeat:["","x","y","space","round"]}],P=()=>["auto","cover","contain",A1,m1,{size:[ze,je]}],V=()=>[r0,tl,Go],q=()=>["","none","full",m,ze,je],Q=()=>["",ht,tl,Go],pe=()=>["solid","dashed","dotted","double"],ue=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],se=()=>[ht,r0,xm,gm],he=()=>["","none",N,ze,je],Ee=()=>["none",ht,ze,je],We=()=>["none",ht,ze,je],dt=()=>[ht,ze,je],ot=()=>[Ks,"full",...j()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ki],breakpoint:[ki],color:[u1],container:[ki],"drop-shadow":[ki],ease:["in","out","in-out"],font:[p1],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ki],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ki],shadow:[ki],spacing:["px",ht],text:[ki],"text-shadow":[ki],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ks,je,ze,b]}],container:["container"],columns:[{columns:[ht,je,ze,d]}],"break-after":[{"break-after":D()}],"break-before":[{"break-before":D()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:M()}],overflow:[{overflow:z()}],"overflow-x":[{"overflow-x":z()}],"overflow-y":[{"overflow-y":z()}],overscroll:[{overscroll:U()}],"overscroll-x":[{"overscroll-x":U()}],"overscroll-y":[{"overscroll-y":U()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:te()}],"inset-x":[{"inset-x":te()}],"inset-y":[{"inset-y":te()}],start:[{start:te()}],end:[{end:te()}],top:[{top:te()}],right:[{right:te()}],bottom:[{bottom:te()}],left:[{left:te()}],visibility:["visible","invisible","collapse"],z:[{z:[po,"auto",ze,je]}],basis:[{basis:[Ks,"full","auto",d,...j()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ht,Ks,"auto","initial","none",je]}],grow:[{grow:["",ht,ze,je]}],shrink:[{shrink:["",ht,ze,je]}],order:[{order:[po,"first","last","none",ze,je]}],"grid-cols":[{"grid-cols":Z()}],"col-start-end":[{col:K()}],"col-start":[{"col-start":ee()}],"col-end":[{"col-end":ee()}],"grid-rows":[{"grid-rows":Z()}],"row-start-end":[{row:K()}],"row-start":[{"row-start":ee()}],"row-end":[{"row-end":ee()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":G()}],"auto-rows":[{"auto-rows":G()}],gap:[{gap:j()}],"gap-x":[{"gap-x":j()}],"gap-y":[{"gap-y":j()}],"justify-content":[{justify:[...oe(),"normal"]}],"justify-items":[{"justify-items":[...J(),"normal"]}],"justify-self":[{"justify-self":["auto",...J()]}],"align-content":[{content:["normal",...oe()]}],"align-items":[{items:[...J(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...J(),{baseline:["","last"]}]}],"place-content":[{"place-content":oe()}],"place-items":[{"place-items":[...J(),"baseline"]}],"place-self":[{"place-self":["auto",...J()]}],p:[{p:j()}],px:[{px:j()}],py:[{py:j()}],ps:[{ps:j()}],pe:[{pe:j()}],pt:[{pt:j()}],pr:[{pr:j()}],pb:[{pb:j()}],pl:[{pl:j()}],m:[{m:Y()}],mx:[{mx:Y()}],my:[{my:Y()}],ms:[{ms:Y()}],me:[{me:Y()}],mt:[{mt:Y()}],mr:[{mr:Y()}],mb:[{mb:Y()}],ml:[{ml:Y()}],"space-x":[{"space-x":j()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":j()}],"space-y-reverse":["space-y-reverse"],size:[{size:de()}],w:[{w:[d,"screen",...de()]}],"min-w":[{"min-w":[d,"screen","none",...de()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[p]},...de()]}],h:[{h:["screen","lh",...de()]}],"min-h":[{"min-h":["screen","lh","none",...de()]}],"max-h":[{"max-h":["screen","lh",...de()]}],"font-size":[{text:["base",i,tl,Go]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[l,ze,i0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",r0,je]}],"font-family":[{font:[x1,je,s]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[c,ze,je]}],"line-clamp":[{"line-clamp":[ht,"none",ze,i0]}],leading:[{leading:[u,...j()]}],"list-image":[{"list-image":["none",ze,je]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ze,je]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:W()}],"text-color":[{text:W()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...pe(),"wavy"]}],"text-decoration-thickness":[{decoration:[ht,"from-font","auto",ze,Go]}],"text-decoration-color":[{decoration:W()}],"underline-offset":[{"underline-offset":[ht,"auto",ze,je]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ze,je]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ze,je]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ae()}],"bg-repeat":[{bg:H()}],"bg-size":[{bg:P()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},po,ze,je],radial:["",ze,je],conic:[po,ze,je]},v1,g1]}],"bg-color":[{bg:W()}],"gradient-from-pos":[{from:V()}],"gradient-via-pos":[{via:V()}],"gradient-to-pos":[{to:V()}],"gradient-from":[{from:W()}],"gradient-via":[{via:W()}],"gradient-to":[{to:W()}],rounded:[{rounded:q()}],"rounded-s":[{"rounded-s":q()}],"rounded-e":[{"rounded-e":q()}],"rounded-t":[{"rounded-t":q()}],"rounded-r":[{"rounded-r":q()}],"rounded-b":[{"rounded-b":q()}],"rounded-l":[{"rounded-l":q()}],"rounded-ss":[{"rounded-ss":q()}],"rounded-se":[{"rounded-se":q()}],"rounded-ee":[{"rounded-ee":q()}],"rounded-es":[{"rounded-es":q()}],"rounded-tl":[{"rounded-tl":q()}],"rounded-tr":[{"rounded-tr":q()}],"rounded-br":[{"rounded-br":q()}],"rounded-bl":[{"rounded-bl":q()}],"border-w":[{border:Q()}],"border-w-x":[{"border-x":Q()}],"border-w-y":[{"border-y":Q()}],"border-w-s":[{"border-s":Q()}],"border-w-e":[{"border-e":Q()}],"border-w-t":[{"border-t":Q()}],"border-w-r":[{"border-r":Q()}],"border-w-b":[{"border-b":Q()}],"border-w-l":[{"border-l":Q()}],"divide-x":[{"divide-x":Q()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Q()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...pe(),"hidden","none"]}],"divide-style":[{divide:[...pe(),"hidden","none"]}],"border-color":[{border:W()}],"border-color-x":[{"border-x":W()}],"border-color-y":[{"border-y":W()}],"border-color-s":[{"border-s":W()}],"border-color-e":[{"border-e":W()}],"border-color-t":[{"border-t":W()}],"border-color-r":[{"border-r":W()}],"border-color-b":[{"border-b":W()}],"border-color-l":[{"border-l":W()}],"divide-color":[{divide:W()}],"outline-style":[{outline:[...pe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ht,ze,je]}],"outline-w":[{outline:["",ht,tl,Go]}],"outline-color":[{outline:W()}],shadow:[{shadow:["","none",x,qc,Wc]}],"shadow-color":[{shadow:W()}],"inset-shadow":[{"inset-shadow":["none",A,qc,Wc]}],"inset-shadow-color":[{"inset-shadow":W()}],"ring-w":[{ring:Q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:W()}],"ring-offset-w":[{"ring-offset":[ht,Go]}],"ring-offset-color":[{"ring-offset":W()}],"inset-ring-w":[{"inset-ring":Q()}],"inset-ring-color":[{"inset-ring":W()}],"text-shadow":[{"text-shadow":["none",_,qc,Wc]}],"text-shadow-color":[{"text-shadow":W()}],opacity:[{opacity:[ht,ze,je]}],"mix-blend":[{"mix-blend":[...ue(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ue()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ht]}],"mask-image-linear-from-pos":[{"mask-linear-from":se()}],"mask-image-linear-to-pos":[{"mask-linear-to":se()}],"mask-image-linear-from-color":[{"mask-linear-from":W()}],"mask-image-linear-to-color":[{"mask-linear-to":W()}],"mask-image-t-from-pos":[{"mask-t-from":se()}],"mask-image-t-to-pos":[{"mask-t-to":se()}],"mask-image-t-from-color":[{"mask-t-from":W()}],"mask-image-t-to-color":[{"mask-t-to":W()}],"mask-image-r-from-pos":[{"mask-r-from":se()}],"mask-image-r-to-pos":[{"mask-r-to":se()}],"mask-image-r-from-color":[{"mask-r-from":W()}],"mask-image-r-to-color":[{"mask-r-to":W()}],"mask-image-b-from-pos":[{"mask-b-from":se()}],"mask-image-b-to-pos":[{"mask-b-to":se()}],"mask-image-b-from-color":[{"mask-b-from":W()}],"mask-image-b-to-color":[{"mask-b-to":W()}],"mask-image-l-from-pos":[{"mask-l-from":se()}],"mask-image-l-to-pos":[{"mask-l-to":se()}],"mask-image-l-from-color":[{"mask-l-from":W()}],"mask-image-l-to-color":[{"mask-l-to":W()}],"mask-image-x-from-pos":[{"mask-x-from":se()}],"mask-image-x-to-pos":[{"mask-x-to":se()}],"mask-image-x-from-color":[{"mask-x-from":W()}],"mask-image-x-to-color":[{"mask-x-to":W()}],"mask-image-y-from-pos":[{"mask-y-from":se()}],"mask-image-y-to-pos":[{"mask-y-to":se()}],"mask-image-y-from-color":[{"mask-y-from":W()}],"mask-image-y-to-color":[{"mask-y-to":W()}],"mask-image-radial":[{"mask-radial":[ze,je]}],"mask-image-radial-from-pos":[{"mask-radial-from":se()}],"mask-image-radial-to-pos":[{"mask-radial-to":se()}],"mask-image-radial-from-color":[{"mask-radial-from":W()}],"mask-image-radial-to-color":[{"mask-radial-to":W()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":F()}],"mask-image-conic-pos":[{"mask-conic":[ht]}],"mask-image-conic-from-pos":[{"mask-conic-from":se()}],"mask-image-conic-to-pos":[{"mask-conic-to":se()}],"mask-image-conic-from-color":[{"mask-conic-from":W()}],"mask-image-conic-to-color":[{"mask-conic-to":W()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ae()}],"mask-repeat":[{mask:H()}],"mask-size":[{mask:P()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ze,je]}],filter:[{filter:["","none",ze,je]}],blur:[{blur:he()}],brightness:[{brightness:[ht,ze,je]}],contrast:[{contrast:[ht,ze,je]}],"drop-shadow":[{"drop-shadow":["","none",k,qc,Wc]}],"drop-shadow-color":[{"drop-shadow":W()}],grayscale:[{grayscale:["",ht,ze,je]}],"hue-rotate":[{"hue-rotate":[ht,ze,je]}],invert:[{invert:["",ht,ze,je]}],saturate:[{saturate:[ht,ze,je]}],sepia:[{sepia:["",ht,ze,je]}],"backdrop-filter":[{"backdrop-filter":["","none",ze,je]}],"backdrop-blur":[{"backdrop-blur":he()}],"backdrop-brightness":[{"backdrop-brightness":[ht,ze,je]}],"backdrop-contrast":[{"backdrop-contrast":[ht,ze,je]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ht,ze,je]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ht,ze,je]}],"backdrop-invert":[{"backdrop-invert":["",ht,ze,je]}],"backdrop-opacity":[{"backdrop-opacity":[ht,ze,je]}],"backdrop-saturate":[{"backdrop-saturate":[ht,ze,je]}],"backdrop-sepia":[{"backdrop-sepia":["",ht,ze,je]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":j()}],"border-spacing-x":[{"border-spacing-x":j()}],"border-spacing-y":[{"border-spacing-y":j()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ze,je]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ht,"initial",ze,je]}],ease:[{ease:["linear","initial",S,ze,je]}],delay:[{delay:[ht,ze,je]}],animate:[{animate:["none",B,ze,je]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[C,ze,je]}],"perspective-origin":[{"perspective-origin":M()}],rotate:[{rotate:Ee()}],"rotate-x":[{"rotate-x":Ee()}],"rotate-y":[{"rotate-y":Ee()}],"rotate-z":[{"rotate-z":Ee()}],scale:[{scale:We()}],"scale-x":[{"scale-x":We()}],"scale-y":[{"scale-y":We()}],"scale-z":[{"scale-z":We()}],"scale-3d":["scale-3d"],skew:[{skew:dt()}],"skew-x":[{"skew-x":dt()}],"skew-y":[{"skew-y":dt()}],transform:[{transform:[ze,je,"","none","gpu","cpu"]}],"transform-origin":[{origin:M()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ot()}],"translate-x":[{"translate-x":ot()}],"translate-y":[{"translate-y":ot()}],"translate-z":[{"translate-z":ot()}],"translate-none":["translate-none"],accent:[{accent:W()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:W()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ze,je]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ze,je]}],fill:[{fill:["none",...W()]}],"stroke-w":[{stroke:[ht,tl,Go,i0]}],stroke:[{stroke:["none",...W()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},b1=n1(w1);function at(...n){return b1(Ex(n))}const nn=R.forwardRef(({className:n,type:s,...i},l)=>w.jsx("input",{type:s,className:at("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:l,...i}));nn.displayName="Input";function Am(n,s){if(typeof n=="function")return n(s);n!=null&&(n.current=s)}function El(...n){return s=>{let i=!1;const l=n.map(c=>{const u=Am(c,s);return!i&&typeof u=="function"&&(i=!0),u});if(i)return()=>{for(let c=0;c<l.length;c++){const u=l[c];typeof u=="function"?u():Am(n[c],null)}}}}function kr(...n){return R.useCallback(El(...n),n)}var C1=Symbol.for("react.lazy"),Qu=O0[" use ".trim().toString()];function E1(n){return typeof n=="object"&&n!==null&&"then"in n}function Ox(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===C1&&"_payload"in n&&E1(n._payload)}function U0(n){const s=S1(n),i=R.forwardRef((l,c)=>{let{children:u,...p}=l;Ox(u)&&typeof Qu=="function"&&(u=Qu(u._payload));const d=R.Children.toArray(u),g=d.find(P1);if(g){const m=g.props.children,x=d.map(A=>A===g?R.Children.count(m)>1?R.Children.only(null):R.isValidElement(m)?m.props.children:null:A);return w.jsx(s,{...p,ref:c,children:R.isValidElement(m)?R.cloneElement(m,void 0,x):null})}return w.jsx(s,{...p,ref:c,children:u})});return i.displayName=`${n}.Slot`,i}var k1=U0("Slot");function S1(n){const s=R.forwardRef((i,l)=>{let{children:c,...u}=i;if(Ox(c)&&typeof Qu=="function"&&(c=Qu(c._payload)),R.isValidElement(c)){const p=D1(c),d=T1(u,c.props);return c.type!==R.Fragment&&(d.ref=l?El(l,p):p),R.cloneElement(c,d)}return R.Children.count(c)>1?R.Children.only(null):null});return s.displayName=`${n}.SlotClone`,s}var B1=Symbol("radix.slottable");function P1(n){return R.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===B1}function T1(n,s){const i={...s};for(const l in s){const c=n[l],u=s[l];/^on[A-Z]/.test(l)?c&&u?i[l]=(...d)=>{const g=u(...d);return c(...d),g}:c&&(i[l]=c):l==="style"?i[l]={...c,...u}:l==="className"&&(i[l]=[c,u].filter(Boolean).join(" "))}return{...n,...i}}function D1(n){var l,c;let s=(l=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:l.get,i=s&&"isReactWarning"in s&&s.isReactWarning;return i?n.ref:(s=(c=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:c.get,i=s&&"isReactWarning"in s&&s.isReactWarning,i?n.props.ref:n.props.ref||n.ref)}const vm=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,ym=Ex,Z0=(n,s)=>i=>{var l;if((s==null?void 0:s.variants)==null)return ym(n,i==null?void 0:i.class,i==null?void 0:i.className);const{variants:c,defaultVariants:u}=s,p=Object.keys(c).map(m=>{const x=i==null?void 0:i[m],A=u==null?void 0:u[m];if(x===null)return null;const _=vm(x)||vm(A);return c[m][_]}),d=i&&Object.entries(i).reduce((m,x)=>{let[A,_]=x;return _===void 0||(m[A]=_),m},{}),g=s==null||(l=s.compoundVariants)===null||l===void 0?void 0:l.reduce((m,x)=>{let{class:A,className:_,...k}=x;return Object.entries(k).every(N=>{let[C,b]=N;return Array.isArray(b)?b.includes({...u,...d}[C]):{...u,...d}[C]===b})?[...m,A,_]:m},[]);return ym(n,p,g,i==null?void 0:i.class,i==null?void 0:i.className)},R1=Z0("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),wn=R.forwardRef(({className:n,variant:s,size:i,asChild:l=!1,...c},u)=>{const p=l?k1:"button";return w.jsx(p,{className:at(R1({variant:s,size:i,className:n})),ref:u,...c})});wn.displayName="Button";function Gc(n){return n>=j0?`${n}+`:`${n}`}function N1({contacts:n,channels:s,activeConversation:i,onSelectConversation:l,onNewMessage:c,lastMessageTimes:u,unreadCounts:p,mentions:d,showCracker:g,crackerRunning:m,onToggleCracker:x,onMarkAllRead:A,favorites:_,sortOrder:k="recent",onSortOrderChange:N}){const C=k,[b,S]=R.useState(""),B=()=>{const H=C==="alpha"?"recent":"alpha";N==null||N(H)},D=H=>{S(""),l(H)},F=(H,P)=>(i==null?void 0:i.type)===H&&(i==null?void 0:i.id)===P,M=(H,P)=>{const V=jr(H,P);return p[V]||0},z=(H,P)=>{const V=jr(H,P);return d[V]||!1},U=(H,P)=>{const V=jr(H,P);return u[V]||0},j=s.reduce((H,P)=>(H.some(V=>V.name===P.name)||H.push(P),H),[]),te=n.filter(H=>H.public_key&&H.public_key.length>0).sort((H,P)=>H.name&&!P.name?-1:!H.name&&P.name?1:(H.name||"").localeCompare(P.name||"")).reduce((H,P)=>(H.some(V=>V.public_key===P.public_key)||H.push(P),H),[]),Z=[...j].sort((H,P)=>{if(H.name==="Public")return-1;if(P.name==="Public")return 1;if(C==="recent"){const V=U("channel",H.key),q=U("channel",P.key);if(V&&q)return q-V;if(V&&!q)return-1;if(!V&&q)return 1}return H.name.localeCompare(P.name)}),K=[...te].sort((H,P)=>{const V=H.type===na,q=P.type===na;if(V&&!q)return 1;if(!V&&q)return-1;if(V&&q)return(H.name||H.public_key).localeCompare(P.name||P.public_key);if(C==="recent"){const Q=U("contact",H.public_key),pe=U("contact",P.public_key);if(Q&&pe)return pe-Q;if(Q&&!pe)return-1;if(!Q&&pe)return 1}return(H.name||H.public_key).localeCompare(P.name||P.public_key)}),ee=b.toLowerCase().trim(),G=ee?Z.filter(H=>H.name.toLowerCase().includes(ee)||H.key.toLowerCase().includes(ee)):Z,oe=ee?K.filter(H=>{var P;return((P=H.name)==null?void 0:P.toLowerCase().includes(ee))||H.public_key.toLowerCase().includes(ee)}):K,J=G.filter(H=>ts(_,"channel",H.key)),Y=oe.filter(H=>ts(_,"contact",H.public_key)),de=G.filter(H=>!ts(_,"channel",H.key)),W=oe.filter(H=>!ts(_,"contact",H.public_key)),ae=[...J.map(H=>({type:"channel",channel:H})),...Y.map(H=>({type:"contact",contact:H}))].sort((H,P)=>{const V=H.type==="channel"?U("channel",H.channel.key):U("contact",H.contact.public_key),q=P.type==="channel"?U("channel",P.channel.key):U("contact",P.contact.public_key);if(V&&q)return q-V;if(V&&!q)return-1;if(!V&&q)return 1;const Q=H.type==="channel"?H.channel.name:H.contact.name||H.contact.public_key,pe=P.type==="channel"?P.channel.name:P.contact.name||P.contact.public_key;return Q.localeCompare(pe)});return w.jsxs("div",{className:"sidebar w-60 h-full min-h-0 bg-card border-r border-border flex flex-col",children:[w.jsxs("div",{className:"flex justify-between items-center px-3 py-3 border-b border-border",children:[w.jsx("h2",{className:"text-xs uppercase text-muted-foreground font-medium",children:"Conversations"}),w.jsx(wn,{variant:"ghost",size:"sm",onClick:c,title:"New Message",className:"h-6 w-6 p-0 text-muted-foreground hover:text-foreground",children:"+"})]}),w.jsxs("div",{className:"relative px-3 py-2 border-b border-border",children:[w.jsx(nn,{type:"text",placeholder:"Search...",value:b,onChange:H=>S(H.target.value),className:"h-8 text-sm pr-8"}),b&&w.jsx("button",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground text-lg leading-none",onClick:()=>S(""),title:"Clear search",children:""})]}),w.jsxs("div",{className:"flex-1 overflow-y-auto",children:[!ee&&w.jsxs("div",{className:at("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",F("raw","raw")&&"bg-accent border-l-primary"),onClick:()=>D({type:"raw",id:"raw",name:"Raw Packet Feed"}),children:[w.jsx("span",{className:"text-muted-foreground text-xs",children:""}),w.jsx("span",{className:"flex-1 truncate",children:"Packet Feed"})]}),!ee&&w.jsxs("div",{className:at("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",F("map","map")&&"bg-accent border-l-primary"),onClick:()=>D({type:"map",id:"map",name:"Node Map"}),children:[w.jsx("span",{className:"text-muted-foreground text-xs",children:""}),w.jsx("span",{className:"flex-1 truncate",children:"Node Map"})]}),!ee&&w.jsxs("div",{className:at("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",F("visualizer","visualizer")&&"bg-accent border-l-primary"),onClick:()=>D({type:"visualizer",id:"visualizer",name:"Mesh Visualizer"}),children:[w.jsx("span",{className:"text-muted-foreground text-xs",children:""}),w.jsx("span",{className:"flex-1 truncate",children:"Mesh Visualizer"})]}),!ee&&w.jsxs("div",{className:at("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",g&&"bg-accent border-l-primary"),onClick:x,children:[w.jsx("span",{className:"text-muted-foreground text-xs",children:""}),w.jsxs("span",{className:"flex-1 truncate",children:[g?"Hide":"Show"," Room Finder",w.jsxs("span",{className:at("ml-1 text-xs",m?"text-green-500":"text-muted-foreground"),children:["(",m?"running":"stopped",")"]})]})]}),!ee&&Object.keys(p).length>0&&w.jsxs("div",{className:"px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",onClick:A,children:[w.jsx("span",{className:"text-muted-foreground text-xs",children:""}),w.jsx("span",{className:"flex-1 truncate text-muted-foreground",children:"Mark all as read"})]}),ae.length>0&&w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"flex justify-between items-center px-3 py-2 pt-3",children:w.jsx("span",{className:"text-[11px] uppercase text-muted-foreground",children:"Favorites"})}),ae.map(H=>{if(H.type==="channel"){const P=H.channel,V=M("channel",P.key),q=z("channel",P.key);return w.jsxs("div",{className:at("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",F("channel",P.key)&&"bg-accent border-l-primary",V>0&&"[&_.name]:font-bold [&_.name]:text-foreground"),onClick:()=>D({type:"channel",id:P.key,name:P.name}),children:[w.jsx("span",{className:"name flex-1 truncate",children:P.name}),V>0&&w.jsx("span",{className:at("text-[10px] font-semibold px-1.5 py-0.5 rounded-full min-w-[18px] text-center",q?"bg-destructive text-destructive-foreground":"bg-primary text-primary-foreground"),children:Gc(V)})]},`fav-chan-${P.key}`)}else{const P=H.contact,V=M("contact",P.public_key),q=z("contact",P.public_key);return w.jsxs("div",{className:at("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",F("contact",P.public_key)&&"bg-accent border-l-primary",V>0&&"[&_.name]:font-bold [&_.name]:text-foreground"),onClick:()=>D({type:"contact",id:P.public_key,name:Di(P.name,P.public_key)}),children:[w.jsx(y0,{name:P.name,publicKey:P.public_key,size:24,contactType:P.type}),w.jsx("span",{className:"name flex-1 truncate",children:Di(P.name,P.public_key)}),V>0&&w.jsx("span",{className:at("text-[10px] font-semibold px-1.5 py-0.5 rounded-full min-w-[18px] text-center",q?"bg-destructive text-destructive-foreground":"bg-primary text-primary-foreground"),children:Gc(V)})]},`fav-contact-${P.public_key}`)}})]}),de.length>0&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"flex justify-between items-center px-3 py-2 pt-3",children:[w.jsx("span",{className:"text-[11px] uppercase text-muted-foreground",children:"Channels"}),w.jsx("button",{className:"bg-transparent border border-border text-muted-foreground px-1.5 py-0.5 text-[10px] rounded hover:bg-accent hover:text-foreground",onClick:B,title:C==="alpha"?"Sort by recent":"Sort alphabetically",children:C==="alpha"?"A-Z":""})]}),de.map(H=>{const P=M("channel",H.key),V=z("channel",H.key);return w.jsxs("div",{className:at("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",F("channel",H.key)&&"bg-accent border-l-primary",P>0&&"[&_.name]:font-bold [&_.name]:text-foreground"),onClick:()=>D({type:"channel",id:H.key,name:H.name}),children:[w.jsx("span",{className:"name flex-1 truncate",children:H.name}),P>0&&w.jsx("span",{className:at("text-[10px] font-semibold px-1.5 py-0.5 rounded-full min-w-[18px] text-center",V?"bg-destructive text-destructive-foreground":"bg-primary text-primary-foreground"),children:Gc(P)})]},`chan-${H.key}`)})]}),W.length>0&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"flex justify-between items-center px-3 py-2 pt-3",children:[w.jsx("span",{className:"text-[11px] uppercase text-muted-foreground",children:"Contacts"}),de.length===0&&w.jsx("button",{className:"bg-transparent border border-border text-muted-foreground px-1.5 py-0.5 text-[10px] rounded hover:bg-accent hover:text-foreground",onClick:B,title:C==="alpha"?"Sort by recent":"Sort alphabetically",children:C==="alpha"?"A-Z":""})]}),W.map(H=>{const P=M("contact",H.public_key),V=z("contact",H.public_key);return w.jsxs("div",{className:at("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",F("contact",H.public_key)&&"bg-accent border-l-primary",P>0&&"[&_.name]:font-bold [&_.name]:text-foreground"),onClick:()=>D({type:"contact",id:H.public_key,name:Di(H.name,H.public_key)}),children:[w.jsx(y0,{name:H.name,publicKey:H.public_key,size:24,contactType:H.type}),w.jsx("span",{className:"name flex-1 truncate",children:Di(H.name,H.public_key)}),P>0&&w.jsx("span",{className:at("text-[10px] font-semibold px-1.5 py-0.5 rounded-full min-w-[18px] text-center",V?"bg-destructive text-destructive-foreground":"bg-primary text-primary-foreground"),children:Gc(P)})]},H.public_key)})]}),W.length===0&&de.length===0&&ae.length===0&&w.jsx("div",{className:"p-5 text-center text-muted-foreground",children:ee?"No matches found":"No conversations yet"})]})]})}function _m(n){const s=n.indexOf(": ");if(s>0&&s<50){const i=n.substring(0,s);if(!i.includes(":"))return{sender:i,content:n.substring(s+2)}}return{sender:null,content:n}}function ra(n){const s=new Date(n*1e3),i=new Date,l=s.toDateString()===i.toDateString(),c=s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return l?c:`${s.toLocaleDateString([],{month:"short",day:"numeric"})} ${c}`}function F1(n){if(!n||n.length===0)return[];const s=n.toUpperCase(),i=[];for(let l=0;l<s.length;l+=2)l+1<s.length&&i.push(s.slice(l,l+2));return i}function L1(n,s,i=!0){const l=n.toUpperCase();return s.filter(c=>i&&c.type!==id?!1:c.public_key.toUpperCase().startsWith(l))}function zr(n,s,i,l){if(n===null||s===null||i===null||l===null)return null;const c=6371,u=$c(i-n),p=$c(l-s),d=Math.sin(u/2)*Math.sin(u/2)+Math.cos($c(n))*Math.cos($c(i))*Math.sin(p/2)*Math.sin(p/2),g=2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d));return c*g}function $c(n){return n*Math.PI/180}function Bt(n,s){return!(n===null||s===null||n===0&&s===0)}function ns(n){return n<1?`${Math.round(n*1e3)}m`:`${n.toFixed(1)}km`}function M1(n,s,i){return s===null||i===null?n:[...n].sort((l,c)=>{const u=zr(s,i,l.lat,l.lon),p=zr(s,i,c.lat,c.lon);return u===null&&p===null?0:u===null?1:p===null?-1:u-p})}function I1(n){return!n||n.length===0?0:Math.floor(n.length/2)}function O1(n){if(!n||n.length===0)return{display:"",allDirect:!0,hasMultiple:!1};const s=n.map(p=>I1(p.path)).sort((p,d)=>p-d),i=s.every(p=>p===0),l=n.length>1;return{display:s.map(p=>p===0?"d":p.toString()).join("/"),allDirect:i,hasMultiple:l}}function j1(n,s,i,l){var C;const c=F1(n),u=s.publicKeyOrPrefix.toUpperCase().slice(0,2),p={name:s.name,prefix:u,lat:s.lat,lon:s.lon},d=((C=l==null?void 0:l.public_key)==null?void 0:C.toUpperCase().slice(0,2))||"??",g={name:(l==null?void 0:l.name)||"Unknown",prefix:d,lat:(l==null?void 0:l.lat)??null,lon:(l==null?void 0:l.lon)??null,publicKey:(l==null?void 0:l.public_key)??null},m=[];let x=s.lat,A=s.lon,_=!Bt(s.lat,s.lon);for(const b of c){const S=L1(b,i,!0),B=M1(S,x,A);let D=null;const F=B.length===1&&Bt(B[0].lat,B[0].lon);!_&&F&&(D=zr(x,A,B[0].lat,B[0].lon)),m.push({prefix:b,matches:B,distanceFromPrev:D}),B.length===0?(_=!0,x=null,A=null):B.length>1?(_=!0,Bt(B[0].lat,B[0].lon)?(x=B[0].lat,A=B[0].lon):(x=null,A=null)):Bt(B[0].lat,B[0].lon)?(_=!1,x=B[0].lat,A=B[0].lon):(_=!0,x=null,A=null)}const k=z1(p,m,g),N=!Bt(p.lat,p.lon)||!Bt(g.lat,g.lon)||m.some(b=>b.matches.length!==1||!Bt(b.matches[0].lat,b.matches[0].lon));return{sender:p,hops:m,receiver:g,totalDistances:k,hasGaps:N}}function z1(n,s,i){if(s.length===0){if(!Bt(n.lat,n.lon)||!Bt(i.lat,i.lon))return null;const m=zr(n.lat,n.lon,i.lat,i.lon);return m!==null?[m]:null}let l=n.lat,c=n.lon,u=0;if(!Bt(l,c)){for(let m=0;m<s.length;m++){const x=s[m];if(x.matches.length===1&&Bt(x.matches[0].lat,x.matches[0].lon)){l=x.matches[0].lat,c=x.matches[0].lon,u=m+1;break}}if(!Bt(l,c))return null}let p=0,d=!1,g=-1;for(let m=u;m<s.length;m++){const x=s[m];if(x.matches.length!==1||!Bt(x.matches[0].lat,x.matches[0].lon)){l=null,c=null;continue}if(l!==null&&c!==null){const A=zr(l,c,x.matches[0].lat,x.matches[0].lon);A!==null&&(p+=A,d=!0)}l=x.matches[0].lat,c=x.matches[0].lon,g=m}if(g===s.length-1&&l!==null&&c!==null&&Bt(i.lat,i.lon)){const m=zr(l,c,i.lat,i.lon);m!==null&&(p+=m,d=!0)}return d?[p]:null}function hn(n,s,{checkForDefaultPrevented:i=!0}={}){return function(c){if(n==null||n(c),i===!1||!c.defaultPrevented)return s==null?void 0:s(c)}}function H1(n,s){const i=R.createContext(s),l=u=>{const{children:p,...d}=u,g=R.useMemo(()=>d,Object.values(d));return w.jsx(i.Provider,{value:g,children:p})};l.displayName=n+"Provider";function c(u){const p=R.useContext(i);if(p)return p;if(s!==void 0)return s;throw new Error(`\`${u}\` must be used within \`${n}\``)}return[l,c]}function kl(n,s=[]){let i=[];function l(u,p){const d=R.createContext(p),g=i.length;i=[...i,p];const m=A=>{var S;const{scope:_,children:k,...N}=A,C=((S=_==null?void 0:_[n])==null?void 0:S[g])||d,b=R.useMemo(()=>N,Object.values(N));return w.jsx(C.Provider,{value:b,children:k})};m.displayName=u+"Provider";function x(A,_){var C;const k=((C=_==null?void 0:_[n])==null?void 0:C[g])||d,N=R.useContext(k);if(N)return N;if(p!==void 0)return p;throw new Error(`\`${A}\` must be used within \`${u}\``)}return[m,x]}const c=()=>{const u=i.map(p=>R.createContext(p));return function(d){const g=(d==null?void 0:d[n])||u;return R.useMemo(()=>({[`__scope${n}`]:{...d,[n]:g}}),[d,g])}};return c.scopeName=n,[l,V1(c,...s)]}function V1(...n){const s=n[0];if(n.length===1)return s;const i=()=>{const l=n.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(u){const p=l.reduce((d,{useScope:g,scopeName:m})=>{const A=g(u)[`__scope${m}`];return{...d,...A}},{});return R.useMemo(()=>({[`__scope${s.scopeName}`]:p}),[p])}};return i.scopeName=s.scopeName,i}var ia=globalThis!=null&&globalThis.document?R.useLayoutEffect:()=>{},U1=O0[" useId ".trim().toString()]||(()=>{}),Z1=0;function yl(n){const[s,i]=R.useState(U1());return ia(()=>{i(l=>l??String(Z1++))},[n]),s?`radix-${s}`:""}var W1=O0[" useInsertionEffect ".trim().toString()]||ia;function od({prop:n,defaultProp:s,onChange:i=()=>{},caller:l}){const[c,u,p]=q1({defaultProp:s,onChange:i}),d=n!==void 0,g=d?n:c;{const x=R.useRef(n!==void 0);R.useEffect(()=>{const A=x.current;A!==d&&console.warn(`${l} is changing from ${A?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),x.current=d},[d,l])}const m=R.useCallback(x=>{var A;if(d){const _=G1(x)?x(n):x;_!==n&&((A=p.current)==null||A.call(p,_))}else u(x)},[d,n,u,p]);return[g,m]}function q1({defaultProp:n,onChange:s}){const[i,l]=R.useState(n),c=R.useRef(i),u=R.useRef(s);return W1(()=>{u.current=s},[s]),R.useEffect(()=>{var p;c.current!==i&&((p=u.current)==null||p.call(u,i),c.current=i)},[i,c]),[i,l,u]}function G1(n){return typeof n=="function"}function $1(n){const s=K1(n),i=R.forwardRef((l,c)=>{const{children:u,...p}=l,d=R.Children.toArray(u),g=d.find(Y1);if(g){const m=g.props.children,x=d.map(A=>A===g?R.Children.count(m)>1?R.Children.only(null):R.isValidElement(m)?m.props.children:null:A);return w.jsx(s,{...p,ref:c,children:R.isValidElement(m)?R.cloneElement(m,void 0,x):null})}return w.jsx(s,{...p,ref:c,children:u})});return i.displayName=`${n}.Slot`,i}function K1(n){const s=R.forwardRef((i,l)=>{const{children:c,...u}=i;if(R.isValidElement(c)){const p=J1(c),d=X1(u,c.props);return c.type!==R.Fragment&&(d.ref=l?El(l,p):p),R.cloneElement(c,d)}return R.Children.count(c)>1?R.Children.only(null):null});return s.displayName=`${n}.SlotClone`,s}var Q1=Symbol("radix.slottable");function Y1(n){return R.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===Q1}function X1(n,s){const i={...s};for(const l in s){const c=n[l],u=s[l];/^on[A-Z]/.test(l)?c&&u?i[l]=(...d)=>{const g=u(...d);return c(...d),g}:c&&(i[l]=c):l==="style"?i[l]={...c,...u}:l==="className"&&(i[l]=[c,u].filter(Boolean).join(" "))}return{...n,...i}}function J1(n){var l,c;let s=(l=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:l.get,i=s&&"isReactWarning"in s&&s.isReactWarning;return i?n.ref:(s=(c=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:c.get,i=s&&"isReactWarning"in s&&s.isReactWarning,i?n.props.ref:n.props.ref||n.ref)}var ew=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],xn=ew.reduce((n,s)=>{const i=$1(`Primitive.${s}`),l=R.forwardRef((c,u)=>{const{asChild:p,...d}=c,g=p?i:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),w.jsx(g,{...d,ref:u})});return l.displayName=`Primitive.${s}`,{...n,[s]:l}},{});function tw(n,s){n&&z0.flushSync(()=>n.dispatchEvent(s))}function oa(n){const s=R.useRef(n);return R.useEffect(()=>{s.current=n}),R.useMemo(()=>(...i)=>{var l;return(l=s.current)==null?void 0:l.call(s,...i)},[])}function nw(n,s=globalThis==null?void 0:globalThis.document){const i=oa(n);R.useEffect(()=>{const l=c=>{c.key==="Escape"&&i(c)};return s.addEventListener("keydown",l,{capture:!0}),()=>s.removeEventListener("keydown",l,{capture:!0})},[i,s])}var rw="DismissableLayer",w0="dismissableLayer.update",iw="dismissableLayer.pointerDownOutside",ow="dismissableLayer.focusOutside",wm,jx=R.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),zx=R.forwardRef((n,s)=>{const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:p,onDismiss:d,...g}=n,m=R.useContext(jx),[x,A]=R.useState(null),_=(x==null?void 0:x.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,k]=R.useState({}),N=kr(s,U=>A(U)),C=Array.from(m.layers),[b]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),S=C.indexOf(b),B=x?C.indexOf(x):-1,D=m.layersWithOutsidePointerEventsDisabled.size>0,F=B>=S,M=lw(U=>{const j=U.target,te=[...m.branches].some(Z=>Z.contains(j));!F||te||(c==null||c(U),p==null||p(U),U.defaultPrevented||d==null||d())},_),z=cw(U=>{const j=U.target;[...m.branches].some(Z=>Z.contains(j))||(u==null||u(U),p==null||p(U),U.defaultPrevented||d==null||d())},_);return nw(U=>{B===m.layers.size-1&&(l==null||l(U),!U.defaultPrevented&&d&&(U.preventDefault(),d()))},_),R.useEffect(()=>{if(x)return i&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(wm=_.body.style.pointerEvents,_.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(x)),m.layers.add(x),bm(),()=>{i&&m.layersWithOutsidePointerEventsDisabled.size===1&&(_.body.style.pointerEvents=wm)}},[x,_,i,m]),R.useEffect(()=>()=>{x&&(m.layers.delete(x),m.layersWithOutsidePointerEventsDisabled.delete(x),bm())},[x,m]),R.useEffect(()=>{const U=()=>k({});return document.addEventListener(w0,U),()=>document.removeEventListener(w0,U)},[]),w.jsx(xn.div,{...g,ref:N,style:{pointerEvents:D?F?"auto":"none":void 0,...n.style},onFocusCapture:hn(n.onFocusCapture,z.onFocusCapture),onBlurCapture:hn(n.onBlurCapture,z.onBlurCapture),onPointerDownCapture:hn(n.onPointerDownCapture,M.onPointerDownCapture)})});zx.displayName=rw;var sw="DismissableLayerBranch",aw=R.forwardRef((n,s)=>{const i=R.useContext(jx),l=R.useRef(null),c=kr(s,l);return R.useEffect(()=>{const u=l.current;if(u)return i.branches.add(u),()=>{i.branches.delete(u)}},[i.branches]),w.jsx(xn.div,{...n,ref:c})});aw.displayName=sw;function lw(n,s=globalThis==null?void 0:globalThis.document){const i=oa(n),l=R.useRef(!1),c=R.useRef(()=>{});return R.useEffect(()=>{const u=d=>{if(d.target&&!l.current){let g=function(){Hx(iw,i,m,{discrete:!0})};const m={originalEvent:d};d.pointerType==="touch"?(s.removeEventListener("click",c.current),c.current=g,s.addEventListener("click",c.current,{once:!0})):g()}else s.removeEventListener("click",c.current);l.current=!1},p=window.setTimeout(()=>{s.addEventListener("pointerdown",u)},0);return()=>{window.clearTimeout(p),s.removeEventListener("pointerdown",u),s.removeEventListener("click",c.current)}},[s,i]),{onPointerDownCapture:()=>l.current=!0}}function cw(n,s=globalThis==null?void 0:globalThis.document){const i=oa(n),l=R.useRef(!1);return R.useEffect(()=>{const c=u=>{u.target&&!l.current&&Hx(ow,i,{originalEvent:u},{discrete:!1})};return s.addEventListener("focusin",c),()=>s.removeEventListener("focusin",c)},[s,i]),{onFocusCapture:()=>l.current=!0,onBlurCapture:()=>l.current=!1}}function bm(){const n=new CustomEvent(w0);document.dispatchEvent(n)}function Hx(n,s,i,{discrete:l}){const c=i.originalEvent.target,u=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:i});s&&c.addEventListener(n,s,{once:!0}),l?tw(c,u):c.dispatchEvent(u)}var o0="focusScope.autoFocusOnMount",s0="focusScope.autoFocusOnUnmount",Cm={bubbles:!1,cancelable:!0},uw="FocusScope",Vx=R.forwardRef((n,s)=>{const{loop:i=!1,trapped:l=!1,onMountAutoFocus:c,onUnmountAutoFocus:u,...p}=n,[d,g]=R.useState(null),m=oa(c),x=oa(u),A=R.useRef(null),_=kr(s,C=>g(C)),k=R.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;R.useEffect(()=>{if(l){let C=function(D){if(k.paused||!d)return;const F=D.target;d.contains(F)?A.current=F:mo(A.current,{select:!0})},b=function(D){if(k.paused||!d)return;const F=D.relatedTarget;F!==null&&(d.contains(F)||mo(A.current,{select:!0}))},S=function(D){if(document.activeElement===document.body)for(const M of D)M.removedNodes.length>0&&mo(d)};document.addEventListener("focusin",C),document.addEventListener("focusout",b);const B=new MutationObserver(S);return d&&B.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",C),document.removeEventListener("focusout",b),B.disconnect()}}},[l,d,k.paused]),R.useEffect(()=>{if(d){km.add(k);const C=document.activeElement;if(!d.contains(C)){const S=new CustomEvent(o0,Cm);d.addEventListener(o0,m),d.dispatchEvent(S),S.defaultPrevented||(dw(gw(Ux(d)),{select:!0}),document.activeElement===C&&mo(d))}return()=>{d.removeEventListener(o0,m),setTimeout(()=>{const S=new CustomEvent(s0,Cm);d.addEventListener(s0,x),d.dispatchEvent(S),S.defaultPrevented||mo(C??document.body,{select:!0}),d.removeEventListener(s0,x),km.remove(k)},0)}}},[d,m,x,k]);const N=R.useCallback(C=>{if(!i&&!l||k.paused)return;const b=C.key==="Tab"&&!C.altKey&&!C.ctrlKey&&!C.metaKey,S=document.activeElement;if(b&&S){const B=C.currentTarget,[D,F]=fw(B);D&&F?!C.shiftKey&&S===F?(C.preventDefault(),i&&mo(D,{select:!0})):C.shiftKey&&S===D&&(C.preventDefault(),i&&mo(F,{select:!0})):S===B&&C.preventDefault()}},[i,l,k.paused]);return w.jsx(xn.div,{tabIndex:-1,...p,ref:_,onKeyDown:N})});Vx.displayName=uw;function dw(n,{select:s=!1}={}){const i=document.activeElement;for(const l of n)if(mo(l,{select:s}),document.activeElement!==i)return}function fw(n){const s=Ux(n),i=Em(s,n),l=Em(s.reverse(),n);return[i,l]}function Ux(n){const s=[],i=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:l=>{const c=l.tagName==="INPUT"&&l.type==="hidden";return l.disabled||l.hidden||c?NodeFilter.FILTER_SKIP:l.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)s.push(i.currentNode);return s}function Em(n,s){for(const i of n)if(!hw(i,{upTo:s}))return i}function hw(n,{upTo:s}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(s!==void 0&&n===s)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function pw(n){return n instanceof HTMLInputElement&&"select"in n}function mo(n,{select:s=!1}={}){if(n&&n.focus){const i=document.activeElement;n.focus({preventScroll:!0}),n!==i&&pw(n)&&s&&n.select()}}var km=mw();function mw(){let n=[];return{add(s){const i=n[0];s!==i&&(i==null||i.pause()),n=Sm(n,s),n.unshift(s)},remove(s){var i;n=Sm(n,s),(i=n[0])==null||i.resume()}}}function Sm(n,s){const i=[...n],l=i.indexOf(s);return l!==-1&&i.splice(l,1),i}function gw(n){return n.filter(s=>s.tagName!=="A")}var xw="Portal",Zx=R.forwardRef((n,s)=>{var d;const{container:i,...l}=n,[c,u]=R.useState(!1);ia(()=>u(!0),[]);const p=i||c&&((d=globalThis==null?void 0:globalThis.document)==null?void 0:d.body);return p?yx.createPortal(w.jsx(xn.div,{...l,ref:s}),p):null});Zx.displayName=xw;function Aw(n,s){return R.useReducer((i,l)=>s[i][l]??i,n)}var ua=n=>{const{present:s,children:i}=n,l=vw(s),c=typeof i=="function"?i({present:l.isPresent}):R.Children.only(i),u=kr(l.ref,yw(c));return typeof i=="function"||l.isPresent?R.cloneElement(c,{ref:u}):null};ua.displayName="Presence";function vw(n){const[s,i]=R.useState(),l=R.useRef(null),c=R.useRef(n),u=R.useRef("none"),p=n?"mounted":"unmounted",[d,g]=Aw(p,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return R.useEffect(()=>{const m=Kc(l.current);u.current=d==="mounted"?m:"none"},[d]),ia(()=>{const m=l.current,x=c.current;if(x!==n){const _=u.current,k=Kc(m);n?g("MOUNT"):k==="none"||(m==null?void 0:m.display)==="none"?g("UNMOUNT"):g(x&&_!==k?"ANIMATION_OUT":"UNMOUNT"),c.current=n}},[n,g]),ia(()=>{if(s){let m;const x=s.ownerDocument.defaultView??window,A=k=>{const C=Kc(l.current).includes(CSS.escape(k.animationName));if(k.target===s&&C&&(g("ANIMATION_END"),!c.current)){const b=s.style.animationFillMode;s.style.animationFillMode="forwards",m=x.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=b)})}},_=k=>{k.target===s&&(u.current=Kc(l.current))};return s.addEventListener("animationstart",_),s.addEventListener("animationcancel",A),s.addEventListener("animationend",A),()=>{x.clearTimeout(m),s.removeEventListener("animationstart",_),s.removeEventListener("animationcancel",A),s.removeEventListener("animationend",A)}}else g("ANIMATION_END")},[s,g]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:R.useCallback(m=>{l.current=m?getComputedStyle(m):null,i(m)},[])}}function Kc(n){return(n==null?void 0:n.animationName)||"none"}function yw(n){var l,c;let s=(l=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:l.get,i=s&&"isReactWarning"in s&&s.isReactWarning;return i?n.ref:(s=(c=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:c.get,i=s&&"isReactWarning"in s&&s.isReactWarning,i?n.props.ref:n.props.ref||n.ref)}var a0=0;function _w(){R.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??Bm()),document.body.insertAdjacentElement("beforeend",n[1]??Bm()),a0++,()=>{a0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),a0--}},[])}function Bm(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var ii=function(){return ii=Object.assign||function(s){for(var i,l=1,c=arguments.length;l<c;l++){i=arguments[l];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(s[u]=i[u])}return s},ii.apply(this,arguments)};function Wx(n,s){var i={};for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&s.indexOf(l)<0&&(i[l]=n[l]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,l=Object.getOwnPropertySymbols(n);c<l.length;c++)s.indexOf(l[c])<0&&Object.prototype.propertyIsEnumerable.call(n,l[c])&&(i[l[c]]=n[l[c]]);return i}function ww(n,s,i){if(i||arguments.length===2)for(var l=0,c=s.length,u;l<c;l++)(u||!(l in s))&&(u||(u=Array.prototype.slice.call(s,0,l)),u[l]=s[l]);return n.concat(u||Array.prototype.slice.call(s))}var ou="right-scroll-bar-position",su="width-before-scroll-bar",bw="with-scroll-bars-hidden",Cw="--removed-body-scroll-bar-size";function l0(n,s){return typeof n=="function"?n(s):n&&(n.current=s),n}function Ew(n,s){var i=R.useState(function(){return{value:n,callback:s,facade:{get current(){return i.value},set current(l){var c=i.value;c!==l&&(i.value=l,i.callback(l,c))}}}})[0];return i.callback=s,i.facade}var kw=typeof window<"u"?R.useLayoutEffect:R.useEffect,Pm=new WeakMap;function Sw(n,s){var i=Ew(null,function(l){return n.forEach(function(c){return l0(c,l)})});return kw(function(){var l=Pm.get(i);if(l){var c=new Set(l),u=new Set(n),p=i.current;c.forEach(function(d){u.has(d)||l0(d,null)}),u.forEach(function(d){c.has(d)||l0(d,p)})}Pm.set(i,n)},[n]),i}function Bw(n){return n}function Pw(n,s){s===void 0&&(s=Bw);var i=[],l=!1,c={read:function(){if(l)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return i.length?i[i.length-1]:n},useMedium:function(u){var p=s(u,l);return i.push(p),function(){i=i.filter(function(d){return d!==p})}},assignSyncMedium:function(u){for(l=!0;i.length;){var p=i;i=[],p.forEach(u)}i={push:function(d){return u(d)},filter:function(){return i}}},assignMedium:function(u){l=!0;var p=[];if(i.length){var d=i;i=[],d.forEach(u),p=i}var g=function(){var x=p;p=[],x.forEach(u)},m=function(){return Promise.resolve().then(g)};m(),i={push:function(x){p.push(x),m()},filter:function(x){return p=p.filter(x),i}}}};return c}function Tw(n){n===void 0&&(n={});var s=Pw(null);return s.options=ii({async:!0,ssr:!1},n),s}var qx=function(n){var s=n.sideCar,i=Wx(n,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var l=s.read();if(!l)throw new Error("Sidecar medium not found");return R.createElement(l,ii({},i))};qx.isSideCarExport=!0;function Dw(n,s){return n.useMedium(s),qx}var Gx=Tw(),c0=function(){},sd=R.forwardRef(function(n,s){var i=R.useRef(null),l=R.useState({onScrollCapture:c0,onWheelCapture:c0,onTouchMoveCapture:c0}),c=l[0],u=l[1],p=n.forwardProps,d=n.children,g=n.className,m=n.removeScrollBar,x=n.enabled,A=n.shards,_=n.sideCar,k=n.noRelative,N=n.noIsolation,C=n.inert,b=n.allowPinchZoom,S=n.as,B=S===void 0?"div":S,D=n.gapMode,F=Wx(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=_,z=Sw([i,s]),U=ii(ii({},F),c);return R.createElement(R.Fragment,null,x&&R.createElement(M,{sideCar:Gx,removeScrollBar:m,shards:A,noRelative:k,noIsolation:N,inert:C,setCallbacks:u,allowPinchZoom:!!b,lockRef:i,gapMode:D}),p?R.cloneElement(R.Children.only(d),ii(ii({},U),{ref:z})):R.createElement(B,ii({},U,{className:g,ref:z}),d))});sd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};sd.classNames={fullWidth:su,zeroRight:ou};var Rw=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Nw(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var s=Rw();return s&&n.setAttribute("nonce",s),n}function Fw(n,s){n.styleSheet?n.styleSheet.cssText=s:n.appendChild(document.createTextNode(s))}function Lw(n){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(n)}var Mw=function(){var n=0,s=null;return{add:function(i){n==0&&(s=Nw())&&(Fw(s,i),Lw(s)),n++},remove:function(){n--,!n&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},Iw=function(){var n=Mw();return function(s,i){R.useEffect(function(){return n.add(s),function(){n.remove()}},[s&&i])}},$x=function(){var n=Iw(),s=function(i){var l=i.styles,c=i.dynamic;return n(l,c),null};return s},Ow={left:0,top:0,right:0,gap:0},u0=function(n){return parseInt(n||"",10)||0},jw=function(n){var s=window.getComputedStyle(document.body),i=s[n==="padding"?"paddingLeft":"marginLeft"],l=s[n==="padding"?"paddingTop":"marginTop"],c=s[n==="padding"?"paddingRight":"marginRight"];return[u0(i),u0(l),u0(c)]},zw=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return Ow;var s=jw(n),i=document.documentElement.clientWidth,l=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,l-i+s[2]-s[0])}},Hw=$x(),ea="data-scroll-locked",Vw=function(n,s,i,l){var c=n.left,u=n.top,p=n.right,d=n.gap;return i===void 0&&(i="margin"),`
  .`.concat(bw,` {
   overflow: hidden `).concat(l,`;
   padding-right: `).concat(d,"px ").concat(l,`;
  }
  body[`).concat(ea,`] {
    overflow: hidden `).concat(l,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(l,";"),i==="margin"&&`
    padding-left: `.concat(c,`px;
    padding-top: `).concat(u,`px;
    padding-right: `).concat(p,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(l,`;
    `),i==="padding"&&"padding-right: ".concat(d,"px ").concat(l,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ou,` {
    right: `).concat(d,"px ").concat(l,`;
  }
  
  .`).concat(su,` {
    margin-right: `).concat(d,"px ").concat(l,`;
  }
  
  .`).concat(ou," .").concat(ou,` {
    right: 0 `).concat(l,`;
  }
  
  .`).concat(su," .").concat(su,` {
    margin-right: 0 `).concat(l,`;
  }
  
  body[`).concat(ea,`] {
    `).concat(Cw,": ").concat(d,`px;
  }
`)},Tm=function(){var n=parseInt(document.body.getAttribute(ea)||"0",10);return isFinite(n)?n:0},Uw=function(){R.useEffect(function(){return document.body.setAttribute(ea,(Tm()+1).toString()),function(){var n=Tm()-1;n<=0?document.body.removeAttribute(ea):document.body.setAttribute(ea,n.toString())}},[])},Zw=function(n){var s=n.noRelative,i=n.noImportant,l=n.gapMode,c=l===void 0?"margin":l;Uw();var u=R.useMemo(function(){return zw(c)},[c]);return R.createElement(Hw,{styles:Vw(u,!s,c,i?"":"!important")})},b0=!1;if(typeof window<"u")try{var Qc=Object.defineProperty({},"passive",{get:function(){return b0=!0,!0}});window.addEventListener("test",Qc,Qc),window.removeEventListener("test",Qc,Qc)}catch{b0=!1}var Qs=b0?{passive:!1}:!1,Ww=function(n){return n.tagName==="TEXTAREA"},Kx=function(n,s){if(!(n instanceof Element))return!1;var i=window.getComputedStyle(n);return i[s]!=="hidden"&&!(i.overflowY===i.overflowX&&!Ww(n)&&i[s]==="visible")},qw=function(n){return Kx(n,"overflowY")},Gw=function(n){return Kx(n,"overflowX")},Dm=function(n,s){var i=s.ownerDocument,l=s;do{typeof ShadowRoot<"u"&&l instanceof ShadowRoot&&(l=l.host);var c=Qx(n,l);if(c){var u=Yx(n,l),p=u[1],d=u[2];if(p>d)return!0}l=l.parentNode}while(l&&l!==i.body);return!1},$w=function(n){var s=n.scrollTop,i=n.scrollHeight,l=n.clientHeight;return[s,i,l]},Kw=function(n){var s=n.scrollLeft,i=n.scrollWidth,l=n.clientWidth;return[s,i,l]},Qx=function(n,s){return n==="v"?qw(s):Gw(s)},Yx=function(n,s){return n==="v"?$w(s):Kw(s)},Qw=function(n,s){return n==="h"&&s==="rtl"?-1:1},Yw=function(n,s,i,l,c){var u=Qw(n,window.getComputedStyle(s).direction),p=u*l,d=i.target,g=s.contains(d),m=!1,x=p>0,A=0,_=0;do{if(!d)break;var k=Yx(n,d),N=k[0],C=k[1],b=k[2],S=C-b-u*N;(N||S)&&Qx(n,d)&&(A+=S,_+=N);var B=d.parentNode;d=B&&B.nodeType===Node.DOCUMENT_FRAGMENT_NODE?B.host:B}while(!g&&d!==document.body||g&&(s.contains(d)||s===d));return(x&&Math.abs(A)<1||!x&&Math.abs(_)<1)&&(m=!0),m},Yc=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},Rm=function(n){return[n.deltaX,n.deltaY]},Nm=function(n){return n&&"current"in n?n.current:n},Xw=function(n,s){return n[0]===s[0]&&n[1]===s[1]},Jw=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},e2=0,Ys=[];function t2(n){var s=R.useRef([]),i=R.useRef([0,0]),l=R.useRef(),c=R.useState(e2++)[0],u=R.useState($x)[0],p=R.useRef(n);R.useEffect(function(){p.current=n},[n]),R.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(c));var C=ww([n.lockRef.current],(n.shards||[]).map(Nm),!0).filter(Boolean);return C.forEach(function(b){return b.classList.add("allow-interactivity-".concat(c))}),function(){document.body.classList.remove("block-interactivity-".concat(c)),C.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(c))})}}},[n.inert,n.lockRef.current,n.shards]);var d=R.useCallback(function(C,b){if("touches"in C&&C.touches.length===2||C.type==="wheel"&&C.ctrlKey)return!p.current.allowPinchZoom;var S=Yc(C),B=i.current,D="deltaX"in C?C.deltaX:B[0]-S[0],F="deltaY"in C?C.deltaY:B[1]-S[1],M,z=C.target,U=Math.abs(D)>Math.abs(F)?"h":"v";if("touches"in C&&U==="h"&&z.type==="range")return!1;var j=window.getSelection(),te=j&&j.anchorNode,Z=te?te===z||te.contains(z):!1;if(Z)return!1;var K=Dm(U,z);if(!K)return!0;if(K?M=U:(M=U==="v"?"h":"v",K=Dm(U,z)),!K)return!1;if(!l.current&&"changedTouches"in C&&(D||F)&&(l.current=M),!M)return!0;var ee=l.current||M;return Yw(ee,b,C,ee==="h"?D:F)},[]),g=R.useCallback(function(C){var b=C;if(!(!Ys.length||Ys[Ys.length-1]!==u)){var S="deltaY"in b?Rm(b):Yc(b),B=s.current.filter(function(M){return M.name===b.type&&(M.target===b.target||b.target===M.shadowParent)&&Xw(M.delta,S)})[0];if(B&&B.should){b.cancelable&&b.preventDefault();return}if(!B){var D=(p.current.shards||[]).map(Nm).filter(Boolean).filter(function(M){return M.contains(b.target)}),F=D.length>0?d(b,D[0]):!p.current.noIsolation;F&&b.cancelable&&b.preventDefault()}}},[]),m=R.useCallback(function(C,b,S,B){var D={name:C,delta:b,target:S,should:B,shadowParent:n2(S)};s.current.push(D),setTimeout(function(){s.current=s.current.filter(function(F){return F!==D})},1)},[]),x=R.useCallback(function(C){i.current=Yc(C),l.current=void 0},[]),A=R.useCallback(function(C){m(C.type,Rm(C),C.target,d(C,n.lockRef.current))},[]),_=R.useCallback(function(C){m(C.type,Yc(C),C.target,d(C,n.lockRef.current))},[]);R.useEffect(function(){return Ys.push(u),n.setCallbacks({onScrollCapture:A,onWheelCapture:A,onTouchMoveCapture:_}),document.addEventListener("wheel",g,Qs),document.addEventListener("touchmove",g,Qs),document.addEventListener("touchstart",x,Qs),function(){Ys=Ys.filter(function(C){return C!==u}),document.removeEventListener("wheel",g,Qs),document.removeEventListener("touchmove",g,Qs),document.removeEventListener("touchstart",x,Qs)}},[]);var k=n.removeScrollBar,N=n.inert;return R.createElement(R.Fragment,null,N?R.createElement(u,{styles:Jw(c)}):null,k?R.createElement(Zw,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function n2(n){for(var s=null;n!==null;)n instanceof ShadowRoot&&(s=n.host,n=n.host),n=n.parentNode;return s}const r2=Dw(Gx,t2);var Xx=R.forwardRef(function(n,s){return R.createElement(sd,ii({},n,{ref:s,sideCar:r2}))});Xx.classNames=sd.classNames;var i2=function(n){if(typeof document>"u")return null;var s=Array.isArray(n)?n[0]:n;return s.ownerDocument.body},Xs=new WeakMap,Xc=new WeakMap,Jc={},d0=0,Jx=function(n){return n&&(n.host||Jx(n.parentNode))},o2=function(n,s){return s.map(function(i){if(n.contains(i))return i;var l=Jx(i);return l&&n.contains(l)?l:(console.error("aria-hidden",i,"in not contained inside",n,". Doing nothing"),null)}).filter(function(i){return!!i})},s2=function(n,s,i,l){var c=o2(s,Array.isArray(n)?n:[n]);Jc[i]||(Jc[i]=new WeakMap);var u=Jc[i],p=[],d=new Set,g=new Set(c),m=function(A){!A||d.has(A)||(d.add(A),m(A.parentNode))};c.forEach(m);var x=function(A){!A||g.has(A)||Array.prototype.forEach.call(A.children,function(_){if(d.has(_))x(_);else try{var k=_.getAttribute(l),N=k!==null&&k!=="false",C=(Xs.get(_)||0)+1,b=(u.get(_)||0)+1;Xs.set(_,C),u.set(_,b),p.push(_),C===1&&N&&Xc.set(_,!0),b===1&&_.setAttribute(i,"true"),N||_.setAttribute(l,"true")}catch(S){console.error("aria-hidden: cannot operate on ",_,S)}})};return x(s),d.clear(),d0++,function(){p.forEach(function(A){var _=Xs.get(A)-1,k=u.get(A)-1;Xs.set(A,_),u.set(A,k),_||(Xc.has(A)||A.removeAttribute(l),Xc.delete(A)),k||A.removeAttribute(i)}),d0--,d0||(Xs=new WeakMap,Xs=new WeakMap,Xc=new WeakMap,Jc={})}},a2=function(n,s,i){i===void 0&&(i="data-aria-hidden");var l=Array.from(Array.isArray(n)?n:[n]),c=i2(n);return c?(l.push.apply(l,Array.from(c.querySelectorAll("[aria-live], script"))),s2(l,c,i,"aria-hidden")):function(){return null}};function l2(n){const s=c2(n),i=R.forwardRef((l,c)=>{const{children:u,...p}=l,d=R.Children.toArray(u),g=d.find(d2);if(g){const m=g.props.children,x=d.map(A=>A===g?R.Children.count(m)>1?R.Children.only(null):R.isValidElement(m)?m.props.children:null:A);return w.jsx(s,{...p,ref:c,children:R.isValidElement(m)?R.cloneElement(m,void 0,x):null})}return w.jsx(s,{...p,ref:c,children:u})});return i.displayName=`${n}.Slot`,i}function c2(n){const s=R.forwardRef((i,l)=>{const{children:c,...u}=i;if(R.isValidElement(c)){const p=h2(c),d=f2(u,c.props);return c.type!==R.Fragment&&(d.ref=l?El(l,p):p),R.cloneElement(c,d)}return R.Children.count(c)>1?R.Children.only(null):null});return s.displayName=`${n}.SlotClone`,s}var u2=Symbol("radix.slottable");function d2(n){return R.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===u2}function f2(n,s){const i={...s};for(const l in s){const c=n[l],u=s[l];/^on[A-Z]/.test(l)?c&&u?i[l]=(...d)=>{const g=u(...d);return c(...d),g}:c&&(i[l]=c):l==="style"?i[l]={...c,...u}:l==="className"&&(i[l]=[c,u].filter(Boolean).join(" "))}return{...n,...i}}function h2(n){var l,c;let s=(l=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:l.get,i=s&&"isReactWarning"in s&&s.isReactWarning;return i?n.ref:(s=(c=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:c.get,i=s&&"isReactWarning"in s&&s.isReactWarning,i?n.props.ref:n.props.ref||n.ref)}var ad="Dialog",[eA]=kl(ad),[p2,Vr]=eA(ad),tA=n=>{const{__scopeDialog:s,children:i,open:l,defaultOpen:c,onOpenChange:u,modal:p=!0}=n,d=R.useRef(null),g=R.useRef(null),[m,x]=od({prop:l,defaultProp:c??!1,onChange:u,caller:ad});return w.jsx(p2,{scope:s,triggerRef:d,contentRef:g,contentId:yl(),titleId:yl(),descriptionId:yl(),open:m,onOpenChange:x,onOpenToggle:R.useCallback(()=>x(A=>!A),[x]),modal:p,children:i})};tA.displayName=ad;var nA="DialogTrigger",m2=R.forwardRef((n,s)=>{const{__scopeDialog:i,...l}=n,c=Vr(nA,i),u=kr(s,c.triggerRef);return w.jsx(xn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":c.open,"aria-controls":c.contentId,"data-state":G0(c.open),...l,ref:u,onClick:hn(n.onClick,c.onOpenToggle)})});m2.displayName=nA;var W0="DialogPortal",[g2,rA]=eA(W0,{forceMount:void 0}),iA=n=>{const{__scopeDialog:s,forceMount:i,children:l,container:c}=n,u=Vr(W0,s);return w.jsx(g2,{scope:s,forceMount:i,children:R.Children.map(l,p=>w.jsx(ua,{present:i||u.open,children:w.jsx(Zx,{asChild:!0,container:c,children:p})}))})};iA.displayName=W0;var Yu="DialogOverlay",oA=R.forwardRef((n,s)=>{const i=rA(Yu,n.__scopeDialog),{forceMount:l=i.forceMount,...c}=n,u=Vr(Yu,n.__scopeDialog);return u.modal?w.jsx(ua,{present:l||u.open,children:w.jsx(A2,{...c,ref:s})}):null});oA.displayName=Yu;var x2=l2("DialogOverlay.RemoveScroll"),A2=R.forwardRef((n,s)=>{const{__scopeDialog:i,...l}=n,c=Vr(Yu,i);return w.jsx(Xx,{as:x2,allowPinchZoom:!0,shards:[c.contentRef],children:w.jsx(xn.div,{"data-state":G0(c.open),...l,ref:s,style:{pointerEvents:"auto",...l.style}})})}),rs="DialogContent",sA=R.forwardRef((n,s)=>{const i=rA(rs,n.__scopeDialog),{forceMount:l=i.forceMount,...c}=n,u=Vr(rs,n.__scopeDialog);return w.jsx(ua,{present:l||u.open,children:u.modal?w.jsx(v2,{...c,ref:s}):w.jsx(y2,{...c,ref:s})})});sA.displayName=rs;var v2=R.forwardRef((n,s)=>{const i=Vr(rs,n.__scopeDialog),l=R.useRef(null),c=kr(s,i.contentRef,l);return R.useEffect(()=>{const u=l.current;if(u)return a2(u)},[]),w.jsx(aA,{...n,ref:c,trapFocus:i.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:hn(n.onCloseAutoFocus,u=>{var p;u.preventDefault(),(p=i.triggerRef.current)==null||p.focus()}),onPointerDownOutside:hn(n.onPointerDownOutside,u=>{const p=u.detail.originalEvent,d=p.button===0&&p.ctrlKey===!0;(p.button===2||d)&&u.preventDefault()}),onFocusOutside:hn(n.onFocusOutside,u=>u.preventDefault())})}),y2=R.forwardRef((n,s)=>{const i=Vr(rs,n.__scopeDialog),l=R.useRef(!1),c=R.useRef(!1);return w.jsx(aA,{...n,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:u=>{var p,d;(p=n.onCloseAutoFocus)==null||p.call(n,u),u.defaultPrevented||(l.current||(d=i.triggerRef.current)==null||d.focus(),u.preventDefault()),l.current=!1,c.current=!1},onInteractOutside:u=>{var g,m;(g=n.onInteractOutside)==null||g.call(n,u),u.defaultPrevented||(l.current=!0,u.detail.originalEvent.type==="pointerdown"&&(c.current=!0));const p=u.target;((m=i.triggerRef.current)==null?void 0:m.contains(p))&&u.preventDefault(),u.detail.originalEvent.type==="focusin"&&c.current&&u.preventDefault()}})}),aA=R.forwardRef((n,s)=>{const{__scopeDialog:i,trapFocus:l,onOpenAutoFocus:c,onCloseAutoFocus:u,...p}=n,d=Vr(rs,i),g=R.useRef(null),m=kr(s,g);return _w(),w.jsxs(w.Fragment,{children:[w.jsx(Vx,{asChild:!0,loop:!0,trapped:l,onMountAutoFocus:c,onUnmountAutoFocus:u,children:w.jsx(zx,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":G0(d.open),...p,ref:m,onDismiss:()=>d.onOpenChange(!1)})}),w.jsxs(w.Fragment,{children:[w.jsx(_2,{titleId:d.titleId}),w.jsx(b2,{contentRef:g,descriptionId:d.descriptionId})]})]})}),q0="DialogTitle",lA=R.forwardRef((n,s)=>{const{__scopeDialog:i,...l}=n,c=Vr(q0,i);return w.jsx(xn.h2,{id:c.titleId,...l,ref:s})});lA.displayName=q0;var cA="DialogDescription",uA=R.forwardRef((n,s)=>{const{__scopeDialog:i,...l}=n,c=Vr(cA,i);return w.jsx(xn.p,{id:c.descriptionId,...l,ref:s})});uA.displayName=cA;var dA="DialogClose",fA=R.forwardRef((n,s)=>{const{__scopeDialog:i,...l}=n,c=Vr(dA,i);return w.jsx(xn.button,{type:"button",...l,ref:s,onClick:hn(n.onClick,()=>c.onOpenChange(!1))})});fA.displayName=dA;function G0(n){return n?"open":"closed"}var hA="DialogTitleWarning",[xS,pA]=H1(hA,{contentName:rs,titleName:q0,docsSlug:"dialog"}),_2=({titleId:n})=>{const s=pA(hA),i=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return R.useEffect(()=>{n&&(document.getElementById(n)||console.error(i))},[i,n]),null},w2="DialogDescriptionWarning",b2=({contentRef:n,descriptionId:s})=>{const l=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${pA(w2).contentName}}.`;return R.useEffect(()=>{var u;const c=(u=n.current)==null?void 0:u.getAttribute("aria-describedby");s&&c&&(document.getElementById(s)||console.warn(l))},[l,n,s]),null},mA=tA,gA=iA,ld=oA,cd=sA,ud=lA,dd=uA,xA=fA;const $0=mA,C2=gA,AA=R.forwardRef(({className:n,...s},i)=>w.jsx(ld,{ref:i,className:at("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...s}));AA.displayName=ld.displayName;const fd=R.forwardRef(({className:n,children:s,...i},l)=>w.jsxs(C2,{children:[w.jsx(AA,{}),w.jsxs(cd,{ref:l,className:at("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...i,children:[s,w.jsxs(xA,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[w.jsx(wx,{className:"h-4 w-4"}),w.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));fd.displayName=cd.displayName;const hd=({className:n,...s})=>w.jsx("div",{className:at("flex flex-col space-y-1.5 text-center sm:text-left",n),...s});hd.displayName="DialogHeader";const K0=({className:n,...s})=>w.jsx("div",{className:at("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...s});K0.displayName="DialogFooter";const pd=R.forwardRef(({className:n,...s},i)=>w.jsx(ud,{ref:i,className:at("text-lg font-semibold leading-none tracking-tight",n),...s}));pd.displayName=ud.displayName;const md=R.forwardRef(({className:n,...s},i)=>w.jsx(dd,{ref:i,className:at("text-sm text-muted-foreground",n),...s}));md.displayName=dd.displayName;function E2(){const n=window.location.hash.slice(1);if(!n)return null;if(n==="raw")return{type:"raw",name:"raw"};if(n==="map")return{type:"map",name:"map"};if(n==="visualizer")return{type:"visualizer",name:"visualizer"};if(n.startsWith("map/focus/")){const c=n.slice(10);return c?{type:"map",name:"map",mapFocusKey:decodeURIComponent(c)}:{type:"map",name:"map"}}const s=n.indexOf("/");if(s===-1)return null;const i=n.slice(0,s),l=decodeURIComponent(n.slice(s+1));return(i==="channel"||i==="contact")&&l?{type:i,name:l}:null}function vA(n){return`#map/focus/${encodeURIComponent(n)}`}function k2(n){if(!n)return"";if(n.type==="raw")return"#raw";if(n.type==="map")return"#map";if(n.type==="visualizer")return"#visualizer";const s=n.type==="channel"&&n.name.startsWith("#")?n.name.slice(1):n.name;return`#${n.type}/${encodeURIComponent(s)}`}function S2(n){const s=k2(n);s!==window.location.hash&&window.history.replaceState(null,"",s||window.location.pathname)}function B2({open:n,onClose:s,paths:i,senderInfo:l,contacts:c,config:u}){const p=i.map(g=>({...g,resolved:j1(g.path,l,c,u)})),d=i.length===1;return w.jsx($0,{open:n,onOpenChange:g=>!g&&s(),children:w.jsxs(fd,{className:"max-w-md max-h-[80vh] flex flex-col",children:[w.jsxs(hd,{children:[w.jsxs(pd,{children:["Message Path",!d&&`s (${i.length})`]}),w.jsx(md,{children:d?w.jsxs(w.Fragment,{children:["This shows ",w.jsx("em",{children:"one route"})," that this message traveled through the mesh network. Routers may be incorrectly identified due to prefix collisions between heard and non-heard router advertisements."]}):w.jsxs(w.Fragment,{children:["This message was received via ",w.jsxs("strong",{children:[i.length," different routes"]}),". Routers may be incorrectly identified due to prefix collisions."]})})]}),w.jsxs("div",{className:"flex-1 overflow-y-auto py-2 space-y-4",children:[p.map((g,m)=>w.jsxs("div",{children:[!d&&w.jsxs("div",{className:"text-xs text-muted-foreground font-medium mb-2 pb-1 border-b border-border",children:["Path ",m+1,"  received ",ra(g.received_at)]}),w.jsx(P2,{resolved:g.resolved,senderInfo:l,hideStraightLine:!d})]},m)),!d&&p.length>0&&(()=>{const g=p[0].resolved;return Bt(g.sender.lat,g.sender.lon)&&Bt(g.receiver.lat,g.receiver.lon)?w.jsxs("div",{className:"pt-3 mt-1 border-t border-border",children:[w.jsx("span",{className:"text-sm text-muted-foreground",children:"Straight-line distance: "}),w.jsx("span",{className:"text-sm font-medium",children:ns(zr(g.sender.lat,g.sender.lon,g.receiver.lat,g.receiver.lon))})]}):null})()]}),w.jsx(K0,{children:w.jsx(wn,{onClick:s,children:"Close"})})]})})}function P2({resolved:n,senderInfo:s,hideStraightLine:i}){const l=c=>{if(c===0)return Bt(n.sender.lat,n.sender.lon)?{lat:n.sender.lat,lon:n.sender.lon}:null;const u=n.hops[c-1];return u.matches.length>1||u.matches.length===0?null:Bt(u.matches[0].lat,u.matches[0].lon)?{lat:u.matches[0].lat,lon:u.matches[0].lon}:null};return w.jsxs("div",{className:"space-y-0",children:[w.jsx(Fm,{label:"Sender",name:n.sender.name,prefix:n.sender.prefix,distance:null,isFirst:!0,lat:n.sender.lat,lon:n.sender.lon,publicKey:s.publicKeyOrPrefix}),n.hops.map((c,u)=>w.jsx(T2,{hop:c,hopNumber:u+1,prevLocation:l(u)},u)),w.jsx(Fm,{label:"Receiver (me)",name:n.receiver.name,prefix:n.receiver.prefix,distance:D2(n),isLast:!0,lat:n.receiver.lat,lon:n.receiver.lon,publicKey:n.receiver.publicKey??void 0}),n.totalDistances&&n.totalDistances.length>0&&w.jsxs("div",{className:"pt-3 mt-3 border-t border-border",children:[w.jsxs("span",{className:"text-sm text-muted-foreground",children:["Presumed unambiguous distance covered:"," "]}),w.jsxs("span",{className:"text-sm font-medium",children:[n.hasGaps?">":"",ns(n.totalDistances[0])]})]}),!i&&Bt(n.sender.lat,n.sender.lon)&&Bt(n.receiver.lat,n.receiver.lon)&&w.jsxs("div",{className:n.totalDistances&&n.totalDistances.length>0?"pt-1":"pt-3 mt-3 border-t border-border",children:[w.jsx("span",{className:"text-sm text-muted-foreground",children:"Straight-line distance: "}),w.jsx("span",{className:"text-sm font-medium",children:ns(zr(n.sender.lat,n.sender.lon,n.receiver.lat,n.receiver.lon))})]})]})}function Fm({label:n,name:s,prefix:i,distance:l,isFirst:c,isLast:u,lat:p,lon:d,publicKey:g}){const m=Bt(p??null,d??null)&&g;return w.jsxs("div",{className:"flex gap-3",children:[w.jsxs("div",{className:"flex flex-col items-center w-4 flex-shrink-0",children:[!c&&w.jsx("div",{className:"w-0.5 h-3 bg-border"}),w.jsx("div",{className:"w-3 h-3 rounded-full bg-primary flex-shrink-0"}),!u&&w.jsx("div",{className:"w-0.5 flex-1 bg-border"})]}),w.jsxs("div",{className:"pb-3 flex-1 min-w-0",children:[w.jsx("div",{className:"text-xs text-muted-foreground font-medium",children:n}),w.jsxs("div",{className:"font-medium truncate",children:[s," ",w.jsxs("span",{className:"text-muted-foreground font-mono text-sm",children:["(",i,")"]}),l!==null&&w.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["- ",ns(l)]}),m&&w.jsx(C0,{lat:p,lon:d,publicKey:g})]})]})]})}function T2({hop:n,hopNumber:s,prevLocation:i}){const l=n.matches.length>1,c=n.matches.length===0,u=p=>!i||i.lat===null||i.lon===null||!Bt(p.lat,p.lon)?null:zr(i.lat,i.lon,p.lat,p.lon);return w.jsxs("div",{className:"flex gap-3",children:[w.jsxs("div",{className:"flex flex-col items-center w-4 flex-shrink-0",children:[w.jsx("div",{className:"w-0.5 h-3 bg-border"}),w.jsx("div",{className:"w-3 h-3 rounded-full bg-muted-foreground flex-shrink-0"}),w.jsx("div",{className:"w-0.5 flex-1 bg-border"})]}),w.jsxs("div",{className:"pb-3 flex-1 min-w-0",children:[w.jsxs("div",{className:"text-xs text-muted-foreground font-medium",children:["Hop ",s,l&&w.jsx("span",{className:"text-yellow-500 ml-1",children:"(ambiguous)"})]}),c?w.jsxs("div",{className:"font-medium text-muted-foreground/70",children:["<UNKNOWN ",w.jsx("span",{className:"font-mono text-sm",children:n.prefix}),">"]}):l?w.jsx("div",{children:n.matches.map(p=>{const d=u(p),g=Bt(p.lat,p.lon);return w.jsxs("div",{className:"font-medium truncate",children:[p.name||p.public_key.slice(0,12)," ",w.jsxs("span",{className:"text-muted-foreground font-mono text-sm",children:["(",p.public_key.slice(0,2).toUpperCase(),")"]}),d!==null&&w.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["- ",ns(d)]}),g&&w.jsx(C0,{lat:p.lat,lon:p.lon,publicKey:p.public_key})]},p.public_key)})}):w.jsxs("div",{className:"font-medium truncate",children:[n.matches[0].name||n.matches[0].public_key.slice(0,12)," ",w.jsxs("span",{className:"text-muted-foreground font-mono text-sm",children:["(",n.prefix,")"]}),n.distanceFromPrev!==null&&w.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["- ",ns(n.distanceFromPrev)]}),Bt(n.matches[0].lat,n.matches[0].lon)&&w.jsx(C0,{lat:n.matches[0].lat,lon:n.matches[0].lon,publicKey:n.matches[0].public_key})]})]})]})}function C0({lat:n,lon:s,publicKey:i}){const l=c=>{c.preventDefault(),c.stopPropagation();const u=window.location.origin+window.location.pathname+vA(i);window.open(u,"_blank")};return w.jsxs("span",{className:"text-xs text-muted-foreground/70 font-mono cursor-pointer hover:text-primary hover:underline ml-1",onClick:l,title:"View on map",children:["(",n.toFixed(4),", ",s.toFixed(4),")"]})}function D2(n){let s=null,i=null;if(n.hops.length>0){const l=n.hops[n.hops.length-1];l.matches.length===1&&Bt(l.matches[0].lat,l.matches[0].lon)&&(s=l.matches[0].lat,i=l.matches[0].lon)}else Bt(n.sender.lat,n.sender.lon)&&(s=n.sender.lat,i=n.sender.lon);return s===null||i===null||!Bt(n.receiver.lat,n.receiver.lon)?null:zr(s,i,n.receiver.lat,n.receiver.lon)}function R2(n,s){if(!s)return n;const i=/@\[([^\]]+)\]/g,l=[];let c=0,u,p=0;for(;(u=i.exec(n))!==null;){u.index>c&&l.push(n.slice(c,u.index));const d=u[1],g=d===s;l.push(w.jsxs("span",{className:at("rounded px-0.5",g?"bg-primary/30 text-primary font-medium":"bg-muted-foreground/20"),children:["@[",d,"]"]},p++)),c=u.index+u[0].length}return c<n.length&&l.push(n.slice(c)),l.length>0?l:n}function Lm({paths:n,onClick:s,variant:i}){const c=`(${O1(n).display})`,u=i==="header"?"font-normal text-muted-foreground/70 ml-1 text-[11px] cursor-pointer hover:text-primary hover:underline":"text-[10px] text-muted-foreground/50 ml-1 cursor-pointer hover:text-primary hover:underline";return w.jsx("span",{className:u,onClick:p=>{p.stopPropagation(),s()},title:"View message path",children:c})}function N2({messages:n,contacts:s,loading:i,loadingOlder:l=!1,hasOlderMessages:c=!1,onSenderClick:u,onLoadOlder:p,radioName:d,config:g}){const m=R.useRef(null),x=R.useRef(0),A=R.useRef(!0),[_,k]=R.useState(!1),[N,C]=R.useState(null),b=R.useRef({scrollTop:0,scrollHeight:0,clientHeight:0,wasNearTop:!1,wasNearBottom:!0});R.useLayoutEffect(()=>{if(!m.current)return;const j=m.current,te=n.length-x.current;if(A.current&&n.length>0)j.scrollTop=j.scrollHeight,A.current=!1;else if(te>0&&x.current>0){const Z=j.scrollHeight-b.current.scrollHeight;b.current.wasNearTop&&Z>0?j.scrollTop=b.current.scrollTop+Z:b.current.wasNearBottom&&(j.scrollTop=j.scrollHeight)}x.current=n.length},[n]),R.useEffect(()=>{n.length===0&&(A.current=!0,x.current=0,b.current={scrollTop:0,scrollHeight:0,clientHeight:0,wasNearTop:!1,wasNearBottom:!0})},[n.length]);const S=R.useCallback(()=>{if(!m.current)return;const{scrollTop:j,scrollHeight:te,clientHeight:Z}=m.current,K=te-j-Z;b.current={scrollTop:j,scrollHeight:te,clientHeight:Z,wasNearTop:j<150,wasNearBottom:K<100},k(K>100),!(!p||l||!c)&&j<100&&p()},[p,l,c]),B=R.useCallback(()=>{m.current&&(m.current.scrollTop=m.current.scrollHeight)},[]),D=j=>j&&s.find(te=>te.public_key===j)||null,F=j=>s.find(te=>te.name===j)||null,M=(j,te,Z)=>{if(j.type==="PRIV"&&te)return{name:te.name||te.public_key.slice(0,12),publicKeyOrPrefix:te.public_key,lat:te.lat,lon:te.lon};if(Z){const K=F(Z);if(K)return{name:Z,publicKeyOrPrefix:K.public_key,lat:K.lat,lon:K.lon}}return{name:Z||"Unknown",publicKeyOrPrefix:j.conversation_key||"",lat:null,lon:null}};if(i)return w.jsx("div",{className:"flex-1 overflow-y-auto p-5 text-center text-muted-foreground",children:"Loading messages..."});if(n.length===0)return w.jsx("div",{className:"flex-1 overflow-y-auto p-5 text-center text-muted-foreground",children:"No messages yet"});const z=[...n].sort((j,te)=>j.received_at-te.received_at),U=(j,te)=>j.outgoing?"__outgoing__":j.type==="PRIV"&&j.conversation_key?j.conversation_key:te||"__unknown__";return w.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[w.jsxs("div",{className:"h-full overflow-y-auto p-4 flex flex-col gap-0.5",ref:m,onScroll:S,children:[l&&w.jsx("div",{className:"text-center py-2 text-muted-foreground text-sm",children:"Loading older messages..."}),!l&&c&&w.jsx("div",{className:"text-center py-2 text-muted-foreground text-xs",children:"Scroll up for older messages"}),z.map((j,te)=>{var q;const Z=j.type==="PRIV"?D(j.conversation_key):null,K=(Z==null?void 0:Z.type)===id,{sender:ee,content:G}=K?{sender:null,content:j.text}:_m(j.text),oe=j.outgoing?"You":(Z==null?void 0:Z.name)||ee||((q=j.conversation_key)==null?void 0:q.slice(0,8))||"Unknown",J=!j.outgoing&&u&&oe!=="Unknown",Y=U(j,ee),de=z[te-1],W=de?U(de,_m(de.text).sender):null,ae=!j.outgoing&&Y!==W,H=te===0;let P=null,V="";if(!j.outgoing){if(j.type==="PRIV"&&j.conversation_key)P=(Z==null?void 0:Z.name)||null,V=j.conversation_key;else if(ee){const Q=F(ee);P=ee,V=(Q==null?void 0:Q.public_key)||`name:${ee}`}}return w.jsxs("div",{className:at("flex items-start max-w-[85%]",j.outgoing&&"flex-row-reverse self-end",ae&&!H&&"mt-3"),children:[!j.outgoing&&w.jsx("div",{className:"w-10 flex-shrink-0 flex items-start pt-0.5",children:ae&&V&&w.jsx(y0,{name:P,publicKey:V,size:32})}),w.jsxs("div",{className:at("py-1.5 px-3 rounded-lg min-w-0",j.outgoing?"bg-[#1e3a29]":"bg-muted"),children:[ae&&w.jsxs("div",{className:"text-[13px] font-semibold text-muted-foreground mb-0.5",children:[J?w.jsx("span",{className:"cursor-pointer hover:text-primary hover:underline",onClick:()=>u(oe),title:`Mention ${oe}`,children:oe}):oe,w.jsx("span",{className:"font-normal text-muted-foreground/70 ml-2 text-[11px]",children:ra(j.sender_timestamp||j.received_at)}),!j.outgoing&&j.paths&&j.paths.length>0&&w.jsx(Lm,{paths:j.paths,variant:"header",onClick:()=>C({paths:j.paths,senderInfo:M(j,Z,ee)})})]}),w.jsxs("div",{className:"break-words whitespace-pre-wrap",children:[G.split(`
`).map((Q,pe,ue)=>w.jsxs("span",{children:[R2(Q,d),pe<ue.length-1&&w.jsx("br",{})]},pe)),!ae&&w.jsxs(w.Fragment,{children:[w.jsx("span",{className:"text-[10px] text-muted-foreground/50 ml-2",children:ra(j.sender_timestamp||j.received_at)}),!j.outgoing&&j.paths&&j.paths.length>0&&w.jsx(Lm,{paths:j.paths,variant:"inline",onClick:()=>C({paths:j.paths,senderInfo:M(j,Z,ee)})})]}),j.outgoing&&(j.acked>0?` ${j.acked>1?j.acked:""}`:" ?")]})]})]},j.id)})]}),_&&w.jsx("button",{onClick:B,className:"absolute bottom-4 right-4 w-10 h-10 rounded-full bg-muted hover:bg-accent border border-border flex items-center justify-center shadow-lg transition-opacity",title:"Scroll to bottom",children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-muted-foreground",children:w.jsx("polyline",{points:"6 9 12 15 18 9"})})}),N&&w.jsx(B2,{open:!0,onClose:()=>C(null),paths:N.paths,senderInfo:N.senderInfo,contacts:s,config:g??null})]})}const Mm=156,F2=140,L2=156,M2=120,I2=8,O2=R.forwardRef(function({onSend:s,disabled:i,placeholder:l,isRepeaterMode:c,conversationType:u,senderName:p},d){const[g,m]=R.useState(""),[x,A]=R.useState(!1),_=R.useRef(null);R.useImperativeHandle(d,()=>({appendText:M=>{var z;m(U=>U+M),(z=_.current)==null||z.focus()}}));const k=R.useMemo(()=>{if(u==="contact")return{warningAt:F2,dangerAt:Mm,hardLimit:Mm};if(u==="channel"){const M=(p==null?void 0:p.length)??10,z=Math.max(1,L2-M-2);return{warningAt:M2,dangerAt:Math.max(1,z-I2),hardLimit:z}}return null},[u,p]),{limitState:N,warningMessage:C}=R.useMemo(()=>{if(!k)return{limitState:"normal",warningMessage:null};const M=g.length;return M>=k.hardLimit?{limitState:"error",warningMessage:"likely truncated by radio"}:M>=k.dangerAt?{limitState:"danger",warningMessage:"may impact multi-repeater hop delivery"}:M>=k.warningAt?{limitState:"warning",warningMessage:"may impact multi-repeater hop delivery"}:{limitState:"normal",warningMessage:null}},[g.length,k]),b=k?k.hardLimit-g.length:0,S=R.useCallback(async M=>{M.preventDefault();const z=g.trim();if(c){if(x||i)return;A(!0);try{await s(z),m("")}catch(U){console.error("Failed to request telemetry:",U),vt.error("Failed to request telemetry",{description:U instanceof Error?U.message:"Check radio connection"});return}finally{A(!1)}setTimeout(()=>{var U;return(U=_.current)==null?void 0:U.focus()},0)}else{if(!z||x||i)return;A(!0);try{await s(z),m("")}catch(U){console.error("Failed to send message:",U),vt.error("Failed to send message",{description:U instanceof Error?U.message:"Check radio connection"});return}finally{A(!1)}setTimeout(()=>{var U;return(U=_.current)==null?void 0:U.focus()},0)}},[g,x,i,s,c]),B=R.useCallback(M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),S(M))},[S]),D=c?!0:g.trim().length>0,F=!c&&k!==null;return w.jsxs("form",{className:"px-4 py-3 border-t border-border flex flex-col gap-1",onSubmit:S,children:[w.jsxs("div",{className:"flex gap-2",children:[w.jsx(nn,{ref:_,type:c?"password":"text",autoComplete:c?"off":void 0,value:g,onChange:M=>m(M.target.value),onKeyDown:B,placeholder:l||(c?"Enter password for admin login...":"Type a message..."),disabled:i||x,className:"flex-1 min-w-0"}),w.jsx(wn,{type:"submit",disabled:i||x||!D,className:"flex-shrink-0",children:x?c?"Logging in...":"Sending...":c?g.trim()?"Log in with password":"Log in as guest/use repeater ACLs":"Send"})]}),F&&w.jsxs("div",{className:"flex items-center justify-end gap-2 text-xs",children:[w.jsxs("span",{className:at("tabular-nums",N==="error"||N==="danger"?"text-red-500 font-medium":N==="warning"?"text-yellow-500":"text-muted-foreground"),children:[g.length,"/",k.hardLimit,b<0&&` (${b})`]}),C&&w.jsxs("span",{className:at(N==="error"?"text-red-500":"text-yellow-500"),children:[" ",C]})]})]})});function Im(n){const s=j2(n),i=R.forwardRef((l,c)=>{const{children:u,...p}=l,d=R.Children.toArray(u),g=d.find(H2);if(g){const m=g.props.children,x=d.map(A=>A===g?R.Children.count(m)>1?R.Children.only(null):R.isValidElement(m)?m.props.children:null:A);return w.jsx(s,{...p,ref:c,children:R.isValidElement(m)?R.cloneElement(m,void 0,x):null})}return w.jsx(s,{...p,ref:c,children:u})});return i.displayName=`${n}.Slot`,i}function j2(n){const s=R.forwardRef((i,l)=>{const{children:c,...u}=i;if(R.isValidElement(c)){const p=U2(c),d=V2(u,c.props);return c.type!==R.Fragment&&(d.ref=l?El(l,p):p),R.cloneElement(c,d)}return R.Children.count(c)>1?R.Children.only(null):null});return s.displayName=`${n}.SlotClone`,s}var z2=Symbol("radix.slottable");function H2(n){return R.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===z2}function V2(n,s){const i={...s};for(const l in s){const c=n[l],u=s[l];/^on[A-Z]/.test(l)?c&&u?i[l]=(...d)=>{const g=u(...d);return c(...d),g}:c&&(i[l]=c):l==="style"?i[l]={...c,...u}:l==="className"&&(i[l]=[c,u].filter(Boolean).join(" "))}return{...n,...i}}function U2(n){var l,c;let s=(l=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:l.get,i=s&&"isReactWarning"in s&&s.isReactWarning;return i?n.ref:(s=(c=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:c.get,i=s&&"isReactWarning"in s&&s.isReactWarning,i?n.props.ref:n.props.ref||n.ref)}function Z2(n){const s=n+"CollectionProvider",[i,l]=kl(s),[c,u]=i(s,{collectionRef:{current:null},itemMap:new Map}),p=C=>{const{scope:b,children:S}=C,B=ke.useRef(null),D=ke.useRef(new Map).current;return w.jsx(c,{scope:b,itemMap:D,collectionRef:B,children:S})};p.displayName=s;const d=n+"CollectionSlot",g=Im(d),m=ke.forwardRef((C,b)=>{const{scope:S,children:B}=C,D=u(d,S),F=kr(b,D.collectionRef);return w.jsx(g,{ref:F,children:B})});m.displayName=d;const x=n+"CollectionItemSlot",A="data-radix-collection-item",_=Im(x),k=ke.forwardRef((C,b)=>{const{scope:S,children:B,...D}=C,F=ke.useRef(null),M=kr(b,F),z=u(x,S);return ke.useEffect(()=>(z.itemMap.set(F,{ref:F,...D}),()=>void z.itemMap.delete(F))),w.jsx(_,{[A]:"",ref:M,children:B})});k.displayName=x;function N(C){const b=u(n+"CollectionConsumer",C);return ke.useCallback(()=>{const B=b.collectionRef.current;if(!B)return[];const D=Array.from(B.querySelectorAll(`[${A}]`));return Array.from(b.itemMap.values()).sort((z,U)=>D.indexOf(z.ref.current)-D.indexOf(U.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:p,Slot:m,ItemSlot:k},N,l]}var W2=R.createContext(void 0);function yA(n){const s=R.useContext(W2);return n||s||"ltr"}var f0="rovingFocusGroup.onEntryFocus",q2={bubbles:!1,cancelable:!0},Sl="RovingFocusGroup",[E0,_A,G2]=Z2(Sl),[$2,wA]=kl(Sl,[G2]),[K2,Q2]=$2(Sl),bA=R.forwardRef((n,s)=>w.jsx(E0.Provider,{scope:n.__scopeRovingFocusGroup,children:w.jsx(E0.Slot,{scope:n.__scopeRovingFocusGroup,children:w.jsx(Y2,{...n,ref:s})})}));bA.displayName=Sl;var Y2=R.forwardRef((n,s)=>{const{__scopeRovingFocusGroup:i,orientation:l,loop:c=!1,dir:u,currentTabStopId:p,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:g,onEntryFocus:m,preventScrollOnEntryFocus:x=!1,...A}=n,_=R.useRef(null),k=kr(s,_),N=yA(u),[C,b]=od({prop:p,defaultProp:d??null,onChange:g,caller:Sl}),[S,B]=R.useState(!1),D=oa(m),F=_A(i),M=R.useRef(!1),[z,U]=R.useState(0);return R.useEffect(()=>{const j=_.current;if(j)return j.addEventListener(f0,D),()=>j.removeEventListener(f0,D)},[D]),w.jsx(K2,{scope:i,orientation:l,dir:N,loop:c,currentTabStopId:C,onItemFocus:R.useCallback(j=>b(j),[b]),onItemShiftTab:R.useCallback(()=>B(!0),[]),onFocusableItemAdd:R.useCallback(()=>U(j=>j+1),[]),onFocusableItemRemove:R.useCallback(()=>U(j=>j-1),[]),children:w.jsx(xn.div,{tabIndex:S||z===0?-1:0,"data-orientation":l,...A,ref:k,style:{outline:"none",...n.style},onMouseDown:hn(n.onMouseDown,()=>{M.current=!0}),onFocus:hn(n.onFocus,j=>{const te=!M.current;if(j.target===j.currentTarget&&te&&!S){const Z=new CustomEvent(f0,q2);if(j.currentTarget.dispatchEvent(Z),!Z.defaultPrevented){const K=F().filter(Y=>Y.focusable),ee=K.find(Y=>Y.active),G=K.find(Y=>Y.id===C),J=[ee,G,...K].filter(Boolean).map(Y=>Y.ref.current);kA(J,x)}}M.current=!1}),onBlur:hn(n.onBlur,()=>B(!1))})})}),CA="RovingFocusGroupItem",EA=R.forwardRef((n,s)=>{const{__scopeRovingFocusGroup:i,focusable:l=!0,active:c=!1,tabStopId:u,children:p,...d}=n,g=yl(),m=u||g,x=Q2(CA,i),A=x.currentTabStopId===m,_=_A(i),{onFocusableItemAdd:k,onFocusableItemRemove:N,currentTabStopId:C}=x;return R.useEffect(()=>{if(l)return k(),()=>N()},[l,k,N]),w.jsx(E0.ItemSlot,{scope:i,id:m,focusable:l,active:c,children:w.jsx(xn.span,{tabIndex:A?0:-1,"data-orientation":x.orientation,...d,ref:s,onMouseDown:hn(n.onMouseDown,b=>{l?x.onItemFocus(m):b.preventDefault()}),onFocus:hn(n.onFocus,()=>x.onItemFocus(m)),onKeyDown:hn(n.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){x.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const S=eb(b,x.orientation,x.dir);if(S!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let D=_().filter(F=>F.focusable).map(F=>F.ref.current);if(S==="last")D.reverse();else if(S==="prev"||S==="next"){S==="prev"&&D.reverse();const F=D.indexOf(b.currentTarget);D=x.loop?tb(D,F+1):D.slice(F+1)}setTimeout(()=>kA(D))}}),children:typeof p=="function"?p({isCurrentTabStop:A,hasTabStop:C!=null}):p})})});EA.displayName=CA;var X2={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function J2(n,s){return s!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function eb(n,s,i){const l=J2(n.key,i);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(l))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(l)))return X2[l]}function kA(n,s=!1){const i=document.activeElement;for(const l of n)if(l===i||(l.focus({preventScroll:s}),document.activeElement!==i))return}function tb(n,s){return n.map((i,l)=>n[(s+l)%n.length])}var nb=bA,rb=EA,gd="Tabs",[ib]=kl(gd,[wA]),SA=wA(),[ob,Q0]=ib(gd),BA=R.forwardRef((n,s)=>{const{__scopeTabs:i,value:l,onValueChange:c,defaultValue:u,orientation:p="horizontal",dir:d,activationMode:g="automatic",...m}=n,x=yA(d),[A,_]=od({prop:l,onChange:c,defaultProp:u??"",caller:gd});return w.jsx(ob,{scope:i,baseId:yl(),value:A,onValueChange:_,orientation:p,dir:x,activationMode:g,children:w.jsx(xn.div,{dir:x,"data-orientation":p,...m,ref:s})})});BA.displayName=gd;var PA="TabsList",TA=R.forwardRef((n,s)=>{const{__scopeTabs:i,loop:l=!0,...c}=n,u=Q0(PA,i),p=SA(i);return w.jsx(nb,{asChild:!0,...p,orientation:u.orientation,dir:u.dir,loop:l,children:w.jsx(xn.div,{role:"tablist","aria-orientation":u.orientation,...c,ref:s})})});TA.displayName=PA;var DA="TabsTrigger",RA=R.forwardRef((n,s)=>{const{__scopeTabs:i,value:l,disabled:c=!1,...u}=n,p=Q0(DA,i),d=SA(i),g=LA(p.baseId,l),m=MA(p.baseId,l),x=l===p.value;return w.jsx(rb,{asChild:!0,...d,focusable:!c,active:x,children:w.jsx(xn.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":m,"data-state":x?"active":"inactive","data-disabled":c?"":void 0,disabled:c,id:g,...u,ref:s,onMouseDown:hn(n.onMouseDown,A=>{!c&&A.button===0&&A.ctrlKey===!1?p.onValueChange(l):A.preventDefault()}),onKeyDown:hn(n.onKeyDown,A=>{[" ","Enter"].includes(A.key)&&p.onValueChange(l)}),onFocus:hn(n.onFocus,()=>{const A=p.activationMode!=="manual";!x&&!c&&A&&p.onValueChange(l)})})})});RA.displayName=DA;var NA="TabsContent",FA=R.forwardRef((n,s)=>{const{__scopeTabs:i,value:l,forceMount:c,children:u,...p}=n,d=Q0(NA,i),g=LA(d.baseId,l),m=MA(d.baseId,l),x=l===d.value,A=R.useRef(x);return R.useEffect(()=>{const _=requestAnimationFrame(()=>A.current=!1);return()=>cancelAnimationFrame(_)},[]),w.jsx(ua,{present:c||x,children:({present:_})=>w.jsx(xn.div,{"data-state":x?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":g,hidden:!_,id:m,tabIndex:0,...p,ref:s,style:{...n.style,animationDuration:A.current?"0s":void 0},children:_&&u})})});FA.displayName=NA;function LA(n,s){return`${n}-trigger-${s}`}function MA(n,s){return`${n}-content-${s}`}var sb=BA,IA=TA,OA=RA,jA=FA;const Y0=sb,xd=R.forwardRef(({className:n,...s},i)=>w.jsx(IA,{ref:i,className:at("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...s}));xd.displayName=IA.displayName;const Cr=R.forwardRef(({className:n,...s},i)=>w.jsx(OA,{ref:i,className:at("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...s}));Cr.displayName=OA.displayName;const Er=R.forwardRef(({className:n,...s},i)=>w.jsx(jA,{ref:i,className:at("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...s}));Er.displayName=jA.displayName;var ab=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],lb=ab.reduce((n,s)=>{const i=U0(`Primitive.${s}`),l=R.forwardRef((c,u)=>{const{asChild:p,...d}=c,g=p?i:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),w.jsx(g,{...d,ref:u})});return l.displayName=`Primitive.${s}`,{...n,[s]:l}},{}),cb="Label",zA=R.forwardRef((n,s)=>w.jsx(lb.label,{...n,ref:s,onMouseDown:i=>{var c;i.target.closest("button, input, select, textarea")||((c=n.onMouseDown)==null||c.call(n,i),!i.defaultPrevented&&i.detail>1&&i.preventDefault())}}));zA.displayName=cb;var HA=zA;const ub=Z0("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),jt=R.forwardRef(({className:n,...s},i)=>w.jsx(HA,{ref:i,className:at(ub(),n),...s}));jt.displayName=HA.displayName;function db(n){const s=R.useRef({value:n,previous:n});return R.useMemo(()=>(s.current.value!==n&&(s.current.previous=s.current.value,s.current.value=n),s.current.previous),[n])}function fb(n){const[s,i]=R.useState(void 0);return ia(()=>{if(n){i({width:n.offsetWidth,height:n.offsetHeight});const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const u=c[0];let p,d;if("borderBoxSize"in u){const g=u.borderBoxSize,m=Array.isArray(g)?g[0]:g;p=m.inlineSize,d=m.blockSize}else p=n.offsetWidth,d=n.offsetHeight;i({width:p,height:d})});return l.observe(n,{box:"border-box"}),()=>l.unobserve(n)}else i(void 0)},[n]),s}var Ad="Checkbox",[hb]=kl(Ad),[pb,X0]=hb(Ad);function mb(n){const{__scopeCheckbox:s,checked:i,children:l,defaultChecked:c,disabled:u,form:p,name:d,onCheckedChange:g,required:m,value:x="on",internal_do_not_use_render:A}=n,[_,k]=od({prop:i,defaultProp:c??!1,onChange:g,caller:Ad}),[N,C]=R.useState(null),[b,S]=R.useState(null),B=R.useRef(!1),D=N?!!p||!!N.closest("form"):!0,F={checked:_,disabled:u,setChecked:k,control:N,setControl:C,name:d,form:p,value:x,hasConsumerStoppedPropagationRef:B,required:m,defaultChecked:xo(c)?!1:c,isFormControl:D,bubbleInput:b,setBubbleInput:S};return w.jsx(pb,{scope:s,...F,children:gb(A)?A(F):l})}var VA="CheckboxTrigger",UA=R.forwardRef(({__scopeCheckbox:n,onKeyDown:s,onClick:i,...l},c)=>{const{control:u,value:p,disabled:d,checked:g,required:m,setControl:x,setChecked:A,hasConsumerStoppedPropagationRef:_,isFormControl:k,bubbleInput:N}=X0(VA,n),C=kr(c,x),b=R.useRef(g);return R.useEffect(()=>{const S=u==null?void 0:u.form;if(S){const B=()=>A(b.current);return S.addEventListener("reset",B),()=>S.removeEventListener("reset",B)}},[u,A]),w.jsx(xn.button,{type:"button",role:"checkbox","aria-checked":xo(g)?"mixed":g,"aria-required":m,"data-state":$A(g),"data-disabled":d?"":void 0,disabled:d,value:p,...l,ref:C,onKeyDown:hn(s,S=>{S.key==="Enter"&&S.preventDefault()}),onClick:hn(i,S=>{A(B=>xo(B)?!0:!B),N&&k&&(_.current=S.isPropagationStopped(),_.current||S.stopPropagation())})})});UA.displayName=VA;var J0=R.forwardRef((n,s)=>{const{__scopeCheckbox:i,name:l,checked:c,defaultChecked:u,required:p,disabled:d,value:g,onCheckedChange:m,form:x,...A}=n;return w.jsx(mb,{__scopeCheckbox:i,checked:c,defaultChecked:u,disabled:d,required:p,onCheckedChange:m,name:l,form:x,value:g,internal_do_not_use_render:({isFormControl:_})=>w.jsxs(w.Fragment,{children:[w.jsx(UA,{...A,ref:s,__scopeCheckbox:i}),_&&w.jsx(GA,{__scopeCheckbox:i})]})})});J0.displayName=Ad;var ZA="CheckboxIndicator",WA=R.forwardRef((n,s)=>{const{__scopeCheckbox:i,forceMount:l,...c}=n,u=X0(ZA,i);return w.jsx(ua,{present:l||xo(u.checked)||u.checked===!0,children:w.jsx(xn.span,{"data-state":$A(u.checked),"data-disabled":u.disabled?"":void 0,...c,ref:s,style:{pointerEvents:"none",...n.style}})})});WA.displayName=ZA;var qA="CheckboxBubbleInput",GA=R.forwardRef(({__scopeCheckbox:n,...s},i)=>{const{control:l,hasConsumerStoppedPropagationRef:c,checked:u,defaultChecked:p,required:d,disabled:g,name:m,value:x,form:A,bubbleInput:_,setBubbleInput:k}=X0(qA,n),N=kr(i,k),C=db(u),b=fb(l);R.useEffect(()=>{const B=_;if(!B)return;const D=window.HTMLInputElement.prototype,M=Object.getOwnPropertyDescriptor(D,"checked").set,z=!c.current;if(C!==u&&M){const U=new Event("click",{bubbles:z});B.indeterminate=xo(u),M.call(B,xo(u)?!1:u),B.dispatchEvent(U)}},[_,C,u,c]);const S=R.useRef(xo(u)?!1:u);return w.jsx(xn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:p??S.current,required:d,disabled:g,name:m,value:x,form:A,...s,tabIndex:-1,ref:N,style:{...s.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});GA.displayName=qA;function gb(n){return typeof n=="function"}function xo(n){return n==="indeterminate"}function $A(n){return xo(n)?"indeterminate":n?"checked":"unchecked"}const Ti=R.forwardRef(({className:n,...s},i)=>w.jsx(J0,{ref:i,className:at("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...s,children:w.jsx(WA,{className:at("flex items-center justify-center text-current"),children:w.jsx(w_,{className:"h-4 w-4"})})}));Ti.displayName=J0.displayName;function xb({open:n,contacts:s,undecryptedCount:i,onClose:l,onSelectConversation:c,onCreateContact:u,onCreateChannel:p,onCreateHashtagChannel:d}){const[g,m]=R.useState("existing"),[x,A]=R.useState(""),[_,k]=R.useState(""),[N,C]=R.useState(""),[b,S]=R.useState(!1),[B,D]=R.useState(!1),[F,M]=R.useState(""),[z,U]=R.useState(!1),j=R.useRef(null),te=async()=>{M(""),U(!0);try{if(g==="new-contact"){if(!x.trim()||!_.trim()){M("Name and public key are required");return}await u(x.trim(),_.trim(),b)}else if(g==="new-room"){if(!x.trim()||!N.trim()){M("Room name and key are required");return}await p(x.trim(),N.trim(),b)}else if(g==="hashtag"){const G=x.trim(),oe=Z(G);if(oe){M(oe);return}const J=B?G:G.toLowerCase();await d(`#${J}`,b)}l()}catch(G){M(G instanceof Error?G.message:"Failed to create")}finally{U(!1)}},Z=G=>G?/^[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*$/.test(G)?null:"Use letters, numbers, and single dashes (no leading/trailing dashes)":"Channel name is required",K=async()=>{var J;M("");const G=x.trim(),oe=Z(G);if(oe){M(oe);return}U(!0);try{const Y=B?G:G.toLowerCase();await d(`#${Y}`,b),A(""),(J=j.current)==null||J.focus()}catch(Y){M(Y instanceof Error?Y.message:"Failed to create")}finally{U(!1)}},ee=g!=="existing"&&i>0;return w.jsx($0,{open:n,onOpenChange:G=>!G&&l(),children:w.jsxs(fd,{className:"sm:max-w-[500px]",children:[w.jsxs(hd,{children:[w.jsx(pd,{children:"New Conversation"}),w.jsxs(md,{className:"sr-only",children:[g==="existing"&&"Select an existing contact to start a conversation",g==="new-contact"&&"Add a new contact by entering their name and public key",g==="new-room"&&"Create a private room with a shared encryption key",g==="hashtag"&&"Join a public hashtag channel"]})]}),w.jsxs(Y0,{value:g,onValueChange:G=>m(G),className:"w-full",children:[w.jsxs(xd,{className:"grid w-full grid-cols-4",children:[w.jsx(Cr,{value:"existing",children:"Existing"}),w.jsx(Cr,{value:"new-contact",children:"Contact"}),w.jsx(Cr,{value:"new-room",children:"Room"}),w.jsx(Cr,{value:"hashtag",children:"Hashtag"})]}),w.jsx(Er,{value:"existing",className:"mt-4",children:w.jsx("div",{className:"max-h-[300px] overflow-y-auto rounded-md border",children:s.length===0?w.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No contacts available"}):s.map(G=>w.jsx("div",{className:"cursor-pointer px-4 py-2 hover:bg-accent",onClick:()=>{c({type:"contact",id:G.public_key,name:Di(G.name,G.public_key)}),l()},children:Di(G.name,G.public_key)},G.public_key))})}),w.jsxs(Er,{value:"new-contact",className:"mt-4 space-y-4",children:[w.jsxs("div",{className:"space-y-2",children:[w.jsx(jt,{htmlFor:"contact-name",children:"Name"}),w.jsx(nn,{id:"contact-name",value:x,onChange:G=>A(G.target.value),placeholder:"Contact name"})]}),w.jsxs("div",{className:"space-y-2",children:[w.jsx(jt,{htmlFor:"contact-key",children:"Public Key"}),w.jsx(nn,{id:"contact-key",value:_,onChange:G=>k(G.target.value),placeholder:"64-character hex public key"})]})]}),w.jsxs(Er,{value:"new-room",className:"mt-4 space-y-4",children:[w.jsxs("div",{className:"space-y-2",children:[w.jsx(jt,{htmlFor:"room-name",children:"Room Name"}),w.jsx(nn,{id:"room-name",value:x,onChange:G=>A(G.target.value),placeholder:"Room name"})]}),w.jsxs("div",{className:"space-y-2",children:[w.jsx(jt,{htmlFor:"room-key",children:"Room Key"}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx(nn,{id:"room-key",value:N,onChange:G=>C(G.target.value),placeholder:"Pre-shared key (hex)",className:"flex-1"}),w.jsx(wn,{type:"button",variant:"outline",size:"icon",onClick:()=>{const G=new Uint8Array(16);crypto.getRandomValues(G);const oe=Array.from(G).map(J=>J.toString(16).padStart(2,"0")).join("");C(oe)},title:"Generate random key",children:""})]})]})]}),w.jsxs(Er,{value:"hashtag",className:"mt-4",children:[w.jsxs("div",{className:"space-y-2",children:[w.jsx(jt,{htmlFor:"hashtag-name",children:"Hashtag Channel"}),w.jsxs("div",{className:"flex items-center gap-1",children:[w.jsx("span",{className:"text-sm text-muted-foreground",children:"#"}),w.jsx(nn,{ref:j,id:"hashtag-name",value:x,onChange:G=>A(G.target.value),placeholder:"channel-name",className:"flex-1"})]})]}),w.jsxs("div",{className:"mt-3 space-y-1",children:[w.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[w.jsx("input",{type:"checkbox",checked:B,onChange:G=>D(G.target.checked),className:"w-4 h-4 rounded border-input accent-primary"}),w.jsx("span",{className:"text-sm",children:"Permit capitals in room key derivation"})]}),w.jsx("p",{className:"text-xs text-muted-foreground pl-7",children:"Not recommended; most companions normalize to lowercase"})]})]})]}),ee&&w.jsxs("div",{className:"space-y-1",children:[w.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[w.jsxs(jt,{htmlFor:"try-historical",className:"text-sm text-muted-foreground cursor-pointer",children:["Try decrypting ",i.toLocaleString()," stored packet",i!==1?"s":""]}),w.jsx(Ti,{id:"try-historical",checked:b,onCheckedChange:G=>S(G===!0)})]}),b&&w.jsx("p",{className:"text-xs text-muted-foreground text-right",children:"Messages will stream in as they decrypt in the background"})]}),F&&w.jsx("div",{className:"text-sm text-destructive",children:F}),w.jsxs(K0,{children:[w.jsx(wn,{variant:"outline",onClick:l,children:"Cancel"}),g==="hashtag"&&w.jsx(wn,{variant:"secondary",onClick:K,disabled:z,children:z?"Creating...":"Create & Add Another"}),g!=="existing"&&w.jsx(wn,{onClick:te,disabled:z,children:z?"Creating...":"Create"})]})]})})}var Ab=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],vb=Ab.reduce((n,s)=>{const i=U0(`Primitive.${s}`),l=R.forwardRef((c,u)=>{const{asChild:p,...d}=c,g=p?i:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),w.jsx(g,{...d,ref:u})});return l.displayName=`Primitive.${s}`,{...n,[s]:l}},{}),yb="Separator",Om="horizontal",_b=["horizontal","vertical"],KA=R.forwardRef((n,s)=>{const{decorative:i,orientation:l=Om,...c}=n,u=wb(l)?l:Om,d=i?{role:"none"}:{"aria-orientation":u==="vertical"?u:void 0,role:"separator"};return w.jsx(vb.div,{"data-orientation":u,...d,...c,ref:s})});KA.displayName=yb;function wb(n){return _b.includes(n)}var QA=KA;const Xo=R.forwardRef(({className:n,orientation:s="horizontal",decorative:i=!0,...l},c)=>w.jsx(QA,{ref:c,decorative:i,orientation:s,className:at("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",n),...l}));Xo.displayName=QA.displayName;const h0=[{name:"USA/Canada",freq:910.525,bw:62.5,sf:7,cr:5},{name:"Australia",freq:915.8,bw:250,sf:10,cr:5},{name:"Australia (narrow)",freq:916.575,bw:62.5,sf:7,cr:8},{name:"Australia SA, WA",freq:923.125,bw:62.5,sf:8,cr:8},{name:"Australia QLD",freq:923.125,bw:62.5,sf:8,cr:5},{name:"New Zealand",freq:917.375,bw:250,sf:11,cr:5},{name:"New Zealand (narrow)",freq:917.375,bw:62.5,sf:7,cr:5},{name:"EU/UK/Switzerland Long Range",freq:869.525,bw:250,sf:11,cr:5},{name:"EU/UK/Switzerland Medium Range",freq:869.525,bw:250,sf:10,cr:5},{name:"EU/UK/Switzerland Narrow",freq:869.618,bw:62.5,sf:8,cr:8},{name:"Czech Republic (Narrow)",freq:869.432,bw:62.5,sf:7,cr:5},{name:"EU 433MHz Long Range",freq:433.65,bw:250,sf:11,cr:5},{name:"Portugal 433MHz",freq:433.375,bw:62.5,sf:9,cr:6},{name:"Portugal 868MHz",freq:869.618,bw:62.5,sf:7,cr:6},{name:"Vietnam",freq:920.25,bw:250,sf:11,cr:5}];function bb({open:n,config:s,health:i,appSettings:l,onClose:c,onSave:u,onSaveAppSettings:p,onSetPrivateKey:d,onReboot:g,onAdvertise:m,onHealthRefresh:x,onRefreshAppSettings:A}){const[_,k]=R.useState("radio"),[N,C]=R.useState(""),[b,S]=R.useState(""),[B,D]=R.useState(""),[F,M]=R.useState(""),[z,U]=R.useState(""),[j,te]=R.useState(""),[Z,K]=R.useState(""),[ee,G]=R.useState(""),[oe,J]=R.useState(""),[Y,de]=R.useState(""),[W,ae]=R.useState(!1),[H,P]=R.useState(!1),[V,q]=R.useState(!1),[Q,pe]=R.useState(!1),[ue,se]=R.useState(""),[he,Ee]=R.useState("14"),[We,dt]=R.useState(!1),[ot,Be]=R.useState(!1);R.useEffect(()=>{s&&(C(s.name),S(String(s.lat)),D(String(s.lon)),M(String(s.tx_power)),U(String(s.radio.freq)),te(String(s.radio.bw)),K(String(s.radio.sf)),G(String(s.radio.cr)))},[s]),R.useEffect(()=>{l&&(de(String(l.max_radio_contacts)),Be(l.auto_decrypt_dm_on_advert))},[l]),R.useEffect(()=>{n&&A()},[n,A]);const Ie=R.useMemo(()=>{const Pe=parseFloat(z),pt=parseFloat(j),Ut=parseInt(Z,10),sn=parseInt(ee,10);for(const en of h0)if(en.freq===Pe&&en.bw===pt&&en.sf===Ut&&en.cr===sn)return en.name;return"custom"},[z,j,Z,ee]),ft=Pe=>{if(Pe==="custom")return;const pt=h0.find(Ut=>Ut.name===Pe);pt&&(U(String(pt.freq)),te(String(pt.bw)),K(String(pt.sf)),G(String(pt.cr)))},Nt=()=>{if(!navigator.geolocation){vt.error("Geolocation not supported",{description:"Your browser does not support geolocation"});return}pe(!0),navigator.geolocation.getCurrentPosition(Pe=>{S(Pe.coords.latitude.toFixed(6)),D(Pe.coords.longitude.toFixed(6)),pe(!1),vt.success("Location updated")},Pe=>{pe(!1),vt.error("Failed to get location",{description:Pe.message})},{enableHighAccuracy:!0,timeout:1e4})},lt=async()=>{se(""),ae(!0);try{const Pe={lat:parseFloat(b),lon:parseFloat(B),tx_power:parseInt(F,10),radio:{freq:parseFloat(z),bw:parseFloat(j),sf:parseInt(Z,10),cr:parseInt(ee,10)}};await u(Pe),vt.success("Radio config saved, rebooting..."),ae(!1),P(!0),await g(),c()}catch(Pe){se(Pe instanceof Error?Pe.message:"Failed to save"),ae(!1)}finally{P(!1)}},Qe=async()=>{se(""),ae(!0);try{await u({name:N}),vt.success("Identity saved")}catch(Pe){se(Pe instanceof Error?Pe.message:"Failed to save")}finally{ae(!1)}},qe=async()=>{se(""),ae(!0);try{const Pe=parseInt(Y,10);!isNaN(Pe)&&Pe!==(l==null?void 0:l.max_radio_contacts)&&await p({max_radio_contacts:Pe}),vt.success("Serial settings saved")}catch(Pe){se(Pe instanceof Error?Pe.message:"Failed to save")}finally{ae(!1)}},et=async()=>{if(!oe.trim()){se("Private key is required");return}se(""),ae(!0);try{await d(oe.trim()),J(""),vt.success("Private key set, rebooting..."),ae(!1),P(!0),await g(),c()}catch(Pe){se(Pe instanceof Error?Pe.message:"Failed to set private key"),ae(!1)}finally{P(!1)}},rt=async()=>{if(confirm("Are you sure you want to reboot the radio? The connection will drop temporarily.")){se(""),P(!0);try{await g(),c()}catch(Pe){se(Pe instanceof Error?Pe.message:"Failed to reboot radio")}finally{P(!1)}}},Ue=async()=>{q(!0);try{await m()}finally{q(!1)}},kt=async()=>{const Pe=parseInt(he,10);if(isNaN(Pe)||Pe<1){vt.error("Invalid retention days",{description:"Retention days must be at least 1"});return}dt(!0);try{const pt=await nt.runMaintenance(Pe);vt.success("Database cleanup complete",{description:`Deleted ${pt.packets_deleted} old packet${pt.packets_deleted===1?"":"s"}`}),await x()}catch(pt){console.error("Failed to run maintenance:",pt),vt.error("Database cleanup failed",{description:pt instanceof Error?pt.message:"Unknown error"})}finally{dt(!1)}},$t=async()=>{ae(!0),se("");try{await p({auto_decrypt_dm_on_advert:ot}),vt.success("Database settings saved")}catch(Pe){console.error("Failed to save database settings:",Pe),se(Pe instanceof Error?Pe.message:"Failed to save"),vt.error("Failed to save settings")}finally{ae(!1)}};return w.jsx($0,{open:n,onOpenChange:Pe=>!Pe&&c(),children:w.jsxs(fd,{className:"sm:max-w-[500px] max-h-[90vh] overflow-y-auto",children:[w.jsxs(hd,{children:[w.jsx(pd,{children:"Radio & Settings"}),w.jsxs(md,{className:"sr-only",children:[_==="radio"&&"Configure radio frequency, power, and location settings",_==="identity"&&"Manage radio name, public key, and private key",_==="serial"&&"View serial port connection and configure contact sync",_==="database"&&"View database statistics and clean up old packets",_==="advertise"&&"Send a flood advertisement to announce your presence"]})]}),s?w.jsxs(Y0,{value:_,onValueChange:Pe=>k(Pe),className:"w-full",children:[w.jsxs(xd,{className:"grid w-full grid-cols-5",children:[w.jsx(Cr,{value:"radio",children:"Radio"}),w.jsx(Cr,{value:"identity",children:"Identity"}),w.jsx(Cr,{value:"serial",children:"Serial"}),w.jsx(Cr,{value:"database",children:"Database"}),w.jsx(Cr,{value:"advertise",children:"Advertise"})]}),w.jsxs(Er,{value:"radio",className:"space-y-4 mt-4",children:[w.jsxs("div",{className:"space-y-2",children:[w.jsx(jt,{htmlFor:"preset",children:"Preset"}),w.jsxs("select",{id:"preset",value:Ie,onChange:Pe=>ft(Pe.target.value),className:"w-full h-10 px-3 rounded-md border border-input bg-background text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:[w.jsx("option",{value:"custom",children:"Custom"}),h0.map(Pe=>w.jsx("option",{value:Pe.name,children:Pe.name},Pe.name))]})]}),w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsxs("div",{className:"space-y-2",children:[w.jsx(jt,{htmlFor:"freq",children:"Frequency (MHz)"}),w.jsx(nn,{id:"freq",type:"number",step:"any",value:z,onChange:Pe=>U(Pe.target.value)})]}),w.jsxs("div",{className:"space-y-2",children:[w.jsx(jt,{htmlFor:"bw",children:"Bandwidth (kHz)"}),w.jsx(nn,{id:"bw",type:"number",step:"any",value:j,onChange:Pe=>te(Pe.target.value)})]})]}),w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsxs("div",{className:"space-y-2",children:[w.jsx(jt,{htmlFor:"sf",children:"Spreading Factor"}),w.jsx(nn,{id:"sf",type:"number",min:"7",max:"12",value:Z,onChange:Pe=>K(Pe.target.value)})]}),w.jsxs("div",{className:"space-y-2",children:[w.jsx(jt,{htmlFor:"cr",children:"Coding Rate"}),w.jsx(nn,{id:"cr",type:"number",min:"5",max:"8",value:ee,onChange:Pe=>G(Pe.target.value)})]})]}),w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsxs("div",{className:"space-y-2",children:[w.jsx(jt,{htmlFor:"tx-power",children:"TX Power (dBm)"}),w.jsx(nn,{id:"tx-power",type:"number",value:F,onChange:Pe=>M(Pe.target.value)})]}),w.jsxs("div",{className:"space-y-2",children:[w.jsx(jt,{htmlFor:"max-tx",children:"Max TX Power"}),w.jsx(nn,{id:"max-tx",type:"number",value:s.max_tx_power,disabled:!0})]})]}),w.jsx(Xo,{}),w.jsxs("div",{className:"space-y-2",children:[w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx(jt,{children:"Location"}),w.jsx(wn,{type:"button",variant:"outline",size:"sm",onClick:Nt,disabled:Q,children:Q?"Getting...":" Use My Location"})]}),w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsxs("div",{className:"space-y-2",children:[w.jsx(jt,{htmlFor:"lat",className:"text-xs text-muted-foreground",children:"Latitude"}),w.jsx(nn,{id:"lat",type:"number",step:"any",value:b,onChange:Pe=>S(Pe.target.value)})]}),w.jsxs("div",{className:"space-y-2",children:[w.jsx(jt,{htmlFor:"lon",className:"text-xs text-muted-foreground",children:"Longitude"}),w.jsx(nn,{id:"lon",type:"number",step:"any",value:B,onChange:Pe=>D(Pe.target.value)})]})]})]}),ue&&w.jsx("div",{className:"text-sm text-destructive",children:ue}),w.jsx(wn,{onClick:lt,disabled:W||H,className:"w-full",children:W||H?"Saving & Rebooting...":"Save Radio Config & Reboot"})]}),w.jsxs(Er,{value:"identity",className:"space-y-4 mt-4",children:[w.jsxs("div",{className:"space-y-2",children:[w.jsx(jt,{htmlFor:"public-key",children:"Public Key"}),w.jsx(nn,{id:"public-key",value:s.public_key,disabled:!0,className:"font-mono text-xs"})]}),w.jsxs("div",{className:"space-y-2",children:[w.jsx(jt,{htmlFor:"name",children:"Radio Name"}),w.jsx(nn,{id:"name",value:N,onChange:Pe=>C(Pe.target.value)})]}),w.jsx(wn,{onClick:Qe,disabled:W,className:"w-full",children:W?"Saving...":"Set Name"}),w.jsx(Xo,{}),w.jsxs("div",{className:"space-y-2",children:[w.jsx(jt,{htmlFor:"private-key",children:"Set Private Key (write-only)"}),w.jsx(nn,{id:"private-key",type:"password",autoComplete:"off",value:oe,onChange:Pe=>J(Pe.target.value),placeholder:"64-character hex private key"}),w.jsx(wn,{onClick:et,disabled:W||H||!oe.trim(),className:"w-full",children:W||H?"Setting & Rebooting...":"Set Private Key & Reboot"})]}),ue&&w.jsx("div",{className:"text-sm text-destructive",children:ue})]}),w.jsxs(Er,{value:"serial",className:"space-y-4 mt-4",children:[w.jsxs("div",{className:"space-y-2",children:[w.jsx(jt,{children:"Serial Port"}),i!=null&&i.serial_port?w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),w.jsx("code",{className:"px-2 py-1 bg-muted rounded text-foreground text-sm",children:i.serial_port})]}):w.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[w.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500"}),w.jsx("span",{children:"Not connected"})]})]}),w.jsx(Xo,{}),w.jsxs("div",{className:"space-y-2",children:[w.jsx(jt,{htmlFor:"max-contacts",children:"Max Contacts on Radio"}),w.jsx(nn,{id:"max-contacts",type:"number",min:"1",max:"1000",value:Y,onChange:Pe=>de(Pe.target.value)}),w.jsx("p",{className:"text-xs text-muted-foreground",children:"Recent non-repeater contacts loaded to radio for DM auto-ACK (1-1000)"})]}),w.jsx(wn,{onClick:qe,disabled:W,className:"w-full",children:W?"Saving...":"Save Settings"}),w.jsx(Xo,{}),w.jsx(wn,{variant:"outline",onClick:rt,disabled:H||W,className:"w-full border-red-500/50 text-red-400 hover:bg-red-500/10",children:H?"Rebooting...":"Reboot Radio"}),ue&&w.jsx("div",{className:"text-sm text-destructive",children:ue})]}),w.jsxs(Er,{value:"database",className:"space-y-4 mt-4",children:[w.jsxs("div",{className:"space-y-3",children:[w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsx("span",{className:"text-sm text-muted-foreground",children:"Database size"}),w.jsxs("span",{className:"font-medium",children:[(i==null?void 0:i.database_size_mb)??"?"," MB"]})]}),i!=null&&i.oldest_undecrypted_timestamp?w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsx("span",{className:"text-sm text-muted-foreground",children:"Oldest undecrypted packet"}),w.jsxs("span",{className:"font-medium",children:[ra(i.oldest_undecrypted_timestamp),w.jsxs("span",{className:"text-muted-foreground ml-1",children:["(",Math.floor((Date.now()/1e3-i.oldest_undecrypted_timestamp)/86400)," ","days old)"]})]})]}):w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsx("span",{className:"text-sm text-muted-foreground",children:"Oldest undecrypted packet"}),w.jsx("span",{className:"text-muted-foreground",children:"None"})]})]}),w.jsx(Xo,{}),w.jsxs("div",{className:"space-y-3",children:[w.jsx(jt,{children:"Cleanup Old Packets"}),w.jsx("p",{className:"text-xs text-muted-foreground",children:"Delete undecrypted packets older than the specified days. This helps manage storage for packets that couldn't be decrypted (unknown channel keys)."}),w.jsxs("div",{className:"flex gap-2 items-end",children:[w.jsxs("div",{className:"space-y-1",children:[w.jsx(jt,{htmlFor:"retention-days",className:"text-xs",children:"Days to retain"}),w.jsx(nn,{id:"retention-days",type:"number",min:"1",max:"365",value:he,onChange:Pe=>Ee(Pe.target.value),className:"w-24"})]}),w.jsx(wn,{variant:"outline",onClick:kt,disabled:We,children:We?"Cleaning...":"Cleanup"})]})]}),w.jsx(Xo,{}),w.jsxs("div",{className:"space-y-3",children:[w.jsx(jt,{children:"DM Decryption"}),w.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[w.jsx("input",{type:"checkbox",checked:ot,onChange:Pe=>Be(Pe.target.checked),className:"w-4 h-4 rounded border-input accent-primary"}),w.jsx("span",{className:"text-sm",children:"Auto-decrypt historical DMs when new contact advertises"})]}),w.jsx("p",{className:"text-xs text-muted-foreground",children:"When enabled, the server will automatically try to decrypt stored DM packets when a new contact sends an advertisement. This may cause brief delays on large packet backlogs."})]}),ue&&w.jsx("div",{className:"text-sm text-destructive",children:ue}),w.jsx(wn,{onClick:$t,disabled:W,className:"w-full",children:W?"Saving...":"Save Settings"})]}),w.jsx(Er,{value:"advertise",className:"space-y-4 mt-4",children:w.jsxs("div",{className:"text-center py-8",children:[w.jsx("p",{className:"text-muted-foreground mb-6",children:"Send a flood advertisement to announce your presence on the mesh network."}),w.jsx(wn,{size:"lg",onClick:Ue,disabled:V||!(i!=null&&i.radio_connected),className:"bg-green-600 hover:bg-green-700 text-white px-12 py-6 text-lg",children:V?"Sending...":"Send Advertisement"}),!(i!=null&&i.radio_connected)&&w.jsx("p",{className:"text-sm text-destructive mt-4",children:"Radio not connected"})]})})]}):w.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"Loading configuration..."})]})})}var Si={},nl={},_n={},jm;function dr(){if(jm)return _n;jm=1,Object.defineProperty(_n,"__esModule",{value:!0}),_n.RequestType=_n.AdvertFlags=_n.DeviceRole=_n.PayloadVersion=_n.ControlSubType=_n.PayloadType=_n.RouteType=void 0;var n;(function(d){d[d.TransportFlood=0]="TransportFlood",d[d.Flood=1]="Flood",d[d.Direct=2]="Direct",d[d.TransportDirect=3]="TransportDirect"})(n||(_n.RouteType=n={}));var s;(function(d){d[d.Request=0]="Request",d[d.Response=1]="Response",d[d.TextMessage=2]="TextMessage",d[d.Ack=3]="Ack",d[d.Advert=4]="Advert",d[d.GroupText=5]="GroupText",d[d.GroupData=6]="GroupData",d[d.AnonRequest=7]="AnonRequest",d[d.Path=8]="Path",d[d.Trace=9]="Trace",d[d.Multipart=10]="Multipart",d[d.Control=11]="Control",d[d.RawCustom=15]="RawCustom"})(s||(_n.PayloadType=s={}));var i;(function(d){d[d.NodeDiscoverReq=128]="NodeDiscoverReq",d[d.NodeDiscoverResp=144]="NodeDiscoverResp"})(i||(_n.ControlSubType=i={}));var l;(function(d){d[d.Version1=0]="Version1",d[d.Version2=1]="Version2",d[d.Version3=2]="Version3",d[d.Version4=3]="Version4"})(l||(_n.PayloadVersion=l={}));var c;(function(d){d[d.Unknown=0]="Unknown",d[d.ChatNode=1]="ChatNode",d[d.Repeater=2]="Repeater",d[d.RoomServer=3]="RoomServer",d[d.Sensor=4]="Sensor"})(c||(_n.DeviceRole=c={}));var u;(function(d){d[d.HasLocation=16]="HasLocation",d[d.HasFeature1=32]="HasFeature1",d[d.HasFeature2=64]="HasFeature2",d[d.HasName=128]="HasName"})(u||(_n.AdvertFlags=u={}));var p;return(function(d){d[d.GetStats=1]="GetStats",d[d.Keepalive=2]="Keepalive",d[d.GetTelemetryData=3]="GetTelemetryData",d[d.GetMinMaxAvgData=4]="GetMinMaxAvgData",d[d.GetAccessList=5]="GetAccessList"})(p||(_n.RequestType=p={})),_n}var $o={},zm;function bn(){if(zm)return $o;zm=1,Object.defineProperty($o,"__esModule",{value:!0}),$o.byteToHex=n,$o.bytesToHex=s,$o.numberToHex=i,$o.hexToBytes=l;function n(c){return c.toString(16).padStart(2,"0").toUpperCase()}function s(c){return Array.from(c).map(n).join("")}function i(c,u=8){return(c>>>0).toString(16).padStart(u,"0").toUpperCase()}function l(c){const u=c.replace(/\s/g,"").toUpperCase();if(!/^[0-9A-F]*$/.test(u))throw new Error("Invalid hex string: invalid characters at position 0");if(u.length%2!==0)throw new Error("Invalid hex string: odd length");const p=new Uint8Array(u.length/2);for(let d=0;d<u.length;d+=2)p[d/2]=parseInt(u.substr(d,2),16);return p}return $o}var Bi={},Hm;function _l(){if(Hm)return Bi;Hm=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.getRouteTypeName=s,Bi.getPayloadTypeName=i,Bi.getPayloadVersionName=l,Bi.getDeviceRoleName=c,Bi.getRequestTypeName=u,Bi.getControlSubTypeName=p;const n=dr();function s(d){switch(d){case n.RouteType.Flood:return"Flood";case n.RouteType.Direct:return"Direct";case n.RouteType.TransportFlood:return"TransportFlood";case n.RouteType.TransportDirect:return"TransportDirect";default:return`Unknown (${d})`}}function i(d){switch(d){case n.PayloadType.RawCustom:return"RawCustom";case n.PayloadType.Trace:return"Trace";case n.PayloadType.Advert:return"Advert";case n.PayloadType.GroupText:return"GroupText";case n.PayloadType.GroupData:return"GroupData";case n.PayloadType.Request:return"Request";case n.PayloadType.Response:return"Response";case n.PayloadType.TextMessage:return"TextMessage";case n.PayloadType.AnonRequest:return"AnonRequest";case n.PayloadType.Ack:return"Ack";case n.PayloadType.Path:return"Path";case n.PayloadType.Multipart:return"Multipart";case n.PayloadType.Control:return"Control";default:return`Unknown (0x${d.toString(16)})`}}function l(d){switch(d){case n.PayloadVersion.Version1:return"Version 1";case n.PayloadVersion.Version2:return"Version 2";case n.PayloadVersion.Version3:return"Version 3";case n.PayloadVersion.Version4:return"Version 4";default:return`Unknown (${d})`}}function c(d){switch(d){case n.DeviceRole.Unknown:return"Unknown";case n.DeviceRole.ChatNode:return"Chat Node";case n.DeviceRole.Repeater:return"Repeater";case n.DeviceRole.RoomServer:return"Room Server";case n.DeviceRole.Sensor:return"Sensor";default:return`Unknown (${d})`}}function u(d){switch(d){case n.RequestType.GetStats:return"Get Stats";case n.RequestType.Keepalive:return"Keepalive (deprecated)";case n.RequestType.GetTelemetryData:return"Get Telemetry Data";case n.RequestType.GetMinMaxAvgData:return"Get Min/Max/Avg Data";case n.RequestType.GetAccessList:return"Get Access List";default:return`Unknown (${d})`}}function p(d){switch(d){case n.ControlSubType.NodeDiscoverReq:return"Node Discover Request";case n.ControlSubType.NodeDiscoverResp:return"Node Discover Response";default:return`Unknown (0x${d.toString(16)})`}}return Bi}var rl={},il={},au={exports:{}};function k0(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var lu={exports:{}};const Cb={},Eb=Object.freeze(Object.defineProperty({__proto__:null,default:Cb},Symbol.toStringTag,{value:"Module"})),Xu=gx(Eb);var kb=lu.exports,Vm;function At(){return Vm||(Vm=1,(function(n,s){(function(i,l){n.exports=l()})(kb,function(){var i=i||(function(l,c){var u;if(typeof window<"u"&&window.crypto&&(u=window.crypto),typeof self<"u"&&self.crypto&&(u=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(u=globalThis.crypto),!u&&typeof window<"u"&&window.msCrypto&&(u=window.msCrypto),!u&&typeof Qf<"u"&&Qf.crypto&&(u=Qf.crypto),!u&&typeof k0=="function")try{u=Xu}catch{}var p=function(){if(u){if(typeof u.getRandomValues=="function")try{return u.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof u.randomBytes=="function")try{return u.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},d=Object.create||(function(){function B(){}return function(D){var F;return B.prototype=D,F=new B,B.prototype=null,F}})(),g={},m=g.lib={},x=m.Base=(function(){return{extend:function(B){var D=d(this);return B&&D.mixIn(B),(!D.hasOwnProperty("init")||this.init===D.init)&&(D.init=function(){D.$super.init.apply(this,arguments)}),D.init.prototype=D,D.$super=this,D},create:function(){var B=this.extend();return B.init.apply(B,arguments),B},init:function(){},mixIn:function(B){for(var D in B)B.hasOwnProperty(D)&&(this[D]=B[D]);B.hasOwnProperty("toString")&&(this.toString=B.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),A=m.WordArray=x.extend({init:function(B,D){B=this.words=B||[],D!=c?this.sigBytes=D:this.sigBytes=B.length*4},toString:function(B){return(B||k).stringify(this)},concat:function(B){var D=this.words,F=B.words,M=this.sigBytes,z=B.sigBytes;if(this.clamp(),M%4)for(var U=0;U<z;U++){var j=F[U>>>2]>>>24-U%4*8&255;D[M+U>>>2]|=j<<24-(M+U)%4*8}else for(var te=0;te<z;te+=4)D[M+te>>>2]=F[te>>>2];return this.sigBytes+=z,this},clamp:function(){var B=this.words,D=this.sigBytes;B[D>>>2]&=4294967295<<32-D%4*8,B.length=l.ceil(D/4)},clone:function(){var B=x.clone.call(this);return B.words=this.words.slice(0),B},random:function(B){for(var D=[],F=0;F<B;F+=4)D.push(p());return new A.init(D,B)}}),_=g.enc={},k=_.Hex={stringify:function(B){for(var D=B.words,F=B.sigBytes,M=[],z=0;z<F;z++){var U=D[z>>>2]>>>24-z%4*8&255;M.push((U>>>4).toString(16)),M.push((U&15).toString(16))}return M.join("")},parse:function(B){for(var D=B.length,F=[],M=0;M<D;M+=2)F[M>>>3]|=parseInt(B.substr(M,2),16)<<24-M%8*4;return new A.init(F,D/2)}},N=_.Latin1={stringify:function(B){for(var D=B.words,F=B.sigBytes,M=[],z=0;z<F;z++){var U=D[z>>>2]>>>24-z%4*8&255;M.push(String.fromCharCode(U))}return M.join("")},parse:function(B){for(var D=B.length,F=[],M=0;M<D;M++)F[M>>>2]|=(B.charCodeAt(M)&255)<<24-M%4*8;return new A.init(F,D)}},C=_.Utf8={stringify:function(B){try{return decodeURIComponent(escape(N.stringify(B)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(B){return N.parse(unescape(encodeURIComponent(B)))}},b=m.BufferedBlockAlgorithm=x.extend({reset:function(){this._data=new A.init,this._nDataBytes=0},_append:function(B){typeof B=="string"&&(B=C.parse(B)),this._data.concat(B),this._nDataBytes+=B.sigBytes},_process:function(B){var D,F=this._data,M=F.words,z=F.sigBytes,U=this.blockSize,j=U*4,te=z/j;B?te=l.ceil(te):te=l.max((te|0)-this._minBufferSize,0);var Z=te*U,K=l.min(Z*4,z);if(Z){for(var ee=0;ee<Z;ee+=U)this._doProcessBlock(M,ee);D=M.splice(0,Z),F.sigBytes-=K}return new A.init(D,K)},clone:function(){var B=x.clone.call(this);return B._data=this._data.clone(),B},_minBufferSize:0});m.Hasher=b.extend({cfg:x.extend(),init:function(B){this.cfg=this.cfg.extend(B),this.reset()},reset:function(){b.reset.call(this),this._doReset()},update:function(B){return this._append(B),this._process(),this},finalize:function(B){B&&this._append(B);var D=this._doFinalize();return D},blockSize:16,_createHelper:function(B){return function(D,F){return new B.init(F).finalize(D)}},_createHmacHelper:function(B){return function(D,F){return new S.HMAC.init(B,F).finalize(D)}}});var S=g.algo={};return g})(Math);return i})})(lu)),lu.exports}var cu={exports:{}},Sb=cu.exports,Um;function vd(){return Um||(Um=1,(function(n,s){(function(i,l){n.exports=l(At())})(Sb,function(i){return(function(l){var c=i,u=c.lib,p=u.Base,d=u.WordArray,g=c.x64={};g.Word=p.extend({init:function(m,x){this.high=m,this.low=x}}),g.WordArray=p.extend({init:function(m,x){m=this.words=m||[],x!=l?this.sigBytes=x:this.sigBytes=m.length*8},toX32:function(){for(var m=this.words,x=m.length,A=[],_=0;_<x;_++){var k=m[_];A.push(k.high),A.push(k.low)}return d.create(A,this.sigBytes)},clone:function(){for(var m=p.clone.call(this),x=m.words=this.words.slice(0),A=x.length,_=0;_<A;_++)x[_]=x[_].clone();return m}})})(),i})})(cu)),cu.exports}var uu={exports:{}},Bb=uu.exports,Zm;function Pb(){return Zm||(Zm=1,(function(n,s){(function(i,l){n.exports=l(At())})(Bb,function(i){return(function(){if(typeof ArrayBuffer=="function"){var l=i,c=l.lib,u=c.WordArray,p=u.init,d=u.init=function(g){if(g instanceof ArrayBuffer&&(g=new Uint8Array(g)),(g instanceof Int8Array||typeof Uint8ClampedArray<"u"&&g instanceof Uint8ClampedArray||g instanceof Int16Array||g instanceof Uint16Array||g instanceof Int32Array||g instanceof Uint32Array||g instanceof Float32Array||g instanceof Float64Array)&&(g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength)),g instanceof Uint8Array){for(var m=g.byteLength,x=[],A=0;A<m;A++)x[A>>>2]|=g[A]<<24-A%4*8;p.call(this,x,m)}else p.apply(this,arguments)};d.prototype=u}})(),i.lib.WordArray})})(uu)),uu.exports}var du={exports:{}},Tb=du.exports,Wm;function Db(){return Wm||(Wm=1,(function(n,s){(function(i,l){n.exports=l(At())})(Tb,function(i){return(function(){var l=i,c=l.lib,u=c.WordArray,p=l.enc;p.Utf16=p.Utf16BE={stringify:function(g){for(var m=g.words,x=g.sigBytes,A=[],_=0;_<x;_+=2){var k=m[_>>>2]>>>16-_%4*8&65535;A.push(String.fromCharCode(k))}return A.join("")},parse:function(g){for(var m=g.length,x=[],A=0;A<m;A++)x[A>>>1]|=g.charCodeAt(A)<<16-A%2*16;return u.create(x,m*2)}},p.Utf16LE={stringify:function(g){for(var m=g.words,x=g.sigBytes,A=[],_=0;_<x;_+=2){var k=d(m[_>>>2]>>>16-_%4*8&65535);A.push(String.fromCharCode(k))}return A.join("")},parse:function(g){for(var m=g.length,x=[],A=0;A<m;A++)x[A>>>1]|=d(g.charCodeAt(A)<<16-A%2*16);return u.create(x,m*2)}};function d(g){return g<<8&4278255360|g>>>8&16711935}})(),i.enc.Utf16})})(du)),du.exports}var fu={exports:{}},Rb=fu.exports,qm;function ss(){return qm||(qm=1,(function(n,s){(function(i,l){n.exports=l(At())})(Rb,function(i){return(function(){var l=i,c=l.lib,u=c.WordArray,p=l.enc;p.Base64={stringify:function(g){var m=g.words,x=g.sigBytes,A=this._map;g.clamp();for(var _=[],k=0;k<x;k+=3)for(var N=m[k>>>2]>>>24-k%4*8&255,C=m[k+1>>>2]>>>24-(k+1)%4*8&255,b=m[k+2>>>2]>>>24-(k+2)%4*8&255,S=N<<16|C<<8|b,B=0;B<4&&k+B*.75<x;B++)_.push(A.charAt(S>>>6*(3-B)&63));var D=A.charAt(64);if(D)for(;_.length%4;)_.push(D);return _.join("")},parse:function(g){var m=g.length,x=this._map,A=this._reverseMap;if(!A){A=this._reverseMap=[];for(var _=0;_<x.length;_++)A[x.charCodeAt(_)]=_}var k=x.charAt(64);if(k){var N=g.indexOf(k);N!==-1&&(m=N)}return d(g,m,A)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function d(g,m,x){for(var A=[],_=0,k=0;k<m;k++)if(k%4){var N=x[g.charCodeAt(k-1)]<<k%4*2,C=x[g.charCodeAt(k)]>>>6-k%4*2,b=N|C;A[_>>>2]|=b<<24-_%4*8,_++}return u.create(A,_)}})(),i.enc.Base64})})(fu)),fu.exports}var hu={exports:{}},Nb=hu.exports,Gm;function Fb(){return Gm||(Gm=1,(function(n,s){(function(i,l){n.exports=l(At())})(Nb,function(i){return(function(){var l=i,c=l.lib,u=c.WordArray,p=l.enc;p.Base64url={stringify:function(g,m){m===void 0&&(m=!0);var x=g.words,A=g.sigBytes,_=m?this._safe_map:this._map;g.clamp();for(var k=[],N=0;N<A;N+=3)for(var C=x[N>>>2]>>>24-N%4*8&255,b=x[N+1>>>2]>>>24-(N+1)%4*8&255,S=x[N+2>>>2]>>>24-(N+2)%4*8&255,B=C<<16|b<<8|S,D=0;D<4&&N+D*.75<A;D++)k.push(_.charAt(B>>>6*(3-D)&63));var F=_.charAt(64);if(F)for(;k.length%4;)k.push(F);return k.join("")},parse:function(g,m){m===void 0&&(m=!0);var x=g.length,A=m?this._safe_map:this._map,_=this._reverseMap;if(!_){_=this._reverseMap=[];for(var k=0;k<A.length;k++)_[A.charCodeAt(k)]=k}var N=A.charAt(64);if(N){var C=g.indexOf(N);C!==-1&&(x=C)}return d(g,x,_)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function d(g,m,x){for(var A=[],_=0,k=0;k<m;k++)if(k%4){var N=x[g.charCodeAt(k-1)]<<k%4*2,C=x[g.charCodeAt(k)]>>>6-k%4*2,b=N|C;A[_>>>2]|=b<<24-_%4*8,_++}return u.create(A,_)}})(),i.enc.Base64url})})(hu)),hu.exports}var pu={exports:{}},Lb=pu.exports,$m;function as(){return $m||($m=1,(function(n,s){(function(i,l){n.exports=l(At())})(Lb,function(i){return(function(l){var c=i,u=c.lib,p=u.WordArray,d=u.Hasher,g=c.algo,m=[];(function(){for(var C=0;C<64;C++)m[C]=l.abs(l.sin(C+1))*4294967296|0})();var x=g.MD5=d.extend({_doReset:function(){this._hash=new p.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(C,b){for(var S=0;S<16;S++){var B=b+S,D=C[B];C[B]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360}var F=this._hash.words,M=C[b+0],z=C[b+1],U=C[b+2],j=C[b+3],te=C[b+4],Z=C[b+5],K=C[b+6],ee=C[b+7],G=C[b+8],oe=C[b+9],J=C[b+10],Y=C[b+11],de=C[b+12],W=C[b+13],ae=C[b+14],H=C[b+15],P=F[0],V=F[1],q=F[2],Q=F[3];P=A(P,V,q,Q,M,7,m[0]),Q=A(Q,P,V,q,z,12,m[1]),q=A(q,Q,P,V,U,17,m[2]),V=A(V,q,Q,P,j,22,m[3]),P=A(P,V,q,Q,te,7,m[4]),Q=A(Q,P,V,q,Z,12,m[5]),q=A(q,Q,P,V,K,17,m[6]),V=A(V,q,Q,P,ee,22,m[7]),P=A(P,V,q,Q,G,7,m[8]),Q=A(Q,P,V,q,oe,12,m[9]),q=A(q,Q,P,V,J,17,m[10]),V=A(V,q,Q,P,Y,22,m[11]),P=A(P,V,q,Q,de,7,m[12]),Q=A(Q,P,V,q,W,12,m[13]),q=A(q,Q,P,V,ae,17,m[14]),V=A(V,q,Q,P,H,22,m[15]),P=_(P,V,q,Q,z,5,m[16]),Q=_(Q,P,V,q,K,9,m[17]),q=_(q,Q,P,V,Y,14,m[18]),V=_(V,q,Q,P,M,20,m[19]),P=_(P,V,q,Q,Z,5,m[20]),Q=_(Q,P,V,q,J,9,m[21]),q=_(q,Q,P,V,H,14,m[22]),V=_(V,q,Q,P,te,20,m[23]),P=_(P,V,q,Q,oe,5,m[24]),Q=_(Q,P,V,q,ae,9,m[25]),q=_(q,Q,P,V,j,14,m[26]),V=_(V,q,Q,P,G,20,m[27]),P=_(P,V,q,Q,W,5,m[28]),Q=_(Q,P,V,q,U,9,m[29]),q=_(q,Q,P,V,ee,14,m[30]),V=_(V,q,Q,P,de,20,m[31]),P=k(P,V,q,Q,Z,4,m[32]),Q=k(Q,P,V,q,G,11,m[33]),q=k(q,Q,P,V,Y,16,m[34]),V=k(V,q,Q,P,ae,23,m[35]),P=k(P,V,q,Q,z,4,m[36]),Q=k(Q,P,V,q,te,11,m[37]),q=k(q,Q,P,V,ee,16,m[38]),V=k(V,q,Q,P,J,23,m[39]),P=k(P,V,q,Q,W,4,m[40]),Q=k(Q,P,V,q,M,11,m[41]),q=k(q,Q,P,V,j,16,m[42]),V=k(V,q,Q,P,K,23,m[43]),P=k(P,V,q,Q,oe,4,m[44]),Q=k(Q,P,V,q,de,11,m[45]),q=k(q,Q,P,V,H,16,m[46]),V=k(V,q,Q,P,U,23,m[47]),P=N(P,V,q,Q,M,6,m[48]),Q=N(Q,P,V,q,ee,10,m[49]),q=N(q,Q,P,V,ae,15,m[50]),V=N(V,q,Q,P,Z,21,m[51]),P=N(P,V,q,Q,de,6,m[52]),Q=N(Q,P,V,q,j,10,m[53]),q=N(q,Q,P,V,J,15,m[54]),V=N(V,q,Q,P,z,21,m[55]),P=N(P,V,q,Q,G,6,m[56]),Q=N(Q,P,V,q,H,10,m[57]),q=N(q,Q,P,V,K,15,m[58]),V=N(V,q,Q,P,W,21,m[59]),P=N(P,V,q,Q,te,6,m[60]),Q=N(Q,P,V,q,Y,10,m[61]),q=N(q,Q,P,V,U,15,m[62]),V=N(V,q,Q,P,oe,21,m[63]),F[0]=F[0]+P|0,F[1]=F[1]+V|0,F[2]=F[2]+q|0,F[3]=F[3]+Q|0},_doFinalize:function(){var C=this._data,b=C.words,S=this._nDataBytes*8,B=C.sigBytes*8;b[B>>>5]|=128<<24-B%32;var D=l.floor(S/4294967296),F=S;b[(B+64>>>9<<4)+15]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,b[(B+64>>>9<<4)+14]=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360,C.sigBytes=(b.length+1)*4,this._process();for(var M=this._hash,z=M.words,U=0;U<4;U++){var j=z[U];z[U]=(j<<8|j>>>24)&16711935|(j<<24|j>>>8)&4278255360}return M},clone:function(){var C=d.clone.call(this);return C._hash=this._hash.clone(),C}});function A(C,b,S,B,D,F,M){var z=C+(b&S|~b&B)+D+M;return(z<<F|z>>>32-F)+b}function _(C,b,S,B,D,F,M){var z=C+(b&B|S&~B)+D+M;return(z<<F|z>>>32-F)+b}function k(C,b,S,B,D,F,M){var z=C+(b^S^B)+D+M;return(z<<F|z>>>32-F)+b}function N(C,b,S,B,D,F,M){var z=C+(S^(b|~B))+D+M;return(z<<F|z>>>32-F)+b}c.MD5=d._createHelper(x),c.HmacMD5=d._createHmacHelper(x)})(Math),i.MD5})})(pu)),pu.exports}var mu={exports:{}},Mb=mu.exports,Km;function YA(){return Km||(Km=1,(function(n,s){(function(i,l){n.exports=l(At())})(Mb,function(i){return(function(){var l=i,c=l.lib,u=c.WordArray,p=c.Hasher,d=l.algo,g=[],m=d.SHA1=p.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(x,A){for(var _=this._hash.words,k=_[0],N=_[1],C=_[2],b=_[3],S=_[4],B=0;B<80;B++){if(B<16)g[B]=x[A+B]|0;else{var D=g[B-3]^g[B-8]^g[B-14]^g[B-16];g[B]=D<<1|D>>>31}var F=(k<<5|k>>>27)+S+g[B];B<20?F+=(N&C|~N&b)+1518500249:B<40?F+=(N^C^b)+1859775393:B<60?F+=(N&C|N&b|C&b)-1894007588:F+=(N^C^b)-899497514,S=b,b=C,C=N<<30|N>>>2,N=k,k=F}_[0]=_[0]+k|0,_[1]=_[1]+N|0,_[2]=_[2]+C|0,_[3]=_[3]+b|0,_[4]=_[4]+S|0},_doFinalize:function(){var x=this._data,A=x.words,_=this._nDataBytes*8,k=x.sigBytes*8;return A[k>>>5]|=128<<24-k%32,A[(k+64>>>9<<4)+14]=Math.floor(_/4294967296),A[(k+64>>>9<<4)+15]=_,x.sigBytes=A.length*4,this._process(),this._hash},clone:function(){var x=p.clone.call(this);return x._hash=this._hash.clone(),x}});l.SHA1=p._createHelper(m),l.HmacSHA1=p._createHmacHelper(m)})(),i.SHA1})})(mu)),mu.exports}var gu={exports:{}},Ib=gu.exports,Qm;function Bl(){return Qm||(Qm=1,(function(n,s){(function(i,l){n.exports=l(At())})(Ib,function(i){return(function(l){var c=i,u=c.lib,p=u.WordArray,d=u.Hasher,g=c.algo,m=[],x=[];(function(){function k(S){for(var B=l.sqrt(S),D=2;D<=B;D++)if(!(S%D))return!1;return!0}function N(S){return(S-(S|0))*4294967296|0}for(var C=2,b=0;b<64;)k(C)&&(b<8&&(m[b]=N(l.pow(C,1/2))),x[b]=N(l.pow(C,1/3)),b++),C++})();var A=[],_=g.SHA256=d.extend({_doReset:function(){this._hash=new p.init(m.slice(0))},_doProcessBlock:function(k,N){for(var C=this._hash.words,b=C[0],S=C[1],B=C[2],D=C[3],F=C[4],M=C[5],z=C[6],U=C[7],j=0;j<64;j++){if(j<16)A[j]=k[N+j]|0;else{var te=A[j-15],Z=(te<<25|te>>>7)^(te<<14|te>>>18)^te>>>3,K=A[j-2],ee=(K<<15|K>>>17)^(K<<13|K>>>19)^K>>>10;A[j]=Z+A[j-7]+ee+A[j-16]}var G=F&M^~F&z,oe=b&S^b&B^S&B,J=(b<<30|b>>>2)^(b<<19|b>>>13)^(b<<10|b>>>22),Y=(F<<26|F>>>6)^(F<<21|F>>>11)^(F<<7|F>>>25),de=U+Y+G+x[j]+A[j],W=J+oe;U=z,z=M,M=F,F=D+de|0,D=B,B=S,S=b,b=de+W|0}C[0]=C[0]+b|0,C[1]=C[1]+S|0,C[2]=C[2]+B|0,C[3]=C[3]+D|0,C[4]=C[4]+F|0,C[5]=C[5]+M|0,C[6]=C[6]+z|0,C[7]=C[7]+U|0},_doFinalize:function(){var k=this._data,N=k.words,C=this._nDataBytes*8,b=k.sigBytes*8;return N[b>>>5]|=128<<24-b%32,N[(b+64>>>9<<4)+14]=l.floor(C/4294967296),N[(b+64>>>9<<4)+15]=C,k.sigBytes=N.length*4,this._process(),this._hash},clone:function(){var k=d.clone.call(this);return k._hash=this._hash.clone(),k}});c.SHA256=d._createHelper(_),c.HmacSHA256=d._createHmacHelper(_)})(Math),i.SHA256})})(gu)),gu.exports}var xu={exports:{}},Ob=xu.exports,Ym;function jb(){return Ym||(Ym=1,(function(n,s){(function(i,l,c){n.exports=l(At(),Bl())})(Ob,function(i){return(function(){var l=i,c=l.lib,u=c.WordArray,p=l.algo,d=p.SHA256,g=p.SHA224=d.extend({_doReset:function(){this._hash=new u.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var m=d._doFinalize.call(this);return m.sigBytes-=4,m}});l.SHA224=d._createHelper(g),l.HmacSHA224=d._createHmacHelper(g)})(),i.SHA224})})(xu)),xu.exports}var Au={exports:{}},zb=Au.exports,Xm;function XA(){return Xm||(Xm=1,(function(n,s){(function(i,l,c){n.exports=l(At(),vd())})(zb,function(i){return(function(){var l=i,c=l.lib,u=c.Hasher,p=l.x64,d=p.Word,g=p.WordArray,m=l.algo;function x(){return d.create.apply(d,arguments)}var A=[x(1116352408,3609767458),x(1899447441,602891725),x(3049323471,3964484399),x(3921009573,2173295548),x(961987163,4081628472),x(1508970993,3053834265),x(2453635748,2937671579),x(2870763221,3664609560),x(3624381080,2734883394),x(310598401,1164996542),x(607225278,1323610764),x(1426881987,3590304994),x(1925078388,4068182383),x(2162078206,991336113),x(2614888103,633803317),x(3248222580,3479774868),x(3835390401,2666613458),x(4022224774,944711139),x(264347078,2341262773),x(604807628,2007800933),x(770255983,1495990901),x(1249150122,1856431235),x(1555081692,3175218132),x(1996064986,2198950837),x(2554220882,3999719339),x(2821834349,766784016),x(2952996808,2566594879),x(3210313671,3203337956),x(3336571891,1034457026),x(3584528711,2466948901),x(113926993,3758326383),x(338241895,168717936),x(666307205,1188179964),x(773529912,1546045734),x(1294757372,1522805485),x(1396182291,2643833823),x(1695183700,2343527390),x(1986661051,1014477480),x(2177026350,1206759142),x(2456956037,344077627),x(2730485921,1290863460),x(2820302411,3158454273),x(3259730800,3505952657),x(3345764771,106217008),x(3516065817,3606008344),x(3600352804,1432725776),x(4094571909,1467031594),x(275423344,851169720),x(430227734,3100823752),x(506948616,1363258195),x(659060556,3750685593),x(883997877,3785050280),x(958139571,3318307427),x(1322822218,3812723403),x(1537002063,2003034995),x(1747873779,3602036899),x(1955562222,1575990012),x(2024104815,1125592928),x(2227730452,2716904306),x(2361852424,442776044),x(2428436474,593698344),x(2756734187,3733110249),x(3204031479,2999351573),x(3329325298,3815920427),x(3391569614,3928383900),x(3515267271,566280711),x(3940187606,3454069534),x(4118630271,4000239992),x(116418474,1914138554),x(174292421,2731055270),x(289380356,3203993006),x(460393269,320620315),x(685471733,587496836),x(852142971,1086792851),x(1017036298,365543100),x(1126000580,2618297676),x(1288033470,3409855158),x(1501505948,4234509866),x(1607167915,987167468),x(1816402316,1246189591)],_=[];(function(){for(var N=0;N<80;N++)_[N]=x()})();var k=m.SHA512=u.extend({_doReset:function(){this._hash=new g.init([new d.init(1779033703,4089235720),new d.init(3144134277,2227873595),new d.init(1013904242,4271175723),new d.init(2773480762,1595750129),new d.init(1359893119,2917565137),new d.init(2600822924,725511199),new d.init(528734635,4215389547),new d.init(1541459225,327033209)])},_doProcessBlock:function(N,C){for(var b=this._hash.words,S=b[0],B=b[1],D=b[2],F=b[3],M=b[4],z=b[5],U=b[6],j=b[7],te=S.high,Z=S.low,K=B.high,ee=B.low,G=D.high,oe=D.low,J=F.high,Y=F.low,de=M.high,W=M.low,ae=z.high,H=z.low,P=U.high,V=U.low,q=j.high,Q=j.low,pe=te,ue=Z,se=K,he=ee,Ee=G,We=oe,dt=J,ot=Y,Be=de,Ie=W,ft=ae,Nt=H,lt=P,Qe=V,qe=q,et=Q,rt=0;rt<80;rt++){var Ue,kt,$t=_[rt];if(rt<16)kt=$t.high=N[C+rt*2]|0,Ue=$t.low=N[C+rt*2+1]|0;else{var Pe=_[rt-15],pt=Pe.high,Ut=Pe.low,sn=(pt>>>1|Ut<<31)^(pt>>>8|Ut<<24)^pt>>>7,en=(Ut>>>1|pt<<31)^(Ut>>>8|pt<<24)^(Ut>>>7|pt<<25),Kt=_[rt-2],Ft=Kt.high,Qt=Kt.low,Yn=(Ft>>>19|Qt<<13)^(Ft<<3|Qt>>>29)^Ft>>>6,Cn=(Qt>>>19|Ft<<13)^(Qt<<3|Ft>>>29)^(Qt>>>6|Ft<<26),xe=_[rt-7],Ce=xe.high,Ne=xe.low,ct=_[rt-16],ie=ct.high,Ae=ct.low;Ue=en+Ne,kt=sn+Ce+(Ue>>>0<en>>>0?1:0),Ue=Ue+Cn,kt=kt+Yn+(Ue>>>0<Cn>>>0?1:0),Ue=Ue+Ae,kt=kt+ie+(Ue>>>0<Ae>>>0?1:0),$t.high=kt,$t.low=Ue}var _e=Be&ft^~Be&lt,De=Ie&Nt^~Ie&Qe,Ye=pe&se^pe&Ee^se&Ee,Fe=ue&he^ue&We^he&We,wt=(pe>>>28|ue<<4)^(pe<<30|ue>>>2)^(pe<<25|ue>>>7),Rt=(ue>>>28|pe<<4)^(ue<<30|pe>>>2)^(ue<<25|pe>>>7),zt=(Be>>>14|Ie<<18)^(Be>>>18|Ie<<14)^(Be<<23|Ie>>>9),Hn=(Ie>>>14|Be<<18)^(Ie>>>18|Be<<14)^(Ie<<23|Be>>>9),ut=A[rt],Pt=ut.high,Xn=ut.low,bt=et+Hn,Ht=qe+zt+(bt>>>0<et>>>0?1:0),bt=bt+De,Ht=Ht+_e+(bt>>>0<De>>>0?1:0),bt=bt+Xn,Ht=Ht+Pt+(bt>>>0<Xn>>>0?1:0),bt=bt+Ue,Ht=Ht+kt+(bt>>>0<Ue>>>0?1:0),Yt=Rt+Fe,Re=wt+Ye+(Yt>>>0<Rt>>>0?1:0);qe=lt,et=Qe,lt=ft,Qe=Nt,ft=Be,Nt=Ie,Ie=ot+bt|0,Be=dt+Ht+(Ie>>>0<ot>>>0?1:0)|0,dt=Ee,ot=We,Ee=se,We=he,se=pe,he=ue,ue=bt+Yt|0,pe=Ht+Re+(ue>>>0<bt>>>0?1:0)|0}Z=S.low=Z+ue,S.high=te+pe+(Z>>>0<ue>>>0?1:0),ee=B.low=ee+he,B.high=K+se+(ee>>>0<he>>>0?1:0),oe=D.low=oe+We,D.high=G+Ee+(oe>>>0<We>>>0?1:0),Y=F.low=Y+ot,F.high=J+dt+(Y>>>0<ot>>>0?1:0),W=M.low=W+Ie,M.high=de+Be+(W>>>0<Ie>>>0?1:0),H=z.low=H+Nt,z.high=ae+ft+(H>>>0<Nt>>>0?1:0),V=U.low=V+Qe,U.high=P+lt+(V>>>0<Qe>>>0?1:0),Q=j.low=Q+et,j.high=q+qe+(Q>>>0<et>>>0?1:0)},_doFinalize:function(){var N=this._data,C=N.words,b=this._nDataBytes*8,S=N.sigBytes*8;C[S>>>5]|=128<<24-S%32,C[(S+128>>>10<<5)+30]=Math.floor(b/4294967296),C[(S+128>>>10<<5)+31]=b,N.sigBytes=C.length*4,this._process();var B=this._hash.toX32();return B},clone:function(){var N=u.clone.call(this);return N._hash=this._hash.clone(),N},blockSize:1024/32});l.SHA512=u._createHelper(k),l.HmacSHA512=u._createHmacHelper(k)})(),i.SHA512})})(Au)),Au.exports}var vu={exports:{}},Hb=vu.exports,Jm;function Vb(){return Jm||(Jm=1,(function(n,s){(function(i,l,c){n.exports=l(At(),vd(),XA())})(Hb,function(i){return(function(){var l=i,c=l.x64,u=c.Word,p=c.WordArray,d=l.algo,g=d.SHA512,m=d.SHA384=g.extend({_doReset:function(){this._hash=new p.init([new u.init(3418070365,3238371032),new u.init(1654270250,914150663),new u.init(2438529370,812702999),new u.init(355462360,4144912697),new u.init(1731405415,4290775857),new u.init(2394180231,1750603025),new u.init(3675008525,1694076839),new u.init(1203062813,3204075428)])},_doFinalize:function(){var x=g._doFinalize.call(this);return x.sigBytes-=16,x}});l.SHA384=g._createHelper(m),l.HmacSHA384=g._createHmacHelper(m)})(),i.SHA384})})(vu)),vu.exports}var yu={exports:{}},Ub=yu.exports,eg;function Zb(){return eg||(eg=1,(function(n,s){(function(i,l,c){n.exports=l(At(),vd())})(Ub,function(i){return(function(l){var c=i,u=c.lib,p=u.WordArray,d=u.Hasher,g=c.x64,m=g.Word,x=c.algo,A=[],_=[],k=[];(function(){for(var b=1,S=0,B=0;B<24;B++){A[b+5*S]=(B+1)*(B+2)/2%64;var D=S%5,F=(2*b+3*S)%5;b=D,S=F}for(var b=0;b<5;b++)for(var S=0;S<5;S++)_[b+5*S]=S+(2*b+3*S)%5*5;for(var M=1,z=0;z<24;z++){for(var U=0,j=0,te=0;te<7;te++){if(M&1){var Z=(1<<te)-1;Z<32?j^=1<<Z:U^=1<<Z-32}M&128?M=M<<1^113:M<<=1}k[z]=m.create(U,j)}})();var N=[];(function(){for(var b=0;b<25;b++)N[b]=m.create()})();var C=x.SHA3=d.extend({cfg:d.cfg.extend({outputLength:512}),_doReset:function(){for(var b=this._state=[],S=0;S<25;S++)b[S]=new m.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(b,S){for(var B=this._state,D=this.blockSize/2,F=0;F<D;F++){var M=b[S+2*F],z=b[S+2*F+1];M=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360,z=(z<<8|z>>>24)&16711935|(z<<24|z>>>8)&4278255360;var U=B[F];U.high^=z,U.low^=M}for(var j=0;j<24;j++){for(var te=0;te<5;te++){for(var Z=0,K=0,ee=0;ee<5;ee++){var U=B[te+5*ee];Z^=U.high,K^=U.low}var G=N[te];G.high=Z,G.low=K}for(var te=0;te<5;te++)for(var oe=N[(te+4)%5],J=N[(te+1)%5],Y=J.high,de=J.low,Z=oe.high^(Y<<1|de>>>31),K=oe.low^(de<<1|Y>>>31),ee=0;ee<5;ee++){var U=B[te+5*ee];U.high^=Z,U.low^=K}for(var W=1;W<25;W++){var Z,K,U=B[W],ae=U.high,H=U.low,P=A[W];P<32?(Z=ae<<P|H>>>32-P,K=H<<P|ae>>>32-P):(Z=H<<P-32|ae>>>64-P,K=ae<<P-32|H>>>64-P);var V=N[_[W]];V.high=Z,V.low=K}var q=N[0],Q=B[0];q.high=Q.high,q.low=Q.low;for(var te=0;te<5;te++)for(var ee=0;ee<5;ee++){var W=te+5*ee,U=B[W],pe=N[W],ue=N[(te+1)%5+5*ee],se=N[(te+2)%5+5*ee];U.high=pe.high^~ue.high&se.high,U.low=pe.low^~ue.low&se.low}var U=B[0],he=k[j];U.high^=he.high,U.low^=he.low}},_doFinalize:function(){var b=this._data,S=b.words;this._nDataBytes*8;var B=b.sigBytes*8,D=this.blockSize*32;S[B>>>5]|=1<<24-B%32,S[(l.ceil((B+1)/D)*D>>>5)-1]|=128,b.sigBytes=S.length*4,this._process();for(var F=this._state,M=this.cfg.outputLength/8,z=M/8,U=[],j=0;j<z;j++){var te=F[j],Z=te.high,K=te.low;Z=(Z<<8|Z>>>24)&16711935|(Z<<24|Z>>>8)&4278255360,K=(K<<8|K>>>24)&16711935|(K<<24|K>>>8)&4278255360,U.push(K),U.push(Z)}return new p.init(U,M)},clone:function(){for(var b=d.clone.call(this),S=b._state=this._state.slice(0),B=0;B<25;B++)S[B]=S[B].clone();return b}});c.SHA3=d._createHelper(C),c.HmacSHA3=d._createHmacHelper(C)})(Math),i.SHA3})})(yu)),yu.exports}var _u={exports:{}},Wb=_u.exports,tg;function qb(){return tg||(tg=1,(function(n,s){(function(i,l){n.exports=l(At())})(Wb,function(i){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return(function(l){var c=i,u=c.lib,p=u.WordArray,d=u.Hasher,g=c.algo,m=p.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),x=p.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),A=p.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),_=p.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),k=p.create([0,1518500249,1859775393,2400959708,2840853838]),N=p.create([1352829926,1548603684,1836072691,2053994217,0]),C=g.RIPEMD160=d.extend({_doReset:function(){this._hash=p.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(z,U){for(var j=0;j<16;j++){var te=U+j,Z=z[te];z[te]=(Z<<8|Z>>>24)&16711935|(Z<<24|Z>>>8)&4278255360}var K=this._hash.words,ee=k.words,G=N.words,oe=m.words,J=x.words,Y=A.words,de=_.words,W,ae,H,P,V,q,Q,pe,ue,se;q=W=K[0],Q=ae=K[1],pe=H=K[2],ue=P=K[3],se=V=K[4];for(var he,j=0;j<80;j+=1)he=W+z[U+oe[j]]|0,j<16?he+=b(ae,H,P)+ee[0]:j<32?he+=S(ae,H,P)+ee[1]:j<48?he+=B(ae,H,P)+ee[2]:j<64?he+=D(ae,H,P)+ee[3]:he+=F(ae,H,P)+ee[4],he=he|0,he=M(he,Y[j]),he=he+V|0,W=V,V=P,P=M(H,10),H=ae,ae=he,he=q+z[U+J[j]]|0,j<16?he+=F(Q,pe,ue)+G[0]:j<32?he+=D(Q,pe,ue)+G[1]:j<48?he+=B(Q,pe,ue)+G[2]:j<64?he+=S(Q,pe,ue)+G[3]:he+=b(Q,pe,ue)+G[4],he=he|0,he=M(he,de[j]),he=he+se|0,q=se,se=ue,ue=M(pe,10),pe=Q,Q=he;he=K[1]+H+ue|0,K[1]=K[2]+P+se|0,K[2]=K[3]+V+q|0,K[3]=K[4]+W+Q|0,K[4]=K[0]+ae+pe|0,K[0]=he},_doFinalize:function(){var z=this._data,U=z.words,j=this._nDataBytes*8,te=z.sigBytes*8;U[te>>>5]|=128<<24-te%32,U[(te+64>>>9<<4)+14]=(j<<8|j>>>24)&16711935|(j<<24|j>>>8)&4278255360,z.sigBytes=(U.length+1)*4,this._process();for(var Z=this._hash,K=Z.words,ee=0;ee<5;ee++){var G=K[ee];K[ee]=(G<<8|G>>>24)&16711935|(G<<24|G>>>8)&4278255360}return Z},clone:function(){var z=d.clone.call(this);return z._hash=this._hash.clone(),z}});function b(z,U,j){return z^U^j}function S(z,U,j){return z&U|~z&j}function B(z,U,j){return(z|~U)^j}function D(z,U,j){return z&j|U&~j}function F(z,U,j){return z^(U|~j)}function M(z,U){return z<<U|z>>>32-U}c.RIPEMD160=d._createHelper(C),c.HmacRIPEMD160=d._createHmacHelper(C)})(),i.RIPEMD160})})(_u)),_u.exports}var wu={exports:{}},Gb=wu.exports,ng;function yd(){return ng||(ng=1,(function(n,s){(function(i,l){n.exports=l(At())})(Gb,function(i){(function(){var l=i,c=l.lib,u=c.Base,p=l.enc,d=p.Utf8,g=l.algo;g.HMAC=u.extend({init:function(m,x){m=this._hasher=new m.init,typeof x=="string"&&(x=d.parse(x));var A=m.blockSize,_=A*4;x.sigBytes>_&&(x=m.finalize(x)),x.clamp();for(var k=this._oKey=x.clone(),N=this._iKey=x.clone(),C=k.words,b=N.words,S=0;S<A;S++)C[S]^=1549556828,b[S]^=909522486;k.sigBytes=N.sigBytes=_,this.reset()},reset:function(){var m=this._hasher;m.reset(),m.update(this._iKey)},update:function(m){return this._hasher.update(m),this},finalize:function(m){var x=this._hasher,A=x.finalize(m);x.reset();var _=x.finalize(this._oKey.clone().concat(A));return _}})})()})})(wu)),wu.exports}var bu={exports:{}},$b=bu.exports,rg;function Kb(){return rg||(rg=1,(function(n,s){(function(i,l,c){n.exports=l(At(),Bl(),yd())})($b,function(i){return(function(){var l=i,c=l.lib,u=c.Base,p=c.WordArray,d=l.algo,g=d.SHA256,m=d.HMAC,x=d.PBKDF2=u.extend({cfg:u.extend({keySize:128/32,hasher:g,iterations:25e4}),init:function(A){this.cfg=this.cfg.extend(A)},compute:function(A,_){for(var k=this.cfg,N=m.create(k.hasher,A),C=p.create(),b=p.create([1]),S=C.words,B=b.words,D=k.keySize,F=k.iterations;S.length<D;){var M=N.update(_).finalize(b);N.reset();for(var z=M.words,U=z.length,j=M,te=1;te<F;te++){j=N.finalize(j),N.reset();for(var Z=j.words,K=0;K<U;K++)z[K]^=Z[K]}C.concat(M),B[0]++}return C.sigBytes=D*4,C}});l.PBKDF2=function(A,_,k){return x.create(k).compute(A,_)}})(),i.PBKDF2})})(bu)),bu.exports}var Cu={exports:{}},Qb=Cu.exports,ig;function vo(){return ig||(ig=1,(function(n,s){(function(i,l,c){n.exports=l(At(),YA(),yd())})(Qb,function(i){return(function(){var l=i,c=l.lib,u=c.Base,p=c.WordArray,d=l.algo,g=d.MD5,m=d.EvpKDF=u.extend({cfg:u.extend({keySize:128/32,hasher:g,iterations:1}),init:function(x){this.cfg=this.cfg.extend(x)},compute:function(x,A){for(var _,k=this.cfg,N=k.hasher.create(),C=p.create(),b=C.words,S=k.keySize,B=k.iterations;b.length<S;){_&&N.update(_),_=N.update(x).finalize(A),N.reset();for(var D=1;D<B;D++)_=N.finalize(_),N.reset();C.concat(_)}return C.sigBytes=S*4,C}});l.EvpKDF=function(x,A,_){return m.create(_).compute(x,A)}})(),i.EvpKDF})})(Cu)),Cu.exports}var Eu={exports:{}},Yb=Eu.exports,og;function An(){return og||(og=1,(function(n,s){(function(i,l,c){n.exports=l(At(),vo())})(Yb,function(i){i.lib.Cipher||(function(l){var c=i,u=c.lib,p=u.Base,d=u.WordArray,g=u.BufferedBlockAlgorithm,m=c.enc;m.Utf8;var x=m.Base64,A=c.algo,_=A.EvpKDF,k=u.Cipher=g.extend({cfg:p.extend(),createEncryptor:function(Z,K){return this.create(this._ENC_XFORM_MODE,Z,K)},createDecryptor:function(Z,K){return this.create(this._DEC_XFORM_MODE,Z,K)},init:function(Z,K,ee){this.cfg=this.cfg.extend(ee),this._xformMode=Z,this._key=K,this.reset()},reset:function(){g.reset.call(this),this._doReset()},process:function(Z){return this._append(Z),this._process()},finalize:function(Z){Z&&this._append(Z);var K=this._doFinalize();return K},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:(function(){function Z(K){return typeof K=="string"?te:z}return function(K){return{encrypt:function(ee,G,oe){return Z(G).encrypt(K,ee,G,oe)},decrypt:function(ee,G,oe){return Z(G).decrypt(K,ee,G,oe)}}}})()});u.StreamCipher=k.extend({_doFinalize:function(){var Z=this._process(!0);return Z},blockSize:1});var N=c.mode={},C=u.BlockCipherMode=p.extend({createEncryptor:function(Z,K){return this.Encryptor.create(Z,K)},createDecryptor:function(Z,K){return this.Decryptor.create(Z,K)},init:function(Z,K){this._cipher=Z,this._iv=K}}),b=N.CBC=(function(){var Z=C.extend();Z.Encryptor=Z.extend({processBlock:function(ee,G){var oe=this._cipher,J=oe.blockSize;K.call(this,ee,G,J),oe.encryptBlock(ee,G),this._prevBlock=ee.slice(G,G+J)}}),Z.Decryptor=Z.extend({processBlock:function(ee,G){var oe=this._cipher,J=oe.blockSize,Y=ee.slice(G,G+J);oe.decryptBlock(ee,G),K.call(this,ee,G,J),this._prevBlock=Y}});function K(ee,G,oe){var J,Y=this._iv;Y?(J=Y,this._iv=l):J=this._prevBlock;for(var de=0;de<oe;de++)ee[G+de]^=J[de]}return Z})(),S=c.pad={},B=S.Pkcs7={pad:function(Z,K){for(var ee=K*4,G=ee-Z.sigBytes%ee,oe=G<<24|G<<16|G<<8|G,J=[],Y=0;Y<G;Y+=4)J.push(oe);var de=d.create(J,G);Z.concat(de)},unpad:function(Z){var K=Z.words[Z.sigBytes-1>>>2]&255;Z.sigBytes-=K}};u.BlockCipher=k.extend({cfg:k.cfg.extend({mode:b,padding:B}),reset:function(){var Z;k.reset.call(this);var K=this.cfg,ee=K.iv,G=K.mode;this._xformMode==this._ENC_XFORM_MODE?Z=G.createEncryptor:(Z=G.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==Z?this._mode.init(this,ee&&ee.words):(this._mode=Z.call(G,this,ee&&ee.words),this._mode.__creator=Z)},_doProcessBlock:function(Z,K){this._mode.processBlock(Z,K)},_doFinalize:function(){var Z,K=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(K.pad(this._data,this.blockSize),Z=this._process(!0)):(Z=this._process(!0),K.unpad(Z)),Z},blockSize:128/32});var D=u.CipherParams=p.extend({init:function(Z){this.mixIn(Z)},toString:function(Z){return(Z||this.formatter).stringify(this)}}),F=c.format={},M=F.OpenSSL={stringify:function(Z){var K,ee=Z.ciphertext,G=Z.salt;return G?K=d.create([1398893684,1701076831]).concat(G).concat(ee):K=ee,K.toString(x)},parse:function(Z){var K,ee=x.parse(Z),G=ee.words;return G[0]==1398893684&&G[1]==1701076831&&(K=d.create(G.slice(2,4)),G.splice(0,4),ee.sigBytes-=16),D.create({ciphertext:ee,salt:K})}},z=u.SerializableCipher=p.extend({cfg:p.extend({format:M}),encrypt:function(Z,K,ee,G){G=this.cfg.extend(G);var oe=Z.createEncryptor(ee,G),J=oe.finalize(K),Y=oe.cfg;return D.create({ciphertext:J,key:ee,iv:Y.iv,algorithm:Z,mode:Y.mode,padding:Y.padding,blockSize:Z.blockSize,formatter:G.format})},decrypt:function(Z,K,ee,G){G=this.cfg.extend(G),K=this._parse(K,G.format);var oe=Z.createDecryptor(ee,G).finalize(K.ciphertext);return oe},_parse:function(Z,K){return typeof Z=="string"?K.parse(Z,this):Z}}),U=c.kdf={},j=U.OpenSSL={execute:function(Z,K,ee,G,oe){if(G||(G=d.random(64/8)),oe)var J=_.create({keySize:K+ee,hasher:oe}).compute(Z,G);else var J=_.create({keySize:K+ee}).compute(Z,G);var Y=d.create(J.words.slice(K),ee*4);return J.sigBytes=K*4,D.create({key:J,iv:Y,salt:G})}},te=u.PasswordBasedCipher=z.extend({cfg:z.cfg.extend({kdf:j}),encrypt:function(Z,K,ee,G){G=this.cfg.extend(G);var oe=G.kdf.execute(ee,Z.keySize,Z.ivSize,G.salt,G.hasher);G.iv=oe.iv;var J=z.encrypt.call(this,Z,K,oe.key,G);return J.mixIn(oe),J},decrypt:function(Z,K,ee,G){G=this.cfg.extend(G),K=this._parse(K,G.format);var oe=G.kdf.execute(ee,Z.keySize,Z.ivSize,K.salt,G.hasher);G.iv=oe.iv;var J=z.decrypt.call(this,Z,K,oe.key,G);return J}})})()})})(Eu)),Eu.exports}var ku={exports:{}},Xb=ku.exports,sg;function Jb(){return sg||(sg=1,(function(n,s){(function(i,l,c){n.exports=l(At(),An())})(Xb,function(i){return i.mode.CFB=(function(){var l=i.lib.BlockCipherMode.extend();l.Encryptor=l.extend({processBlock:function(u,p){var d=this._cipher,g=d.blockSize;c.call(this,u,p,g,d),this._prevBlock=u.slice(p,p+g)}}),l.Decryptor=l.extend({processBlock:function(u,p){var d=this._cipher,g=d.blockSize,m=u.slice(p,p+g);c.call(this,u,p,g,d),this._prevBlock=m}});function c(u,p,d,g){var m,x=this._iv;x?(m=x.slice(0),this._iv=void 0):m=this._prevBlock,g.encryptBlock(m,0);for(var A=0;A<d;A++)u[p+A]^=m[A]}return l})(),i.mode.CFB})})(ku)),ku.exports}var Su={exports:{}},eC=Su.exports,ag;function tC(){return ag||(ag=1,(function(n,s){(function(i,l,c){n.exports=l(At(),An())})(eC,function(i){return i.mode.CTR=(function(){var l=i.lib.BlockCipherMode.extend(),c=l.Encryptor=l.extend({processBlock:function(u,p){var d=this._cipher,g=d.blockSize,m=this._iv,x=this._counter;m&&(x=this._counter=m.slice(0),this._iv=void 0);var A=x.slice(0);d.encryptBlock(A,0),x[g-1]=x[g-1]+1|0;for(var _=0;_<g;_++)u[p+_]^=A[_]}});return l.Decryptor=c,l})(),i.mode.CTR})})(Su)),Su.exports}var Bu={exports:{}},nC=Bu.exports,lg;function rC(){return lg||(lg=1,(function(n,s){(function(i,l,c){n.exports=l(At(),An())})(nC,function(i){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return i.mode.CTRGladman=(function(){var l=i.lib.BlockCipherMode.extend();function c(d){if((d>>24&255)===255){var g=d>>16&255,m=d>>8&255,x=d&255;g===255?(g=0,m===255?(m=0,x===255?x=0:++x):++m):++g,d=0,d+=g<<16,d+=m<<8,d+=x}else d+=1<<24;return d}function u(d){return(d[0]=c(d[0]))===0&&(d[1]=c(d[1])),d}var p=l.Encryptor=l.extend({processBlock:function(d,g){var m=this._cipher,x=m.blockSize,A=this._iv,_=this._counter;A&&(_=this._counter=A.slice(0),this._iv=void 0),u(_);var k=_.slice(0);m.encryptBlock(k,0);for(var N=0;N<x;N++)d[g+N]^=k[N]}});return l.Decryptor=p,l})(),i.mode.CTRGladman})})(Bu)),Bu.exports}var Pu={exports:{}},iC=Pu.exports,cg;function oC(){return cg||(cg=1,(function(n,s){(function(i,l,c){n.exports=l(At(),An())})(iC,function(i){return i.mode.OFB=(function(){var l=i.lib.BlockCipherMode.extend(),c=l.Encryptor=l.extend({processBlock:function(u,p){var d=this._cipher,g=d.blockSize,m=this._iv,x=this._keystream;m&&(x=this._keystream=m.slice(0),this._iv=void 0),d.encryptBlock(x,0);for(var A=0;A<g;A++)u[p+A]^=x[A]}});return l.Decryptor=c,l})(),i.mode.OFB})})(Pu)),Pu.exports}var Tu={exports:{}},sC=Tu.exports,ug;function aC(){return ug||(ug=1,(function(n,s){(function(i,l,c){n.exports=l(At(),An())})(sC,function(i){return i.mode.ECB=(function(){var l=i.lib.BlockCipherMode.extend();return l.Encryptor=l.extend({processBlock:function(c,u){this._cipher.encryptBlock(c,u)}}),l.Decryptor=l.extend({processBlock:function(c,u){this._cipher.decryptBlock(c,u)}}),l})(),i.mode.ECB})})(Tu)),Tu.exports}var Du={exports:{}},lC=Du.exports,dg;function cC(){return dg||(dg=1,(function(n,s){(function(i,l,c){n.exports=l(At(),An())})(lC,function(i){return i.pad.AnsiX923={pad:function(l,c){var u=l.sigBytes,p=c*4,d=p-u%p,g=u+d-1;l.clamp(),l.words[g>>>2]|=d<<24-g%4*8,l.sigBytes+=d},unpad:function(l){var c=l.words[l.sigBytes-1>>>2]&255;l.sigBytes-=c}},i.pad.Ansix923})})(Du)),Du.exports}var Ru={exports:{}},uC=Ru.exports,fg;function dC(){return fg||(fg=1,(function(n,s){(function(i,l,c){n.exports=l(At(),An())})(uC,function(i){return i.pad.Iso10126={pad:function(l,c){var u=c*4,p=u-l.sigBytes%u;l.concat(i.lib.WordArray.random(p-1)).concat(i.lib.WordArray.create([p<<24],1))},unpad:function(l){var c=l.words[l.sigBytes-1>>>2]&255;l.sigBytes-=c}},i.pad.Iso10126})})(Ru)),Ru.exports}var Nu={exports:{}},fC=Nu.exports,hg;function hC(){return hg||(hg=1,(function(n,s){(function(i,l,c){n.exports=l(At(),An())})(fC,function(i){return i.pad.Iso97971={pad:function(l,c){l.concat(i.lib.WordArray.create([2147483648],1)),i.pad.ZeroPadding.pad(l,c)},unpad:function(l){i.pad.ZeroPadding.unpad(l),l.sigBytes--}},i.pad.Iso97971})})(Nu)),Nu.exports}var Fu={exports:{}},pC=Fu.exports,pg;function mC(){return pg||(pg=1,(function(n,s){(function(i,l,c){n.exports=l(At(),An())})(pC,function(i){return i.pad.ZeroPadding={pad:function(l,c){var u=c*4;l.clamp(),l.sigBytes+=u-(l.sigBytes%u||u)},unpad:function(l){for(var c=l.words,u=l.sigBytes-1,u=l.sigBytes-1;u>=0;u--)if(c[u>>>2]>>>24-u%4*8&255){l.sigBytes=u+1;break}}},i.pad.ZeroPadding})})(Fu)),Fu.exports}var Lu={exports:{}},gC=Lu.exports,mg;function xC(){return mg||(mg=1,(function(n,s){(function(i,l,c){n.exports=l(At(),An())})(gC,function(i){return i.pad.NoPadding={pad:function(){},unpad:function(){}},i.pad.NoPadding})})(Lu)),Lu.exports}var Mu={exports:{}},AC=Mu.exports,gg;function vC(){return gg||(gg=1,(function(n,s){(function(i,l,c){n.exports=l(At(),An())})(AC,function(i){return(function(l){var c=i,u=c.lib,p=u.CipherParams,d=c.enc,g=d.Hex,m=c.format;m.Hex={stringify:function(x){return x.ciphertext.toString(g)},parse:function(x){var A=g.parse(x);return p.create({ciphertext:A})}}})(),i.format.Hex})})(Mu)),Mu.exports}var Iu={exports:{}},yC=Iu.exports,xg;function _C(){return xg||(xg=1,(function(n,s){(function(i,l,c){n.exports=l(At(),ss(),as(),vo(),An())})(yC,function(i){return(function(){var l=i,c=l.lib,u=c.BlockCipher,p=l.algo,d=[],g=[],m=[],x=[],A=[],_=[],k=[],N=[],C=[],b=[];(function(){for(var D=[],F=0;F<256;F++)F<128?D[F]=F<<1:D[F]=F<<1^283;for(var M=0,z=0,F=0;F<256;F++){var U=z^z<<1^z<<2^z<<3^z<<4;U=U>>>8^U&255^99,d[M]=U,g[U]=M;var j=D[M],te=D[j],Z=D[te],K=D[U]*257^U*16843008;m[M]=K<<24|K>>>8,x[M]=K<<16|K>>>16,A[M]=K<<8|K>>>24,_[M]=K;var K=Z*16843009^te*65537^j*257^M*16843008;k[U]=K<<24|K>>>8,N[U]=K<<16|K>>>16,C[U]=K<<8|K>>>24,b[U]=K,M?(M=j^D[D[D[Z^j]]],z^=D[D[z]]):M=z=1}})();var S=[0,1,2,4,8,16,32,64,128,27,54],B=p.AES=u.extend({_doReset:function(){var D;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var F=this._keyPriorReset=this._key,M=F.words,z=F.sigBytes/4,U=this._nRounds=z+6,j=(U+1)*4,te=this._keySchedule=[],Z=0;Z<j;Z++)Z<z?te[Z]=M[Z]:(D=te[Z-1],Z%z?z>6&&Z%z==4&&(D=d[D>>>24]<<24|d[D>>>16&255]<<16|d[D>>>8&255]<<8|d[D&255]):(D=D<<8|D>>>24,D=d[D>>>24]<<24|d[D>>>16&255]<<16|d[D>>>8&255]<<8|d[D&255],D^=S[Z/z|0]<<24),te[Z]=te[Z-z]^D);for(var K=this._invKeySchedule=[],ee=0;ee<j;ee++){var Z=j-ee;if(ee%4)var D=te[Z];else var D=te[Z-4];ee<4||Z<=4?K[ee]=D:K[ee]=k[d[D>>>24]]^N[d[D>>>16&255]]^C[d[D>>>8&255]]^b[d[D&255]]}}},encryptBlock:function(D,F){this._doCryptBlock(D,F,this._keySchedule,m,x,A,_,d)},decryptBlock:function(D,F){var M=D[F+1];D[F+1]=D[F+3],D[F+3]=M,this._doCryptBlock(D,F,this._invKeySchedule,k,N,C,b,g);var M=D[F+1];D[F+1]=D[F+3],D[F+3]=M},_doCryptBlock:function(D,F,M,z,U,j,te,Z){for(var K=this._nRounds,ee=D[F]^M[0],G=D[F+1]^M[1],oe=D[F+2]^M[2],J=D[F+3]^M[3],Y=4,de=1;de<K;de++){var W=z[ee>>>24]^U[G>>>16&255]^j[oe>>>8&255]^te[J&255]^M[Y++],ae=z[G>>>24]^U[oe>>>16&255]^j[J>>>8&255]^te[ee&255]^M[Y++],H=z[oe>>>24]^U[J>>>16&255]^j[ee>>>8&255]^te[G&255]^M[Y++],P=z[J>>>24]^U[ee>>>16&255]^j[G>>>8&255]^te[oe&255]^M[Y++];ee=W,G=ae,oe=H,J=P}var W=(Z[ee>>>24]<<24|Z[G>>>16&255]<<16|Z[oe>>>8&255]<<8|Z[J&255])^M[Y++],ae=(Z[G>>>24]<<24|Z[oe>>>16&255]<<16|Z[J>>>8&255]<<8|Z[ee&255])^M[Y++],H=(Z[oe>>>24]<<24|Z[J>>>16&255]<<16|Z[ee>>>8&255]<<8|Z[G&255])^M[Y++],P=(Z[J>>>24]<<24|Z[ee>>>16&255]<<16|Z[G>>>8&255]<<8|Z[oe&255])^M[Y++];D[F]=W,D[F+1]=ae,D[F+2]=H,D[F+3]=P},keySize:256/32});l.AES=u._createHelper(B)})(),i.AES})})(Iu)),Iu.exports}var Ou={exports:{}},wC=Ou.exports,Ag;function bC(){return Ag||(Ag=1,(function(n,s){(function(i,l,c){n.exports=l(At(),ss(),as(),vo(),An())})(wC,function(i){return(function(){var l=i,c=l.lib,u=c.WordArray,p=c.BlockCipher,d=l.algo,g=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],m=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],x=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],A=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],_=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],k=d.DES=p.extend({_doReset:function(){for(var S=this._key,B=S.words,D=[],F=0;F<56;F++){var M=g[F]-1;D[F]=B[M>>>5]>>>31-M%32&1}for(var z=this._subKeys=[],U=0;U<16;U++){for(var j=z[U]=[],te=x[U],F=0;F<24;F++)j[F/6|0]|=D[(m[F]-1+te)%28]<<31-F%6,j[4+(F/6|0)]|=D[28+(m[F+24]-1+te)%28]<<31-F%6;j[0]=j[0]<<1|j[0]>>>31;for(var F=1;F<7;F++)j[F]=j[F]>>>(F-1)*4+3;j[7]=j[7]<<5|j[7]>>>27}for(var Z=this._invSubKeys=[],F=0;F<16;F++)Z[F]=z[15-F]},encryptBlock:function(S,B){this._doCryptBlock(S,B,this._subKeys)},decryptBlock:function(S,B){this._doCryptBlock(S,B,this._invSubKeys)},_doCryptBlock:function(S,B,D){this._lBlock=S[B],this._rBlock=S[B+1],N.call(this,4,252645135),N.call(this,16,65535),C.call(this,2,858993459),C.call(this,8,16711935),N.call(this,1,1431655765);for(var F=0;F<16;F++){for(var M=D[F],z=this._lBlock,U=this._rBlock,j=0,te=0;te<8;te++)j|=A[te][((U^M[te])&_[te])>>>0];this._lBlock=U,this._rBlock=z^j}var Z=this._lBlock;this._lBlock=this._rBlock,this._rBlock=Z,N.call(this,1,1431655765),C.call(this,8,16711935),C.call(this,2,858993459),N.call(this,16,65535),N.call(this,4,252645135),S[B]=this._lBlock,S[B+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function N(S,B){var D=(this._lBlock>>>S^this._rBlock)&B;this._rBlock^=D,this._lBlock^=D<<S}function C(S,B){var D=(this._rBlock>>>S^this._lBlock)&B;this._lBlock^=D,this._rBlock^=D<<S}l.DES=p._createHelper(k);var b=d.TripleDES=p.extend({_doReset:function(){var S=this._key,B=S.words;if(B.length!==2&&B.length!==4&&B.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var D=B.slice(0,2),F=B.length<4?B.slice(0,2):B.slice(2,4),M=B.length<6?B.slice(0,2):B.slice(4,6);this._des1=k.createEncryptor(u.create(D)),this._des2=k.createEncryptor(u.create(F)),this._des3=k.createEncryptor(u.create(M))},encryptBlock:function(S,B){this._des1.encryptBlock(S,B),this._des2.decryptBlock(S,B),this._des3.encryptBlock(S,B)},decryptBlock:function(S,B){this._des3.decryptBlock(S,B),this._des2.encryptBlock(S,B),this._des1.decryptBlock(S,B)},keySize:192/32,ivSize:64/32,blockSize:64/32});l.TripleDES=p._createHelper(b)})(),i.TripleDES})})(Ou)),Ou.exports}var ju={exports:{}},CC=ju.exports,vg;function EC(){return vg||(vg=1,(function(n,s){(function(i,l,c){n.exports=l(At(),ss(),as(),vo(),An())})(CC,function(i){return(function(){var l=i,c=l.lib,u=c.StreamCipher,p=l.algo,d=p.RC4=u.extend({_doReset:function(){for(var x=this._key,A=x.words,_=x.sigBytes,k=this._S=[],N=0;N<256;N++)k[N]=N;for(var N=0,C=0;N<256;N++){var b=N%_,S=A[b>>>2]>>>24-b%4*8&255;C=(C+k[N]+S)%256;var B=k[N];k[N]=k[C],k[C]=B}this._i=this._j=0},_doProcessBlock:function(x,A){x[A]^=g.call(this)},keySize:256/32,ivSize:0});function g(){for(var x=this._S,A=this._i,_=this._j,k=0,N=0;N<4;N++){A=(A+1)%256,_=(_+x[A])%256;var C=x[A];x[A]=x[_],x[_]=C,k|=x[(x[A]+x[_])%256]<<24-N*8}return this._i=A,this._j=_,k}l.RC4=u._createHelper(d);var m=p.RC4Drop=d.extend({cfg:d.cfg.extend({drop:192}),_doReset:function(){d._doReset.call(this);for(var x=this.cfg.drop;x>0;x--)g.call(this)}});l.RC4Drop=u._createHelper(m)})(),i.RC4})})(ju)),ju.exports}var zu={exports:{}},kC=zu.exports,yg;function SC(){return yg||(yg=1,(function(n,s){(function(i,l,c){n.exports=l(At(),ss(),as(),vo(),An())})(kC,function(i){return(function(){var l=i,c=l.lib,u=c.StreamCipher,p=l.algo,d=[],g=[],m=[],x=p.Rabbit=u.extend({_doReset:function(){for(var _=this._key.words,k=this.cfg.iv,N=0;N<4;N++)_[N]=(_[N]<<8|_[N]>>>24)&16711935|(_[N]<<24|_[N]>>>8)&4278255360;var C=this._X=[_[0],_[3]<<16|_[2]>>>16,_[1],_[0]<<16|_[3]>>>16,_[2],_[1]<<16|_[0]>>>16,_[3],_[2]<<16|_[1]>>>16],b=this._C=[_[2]<<16|_[2]>>>16,_[0]&4294901760|_[1]&65535,_[3]<<16|_[3]>>>16,_[1]&4294901760|_[2]&65535,_[0]<<16|_[0]>>>16,_[2]&4294901760|_[3]&65535,_[1]<<16|_[1]>>>16,_[3]&4294901760|_[0]&65535];this._b=0;for(var N=0;N<4;N++)A.call(this);for(var N=0;N<8;N++)b[N]^=C[N+4&7];if(k){var S=k.words,B=S[0],D=S[1],F=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,M=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,z=F>>>16|M&4294901760,U=M<<16|F&65535;b[0]^=F,b[1]^=z,b[2]^=M,b[3]^=U,b[4]^=F,b[5]^=z,b[6]^=M,b[7]^=U;for(var N=0;N<4;N++)A.call(this)}},_doProcessBlock:function(_,k){var N=this._X;A.call(this),d[0]=N[0]^N[5]>>>16^N[3]<<16,d[1]=N[2]^N[7]>>>16^N[5]<<16,d[2]=N[4]^N[1]>>>16^N[7]<<16,d[3]=N[6]^N[3]>>>16^N[1]<<16;for(var C=0;C<4;C++)d[C]=(d[C]<<8|d[C]>>>24)&16711935|(d[C]<<24|d[C]>>>8)&4278255360,_[k+C]^=d[C]},blockSize:128/32,ivSize:64/32});function A(){for(var _=this._X,k=this._C,N=0;N<8;N++)g[N]=k[N];k[0]=k[0]+1295307597+this._b|0,k[1]=k[1]+3545052371+(k[0]>>>0<g[0]>>>0?1:0)|0,k[2]=k[2]+886263092+(k[1]>>>0<g[1]>>>0?1:0)|0,k[3]=k[3]+1295307597+(k[2]>>>0<g[2]>>>0?1:0)|0,k[4]=k[4]+3545052371+(k[3]>>>0<g[3]>>>0?1:0)|0,k[5]=k[5]+886263092+(k[4]>>>0<g[4]>>>0?1:0)|0,k[6]=k[6]+1295307597+(k[5]>>>0<g[5]>>>0?1:0)|0,k[7]=k[7]+3545052371+(k[6]>>>0<g[6]>>>0?1:0)|0,this._b=k[7]>>>0<g[7]>>>0?1:0;for(var N=0;N<8;N++){var C=_[N]+k[N],b=C&65535,S=C>>>16,B=((b*b>>>17)+b*S>>>15)+S*S,D=((C&4294901760)*C|0)+((C&65535)*C|0);m[N]=B^D}_[0]=m[0]+(m[7]<<16|m[7]>>>16)+(m[6]<<16|m[6]>>>16)|0,_[1]=m[1]+(m[0]<<8|m[0]>>>24)+m[7]|0,_[2]=m[2]+(m[1]<<16|m[1]>>>16)+(m[0]<<16|m[0]>>>16)|0,_[3]=m[3]+(m[2]<<8|m[2]>>>24)+m[1]|0,_[4]=m[4]+(m[3]<<16|m[3]>>>16)+(m[2]<<16|m[2]>>>16)|0,_[5]=m[5]+(m[4]<<8|m[4]>>>24)+m[3]|0,_[6]=m[6]+(m[5]<<16|m[5]>>>16)+(m[4]<<16|m[4]>>>16)|0,_[7]=m[7]+(m[6]<<8|m[6]>>>24)+m[5]|0}l.Rabbit=u._createHelper(x)})(),i.Rabbit})})(zu)),zu.exports}var Hu={exports:{}},BC=Hu.exports,_g;function PC(){return _g||(_g=1,(function(n,s){(function(i,l,c){n.exports=l(At(),ss(),as(),vo(),An())})(BC,function(i){return(function(){var l=i,c=l.lib,u=c.StreamCipher,p=l.algo,d=[],g=[],m=[],x=p.RabbitLegacy=u.extend({_doReset:function(){var _=this._key.words,k=this.cfg.iv,N=this._X=[_[0],_[3]<<16|_[2]>>>16,_[1],_[0]<<16|_[3]>>>16,_[2],_[1]<<16|_[0]>>>16,_[3],_[2]<<16|_[1]>>>16],C=this._C=[_[2]<<16|_[2]>>>16,_[0]&4294901760|_[1]&65535,_[3]<<16|_[3]>>>16,_[1]&4294901760|_[2]&65535,_[0]<<16|_[0]>>>16,_[2]&4294901760|_[3]&65535,_[1]<<16|_[1]>>>16,_[3]&4294901760|_[0]&65535];this._b=0;for(var b=0;b<4;b++)A.call(this);for(var b=0;b<8;b++)C[b]^=N[b+4&7];if(k){var S=k.words,B=S[0],D=S[1],F=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,M=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,z=F>>>16|M&4294901760,U=M<<16|F&65535;C[0]^=F,C[1]^=z,C[2]^=M,C[3]^=U,C[4]^=F,C[5]^=z,C[6]^=M,C[7]^=U;for(var b=0;b<4;b++)A.call(this)}},_doProcessBlock:function(_,k){var N=this._X;A.call(this),d[0]=N[0]^N[5]>>>16^N[3]<<16,d[1]=N[2]^N[7]>>>16^N[5]<<16,d[2]=N[4]^N[1]>>>16^N[7]<<16,d[3]=N[6]^N[3]>>>16^N[1]<<16;for(var C=0;C<4;C++)d[C]=(d[C]<<8|d[C]>>>24)&16711935|(d[C]<<24|d[C]>>>8)&4278255360,_[k+C]^=d[C]},blockSize:128/32,ivSize:64/32});function A(){for(var _=this._X,k=this._C,N=0;N<8;N++)g[N]=k[N];k[0]=k[0]+1295307597+this._b|0,k[1]=k[1]+3545052371+(k[0]>>>0<g[0]>>>0?1:0)|0,k[2]=k[2]+886263092+(k[1]>>>0<g[1]>>>0?1:0)|0,k[3]=k[3]+1295307597+(k[2]>>>0<g[2]>>>0?1:0)|0,k[4]=k[4]+3545052371+(k[3]>>>0<g[3]>>>0?1:0)|0,k[5]=k[5]+886263092+(k[4]>>>0<g[4]>>>0?1:0)|0,k[6]=k[6]+1295307597+(k[5]>>>0<g[5]>>>0?1:0)|0,k[7]=k[7]+3545052371+(k[6]>>>0<g[6]>>>0?1:0)|0,this._b=k[7]>>>0<g[7]>>>0?1:0;for(var N=0;N<8;N++){var C=_[N]+k[N],b=C&65535,S=C>>>16,B=((b*b>>>17)+b*S>>>15)+S*S,D=((C&4294901760)*C|0)+((C&65535)*C|0);m[N]=B^D}_[0]=m[0]+(m[7]<<16|m[7]>>>16)+(m[6]<<16|m[6]>>>16)|0,_[1]=m[1]+(m[0]<<8|m[0]>>>24)+m[7]|0,_[2]=m[2]+(m[1]<<16|m[1]>>>16)+(m[0]<<16|m[0]>>>16)|0,_[3]=m[3]+(m[2]<<8|m[2]>>>24)+m[1]|0,_[4]=m[4]+(m[3]<<16|m[3]>>>16)+(m[2]<<16|m[2]>>>16)|0,_[5]=m[5]+(m[4]<<8|m[4]>>>24)+m[3]|0,_[6]=m[6]+(m[5]<<16|m[5]>>>16)+(m[4]<<16|m[4]>>>16)|0,_[7]=m[7]+(m[6]<<8|m[6]>>>24)+m[5]|0}l.RabbitLegacy=u._createHelper(x)})(),i.RabbitLegacy})})(Hu)),Hu.exports}var Vu={exports:{}},TC=Vu.exports,wg;function DC(){return wg||(wg=1,(function(n,s){(function(i,l,c){n.exports=l(At(),ss(),as(),vo(),An())})(TC,function(i){return(function(){var l=i,c=l.lib,u=c.BlockCipher,p=l.algo;const d=16,g=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],m=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var x={pbox:[],sbox:[]};function A(b,S){let B=S>>24&255,D=S>>16&255,F=S>>8&255,M=S&255,z=b.sbox[0][B]+b.sbox[1][D];return z=z^b.sbox[2][F],z=z+b.sbox[3][M],z}function _(b,S,B){let D=S,F=B,M;for(let z=0;z<d;++z)D=D^b.pbox[z],F=A(b,D)^F,M=D,D=F,F=M;return M=D,D=F,F=M,F=F^b.pbox[d],D=D^b.pbox[d+1],{left:D,right:F}}function k(b,S,B){let D=S,F=B,M;for(let z=d+1;z>1;--z)D=D^b.pbox[z],F=A(b,D)^F,M=D,D=F,F=M;return M=D,D=F,F=M,F=F^b.pbox[1],D=D^b.pbox[0],{left:D,right:F}}function N(b,S,B){for(let U=0;U<4;U++){b.sbox[U]=[];for(let j=0;j<256;j++)b.sbox[U][j]=m[U][j]}let D=0;for(let U=0;U<d+2;U++)b.pbox[U]=g[U]^S[D],D++,D>=B&&(D=0);let F=0,M=0,z=0;for(let U=0;U<d+2;U+=2)z=_(b,F,M),F=z.left,M=z.right,b.pbox[U]=F,b.pbox[U+1]=M;for(let U=0;U<4;U++)for(let j=0;j<256;j+=2)z=_(b,F,M),F=z.left,M=z.right,b.sbox[U][j]=F,b.sbox[U][j+1]=M;return!0}var C=p.Blowfish=u.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var b=this._keyPriorReset=this._key,S=b.words,B=b.sigBytes/4;N(x,S,B)}},encryptBlock:function(b,S){var B=_(x,b[S],b[S+1]);b[S]=B.left,b[S+1]=B.right},decryptBlock:function(b,S){var B=k(x,b[S],b[S+1]);b[S]=B.left,b[S+1]=B.right},blockSize:64/32,keySize:128/32,ivSize:64/32});l.Blowfish=u._createHelper(C)})(),i.Blowfish})})(Vu)),Vu.exports}var RC=au.exports,bg;function JA(){return bg||(bg=1,(function(n,s){(function(i,l,c){n.exports=l(At(),vd(),Pb(),Db(),ss(),Fb(),as(),YA(),Bl(),jb(),XA(),Vb(),Zb(),qb(),yd(),Kb(),vo(),An(),Jb(),tC(),rC(),oC(),aC(),cC(),dC(),hC(),mC(),xC(),vC(),_C(),bC(),EC(),SC(),PC(),DC())})(RC,function(i){return i})})(au)),au.exports}var Cg;function eh(){if(Cg)return il;Cg=1,Object.defineProperty(il,"__esModule",{value:!0}),il.ChannelCrypto=void 0;const n=JA(),s=bn();class i{static decryptGroupTextMessage(c,u,p){try{const d=(0,s.hexToBytes)(p),g=(0,s.hexToBytes)(u),m=new Uint8Array(32);m.set(d,0);const x=(0,n.HmacSHA256)(n.enc.Hex.parse(c),n.enc.Hex.parse((0,s.bytesToHex)(m))),_=(0,s.hexToBytes)(x.toString(n.enc.Hex)).slice(0,2);if(_[0]!==g[0]||_[1]!==g[1])return{success:!1,error:"MAC verification failed"};const k=n.enc.Hex.parse(p),N=n.enc.Hex.parse(c),C=n.AES.decrypt(n.lib.CipherParams.create({ciphertext:N}),k,{mode:n.mode.ECB,padding:n.pad.NoPadding}),b=(0,s.hexToBytes)(C.toString(n.enc.Hex));if(!b||b.length<5)return{success:!1,error:"Decrypted content too short"};const S=b[0]|b[1]<<8|b[2]<<16|b[3]<<24,B=b[4],D=b.slice(5);let M=new TextDecoder("utf-8").decode(D);const z=M.indexOf("\0");z>=0&&(M=M.substring(0,z));const U=M.indexOf(": ");let j,te;if(U>0&&U<50){const Z=M.substring(0,U);/[:\[\]]/.test(Z)?te=M:(j=Z,te=M.substring(U+2))}else te=M;return{success:!0,data:{timestamp:S,flags:B,sender:j,message:te}}}catch(d){return{success:!1,error:d instanceof Error?d.message:"Decryption failed"}}}static calculateChannelHash(c){const u=(0,n.SHA256)(n.enc.Hex.parse(c));return(0,s.hexToBytes)(u.toString(n.enc.Hex))[0].toString(16).padStart(2,"0")}}return il.ChannelCrypto=i,il}var Eg;function ev(){if(Eg)return rl;Eg=1,Object.defineProperty(rl,"__esModule",{value:!0}),rl.MeshCoreKeyStore=void 0;const n=eh();class s{constructor(l){this.nodeKeys=new Map,this.channelHashToKeys=new Map,l!=null&&l.channelSecrets&&this.addChannelSecrets(l.channelSecrets),l!=null&&l.nodeKeys&&Object.entries(l.nodeKeys).forEach(([c,u])=>{this.addNodeKey(c,u)})}addNodeKey(l,c){const u=l.toUpperCase();this.nodeKeys.set(u,c)}hasChannelKey(l){const c=l.toLowerCase();return this.channelHashToKeys.has(c)}hasNodeKey(l){const c=l.toUpperCase();return this.nodeKeys.has(c)}getChannelKeys(l){const c=l.toLowerCase();return this.channelHashToKeys.get(c)||[]}getNodeKey(l){const c=l.toUpperCase();return this.nodeKeys.get(c)}addChannelSecrets(l){for(const c of l){const u=n.ChannelCrypto.calculateChannelHash(c).toLowerCase();this.channelHashToKeys.has(u)||this.channelHashToKeys.set(u,[]),this.channelHashToKeys.get(u).push(c)}}}return rl.MeshCoreKeyStore=s,rl}var ol={},Or={};/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const tv={p:0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,n:0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3edn,h:8n,a:0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffecn,d:0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3n,Gx:0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51an,Gy:0x6666666666666666666666666666666666666666666666666666666666666658n},{p:Rn,n:Uu,Gx:kg,Gy:Sg,a:p0,d:m0}=tv,NC=8n,oi=32,wl=64,ur=(n="")=>{throw new Error(n)},FC=n=>typeof n=="bigint",nv=n=>typeof n=="string",LC=n=>n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array",is=(n,s)=>!LC(n)||typeof s=="number"&&s>0&&n.length!==s?ur("Uint8Array expected"):n,_d=n=>new Uint8Array(n),th=n=>Uint8Array.from(n),rv=(n,s)=>n.toString(16).padStart(s,"0"),nh=n=>Array.from(is(n)).map(s=>rv(s,2)).join(""),Pi={_0:48,_9:57,A:65,F:70,a:97,f:102},Bg=n=>{if(n>=Pi._0&&n<=Pi._9)return n-Pi._0;if(n>=Pi.A&&n<=Pi.F)return n-(Pi.A-10);if(n>=Pi.a&&n<=Pi.f)return n-(Pi.a-10)},rh=n=>{const s="hex invalid";if(!nv(n))return ur(s);const i=n.length,l=i/2;if(i%2)return ur(s);const c=_d(l);for(let u=0,p=0;u<l;u++,p+=2){const d=Bg(n.charCodeAt(p)),g=Bg(n.charCodeAt(p+1));if(d===void 0||g===void 0)return ur(s);c[u]=d*16+g}return c},Ao=(n,s)=>is(nv(n)?rh(n):th(is(n)),s),iv=()=>globalThis==null?void 0:globalThis.crypto,MC=()=>{var n;return((n=iv())==null?void 0:n.subtle)??ur("crypto.subtle must be defined")},bl=(...n)=>{const s=_d(n.reduce((l,c)=>l+is(c).length,0));let i=0;return n.forEach(l=>{s.set(l,i),i+=l.length}),s},ov=(n=oi)=>iv().getRandomValues(_d(n)),Ju=BigInt,Jo=(n,s,i,l="bad number: out of range")=>FC(n)&&s<=n&&n<i?n:ur(l),He=(n,s=Rn)=>{const i=n%s;return i>=0n?i:s+i},sv=n=>He(n,Uu),av=(n,s)=>{(n===0n||s<=0n)&&ur("no inverse n="+n+" mod="+s);let i=He(n,s),l=s,c=0n,u=1n;for(;i!==0n;){const p=l/i,d=l%i,g=c-u*p;l=i,i=d,c=u,u=g}return l===1n?He(c,s):ur("no inverse")},IC=n=>{const s=uh[n];return typeof s!="function"&&ur("hashes."+n+" not set"),s},Pg=n=>n instanceof Hr?n:ur("Point expected"),S0=2n**256n,ri=class ri{constructor(s,i,l,c){Wo(this,"ex");Wo(this,"ey");Wo(this,"ez");Wo(this,"et");const u=S0;this.ex=Jo(s,0n,u),this.ey=Jo(i,0n,u),this.ez=Jo(l,1n,u),this.et=Jo(c,0n,u),Object.freeze(this)}static fromAffine(s){return new ri(s.x,s.y,1n,He(s.x*s.y))}static fromBytes(s,i=!1){const l=m0,c=th(is(s,oi)),u=s[31];c[31]=u&-129;const p=ih(c);Jo(p,0n,i?S0:Rn);const g=He(p*p),m=He(g-1n),x=He(l*g+1n);let{isValid:A,value:_}=jC(m,x);A||ur("bad point: y not sqrt");const k=(_&1n)===1n,N=(u&128)!==0;return!i&&_===0n&&N&&ur("bad point: x==0, isLastByteOdd"),N!==k&&(_=He(-_)),new ri(_,p,1n,He(_*p))}assertValidity(){const s=p0,i=m0,l=this;if(l.is0())throw new Error("bad point: ZERO");const{ex:c,ey:u,ez:p,et:d}=l,g=He(c*c),m=He(u*u),x=He(p*p),A=He(x*x),_=He(g*s),k=He(x*He(_+m)),N=He(A+He(i*He(g*m)));if(k!==N)throw new Error("bad point: equation left != right (1)");const C=He(c*u),b=He(p*d);if(C!==b)throw new Error("bad point: equation left != right (2)");return this}equals(s){const{ex:i,ey:l,ez:c}=this,{ex:u,ey:p,ez:d}=Pg(s),g=He(i*d),m=He(u*c),x=He(l*d),A=He(p*c);return g===m&&x===A}is0(){return this.equals(Js)}negate(){return new ri(He(-this.ex),this.ey,this.ez,He(-this.et))}double(){const{ex:s,ey:i,ez:l}=this,c=p0,u=He(s*s),p=He(i*i),d=He(2n*He(l*l)),g=He(c*u),m=s+i,x=He(He(m*m)-u-p),A=g+p,_=A-d,k=g-p,N=He(x*_),C=He(A*k),b=He(x*k),S=He(_*A);return new ri(N,C,S,b)}add(s){const{ex:i,ey:l,ez:c,et:u}=this,{ex:p,ey:d,ez:g,et:m}=Pg(s),x=p0,A=m0,_=He(i*p),k=He(l*d),N=He(u*A*m),C=He(c*g),b=He((i+l)*(p+d)-_-k),S=He(C-N),B=He(C+N),D=He(k-x*_),F=He(b*S),M=He(B*D),z=He(b*D),U=He(S*B);return new ri(F,M,U,z)}multiply(s,i=!0){if(!i&&(s===0n||this.is0()))return Js;if(Jo(s,1n,Uu),s===1n)return this;if(this.equals(Ri))return KC(s).p;let l=Js,c=Ri;for(let u=this;s>0n;u=u.double(),s>>=1n)s&1n?l=l.add(u):i&&(c=c.add(u));return l}toAffine(){const{ex:s,ey:i,ez:l}=this;if(this.equals(Js))return{x:0n,y:1n};const c=av(l,Rn);return He(l*c)!==1n&&ur("invalid inverse"),{x:He(s*c),y:He(i*c)}}toBytes(){const{x:s,y:i}=this.assertValidity().toAffine(),l=lv(i);return l[31]|=s&1n?128:0,l}toHex(){return nh(this.toBytes())}clearCofactor(){return this.multiply(Ju(NC),!1)}isSmallOrder(){return this.clearCofactor().is0()}isTorsionFree(){let s=this.multiply(Uu/2n,!1).double();return Uu%2n&&(s=s.add(this)),s.is0()}static fromHex(s,i){return ri.fromBytes(Ao(s),i)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}toRawBytes(){return this.toBytes()}};Wo(ri,"BASE"),Wo(ri,"ZERO");let Hr=ri;const Ri=new Hr(kg,Sg,1n,He(kg*Sg)),Js=new Hr(0n,1n,1n,0n);Hr.BASE=Ri;Hr.ZERO=Js;const lv=n=>rh(rv(Jo(n,0n,S0),wl)).reverse(),ih=n=>Ju("0x"+nh(th(is(n)).reverse())),ni=(n,s)=>{let i=n;for(;s-- >0n;)i*=i,i%=Rn;return i},OC=n=>{const i=n*n%Rn*n%Rn,l=ni(i,2n)*i%Rn,c=ni(l,1n)*n%Rn,u=ni(c,5n)*c%Rn,p=ni(u,10n)*u%Rn,d=ni(p,20n)*p%Rn,g=ni(d,40n)*d%Rn,m=ni(g,80n)*g%Rn,x=ni(m,80n)*g%Rn,A=ni(x,10n)*u%Rn;return{pow_p_5_8:ni(A,2n)*n%Rn,b2:i}},Tg=0x2b8324804fc1df0b2b4d00993dfbd7a72f431806ad2fe478c4ee1b274a0ea0b0n,jC=(n,s)=>{const i=He(s*s*s),l=He(i*i*s),c=OC(n*l).pow_p_5_8;let u=He(n*i*c);const p=He(s*u*u),d=u,g=He(u*Tg),m=p===n,x=p===He(-n),A=p===He(-n*Tg);return m&&(u=d),(x||A)&&(u=g),(He(u)&1n)===1n&&(u=He(-u)),{isValid:m||x,value:u}},ed=n=>sv(ih(n)),oh=(...n)=>uh.sha512Async(...n),sh=(...n)=>IC("sha512Sync")(...n),cv=n=>{const s=n.slice(0,oi);s[0]&=248,s[31]&=127,s[31]|=64;const i=n.slice(oi,wl),l=ed(s),c=Ri.multiply(l),u=c.toBytes();return{head:s,prefix:i,scalar:l,point:c,pointBytes:u}},ah=n=>oh(Ao(n,oi)).then(cv),lh=n=>cv(sh(Ao(n,oi))),zC=n=>ah(n).then(s=>s.pointBytes),HC=n=>lh(n).pointBytes,uv=n=>oh(n.hashable).then(n.finish),dv=n=>n.finish(sh(n.hashable)),fv=(n,s,i)=>{const{pointBytes:l,scalar:c}=n,u=ed(s),p=Ri.multiply(u).toBytes();return{hashable:bl(p,l,i),finish:m=>{const x=sv(u+ed(m)*c);return is(bl(p,lv(x)),wl)}}},VC=async(n,s)=>{const i=Ao(n),l=await ah(s),c=await oh(l.prefix,i);return uv(fv(l,c,i))},UC=(n,s)=>{const i=Ao(n),l=lh(s),c=sh(l.prefix,i);return dv(fv(l,c,i))},ch={zip215:!0},hv=(n,s,i,l=ch)=>{n=Ao(n,wl),s=Ao(s),i=Ao(i,oi);const{zip215:c}=l;let u,p,d,g,m=Uint8Array.of();try{u=Hr.fromHex(i,c),p=Hr.fromHex(n.slice(0,oi),c),d=ih(n.slice(oi,wl)),g=Ri.multiply(d,!1),m=bl(p.toBytes(),u.toBytes(),s)}catch{}return{hashable:m,finish:A=>{if(g==null||!c&&u.isSmallOrder())return!1;const _=ed(A);return p.add(u.multiply(_,!1)).add(g.negate()).clearCofactor().is0()}}},ZC=async(n,s,i,l=ch)=>uv(hv(n,s,i,l)),WC=(n,s,i,l=ch)=>dv(hv(n,s,i,l)),uh={sha512Async:async(...n)=>{const s=MC(),i=bl(...n);return _d(await s.digest("SHA-512",i.buffer))},sha512Sync:void 0,bytesToHex:nh,hexToBytes:rh,concatBytes:bl,mod:He,invert:av,randomBytes:ov},qC={getExtendedPublicKeyAsync:ah,getExtendedPublicKey:lh,randomPrivateKey:()=>ov(oi),precompute:(n=8,s=Ri)=>(s.multiply(3n),s)},td=8,GC=256,pv=Math.ceil(GC/td)+1,B0=2**(td-1),$C=()=>{const n=[];let s=Ri,i=s;for(let l=0;l<pv;l++){i=s,n.push(i);for(let c=1;c<B0;c++)i=i.add(s),n.push(i);s=i.double()}return n};let Dg;const Rg=(n,s)=>{const i=s.negate();return n?i:s},KC=n=>{const s=Dg||(Dg=$C());let i=Js,l=Ri;const c=2**td,u=c,p=Ju(c-1),d=Ju(td);for(let g=0;g<pv;g++){let m=Number(n&p);n>>=d,m>B0&&(m-=u,n+=1n);const x=g*B0,A=x,_=x+Math.abs(m)-1,k=g%2!==0,N=m<0;m===0?l=l.add(Rg(k,s[A])):i=i.add(Rg(N,s[_]))}return{p:i,f:l}},QC=Object.freeze(Object.defineProperty({__proto__:null,CURVE:tv,ExtendedPoint:Hr,Point:Hr,etc:uh,getPublicKey:HC,getPublicKeyAsync:zC,sign:UC,signAsync:VC,utils:qC,verify:WC,verifyAsync:ZC},Symbol.toStringTag,{value:"Module"})),YC=gx(QC);var Ko={},g0={exports:{}},Ng;function XC(){return Ng||(Ng=1,(function(n,s){var i=(()=>{var c;var l=typeof document<"u"?(c=document.currentScript)==null?void 0:c.src:void 0;return(async function(u={}){var Cn;var p,d=u,g=typeof window=="object",m=typeof WorkerGlobalScope<"u",x=typeof process=="object"&&((Cn=process.versions)==null?void 0:Cn.node)&&process.type!="renderer";typeof __filename<"u"?l=__filename:m&&(l=self.location.href);var A="";function _(xe){return d.locateFile?d.locateFile(xe,A):A+xe}var k,N;if(x){var C=Xu;A=__dirname+"/",N=xe=>{xe=D(xe)?new URL(xe):xe;var Ce=C.readFileSync(xe);return Ce},k=async(xe,Ce=!0)=>{xe=D(xe)?new URL(xe):xe;var Ne=C.readFileSync(xe,Ce?void 0:"utf8");return Ne},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2)}else if(g||m){try{A=new URL(".",l).href}catch{}m&&(N=xe=>{var Ce=new XMLHttpRequest;return Ce.open("GET",xe,!1),Ce.responseType="arraybuffer",Ce.send(null),new Uint8Array(Ce.response)}),k=async xe=>{if(D(xe))return new Promise((Ne,ct)=>{var ie=new XMLHttpRequest;ie.open("GET",xe,!0),ie.responseType="arraybuffer",ie.onload=()=>{if(ie.status==200||ie.status==0&&ie.response){Ne(ie.response);return}ct(ie.status)},ie.onerror=ct,ie.send(null)});var Ce=await fetch(xe,{credentials:"same-origin"});if(Ce.ok)return Ce.arrayBuffer();throw new Error(Ce.status+" : "+Ce.url)}}console.log.bind(console);var b=console.error.bind(console),S,B=!1,D=xe=>xe.startsWith("file://"),F,M,z,U,j,te=!1;function Z(){var xe=z.buffer;d.HEAP8=U=new Int8Array(xe),d.HEAPU8=j=new Uint8Array(xe),d.HEAP32=new Int32Array(xe),d.HEAPU32=new Uint32Array(xe),new BigInt64Array(xe),new BigUint64Array(xe)}function K(){if(d.preRun)for(typeof d.preRun=="function"&&(d.preRun=[d.preRun]);d.preRun.length;)dt(d.preRun.shift());se(We)}function ee(){te=!0,Ft.b()}function G(){if(d.postRun)for(typeof d.postRun=="function"&&(d.postRun=[d.postRun]);d.postRun.length;)Ee(d.postRun.shift());se(he)}var oe=0,J=null;function Y(xe){var Ce;oe++,(Ce=d.monitorRunDependencies)==null||Ce.call(d,oe)}function de(xe){var Ne;if(oe--,(Ne=d.monitorRunDependencies)==null||Ne.call(d,oe),oe==0&&J){var Ce=J;J=null,Ce()}}function W(xe){var Ne;(Ne=d.onAbort)==null||Ne.call(d,xe),xe="Aborted("+xe+")",b(xe),B=!0,xe+=". Build with -sASSERTIONS for more info.";var Ce=new WebAssembly.RuntimeError(xe);throw M==null||M(Ce),Ce}var ae;function H(){return _("orlp-ed25519.wasm")}function P(xe){if(xe==ae&&S)return new Uint8Array(S);if(N)return N(xe);throw"both async and sync fetching of the wasm failed"}async function V(xe){if(!S)try{var Ce=await k(xe);return new Uint8Array(Ce)}catch{}return P(xe)}async function q(xe,Ce){try{var Ne=await V(xe),ct=await WebAssembly.instantiate(Ne,Ce);return ct}catch(ie){b(`failed to asynchronously prepare wasm: ${ie}`),W(ie)}}async function Q(xe,Ce,Ne){if(!xe&&typeof WebAssembly.instantiateStreaming=="function"&&!D(Ce)&&!x)try{var ct=fetch(Ce,{credentials:"same-origin"}),ie=await WebAssembly.instantiateStreaming(ct,Ne);return ie}catch(Ae){b(`wasm streaming compile failed: ${Ae}`),b("falling back to ArrayBuffer instantiation")}return q(Ce,Ne)}function pe(){return{a:Kt}}async function ue(){function xe(Ae,_e){return Ft=Ae.exports,z=Ft.a,Z(),en(Ft),de(),Ft}Y();function Ce(Ae){return xe(Ae.instance)}var Ne=pe();if(d.instantiateWasm)return new Promise((Ae,_e)=>{d.instantiateWasm(Ne,(De,Ye)=>{Ae(xe(De))})});ae??(ae=H());var ct=await Q(S,ae,Ne),ie=Ce(ct);return ie}var se=xe=>{for(;xe.length>0;)xe.shift()(d)},he=[],Ee=xe=>he.push(xe),We=[],dt=xe=>We.push(xe),ot=xe=>pt(xe),Be=()=>sn(),Ie=xe=>{var Ce=d["_"+xe];return Ce},ft=(xe,Ce)=>{U.set(xe,Ce)},Nt=xe=>{for(var Ce=0,Ne=0;Ne<xe.length;++Ne){var ct=xe.charCodeAt(Ne);ct<=127?Ce++:ct<=2047?Ce+=2:ct>=55296&&ct<=57343?(Ce+=4,++Ne):Ce+=3}return Ce},lt=(xe,Ce,Ne,ct)=>{if(!(ct>0))return 0;for(var ie=Ne,Ae=Ne+ct-1,_e=0;_e<xe.length;++_e){var De=xe.codePointAt(_e);if(De<=127){if(Ne>=Ae)break;Ce[Ne++]=De}else if(De<=2047){if(Ne+1>=Ae)break;Ce[Ne++]=192|De>>6,Ce[Ne++]=128|De&63}else if(De<=65535){if(Ne+2>=Ae)break;Ce[Ne++]=224|De>>12,Ce[Ne++]=128|De>>6&63,Ce[Ne++]=128|De&63}else{if(Ne+3>=Ae)break;Ce[Ne++]=240|De>>18,Ce[Ne++]=128|De>>12&63,Ce[Ne++]=128|De>>6&63,Ce[Ne++]=128|De&63,_e++}}return Ce[Ne]=0,Ne-ie},Qe=(xe,Ce,Ne)=>lt(xe,j,Ce,Ne),qe=xe=>Ut(xe),et=xe=>{var Ce=Nt(xe)+1,Ne=qe(Ce);return Qe(xe,Ne,Ce),Ne},rt=typeof TextDecoder<"u"?new TextDecoder:void 0,Ue=(xe,Ce=0,Ne=NaN)=>{for(var ct=Ce+Ne,ie=Ce;xe[ie]&&!(ie>=ct);)++ie;if(ie-Ce>16&&xe.buffer&&rt)return rt.decode(xe.subarray(Ce,ie));for(var Ae="";Ce<ie;){var _e=xe[Ce++];if(!(_e&128)){Ae+=String.fromCharCode(_e);continue}var De=xe[Ce++]&63;if((_e&224)==192){Ae+=String.fromCharCode((_e&31)<<6|De);continue}var Ye=xe[Ce++]&63;if((_e&240)==224?_e=(_e&15)<<12|De<<6|Ye:_e=(_e&7)<<18|De<<12|Ye<<6|xe[Ce++]&63,_e<65536)Ae+=String.fromCharCode(_e);else{var Fe=_e-65536;Ae+=String.fromCharCode(55296|Fe>>10,56320|Fe&1023)}}return Ae},kt=(xe,Ce)=>xe?Ue(j,xe,Ce):"",$t=(xe,Ce,Ne,ct,ie)=>{var Ae={string:ut=>{var Pt=0;return ut!=null&&ut!==0&&(Pt=et(ut)),Pt},array:ut=>{var Pt=qe(ut.length);return ft(ut,Pt),Pt}};function _e(ut){return Ce==="string"?kt(ut):Ce==="boolean"?!!ut:ut}var De=Ie(xe),Ye=[],Fe=0;if(ct)for(var wt=0;wt<ct.length;wt++){var Rt=Ae[Ne[wt]];Rt?(Fe===0&&(Fe=Be()),Ye[wt]=Rt(ct[wt])):Ye[wt]=ct[wt]}var zt=De(...Ye);function Hn(ut){return Fe!==0&&ot(Fe),_e(ut)}return zt=Hn(zt),zt},Pe=(xe,Ce,Ne,ct)=>{var ie=!Ne||Ne.every(_e=>_e==="number"||_e==="boolean"),Ae=Ce!=="string";return Ae&&ie&&!ct?Ie(xe):(..._e)=>$t(xe,Ce,Ne,_e)};d.noExitRuntime&&d.noExitRuntime,d.print&&d.print,d.printErr&&(b=d.printErr),d.wasmBinary&&(S=d.wasmBinary),d.arguments&&d.arguments,d.thisProgram&&d.thisProgram,d.ccall=$t,d.cwrap=Pe;var pt,Ut,sn;function en(xe){d._orlp_derive_public_key=xe.c,d._orlp_validate_keypair=xe.d,d._orlp_sign=xe.e,d._orlp_verify=xe.f,pt=xe.g,Ut=xe.h,sn=xe.i}var Kt={},Ft=await ue();function Qt(){if(oe>0){J=Qt;return}if(K(),oe>0){J=Qt;return}function xe(){var Ce;d.calledRun=!0,!B&&(ee(),F==null||F(d),(Ce=d.onRuntimeInitialized)==null||Ce.call(d),G())}d.setStatus?(d.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>d.setStatus(""),1),xe()},1)):xe()}function Yn(){if(d.preInit)for(typeof d.preInit=="function"&&(d.preInit=[d.preInit]);d.preInit.length>0;)d.preInit.shift()()}return Yn(),Qt(),te?p=d:p=new Promise((xe,Ce)=>{F=xe,M=Ce}),p})})();n.exports=i,n.exports.default=i})(g0)),g0.exports}var Fg;function dh(){if(Fg)return Ko;Fg=1,Object.defineProperty(Ko,"__esModule",{value:!0}),Ko.derivePublicKey=l,Ko.validateKeyPair=c,Ko.sign=u,Ko.verify=p;const n=bn(),s=XC();async function i(){return await s()}async function l(d){const g=await i(),m=(0,n.hexToBytes)(d);if(m.length!==64)throw new Error(`Invalid private key length: expected 64 bytes, got ${m.length}`);const x=1024,A=1088;if(g.HEAPU8.set(m,x),g.ccall("orlp_derive_public_key","number",["number","number"],[A,x])!==0)throw new Error("orlp key derivation failed: invalid private key");const k=new Uint8Array(32);return k.set(g.HEAPU8.subarray(A,A+32)),(0,n.bytesToHex)(k)}async function c(d,g){try{const m=await i(),x=(0,n.hexToBytes)(d),A=(0,n.hexToBytes)(g);if(x.length!==64||A.length!==32)return!1;const _=2048,k=2112;return m.HEAPU8.set(x,_),m.HEAPU8.set(A,k),m.ccall("orlp_validate_keypair","number",["number","number"],[k,_])===1}catch{return!1}}async function u(d,g,m){const x=await i(),A=(0,n.hexToBytes)(d),_=(0,n.hexToBytes)(g),k=(0,n.hexToBytes)(m);if(_.length!==64)throw new Error(`Invalid private key length: expected 64 bytes, got ${_.length}`);if(k.length!==32)throw new Error(`Invalid public key length: expected 32 bytes, got ${k.length}`);const N=1e5,C=2e5,b=3e5,S=4e5;x.HEAPU8.set(A,N),x.HEAPU8.set(_,C),x.HEAPU8.set(k,b),x.ccall("orlp_sign","void",["number","number","number","number","number"],[S,N,A.length,b,C]);const B=new Uint8Array(64);return B.set(x.HEAPU8.subarray(S,S+64)),(0,n.bytesToHex)(B)}async function p(d,g,m){try{const x=await i(),A=(0,n.hexToBytes)(d),_=(0,n.hexToBytes)(g),k=(0,n.hexToBytes)(m);if(A.length!==64||k.length!==32)return!1;const N=5e5,C=6e5,b=7e5;return x.HEAPU8.set(A,C),x.HEAPU8.set(_,N),x.HEAPU8.set(k,b),x.ccall("orlp_verify","number",["number","number","number","number"],[C,N,_.length,b])===1}catch{return!1}}return Ko}var Lg;function mv(){if(Lg)return Or;Lg=1;var n=Or&&Or.__createBinding||(Object.create?(function(m,x,A,_){_===void 0&&(_=A);var k=Object.getOwnPropertyDescriptor(x,A);(!k||("get"in k?!x.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return x[A]}}),Object.defineProperty(m,_,k)}):(function(m,x,A,_){_===void 0&&(_=A),m[_]=x[A]})),s=Or&&Or.__setModuleDefault||(Object.create?(function(m,x){Object.defineProperty(m,"default",{enumerable:!0,value:x})}):function(m,x){m.default=x}),i=Or&&Or.__importStar||(function(){var m=function(x){return m=Object.getOwnPropertyNames||function(A){var _=[];for(var k in A)Object.prototype.hasOwnProperty.call(A,k)&&(_[_.length]=k);return _},m(x)};return function(x){if(x&&x.__esModule)return x;var A={};if(x!=null)for(var _=m(x),k=0;k<_.length;k++)_[k]!=="default"&&n(A,x,_[k]);return s(A,x),A}})();Object.defineProperty(Or,"__esModule",{value:!0}),Or.Ed25519SignatureVerifier=void 0;const l=i(YC),c=bn(),u=dh();async function p(m){if(typeof globalThis<"u"&&globalThis.crypto&&globalThis.crypto.subtle){const x=await globalThis.crypto.subtle.digest("SHA-512",m);return new Uint8Array(x)}if(typeof k0<"u")try{const{createHash:x}=Xu;return x("sha512").update(m).digest()}catch{}throw new Error("No SHA-512 implementation available")}function d(m){if(typeof k0<"u")try{const{createHash:x}=Xu;return x("sha512").update(m).digest()}catch{}try{const x=JA(),A=x.lib.WordArray.create(m),_=x.SHA512(A),k=new Uint8Array(64);for(let N=0;N<16;N++){const C=_.words[N]||0;k[N*4]=C>>>24&255,k[N*4+1]=C>>>16&255,k[N*4+2]=C>>>8&255,k[N*4+3]=C&255}return k}catch{throw new Error("No SHA-512 implementation available for synchronous operation")}}l.etc.sha512Async=p;try{l.etc.sha512Sync=d}catch(m){console.debug("Could not set up synchronous SHA-512:",m)}class g{static async verifyAdvertisementSignature(x,A,_,k){try{const N=(0,c.hexToBytes)(x),C=(0,c.hexToBytes)(A),b=(0,c.hexToBytes)(k),S=this.constructAdvertSignedMessage(x,_,b);return await l.verify(C,S,N)}catch(N){return console.error("Ed25519 signature verification failed:",N),!1}}static constructAdvertSignedMessage(x,A,_){const k=(0,c.hexToBytes)(x),N=new Uint8Array(4);N[0]=A&255,N[1]=A>>8&255,N[2]=A>>16&255,N[3]=A>>24&255;const C=new Uint8Array(36+_.length);return C.set(k,0),C.set(N,32),C.set(_,36),C}static getSignedMessageDescription(x,A,_){return`Public Key: ${x} + Timestamp: ${A} (${new Date(A*1e3).toISOString()}) + App Data: ${_}`}static getSignedMessageHex(x,A,_){const k=(0,c.hexToBytes)(_),N=this.constructAdvertSignedMessage(x,A,k);return(0,c.bytesToHex)(N)}static async derivePublicKey(x){try{const A=(0,c.hexToBytes)(x);if(A.length!==64)throw new Error(`Invalid private key length: expected 64 bytes, got ${A.length}`);return await(0,u.derivePublicKey)(x)}catch(A){throw new Error(`Failed to derive public key: ${A instanceof Error?A.message:"Unknown error"}`)}}static derivePublicKeySync(x){try{const A=(0,c.hexToBytes)(x);throw A.length!==64?new Error(`Invalid private key length: expected 64 bytes, got ${A.length}`):new Error("Synchronous key derivation not supported with WASM. Use derivePublicKey() instead.")}catch(A){throw new Error(`Failed to derive public key: ${A instanceof Error?A.message:"Unknown error"}`)}}static async validateKeyPair(x,A){try{return await(0,u.validateKeyPair)(x,A)}catch{return!1}}}return Or.Ed25519SignatureVerifier=g,Or}var Mg;function JC(){if(Mg)return ol;Mg=1,Object.defineProperty(ol,"__esModule",{value:!0}),ol.AdvertPayloadDecoder=void 0;const n=dr(),s=bn(),i=_l(),l=mv();class c{static decode(p,d){try{if(p.length<101){const S={type:n.PayloadType.Advert,version:n.PayloadVersion.Version1,isValid:!1,errors:["Advertisement payload too short"],publicKey:"",timestamp:0,signature:"",appData:{flags:0,deviceRole:n.DeviceRole.ChatNode,hasLocation:!1,hasName:!1}};return d!=null&&d.includeSegments&&(S.segments=[{name:"Invalid Advert Data",description:"Advert payload too short (minimum 101 bytes required)",startByte:d.segmentOffset||0,endByte:(d.segmentOffset||0)+p.length-1,value:(0,s.bytesToHex)(p)}]),S}const g=[],m=(d==null?void 0:d.segmentOffset)||0;let x=0;const A=(0,s.bytesToHex)(p.subarray(x,x+32));d!=null&&d.includeSegments&&g.push({name:"Public Key",description:"Ed25519 public key",startByte:m+x,endByte:m+x+31,value:A}),x+=32;const _=this.readUint32LE(p,x);if(d!=null&&d.includeSegments){const S=new Date(_*1e3);g.push({name:"Timestamp",description:`${_} (${S.toISOString().slice(0,19)}Z)`,startByte:m+x,endByte:m+x+3,value:(0,s.bytesToHex)(p.subarray(x,x+4))})}x+=4;const k=(0,s.bytesToHex)(p.subarray(x,x+64));d!=null&&d.includeSegments&&g.push({name:"Signature",description:"Ed25519 signature",startByte:m+x,endByte:m+x+63,value:k}),x+=64;const N=p[x];if(d!=null&&d.includeSegments){const S=N.toString(2).padStart(8,"0"),B=this.parseDeviceRole(N),F=` | Bits 0-3 (Role): ${(0,i.getDeviceRoleName)(B)} | Bit 4 (Location): ${N&n.AdvertFlags.HasLocation?"Yes":"No"} | Bit 7 (Name): ${N&n.AdvertFlags.HasName?"Yes":"No"}`;g.push({name:"App Flags",description:`Binary: ${S}${F}`,startByte:m+x,endByte:m+x,value:N.toString(16).padStart(2,"0").toUpperCase()})}x+=1;const C={type:n.PayloadType.Advert,version:n.PayloadVersion.Version1,isValid:!0,publicKey:A,timestamp:_,signature:k,appData:{flags:N,deviceRole:this.parseDeviceRole(N),hasLocation:!!(N&n.AdvertFlags.HasLocation),hasName:!!(N&n.AdvertFlags.HasName)}};let b=x;if(N&n.AdvertFlags.HasLocation&&p.length>=b+8){const S=this.readInt32LE(p,b)/1e6,B=this.readInt32LE(p,b+4)/1e6;C.appData.location={latitude:Math.round(S*1e6)/1e6,longitude:Math.round(B*1e6)/1e6},d!=null&&d.includeSegments&&(g.push({name:"Latitude",description:`${S} (${S})`,startByte:m+b,endByte:m+b+3,value:(0,s.bytesToHex)(p.subarray(b,b+4))}),g.push({name:"Longitude",description:`${B} (${B})`,startByte:m+b+4,endByte:m+b+7,value:(0,s.bytesToHex)(p.subarray(b+4,b+8))})),b+=8}if(N&n.AdvertFlags.HasFeature1&&(b+=2),N&n.AdvertFlags.HasFeature2&&(b+=2),N&n.AdvertFlags.HasName&&p.length>b){const S=p.subarray(b),B=new TextDecoder("utf-8").decode(S).replace(/\0.*$/,"");C.appData.name=this.sanitizeControlCharacters(B)||B,d!=null&&d.includeSegments&&g.push({name:"Node Name",description:`Node name: "${C.appData.name}"`,startByte:m+b,endByte:m+p.length-1,value:(0,s.bytesToHex)(S)})}return d!=null&&d.includeSegments&&(C.segments=g),C}catch(g){return{type:n.PayloadType.Advert,version:n.PayloadVersion.Version1,isValid:!1,errors:[g instanceof Error?g.message:"Failed to decode advertisement payload"],publicKey:"",timestamp:0,signature:"",appData:{flags:0,deviceRole:n.DeviceRole.ChatNode,hasLocation:!1,hasName:!1}}}}static async decodeWithVerification(p,d){const g=this.decode(p,d);if(!g||!g.isValid)return g;try{const x=p.subarray(100),A=(0,s.bytesToHex)(x),_=await l.Ed25519SignatureVerifier.verifyAdvertisementSignature(g.publicKey,g.signature,g.timestamp,A);g.signatureValid=_,_||(g.signatureError="Ed25519 signature verification failed",g.isValid=!1,g.errors||(g.errors=[]),g.errors.push("Invalid Ed25519 signature"))}catch(m){g.signatureValid=!1,g.signatureError=m instanceof Error?m.message:"Signature verification error",g.isValid=!1,g.errors||(g.errors=[]),g.errors.push("Signature verification failed: "+(m instanceof Error?m.message:"Unknown error"))}return g}static parseDeviceRole(p){switch(p&15){case 1:return n.DeviceRole.ChatNode;case 2:return n.DeviceRole.Repeater;case 3:return n.DeviceRole.RoomServer;case 4:return n.DeviceRole.Sensor;default:return n.DeviceRole.ChatNode}}static readUint32LE(p,d){return p[d]|p[d+1]<<8|p[d+2]<<16|p[d+3]<<24}static readInt32LE(p,d){const g=this.readUint32LE(p,d);return g>2147483647?g-4294967296:g}static sanitizeControlCharacters(p){return p&&p.trim().replace(/[\x00-\x1F\x7F]/g,"")||null}}return ol.AdvertPayloadDecoder=c,ol}var sl={},Ig;function eE(){if(Ig)return sl;Ig=1,Object.defineProperty(sl,"__esModule",{value:!0}),sl.TracePayloadDecoder=void 0;const n=dr(),s=bn();class i{static decode(c,u,p){try{if(c.length<9){const B={type:n.PayloadType.Trace,version:n.PayloadVersion.Version1,isValid:!1,errors:["Trace payload too short (need at least tag(4) + auth(4) + flags(1))"],traceTag:"00000000",authCode:0,flags:0,pathHashes:[]};return p!=null&&p.includeSegments&&(B.segments=[{name:"Invalid Trace Data",description:"Trace payload too short (minimum 9 bytes required)",startByte:p.segmentOffset||0,endByte:(p.segmentOffset||0)+c.length-1,value:(0,s.bytesToHex)(c)}]),B}let d=0;const g=[],m=(p==null?void 0:p.segmentOffset)||0,x=this.readUint32LE(c,d),A=(0,s.numberToHex)(x,8);p!=null&&p.includeSegments&&g.push({name:"Trace Tag",description:`Unique identifier for this trace: 0x${x.toString(16).padStart(8,"0")}`,startByte:m+d,endByte:m+d+3,value:(0,s.bytesToHex)(c.slice(d,d+4))}),d+=4;const _=this.readUint32LE(c,d);p!=null&&p.includeSegments&&g.push({name:"Auth Code",description:`Authentication/verification code: ${_}`,startByte:m+d,endByte:m+d+3,value:(0,s.bytesToHex)(c.slice(d,d+4))}),d+=4;const k=c[d];p!=null&&p.includeSegments&&g.push({name:"Flags",description:`Application-defined control flags: 0x${k.toString(16).padStart(2,"0")} (${k.toString(2).padStart(8,"0")}b)`,startByte:m+d,endByte:m+d,value:k.toString(16).padStart(2,"0").toUpperCase()}),d+=1;const N=[],C=d;for(;d<c.length;)N.push((0,s.byteToHex)(c[d])),d++;if(p!=null&&p.includeSegments&&N.length>0){const B=N.join(" ");g.push({name:"Path Hashes",description:`Node hashes in trace path: ${B}`,startByte:m+C,endByte:m+c.length-1,value:(0,s.bytesToHex)(c.slice(C))})}let b;u&&u.length>0&&(b=u.map(B=>{const D=parseInt(B,16);return(D>127?D-256:D)/4}));const S={type:n.PayloadType.Trace,version:n.PayloadVersion.Version1,isValid:!0,traceTag:A,authCode:_,flags:k,pathHashes:N,snrValues:b};return p!=null&&p.includeSegments&&(S.segments=g),S}catch(d){return{type:n.PayloadType.Trace,version:n.PayloadVersion.Version1,isValid:!1,errors:[d instanceof Error?d.message:"Failed to decode trace payload"],traceTag:"00000000",authCode:0,flags:0,pathHashes:[]}}}static readUint32LE(c,u){return c[u]|c[u+1]<<8|c[u+2]<<16|c[u+3]<<24}}return sl.TracePayloadDecoder=i,sl}var al={},Og;function tE(){if(Og)return al;Og=1,Object.defineProperty(al,"__esModule",{value:!0}),al.GroupTextPayloadDecoder=void 0;const n=dr(),s=eh(),i=bn();class l{static decode(u,p){try{if(u.length<3){const N={type:n.PayloadType.GroupText,version:n.PayloadVersion.Version1,isValid:!1,errors:["GroupText payload too short (need at least channel_hash(1) + MAC(2))"],channelHash:"",cipherMac:"",ciphertext:"",ciphertextLength:0};return p!=null&&p.includeSegments&&(N.segments=[{name:"Invalid GroupText Data",description:"GroupText payload too short (minimum 3 bytes required)",startByte:p.segmentOffset||0,endByte:(p.segmentOffset||0)+u.length-1,value:(0,i.bytesToHex)(u)}]),N}const d=[],g=(p==null?void 0:p.segmentOffset)||0;let m=0;const x=(0,i.byteToHex)(u[m]);p!=null&&p.includeSegments&&d.push({name:"Channel Hash",description:"First byte of SHA256 of channel's shared key",startByte:g+m,endByte:g+m,value:x}),m+=1;const A=(0,i.bytesToHex)(u.subarray(m,m+2));p!=null&&p.includeSegments&&d.push({name:"Cipher MAC",description:"MAC for encrypted data",startByte:g+m,endByte:g+m+1,value:A}),m+=2;const _=(0,i.bytesToHex)(u.subarray(m));p!=null&&p.includeSegments&&u.length>m&&d.push({name:"Ciphertext",description:"Encrypted message content (timestamp + flags + message)",startByte:g+m,endByte:g+u.length-1,value:_});const k={type:n.PayloadType.GroupText,version:n.PayloadVersion.Version1,isValid:!0,channelHash:x,cipherMac:A,ciphertext:_,ciphertextLength:u.length-3};if(p!=null&&p.keyStore&&p.keyStore.hasChannelKey(x)){const N=p.keyStore.getChannelKeys(x);for(const C of N){const b=s.ChannelCrypto.decryptGroupTextMessage(_,A,C);if(b.success&&b.data){k.decrypted={timestamp:b.data.timestamp,flags:b.data.flags,sender:b.data.sender,message:b.data.message};break}}}return p!=null&&p.includeSegments&&(k.segments=d),k}catch(d){return{type:n.PayloadType.GroupText,version:n.PayloadVersion.Version1,isValid:!1,errors:[d instanceof Error?d.message:"Failed to decode GroupText payload"],channelHash:"",cipherMac:"",ciphertext:"",ciphertextLength:0}}}}return al.GroupTextPayloadDecoder=l,al}var ll={},jg;function nE(){if(jg)return ll;jg=1,Object.defineProperty(ll,"__esModule",{value:!0}),ll.RequestPayloadDecoder=void 0;const n=dr(),s=bn();class i{static decode(c,u){try{if(c.length<4){const N={type:n.PayloadType.Request,version:n.PayloadVersion.Version1,isValid:!1,errors:["Request payload too short (minimum 4 bytes: dest hash + source hash + MAC)"],timestamp:0,requestType:n.RequestType.GetStats,requestData:"",destinationHash:"",sourceHash:"",cipherMac:"",ciphertext:""};return u!=null&&u.includeSegments&&(N.segments=[{name:"Invalid Request Data",description:"Request payload too short (minimum 4 bytes required: 1 for dest hash + 1 for source hash + 2 for MAC)",startByte:u.segmentOffset||0,endByte:(u.segmentOffset||0)+c.length-1,value:(0,s.bytesToHex)(c)}]),N}const p=[],d=(u==null?void 0:u.segmentOffset)||0;let g=0;const m=(0,s.bytesToHex)(c.subarray(g,g+1));u!=null&&u.includeSegments&&p.push({name:"Destination Hash",description:`First byte of destination node public key: 0x${m}`,startByte:d+g,endByte:d+g,value:m}),g+=1;const x=(0,s.bytesToHex)(c.subarray(g,g+1));u!=null&&u.includeSegments&&p.push({name:"Source Hash",description:`First byte of source node public key: 0x${x}`,startByte:d+g,endByte:d+g,value:x}),g+=1;const A=(0,s.bytesToHex)(c.subarray(g,g+2));u!=null&&u.includeSegments&&p.push({name:"Cipher MAC",description:"MAC for encrypted data verification (2 bytes)",startByte:d+g,endByte:d+g+1,value:A}),g+=2;const _=(0,s.bytesToHex)(c.subarray(g));u!=null&&u.includeSegments&&c.length>g&&p.push({name:"Ciphertext",description:`Encrypted message data (${c.length-g} bytes). Contains encrypted plaintext with this structure:
 Timestamp (4 bytes) - send time as unix timestamp
 Request Type (1 byte) - type of request (GetStats, GetTelemetryData, etc.)
 Request Data (remaining bytes) - additional request-specific data`,startByte:d+g,endByte:d+c.length-1,value:_});const k={type:n.PayloadType.Request,version:n.PayloadVersion.Version1,isValid:!0,timestamp:0,requestType:n.RequestType.GetStats,requestData:"",destinationHash:m,sourceHash:x,cipherMac:A,ciphertext:_};return u!=null&&u.includeSegments&&(k.segments=p),k}catch(p){return{type:n.PayloadType.Request,version:n.PayloadVersion.Version1,isValid:!1,errors:[p instanceof Error?p.message:"Failed to decode request payload"],timestamp:0,requestType:n.RequestType.GetStats,requestData:"",destinationHash:"",sourceHash:"",cipherMac:"",ciphertext:""}}}}return ll.RequestPayloadDecoder=i,ll}var cl={},zg;function rE(){if(zg)return cl;zg=1,Object.defineProperty(cl,"__esModule",{value:!0}),cl.ResponsePayloadDecoder=void 0;const n=dr(),s=bn();class i{static decode(c,u){try{if(c.length<4){const N={type:n.PayloadType.Response,version:n.PayloadVersion.Version1,isValid:!1,errors:["Response payload too short (minimum 4 bytes: dest + source + MAC)"],destinationHash:"",sourceHash:"",cipherMac:"",ciphertext:"",ciphertextLength:0};return u!=null&&u.includeSegments&&(N.segments=[{name:"Invalid Response Data",description:"Response payload too short (minimum 4 bytes required)",startByte:u.segmentOffset||0,endByte:(u.segmentOffset||0)+c.length-1,value:(0,s.bytesToHex)(c)}]),N}const p=[],d=(u==null?void 0:u.segmentOffset)||0;let g=0;const m=(0,s.byteToHex)(c[g]);u!=null&&u.includeSegments&&p.push({name:"Destination Hash",description:"First byte of destination node public key",startByte:d+g,endByte:d+g,value:m}),g+=1;const x=(0,s.byteToHex)(c[g]);u!=null&&u.includeSegments&&p.push({name:"Source Hash",description:"First byte of source node public key",startByte:d+g,endByte:d+g,value:x}),g+=1;const A=(0,s.bytesToHex)(c.subarray(g,g+2));u!=null&&u.includeSegments&&p.push({name:"Cipher MAC",description:"MAC for encrypted data in next field",startByte:d+g,endByte:d+g+1,value:A}),g+=2;const _=(0,s.bytesToHex)(c.subarray(g));u!=null&&u.includeSegments&&c.length>g&&p.push({name:"Ciphertext",description:"Encrypted response data (tag + content)",startByte:d+g,endByte:d+c.length-1,value:_});const k={type:n.PayloadType.Response,version:n.PayloadVersion.Version1,isValid:!0,destinationHash:m,sourceHash:x,cipherMac:A,ciphertext:_,ciphertextLength:c.length-4};return u!=null&&u.includeSegments&&(k.segments=p),k}catch(p){return{type:n.PayloadType.Response,version:n.PayloadVersion.Version1,isValid:!1,errors:[p instanceof Error?p.message:"Failed to decode response payload"],destinationHash:"",sourceHash:"",cipherMac:"",ciphertext:"",ciphertextLength:0}}}}return cl.ResponsePayloadDecoder=i,cl}var ul={},Hg;function iE(){if(Hg)return ul;Hg=1,Object.defineProperty(ul,"__esModule",{value:!0}),ul.AnonRequestPayloadDecoder=void 0;const n=dr(),s=bn();class i{static decode(c,u){try{if(c.length<35){const N={type:n.PayloadType.AnonRequest,version:n.PayloadVersion.Version1,isValid:!1,errors:["AnonRequest payload too short (minimum 35 bytes: dest + public key + MAC)"],destinationHash:"",senderPublicKey:"",cipherMac:"",ciphertext:"",ciphertextLength:0};return u!=null&&u.includeSegments&&(N.segments=[{name:"Invalid AnonRequest Data",description:"AnonRequest payload too short (minimum 35 bytes required: 1 for dest hash + 32 for public key + 2 for MAC)",startByte:u.segmentOffset||0,endByte:(u.segmentOffset||0)+c.length-1,value:(0,s.bytesToHex)(c)}]),N}const p=[],d=(u==null?void 0:u.segmentOffset)||0;let g=0;const m=(0,s.byteToHex)(c[0]);u!=null&&u.includeSegments&&p.push({name:"Destination Hash",description:`First byte of destination node public key: 0x${m}`,startByte:d+g,endByte:d+g,value:m}),g+=1;const x=(0,s.bytesToHex)(c.subarray(1,33));u!=null&&u.includeSegments&&p.push({name:"Sender Public Key",description:"Ed25519 public key of the sender (32 bytes)",startByte:d+g,endByte:d+g+31,value:x}),g+=32;const A=(0,s.bytesToHex)(c.subarray(33,35));u!=null&&u.includeSegments&&p.push({name:"Cipher MAC",description:"MAC for encrypted data verification (2 bytes)",startByte:d+g,endByte:d+g+1,value:A}),g+=2;const _=(0,s.bytesToHex)(c.subarray(35));u!=null&&u.includeSegments&&c.length>35&&p.push({name:"Ciphertext",description:`Encrypted message data (${c.length-35} bytes). Contains encrypted plaintext with this structure:
 Timestamp (4 bytes) - send time as unix timestamp
 Sync Timestamp (4 bytes) - room server only, sender's "sync messages SINCE x" timestamp  
 Password (remaining bytes) - password for repeater/room`,startByte:d+g,endByte:d+c.length-1,value:_});const k={type:n.PayloadType.AnonRequest,version:n.PayloadVersion.Version1,isValid:!0,destinationHash:m,senderPublicKey:x,cipherMac:A,ciphertext:_,ciphertextLength:c.length-35};return u!=null&&u.includeSegments&&(k.segments=p),k}catch(p){return{type:n.PayloadType.AnonRequest,version:n.PayloadVersion.Version1,isValid:!1,errors:[p instanceof Error?p.message:"Failed to decode AnonRequest payload"],destinationHash:"",senderPublicKey:"",cipherMac:"",ciphertext:"",ciphertextLength:0}}}}return ul.AnonRequestPayloadDecoder=i,ul}var dl={},Vg;function oE(){if(Vg)return dl;Vg=1,Object.defineProperty(dl,"__esModule",{value:!0}),dl.AckPayloadDecoder=void 0;const n=dr(),s=bn();class i{static decode(c,u){try{if(c.length<4){const x={type:n.PayloadType.Ack,version:n.PayloadVersion.Version1,isValid:!1,errors:["Ack payload too short (minimum 4 bytes for checksum)"],checksum:""};return u!=null&&u.includeSegments&&(x.segments=[{name:"Invalid Ack Data",description:"Ack payload too short (minimum 4 bytes required for checksum)",startByte:u.segmentOffset||0,endByte:(u.segmentOffset||0)+c.length-1,value:(0,s.bytesToHex)(c)}]),x}const p=[],d=(u==null?void 0:u.segmentOffset)||0,g=(0,s.bytesToHex)(c.subarray(0,4));u!=null&&u.includeSegments&&p.push({name:"Checksum",description:`CRC checksum of message timestamp, text, and sender pubkey: 0x${g}`,startByte:d,endByte:d+3,value:g}),u!=null&&u.includeSegments&&c.length>4&&p.push({name:"Additional Data",description:"Extra data in Ack payload",startByte:d+4,endByte:d+c.length-1,value:(0,s.bytesToHex)(c.subarray(4))});const m={type:n.PayloadType.Ack,version:n.PayloadVersion.Version1,isValid:!0,checksum:g};return u!=null&&u.includeSegments&&(m.segments=p),m}catch(p){return{type:n.PayloadType.Ack,version:n.PayloadVersion.Version1,isValid:!1,errors:[p instanceof Error?p.message:"Failed to decode Ack payload"],checksum:""}}}}return dl.AckPayloadDecoder=i,dl}var fl={},Ug;function sE(){if(Ug)return fl;Ug=1,Object.defineProperty(fl,"__esModule",{value:!0}),fl.PathPayloadDecoder=void 0;const n=dr(),s=bn();class i{static decode(c){try{if(c.length<2)return{type:n.PayloadType.Path,version:n.PayloadVersion.Version1,isValid:!1,errors:["Path payload too short (minimum 2 bytes: path length + extra type)"],pathLength:0,pathHashes:[],extraType:0,extraData:""};const u=c[0];if(c.length<1+u+1)return{type:n.PayloadType.Path,version:n.PayloadVersion.Version1,isValid:!1,errors:[`Path payload too short (need ${1+u+1} bytes for path length + path + extra type)`],pathLength:u,pathHashes:[],extraType:0,extraData:""};const p=[];for(let m=0;m<u;m++)p.push((0,s.byteToHex)(c[1+m]));const d=c[1+u];let g="";return c.length>1+u+1&&(g=(0,s.bytesToHex)(c.subarray(1+u+1))),{type:n.PayloadType.Path,version:n.PayloadVersion.Version1,isValid:!0,pathLength:u,pathHashes:p,extraType:d,extraData:g}}catch(u){return{type:n.PayloadType.Path,version:n.PayloadVersion.Version1,isValid:!1,errors:[u instanceof Error?u.message:"Failed to decode Path payload"],pathLength:0,pathHashes:[],extraType:0,extraData:""}}}}return fl.PathPayloadDecoder=i,fl}var hl={},Zg;function aE(){if(Zg)return hl;Zg=1,Object.defineProperty(hl,"__esModule",{value:!0}),hl.TextMessagePayloadDecoder=void 0;const n=dr(),s=bn();class i{static decode(c,u){try{if(c.length<4){const N={type:n.PayloadType.TextMessage,version:n.PayloadVersion.Version1,isValid:!1,errors:["TextMessage payload too short (minimum 4 bytes: dest + source + MAC)"],destinationHash:"",sourceHash:"",cipherMac:"",ciphertext:"",ciphertextLength:0};return u!=null&&u.includeSegments&&(N.segments=[{name:"Invalid TextMessage Data",description:"TextMessage payload too short (minimum 4 bytes required)",startByte:u.segmentOffset||0,endByte:(u.segmentOffset||0)+c.length-1,value:(0,s.bytesToHex)(c)}]),N}const p=[],d=(u==null?void 0:u.segmentOffset)||0;let g=0;const m=(0,s.byteToHex)(c[g]);u!=null&&u.includeSegments&&p.push({name:"Destination Hash",description:"First byte of destination node public key",startByte:d+g,endByte:d+g,value:m}),g+=1;const x=(0,s.byteToHex)(c[g]);u!=null&&u.includeSegments&&p.push({name:"Source Hash",description:"First byte of source node public key",startByte:d+g,endByte:d+g,value:x}),g+=1;const A=(0,s.bytesToHex)(c.subarray(g,g+2));u!=null&&u.includeSegments&&p.push({name:"Cipher MAC",description:"MAC for encrypted data in next field",startByte:d+g,endByte:d+g+1,value:A}),g+=2;const _=(0,s.bytesToHex)(c.subarray(g));u!=null&&u.includeSegments&&c.length>g&&p.push({name:"Ciphertext",description:"Encrypted message data (timestamp + message text)",startByte:d+g,endByte:d+c.length-1,value:_});const k={type:n.PayloadType.TextMessage,version:n.PayloadVersion.Version1,isValid:!0,destinationHash:m,sourceHash:x,cipherMac:A,ciphertext:_,ciphertextLength:c.length-4};return u!=null&&u.includeSegments&&(k.segments=p),k}catch(p){return{type:n.PayloadType.TextMessage,version:n.PayloadVersion.Version1,isValid:!1,errors:[p instanceof Error?p.message:"Failed to decode TextMessage payload"],destinationHash:"",sourceHash:"",cipherMac:"",ciphertext:"",ciphertextLength:0}}}}return hl.TextMessagePayloadDecoder=i,hl}var pl={},Wg;function lE(){if(Wg)return pl;Wg=1,Object.defineProperty(pl,"__esModule",{value:!0}),pl.ControlPayloadDecoder=void 0;const n=dr(),s=bn(),i=_l();class l{static decode(u,p){try{if(u.length<1)return this.createErrorPayload("Control payload too short (minimum 1 byte required)",u,p);const g=u[0]&240;switch(g){case n.ControlSubType.NodeDiscoverReq:return this.decodeDiscoverReq(u,p);case n.ControlSubType.NodeDiscoverResp:return this.decodeDiscoverResp(u,p);default:return this.createErrorPayload(`Unknown control sub-type: 0x${g.toString(16).padStart(2,"0")}`,u,p)}}catch(d){return this.createErrorPayload(d instanceof Error?d.message:"Failed to decode control payload",u,p)}}static decodeDiscoverReq(u,p){const d=[],g=(p==null?void 0:p.segmentOffset)??0;if(u.length<6){const S={type:n.PayloadType.Control,version:n.PayloadVersion.Version1,isValid:!1,errors:["DISCOVER_REQ payload too short (minimum 6 bytes required)"],subType:n.ControlSubType.NodeDiscoverReq,rawFlags:u[0],prefixOnly:!1,typeFilter:0,typeFilterNames:[],tag:0,since:0};return p!=null&&p.includeSegments&&(S.segments=[{name:"Invalid DISCOVER_REQ Data",description:"DISCOVER_REQ payload too short (minimum 6 bytes required)",startByte:g,endByte:g+u.length-1,value:(0,s.bytesToHex)(u)}]),S}let m=0;const x=u[m],A=(x&1)!==0;p!=null&&p.includeSegments&&d.push({name:"Flags",description:`Sub-type: DISCOVER_REQ (0x8) | Prefix Only: ${A}`,startByte:g+m,endByte:g+m,value:x.toString(16).padStart(2,"0").toUpperCase()}),m+=1;const _=u[m],k=this.parseTypeFilter(_);p!=null&&p.includeSegments&&d.push({name:"Type Filter",description:`Filter mask: 0b${_.toString(2).padStart(8,"0")} | Types: ${k.length>0?k.join(", "):"None"}`,startByte:g+m,endByte:g+m,value:_.toString(16).padStart(2,"0").toUpperCase()}),m+=1;const N=this.readUint32LE(u,m);p!=null&&p.includeSegments&&d.push({name:"Tag",description:`Random tag for response matching: 0x${N.toString(16).padStart(8,"0")}`,startByte:g+m,endByte:g+m+3,value:(0,s.bytesToHex)(u.slice(m,m+4))}),m+=4;let C=0;if(u.length>=m+4&&(C=this.readUint32LE(u,m),p!=null&&p.includeSegments)){const S=C>0?new Date(C*1e3).toISOString().slice(0,19)+"Z":"N/A";d.push({name:"Since",description:`Filter timestamp: ${C} (${S})`,startByte:g+m,endByte:g+m+3,value:(0,s.bytesToHex)(u.slice(m,m+4))})}const b={type:n.PayloadType.Control,version:n.PayloadVersion.Version1,isValid:!0,subType:n.ControlSubType.NodeDiscoverReq,rawFlags:x,prefixOnly:A,typeFilter:_,typeFilterNames:k,tag:N,since:C};return p!=null&&p.includeSegments&&(b.segments=d),b}static decodeDiscoverResp(u,p){const d=[],g=(p==null?void 0:p.segmentOffset)??0;if(u.length<14){const z={type:n.PayloadType.Control,version:n.PayloadVersion.Version1,isValid:!1,errors:["DISCOVER_RESP payload too short (minimum 14 bytes required)"],subType:n.ControlSubType.NodeDiscoverResp,rawFlags:u.length>0?u[0]:0,nodeType:n.DeviceRole.Unknown,nodeTypeName:"Unknown",snr:0,tag:0,publicKey:"",publicKeyLength:0};return p!=null&&p.includeSegments&&(z.segments=[{name:"Invalid DISCOVER_RESP Data",description:"DISCOVER_RESP payload too short (minimum 14 bytes required)",startByte:g,endByte:g+u.length-1,value:(0,s.bytesToHex)(u)}]),z}let m=0;const x=u[m],A=x&15,_=(0,i.getDeviceRoleName)(A);p!=null&&p.includeSegments&&d.push({name:"Flags",description:`Sub-type: DISCOVER_RESP (0x9) | Node Type: ${_}`,startByte:g+m,endByte:g+m,value:x.toString(16).padStart(2,"0").toUpperCase()}),m+=1;const k=u[m],N=k>127?k-256:k,C=N/4;p!=null&&p.includeSegments&&d.push({name:"SNR",description:`Inbound SNR: ${C.toFixed(2)} dB (raw: ${k}, signed: ${N})`,startByte:g+m,endByte:g+m,value:k.toString(16).padStart(2,"0").toUpperCase()}),m+=1;const b=this.readUint32LE(u,m);p!=null&&p.includeSegments&&d.push({name:"Tag",description:`Reflected tag from request: 0x${b.toString(16).padStart(8,"0")}`,startByte:g+m,endByte:g+m+3,value:(0,s.bytesToHex)(u.slice(m,m+4))}),m+=4;const B=u.length-m,D=u.slice(m,m+B),F=(0,s.bytesToHex)(D);if(p!=null&&p.includeSegments){const z=B===32?"Full Public Key":"Public Key Prefix";d.push({name:z,description:`${z} (${B} bytes)`,startByte:g+m,endByte:g+m+B-1,value:F})}const M={type:n.PayloadType.Control,version:n.PayloadVersion.Version1,isValid:!0,subType:n.ControlSubType.NodeDiscoverResp,rawFlags:x,nodeType:A,nodeTypeName:_,snr:C,tag:b,publicKey:F,publicKeyLength:B};return p!=null&&p.includeSegments&&(M.segments=d),M}static parseTypeFilter(u){const p=[];return u&1<<n.DeviceRole.ChatNode&&p.push("Chat"),u&1<<n.DeviceRole.Repeater&&p.push("Repeater"),u&1<<n.DeviceRole.RoomServer&&p.push("Room"),u&1<<n.DeviceRole.Sensor&&p.push("Sensor"),p}static createErrorPayload(u,p,d){const g={type:n.PayloadType.Control,version:n.PayloadVersion.Version1,isValid:!1,errors:[u],subType:n.ControlSubType.NodeDiscoverReq,rawFlags:p.length>0?p[0]:0,prefixOnly:!1,typeFilter:0,typeFilterNames:[],tag:0,since:0};return d!=null&&d.includeSegments&&(g.segments=[{name:"Invalid Control Data",description:u,startByte:d.segmentOffset??0,endByte:(d.segmentOffset??0)+p.length-1,value:(0,s.bytesToHex)(p)}]),g}static readUint32LE(u,p){return(u[p]|u[p+1]<<8|u[p+2]<<16|u[p+3]<<24)>>>0}}return pl.ControlPayloadDecoder=l,pl}var qg;function Gg(){if(qg)return nl;qg=1,Object.defineProperty(nl,"__esModule",{value:!0}),nl.MeshCorePacketDecoder=void 0;const n=dr(),s=bn(),i=_l(),l=ev(),c=JC(),u=eE(),p=tE(),d=nE(),g=rE(),m=iE(),x=oE(),A=sE(),_=aE(),k=lE();class N{static decode(b,S){return this.parseInternal(b,!1,S).packet}static async decodeWithVerification(b,S){return(await this.parseInternalAsync(b,!1,S)).packet}static analyzeStructure(b,S){return this.parseInternal(b,!0,S).structure}static async analyzeStructureWithVerification(b,S){return(await this.parseInternalAsync(b,!0,S)).structure}static parseInternal(b,S,B){const D=(0,s.hexToBytes)(b),F=[];if(D.length<2){const M={messageHash:"",routeType:n.RouteType.Flood,payloadType:n.PayloadType.RawCustom,payloadVersion:n.PayloadVersion.Version1,pathLength:0,path:null,payload:{raw:"",decoded:null},totalBytes:D.length,isValid:!1,errors:["Packet too short (minimum 2 bytes required)"]},z={segments:[],totalBytes:D.length,rawHex:b.toUpperCase(),messageHash:"",payload:{segments:[],hex:"",startByte:0,type:"Unknown"}};return{packet:M,structure:z}}try{let M=0;const z=D[0],U=z&3,j=z>>2&15,te=z>>6&3;S&&F.push({name:"Header",description:"Header byte breakdown",startByte:0,endByte:0,value:`0x${z.toString(16).padStart(2,"0")}`,headerBreakdown:{fullBinary:z.toString(2).padStart(8,"0"),fields:[{bits:"0-1",field:"Route Type",value:(0,i.getRouteTypeName)(U),binary:(z&3).toString(2).padStart(2,"0")},{bits:"2-5",field:"Payload Type",value:(0,i.getPayloadTypeName)(j),binary:(z>>2&15).toString(2).padStart(4,"0")},{bits:"6-7",field:"Version",value:te.toString(),binary:(z>>6&3).toString(2).padStart(2,"0")}]}}),M=1;let Z;if(U===n.RouteType.TransportFlood||U===n.RouteType.TransportDirect){if(D.length<M+4)throw new Error("Packet too short for transport codes");const P=D[M]|D[M+1]<<8,V=D[M+2]|D[M+3]<<8;if(Z=[P,V],S){const q=D[M]|D[M+1]<<8|D[M+2]<<16|D[M+3]<<24;F.push({name:"Transport Code",description:"Used for Direct/Response routing",startByte:M,endByte:M+3,value:`0x${q.toString(16).padStart(8,"0")}`})}M+=4}if(D.length<M+1)throw new Error("Packet too short for path length");const K=D[M];if(S){let P=`Path contains ${K} bytes`;U===n.RouteType.Direct||U===n.RouteType.TransportDirect?P=`For "Direct" packets, this contains routing instructions. ${K} bytes of routing instructions (decreases as packet travels)`:(U===n.RouteType.Flood||U===n.RouteType.TransportFlood)&&(P=`${K} bytes showing route taken (increases as packet floods)`),F.push({name:"Path Length",description:P,startByte:M,endByte:M,value:`0x${K.toString(16).padStart(2,"0")}`})}if(M+=1,D.length<M+K)throw new Error("Packet too short for path data");const ee=D.subarray(M,M+K),G=K>0?Array.from(ee).map(s.byteToHex):null;if(S&&K>0)if(j===n.PayloadType.Trace){const P=[];for(let V=0;V<K;V++){const q=D[M+V],pe=(q>127?q-256:q)/4;P.push(`${pe.toFixed(2)}dB (0x${q.toString(16).padStart(2,"0")})`)}F.push({name:"Path SNR Data",description:`SNR values collected during trace: ${P.join(", ")}`,startByte:M,endByte:M+K-1,value:(0,s.bytesToHex)(D.slice(M,M+K))})}else{let P="Routing path information";U===n.RouteType.Direct||U===n.RouteType.TransportDirect?P="Routing instructions (bytes are stripped at each hop as packet travels to destination)":(U===n.RouteType.Flood||U===n.RouteType.TransportFlood)&&(P="Historical route taken (bytes are added as packet floods through network)"),F.push({name:"Path Data",description:P,startByte:M,endByte:M+K-1,value:(0,s.bytesToHex)(D.slice(M,M+K))})}M+=K;const oe=D.subarray(M),J=(0,s.bytesToHex)(oe);S&&D.length>M&&F.push({name:"Payload",description:`${(0,i.getPayloadTypeName)(j)} payload data`,startByte:M,endByte:D.length-1,value:(0,s.bytesToHex)(D.slice(M))});let Y=null;const de=[];if(j===n.PayloadType.Advert){const P=c.AdvertPayloadDecoder.decode(oe,{includeSegments:S,segmentOffset:0});Y=P,P!=null&&P.segments&&(de.push(...P.segments),delete P.segments)}else if(j===n.PayloadType.Trace){const P=u.TracePayloadDecoder.decode(oe,G,{includeSegments:S,segmentOffset:0});Y=P,P!=null&&P.segments&&(de.push(...P.segments),delete P.segments)}else if(j===n.PayloadType.GroupText){const P=p.GroupTextPayloadDecoder.decode(oe,{...B,includeSegments:S,segmentOffset:0});Y=P,P!=null&&P.segments&&(de.push(...P.segments),delete P.segments)}else if(j===n.PayloadType.Request){const P=d.RequestPayloadDecoder.decode(oe,{includeSegments:S,segmentOffset:0});Y=P,P!=null&&P.segments&&(de.push(...P.segments),delete P.segments)}else if(j===n.PayloadType.Response){const P=g.ResponsePayloadDecoder.decode(oe,{includeSegments:S,segmentOffset:0});Y=P,P!=null&&P.segments&&(de.push(...P.segments),delete P.segments)}else if(j===n.PayloadType.AnonRequest){const P=m.AnonRequestPayloadDecoder.decode(oe,{includeSegments:S,segmentOffset:0});Y=P,P!=null&&P.segments&&(de.push(...P.segments),delete P.segments)}else if(j===n.PayloadType.Ack){const P=x.AckPayloadDecoder.decode(oe,{includeSegments:S,segmentOffset:0});Y=P,P!=null&&P.segments&&(de.push(...P.segments),delete P.segments)}else if(j===n.PayloadType.Path)Y=A.PathPayloadDecoder.decode(oe);else if(j===n.PayloadType.TextMessage){const P=_.TextMessagePayloadDecoder.decode(oe,{includeSegments:S,segmentOffset:0});Y=P,P!=null&&P.segments&&(de.push(...P.segments),delete P.segments)}else if(j===n.PayloadType.Control){const P=k.ControlPayloadDecoder.decode(oe,{includeSegments:S,segmentOffset:0});Y=P,P!=null&&P.segments&&(de.push(...P.segments),delete P.segments)}S&&de.length===0&&D.length>M&&de.push({name:`${(0,i.getPayloadTypeName)(j)} Payload`,description:`Raw ${(0,i.getPayloadTypeName)(j)} payload data (${oe.length} bytes)`,startByte:0,endByte:oe.length-1,value:(0,s.bytesToHex)(oe)});const W=this.calculateMessageHash(D,U,j,te),ae={messageHash:W,routeType:U,payloadType:j,payloadVersion:te,transportCodes:Z,pathLength:K,path:G,payload:{raw:J,decoded:Y},totalBytes:D.length,isValid:!0},H={segments:F,totalBytes:D.length,rawHex:b.toUpperCase(),messageHash:W,payload:{segments:de,hex:J,startByte:M,type:(0,i.getPayloadTypeName)(j)}};return{packet:ae,structure:H}}catch(M){const z={messageHash:"",routeType:n.RouteType.Flood,payloadType:n.PayloadType.RawCustom,payloadVersion:n.PayloadVersion.Version1,pathLength:0,path:null,payload:{raw:"",decoded:null},totalBytes:D.length,isValid:!1,errors:[M instanceof Error?M.message:"Unknown decoding error"]},U={segments:[],totalBytes:D.length,rawHex:b.toUpperCase(),messageHash:"",payload:{segments:[],hex:"",startByte:0,type:"Unknown"}};return{packet:z,structure:U}}}static async parseInternalAsync(b,S,B){const D=this.parseInternal(b,S,B);if(D.packet.payloadType===n.PayloadType.Advert&&D.packet.payload.decoded)try{const F=D.packet.payload.decoded,M=await c.AdvertPayloadDecoder.decodeWithVerification((0,s.hexToBytes)(D.packet.payload.raw),{includeSegments:S,segmentOffset:0});M&&(D.packet.payload.decoded=M,M.isValid||(D.packet.isValid=!1,D.packet.errors=M.errors||["Invalid advertisement signature"]),S&&M.segments&&(D.structure.payload.segments=M.segments,delete M.segments))}catch(F){console.error("Signature verification failed:",F)}return D}static validate(b){const S=(0,s.hexToBytes)(b),B=[];if(S.length<2)return B.push("Packet too short (minimum 2 bytes required)"),{isValid:!1,errors:B};try{let D=1;const M=S[0]&3;if((M===n.RouteType.TransportFlood||M===n.RouteType.TransportDirect)&&(S.length<D+4&&B.push("Packet too short for transport codes"),D+=4),S.length<D+1)B.push("Packet too short for path length");else{const z=S[D];D+=1,S.length<D+z&&B.push("Packet too short for path data"),D+=z}D>=S.length&&B.push("No payload data found")}catch(D){B.push(D instanceof Error?D.message:"Validation error")}return{isValid:B.length===0,errors:B.length>0?B:void 0}}static calculateMessageHash(b,S,B,D){if(B===n.PayloadType.Trace&&b.length>=13){let te=1;if((S===n.RouteType.TransportFlood||S===n.RouteType.TransportDirect)&&(te+=4),b.length>te){const Z=b[te];te+=1+Z}if(b.length>=te+4){const Z=b[te]|b[te+1]<<8|b[te+2]<<16|b[te+3]<<24;return(0,s.numberToHex)(Z,8)}}const F=B<<2|D<<6;let M=1;if((S===n.RouteType.TransportFlood||S===n.RouteType.TransportDirect)&&(M+=4),b.length>M){const te=b[M];M+=1+te}const z=b.slice(M),U=[F,...Array.from(z)];let j=0;for(let te=0;te<U.length;te++)j=(j<<5)-j+U[te]&4294967295;return(0,s.numberToHex)(j,8)}static createKeyStore(b){return new l.MeshCoreKeyStore(b)}}return nl.MeshCorePacketDecoder=N,nl}var Qo={},$g;function Kg(){if($g)return Qo;$g=1,Object.defineProperty(Qo,"__esModule",{value:!0}),Qo.createAuthToken=c,Qo.verifyAuthToken=u,Qo.parseAuthToken=p,Qo.decodeAuthTokenPayload=d;const n=dh(),s=bn();function i(g){let m="";if(typeof Buffer<"u")m=Buffer.from(g).toString("base64");else{const x=String.fromCharCode(...Array.from(g));m=btoa(x)}return m.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function l(g){let m=g.replace(/-/g,"+").replace(/_/g,"/");for(;m.length%4;)m+="=";if(typeof Buffer<"u")return new Uint8Array(Buffer.from(m,"base64"));{const x=atob(m),A=new Uint8Array(x.length);for(let _=0;_<x.length;_++)A[_]=x.charCodeAt(_);return A}}async function c(g,m,x){const A={alg:"Ed25519",typ:"JWT"};g.publicKey?g.publicKey=g.publicKey.toUpperCase():g.publicKey=x.toUpperCase(),g.iat||(g.iat=Math.floor(Date.now()/1e3));const _=JSON.stringify(A),k=JSON.stringify(g),N=new TextEncoder().encode(_),C=new TextEncoder().encode(k),b=i(N),S=i(C),B=`${b}.${S}`,D=new TextEncoder().encode(B),F=(0,s.bytesToHex)(D),M=await(0,n.sign)(F,m,g.publicKey);return`${b}.${S}.${M}`}async function u(g,m){try{const x=g.split(".");if(x.length!==3)return null;const[A,_,k]=x,N=l(A),C=l(_),b=new TextDecoder().decode(N),S=new TextDecoder().decode(C),B=JSON.parse(b),D=JSON.parse(S);if(B.alg!=="Ed25519"||B.typ!=="JWT"||!D.publicKey||!D.iat||m&&D.publicKey.toUpperCase()!==m.toUpperCase()||D.exp&&Math.floor(Date.now()/1e3)>D.exp)return null;const F=`${A}.${_}`,M=new TextEncoder().encode(F),z=(0,s.bytesToHex)(M);return await(0,n.verify)(k,z,D.publicKey)?D:null}catch{return null}}function p(g){try{const m=g.split(".");return m.length!==3?null:{header:m[0],payload:m[1],signature:m[2]}}catch{return null}}function d(g){try{const m=g.split(".");if(m.length!==3)return null;const x=l(m[1]),A=new TextDecoder().decode(x);return JSON.parse(A)}catch{return null}}return Qo}var Qg;function cE(){return Qg||(Qg=1,(function(n){var s=Si&&Si.__createBinding||(Object.create?(function(S,B,D,F){F===void 0&&(F=D);var M=Object.getOwnPropertyDescriptor(B,D);(!M||("get"in M?!B.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return B[D]}}),Object.defineProperty(S,F,M)}):(function(S,B,D,F){F===void 0&&(F=D),S[F]=B[D]})),i=Si&&Si.__setModuleDefault||(Object.create?(function(S,B){Object.defineProperty(S,"default",{enumerable:!0,value:B})}):function(S,B){S.default=B}),l=Si&&Si.__importStar||(function(){var S=function(B){return S=Object.getOwnPropertyNames||function(D){var F=[];for(var M in D)Object.prototype.hasOwnProperty.call(D,M)&&(F[F.length]=M);return F},S(B)};return function(B){if(B&&B.__esModule)return B;var D={};if(B!=null)for(var F=S(B),M=0;M<F.length;M++)F[M]!=="default"&&s(D,B,F[M]);return i(D,B),D}})();Object.defineProperty(n,"__esModule",{value:!0}),n.Utils=n.decodeAuthTokenPayload=n.parseAuthToken=n.verifyAuthToken=n.createAuthToken=n.getControlSubTypeName=n.getRequestTypeName=n.getDeviceRoleName=n.getPayloadVersionName=n.getPayloadTypeName=n.getRouteTypeName=n.numberToHex=n.byteToHex=n.bytesToHex=n.hexToBytes=n.Ed25519SignatureVerifier=n.ChannelCrypto=n.MeshCoreKeyStore=n.ControlSubType=n.RequestType=n.AdvertFlags=n.DeviceRole=n.PayloadVersion=n.PayloadType=n.RouteType=n.MeshCoreDecoder=n.MeshCorePacketDecoder=void 0;var c=Gg();Object.defineProperty(n,"MeshCorePacketDecoder",{enumerable:!0,get:function(){return c.MeshCorePacketDecoder}});var u=Gg();Object.defineProperty(n,"MeshCoreDecoder",{enumerable:!0,get:function(){return u.MeshCorePacketDecoder}});var p=dr();Object.defineProperty(n,"RouteType",{enumerable:!0,get:function(){return p.RouteType}}),Object.defineProperty(n,"PayloadType",{enumerable:!0,get:function(){return p.PayloadType}}),Object.defineProperty(n,"PayloadVersion",{enumerable:!0,get:function(){return p.PayloadVersion}}),Object.defineProperty(n,"DeviceRole",{enumerable:!0,get:function(){return p.DeviceRole}}),Object.defineProperty(n,"AdvertFlags",{enumerable:!0,get:function(){return p.AdvertFlags}}),Object.defineProperty(n,"RequestType",{enumerable:!0,get:function(){return p.RequestType}}),Object.defineProperty(n,"ControlSubType",{enumerable:!0,get:function(){return p.ControlSubType}});var d=ev();Object.defineProperty(n,"MeshCoreKeyStore",{enumerable:!0,get:function(){return d.MeshCoreKeyStore}});var g=eh();Object.defineProperty(n,"ChannelCrypto",{enumerable:!0,get:function(){return g.ChannelCrypto}});var m=mv();Object.defineProperty(n,"Ed25519SignatureVerifier",{enumerable:!0,get:function(){return m.Ed25519SignatureVerifier}});var x=bn();Object.defineProperty(n,"hexToBytes",{enumerable:!0,get:function(){return x.hexToBytes}}),Object.defineProperty(n,"bytesToHex",{enumerable:!0,get:function(){return x.bytesToHex}}),Object.defineProperty(n,"byteToHex",{enumerable:!0,get:function(){return x.byteToHex}}),Object.defineProperty(n,"numberToHex",{enumerable:!0,get:function(){return x.numberToHex}});var A=_l();Object.defineProperty(n,"getRouteTypeName",{enumerable:!0,get:function(){return A.getRouteTypeName}}),Object.defineProperty(n,"getPayloadTypeName",{enumerable:!0,get:function(){return A.getPayloadTypeName}}),Object.defineProperty(n,"getPayloadVersionName",{enumerable:!0,get:function(){return A.getPayloadVersionName}}),Object.defineProperty(n,"getDeviceRoleName",{enumerable:!0,get:function(){return A.getDeviceRoleName}}),Object.defineProperty(n,"getRequestTypeName",{enumerable:!0,get:function(){return A.getRequestTypeName}}),Object.defineProperty(n,"getControlSubTypeName",{enumerable:!0,get:function(){return A.getControlSubTypeName}});var _=Kg();Object.defineProperty(n,"createAuthToken",{enumerable:!0,get:function(){return _.createAuthToken}}),Object.defineProperty(n,"verifyAuthToken",{enumerable:!0,get:function(){return _.verifyAuthToken}}),Object.defineProperty(n,"parseAuthToken",{enumerable:!0,get:function(){return _.parseAuthToken}}),Object.defineProperty(n,"decodeAuthTokenPayload",{enumerable:!0,get:function(){return _.decodeAuthTokenPayload}});const k=l(_l()),N=l(bn()),C=l(Kg()),b=dh();n.Utils={...k,...N,...C,derivePublicKey:b.derivePublicKey,validateKeyPair:b.validateKeyPair,sign:b.sign,verify:b.verify}})(Si)),Si}var yt=cE();function uE(n){return new Date(n*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}function dE(n){const s=[];return n.snr!==null&&n.snr!==void 0&&s.push(`SNR: ${n.snr.toFixed(1)} dB`),n.rssi!==null&&n.rssi!==void 0&&s.push(`RSSI: ${n.rssi} dBm`),s.join(" | ")}function fE(n,s){var i;try{const l=yt.MeshCoreDecoder.decode(n);if(!l.isValid)return{summary:"Invalid packet",routeType:"Unknown"};const c=yt.Utils.getRouteTypeName(l.routeType),u=yt.Utils.getPayloadTypeName(l.payloadType),p=l.path&&l.path.length>0?` via ${l.path.join("-")}`:"";let d=u,g;switch(l.payloadType){case yt.PayloadType.TextMessage:{const m=l.payload.decoded;m!=null&&m.sourceHash&&(m!=null&&m.destinationHash)?d=`DM from ${m.sourceHash} to ${m.destinationHash}${p}`:d=`DM${p}`;break}case yt.PayloadType.GroupText:{const m=l.payload.decoded;s!=null&&s.channel_name?s.sender?d=`GT from ${s.sender} in ${s.channel_name}${p}`:d=`GT in ${s.channel_name}${p}`:m!=null&&m.channelHash?d=`GT ch:${m.channelHash}${p}`:d=`GroupText${p}`;break}case yt.PayloadType.Advert:{const m=l.payload.decoded;if((i=m==null?void 0:m.appData)!=null&&i.name){const x=m.appData.deviceRole!==void 0?yt.Utils.getDeviceRoleName(m.appData.deviceRole):"";d=`Advert: ${m.appData.name}${x?` (${x})`:""}${p}`}else m!=null&&m.publicKey?d=`Advert: ${m.publicKey.slice(0,8)}...${p}`:d=`Advert${p}`;break}case yt.PayloadType.Ack:{d=`ACK${p}`;break}case yt.PayloadType.Request:{d=`Request${p}`;break}case yt.PayloadType.Response:{d=`Response${p}`;break}case yt.PayloadType.Trace:{d=`Trace${p}`;break}case yt.PayloadType.Path:{d=`Path${p}`;break}default:d=`${u}${p}`}return{summary:d,routeType:c,details:g}}catch{return{summary:"Decode error",routeType:"Unknown"}}}function hE(n){switch(n){case"Flood":return"bg-blue-500/20 text-blue-400";case"Direct":return"bg-green-500/20 text-green-400";case"Transport Flood":return"bg-purple-500/20 text-purple-400";case"Transport Direct":return"bg-orange-500/20 text-orange-400";default:return"bg-gray-500/20 text-gray-400"}}function pE(n){switch(n){case"Flood":return"F";case"Direct":return"D";case"Transport Flood":return"TF";case"Transport Direct":return"TD";default:return"?"}}function P0({packets:n}){const s=R.useRef(null),i=R.useMemo(()=>n.map(c=>({packet:c,decoded:fE(c.data,c.decrypted_info)})),[n]);if(R.useEffect(()=>{s.current&&(s.current.scrollTop=s.current.scrollHeight)},[n]),n.length===0)return w.jsx("div",{className:"h-full overflow-y-auto p-5 text-center text-muted-foreground",children:"No packets received yet. Packets will appear here in real-time."});const l=[...i].sort((c,u)=>c.packet.timestamp-u.packet.timestamp);return w.jsx("div",{className:"h-full overflow-y-auto p-4 flex flex-col gap-3",ref:s,children:l.map(({packet:c,decoded:u})=>w.jsxs("div",{className:"py-2 px-3 bg-muted rounded",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:`text-[10px] font-mono px-1.5 py-0.5 rounded ${hE(u.routeType)}`,title:u.routeType,children:pE(u.routeType)}),!c.decrypted&&w.jsx("span",{title:"Encrypted",children:""}),w.jsx("span",{className:c.decrypted?"text-primary":"text-foreground",children:u.summary}),w.jsx("span",{className:"text-muted-foreground ml-auto text-sm",children:uE(c.timestamp)})]}),(c.snr!==null||c.rssi!==null)&&w.jsx("div",{className:"text-[11px] text-muted-foreground mt-0.5",children:dE(c)}),w.jsx("div",{className:"font-mono text-[10px] break-all text-muted-foreground/70 mt-1 p-1 bg-background/50 rounded",children:c.data.toUpperCase()})]},c.id))})}function gv(n,s){const i=R.useRef(s);R.useEffect(function(){s!==i.current&&n.attributionControl!=null&&(i.current!=null&&n.attributionControl.removeAttribution(i.current),s!=null&&n.attributionControl.addAttribution(s)),i.current=s},[n,s])}function mE(n,s,i){s.center!==i.center&&n.setLatLng(s.center),s.radius!=null&&s.radius!==i.radius&&n.setRadius(s.radius)}const gE=1;function xE(n){return Object.freeze({__version:gE,map:n})}function AE(n,s){return Object.freeze({...n,...s})}const xv=R.createContext(null),Av=xv.Provider;function wd(){const n=R.useContext(xv);if(n==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}function vE(n){function s(i,l){const{instance:c,context:u}=n(i).current;return R.useImperativeHandle(l,()=>c),i.children==null?null:ke.createElement(Av,{value:u},i.children)}return R.forwardRef(s)}function yE(n){function s(i,l){const[c,u]=R.useState(!1),{instance:p}=n(i,u).current;R.useImperativeHandle(l,()=>p),R.useEffect(function(){c&&p.update()},[p,c,i.children]);const d=p._contentNode;return d?z0.createPortal(i.children,d):null}return R.forwardRef(s)}function _E(n){function s(i,l){const{instance:c}=n(i).current;return R.useImperativeHandle(l,()=>c),null}return R.forwardRef(s)}function fh(n,s){const i=R.useRef();R.useEffect(function(){return s!=null&&n.instance.on(s),i.current=s,function(){i.current!=null&&n.instance.off(i.current),i.current=null}},[n,s])}function bd(n,s){const i=n.pane??s.pane;return i?{...n,pane:i}:n}function wE(n,s){return function(l,c){const u=wd(),p=n(bd(l,u),u);return gv(u.map,l.attribution),fh(p.current,l.eventHandlers),s(p.current,u,l,c),p}}var gl={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var bE=gl.exports,Yg;function CE(){return Yg||(Yg=1,(function(n,s){(function(i,l){l(s)})(bE,(function(i){var l="1.9.4";function c(t){var o,f,v,T;for(f=1,v=arguments.length;f<v;f++){T=arguments[f];for(o in T)t[o]=T[o]}return t}var u=Object.create||(function(){function t(){}return function(o){return t.prototype=o,new t}})();function p(t,o){var f=Array.prototype.slice;if(t.bind)return t.bind.apply(t,f.call(arguments,1));var v=f.call(arguments,2);return function(){return t.apply(o,v.length?v.concat(f.call(arguments)):arguments)}}var d=0;function g(t){return"_leaflet_id"in t||(t._leaflet_id=++d),t._leaflet_id}function m(t,o,f){var v,T,O,X;return X=function(){v=!1,T&&(O.apply(f,T),T=!1)},O=function(){v?T=arguments:(t.apply(f,arguments),setTimeout(X,o),v=!0)},O}function x(t,o,f){var v=o[1],T=o[0],O=v-T;return t===v&&f?t:((t-T)%O+O)%O+T}function A(){return!1}function _(t,o){if(o===!1)return t;var f=Math.pow(10,o===void 0?6:o);return Math.round(t*f)/f}function k(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function N(t){return k(t).split(/\s+/)}function C(t,o){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?u(t.options):{});for(var f in o)t.options[f]=o[f];return t.options}function b(t,o,f){var v=[];for(var T in t)v.push(encodeURIComponent(f?T.toUpperCase():T)+"="+encodeURIComponent(t[T]));return(!o||o.indexOf("?")===-1?"?":"&")+v.join("&")}var S=/\{ *([\w_ -]+) *\}/g;function B(t,o){return t.replace(S,function(f,v){var T=o[v];if(T===void 0)throw new Error("No value provided for variable "+f);return typeof T=="function"&&(T=T(o)),T})}var D=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function F(t,o){for(var f=0;f<t.length;f++)if(t[f]===o)return f;return-1}var M="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function z(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var U=0;function j(t){var o=+new Date,f=Math.max(0,16-(o-U));return U=o+f,window.setTimeout(t,f)}var te=window.requestAnimationFrame||z("RequestAnimationFrame")||j,Z=window.cancelAnimationFrame||z("CancelAnimationFrame")||z("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function K(t,o,f){if(f&&te===j)t.call(o);else return te.call(window,p(t,o))}function ee(t){t&&Z.call(window,t)}var G={__proto__:null,extend:c,create:u,bind:p,get lastId(){return d},stamp:g,throttle:m,wrapNum:x,falseFn:A,formatNum:_,trim:k,splitWords:N,setOptions:C,getParamString:b,template:B,isArray:D,indexOf:F,emptyImageUrl:M,requestFn:te,cancelFn:Z,requestAnimFrame:K,cancelAnimFrame:ee};function oe(){}oe.extend=function(t){var o=function(){C(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},f=o.__super__=this.prototype,v=u(f);v.constructor=o,o.prototype=v;for(var T in this)Object.prototype.hasOwnProperty.call(this,T)&&T!=="prototype"&&T!=="__super__"&&(o[T]=this[T]);return t.statics&&c(o,t.statics),t.includes&&(J(t.includes),c.apply(null,[v].concat(t.includes))),c(v,t),delete v.statics,delete v.includes,v.options&&(v.options=f.options?u(f.options):{},c(v.options,t.options)),v._initHooks=[],v.callInitHooks=function(){if(!this._initHooksCalled){f.callInitHooks&&f.callInitHooks.call(this),this._initHooksCalled=!0;for(var O=0,X=v._initHooks.length;O<X;O++)v._initHooks[O].call(this)}},o},oe.include=function(t){var o=this.prototype.options;return c(this.prototype,t),t.options&&(this.prototype.options=o,this.mergeOptions(t.options)),this},oe.mergeOptions=function(t){return c(this.prototype.options,t),this},oe.addInitHook=function(t){var o=Array.prototype.slice.call(arguments,1),f=typeof t=="function"?t:function(){this[t].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(f),this};function J(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=D(t)?t:[t];for(var o=0;o<t.length;o++)t[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Y={on:function(t,o,f){if(typeof t=="object")for(var v in t)this._on(v,t[v],o);else{t=N(t);for(var T=0,O=t.length;T<O;T++)this._on(t[T],o,f)}return this},off:function(t,o,f){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var v in t)this._off(v,t[v],o);else{t=N(t);for(var T=arguments.length===1,O=0,X=t.length;O<X;O++)T?this._off(t[O]):this._off(t[O],o,f)}return this},_on:function(t,o,f,v){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(t,o,f)===!1){f===this&&(f=void 0);var T={fn:o,ctx:f};v&&(T.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(T)}},_off:function(t,o,f){var v,T,O;if(this._events&&(v=this._events[t],!!v)){if(arguments.length===1){if(this._firingCount)for(T=0,O=v.length;T<O;T++)v[T].fn=A;delete this._events[t];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var X=this._listens(t,o,f);if(X!==!1){var le=v[X];this._firingCount&&(le.fn=A,this._events[t]=v=v.slice()),v.splice(X,1)}}},fire:function(t,o,f){if(!this.listens(t,f))return this;var v=c({},o,{type:t,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var T=this._events[t];if(T){this._firingCount=this._firingCount+1||1;for(var O=0,X=T.length;O<X;O++){var le=T[O],me=le.fn;le.once&&this.off(t,me,le.ctx),me.call(le.ctx||this,v)}this._firingCount--}}return f&&this._propagateEvent(v),this},listens:function(t,o,f,v){typeof t!="string"&&console.warn('"string" type argument expected');var T=o;typeof o!="function"&&(v=!!o,T=void 0,f=void 0);var O=this._events&&this._events[t];if(O&&O.length&&this._listens(t,T,f)!==!1)return!0;if(v){for(var X in this._eventParents)if(this._eventParents[X].listens(t,o,f,v))return!0}return!1},_listens:function(t,o,f){if(!this._events)return!1;var v=this._events[t]||[];if(!o)return!!v.length;f===this&&(f=void 0);for(var T=0,O=v.length;T<O;T++)if(v[T].fn===o&&v[T].ctx===f)return T;return!1},once:function(t,o,f){if(typeof t=="object")for(var v in t)this._on(v,t[v],o,!0);else{t=N(t);for(var T=0,O=t.length;T<O;T++)this._on(t[T],o,f,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[g(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[g(t)],this},_propagateEvent:function(t){for(var o in this._eventParents)this._eventParents[o].fire(t.type,c({layer:t.target,propagatedFrom:t.target},t),!0)}};Y.addEventListener=Y.on,Y.removeEventListener=Y.clearAllEventListeners=Y.off,Y.addOneTimeEventListener=Y.once,Y.fireEvent=Y.fire,Y.hasEventListeners=Y.listens;var de=oe.extend(Y);function W(t,o,f){this.x=f?Math.round(t):t,this.y=f?Math.round(o):o}var ae=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};W.prototype={clone:function(){return new W(this.x,this.y)},add:function(t){return this.clone()._add(H(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(H(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new W(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new W(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ae(this.x),this.y=ae(this.y),this},distanceTo:function(t){t=H(t);var o=t.x-this.x,f=t.y-this.y;return Math.sqrt(o*o+f*f)},equals:function(t){return t=H(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=H(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+_(this.x)+", "+_(this.y)+")"}};function H(t,o,f){return t instanceof W?t:D(t)?new W(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new W(t.x,t.y):new W(t,o,f)}function P(t,o){if(t)for(var f=o?[t,o]:t,v=0,T=f.length;v<T;v++)this.extend(f[v])}P.prototype={extend:function(t){var o,f;if(!t)return this;if(t instanceof W||typeof t[0]=="number"||"x"in t)o=f=H(t);else if(t=V(t),o=t.min,f=t.max,!o||!f)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=f.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(f.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(f.y,this.max.y)),this},getCenter:function(t){return H((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return H(this.min.x,this.max.y)},getTopRight:function(){return H(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var o,f;return typeof t[0]=="number"||t instanceof W?t=H(t):t=V(t),t instanceof P?(o=t.min,f=t.max):o=f=t,o.x>=this.min.x&&f.x<=this.max.x&&o.y>=this.min.y&&f.y<=this.max.y},intersects:function(t){t=V(t);var o=this.min,f=this.max,v=t.min,T=t.max,O=T.x>=o.x&&v.x<=f.x,X=T.y>=o.y&&v.y<=f.y;return O&&X},overlaps:function(t){t=V(t);var o=this.min,f=this.max,v=t.min,T=t.max,O=T.x>o.x&&v.x<f.x,X=T.y>o.y&&v.y<f.y;return O&&X},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var o=this.min,f=this.max,v=Math.abs(o.x-f.x)*t,T=Math.abs(o.y-f.y)*t;return V(H(o.x-v,o.y-T),H(f.x+v,f.y+T))},equals:function(t){return t?(t=V(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function V(t,o){return!t||t instanceof P?t:new P(t,o)}function q(t,o){if(t)for(var f=o?[t,o]:t,v=0,T=f.length;v<T;v++)this.extend(f[v])}q.prototype={extend:function(t){var o=this._southWest,f=this._northEast,v,T;if(t instanceof pe)v=t,T=t;else if(t instanceof q){if(v=t._southWest,T=t._northEast,!v||!T)return this}else return t?this.extend(ue(t)||Q(t)):this;return!o&&!f?(this._southWest=new pe(v.lat,v.lng),this._northEast=new pe(T.lat,T.lng)):(o.lat=Math.min(v.lat,o.lat),o.lng=Math.min(v.lng,o.lng),f.lat=Math.max(T.lat,f.lat),f.lng=Math.max(T.lng,f.lng)),this},pad:function(t){var o=this._southWest,f=this._northEast,v=Math.abs(o.lat-f.lat)*t,T=Math.abs(o.lng-f.lng)*t;return new q(new pe(o.lat-v,o.lng-T),new pe(f.lat+v,f.lng+T))},getCenter:function(){return new pe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new pe(this.getNorth(),this.getWest())},getSouthEast:function(){return new pe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof pe||"lat"in t?t=ue(t):t=Q(t);var o=this._southWest,f=this._northEast,v,T;return t instanceof q?(v=t.getSouthWest(),T=t.getNorthEast()):v=T=t,v.lat>=o.lat&&T.lat<=f.lat&&v.lng>=o.lng&&T.lng<=f.lng},intersects:function(t){t=Q(t);var o=this._southWest,f=this._northEast,v=t.getSouthWest(),T=t.getNorthEast(),O=T.lat>=o.lat&&v.lat<=f.lat,X=T.lng>=o.lng&&v.lng<=f.lng;return O&&X},overlaps:function(t){t=Q(t);var o=this._southWest,f=this._northEast,v=t.getSouthWest(),T=t.getNorthEast(),O=T.lat>o.lat&&v.lat<f.lat,X=T.lng>o.lng&&v.lng<f.lng;return O&&X},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,o){return t?(t=Q(t),this._southWest.equals(t.getSouthWest(),o)&&this._northEast.equals(t.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Q(t,o){return t instanceof q?t:new q(t,o)}function pe(t,o,f){if(isNaN(t)||isNaN(o))throw new Error("Invalid LatLng object: ("+t+", "+o+")");this.lat=+t,this.lng=+o,f!==void 0&&(this.alt=+f)}pe.prototype={equals:function(t,o){if(!t)return!1;t=ue(t);var f=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return f<=(o===void 0?1e-9:o)},toString:function(t){return"LatLng("+_(this.lat,t)+", "+_(this.lng,t)+")"},distanceTo:function(t){return he.distance(this,ue(t))},wrap:function(){return he.wrapLatLng(this)},toBounds:function(t){var o=180*t/40075017,f=o/Math.cos(Math.PI/180*this.lat);return Q([this.lat-o,this.lng-f],[this.lat+o,this.lng+f])},clone:function(){return new pe(this.lat,this.lng,this.alt)}};function ue(t,o,f){return t instanceof pe?t:D(t)&&typeof t[0]!="object"?t.length===3?new pe(t[0],t[1],t[2]):t.length===2?new pe(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new pe(t.lat,"lng"in t?t.lng:t.lon,t.alt):o===void 0?null:new pe(t,o,f)}var se={latLngToPoint:function(t,o){var f=this.projection.project(t),v=this.scale(o);return this.transformation._transform(f,v)},pointToLatLng:function(t,o){var f=this.scale(o),v=this.transformation.untransform(t,f);return this.projection.unproject(v)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var o=this.projection.bounds,f=this.scale(t),v=this.transformation.transform(o.min,f),T=this.transformation.transform(o.max,f);return new P(v,T)},infinite:!1,wrapLatLng:function(t){var o=this.wrapLng?x(t.lng,this.wrapLng,!0):t.lng,f=this.wrapLat?x(t.lat,this.wrapLat,!0):t.lat,v=t.alt;return new pe(f,o,v)},wrapLatLngBounds:function(t){var o=t.getCenter(),f=this.wrapLatLng(o),v=o.lat-f.lat,T=o.lng-f.lng;if(v===0&&T===0)return t;var O=t.getSouthWest(),X=t.getNorthEast(),le=new pe(O.lat-v,O.lng-T),me=new pe(X.lat-v,X.lng-T);return new q(le,me)}},he=c({},se,{wrapLng:[-180,180],R:6371e3,distance:function(t,o){var f=Math.PI/180,v=t.lat*f,T=o.lat*f,O=Math.sin((o.lat-t.lat)*f/2),X=Math.sin((o.lng-t.lng)*f/2),le=O*O+Math.cos(v)*Math.cos(T)*X*X,me=2*Math.atan2(Math.sqrt(le),Math.sqrt(1-le));return this.R*me}}),Ee=6378137,We={R:Ee,MAX_LATITUDE:85.0511287798,project:function(t){var o=Math.PI/180,f=this.MAX_LATITUDE,v=Math.max(Math.min(f,t.lat),-f),T=Math.sin(v*o);return new W(this.R*t.lng*o,this.R*Math.log((1+T)/(1-T))/2)},unproject:function(t){var o=180/Math.PI;return new pe((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*o,t.x*o/this.R)},bounds:(function(){var t=Ee*Math.PI;return new P([-t,-t],[t,t])})()};function dt(t,o,f,v){if(D(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=o,this._c=f,this._d=v}dt.prototype={transform:function(t,o){return this._transform(t.clone(),o)},_transform:function(t,o){return o=o||1,t.x=o*(this._a*t.x+this._b),t.y=o*(this._c*t.y+this._d),t},untransform:function(t,o){return o=o||1,new W((t.x/o-this._b)/this._a,(t.y/o-this._d)/this._c)}};function ot(t,o,f,v){return new dt(t,o,f,v)}var Be=c({},he,{code:"EPSG:3857",projection:We,transformation:(function(){var t=.5/(Math.PI*We.R);return ot(t,.5,-t,.5)})()}),Ie=c({},Be,{code:"EPSG:900913"});function ft(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Nt(t,o){var f="",v,T,O,X,le,me;for(v=0,O=t.length;v<O;v++){for(le=t[v],T=0,X=le.length;T<X;T++)me=le[T],f+=(T?"L":"M")+me.x+" "+me.y;f+=o?Re.svg?"z":"x":""}return f||"M0 0"}var lt=document.documentElement.style,Qe="ActiveXObject"in window,qe=Qe&&!document.addEventListener,et="msLaunchUri"in navigator&&!("documentMode"in document),rt=Yt("webkit"),Ue=Yt("android"),kt=Yt("android 2")||Yt("android 3"),$t=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Pe=Ue&&Yt("Google")&&$t<537&&!("AudioNode"in window),pt=!!window.opera,Ut=!et&&Yt("chrome"),sn=Yt("gecko")&&!rt&&!pt&&!Qe,en=!Ut&&Yt("safari"),Kt=Yt("phantom"),Ft="OTransition"in lt,Qt=navigator.platform.indexOf("Win")===0,Yn=Qe&&"transition"in lt,Cn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!kt,xe="MozPerspective"in lt,Ce=!window.L_DISABLE_3D&&(Yn||Cn||xe)&&!Ft&&!Kt,Ne=typeof orientation<"u"||Yt("mobile"),ct=Ne&&rt,ie=Ne&&Cn,Ae=!window.PointerEvent&&window.MSPointerEvent,_e=!!(window.PointerEvent||Ae),De="ontouchstart"in window||!!window.TouchEvent,Ye=!window.L_NO_TOUCH&&(De||_e),Fe=Ne&&pt,wt=Ne&&sn,Rt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,zt=(function(){var t=!1;try{var o=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",A,o),window.removeEventListener("testPassiveEventSupport",A,o)}catch{}return t})(),Hn=(function(){return!!document.createElement("canvas").getContext})(),ut=!!(document.createElementNS&&ft("svg").createSVGRect),Pt=!!ut&&(function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Xn=!ut&&(function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var o=t.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}})(),bt=navigator.platform.indexOf("Mac")===0,Ht=navigator.platform.indexOf("Linux")===0;function Yt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Re={ie:Qe,ielt9:qe,edge:et,webkit:rt,android:Ue,android23:kt,androidStock:Pe,opera:pt,chrome:Ut,gecko:sn,safari:en,phantom:Kt,opera12:Ft,win:Qt,ie3d:Yn,webkit3d:Cn,gecko3d:xe,any3d:Ce,mobile:Ne,mobileWebkit:ct,mobileWebkit3d:ie,msPointer:Ae,pointer:_e,touch:Ye,touchNative:De,mobileOpera:Fe,mobileGecko:wt,retina:Rt,passiveEvents:zt,canvas:Hn,svg:ut,vml:Xn,inlineSvg:Pt,mac:bt,linux:Ht},Ni=Re.msPointer?"MSPointerDown":"pointerdown",ls=Re.msPointer?"MSPointerMove":"pointermove",Pl=Re.msPointer?"MSPointerUp":"pointerup",Tl=Re.msPointer?"MSPointerCancel":"pointercancel",da={touchstart:Ni,touchmove:ls,touchend:Pl,touchcancel:Tl},Ur={touchstart:Zt,touchmove:cs,touchend:cs,touchcancel:cs},si={},fa=!1;function Sd(t,o,f){return o==="touchstart"&&Bd(),Ur[o]?(f=Ur[o].bind(this,f),t.addEventListener(da[o],f,!1),f):(console.warn("wrong event specified:",o),A)}function Dl(t,o,f){if(!da[o]){console.warn("wrong event specified:",o);return}t.removeEventListener(da[o],f,!1)}function Rl(t){si[t.pointerId]=t}function Nl(t){si[t.pointerId]&&(si[t.pointerId]=t)}function ha(t){delete si[t.pointerId]}function Bd(){fa||(document.addEventListener(Ni,Rl,!0),document.addEventListener(ls,Nl,!0),document.addEventListener(Pl,ha,!0),document.addEventListener(Tl,ha,!0),fa=!0)}function cs(t,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var f in si)o.touches.push(si[f]);o.changedTouches=[o],t(o)}}function Zt(t,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&Wt(o),cs(t,o)}function Pd(t){var o={},f,v;for(v in t)f=t[v],o[v]=f&&f.bind?f.bind(t):f;return t=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var pa=200;function Fl(t,o){t.addEventListener("dblclick",o);var f=0,v;function T(O){if(O.detail!==1){v=O.detail;return}if(!(O.pointerType==="mouse"||O.sourceCapabilities&&!O.sourceCapabilities.firesTouchEvents)){var X=ci(O);if(!(X.some(function(me){return me instanceof HTMLLabelElement&&me.attributes.for})&&!X.some(function(me){return me instanceof HTMLInputElement||me instanceof HTMLSelectElement}))){var le=Date.now();le-f<=pa?(v++,v===2&&o(Pd(O))):v=1,f=le}}}return t.addEventListener("click",T),{dblclick:o,simDblclick:T}}function us(t,o){t.removeEventListener("dblclick",o.dblclick),t.removeEventListener("click",o.simDblclick)}var ma=Ii(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Fi=Ii(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),yo=Fi==="webkitTransition"||Fi==="OTransition"?Fi+"End":"transitionend";function Jn(t){return typeof t=="string"?document.getElementById(t):t}function _o(t,o){var f=t.style[o]||t.currentStyle&&t.currentStyle[o];if((!f||f==="auto")&&document.defaultView){var v=document.defaultView.getComputedStyle(t,null);f=v?v[o]:null}return f==="auto"?null:f}function it(t,o,f){var v=document.createElement(t);return v.className=o||"",f&&f.appendChild(v),v}function It(t){var o=t.parentNode;o&&o.removeChild(t)}function ds(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Li(t){var o=t.parentNode;o&&o.lastChild!==t&&o.appendChild(t)}function Sr(t){var o=t.parentNode;o&&o.firstChild!==t&&o.insertBefore(t,o.firstChild)}function Mi(t,o){if(t.classList!==void 0)return t.classList.contains(o);var f=fs(t);return f.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(f)}function tt(t,o){if(t.classList!==void 0)for(var f=N(o),v=0,T=f.length;v<T;v++)t.classList.add(f[v]);else if(!Mi(t,o)){var O=fs(t);ga(t,(O?O+" ":"")+o)}}function Lt(t,o){t.classList!==void 0?t.classList.remove(o):ga(t,k((" "+fs(t)+" ").replace(" "+o+" "," ")))}function ga(t,o){t.className.baseVal===void 0?t.className=o:t.className.baseVal=o}function fs(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function En(t,o){"opacity"in t.style?t.style.opacity=o:"filter"in t.style&&Ll(t,o)}function Ll(t,o){var f=!1,v="DXImageTransform.Microsoft.Alpha";try{f=t.filters.item(v)}catch{if(o===1)return}o=Math.round(o*100),f?(f.Enabled=o!==100,f.Opacity=o):t.style.filter+=" progid:"+v+"(opacity="+o+")"}function Ii(t){for(var o=document.documentElement.style,f=0;f<t.length;f++)if(t[f]in o)return t[f];return!1}function er(t,o,f){var v=o||new W(0,0);t.style[ma]=(Re.ie3d?"translate("+v.x+"px,"+v.y+"px)":"translate3d("+v.x+"px,"+v.y+"px,0)")+(f?" scale("+f+")":"")}function Xt(t,o){t._leaflet_pos=o,Re.any3d?er(t,o):(t.style.left=o.x+"px",t.style.top=o.y+"px")}function Br(t){return t._leaflet_pos||new W(0,0)}var _t,Oi,hs;if("onselectstart"in document)_t=function(){Xe(window,"selectstart",Wt)},Oi=function(){Tt(window,"selectstart",Wt)};else{var ai=Ii(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);_t=function(){if(ai){var t=document.documentElement.style;hs=t[ai],t[ai]="none"}},Oi=function(){ai&&(document.documentElement.style[ai]=hs,hs=void 0)}}function ps(){Xe(window,"dragstart",Wt)}function ms(){Tt(window,"dragstart",Wt)}var wo,bo;function ji(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(tr(),wo=t,bo=t.style.outlineStyle,t.style.outlineStyle="none",Xe(window,"keydown",tr))}function tr(){wo&&(wo.style.outlineStyle=bo,wo=void 0,bo=void 0,Tt(window,"keydown",tr))}function Pr(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function fr(t){var o=t.getBoundingClientRect();return{x:o.width/t.offsetWidth||1,y:o.height/t.offsetHeight||1,boundingClientRect:o}}var Co={__proto__:null,TRANSFORM:ma,TRANSITION:Fi,TRANSITION_END:yo,get:Jn,getStyle:_o,create:it,remove:It,empty:ds,toFront:Li,toBack:Sr,hasClass:Mi,addClass:tt,removeClass:Lt,setClass:ga,getClass:fs,setOpacity:En,testProp:Ii,setTransform:er,setPosition:Xt,getPosition:Br,get disableTextSelection(){return _t},get enableTextSelection(){return Oi},disableImageDrag:ps,enableImageDrag:ms,preventOutline:ji,restoreOutline:tr,getSizedParentNode:Pr,getScale:fr};function Xe(t,o,f,v){if(o&&typeof o=="object")for(var T in o)Aa(t,T,o[T],f);else{o=N(o);for(var O=0,X=o.length;O<X;O++)Aa(t,o[O],f,v)}return this}var an="_leaflet_events";function Tt(t,o,f,v){if(arguments.length===1)xa(t),delete t[an];else if(o&&typeof o=="object")for(var T in o)gs(t,T,o[T],f);else if(o=N(o),arguments.length===2)xa(t,function(le){return F(o,le)!==-1});else for(var O=0,X=o.length;O<X;O++)gs(t,o[O],f,v);return this}function xa(t,o){for(var f in t[an]){var v=f.split(/\d/)[0];(!o||o(v))&&gs(t,v,null,null,f)}}var li={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Aa(t,o,f,v){var T=o+g(f)+(v?"_"+g(v):"");if(t[an]&&t[an][T])return this;var O=function(le){return f.call(v||t,le||window.event)},X=O;!Re.touchNative&&Re.pointer&&o.indexOf("touch")===0?O=Sd(t,o,O):Re.touch&&o==="dblclick"?O=Fl(t,O):"addEventListener"in t?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?t.addEventListener(li[o]||o,O,Re.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(O=function(le){le=le||window.event,So(t,le)&&X(le)},t.addEventListener(li[o],O,!1)):t.addEventListener(o,X,!1):t.attachEvent("on"+o,O),t[an]=t[an]||{},t[an][T]=O}function gs(t,o,f,v,T){T=T||o+g(f)+(v?"_"+g(v):"");var O=t[an]&&t[an][T];if(!O)return this;!Re.touchNative&&Re.pointer&&o.indexOf("touch")===0?Dl(t,o,O):Re.touch&&o==="dblclick"?us(t,O):"removeEventListener"in t?t.removeEventListener(li[o]||o,O,!1):t.detachEvent("on"+o,O),t[an][T]=null}function hr(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function xs(t){return Aa(t,"wheel",hr),this}function Eo(t){return Xe(t,"mousedown touchstart dblclick contextmenu",hr),t._leaflet_disable_click=!0,this}function Wt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function nr(t){return Wt(t),hr(t),this}function ci(t){if(t.composedPath)return t.composedPath();for(var o=[],f=t.target;f;)o.push(f),f=f.parentNode;return o}function ko(t,o){if(!o)return new W(t.clientX,t.clientY);var f=fr(o),v=f.boundingClientRect;return new W((t.clientX-v.left)/f.x-o.clientLeft,(t.clientY-v.top)/f.y-o.clientTop)}var Td=Re.linux&&Re.chrome?window.devicePixelRatio:Re.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ml(t){return Re.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Td:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function So(t,o){var f=o.relatedTarget;if(!f)return!0;try{for(;f&&f!==t;)f=f.parentNode}catch{return!1}return f!==t}var As={__proto__:null,on:Xe,off:Tt,stopPropagation:hr,disableScrollPropagation:xs,disableClickPropagation:Eo,preventDefault:Wt,stop:nr,getPropagationPath:ci,getMousePosition:ko,getWheelDelta:Ml,isExternalTarget:So,addListener:Xe,removeListener:Tt},vs=de.extend({run:function(t,o,f,v){this.stop(),this._el=t,this._inProgress=!0,this._duration=f||.25,this._easeOutPower=1/Math.max(v||.5,.2),this._startPos=Br(t),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=K(this._animate,this),this._step()},_step:function(t){var o=+new Date-this._startTime,f=this._duration*1e3;o<f?this._runFrame(this._easeOut(o/f),t):(this._runFrame(1),this._complete())},_runFrame:function(t,o){var f=this._startPos.add(this._offset.multiplyBy(t));o&&f._round(),Xt(this._el,f),this.fire("step")},_complete:function(){ee(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),xt=de.extend({options:{crs:Be,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,o){o=C(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=p(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(ue(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Fi&&Re.any3d&&!Re.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Xe(this._proxy,yo,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,o,f){if(o=o===void 0?this._zoom:this._limitZoom(o),t=this._limitCenter(ue(t),o,this.options.maxBounds),f=f||{},this._stop(),this._loaded&&!f.reset&&f!==!0){f.animate!==void 0&&(f.zoom=c({animate:f.animate},f.zoom),f.pan=c({animate:f.animate,duration:f.duration},f.pan));var v=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,o,f.zoom):this._tryAnimatedPan(t,f.pan);if(v)return clearTimeout(this._sizeTimer),this}return this._resetView(t,o,f.pan&&f.pan.noMoveStart),this},setZoom:function(t,o){return this._loaded?this.setView(this.getCenter(),t,{zoom:o}):(this._zoom=t,this)},zoomIn:function(t,o){return t=t||(Re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,o)},zoomOut:function(t,o){return t=t||(Re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,o)},setZoomAround:function(t,o,f){var v=this.getZoomScale(o),T=this.getSize().divideBy(2),O=t instanceof W?t:this.latLngToContainerPoint(t),X=O.subtract(T).multiplyBy(1-1/v),le=this.containerPointToLatLng(T.add(X));return this.setView(le,o,{zoom:f})},_getBoundsCenterZoom:function(t,o){o=o||{},t=t.getBounds?t.getBounds():Q(t);var f=H(o.paddingTopLeft||o.padding||[0,0]),v=H(o.paddingBottomRight||o.padding||[0,0]),T=this.getBoundsZoom(t,!1,f.add(v));if(T=typeof o.maxZoom=="number"?Math.min(o.maxZoom,T):T,T===1/0)return{center:t.getCenter(),zoom:T};var O=v.subtract(f).divideBy(2),X=this.project(t.getSouthWest(),T),le=this.project(t.getNorthEast(),T),me=this.unproject(X.add(le).divideBy(2).add(O),T);return{center:me,zoom:T}},fitBounds:function(t,o){if(t=Q(t),!t.isValid())throw new Error("Bounds are not valid.");var f=this._getBoundsCenterZoom(t,o);return this.setView(f.center,f.zoom,o)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,o){return this.setView(t,this._zoom,{pan:o})},panBy:function(t,o){if(t=H(t).round(),o=o||{},!t.x&&!t.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new vs,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){tt(this._mapPane,"leaflet-pan-anim");var f=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,f,o.duration||.25,o.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,o,f){if(f=f||{},f.animate===!1||!Re.any3d)return this.setView(t,o,f);this._stop();var v=this.project(this.getCenter()),T=this.project(t),O=this.getSize(),X=this._zoom;t=ue(t),o=o===void 0?X:o;var le=Math.max(O.x,O.y),me=le*this.getZoomScale(X,o),ve=T.distanceTo(v)||1,Te=1.42,Ge=Te*Te;function st(St){var eo=St?-1:1,Zd=St?me:le,Wd=me*me-le*le+eo*Ge*Ge*ve*ve,gi=2*Zd*Ge*ve,xi=Wd/gi,Ai=Math.sqrt(xi*xi+1)-xi,Ns=Ai<1e-9?-18:Math.log(Ai);return Ns}function ln(St){return(Math.exp(St)-Math.exp(-St))/2}function rn(St){return(Math.exp(St)+Math.exp(-St))/2}function Ln(St){return ln(St)/rn(St)}var Sn=st(0);function Xi(St){return le*(rn(Sn)/rn(Sn+Te*St))}function ja(St){return le*(rn(Sn)*Ln(Sn+Te*St)-ln(Sn))/Ge}function Yr(St){return 1-Math.pow(1-St,1.5)}var rc=Date.now(),mi=(st(1)-Sn)/Te,xr=f.duration?1e3*f.duration:1e3*mi*.8;function Ji(){var St=(Date.now()-rc)/xr,eo=Yr(St)*mi;St<=1?(this._flyToFrame=K(Ji,this),this._move(this.unproject(v.add(T.subtract(v).multiplyBy(ja(eo)/ve)),X),this.getScaleZoom(le/Xi(eo),X),{flyTo:!0})):this._move(t,o)._moveEnd(!0)}return this._moveStart(!0,f.noMoveStart),Ji.call(this),this},flyToBounds:function(t,o){var f=this._getBoundsCenterZoom(t,o);return this.flyTo(f.center,f.zoom,o)},setMaxBounds:function(t){return t=Q(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var o=this.options.minZoom;return this.options.minZoom=t,this._loaded&&o!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var o=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&o!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,o){this._enforcingBounds=!0;var f=this.getCenter(),v=this._limitCenter(f,this._zoom,Q(t));return f.equals(v)||this.panTo(v,o),this._enforcingBounds=!1,this},panInside:function(t,o){o=o||{};var f=H(o.paddingTopLeft||o.padding||[0,0]),v=H(o.paddingBottomRight||o.padding||[0,0]),T=this.project(this.getCenter()),O=this.project(t),X=this.getPixelBounds(),le=V([X.min.add(f),X.max.subtract(v)]),me=le.getSize();if(!le.contains(O)){this._enforcingBounds=!0;var ve=O.subtract(le.getCenter()),Te=le.extend(O).getSize().subtract(me);T.x+=ve.x<0?-Te.x:Te.x,T.y+=ve.y<0?-Te.y:Te.y,this.panTo(this.unproject(T),o),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=c({animate:!1,pan:!0},t===!0?{animate:!0}:t);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var f=this.getSize(),v=o.divideBy(2).round(),T=f.divideBy(2).round(),O=v.subtract(T);return!O.x&&!O.y?this:(t.animate&&t.pan?this.panBy(O):(t.pan&&this._rawPanBy(O),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(p(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:f}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=c({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=p(this._handleGeolocationResponse,this),f=p(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,f,t):navigator.geolocation.getCurrentPosition(o,f,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var o=t.code,f=t.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+f+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var o=t.coords.latitude,f=t.coords.longitude,v=new pe(o,f),T=v.toBounds(t.coords.accuracy*2),O=this._locateOptions;if(O.setView){var X=this.getBoundsZoom(T);this.setView(v,O.maxZoom?Math.min(X,O.maxZoom):X)}var le={latlng:v,bounds:T,timestamp:t.timestamp};for(var me in t.coords)typeof t.coords[me]=="number"&&(le[me]=t.coords[me]);this.fire("locationfound",le)}},addHandler:function(t,o){if(!o)return this;var f=this[t]=new o(this);return this._handlers.push(f),this.options[t]&&f.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),It(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ee(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)It(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,o){var f="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),v=it("div",f,o||this._mapPane);return t&&(this._panes[t]=v),v},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),o=this.unproject(t.getBottomLeft()),f=this.unproject(t.getTopRight());return new q(o,f)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,o,f){t=Q(t),f=H(f||[0,0]);var v=this.getZoom()||0,T=this.getMinZoom(),O=this.getMaxZoom(),X=t.getNorthWest(),le=t.getSouthEast(),me=this.getSize().subtract(f),ve=V(this.project(le,v),this.project(X,v)).getSize(),Te=Re.any3d?this.options.zoomSnap:1,Ge=me.x/ve.x,st=me.y/ve.y,ln=o?Math.max(Ge,st):Math.min(Ge,st);return v=this.getScaleZoom(ln,v),Te&&(v=Math.round(v/(Te/100))*(Te/100),v=o?Math.ceil(v/Te)*Te:Math.floor(v/Te)*Te),Math.max(T,Math.min(O,v))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new W(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,o){var f=this._getTopLeftPoint(t,o);return new P(f,f.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,o){var f=this.options.crs;return o=o===void 0?this._zoom:o,f.scale(t)/f.scale(o)},getScaleZoom:function(t,o){var f=this.options.crs;o=o===void 0?this._zoom:o;var v=f.zoom(t*f.scale(o));return isNaN(v)?1/0:v},project:function(t,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(ue(t),o)},unproject:function(t,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(H(t),o)},layerPointToLatLng:function(t){var o=H(t).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(t){var o=this.project(ue(t))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(ue(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(Q(t))},distance:function(t,o){return this.options.crs.distance(ue(t),ue(o))},containerPointToLayerPoint:function(t){return H(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return H(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var o=this.containerPointToLayerPoint(H(t));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ue(t)))},mouseEventToContainerPoint:function(t){return ko(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var o=this._container=Jn(t);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Xe(o,"scroll",this._onScroll,this),this._containerId=g(o)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&Re.any3d,tt(t,"leaflet-container"+(Re.touch?" leaflet-touch":"")+(Re.retina?" leaflet-retina":"")+(Re.ielt9?" leaflet-oldie":"")+(Re.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=_o(t,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Xt(this._mapPane,new W(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(tt(t.markerPane,"leaflet-zoom-hide"),tt(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,o,f){Xt(this._mapPane,new W(0,0));var v=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var T=this._zoom!==o;this._moveStart(T,f)._move(t,o)._moveEnd(T),this.fire("viewreset"),v&&this.fire("load")},_moveStart:function(t,o){return t&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(t,o,f,v){o===void 0&&(o=this._zoom);var T=this._zoom!==o;return this._zoom=o,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),v?f&&f.pinch&&this.fire("zoom",f):((T||f&&f.pinch)&&this.fire("zoom",f),this.fire("move",f)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ee(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Xt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[g(this._container)]=this;var o=t?Tt:Xe;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),Re.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ee(this._resizeRequest),this._resizeRequest=K(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,o){for(var f=[],v,T=o==="mouseout"||o==="mouseover",O=t.target||t.srcElement,X=!1;O;){if(v=this._targets[g(O)],v&&(o==="click"||o==="preclick")&&this._draggableMoved(v)){X=!0;break}if(v&&v.listens(o,!0)&&(T&&!So(O,t)||(f.push(v),T))||O===this._container)break;O=O.parentNode}return!f.length&&!X&&!T&&this.listens(o,!0)&&(f=[this]),f},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var o=t.target||t.srcElement;if(!(!this._loaded||o._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(o))){var f=t.type;f==="mousedown"&&ji(o),this._fireDOMEvent(t,f)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,o,f){if(t.type==="click"){var v=c({},t);v.type="preclick",this._fireDOMEvent(v,v.type,f)}var T=this._findEventTargets(t,o);if(f){for(var O=[],X=0;X<f.length;X++)f[X].listens(o,!0)&&O.push(f[X]);T=O.concat(T)}if(T.length){o==="contextmenu"&&Wt(t);var le=T[0],me={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var ve=le.getLatLng&&(!le._radius||le._radius<=10);me.containerPoint=ve?this.latLngToContainerPoint(le.getLatLng()):this.mouseEventToContainerPoint(t),me.layerPoint=this.containerPointToLayerPoint(me.containerPoint),me.latlng=ve?le.getLatLng():this.layerPointToLatLng(me.layerPoint)}for(X=0;X<T.length;X++)if(T[X].fire(o,me,!0),me.originalEvent._stopped||T[X].options.bubblingMouseEvents===!1&&F(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,o=this._handlers.length;t<o;t++)this._handlers[t].disable()},whenReady:function(t,o){return this._loaded?t.call(o||this,{target:this}):this.on("load",t,o),this},_getMapPanePos:function(){return Br(this._mapPane)||new W(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,o){var f=t&&o!==void 0?this._getNewPixelOrigin(t,o):this.getPixelOrigin();return f.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,o){var f=this.getSize()._divideBy(2);return this.project(t,o)._subtract(f)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,o,f){var v=this._getNewPixelOrigin(f,o);return this.project(t,o)._subtract(v)},_latLngBoundsToNewLayerBounds:function(t,o,f){var v=this._getNewPixelOrigin(f,o);return V([this.project(t.getSouthWest(),o)._subtract(v),this.project(t.getNorthWest(),o)._subtract(v),this.project(t.getSouthEast(),o)._subtract(v),this.project(t.getNorthEast(),o)._subtract(v)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,o,f){if(!f)return t;var v=this.project(t,o),T=this.getSize().divideBy(2),O=new P(v.subtract(T),v.add(T)),X=this._getBoundsOffset(O,f,o);return Math.abs(X.x)<=1&&Math.abs(X.y)<=1?t:this.unproject(v.add(X),o)},_limitOffset:function(t,o){if(!o)return t;var f=this.getPixelBounds(),v=new P(f.min.add(t),f.max.add(t));return t.add(this._getBoundsOffset(v,o))},_getBoundsOffset:function(t,o,f){var v=V(this.project(o.getNorthEast(),f),this.project(o.getSouthWest(),f)),T=v.min.subtract(t.min),O=v.max.subtract(t.max),X=this._rebound(T.x,-O.x),le=this._rebound(T.y,-O.y);return new W(X,le)},_rebound:function(t,o){return t+o>0?Math.round(t-o)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(o))},_limitZoom:function(t){var o=this.getMinZoom(),f=this.getMaxZoom(),v=Re.any3d?this.options.zoomSnap:1;return v&&(t=Math.round(t/v)*v),Math.max(o,Math.min(f,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Lt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,o){var f=this._getCenterOffset(t)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(f)?!1:(this.panBy(f,o),!0)},_createAnimProxy:function(){var t=this._proxy=it("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(o){var f=ma,v=this._proxy.style[f];er(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),v===this._proxy.style[f]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){It(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),o=this.getZoom();er(this._proxy,this.project(t,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,o,f){if(this._animatingZoom)return!0;if(f=f||{},!this._zoomAnimated||f.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var v=this.getZoomScale(o),T=this._getCenterOffset(t)._divideBy(1-1/v);return f.animate!==!0&&!this.getSize().contains(T)?!1:(K(function(){this._moveStart(!0,f.noMoveStart||!1)._animateZoom(t,o,!0)},this),!0)},_animateZoom:function(t,o,f,v){this._mapPane&&(f&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=o,tt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:o,noUpdate:v}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(p(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Lt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Zr(t,o){return new xt(t,o)}var Nn=oe.extend({options:{position:"topright"},initialize:function(t){C(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var o=this._map;return o&&o.removeControl(this),this.options.position=t,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var o=this._container=this.onAdd(t),f=this.getPosition(),v=t._controlCorners[f];return tt(o,"leaflet-control"),f.indexOf("bottom")!==-1?v.insertBefore(o,v.firstChild):v.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(It(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Wr=function(t){return new Nn(t)};xt.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},o="leaflet-",f=this._controlContainer=it("div",o+"control-container",this._container);function v(T,O){var X=o+T+" "+o+O;t[T+O]=it("div",X,f)}v("top","left"),v("top","right"),v("bottom","left"),v("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)It(this._controlCorners[t]);It(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var va=Nn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,o,f,v){return f<v?-1:v<f?1:0}},initialize:function(t,o,f){C(this,f),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var v in t)this._addLayer(t[v],v);for(v in o)this._addLayer(o[v],v,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Nn.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,o){return this._addLayer(t,o),this._map?this._update():this},addOverlay:function(t,o){return this._addLayer(t,o,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var o=this._getLayer(g(t));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){tt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(tt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):Lt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Lt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",o=this._container=it("div",t),f=this.options.collapsed;o.setAttribute("aria-haspopup",!0),Eo(o),xs(o);var v=this._section=it("section",t+"-list");f&&(this._map.on("click",this.collapse,this),Xe(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var T=this._layersLink=it("a",t+"-toggle",o);T.href="#",T.title="Layers",T.setAttribute("role","button"),Xe(T,{keydown:function(O){O.keyCode===13&&this._expandSafely()},click:function(O){Wt(O),this._expandSafely()}},this),f||this.expand(),this._baseLayersList=it("div",t+"-base",v),this._separator=it("div",t+"-separator",v),this._overlaysList=it("div",t+"-overlays",v),o.appendChild(v)},_getLayer:function(t){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&g(this._layers[o].layer)===t)return this._layers[o]},_addLayer:function(t,o,f){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:o,overlay:f}),this.options.sortLayers&&this._layers.sort(p(function(v,T){return this.options.sortFunction(v.layer,T.layer,v.name,T.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ds(this._baseLayersList),ds(this._overlaysList),this._layerControlInputs=[];var t,o,f,v,T=0;for(f=0;f<this._layers.length;f++)v=this._layers[f],this._addItem(v),o=o||v.overlay,t=t||!v.overlay,T+=v.overlay?0:1;return this.options.hideSingleBase&&(t=t&&T>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=o&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var o=this._getLayer(g(t.target)),f=o.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;f&&this._map.fire(f,o)},_createRadioElement:function(t,o){var f='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(o?' checked="checked"':"")+"/>",v=document.createElement("div");return v.innerHTML=f,v.firstChild},_addItem:function(t){var o=document.createElement("label"),f=this._map.hasLayer(t.layer),v;t.overlay?(v=document.createElement("input"),v.type="checkbox",v.className="leaflet-control-layers-selector",v.defaultChecked=f):v=this._createRadioElement("leaflet-base-layers_"+g(this),f),this._layerControlInputs.push(v),v.layerId=g(t.layer),Xe(v,"click",this._onInputClick,this);var T=document.createElement("span");T.innerHTML=" "+t.name;var O=document.createElement("span");o.appendChild(O),O.appendChild(v),O.appendChild(T);var X=t.overlay?this._overlaysList:this._baseLayersList;return X.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,o,f,v=[],T=[];this._handlingClick=!0;for(var O=t.length-1;O>=0;O--)o=t[O],f=this._getLayer(o.layerId).layer,o.checked?v.push(f):o.checked||T.push(f);for(O=0;O<T.length;O++)this._map.hasLayer(T[O])&&this._map.removeLayer(T[O]);for(O=0;O<v.length;O++)this._map.hasLayer(v[O])||this._map.addLayer(v[O]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,o,f,v=this._map.getZoom(),T=t.length-1;T>=0;T--)o=t[T],f=this._getLayer(o.layerId).layer,o.disabled=f.options.minZoom!==void 0&&v<f.options.minZoom||f.options.maxZoom!==void 0&&v>f.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,Xe(t,"click",Wt),this.expand();var o=this;setTimeout(function(){Tt(t,"click",Wt),o._preventClick=!1})}}),ys=function(t,o,f){return new va(t,o,f)},zi=Nn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var o="leaflet-control-zoom",f=it("div",o+" leaflet-bar"),v=this.options;return this._zoomInButton=this._createButton(v.zoomInText,v.zoomInTitle,o+"-in",f,this._zoomIn),this._zoomOutButton=this._createButton(v.zoomOutText,v.zoomOutTitle,o+"-out",f,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),f},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,o,f,v,T){var O=it("a",f,v);return O.innerHTML=t,O.href="#",O.title=o,O.setAttribute("role","button"),O.setAttribute("aria-label",o),Eo(O),Xe(O,"click",nr),Xe(O,"click",T,this),Xe(O,"click",this._refocusOnMap,this),O},_updateDisabled:function(){var t=this._map,o="leaflet-disabled";Lt(this._zoomInButton,o),Lt(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(tt(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(tt(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});xt.mergeOptions({zoomControl:!0}),xt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new zi,this.addControl(this.zoomControl))});var Il=function(t){return new zi(t)},kn=Nn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var o="leaflet-control-scale",f=it("div",o),v=this.options;return this._addScales(v,o+"-line",f),t.on(v.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),f},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,o,f){t.metric&&(this._mScale=it("div",o,f)),t.imperial&&(this._iScale=it("div",o,f))},_update:function(){var t=this._map,o=t.getSize().y/2,f=t.distance(t.containerPointToLatLng([0,o]),t.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(f)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var o=this._getRoundNum(t),f=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,f,o/t)},_updateImperial:function(t){var o=t*3.2808399,f,v,T;o>5280?(f=o/5280,v=this._getRoundNum(f),this._updateScale(this._iScale,v+" mi",v/f)):(T=this._getRoundNum(o),this._updateScale(this._iScale,T+" ft",T/o))},_updateScale:function(t,o,f){t.style.width=Math.round(this.options.maxWidth*f)+"px",t.innerHTML=o},_getRoundNum:function(t){var o=Math.pow(10,(Math.floor(t)+"").length-1),f=t/o;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:1,o*f}}),Hi=function(t){return new kn(t)},ya='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ui=Nn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Re.inlineSvg?ya+" ":"")+"Leaflet</a>"},initialize:function(t){C(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=it("div","leaflet-control-attribution"),Eo(this._container);for(var o in t._layers)t._layers[o].getAttribution&&this.addAttribution(t._layers[o].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var o in this._attributions)this._attributions[o]&&t.push(o);var f=[];this.options.prefix&&f.push(this.options.prefix),t.length&&f.push(t.join(", ")),this._container.innerHTML=f.join(' <span aria-hidden="true">|</span> ')}}});xt.mergeOptions({attributionControl:!0}),xt.addInitHook(function(){this.options.attributionControl&&new ui().addTo(this)});var Dd=function(t){return new ui(t)};Nn.Layers=va,Nn.Zoom=zi,Nn.Scale=kn,Nn.Attribution=ui,Wr.layers=ys,Wr.zoom=Il,Wr.scale=Hi,Wr.attribution=Dd;var Vn=oe.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Vn.addTo=function(t,o){return t.addHandler(o,this),this};var _a={Events:Y},Vi=Re.touch?"touchstart mousedown":"mousedown",rr=de.extend({options:{clickTolerance:3},initialize:function(t,o,f,v){C(this,v),this._element=t,this._dragStartTarget=o||t,this._preventOutline=f},enable:function(){this._enabled||(Xe(this._dragStartTarget,Vi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(rr._dragging===this&&this.finishDrag(!0),Tt(this._dragStartTarget,Vi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!Mi(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){rr._dragging===this&&this.finishDrag();return}if(!(rr._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(rr._dragging=this,this._preventOutline&&ji(this._element),ps(),_t(),!this._moving)){this.fire("down");var o=t.touches?t.touches[0]:t,f=Pr(this._element);this._startPoint=new W(o.clientX,o.clientY),this._startPos=Br(this._element),this._parentScale=fr(f);var v=t.type==="mousedown";Xe(document,v?"mousemove":"touchmove",this._onMove,this),Xe(document,v?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var o=t.touches&&t.touches.length===1?t.touches[0]:t,f=new W(o.clientX,o.clientY)._subtract(this._startPoint);!f.x&&!f.y||Math.abs(f.x)+Math.abs(f.y)<this.options.clickTolerance||(f.x/=this._parentScale.x,f.y/=this._parentScale.y,Wt(t),this._moved||(this.fire("dragstart"),this._moved=!0,tt(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),tt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Xt(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){Lt(document.body,"leaflet-dragging"),this._lastTarget&&(Lt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Tt(document,"mousemove touchmove",this._onMove,this),Tt(document,"mouseup touchend touchcancel",this._onUp,this),ms(),Oi();var o=this._moved&&this._moving;this._moving=!1,rr._dragging=!1,o&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function wa(t,o,f){var v,T=[1,4,2,8],O,X,le,me,ve,Te,Ge,st;for(O=0,Te=t.length;O<Te;O++)t[O]._code=di(t[O],o);for(le=0;le<4;le++){for(Ge=T[le],v=[],O=0,Te=t.length,X=Te-1;O<Te;X=O++)me=t[O],ve=t[X],me._code&Ge?ve._code&Ge||(st=ws(ve,me,Ge,o,f),st._code=di(st,o),v.push(st)):(ve._code&Ge&&(st=ws(ve,me,Ge,o,f),st._code=di(st,o),v.push(st)),v.push(me));t=v}return t}function Ol(t,o){var f,v,T,O,X,le,me,ve,Te;if(!t||t.length===0)throw new Error("latlngs not passed");Un(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var Ge=ue([0,0]),st=Q(t),ln=st.getNorthWest().distanceTo(st.getSouthWest())*st.getNorthEast().distanceTo(st.getNorthWest());ln<1700&&(Ge=ba(t));var rn=t.length,Ln=[];for(f=0;f<rn;f++){var Sn=ue(t[f]);Ln.push(o.project(ue([Sn.lat-Ge.lat,Sn.lng-Ge.lng])))}for(le=me=ve=0,f=0,v=rn-1;f<rn;v=f++)T=Ln[f],O=Ln[v],X=T.y*O.x-O.y*T.x,me+=(T.x+O.x)*X,ve+=(T.y+O.y)*X,le+=X*3;le===0?Te=Ln[0]:Te=[me/le,ve/le];var Xi=o.unproject(H(Te));return ue([Xi.lat+Ge.lat,Xi.lng+Ge.lng])}function ba(t){for(var o=0,f=0,v=0,T=0;T<t.length;T++){var O=ue(t[T]);o+=O.lat,f+=O.lng,v++}return ue([o/v,f/v])}var Rd={__proto__:null,clipPolygon:wa,polygonCenter:Ol,centroid:ba};function _s(t,o){if(!o||!t.length)return t.slice();var f=o*o;return t=Ld(t,f),t=Fd(t,f),t}function jl(t,o,f){return Math.sqrt(fi(t,o,f,!0))}function Nd(t,o,f){return fi(t,o,f)}function Fd(t,o){var f=t.length,v=typeof Uint8Array<"u"?Uint8Array:Array,T=new v(f);T[0]=T[f-1]=1,Ca(t,T,o,0,f-1);var O,X=[];for(O=0;O<f;O++)T[O]&&X.push(t[O]);return X}function Ca(t,o,f,v,T){var O=0,X,le,me;for(le=v+1;le<=T-1;le++)me=fi(t[le],t[v],t[T],!0),me>O&&(X=le,O=me);O>f&&(o[X]=1,Ca(t,o,f,v,X),Ca(t,o,f,X,T))}function Ld(t,o){for(var f=[t[0]],v=1,T=0,O=t.length;v<O;v++)Md(t[v],t[T])>o&&(f.push(t[v]),T=v);return T<O-1&&f.push(t[O-1]),f}var Ea;function zl(t,o,f,v,T){var O=v?Ea:di(t,f),X=di(o,f),le,me,ve;for(Ea=X;;){if(!(O|X))return[t,o];if(O&X)return!1;le=O||X,me=ws(t,o,le,f,T),ve=di(me,f),le===O?(t=me,O=ve):(o=me,X=ve)}}function ws(t,o,f,v,T){var O=o.x-t.x,X=o.y-t.y,le=v.min,me=v.max,ve,Te;return f&8?(ve=t.x+O*(me.y-t.y)/X,Te=me.y):f&4?(ve=t.x+O*(le.y-t.y)/X,Te=le.y):f&2?(ve=me.x,Te=t.y+X*(me.x-t.x)/O):f&1&&(ve=le.x,Te=t.y+X*(le.x-t.x)/O),new W(ve,Te,T)}function di(t,o){var f=0;return t.x<o.min.x?f|=1:t.x>o.max.x&&(f|=2),t.y<o.min.y?f|=4:t.y>o.max.y&&(f|=8),f}function Md(t,o){var f=o.x-t.x,v=o.y-t.y;return f*f+v*v}function fi(t,o,f,v){var T=o.x,O=o.y,X=f.x-T,le=f.y-O,me=X*X+le*le,ve;return me>0&&(ve=((t.x-T)*X+(t.y-O)*le)/me,ve>1?(T=f.x,O=f.y):ve>0&&(T+=X*ve,O+=le*ve)),X=t.x-T,le=t.y-O,v?X*X+le*le:new W(T,O)}function Un(t){return!D(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Hl(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Un(t)}function Vl(t,o){var f,v,T,O,X,le,me,ve;if(!t||t.length===0)throw new Error("latlngs not passed");Un(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var Te=ue([0,0]),Ge=Q(t),st=Ge.getNorthWest().distanceTo(Ge.getSouthWest())*Ge.getNorthEast().distanceTo(Ge.getNorthWest());st<1700&&(Te=ba(t));var ln=t.length,rn=[];for(f=0;f<ln;f++){var Ln=ue(t[f]);rn.push(o.project(ue([Ln.lat-Te.lat,Ln.lng-Te.lng])))}for(f=0,v=0;f<ln-1;f++)v+=rn[f].distanceTo(rn[f+1])/2;if(v===0)ve=rn[0];else for(f=0,O=0;f<ln-1;f++)if(X=rn[f],le=rn[f+1],T=X.distanceTo(le),O+=T,O>v){me=(O-v)/T,ve=[le.x-me*(le.x-X.x),le.y-me*(le.y-X.y)];break}var Sn=o.unproject(H(ve));return ue([Sn.lat+Te.lat,Sn.lng+Te.lng])}var Ul={__proto__:null,simplify:_s,pointToSegmentDistance:jl,closestPointOnSegment:Nd,clipSegment:zl,_getEdgeIntersection:ws,_getBitCode:di,_sqClosestPointOnSegment:fi,isFlat:Un,_flat:Hl,polylineCenter:Vl},ka={project:function(t){return new W(t.lng,t.lat)},unproject:function(t){return new pe(t.y,t.x)},bounds:new P([-180,-90],[180,90])},Sa={R:6378137,R_MINOR:6356752314245179e-9,bounds:new P([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var o=Math.PI/180,f=this.R,v=t.lat*o,T=this.R_MINOR/f,O=Math.sqrt(1-T*T),X=O*Math.sin(v),le=Math.tan(Math.PI/4-v/2)/Math.pow((1-X)/(1+X),O/2);return v=-f*Math.log(Math.max(le,1e-10)),new W(t.lng*o*f,v)},unproject:function(t){for(var o=180/Math.PI,f=this.R,v=this.R_MINOR/f,T=Math.sqrt(1-v*v),O=Math.exp(-t.y/f),X=Math.PI/2-2*Math.atan(O),le=0,me=.1,ve;le<15&&Math.abs(me)>1e-7;le++)ve=T*Math.sin(X),ve=Math.pow((1-ve)/(1+ve),T/2),me=Math.PI/2-2*Math.atan(O*ve)-X,X+=me;return new pe(X*o,t.x*o/f)}},Id={__proto__:null,LonLat:ka,Mercator:Sa,SphericalMercator:We},Od=c({},he,{code:"EPSG:3395",projection:Sa,transformation:(function(){var t=.5/(Math.PI*Sa.R);return ot(t,.5,-t,.5)})()}),Zl=c({},he,{code:"EPSG:4326",projection:ka,transformation:ot(1/180,1,-1/180,.5)}),jd=c({},se,{projection:ka,transformation:ot(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,o){var f=o.lng-t.lng,v=o.lat-t.lat;return Math.sqrt(f*f+v*v)},infinite:!0});se.Earth=he,se.EPSG3395=Od,se.EPSG3857=Be,se.EPSG900913=Ie,se.EPSG4326=Zl,se.Simple=jd;var ir=de.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[g(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[g(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var o=t.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var f=this.getEvents();o.on(f,this),this.once("remove",function(){o.off(f,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});xt.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var o=g(t);return this._layers[o]?this:(this._layers[o]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var o=g(t);return this._layers[o]?(this._loaded&&t.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return g(t)in this._layers},eachLayer:function(t,o){for(var f in this._layers)t.call(o,this._layers[f]);return this},_addLayers:function(t){t=t?D(t)?t:[t]:[];for(var o=0,f=t.length;o<f;o++)this.addLayer(t[o])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[g(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var o=g(t);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,o=-1/0,f=this._getZoomSpan();for(var v in this._zoomBoundLayers){var T=this._zoomBoundLayers[v].options;t=T.minZoom===void 0?t:Math.min(t,T.minZoom),o=T.maxZoom===void 0?o:Math.max(o,T.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=t===1/0?void 0:t,f!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var qr=ir.extend({initialize:function(t,o){C(this,o),this._layers={};var f,v;if(t)for(f=0,v=t.length;f<v;f++)this.addLayer(t[f])},addLayer:function(t){var o=this.getLayerId(t);return this._layers[o]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var o=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(t){var o=typeof t=="number"?t:this.getLayerId(t);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var o=Array.prototype.slice.call(arguments,1),f,v;for(f in this._layers)v=this._layers[f],v[t]&&v[t].apply(v,o);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,o){for(var f in this._layers)t.call(o,this._layers[f]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return g(t)}}),Bo=function(t,o){return new qr(t,o)},Tr=qr.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),qr.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),qr.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new q;for(var o in this._layers){var f=this._layers[o];t.extend(f.getBounds?f.getBounds():f.getLatLng())}return t}}),Wl=function(t,o){return new Tr(t,o)},hi=oe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){C(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,o){var f=this._getIconUrl(t);if(!f){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var v=this._createImg(f,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(v,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),v},_setIconStyles:function(t,o){var f=this.options,v=f[o+"Size"];typeof v=="number"&&(v=[v,v]);var T=H(v),O=H(o==="shadow"&&f.shadowAnchor||f.iconAnchor||T&&T.divideBy(2,!0));t.className="leaflet-marker-"+o+" "+(f.className||""),O&&(t.style.marginLeft=-O.x+"px",t.style.marginTop=-O.y+"px"),T&&(t.style.width=T.x+"px",t.style.height=T.y+"px")},_createImg:function(t,o){return o=o||document.createElement("img"),o.src=t,o},_getIconUrl:function(t){return Re.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function ql(t){return new hi(t)}var Ui=hi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Ui.imagePath!="string"&&(Ui.imagePath=this._detectIconPath()),(this.options.imagePath||Ui.imagePath)+hi.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var o=function(f,v,T){var O=v.exec(f);return O&&O[T]};return t=o(t,/^url\((['"])?(.+)\1\)$/,2),t&&o(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=it("div","leaflet-default-icon-path",document.body),o=_o(t,"background-image")||_o(t,"backgroundImage");if(document.body.removeChild(t),o=this._stripUrl(o),o)return o;var f=document.querySelector('link[href$="leaflet.css"]');return f?f.href.substring(0,f.href.length-11-1):""}}),Ba=Vn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new rr(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),tt(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Lt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var o=this._marker,f=o._map,v=this._marker.options.autoPanSpeed,T=this._marker.options.autoPanPadding,O=Br(o._icon),X=f.getPixelBounds(),le=f.getPixelOrigin(),me=V(X.min._subtract(le).add(T),X.max._subtract(le).subtract(T));if(!me.contains(O)){var ve=H((Math.max(me.max.x,O.x)-me.max.x)/(X.max.x-me.max.x)-(Math.min(me.min.x,O.x)-me.min.x)/(X.min.x-me.min.x),(Math.max(me.max.y,O.y)-me.max.y)/(X.max.y-me.max.y)-(Math.min(me.min.y,O.y)-me.min.y)/(X.min.y-me.min.y)).multiplyBy(v);f.panBy(ve,{animate:!1}),this._draggable._newPos._add(ve),this._draggable._startPos._add(ve),Xt(o._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=K(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(ee(this._panRequest),this._panRequest=K(this._adjustPan.bind(this,t)))},_onDrag:function(t){var o=this._marker,f=o._shadow,v=Br(o._icon),T=o._map.layerPointToLatLng(v);f&&Xt(f,v),o._latlng=T,t.latlng=T,t.oldLatLng=this._oldLatLng,o.fire("move",t).fire("drag",t)},_onDragEnd:function(t){ee(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Dr=ir.extend({options:{icon:new Ui,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,o){C(this,o),this._latlng=ue(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var o=this._latlng;return this._latlng=ue(t),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),f=t.icon.createIcon(this._icon),v=!1;f!==this._icon&&(this._icon&&this._removeIcon(),v=!0,t.title&&(f.title=t.title),f.tagName==="IMG"&&(f.alt=t.alt||"")),tt(f,o),t.keyboard&&(f.tabIndex="0",f.setAttribute("role","button")),this._icon=f,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Xe(f,"focus",this._panOnFocus,this);var T=t.icon.createShadow(this._shadow),O=!1;T!==this._shadow&&(this._removeShadow(),O=!0),T&&(tt(T,o),T.alt=""),this._shadow=T,t.opacity<1&&this._updateOpacity(),v&&this.getPane().appendChild(this._icon),this._initInteraction(),T&&O&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Tt(this._icon,"focus",this._panOnFocus,this),It(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&It(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&Xt(this._icon,t),this._shadow&&Xt(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(tt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ba)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ba(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&En(this._icon,t),this._shadow&&En(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var o=this.options.icon.options,f=o.iconSize?H(o.iconSize):H(0,0),v=o.iconAnchor?H(o.iconAnchor):H(0,0);t.panInside(this._latlng,{paddingTopLeft:v,paddingBottomRight:f.subtract(v)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function zd(t,o){return new Dr(t,o)}var Gr=ir.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return C(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),bs=Gr.extend({options:{fill:!0,radius:10},initialize:function(t,o){C(this,o),this._latlng=ue(t),this._radius=this.options.radius},setLatLng:function(t){var o=this._latlng;return this._latlng=ue(t),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var o=t&&t.radius||this._radius;return Gr.prototype.setStyle.call(this,t),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,o=this._radiusY||t,f=this._clickTolerance(),v=[t+f,o+f];this._pxBounds=new P(this._point.subtract(v),this._point.add(v))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Gl(t,o){return new bs(t,o)}var Cs=bs.extend({initialize:function(t,o,f){if(typeof o=="number"&&(o=c({},f,{radius:o})),C(this,o),this._latlng=ue(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new q(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Gr.prototype.setStyle,_project:function(){var t=this._latlng.lng,o=this._latlng.lat,f=this._map,v=f.options.crs;if(v.distance===he.distance){var T=Math.PI/180,O=this._mRadius/he.R/T,X=f.project([o+O,t]),le=f.project([o-O,t]),me=X.add(le).divideBy(2),ve=f.unproject(me).lat,Te=Math.acos((Math.cos(O*T)-Math.sin(o*T)*Math.sin(ve*T))/(Math.cos(o*T)*Math.cos(ve*T)))/T;(isNaN(Te)||Te===0)&&(Te=O/Math.cos(Math.PI/180*o)),this._point=me.subtract(f.getPixelOrigin()),this._radius=isNaN(Te)?0:me.x-f.project([ve,t-Te]).x,this._radiusY=me.y-X.y}else{var Ge=v.unproject(v.project(this._latlng).subtract([this._mRadius,0]));this._point=f.latLngToLayerPoint(this._latlng),this._radius=this._point.x-f.latLngToLayerPoint(Ge).x}this._updateBounds()}});function Po(t,o,f){return new Cs(t,o,f)}var Fn=Gr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,o){C(this,o),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var o=1/0,f=null,v=fi,T,O,X=0,le=this._parts.length;X<le;X++)for(var me=this._parts[X],ve=1,Te=me.length;ve<Te;ve++){T=me[ve-1],O=me[ve];var Ge=v(t,T,O,!0);Ge<o&&(o=Ge,f=v(t,T,O))}return f&&(f.distance=Math.sqrt(o)),f},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Vl(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,o){return o=o||this._defaultShape(),t=ue(t),o.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new q,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Un(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var o=[],f=Un(t),v=0,T=t.length;v<T;v++)f?(o[v]=ue(t[v]),this._bounds.extend(o[v])):o[v]=this._convertLatLngs(t[v]);return o},_project:function(){var t=new P;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),o=new W(t,t);this._rawPxBounds&&(this._pxBounds=new P([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(t,o,f){var v=t[0]instanceof pe,T=t.length,O,X;if(v){for(X=[],O=0;O<T;O++)X[O]=this._map.latLngToLayerPoint(t[O]),f.extend(X[O]);o.push(X)}else for(O=0;O<T;O++)this._projectLatlngs(t[O],o,f)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,f,v,T,O,X,le,me;for(f=0,T=0,O=this._rings.length;f<O;f++)for(me=this._rings[f],v=0,X=me.length;v<X-1;v++)le=zl(me[v],me[v+1],t,v,!0),le&&(o[T]=o[T]||[],o[T].push(le[0]),(le[1]!==me[v+1]||v===X-2)&&(o[T].push(le[1]),T++))}},_simplifyPoints:function(){for(var t=this._parts,o=this.options.smoothFactor,f=0,v=t.length;f<v;f++)t[f]=_s(t[f],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,o){var f,v,T,O,X,le,me=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(f=0,O=this._parts.length;f<O;f++)for(le=this._parts[f],v=0,X=le.length,T=X-1;v<X;T=v++)if(!(!o&&v===0)&&jl(t,le[T],le[v])<=me)return!0;return!1}});function Hd(t,o){return new Fn(t,o)}Fn._flat=Hl;var Rr=Fn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ol(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var o=Fn.prototype._convertLatLngs.call(this,t),f=o.length;return f>=2&&o[0]instanceof pe&&o[0].equals(o[f-1])&&o.pop(),o},_setLatLngs:function(t){Fn.prototype._setLatLngs.call(this,t),Un(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Un(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,o=this.options.weight,f=new W(o,o);if(t=new P(t.min.subtract(f),t.max.add(f)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var v=0,T=this._rings.length,O;v<T;v++)O=wa(this._rings[v],t,!0),O.length&&this._parts.push(O)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var o=!1,f,v,T,O,X,le,me,ve;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(O=0,me=this._parts.length;O<me;O++)for(f=this._parts[O],X=0,ve=f.length,le=ve-1;X<ve;le=X++)v=f[X],T=f[le],v.y>t.y!=T.y>t.y&&t.x<(T.x-v.x)*(t.y-v.y)/(T.y-v.y)+v.x&&(o=!o);return o||Fn.prototype._containsPoint.call(this,t,!0)}});function Vd(t,o){return new Rr(t,o)}var pr=Tr.extend({initialize:function(t,o){C(this,o),this._layers={},t&&this.addData(t)},addData:function(t){var o=D(t)?t:t.features,f,v,T;if(o){for(f=0,v=o.length;f<v;f++)T=o[f],(T.geometries||T.geometry||T.features||T.coordinates)&&this.addData(T);return this}var O=this.options;if(O.filter&&!O.filter(t))return this;var X=Zi(t,O);return X?(X.feature=Ps(t),X.defaultOptions=X.options,this.resetStyle(X),O.onEachFeature&&O.onEachFeature(t,X),this.addLayer(X)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=c({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(o){this._setLayerStyle(o,t)},this)},_setLayerStyle:function(t,o){t.setStyle&&(typeof o=="function"&&(o=o(t.feature)),t.setStyle(o))}});function Zi(t,o){var f=t.type==="Feature"?t.geometry:t,v=f?f.coordinates:null,T=[],O=o&&o.pointToLayer,X=o&&o.coordsToLatLng||ks,le,me,ve,Te;if(!v&&!f)return null;switch(f.type){case"Point":return le=X(v),Es(O,t,le,o);case"MultiPoint":for(ve=0,Te=v.length;ve<Te;ve++)le=X(v[ve]),T.push(Es(O,t,le,o));return new Tr(T);case"LineString":case"MultiLineString":return me=To(v,f.type==="LineString"?0:1,X),new Fn(me,o);case"Polygon":case"MultiPolygon":return me=To(v,f.type==="Polygon"?1:2,X),new Rr(me,o);case"GeometryCollection":for(ve=0,Te=f.geometries.length;ve<Te;ve++){var Ge=Zi({geometry:f.geometries[ve],type:"Feature",properties:t.properties},o);Ge&&T.push(Ge)}return new Tr(T);case"FeatureCollection":for(ve=0,Te=f.features.length;ve<Te;ve++){var st=Zi(f.features[ve],o);st&&T.push(st)}return new Tr(T);default:throw new Error("Invalid GeoJSON object.")}}function Es(t,o,f,v){return t?t(o,f):new Dr(f,v&&v.markersInheritOptions&&v)}function ks(t){return new pe(t[1],t[0],t[2])}function To(t,o,f){for(var v=[],T=0,O=t.length,X;T<O;T++)X=o?To(t[T],o-1,f):(f||ks)(t[T]),v.push(X);return v}function Ss(t,o){return t=ue(t),t.alt!==void 0?[_(t.lng,o),_(t.lat,o),_(t.alt,o)]:[_(t.lng,o),_(t.lat,o)]}function Bs(t,o,f,v){for(var T=[],O=0,X=t.length;O<X;O++)T.push(o?Bs(t[O],Un(t[O])?0:o-1,f,v):Ss(t[O],v));return!o&&f&&T.length>0&&T.push(T[0].slice()),T}function Wi(t,o){return t.feature?c({},t.feature,{geometry:o}):Ps(o)}function Ps(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Pa={toGeoJSON:function(t){return Wi(this,{type:"Point",coordinates:Ss(this.getLatLng(),t)})}};Dr.include(Pa),Cs.include(Pa),bs.include(Pa),Fn.include({toGeoJSON:function(t){var o=!Un(this._latlngs),f=Bs(this._latlngs,o?1:0,!1,t);return Wi(this,{type:(o?"Multi":"")+"LineString",coordinates:f})}}),Rr.include({toGeoJSON:function(t){var o=!Un(this._latlngs),f=o&&!Un(this._latlngs[0]),v=Bs(this._latlngs,f?2:o?1:0,!0,t);return o||(v=[v]),Wi(this,{type:(f?"Multi":"")+"Polygon",coordinates:v})}}),qr.include({toMultiPoint:function(t){var o=[];return this.eachLayer(function(f){o.push(f.toGeoJSON(t).geometry.coordinates)}),Wi(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(t){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(t);var f=o==="GeometryCollection",v=[];return this.eachLayer(function(T){if(T.toGeoJSON){var O=T.toGeoJSON(t);if(f)v.push(O.geometry);else{var X=Ps(O);X.type==="FeatureCollection"?v.push.apply(v,X.features):v.push(X)}}}),f?Wi(this,{geometries:v,type:"GeometryCollection"}):{type:"FeatureCollection",features:v}}});function $l(t,o){return new pr(t,o)}var or=$l,$r=ir.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,o,f){this._url=t,this._bounds=Q(o),C(this,f)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(tt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){It(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Li(this._image),this},bringToBack:function(){return this._map&&Sr(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=Q(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",o=this._image=t?this._url:it("img");if(tt(o,"leaflet-image-layer"),this._zoomAnimated&&tt(o,"leaflet-zoom-animated"),this.options.className&&tt(o,this.options.className),o.onselectstart=A,o.onmousemove=A,o.onload=p(this.fire,this,"load"),o.onerror=p(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(t){var o=this._map.getZoomScale(t.zoom),f=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;er(this._image,f,o)},_reset:function(){var t=this._image,o=new P(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),f=o.getSize();Xt(t,o.min),t.style.width=f.x+"px",t.style.height=f.y+"px"},_updateOpacity:function(){En(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Kl=function(t,o,f){return new $r(t,o,f)},Ta=$r.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",o=this._image=t?this._url:it("video");if(tt(o,"leaflet-image-layer"),this._zoomAnimated&&tt(o,"leaflet-zoom-animated"),this.options.className&&tt(o,this.options.className),o.onselectstart=A,o.onmousemove=A,o.onloadeddata=p(this.fire,this,"load"),t){for(var f=o.getElementsByTagName("source"),v=[],T=0;T<f.length;T++)v.push(f[T].src);this._url=f.length>0?v:[o.src];return}D(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var O=0;O<this._url.length;O++){var X=it("source");X.src=this._url[O],o.appendChild(X)}}});function Ql(t,o,f){return new Ta(t,o,f)}var Da=$r.extend({_initImage:function(){var t=this._image=this._url;tt(t,"leaflet-image-layer"),this._zoomAnimated&&tt(t,"leaflet-zoom-animated"),this.options.className&&tt(t,this.options.className),t.onselectstart=A,t.onmousemove=A}});function Ra(t,o,f){return new Da(t,o,f)}var mr=ir.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,o){t&&(t instanceof pe||D(t))?(this._latlng=ue(t),C(this,o)):(C(this,t),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&En(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&En(this._container,1),this.bringToFront(),this.options.interactive&&(tt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(En(this._container,0),this._removeTimeout=setTimeout(p(It,void 0,this._container),200)):It(this._container),this.options.interactive&&(Lt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=ue(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Li(this._container),this},bringToBack:function(){return this._map&&Sr(this._container),this},_prepareOpen:function(t){var o=this._source;if(!o._map)return!1;if(o instanceof Tr){o=null;var f=this._source._layers;for(var v in f)if(f[v]._map){o=f[v];break}if(!o)return!1;this._source=o}if(!t)if(o.getCenter)t=o.getCenter();else if(o.getLatLng)t=o.getLatLng();else if(o.getBounds)t=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")t.innerHTML=o;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),o=H(this.options.offset),f=this._getAnchor();this._zoomAnimated?Xt(this._container,t.add(f)):o=o.add(t).add(f);var v=this._containerBottom=-o.y,T=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=v+"px",this._container.style.left=T+"px"}},_getAnchor:function(){return[0,0]}});xt.include({_initOverlay:function(t,o,f,v){var T=o;return T instanceof t||(T=new t(v).setContent(o)),f&&T.setLatLng(f),T}}),ir.include({_initOverlay:function(t,o,f,v){var T=f;return T instanceof t?(C(T,v),T._source=this):(T=o&&!v?o:new t(v,this),T.setContent(f)),T}});var Ts=mr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,mr.prototype.openOn.call(this,t)},onAdd:function(t){mr.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Gr||this._source.on("preclick",hr))},onRemove:function(t){mr.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Gr||this._source.off("preclick",hr))},getEvents:function(){var t=mr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",o=this._container=it("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),f=this._wrapper=it("div",t+"-content-wrapper",o);if(this._contentNode=it("div",t+"-content",f),Eo(o),xs(this._contentNode),Xe(o,"contextmenu",hr),this._tipContainer=it("div",t+"-tip-container",o),this._tip=it("div",t+"-tip",this._tipContainer),this.options.closeButton){var v=this._closeButton=it("a",t+"-close-button",o);v.setAttribute("role","button"),v.setAttribute("aria-label","Close popup"),v.href="#close",v.innerHTML='<span aria-hidden="true">&#215;</span>',Xe(v,"click",function(T){Wt(T),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,o=t.style;o.width="",o.whiteSpace="nowrap";var f=t.offsetWidth;f=Math.min(f,this.options.maxWidth),f=Math.max(f,this.options.minWidth),o.width=f+1+"px",o.whiteSpace="",o.height="";var v=t.offsetHeight,T=this.options.maxHeight,O="leaflet-popup-scrolled";T&&v>T?(o.height=T+"px",tt(t,O)):Lt(t,O),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),f=this._getAnchor();Xt(this._container,o.add(f))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,o=parseInt(_o(this._container,"marginBottom"),10)||0,f=this._container.offsetHeight+o,v=this._containerWidth,T=new W(this._containerLeft,-f-this._containerBottom);T._add(Br(this._container));var O=t.layerPointToContainerPoint(T),X=H(this.options.autoPanPadding),le=H(this.options.autoPanPaddingTopLeft||X),me=H(this.options.autoPanPaddingBottomRight||X),ve=t.getSize(),Te=0,Ge=0;O.x+v+me.x>ve.x&&(Te=O.x+v-ve.x+me.x),O.x-Te-le.x<0&&(Te=O.x-le.x),O.y+f+me.y>ve.y&&(Ge=O.y+f-ve.y+me.y),O.y-Ge-le.y<0&&(Ge=O.y-le.y),(Te||Ge)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([Te,Ge]))}},_getAnchor:function(){return H(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),qi=function(t,o){return new Ts(t,o)};xt.mergeOptions({closePopupOnClick:!0}),xt.include({openPopup:function(t,o,f){return this._initOverlay(Ts,t,o,f).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),ir.include({bindPopup:function(t,o){return this._popup=this._initOverlay(Ts,this._popup,t,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Tr||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){nr(t);var o=t.layer||t.target;if(this._popup._source===o&&!(o instanceof Gr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=o,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Gi=mr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){mr.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){mr.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=mr.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",o=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=it("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+g(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var o,f,v=this._map,T=this._container,O=v.latLngToContainerPoint(v.getCenter()),X=v.layerPointToContainerPoint(t),le=this.options.direction,me=T.offsetWidth,ve=T.offsetHeight,Te=H(this.options.offset),Ge=this._getAnchor();le==="top"?(o=me/2,f=ve):le==="bottom"?(o=me/2,f=0):le==="center"?(o=me/2,f=ve/2):le==="right"?(o=0,f=ve/2):le==="left"?(o=me,f=ve/2):X.x<O.x?(le="right",o=0,f=ve/2):(le="left",o=me+(Te.x+Ge.x)*2,f=ve/2),t=t.subtract(H(o,f,!0)).add(Te).add(Ge),Lt(T,"leaflet-tooltip-right"),Lt(T,"leaflet-tooltip-left"),Lt(T,"leaflet-tooltip-top"),Lt(T,"leaflet-tooltip-bottom"),tt(T,"leaflet-tooltip-"+le),Xt(T,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&En(this._container,t)},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(o)},_getAnchor:function(){return H(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Do=function(t,o){return new Gi(t,o)};xt.include({openTooltip:function(t,o,f){return this._initOverlay(Gi,t,o,f).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),ir.include({bindTooltip:function(t,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Gi,this._tooltip,t,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var o=t?"off":"on",f={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?f.add=this._openTooltip:(f.mouseover=this._openTooltip,f.mouseout=this.closeTooltip,f.click=this._openTooltip,this._map?this._addFocusListeners():f.add=this._addFocusListeners),this._tooltip.options.sticky&&(f.mousemove=this._moveTooltip),this[o](f),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Tr||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var o=typeof t.getElement=="function"&&t.getElement();o&&(Xe(o,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),Xe(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var o=typeof t.getElement=="function"&&t.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var o=t.latlng,f,v;this._tooltip.options.sticky&&t.originalEvent&&(f=this._map.mouseEventToContainerPoint(t.originalEvent),v=this._map.containerPointToLayerPoint(f),o=this._map.layerPointToLatLng(v)),this._tooltip.setLatLng(o)}});var Ds=hi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var o=t&&t.tagName==="DIV"?t:document.createElement("div"),f=this.options;if(f.html instanceof Element?(ds(o),o.appendChild(f.html)):o.innerHTML=f.html!==!1?f.html:"",f.bgPos){var v=H(f.bgPos);o.style.backgroundPosition=-v.x+"px "+-v.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function Yl(t){return new Ds(t)}hi.Default=Ui;var Kr=ir.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Re.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){C(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),It(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Li(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Sr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof W?t:new W(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var o=this.getPane().children,f=-t(-1/0,1/0),v=0,T=o.length,O;v<T;v++)O=o[v].style.zIndex,o[v]!==this._container&&O&&(f=t(f,+O));isFinite(f)&&(this.options.zIndex=f+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Re.ielt9){En(this._container,this.options.opacity);var t=+new Date,o=!1,f=!1;for(var v in this._tiles){var T=this._tiles[v];if(!(!T.current||!T.loaded)){var O=Math.min(1,(t-T.loaded)/200);En(T.el,O),O<1?o=!0:(T.active?f=!0:this._onOpaqueTile(T),T.active=!0)}}f&&!this._noPrune&&this._pruneTiles(),o&&(ee(this._fadeFrame),this._fadeFrame=K(this._updateOpacity,this))}},_onOpaqueTile:A,_initContainer:function(){this._container||(this._container=it("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,o=this.options.maxZoom;if(t!==void 0){for(var f in this._levels)f=Number(f),this._levels[f].el.children.length||f===t?(this._levels[f].el.style.zIndex=o-Math.abs(t-f),this._onUpdateLevel(f)):(It(this._levels[f].el),this._removeTilesAtZoom(f),this._onRemoveLevel(f),delete this._levels[f]);var v=this._levels[t],T=this._map;return v||(v=this._levels[t]={},v.el=it("div","leaflet-tile-container leaflet-zoom-animated",this._container),v.el.style.zIndex=o,v.origin=T.project(T.unproject(T.getPixelOrigin()),t).round(),v.zoom=t,this._setZoomTransform(v,T.getCenter(),T.getZoom()),A(v.el.offsetWidth),this._onCreateLevel(v)),this._level=v,v}},_onUpdateLevel:A,_onRemoveLevel:A,_onCreateLevel:A,_pruneTiles:function(){if(this._map){var t,o,f=this._map.getZoom();if(f>this.options.maxZoom||f<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)o=this._tiles[t],o.retain=o.current;for(t in this._tiles)if(o=this._tiles[t],o.current&&!o.active){var v=o.coords;this._retainParent(v.x,v.y,v.z,v.z-5)||this._retainChildren(v.x,v.y,v.z,v.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var o in this._tiles)this._tiles[o].coords.z===t&&this._removeTile(o)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)It(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,o,f,v){var T=Math.floor(t/2),O=Math.floor(o/2),X=f-1,le=new W(+T,+O);le.z=+X;var me=this._tileCoordsToKey(le),ve=this._tiles[me];return ve&&ve.active?(ve.retain=!0,!0):(ve&&ve.loaded&&(ve.retain=!0),X>v?this._retainParent(T,O,X,v):!1)},_retainChildren:function(t,o,f,v){for(var T=2*t;T<2*t+2;T++)for(var O=2*o;O<2*o+2;O++){var X=new W(T,O);X.z=f+1;var le=this._tileCoordsToKey(X),me=this._tiles[le];if(me&&me.active){me.retain=!0;continue}else me&&me.loaded&&(me.retain=!0);f+1<v&&this._retainChildren(T,O,f+1,v)}},_resetView:function(t){var o=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var o=this.options;return o.minNativeZoom!==void 0&&t<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<t?o.maxNativeZoom:t},_setView:function(t,o,f,v){var T=Math.round(o);this.options.maxZoom!==void 0&&T>this.options.maxZoom||this.options.minZoom!==void 0&&T<this.options.minZoom?T=void 0:T=this._clampZoom(T);var O=this.options.updateWhenZooming&&T!==this._tileZoom;(!v||O)&&(this._tileZoom=T,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),T!==void 0&&this._update(t),f||this._pruneTiles(),this._noPrune=!!f),this._setZoomTransforms(t,o)},_setZoomTransforms:function(t,o){for(var f in this._levels)this._setZoomTransform(this._levels[f],t,o)},_setZoomTransform:function(t,o,f){var v=this._map.getZoomScale(f,t.zoom),T=t.origin.multiplyBy(v).subtract(this._map._getNewPixelOrigin(o,f)).round();Re.any3d?er(t.el,T,v):Xt(t.el,T)},_resetGrid:function(){var t=this._map,o=t.options.crs,f=this._tileSize=this.getTileSize(),v=this._tileZoom,T=this._map.getPixelWorldBounds(this._tileZoom);T&&(this._globalTileRange=this._pxBoundsToTileRange(T)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,o.wrapLng[0]],v).x/f.x),Math.ceil(t.project([0,o.wrapLng[1]],v).x/f.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([o.wrapLat[0],0],v).y/f.x),Math.ceil(t.project([o.wrapLat[1],0],v).y/f.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var o=this._map,f=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),v=o.getZoomScale(f,this._tileZoom),T=o.project(t,this._tileZoom).floor(),O=o.getSize().divideBy(v*2);return new P(T.subtract(O),T.add(O))},_update:function(t){var o=this._map;if(o){var f=this._clampZoom(o.getZoom());if(t===void 0&&(t=o.getCenter()),this._tileZoom!==void 0){var v=this._getTiledPixelBounds(t),T=this._pxBoundsToTileRange(v),O=T.getCenter(),X=[],le=this.options.keepBuffer,me=new P(T.getBottomLeft().subtract([le,-le]),T.getTopRight().add([le,-le]));if(!(isFinite(T.min.x)&&isFinite(T.min.y)&&isFinite(T.max.x)&&isFinite(T.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ve in this._tiles){var Te=this._tiles[ve].coords;(Te.z!==this._tileZoom||!me.contains(new W(Te.x,Te.y)))&&(this._tiles[ve].current=!1)}if(Math.abs(f-this._tileZoom)>1){this._setView(t,f);return}for(var Ge=T.min.y;Ge<=T.max.y;Ge++)for(var st=T.min.x;st<=T.max.x;st++){var ln=new W(st,Ge);if(ln.z=this._tileZoom,!!this._isValidTile(ln)){var rn=this._tiles[this._tileCoordsToKey(ln)];rn?rn.current=!0:X.push(ln)}}if(X.sort(function(Sn,Xi){return Sn.distanceTo(O)-Xi.distanceTo(O)}),X.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ln=document.createDocumentFragment();for(st=0;st<X.length;st++)this._addTile(X[st],Ln);this._level.el.appendChild(Ln)}}}},_isValidTile:function(t){var o=this._map.options.crs;if(!o.infinite){var f=this._globalTileRange;if(!o.wrapLng&&(t.x<f.min.x||t.x>f.max.x)||!o.wrapLat&&(t.y<f.min.y||t.y>f.max.y))return!1}if(!this.options.bounds)return!0;var v=this._tileCoordsToBounds(t);return Q(this.options.bounds).overlaps(v)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var o=this._map,f=this.getTileSize(),v=t.scaleBy(f),T=v.add(f),O=o.unproject(v,t.z),X=o.unproject(T,t.z);return[O,X]},_tileCoordsToBounds:function(t){var o=this._tileCoordsToNwSe(t),f=new q(o[0],o[1]);return this.options.noWrap||(f=this._map.wrapLatLngBounds(f)),f},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var o=t.split(":"),f=new W(+o[0],+o[1]);return f.z=+o[2],f},_removeTile:function(t){var o=this._tiles[t];o&&(It(o.el),delete this._tiles[t],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){tt(t,"leaflet-tile");var o=this.getTileSize();t.style.width=o.x+"px",t.style.height=o.y+"px",t.onselectstart=A,t.onmousemove=A,Re.ielt9&&this.options.opacity<1&&En(t,this.options.opacity)},_addTile:function(t,o){var f=this._getTilePos(t),v=this._tileCoordsToKey(t),T=this.createTile(this._wrapCoords(t),p(this._tileReady,this,t));this._initTile(T),this.createTile.length<2&&K(p(this._tileReady,this,t,null,T)),Xt(T,f),this._tiles[v]={el:T,coords:t,current:!0},o.appendChild(T),this.fire("tileloadstart",{tile:T,coords:t})},_tileReady:function(t,o,f){o&&this.fire("tileerror",{error:o,tile:f,coords:t});var v=this._tileCoordsToKey(t);f=this._tiles[v],f&&(f.loaded=+new Date,this._map._fadeAnimated?(En(f.el,0),ee(this._fadeFrame),this._fadeFrame=K(this._updateOpacity,this)):(f.active=!0,this._pruneTiles()),o||(tt(f.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:f.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Re.ielt9||!this._map._fadeAnimated?K(this._pruneTiles,this):setTimeout(p(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var o=new W(this._wrapX?x(t.x,this._wrapX):t.x,this._wrapY?x(t.y,this._wrapY):t.y);return o.z=t.z,o},_pxBoundsToTileRange:function(t){var o=this.getTileSize();return new P(t.min.unscaleBy(o).floor(),t.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function $i(t){return new Kr(t)}var Qr=Kr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,o){this._url=t,o=C(this,o),o.detectRetina&&Re.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,o){return this._url===t&&o===void 0&&(o=!0),this._url=t,o||this.redraw(),this},createTile:function(t,o){var f=document.createElement("img");return Xe(f,"load",p(this._tileOnLoad,this,o,f)),Xe(f,"error",p(this._tileOnError,this,o,f)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(f.referrerPolicy=this.options.referrerPolicy),f.alt="",f.src=this.getTileUrl(t),f},getTileUrl:function(t){var o={r:Re.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var f=this._globalTileRange.max.y-t.y;this.options.tms&&(o.y=f),o["-y"]=f}return B(this._url,c(o,this.options))},_tileOnLoad:function(t,o){Re.ielt9?setTimeout(p(t,this,null,o),0):t(null,o)},_tileOnError:function(t,o,f){var v=this.options.errorTileUrl;v&&o.getAttribute("src")!==v&&(o.src=v),t(f,o)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,o=this.options.maxZoom,f=this.options.zoomReverse,v=this.options.zoomOffset;return f&&(t=o-t),t+v},_getSubdomain:function(t){var o=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var t,o;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(o=this._tiles[t].el,o.onload=A,o.onerror=A,!o.complete)){o.src=M;var f=this._tiles[t].coords;It(o),delete this._tiles[t],this.fire("tileabort",{tile:o,coords:f})}},_removeTile:function(t){var o=this._tiles[t];if(o)return o.el.setAttribute("src",M),Kr.prototype._removeTile.call(this,t)},_tileReady:function(t,o,f){if(!(!this._map||f&&f.getAttribute("src")===M))return Kr.prototype._tileReady.call(this,t,o,f)}});function Na(t,o){return new Qr(t,o)}var Ro=Qr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,o){this._url=t;var f=c({},this.defaultWmsParams);for(var v in o)v in this.options||(f[v]=o[v]);o=C(this,o);var T=o.detectRetina&&Re.retina?2:1,O=this.getTileSize();f.width=O.x*T,f.height=O.y*T,this.wmsParams=f},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,Qr.prototype.onAdd.call(this,t)},getTileUrl:function(t){var o=this._tileCoordsToNwSe(t),f=this._crs,v=V(f.project(o[0]),f.project(o[1])),T=v.min,O=v.max,X=(this._wmsVersion>=1.3&&this._crs===Zl?[T.y,T.x,O.y,O.x]:[T.x,T.y,O.x,O.y]).join(","),le=Qr.prototype.getTileUrl.call(this,t);return le+b(this.wmsParams,le,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+X},setParams:function(t,o){return c(this.wmsParams,t),o||this.redraw(),this}});function Xl(t,o){return new Ro(t,o)}Qr.WMS=Ro,Na.wms=Xl;var gr=ir.extend({options:{padding:.1},initialize:function(t){C(this,t),g(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),tt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,o){var f=this._map.getZoomScale(o,this._zoom),v=this._map.getSize().multiplyBy(.5+this.options.padding),T=this._map.project(this._center,o),O=v.multiplyBy(-f).add(T).subtract(this._map._getNewPixelOrigin(t,o));Re.any3d?er(this._container,O,f):Xt(this._container,O)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,o=this._map.getSize(),f=this._map.containerPointToLayerPoint(o.multiplyBy(-t)).round();this._bounds=new P(f,f.add(o.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Fa=gr.extend({options:{tolerance:0},getEvents:function(){var t=gr.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){gr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Xe(t,"mousemove",this._onMouseMove,this),Xe(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Xe(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){ee(this._redrawRequest),delete this._ctx,It(this._container),Tt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var o in this._layers)t=this._layers[o],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){gr.prototype._update.call(this);var t=this._bounds,o=this._container,f=t.getSize(),v=Re.retina?2:1;Xt(o,t.min),o.width=v*f.x,o.height=v*f.y,o.style.width=f.x+"px",o.style.height=f.y+"px",Re.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){gr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[g(t)]=t;var o=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var o=t._order,f=o.next,v=o.prev;f?f.prev=v:this._drawLast=v,v?v.next=f:this._drawFirst=f,delete t._order,delete this._layers[g(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var o=t.options.dashArray.split(/[, ]+/),f=[],v,T;for(T=0;T<o.length;T++){if(v=Number(o[T]),isNaN(v))return;f.push(v)}t.options._dashArray=f}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||K(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var o=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new P,this._redrawBounds.extend(t._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(t._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var o=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,o=this._redrawBounds;if(this._ctx.save(),o){var f=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,f.x,f.y),this._ctx.clip()}this._drawing=!0;for(var v=this._drawFirst;v;v=v.next)t=v.layer,(!o||t._pxBounds&&t._pxBounds.intersects(o))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,o){if(this._drawing){var f,v,T,O,X=t._parts,le=X.length,me=this._ctx;if(le){for(me.beginPath(),f=0;f<le;f++){for(v=0,T=X[f].length;v<T;v++)O=X[f][v],me[v?"lineTo":"moveTo"](O.x,O.y);o&&me.closePath()}this._fillStroke(me,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var o=t._point,f=this._ctx,v=Math.max(Math.round(t._radius),1),T=(Math.max(Math.round(t._radiusY),1)||v)/v;T!==1&&(f.save(),f.scale(1,T)),f.beginPath(),f.arc(o.x,o.y/T,v,0,Math.PI*2,!1),T!==1&&f.restore(),this._fillStroke(f,t)}},_fillStroke:function(t,o){var f=o.options;f.fill&&(t.globalAlpha=f.fillOpacity,t.fillStyle=f.fillColor||f.color,t.fill(f.fillRule||"evenodd")),f.stroke&&f.weight!==0&&(t.setLineDash&&t.setLineDash(o.options&&o.options._dashArray||[]),t.globalAlpha=f.opacity,t.lineWidth=f.weight,t.strokeStyle=f.color,t.lineCap=f.lineCap,t.lineJoin=f.lineJoin,t.stroke())},_onClick:function(t){for(var o=this._map.mouseEventToLayerPoint(t),f,v,T=this._drawFirst;T;T=T.next)f=T.layer,f.options.interactive&&f._containsPoint(o)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(f))&&(v=f);this._fireEvent(v?[v]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,o)}},_handleMouseOut:function(t){var o=this._hoveredLayer;o&&(Lt(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,o){if(!this._mouseHoverThrottled){for(var f,v,T=this._drawFirst;T;T=T.next)f=T.layer,f.options.interactive&&f._containsPoint(o)&&(v=f);v!==this._hoveredLayer&&(this._handleMouseOut(t),v&&(tt(this._container,"leaflet-interactive"),this._fireEvent([v],t,"mouseover"),this._hoveredLayer=v)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(p(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,o,f){this._map._fireDOMEvent(o,f||o.type,t)},_bringToFront:function(t){var o=t._order;if(o){var f=o.next,v=o.prev;if(f)f.prev=v;else return;v?v.next=f:f&&(this._drawFirst=f),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(t)}},_bringToBack:function(t){var o=t._order;if(o){var f=o.next,v=o.prev;if(v)v.next=f;else return;f?f.prev=v:v&&(this._drawLast=v),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(t)}}});function La(t){return Re.canvas?new Fa(t):null}var Ki=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Jl={_initContainer:function(){this._container=it("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(gr.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var o=t._container=Ki("shape");tt(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",t._path=Ki("path"),o.appendChild(t._path),this._updateStyle(t),this._layers[g(t)]=t},_addPath:function(t){var o=t._container;this._container.appendChild(o),t.options.interactive&&t.addInteractiveTarget(o)},_removePath:function(t){var o=t._container;It(o),t.removeInteractiveTarget(o),delete this._layers[g(t)]},_updateStyle:function(t){var o=t._stroke,f=t._fill,v=t.options,T=t._container;T.stroked=!!v.stroke,T.filled=!!v.fill,v.stroke?(o||(o=t._stroke=Ki("stroke")),T.appendChild(o),o.weight=v.weight+"px",o.color=v.color,o.opacity=v.opacity,v.dashArray?o.dashStyle=D(v.dashArray)?v.dashArray.join(" "):v.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=v.lineCap.replace("butt","flat"),o.joinstyle=v.lineJoin):o&&(T.removeChild(o),t._stroke=null),v.fill?(f||(f=t._fill=Ki("fill")),T.appendChild(f),f.color=v.fillColor||v.color,f.opacity=v.fillOpacity):f&&(T.removeChild(f),t._fill=null)},_updateCircle:function(t){var o=t._point.round(),f=Math.round(t._radius),v=Math.round(t._radiusY||f);this._setPath(t,t._empty()?"M0 0":"AL "+o.x+","+o.y+" "+f+","+v+" 0,"+65535*360)},_setPath:function(t,o){t._path.v=o},_bringToFront:function(t){Li(t._container)},_bringToBack:function(t){Sr(t._container)}},sr=Re.vml?Ki:ft,pi=gr.extend({_initContainer:function(){this._container=sr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=sr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){It(this._container),Tt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){gr.prototype._update.call(this);var t=this._bounds,o=t.getSize(),f=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,f.setAttribute("width",o.x),f.setAttribute("height",o.y)),Xt(f,t.min),f.setAttribute("viewBox",[t.min.x,t.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(t){var o=t._path=sr("path");t.options.className&&tt(o,t.options.className),t.options.interactive&&tt(o,"leaflet-interactive"),this._updateStyle(t),this._layers[g(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){It(t._path),t.removeInteractiveTarget(t._path),delete this._layers[g(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var o=t._path,f=t.options;o&&(f.stroke?(o.setAttribute("stroke",f.color),o.setAttribute("stroke-opacity",f.opacity),o.setAttribute("stroke-width",f.weight),o.setAttribute("stroke-linecap",f.lineCap),o.setAttribute("stroke-linejoin",f.lineJoin),f.dashArray?o.setAttribute("stroke-dasharray",f.dashArray):o.removeAttribute("stroke-dasharray"),f.dashOffset?o.setAttribute("stroke-dashoffset",f.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),f.fill?(o.setAttribute("fill",f.fillColor||f.color),o.setAttribute("fill-opacity",f.fillOpacity),o.setAttribute("fill-rule",f.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(t,o){this._setPath(t,Nt(t._parts,o))},_updateCircle:function(t){var o=t._point,f=Math.max(Math.round(t._radius),1),v=Math.max(Math.round(t._radiusY),1)||f,T="a"+f+","+v+" 0 1,0 ",O=t._empty()?"M0 0":"M"+(o.x-f)+","+o.y+T+f*2+",0 "+T+-f*2+",0 ";this._setPath(t,O)},_setPath:function(t,o){t._path.setAttribute("d",o)},_bringToFront:function(t){Li(t._path)},_bringToBack:function(t){Sr(t._path)}});Re.vml&&pi.include(Jl);function Rs(t){return Re.svg||Re.vml?new pi(t):null}xt.include({getRenderer:function(t){var o=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var o=this._paneRenderers[t];return o===void 0&&(o=this._createRenderer({pane:t}),this._paneRenderers[t]=o),o},_createRenderer:function(t){return this.options.preferCanvas&&La(t)||Rs(t)}});var ec=Rr.extend({initialize:function(t,o){Rr.prototype.initialize.call(this,this._boundsToLatLngs(t),o)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=Q(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Ud(t,o){return new ec(t,o)}pi.create=sr,pi.pointsToPath=Nt,pr.geometryToLayer=Zi,pr.coordsToLatLng=ks,pr.coordsToLatLngs=To,pr.latLngToCoords=Ss,pr.latLngsToCoords=Bs,pr.getFeature=Wi,pr.asFeature=Ps,xt.mergeOptions({boxZoom:!0});var Qi=Vn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Xe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Tt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){It(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),_t(),ps(),this._startPoint=this._map.mouseEventToContainerPoint(t),Xe(document,{contextmenu:nr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=it("div","leaflet-zoom-box",this._container),tt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var o=new P(this._point,this._startPoint),f=o.getSize();Xt(this._box,o.min),this._box.style.width=f.x+"px",this._box.style.height=f.y+"px"},_finish:function(){this._moved&&(It(this._box),Lt(this._container,"leaflet-crosshair")),Oi(),ms(),Tt(document,{contextmenu:nr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(p(this._resetState,this),0);var o=new q(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});xt.addInitHook("addHandler","boxZoom",Qi),xt.mergeOptions({doubleClickZoom:!0});var tc=Vn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var o=this._map,f=o.getZoom(),v=o.options.zoomDelta,T=t.originalEvent.shiftKey?f-v:f+v;o.options.doubleClickZoom==="center"?o.setZoom(T):o.setZoomAround(t.containerPoint,T)}});xt.addInitHook("addHandler","doubleClickZoom",tc),xt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ma=Vn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new rr(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}tt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Lt(this._map._container,"leaflet-grab"),Lt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=Q(this._map.options.maxBounds);this._offsetLimit=V(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var o=this._lastTime=+new Date,f=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(f),this._times.push(o),this._prunePositions(o)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,o){return t-(t-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;t.x<o.min.x&&(t.x=this._viscousLimit(t.x,o.min.x)),t.y<o.min.y&&(t.y=this._viscousLimit(t.y,o.min.y)),t.x>o.max.x&&(t.x=this._viscousLimit(t.x,o.max.x)),t.y>o.max.y&&(t.y=this._viscousLimit(t.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,o=Math.round(t/2),f=this._initialWorldOffset,v=this._draggable._newPos.x,T=(v-o+f)%t+o-f,O=(v+o+f)%t-o-f,X=Math.abs(T+f)<Math.abs(O+f)?T:O;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=X},_onDragEnd:function(t){var o=this._map,f=o.options,v=!f.inertia||t.noInertia||this._times.length<2;if(o.fire("dragend",t),v)o.fire("moveend");else{this._prunePositions(+new Date);var T=this._lastPos.subtract(this._positions[0]),O=(this._lastTime-this._times[0])/1e3,X=f.easeLinearity,le=T.multiplyBy(X/O),me=le.distanceTo([0,0]),ve=Math.min(f.inertiaMaxSpeed,me),Te=le.multiplyBy(ve/me),Ge=ve/(f.inertiaDeceleration*X),st=Te.multiplyBy(-Ge/2).round();!st.x&&!st.y?o.fire("moveend"):(st=o._limitOffset(st,o.options.maxBounds),K(function(){o.panBy(st,{duration:Ge,easeLinearity:X,noMoveStart:!0,animate:!0})}))}}});xt.addInitHook("addHandler","dragging",Ma),xt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ia=Vn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Xe(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Tt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,o=document.documentElement,f=t.scrollTop||o.scrollTop,v=t.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(v,f)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var o=this._panKeys={},f=this.keyCodes,v,T;for(v=0,T=f.left.length;v<T;v++)o[f.left[v]]=[-1*t,0];for(v=0,T=f.right.length;v<T;v++)o[f.right[v]]=[t,0];for(v=0,T=f.down.length;v<T;v++)o[f.down[v]]=[0,t];for(v=0,T=f.up.length;v<T;v++)o[f.up[v]]=[0,-1*t]},_setZoomDelta:function(t){var o=this._zoomKeys={},f=this.keyCodes,v,T;for(v=0,T=f.zoomIn.length;v<T;v++)o[f.zoomIn[v]]=t;for(v=0,T=f.zoomOut.length;v<T;v++)o[f.zoomOut[v]]=-t},_addHooks:function(){Xe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Tt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var o=t.keyCode,f=this._map,v;if(o in this._panKeys){if(!f._panAnim||!f._panAnim._inProgress)if(v=this._panKeys[o],t.shiftKey&&(v=H(v).multiplyBy(3)),f.options.maxBounds&&(v=f._limitOffset(H(v),f.options.maxBounds)),f.options.worldCopyJump){var T=f.wrapLatLng(f.unproject(f.project(f.getCenter()).add(v)));f.panTo(T)}else f.panBy(v)}else if(o in this._zoomKeys)f.setZoom(f.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&f._popup&&f._popup.options.closeOnEscapeKey)f.closePopup();else return;nr(t)}}});xt.addInitHook("addHandler","keyboard",Ia),xt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Dt=Vn.extend({addHooks:function(){Xe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Tt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var o=Ml(t),f=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var v=Math.max(f-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(p(this._performZoom,this),v),nr(t)},_performZoom:function(){var t=this._map,o=t.getZoom(),f=this._map.options.zoomSnap||0;t._stop();var v=this._delta/(this._map.options.wheelPxPerZoomLevel*4),T=4*Math.log(2/(1+Math.exp(-Math.abs(v))))/Math.LN2,O=f?Math.ceil(T/f)*f:T,X=t._limitZoom(o+(this._delta>0?O:-O))-o;this._delta=0,this._startTime=null,X&&(t.options.scrollWheelZoom==="center"?t.setZoom(o+X):t.setZoomAround(this._lastMousePos,o+X))}});xt.addInitHook("addHandler","scrollWheelZoom",Dt);var Oa=600;xt.mergeOptions({tapHold:Re.touchNative&&Re.safari&&Re.mobile,tapTolerance:15});var No=Vn.extend({addHooks:function(){Xe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Tt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var o=t.touches[0];this._startPos=this._newPos=new W(o.clientX,o.clientY),this._holdTimeout=setTimeout(p(function(){this._cancel(),this._isTapValid()&&(Xe(document,"touchend",Wt),Xe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),Oa),Xe(document,"touchend touchcancel contextmenu",this._cancel,this),Xe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Tt(document,"touchend",Wt),Tt(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Tt(document,"touchend touchcancel contextmenu",this._cancel,this),Tt(document,"touchmove",this._onMove,this)},_onMove:function(t){var o=t.touches[0];this._newPos=new W(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,o){var f=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});f._simulated=!0,o.target.dispatchEvent(f)}});xt.addInitHook("addHandler","tapHold",No),xt.mergeOptions({touchZoom:Re.touch,bounceAtZoomLimits:!0});var Yi=Vn.extend({addHooks:function(){tt(this._map._container,"leaflet-touch-zoom"),Xe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Lt(this._map._container,"leaflet-touch-zoom"),Tt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var o=this._map;if(!(!t.touches||t.touches.length!==2||o._animatingZoom||this._zooming)){var f=o.mouseEventToContainerPoint(t.touches[0]),v=o.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(f.add(v)._divideBy(2))),this._startDist=f.distanceTo(v),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),Xe(document,"touchmove",this._onTouchMove,this),Xe(document,"touchend touchcancel",this._onTouchEnd,this),Wt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var o=this._map,f=o.mouseEventToContainerPoint(t.touches[0]),v=o.mouseEventToContainerPoint(t.touches[1]),T=f.distanceTo(v)/this._startDist;if(this._zoom=o.getScaleZoom(T,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&T<1||this._zoom>o.getMaxZoom()&&T>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,T===1)return}else{var O=f._add(v)._divideBy(2)._subtract(this._centerPoint);if(T===1&&O.x===0&&O.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(O),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),ee(this._animRequest);var X=p(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=K(X,this,!0),Wt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ee(this._animRequest),Tt(document,"touchmove",this._onTouchMove,this),Tt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});xt.addInitHook("addHandler","touchZoom",Yi),xt.BoxZoom=Qi,xt.DoubleClickZoom=tc,xt.Drag=Ma,xt.Keyboard=Ia,xt.ScrollWheelZoom=Dt,xt.TapHold=No,xt.TouchZoom=Yi,i.Bounds=P,i.Browser=Re,i.CRS=se,i.Canvas=Fa,i.Circle=Cs,i.CircleMarker=bs,i.Class=oe,i.Control=Nn,i.DivIcon=Ds,i.DivOverlay=mr,i.DomEvent=As,i.DomUtil=Co,i.Draggable=rr,i.Evented=de,i.FeatureGroup=Tr,i.GeoJSON=pr,i.GridLayer=Kr,i.Handler=Vn,i.Icon=hi,i.ImageOverlay=$r,i.LatLng=pe,i.LatLngBounds=q,i.Layer=ir,i.LayerGroup=qr,i.LineUtil=Ul,i.Map=xt,i.Marker=Dr,i.Mixin=_a,i.Path=Gr,i.Point=W,i.PolyUtil=Rd,i.Polygon=Rr,i.Polyline=Fn,i.Popup=Ts,i.PosAnimation=vs,i.Projection=Id,i.Rectangle=ec,i.Renderer=gr,i.SVG=pi,i.SVGOverlay=Da,i.TileLayer=Qr,i.Tooltip=Gi,i.Transformation=dt,i.Util=G,i.VideoOverlay=Ta,i.bind=p,i.bounds=V,i.canvas=La,i.circle=Po,i.circleMarker=Gl,i.control=Wr,i.divIcon=Yl,i.extend=c,i.featureGroup=Wl,i.geoJSON=$l,i.geoJson=or,i.gridLayer=$i,i.icon=ql,i.imageOverlay=Kl,i.latLng=ue,i.latLngBounds=Q,i.layerGroup=Bo,i.map=Zr,i.marker=zd,i.point=H,i.polygon=Vd,i.polyline=Hd,i.popup=qi,i.rectangle=Ud,i.setOptions=C,i.stamp=g,i.svg=Rs,i.svgOverlay=Ra,i.tileLayer=Na,i.tooltip=Do,i.transformation=ot,i.version=l,i.videoOverlay=Ql;var nc=window.L;i.noConflict=function(){return window.L=nc,this},window.L=i}))})(gl,gl.exports)),gl.exports}var Cd=CE();function hh(n,s,i){return Object.freeze({instance:n,context:s,container:i})}function ph(n,s){return s==null?function(l,c){const u=R.useRef();return u.current||(u.current=n(l,c)),u}:function(l,c){const u=R.useRef();u.current||(u.current=n(l,c));const p=R.useRef(l),{instance:d}=u.current;return R.useEffect(function(){p.current!==l&&(s(d,l,p.current),p.current=l)},[d,l,c]),u}}function vv(n,s){R.useEffect(function(){return(s.layerContainer??s.map).addLayer(n.instance),function(){var u;(u=s.layerContainer)==null||u.removeLayer(n.instance),s.map.removeLayer(n.instance)}},[s,n])}function EE(n){return function(i){const l=wd(),c=n(bd(i,l),l);return gv(l.map,i.attribution),fh(c.current,i.eventHandlers),vv(c.current,l),c}}function kE(n,s){const i=R.useRef();R.useEffect(function(){if(s.pathOptions!==i.current){const c=s.pathOptions??{};n.instance.setStyle(c),i.current=c}},[n,s])}function SE(n){return function(i){const l=wd(),c=n(bd(i,l),l);return fh(c.current,i.eventHandlers),vv(c.current,l),kE(c.current,i),c}}function BE(n,s){const i=ph(n),l=wE(i,s);return yE(l)}function PE(n,s){const i=ph(n,s),l=SE(i);return vE(l)}function TE(n,s){const i=ph(n,s),l=EE(i);return _E(l)}function DE(n,s,i){const{opacity:l,zIndex:c}=s;l!=null&&l!==i.opacity&&n.setOpacity(l),c!=null&&c!==i.zIndex&&n.setZIndex(c)}function RE(){return wd().map}const NE=PE(function({center:s,children:i,...l},c){const u=new Cd.CircleMarker(s,l);return hh(u,AE(c,{overlayContainer:u}))},mE);function T0(){return T0=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var i=arguments[s];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(n[l]=i[l])}return n},T0.apply(this,arguments)}function FE({bounds:n,boundsOptions:s,center:i,children:l,className:c,id:u,placeholder:p,style:d,whenReady:g,zoom:m,...x},A){const[_]=R.useState({className:c,id:u,style:d}),[k,N]=R.useState(null);R.useImperativeHandle(A,()=>(k==null?void 0:k.map)??null,[k]);const C=R.useCallback(S=>{if(S!==null&&k===null){const B=new Cd.Map(S,x);i!=null&&m!=null?B.setView(i,m):n!=null&&B.fitBounds(n,s),g!=null&&B.whenReady(g),N(xE(B))}},[]);R.useEffect(()=>()=>{k==null||k.map.remove()},[k]);const b=k?ke.createElement(Av,{value:k},l):p??null;return ke.createElement("div",T0({},_,{ref:C}),b)}const LE=R.forwardRef(FE),ME=BE(function(s,i){const l=new Cd.Popup(s,i.overlayContainer);return hh(l,i)},function(s,i,{position:l},c){R.useEffect(function(){const{instance:p}=s;function d(m){m.popup===p&&(p.update(),c(!0))}function g(m){m.popup===p&&c(!1)}return i.map.on({popupopen:d,popupclose:g}),i.overlayContainer==null?(l!=null&&p.setLatLng(l),p.openOn(i.map)):i.overlayContainer.bindPopup(p),function(){var x;i.map.off({popupopen:d,popupclose:g}),(x=i.overlayContainer)==null||x.unbindPopup(),i.map.removeLayer(p)}},[s,i,c,l])}),IE=TE(function({url:s,...i},l){const c=new Cd.TileLayer(s,bd(i,l));return hh(c,l)},function(s,i,l){DE(s,i,l);const{url:c}=i;c!=null&&c!==l.url&&s.setUrl(c)});function OE(n){const i=Date.now()/1e3-n,l=3600,c=86400;return i<l?"#22c55e":i<c?"#4ade80":i<3*c?"#a3e635":"#9ca3af"}function jE({contacts:n,focusedContact:s}){const i=RE(),[l,c]=R.useState(!1);return R.useEffect(()=>{if(s&&s.lat!=null&&s.lon!=null){i.setView([s.lat,s.lon],12),c(!0);return}if(l)return;const u=()=>{if(n.length===0){i.setView([20,0],2),c(!0);return}if(n.length===1){i.setView([n[0].lat,n[0].lon],10),c(!0);return}const p=n.map(d=>[d.lat,d.lon]);i.fitBounds(p,{padding:[50,50],maxZoom:12}),c(!0)};"geolocation"in navigator?navigator.geolocation.getCurrentPosition(p=>{i.setView([p.coords.latitude,p.coords.longitude],8),c(!0)},()=>{u()},{timeout:5e3,maximumAge:3e5}):u()},[i,n,l,s]),null}function zE({contacts:n,focusedKey:s}){const i=R.useMemo(()=>{const p=Date.now()/1e3-604800;return n.filter(d=>d.lat!=null&&d.lon!=null&&d.last_seen!=null&&d.last_seen>p)},[n]),l=R.useMemo(()=>s&&i.find(p=>p.public_key===s)||null,[s,i]),c=R.useRef({}),u=R.useCallback((p,d)=>{c.current[p]=d},[]);return R.useEffect(()=>{if(l&&c.current[l.public_key]){const p=setTimeout(()=>{var d;(d=c.current[l.public_key])==null||d.openPopup()},100);return()=>clearTimeout(p)}},[l]),w.jsxs("div",{className:"flex flex-col h-full",children:[w.jsxs("div",{className:"px-4 py-2 bg-muted/50 text-xs text-muted-foreground flex items-center justify-between",children:[w.jsxs("span",{children:["Showing ",i.length," contact",i.length!==1?"s":""," heard in the last 7 days"]}),w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsxs("span",{className:"flex items-center gap-1",children:[w.jsx("span",{className:"w-3 h-3 rounded-full bg-[#22c55e]"})," <1h"]}),w.jsxs("span",{className:"flex items-center gap-1",children:[w.jsx("span",{className:"w-3 h-3 rounded-full bg-[#4ade80]"})," <1d"]}),w.jsxs("span",{className:"flex items-center gap-1",children:[w.jsx("span",{className:"w-3 h-3 rounded-full bg-[#a3e635]"})," <3d"]}),w.jsxs("span",{className:"flex items-center gap-1",children:[w.jsx("span",{className:"w-3 h-3 rounded-full bg-[#9ca3af]"})," older"]})]})]}),w.jsx("div",{className:"flex-1 relative",style:{zIndex:0},children:w.jsxs(LE,{center:[20,0],zoom:2,className:"h-full w-full",style:{background:"#1a1a2e"},children:[w.jsx(IE,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),w.jsx(jE,{contacts:i,focusedContact:l}),i.map(p=>{const d=p.type===id,g=OE(p.last_seen),m=p.name||p.public_key.slice(0,12);return w.jsx(NE,{ref:x=>u(p.public_key,x),center:[p.lat,p.lon],radius:d?10:7,pathOptions:{color:d?g:"#000",fillColor:g,fillOpacity:.8,weight:d?0:1},children:w.jsx(ME,{children:w.jsxs("div",{className:"text-sm",children:[w.jsxs("div",{className:"font-medium flex items-center gap-1",children:[d&&w.jsx("span",{title:"Repeater",children:""}),m]}),w.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Last heard: ",ra(p.last_seen)]}),w.jsxs("div",{className:"text-xs text-gray-400 mt-1 font-mono",children:[p.lat.toFixed(5),", ",p.lon.toFixed(5)]})]})})},p.public_key)})]})})]})}function Xg(n,s){var i,l=1;n==null&&(n=0),s==null&&(s=0);function c(){var u,p=i.length,d,g=0,m=0;for(u=0;u<p;++u)d=i[u],g+=d.x,m+=d.y;for(g=(g/p-n)*l,m=(m/p-s)*l,u=0;u<p;++u)d=i[u],d.x-=g,d.y-=m}return c.initialize=function(u){i=u},c.x=function(u){return arguments.length?(n=+u,c):n},c.y=function(u){return arguments.length?(s=+u,c):s},c.strength=function(u){return arguments.length?(l=+u,c):l},c}function HE(n){const s=+this._x.call(null,n),i=+this._y.call(null,n);return yv(this.cover(s,i),s,i,n)}function yv(n,s,i,l){if(isNaN(s)||isNaN(i))return n;var c,u=n._root,p={data:l},d=n._x0,g=n._y0,m=n._x1,x=n._y1,A,_,k,N,C,b,S,B;if(!u)return n._root=p,n;for(;u.length;)if((C=s>=(A=(d+m)/2))?d=A:m=A,(b=i>=(_=(g+x)/2))?g=_:x=_,c=u,!(u=u[S=b<<1|C]))return c[S]=p,n;if(k=+n._x.call(null,u.data),N=+n._y.call(null,u.data),s===k&&i===N)return p.next=u,c?c[S]=p:n._root=p,n;do c=c?c[S]=new Array(4):n._root=new Array(4),(C=s>=(A=(d+m)/2))?d=A:m=A,(b=i>=(_=(g+x)/2))?g=_:x=_;while((S=b<<1|C)===(B=(N>=_)<<1|k>=A));return c[B]=u,c[S]=p,n}function VE(n){var s,i,l=n.length,c,u,p=new Array(l),d=new Array(l),g=1/0,m=1/0,x=-1/0,A=-1/0;for(i=0;i<l;++i)isNaN(c=+this._x.call(null,s=n[i]))||isNaN(u=+this._y.call(null,s))||(p[i]=c,d[i]=u,c<g&&(g=c),c>x&&(x=c),u<m&&(m=u),u>A&&(A=u));if(g>x||m>A)return this;for(this.cover(g,m).cover(x,A),i=0;i<l;++i)yv(this,p[i],d[i],n[i]);return this}function UE(n,s){if(isNaN(n=+n)||isNaN(s=+s))return this;var i=this._x0,l=this._y0,c=this._x1,u=this._y1;if(isNaN(i))c=(i=Math.floor(n))+1,u=(l=Math.floor(s))+1;else{for(var p=c-i||1,d=this._root,g,m;i>n||n>=c||l>s||s>=u;)switch(m=(s<l)<<1|n<i,g=new Array(4),g[m]=d,d=g,p*=2,m){case 0:c=i+p,u=l+p;break;case 1:i=c-p,u=l+p;break;case 2:c=i+p,l=u-p;break;case 3:i=c-p,l=u-p;break}this._root&&this._root.length&&(this._root=d)}return this._x0=i,this._y0=l,this._x1=c,this._y1=u,this}function ZE(){var n=[];return this.visit(function(s){if(!s.length)do n.push(s.data);while(s=s.next)}),n}function WE(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function On(n,s,i,l,c){this.node=n,this.x0=s,this.y0=i,this.x1=l,this.y1=c}function qE(n,s,i){var l,c=this._x0,u=this._y0,p,d,g,m,x=this._x1,A=this._y1,_=[],k=this._root,N,C;for(k&&_.push(new On(k,c,u,x,A)),i==null?i=1/0:(c=n-i,u=s-i,x=n+i,A=s+i,i*=i);N=_.pop();)if(!(!(k=N.node)||(p=N.x0)>x||(d=N.y0)>A||(g=N.x1)<c||(m=N.y1)<u))if(k.length){var b=(p+g)/2,S=(d+m)/2;_.push(new On(k[3],b,S,g,m),new On(k[2],p,S,b,m),new On(k[1],b,d,g,S),new On(k[0],p,d,b,S)),(C=(s>=S)<<1|n>=b)&&(N=_[_.length-1],_[_.length-1]=_[_.length-1-C],_[_.length-1-C]=N)}else{var B=n-+this._x.call(null,k.data),D=s-+this._y.call(null,k.data),F=B*B+D*D;if(F<i){var M=Math.sqrt(i=F);c=n-M,u=s-M,x=n+M,A=s+M,l=k.data}}return l}function GE(n){if(isNaN(x=+this._x.call(null,n))||isNaN(A=+this._y.call(null,n)))return this;var s,i=this._root,l,c,u,p=this._x0,d=this._y0,g=this._x1,m=this._y1,x,A,_,k,N,C,b,S;if(!i)return this;if(i.length)for(;;){if((N=x>=(_=(p+g)/2))?p=_:g=_,(C=A>=(k=(d+m)/2))?d=k:m=k,s=i,!(i=i[b=C<<1|N]))return this;if(!i.length)break;(s[b+1&3]||s[b+2&3]||s[b+3&3])&&(l=s,S=b)}for(;i.data!==n;)if(c=i,!(i=i.next))return this;return(u=i.next)&&delete i.next,c?(u?c.next=u:delete c.next,this):s?(u?s[b]=u:delete s[b],(i=s[0]||s[1]||s[2]||s[3])&&i===(s[3]||s[2]||s[1]||s[0])&&!i.length&&(l?l[S]=i:this._root=i),this):(this._root=u,this)}function $E(n){for(var s=0,i=n.length;s<i;++s)this.remove(n[s]);return this}function KE(){return this._root}function QE(){var n=0;return this.visit(function(s){if(!s.length)do++n;while(s=s.next)}),n}function YE(n){var s=[],i,l=this._root,c,u,p,d,g;for(l&&s.push(new On(l,this._x0,this._y0,this._x1,this._y1));i=s.pop();)if(!n(l=i.node,u=i.x0,p=i.y0,d=i.x1,g=i.y1)&&l.length){var m=(u+d)/2,x=(p+g)/2;(c=l[3])&&s.push(new On(c,m,x,d,g)),(c=l[2])&&s.push(new On(c,u,x,m,g)),(c=l[1])&&s.push(new On(c,m,p,d,x)),(c=l[0])&&s.push(new On(c,u,p,m,x))}return this}function XE(n){var s=[],i=[],l;for(this._root&&s.push(new On(this._root,this._x0,this._y0,this._x1,this._y1));l=s.pop();){var c=l.node;if(c.length){var u,p=l.x0,d=l.y0,g=l.x1,m=l.y1,x=(p+g)/2,A=(d+m)/2;(u=c[0])&&s.push(new On(u,p,d,x,A)),(u=c[1])&&s.push(new On(u,x,d,g,A)),(u=c[2])&&s.push(new On(u,p,A,x,m)),(u=c[3])&&s.push(new On(u,x,A,g,m))}i.push(l)}for(;l=i.pop();)n(l.node,l.x0,l.y0,l.x1,l.y1);return this}function JE(n){return n[0]}function ek(n){return arguments.length?(this._x=n,this):this._x}function tk(n){return n[1]}function nk(n){return arguments.length?(this._y=n,this):this._y}function mh(n,s,i){var l=new gh(s??JE,i??tk,NaN,NaN,NaN,NaN);return n==null?l:l.addAll(n)}function gh(n,s,i,l,c,u){this._x=n,this._y=s,this._x0=i,this._y0=l,this._x1=c,this._y1=u,this._root=void 0}function Jg(n){for(var s={data:n.data},i=s;n=n.next;)i=i.next={data:n.data};return s}var zn=mh.prototype=gh.prototype;zn.copy=function(){var n=new gh(this._x,this._y,this._x0,this._y0,this._x1,this._y1),s=this._root,i,l;if(!s)return n;if(!s.length)return n._root=Jg(s),n;for(i=[{source:s,target:n._root=new Array(4)}];s=i.pop();)for(var c=0;c<4;++c)(l=s.source[c])&&(l.length?i.push({source:l,target:s.target[c]=new Array(4)}):s.target[c]=Jg(l));return n};zn.add=HE;zn.addAll=VE;zn.cover=UE;zn.data=ZE;zn.extent=WE;zn.find=qE;zn.remove=GE;zn.removeAll=$E;zn.root=KE;zn.size=QE;zn.visit=YE;zn.visitAfter=XE;zn.x=ek;zn.y=nk;function jn(n){return function(){return n}}function go(n){return(n()-.5)*1e-6}function rk(n){return n.x+n.vx}function ik(n){return n.y+n.vy}function ok(n){var s,i,l,c=1,u=1;typeof n!="function"&&(n=jn(n==null?1:+n));function p(){for(var m,x=s.length,A,_,k,N,C,b,S=0;S<u;++S)for(A=mh(s,rk,ik).visitAfter(d),m=0;m<x;++m)_=s[m],C=i[_.index],b=C*C,k=_.x+_.vx,N=_.y+_.vy,A.visit(B);function B(D,F,M,z,U){var j=D.data,te=D.r,Z=C+te;if(j){if(j.index>_.index){var K=k-j.x-j.vx,ee=N-j.y-j.vy,G=K*K+ee*ee;G<Z*Z&&(K===0&&(K=go(l),G+=K*K),ee===0&&(ee=go(l),G+=ee*ee),G=(Z-(G=Math.sqrt(G)))/G*c,_.vx+=(K*=G)*(Z=(te*=te)/(b+te)),_.vy+=(ee*=G)*Z,j.vx-=K*(Z=1-Z),j.vy-=ee*Z)}return}return F>k+Z||z<k-Z||M>N+Z||U<N-Z}}function d(m){if(m.data)return m.r=i[m.data.index];for(var x=m.r=0;x<4;++x)m[x]&&m[x].r>m.r&&(m.r=m[x].r)}function g(){if(s){var m,x=s.length,A;for(i=new Array(x),m=0;m<x;++m)A=s[m],i[A.index]=+n(A,m,s)}}return p.initialize=function(m,x){s=m,l=x,g()},p.iterations=function(m){return arguments.length?(u=+m,p):u},p.strength=function(m){return arguments.length?(c=+m,p):c},p.radius=function(m){return arguments.length?(n=typeof m=="function"?m:jn(+m),g(),p):n},p}function sk(n){return n.index}function ex(n,s){var i=n.get(s);if(!i)throw new Error("node not found: "+s);return i}function eu(n){var s=sk,i=A,l,c=jn(30),u,p,d,g,m,x=1;n==null&&(n=[]);function A(b){return 1/Math.min(d[b.source.index],d[b.target.index])}function _(b){for(var S=0,B=n.length;S<x;++S)for(var D=0,F,M,z,U,j,te,Z;D<B;++D)F=n[D],M=F.source,z=F.target,U=z.x+z.vx-M.x-M.vx||go(m),j=z.y+z.vy-M.y-M.vy||go(m),te=Math.sqrt(U*U+j*j),te=(te-u[D])/te*b*l[D],U*=te,j*=te,z.vx-=U*(Z=g[D]),z.vy-=j*Z,M.vx+=U*(Z=1-Z),M.vy+=j*Z}function k(){if(p){var b,S=p.length,B=n.length,D=new Map(p.map((M,z)=>[s(M,z,p),M])),F;for(b=0,d=new Array(S);b<B;++b)F=n[b],F.index=b,typeof F.source!="object"&&(F.source=ex(D,F.source)),typeof F.target!="object"&&(F.target=ex(D,F.target)),d[F.source.index]=(d[F.source.index]||0)+1,d[F.target.index]=(d[F.target.index]||0)+1;for(b=0,g=new Array(B);b<B;++b)F=n[b],g[b]=d[F.source.index]/(d[F.source.index]+d[F.target.index]);l=new Array(B),N(),u=new Array(B),C()}}function N(){if(p)for(var b=0,S=n.length;b<S;++b)l[b]=+i(n[b],b,n)}function C(){if(p)for(var b=0,S=n.length;b<S;++b)u[b]=+c(n[b],b,n)}return _.initialize=function(b,S){p=b,m=S,k()},_.links=function(b){return arguments.length?(n=b,k(),_):n},_.id=function(b){return arguments.length?(s=b,_):s},_.iterations=function(b){return arguments.length?(x=+b,_):x},_.strength=function(b){return arguments.length?(i=typeof b=="function"?b:jn(+b),N(),_):i},_.distance=function(b){return arguments.length?(c=typeof b=="function"?b:jn(+b),C(),_):c},_}var ak={value:()=>{}};function _v(){for(var n=0,s=arguments.length,i={},l;n<s;++n){if(!(l=arguments[n]+"")||l in i||/[\s.]/.test(l))throw new Error("illegal type: "+l);i[l]=[]}return new Zu(i)}function Zu(n){this._=n}function lk(n,s){return n.trim().split(/^|\s+/).map(function(i){var l="",c=i.indexOf(".");if(c>=0&&(l=i.slice(c+1),i=i.slice(0,c)),i&&!s.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:l}})}Zu.prototype=_v.prototype={constructor:Zu,on:function(n,s){var i=this._,l=lk(n+"",i),c,u=-1,p=l.length;if(arguments.length<2){for(;++u<p;)if((c=(n=l[u]).type)&&(c=ck(i[c],n.name)))return c;return}if(s!=null&&typeof s!="function")throw new Error("invalid callback: "+s);for(;++u<p;)if(c=(n=l[u]).type)i[c]=tx(i[c],n.name,s);else if(s==null)for(c in i)i[c]=tx(i[c],n.name,null);return this},copy:function(){var n={},s=this._;for(var i in s)n[i]=s[i].slice();return new Zu(n)},call:function(n,s){if((c=arguments.length-2)>0)for(var i=new Array(c),l=0,c,u;l<c;++l)i[l]=arguments[l+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(u=this._[n],l=0,c=u.length;l<c;++l)u[l].value.apply(s,i)},apply:function(n,s,i){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var l=this._[n],c=0,u=l.length;c<u;++c)l[c].value.apply(s,i)}};function ck(n,s){for(var i=0,l=n.length,c;i<l;++i)if((c=n[i]).name===s)return c.value}function tx(n,s,i){for(var l=0,c=n.length;l<c;++l)if(n[l].name===s){n[l]=ak,n=n.slice(0,l).concat(n.slice(l+1));break}return i!=null&&n.push({name:s,value:i}),n}var sa=0,xl=0,ml=0,wv=1e3,nd,Al,rd=0,os=0,Ed=0,Cl=typeof performance=="object"&&performance.now?performance:Date,bv=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Cv(){return os||(bv(uk),os=Cl.now()+Ed)}function uk(){os=0}function D0(){this._call=this._time=this._next=null}D0.prototype=Ev.prototype={constructor:D0,restart:function(n,s,i){if(typeof n!="function")throw new TypeError("callback is not a function");i=(i==null?Cv():+i)+(s==null?0:+s),!this._next&&Al!==this&&(Al?Al._next=this:nd=this,Al=this),this._call=n,this._time=i,R0()},stop:function(){this._call&&(this._call=null,this._time=1/0,R0())}};function Ev(n,s,i){var l=new D0;return l.restart(n,s,i),l}function dk(){Cv(),++sa;for(var n=nd,s;n;)(s=os-n._time)>=0&&n._call.call(void 0,s),n=n._next;--sa}function nx(){os=(rd=Cl.now())+Ed,sa=xl=0;try{dk()}finally{sa=0,hk(),os=0}}function fk(){var n=Cl.now(),s=n-rd;s>wv&&(Ed-=s,rd=n)}function hk(){for(var n,s=nd,i,l=1/0;s;)s._call?(l>s._time&&(l=s._time),n=s,s=s._next):(i=s._next,s._next=null,s=n?n._next=i:nd=i);Al=n,R0(l)}function R0(n){if(!sa){xl&&(xl=clearTimeout(xl));var s=n-os;s>24?(n<1/0&&(xl=setTimeout(nx,n-Cl.now()-Ed)),ml&&(ml=clearInterval(ml))):(ml||(rd=Cl.now(),ml=setInterval(fk,wv)),sa=1,bv(nx))}}const pk=1664525,mk=1013904223,rx=4294967296;function gk(){let n=1;return()=>(n=(pk*n+mk)%rx)/rx}function xk(n){return n.x}function Ak(n){return n.y}var vk=10,yk=Math.PI*(3-Math.sqrt(5));function _k(n){var s,i=1,l=.001,c=1-Math.pow(l,1/300),u=0,p=.6,d=new Map,g=Ev(A),m=_v("tick","end"),x=gk();n==null&&(n=[]);function A(){_(),m.call("tick",s),i<l&&(g.stop(),m.call("end",s))}function _(C){var b,S=n.length,B;C===void 0&&(C=1);for(var D=0;D<C;++D)for(i+=(u-i)*c,d.forEach(function(F){F(i)}),b=0;b<S;++b)B=n[b],B.fx==null?B.x+=B.vx*=p:(B.x=B.fx,B.vx=0),B.fy==null?B.y+=B.vy*=p:(B.y=B.fy,B.vy=0);return s}function k(){for(var C=0,b=n.length,S;C<b;++C){if(S=n[C],S.index=C,S.fx!=null&&(S.x=S.fx),S.fy!=null&&(S.y=S.fy),isNaN(S.x)||isNaN(S.y)){var B=vk*Math.sqrt(.5+C),D=C*yk;S.x=B*Math.cos(D),S.y=B*Math.sin(D)}(isNaN(S.vx)||isNaN(S.vy))&&(S.vx=S.vy=0)}}function N(C){return C.initialize&&C.initialize(n,x),C}return k(),s={tick:_,restart:function(){return g.restart(A),s},stop:function(){return g.stop(),s},nodes:function(C){return arguments.length?(n=C,k(),d.forEach(N),s):n},alpha:function(C){return arguments.length?(i=+C,s):i},alphaMin:function(C){return arguments.length?(l=+C,s):l},alphaDecay:function(C){return arguments.length?(c=+C,s):+c},alphaTarget:function(C){return arguments.length?(u=+C,s):u},velocityDecay:function(C){return arguments.length?(p=1-C,s):1-p},randomSource:function(C){return arguments.length?(x=C,d.forEach(N),s):x},force:function(C,b){return arguments.length>1?(b==null?d.delete(C):d.set(C,N(b)),s):d.get(C)},find:function(C,b,S){var B=0,D=n.length,F,M,z,U,j;for(S==null?S=1/0:S*=S,B=0;B<D;++B)U=n[B],F=C-U.x,M=b-U.y,z=F*F+M*M,z<S&&(j=U,S=z);return j},on:function(C,b){return arguments.length>1?(m.on(C,b),s):m.on(C)}}}function tu(){var n,s,i,l,c=jn(-30),u,p=1,d=1/0,g=.81;function m(k){var N,C=n.length,b=mh(n,xk,Ak).visitAfter(A);for(l=k,N=0;N<C;++N)s=n[N],b.visit(_)}function x(){if(n){var k,N=n.length,C;for(u=new Array(N),k=0;k<N;++k)C=n[k],u[C.index]=+c(C,k,n)}}function A(k){var N=0,C,b,S=0,B,D,F;if(k.length){for(B=D=F=0;F<4;++F)(C=k[F])&&(b=Math.abs(C.value))&&(N+=C.value,S+=b,B+=b*C.x,D+=b*C.y);k.x=B/S,k.y=D/S}else{C=k,C.x=C.data.x,C.y=C.data.y;do N+=u[C.data.index];while(C=C.next)}k.value=N}function _(k,N,C,b){if(!k.value)return!0;var S=k.x-s.x,B=k.y-s.y,D=b-N,F=S*S+B*B;if(D*D/g<F)return F<d&&(S===0&&(S=go(i),F+=S*S),B===0&&(B=go(i),F+=B*B),F<p&&(F=Math.sqrt(p*F)),s.vx+=S*k.value*l/F,s.vy+=B*k.value*l/F),!0;if(k.length||F>=d)return;(k.data!==s||k.next)&&(S===0&&(S=go(i),F+=S*S),B===0&&(B=go(i),F+=B*B),F<p&&(F=Math.sqrt(p*F)));do k.data!==s&&(D=u[k.data.index]*l/F,s.vx+=S*D,s.vy+=B*D);while(k=k.next)}return m.initialize=function(k,N){n=k,i=N,x()},m.strength=function(k){return arguments.length?(c=typeof k=="function"?k:jn(+k),x(),m):c},m.distanceMin=function(k){return arguments.length?(p=k*k,m):Math.sqrt(p)},m.distanceMax=function(k){return arguments.length?(d=k*k,m):Math.sqrt(d)},m.theta=function(k){return arguments.length?(g=k*k,m):Math.sqrt(g)},m}function ix(n){var s=jn(.1),i,l,c;typeof n!="function"&&(n=jn(n==null?0:+n));function u(d){for(var g=0,m=i.length,x;g<m;++g)x=i[g],x.vx+=(c[g]-x.x)*l[g]*d}function p(){if(i){var d,g=i.length;for(l=new Array(g),c=new Array(g),d=0;d<g;++d)l[d]=isNaN(c[d]=+n(i[d],d,i))?0:+s(i[d],d,i)}}return u.initialize=function(d){i=d,p()},u.strength=function(d){return arguments.length?(s=typeof d=="function"?d:jn(+d),p(),u):s},u.x=function(d){return arguments.length?(n=typeof d=="function"?d:jn(+d),p(),u):n},u}function ox(n){var s=jn(.1),i,l,c;typeof n!="function"&&(n=jn(n==null?0:+n));function u(d){for(var g=0,m=i.length,x;g<m;++g)x=i[g],x.vy+=(c[g]-x.y)*l[g]*d}function p(){if(i){var d,g=i.length;for(l=new Array(g),c=new Array(g),d=0;d<g;++d)l[d]=isNaN(c[d]=+n(i[d],d,i))?0:+s(i[d],d,i)}}return u.initialize=function(d){i=d,p()},u.strength=function(d){return arguments.length?(s=typeof d=="function"?d:jn(+d),p(),u):s},u.y=function(d){return arguments.length?(n=typeof d=="function"?d:jn(+d),p(),u):n},u}const fn={background:"#0a0a0a",link:"#4b5563",ambiguous:"#9ca3af",particleAD:"#f59e0b",particleGT:"#06b6d4",particleDM:"#8b5cf6",particleACK:"#22c55e",particleTR:"#f97316",particleRQ:"#ec4899",particleRS:"#14b8a6",particleUnknown:"#6b7280"},wk={AD:fn.particleAD,GT:fn.particleGT,DM:fn.particleDM,ACK:fn.particleACK,TR:fn.particleTR,RQ:fn.particleRQ,RS:fn.particleRS,"?":fn.particleUnknown},bk=.008,Ck=15,Ek=2880*60*1e3,kk=[{emoji:"",label:"You",size:"text-xl"},{emoji:"",label:"Repeater",size:"text-base"},{emoji:"",label:"Node",size:"text-base"},{emoji:"",label:"Unknown",size:"text-base"}],Sk=[{label:"AD",color:fn.particleAD,description:"Advertisement"},{label:"GT",color:fn.particleGT,description:"Group Text"},{label:"DM",color:fn.particleDM,description:"Direct Message"},{label:"ACK",color:fn.particleACK,description:"Acknowledgment"},{label:"TR",color:fn.particleTR,description:"Trace"},{label:"RQ",color:fn.particleRQ,description:"Request"},{label:"RS",color:fn.particleRS,description:"Response"},{label:"?",color:fn.particleUnknown,description:"Other"}];function Bk(n){let s=0;for(let i=0;i<n.length;i++)s=(s<<5)-s+n.charCodeAt(i),s=s&s;return Math.abs(s).toString(16).padStart(8,"0")}function Pk(n){var s;try{const i=yt.MeshCoreDecoder.decode(n);if(!i.isValid)return null;const l={payloadType:i.payloadType,pathBytes:i.path||[],srcHash:null,dstHash:null,advertPubkey:null,groupTextSender:null,anonRequestPubkey:null};if(i.payloadType===yt.PayloadType.TextMessage&&i.payload.decoded){const c=i.payload.decoded;l.srcHash=c.sourceHash||null,l.dstHash=c.destinationHash||null}else if(i.payloadType===yt.PayloadType.Advert&&i.payload.decoded)l.advertPubkey=i.payload.decoded.publicKey||null;else if(i.payloadType===yt.PayloadType.GroupText&&i.payload.decoded){const c=i.payload.decoded;l.groupTextSender=((s=c.decrypted)==null?void 0:s.sender)||null}else if(i.payloadType===yt.PayloadType.AnonRequest&&i.payload.decoded){const c=i.payload.decoded;l.anonRequestPubkey=c.senderPublicKey||null}return l}catch{return null}}function Tk(n){switch(n){case yt.PayloadType.Advert:return"AD";case yt.PayloadType.GroupText:return"GT";case yt.PayloadType.TextMessage:return"DM";case yt.PayloadType.Ack:return"ACK";case yt.PayloadType.Trace:return"TR";case yt.PayloadType.Request:case yt.PayloadType.AnonRequest:return"RQ";case yt.PayloadType.Response:return"RS";default:return"?"}}function Dk(n,s){var l,c;const i=Bk(s.data).slice(0,8);if(n.payloadType===yt.PayloadType.Advert&&n.advertPubkey)return`ad:${n.advertPubkey.slice(0,12)}`;if(n.payloadType===yt.PayloadType.GroupText){const u=n.groupTextSender||((l=s.decrypted_info)==null?void 0:l.sender)||"?";return`gt:${((c=s.decrypted_info)==null?void 0:c.channel_name)||"?"}:${u}:${i}`}return n.payloadType===yt.PayloadType.TextMessage?`dm:${n.srcHash||"?"}:${n.dstHash||"?"}:${i}`:n.payloadType===yt.PayloadType.AnonRequest&&n.anonRequestPubkey?`rq:${n.anonRequestPubkey.slice(0,12)}:${i}`:`other:${i}`}function kv(n){return{sourceId:typeof n.source=="string"?n.source:n.source.id,targetId:typeof n.target=="string"?n.target:n.target.id}}function Rk(n,s){const i=n.toLowerCase(),l=s.filter(c=>c.public_key.toLowerCase().startsWith(i));return l.length===1?l[0]:null}function Nk(n,s){const i=n.toLowerCase();return s.filter(l=>l.public_key.toLowerCase().startsWith(i))}function Fk(n,s){return s.find(i=>i.name===n)||null}function nu(n){return(n==null?void 0:n.type)===na?"repeater":"client"}function sx(n){return n.filter((s,i)=>i===0||s!==n[i-1])}function Lk({packets:n,contacts:s,config:i,showAmbiguousPaths:l,showAmbiguousNodes:c,splitAmbiguousByTraffic:u,chargeStrength:p,letEmDrift:d,particleSpeedMultiplier:g,observationWindowSec:m,dimensions:x}){const A=R.useRef(new Map),_=R.useRef(new Map),k=R.useRef([]),N=R.useRef(null),C=R.useRef(new Set),b=R.useRef(new Map),S=R.useRef(new Map),B=R.useRef(g),D=R.useRef(m*1e3),[F,M]=R.useState({processed:0,animated:0,nodes:0,links:0});R.useEffect(()=>{B.current=g},[g]),R.useEffect(()=>{D.current=m*1e3},[m]),R.useEffect(()=>{const J=_k([]).force("link",eu([]).id(Y=>Y.id).distance(80).strength(.3)).force("charge",tu().strength(Y=>Y.id==="self"?-1200:-200).distanceMax(500)).force("center",Xg(x.width/2,x.height/2)).force("collide",ok(40)).force("selfX",ix(x.width/2).strength(Y=>Y.id==="self"?.1:0)).force("selfY",ox(x.height/2).strength(Y=>Y.id==="self"?.1:0)).alphaDecay(.02).velocityDecay(.5).alphaTarget(.03);return N.current=J,()=>{J.stop()}},[]),R.useEffect(()=>{const J=N.current;J&&(J.force("center",Xg(x.width/2,x.height/2)),J.force("selfX",ix(x.width/2).strength(Y=>Y.id==="self"?.1:0)),J.force("selfY",ox(x.height/2).strength(Y=>Y.id==="self"?.1:0)),J.force("charge",tu().strength(Y=>Y.id==="self"?p*6:p).distanceMax(500)),J.alpha(.3).restart())},[x,p]),R.useEffect(()=>{const J=N.current;J&&J.alphaTarget(d?.05:0)},[d]),R.useEffect(()=>{A.current.has("self")||(A.current.set("self",{id:"self",name:(i==null?void 0:i.name)||"Me",type:"self",isAmbiguous:!1,lastActivity:Date.now(),x:x.width/2,y:x.height/2}),z())},[i,x]),R.useEffect(()=>{C.current.clear();const J=A.current.get("self");A.current.clear(),J&&A.current.set("self",J),_.current.clear(),k.current=[],b.current.clear(),S.current.forEach(Y=>clearTimeout(Y)),S.current.clear(),M({processed:0,animated:0,nodes:J?1:0,links:0})},[l,c,u]);const z=R.useCallback(()=>{const J=N.current;if(!J)return;const Y=Array.from(A.current.values()),de=Array.from(_.current.values());J.nodes(Y);const W=J.force("link");W==null||W.links(de),J.alpha(.15).restart(),M(ae=>({...ae,nodes:Y.length,links:de.length}))},[]),U=R.useCallback((J,Y,de,W,ae,H)=>{const P=A.current.get(J);if(P)P.lastActivity=Date.now(),Y&&!P.name&&(P.name=Y),ae&&(P.ambiguousNames=ae),H!==void 0&&(P.lastSeen=H);else{const V=A.current.get("self");A.current.set(J,{id:J,name:Y,type:de,isAmbiguous:W,lastActivity:Date.now(),lastSeen:H,ambiguousNames:ae,x:((V==null?void 0:V.x)??400)+(Math.random()-.5)*100,y:((V==null?void 0:V.y)??300)+(Math.random()-.5)*100})}},[]),j=R.useCallback((J,Y)=>{const de=[J,Y].sort().join("->"),W=_.current.get(de);W?W.lastActivity=Date.now():_.current.set(de,{source:J,target:Y,lastActivity:Date.now()})},[]),te=R.useCallback(J=>{const Y=b.current.get(J);if(Y){b.current.delete(J),S.current.delete(J);for(const de of Y.paths){const W=sx(de.nodes);if(!(W.length<2))for(let ae=0;ae<W.length-1;ae++)k.current.push({linkKey:[W[ae],W[ae+1]].sort().join("->"),progress:-ae,speed:bk*B.current,color:wk[Y.label],label:Y.label,fromNodeId:W[ae],toNodeId:W[ae+1]})}}},[]),Z=R.useCallback((J,Y,de,W)=>{if(J.type==="pubkey"){if(J.value.length<12)return null;const H=J.value.slice(0,12).toLowerCase(),P=s.find(V=>V.public_key.toLowerCase().startsWith(H));return U(H,(P==null?void 0:P.name)||null,nu(P),!1,void 0,P==null?void 0:P.last_seen),H}if(J.type==="name"){const H=Fk(J.value,s);if(H){const V=H.public_key.slice(0,12).toLowerCase();return U(V,H.name,nu(H),!1,void 0,H.last_seen),V}const P=`name:${J.value}`;return U(P,J.value,"client",!1),P}const ae=Rk(J.value,s);if(ae){const H=ae.public_key.slice(0,12).toLowerCase();return U(H,ae.name,nu(ae),!1,void 0,ae.last_seen),H}if(de){const H=Nk(J.value,s),P=Y?H.filter(V=>V.type===na):H.filter(V=>V.type!==na);if(P.length===1){const V=P[0],q=V.public_key.slice(0,12).toLowerCase();return U(q,V.name,nu(V),!1,void 0,V.last_seen),q}if(P.length>1||P.length===0&&Y){const V=P.map(ue=>ue.name||ue.public_key.slice(0,8)),q=P.reduce((ue,se)=>se.last_seen&&(!ue||se.last_seen>ue)?se.last_seen:ue,null);let Q=`?${J.value.toLowerCase()}`,pe=J.value.toUpperCase();if(u&&Y&&W&&W.nextPrefix){const ue=W.nextPrefix.slice(0,2).toLowerCase();Q=`?${J.value.toLowerCase()}:>${ue}`,pe=`${J.value.toUpperCase()}:>${ue}`}return U(Q,pe,Y?"repeater":"client",!0,V.length>0?V:void 0,q),Q}}return null},[s,U,u]),K=R.useCallback((J,Y,de)=>{var ae;const W=[];if(J.payloadType===yt.PayloadType.Advert&&J.advertPubkey){const H=Z({type:"pubkey",value:J.advertPubkey},!1,!1);H&&W.push(H)}else if(J.payloadType===yt.PayloadType.AnonRequest&&J.anonRequestPubkey){const H=Z({type:"pubkey",value:J.anonRequestPubkey},!1,!1);H&&W.push(H)}else if(J.payloadType===yt.PayloadType.TextMessage&&J.srcHash)if(de&&J.srcHash.toLowerCase()===de)W.push("self");else{const H=Z({type:"prefix",value:J.srcHash},!1,c);H&&W.push(H)}else if(J.payloadType===yt.PayloadType.GroupText){const H=J.groupTextSender||((ae=Y.decrypted_info)==null?void 0:ae.sender);if(H){const P=Z({type:"name",value:H},!1,!1);P&&W.push(P)}}for(let H=0;H<J.pathBytes.length;H++){const P=J.pathBytes[H],V=W[W.length-1]||null,q=J.pathBytes[H+1]||null,Q=Z({type:"prefix",value:P},!0,l,{prevNode:V,nextPrefix:q});Q&&W.push(Q)}if(J.payloadType===yt.PayloadType.TextMessage&&J.dstHash)if(de&&J.dstHash.toLowerCase()===de)W.push("self");else{const H=Z({type:"prefix",value:J.dstHash},!1,c);H?W.push(H):W.push("self")}else W.length>0&&W.push("self");return W.length>0&&W[W.length-1]!=="self"&&W.push("self"),sx(W)},[Z,l,c]);R.useEffect(()=>{var ae;let J=0,Y=0,de=!1;const W=((ae=i==null?void 0:i.public_key)==null?void 0:ae.slice(0,12).toLowerCase())||null;for(const H of n){if(C.current.has(H.id))continue;C.current.add(H.id),J++,C.current.size>1e3&&(C.current=new Set(Array.from(C.current).slice(-500)));const P=Pk(H.data);if(!P)continue;const V=K(P,H,W);if(V.length<2)continue;for(let ue=0;ue<V.length-1;ue++)V[ue]!==V[ue+1]&&(j(V[ue],V[ue+1]),de=!0);const q=Dk(P,H),Q=Date.now(),pe=b.current.get(q);if(pe&&Q<pe.expiresAt)pe.paths.push({nodes:V,snr:H.snr??null,timestamp:Q});else{S.current.has(q)&&clearTimeout(S.current.get(q));const ue=D.current;b.current.set(q,{key:q,label:Tk(P.payloadType),paths:[{nodes:V,snr:H.snr??null,timestamp:Q}],firstSeen:Q,expiresAt:Q+ue}),S.current.set(q,setTimeout(()=>te(q),ue))}if(b.current.size>100){const ue=Array.from(b.current.entries()).sort((se,he)=>se[1].firstSeen-he[1].firstSeen).slice(0,50);for(const[se]of ue)clearTimeout(S.current.get(se)),S.current.delete(se),b.current.delete(se)}Y++}de&&z(),J>0&&M(H=>({...H,processed:H.processed+J,animated:H.animated+Y}))},[n,i,K,j,z,te]);const ee=R.useCallback(()=>{const J=N.current;if(!J)return;const Y=x.width/2,de=x.height/2,W=Math.min(x.width,x.height)*.4;for(const ae of A.current.values()){if(ae.id==="self")ae.x=Y,ae.y=de;else{const H=Math.random()*2*Math.PI,P=Math.random()*W;ae.x=Y+P*Math.cos(H),ae.y=de+P*Math.sin(H)}ae.vx=0,ae.vy=0}J.alpha(1).restart()},[x]),G=R.useCallback(()=>{const J=N.current;if(!J)return;const Y=p,de=-5e3,W=.3,ae=.02,H=1e3,P=2e3,V=1e3,q=performance.now(),Q=pe=>{const ue=pe-q;let se,he;if(ue<H){const Ee=ue/H;se=Y+(de-Y)*Ee,he=W+(ae-W)*Ee}else if(ue<H+P)se=de,he=ae;else if(ue<H+P+V){const Ee=(ue-H-P)/V;se=de+(Y-de)*Ee,he=ae+(W-ae)*Ee}else{J.force("charge",tu().strength(Ee=>Ee.id==="self"?Y*6:Y).distanceMax(500)),J.force("link",eu(Array.from(_.current.values())).id(Ee=>Ee.id).distance(80).strength(W)),J.alpha(.3).restart();return}J.force("charge",tu().strength(Ee=>Ee.id==="self"?se*6:se).distanceMax(500)),J.force("link",eu(Array.from(_.current.values())).id(Ee=>Ee.id).distance(80).strength(he)),J.alpha(.5).restart(),requestAnimationFrame(Q)};requestAnimationFrame(Q)},[p]),oe=R.useCallback(()=>{for(const de of S.current.values())clearTimeout(de);S.current.clear(),b.current.clear(),C.current.clear(),k.current.length=0,_.current.clear();const J=A.current.get("self");A.current.clear(),J&&(J.x=x.width/2,J.y=x.height/2,J.vx=0,J.vy=0,J.lastActivity=Date.now(),A.current.set("self",J));const Y=N.current;Y&&(Y.nodes(Array.from(A.current.values())),Y.force("link",eu([]).id(de=>de.id).distance(80).strength(.3)),Y.alpha(.3).restart()),M({processed:0,animated:0,nodes:1,links:0})},[x]);return{nodes:A.current,links:_.current,particles:k.current,simulation:N.current,stats:F,randomizePositions:ee,expandContract:G,clearAndReset:oe}}function Mk(n,s,i){n.strokeStyle=fn.link,n.lineWidth=2;for(const l of s){const{sourceId:c,targetId:u}=kv(l),p=i.get(c),d=i.get(u);(p==null?void 0:p.x)!=null&&(p==null?void 0:p.y)!=null&&(d==null?void 0:d.x)!=null&&(d==null?void 0:d.y)!=null&&(n.beginPath(),n.moveTo(p.x,p.y),n.lineTo(d.x,d.y),n.stroke())}}function Ik(n,s,i,l){const c=[];for(const u of s){const p=i.get(u.fromNodeId),d=i.get(u.toNodeId),g=l.has(u.fromNodeId)&&l.has(u.toNodeId);if(u.progress+=u.speed,u.progress>1||(c.push(u),!g||!(p!=null&&p.x)||!(d!=null&&d.x)||p.y==null||d.y==null)||u.progress<0)continue;const m=u.progress,x=p.x+(d.x-p.x)*m,A=p.y+(d.y-p.y)*m;n.fillStyle=u.color+"40",n.beginPath(),n.arc(x,A,14,0,Math.PI*2),n.fill(),n.fillStyle=u.color,n.beginPath(),n.arc(x,A,10,0,Math.PI*2),n.fill(),n.fillStyle="#ffffff",n.font="bold 8px sans-serif",n.textAlign="center",n.textBaseline="middle",n.fillText(u.label,x,A)}return c}function Ok(n,s,i){var l;for(const c of s){if(c.x==null||c.y==null)continue;const u=c.type==="self"?"":c.type==="repeater"?"":c.isAmbiguous?"":"",p=c.type==="self"?36:18;n.font=`${p}px sans-serif`,n.textAlign="center",n.textBaseline="middle",n.fillText(u,c.x,c.y);const d=c.isAmbiguous?c.id:c.name||(c.type==="self"?"Me":c.id.slice(0,8));if(n.font="11px sans-serif",n.textBaseline="top",n.fillStyle=c.isAmbiguous?fn.ambiguous:"#e5e7eb",n.fillText(d,c.x,c.y+p/2+4),c.isAmbiguous&&((l=c.ambiguousNames)!=null&&l.length)){n.font="9px sans-serif",n.fillStyle="#6b7280";let g=c.y+p/2+18;if(i===c.id)for(const m of c.ambiguousNames)n.fillText(m,c.x,g),g+=11;else c.ambiguousNames.length===1?n.fillText(c.ambiguousNames[0],c.x,g):n.fillText(`${c.ambiguousNames[0]} +${c.ambiguousNames.length-1} more`,c.x,g)}}}function ax({packets:n,contacts:s,config:i,fullScreen:l,onFullScreenChange:c,onClearPackets:u}){const p=R.useRef(null),d=R.useRef(null),[g,m]=R.useState({width:800,height:600}),[x,A]=R.useState(!0),[_,k]=R.useState(!1),[N,C]=R.useState(!1),[b,S]=R.useState(-200),[B,D]=R.useState(!1),[F,M]=R.useState(Ck),[z,U]=R.useState(!0),[j,te]=R.useState(2),[Z,K]=R.useState(!1),[ee,G]=R.useState({x:0,y:0,scale:1}),oe=R.useRef(!1),J=R.useRef({x:0,y:0}),[Y,de]=R.useState(null),W=Lk({packets:n,contacts:s,config:i,showAmbiguousPaths:x,showAmbiguousNodes:_,splitAmbiguousByTraffic:N,chargeStrength:b,letEmDrift:z,particleSpeedMultiplier:j,observationWindowSec:F,dimensions:g});R.useEffect(()=>{const se=()=>{if(d.current){const Ee=d.current.getBoundingClientRect();m({width:Ee.width,height:Ee.height})}};se();const he=new ResizeObserver(se);return d.current&&he.observe(d.current),()=>he.disconnect()},[]);const ae=R.useCallback(()=>{const se=p.current,he=se==null?void 0:se.getContext("2d");if(!se||!he)return;const{width:Ee,height:We}=g,dt=window.devicePixelRatio||1;se.width=Ee*dt,se.height=We*dt,se.style.width=`${Ee}px`,se.style.height=`${We}px`,he.scale(dt,dt),he.fillStyle=fn.background,he.fillRect(0,0,Ee,We),he.save(),he.translate(Ee/2,We/2),he.scale(ee.scale,ee.scale),he.translate(ee.x-Ee/2,ee.y-We/2);const ot=Date.now(),Be=Array.from(W.nodes.values()),Ie=new Set,ft=Be.filter(Qe=>{if(Qe.type==="self"||Qe.type==="client")return Ie.add(Qe.id),!0;if(B&&Qe.type==="repeater"){const qe=Qe.lastSeen?Qe.lastSeen*1e3:Qe.lastActivity;if(ot-qe>Ek)return!1}return Ie.add(Qe.id),!0}),lt=Array.from(W.links.values()).filter(Qe=>{const{sourceId:qe,targetId:et}=kv(Qe);return Ie.has(qe)&&Ie.has(et)});Mk(he,lt,W.nodes),W.particles.splice(0,W.particles.length,...Ik(he,W.particles,W.nodes,Ie)),Ok(he,ft,Y),he.restore()},[g,ee,W,Y,B]);R.useEffect(()=>{let se=!0;const he=()=>{se&&(ae(),requestAnimationFrame(he))};return he(),()=>{se=!1}},[ae]);const H=R.useCallback((se,he)=>{const{width:Ee,height:We}=g,dt=(se-Ee/2)/ee.scale-ee.x+Ee/2,ot=(he-We/2)/ee.scale-ee.y+We/2;return{x:dt,y:ot}},[g,ee]),P=R.useCallback((se,he)=>{for(const Ee of W.nodes.values())if(!(Ee.x==null||Ee.y==null)&&Math.hypot(se-Ee.x,he-Ee.y)<20)return Ee;return null},[W.nodes]),V=R.useCallback(se=>{oe.current=!0,J.current={x:se.clientX,y:se.clientY}},[]),q=R.useCallback(se=>{var Be;const he=p.current;if(!he)return;const Ee=he.getBoundingClientRect(),We=H(se.clientX-Ee.left,se.clientY-Ee.top);if(de(((Be=P(We.x,We.y))==null?void 0:Be.id)||null),!oe.current)return;const dt=se.clientX-J.current.x,ot=se.clientY-J.current.y;J.current={x:se.clientX,y:se.clientY},G(Ie=>({...Ie,x:Ie.x+dt/Ie.scale,y:Ie.y+ot/Ie.scale}))},[H,P]),Q=R.useCallback(()=>{oe.current=!1},[]),pe=R.useCallback(()=>{oe.current=!1,de(null)},[]),ue=R.useCallback(se=>{se.preventDefault();const he=se.deltaY>0?1/1.1:1.1;G(Ee=>({...Ee,scale:Math.min(Math.max(Ee.scale*he,.1),5)}))},[]);return R.useEffect(()=>{const se=p.current;if(se)return se.addEventListener("wheel",ue,{passive:!1}),()=>se.removeEventListener("wheel",ue)},[ue]),w.jsxs("div",{ref:d,className:"w-full h-full bg-background relative overflow-hidden",children:[w.jsx("canvas",{ref:p,className:"w-full h-full cursor-grab active:cursor-grabbing",style:{display:"block"},onMouseDown:V,onMouseMove:q,onMouseUp:Q,onMouseLeave:pe}),!Z&&w.jsx("div",{className:"absolute bottom-4 left-4 bg-background/80 backdrop-blur-sm rounded-lg p-3 text-xs border border-border",children:w.jsxs("div",{className:"flex gap-6",children:[w.jsxs("div",{className:"flex flex-col gap-1.5",children:[w.jsx("div",{className:"text-muted-foreground font-medium mb-1",children:"Nodes"}),kk.map(se=>w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:se.size,children:se.emoji}),w.jsx("span",{children:se.label})]},se.label))]}),w.jsxs("div",{className:"flex flex-col gap-1.5",children:[w.jsx("div",{className:"text-muted-foreground font-medium mb-1",children:"Packets"}),Sk.map(se=>w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center text-[8px] font-bold text-white",style:{backgroundColor:se.color},children:se.label}),w.jsx("span",{children:se.description})]},se.label))]})]})}),w.jsx("div",{className:"absolute top-4 right-4 bg-background/80 backdrop-blur-sm rounded-lg p-3 text-xs border border-border",children:w.jsxs("div",{className:"flex flex-col gap-2",children:[!Z&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{children:["Nodes: ",W.stats.nodes]}),w.jsxs("div",{children:["Links: ",W.stats.links]}),w.jsxs("div",{className:"border-t border-border pt-2 mt-1 flex flex-col gap-2",children:[w.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[w.jsx(Ti,{checked:x,onCheckedChange:se=>A(se===!0)}),w.jsx("span",{title:"Show placeholder nodes for repeaters when the 1-byte prefix matches multiple contacts",children:"Ambiguous repeaters"})]}),w.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[w.jsx(Ti,{checked:_,onCheckedChange:se=>k(se===!0)}),w.jsx("span",{title:"Show placeholder nodes for senders/recipients when only a 1-byte prefix is known",children:"Ambiguous sender/recipient"})]}),w.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[w.jsx(Ti,{checked:N,onCheckedChange:se=>C(se===!0),disabled:!x}),w.jsx("span",{title:"Split ambiguous repeaters into separate nodes based on traffic patterns (prevnext). Helps identify colliding prefixes representing different physical nodes.",className:x?"":"text-muted-foreground",children:"Hueristically group repeaters by traffic pattern"})]}),w.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[w.jsx(Ti,{checked:B,onCheckedChange:se=>D(se===!0)}),w.jsx("span",{title:"Hide repeaters not heard within the last 48 hours",children:"Hide repeaters >48hrs heard"})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("label",{className:"text-muted-foreground",title:"How long to wait for duplicate packets via different paths before animating",children:"Observation window:"}),w.jsx("input",{type:"number",min:"1",max:"60",value:F,onChange:se=>M(Math.max(1,Math.min(60,parseInt(se.target.value)||1))),className:"w-12 px-1 py-0.5 bg-background border border-border rounded text-xs text-center"}),w.jsx("span",{className:"text-muted-foreground",children:"sec"})]}),w.jsxs("div",{className:"border-t border-border pt-2 mt-1 flex flex-col gap-2",children:[w.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[w.jsx(Ti,{checked:z,onCheckedChange:se=>U(se===!0)}),w.jsx("span",{title:"When enabled, the graph continuously reorganizes itself into a better layout",children:"Let 'em drift"})]}),w.jsxs("div",{className:"flex flex-col gap-1 mt-1",children:[w.jsxs("label",{className:"text-muted-foreground",title:"How strongly nodes repel each other. Higher values spread nodes out more.",children:["Repulsion: ",Math.abs(b)]}),w.jsx("input",{type:"range",min:"50",max:"2500",value:Math.abs(b),onChange:se=>S(-parseInt(se.target.value)),className:"w-full h-2 bg-border rounded-lg appearance-none cursor-pointer accent-primary"})]}),w.jsxs("div",{className:"flex flex-col gap-1 mt-1",children:[w.jsxs("label",{className:"text-muted-foreground",title:"How fast particles travel along links. Higher values make packets move faster.",children:["Packet speed: ",j,"x"]}),w.jsx("input",{type:"range",min:"1",max:"5",step:"0.5",value:j,onChange:se=>te(parseFloat(se.target.value)),className:"w-full h-2 bg-border rounded-lg appearance-none cursor-pointer accent-primary"})]})]}),w.jsx("button",{onClick:W.randomizePositions,className:"mt-2 px-3 py-1.5 bg-primary/20 hover:bg-primary/30 text-primary rounded text-xs transition-colors",title:"Randomize node positions and let the simulation settle into a new layout",children:"Shuffle layout"}),w.jsx("button",{onClick:W.expandContract,className:"mt-1 px-3 py-1.5 bg-primary/20 hover:bg-primary/30 text-primary rounded text-xs transition-colors",title:"Expand nodes apart then contract back - can help untangle the graph",children:"Oooh Big Stretch!"}),w.jsx("button",{onClick:()=>{W.clearAndReset(),u==null||u()},className:"mt-1 px-3 py-1.5 bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-500 rounded text-xs transition-colors",title:"Clear all nodes, links, and packets - reset to initial state",children:"Clear & Reset"})]})]}),w.jsxs("div",{className:Z?"":"border-t border-border pt-2 mt-1 flex flex-col gap-2",children:[w.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[w.jsx(Ti,{checked:Z,onCheckedChange:se=>K(se===!0)}),w.jsx("span",{title:"Hide legends and controls for a cleaner view",children:"Hide UI"})]}),c&&w.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[w.jsx(Ti,{checked:l,onCheckedChange:se=>c(se===!0)}),w.jsx("span",{title:"Hide the packet feed panel",children:"Full screen"})]})]})]})})]})}function jk({packets:n,contacts:s,config:i,onClearPackets:l}){const[c,u]=R.useState(!1);return w.jsxs("div",{className:"flex flex-col h-full",children:[w.jsx("div",{className:"flex justify-between items-center px-4 py-3 border-b border-border font-medium text-lg",children:w.jsx("span",{children:"Mesh Visualizer"})}),w.jsx("div",{className:"flex-1 overflow-hidden md:hidden",children:w.jsxs(Y0,{defaultValue:"visualizer",className:"h-full flex flex-col",children:[w.jsxs(xd,{className:"mx-4 mt-2 grid grid-cols-2",children:[w.jsx(Cr,{value:"visualizer",children:"Visualizer"}),w.jsx(Cr,{value:"packets",children:"Packet Feed"})]}),w.jsx(Er,{value:"visualizer",className:"flex-1 m-0 overflow-hidden",children:w.jsx(ax,{packets:n,contacts:s,config:i,onClearPackets:l})}),w.jsx(Er,{value:"packets",className:"flex-1 m-0 overflow-hidden",children:w.jsx(P0,{packets:n})})]})}),w.jsxs("div",{className:"hidden md:flex flex-1 overflow-hidden",children:[w.jsx("div",{className:at("overflow-hidden transition-all duration-200",c?"flex-1":"flex-1 border-r border-border"),children:w.jsx(ax,{packets:n,contacts:s,config:i,fullScreen:c,onFullScreenChange:u,onClearPackets:l})}),w.jsx("div",{className:at("overflow-hidden transition-all duration-200",c?"w-0":"w-[31rem] lg:w-[38rem]"),children:w.jsxs("div",{className:"h-full flex flex-col",children:[w.jsx("div",{className:"px-3 py-2 border-b border-border text-sm font-medium text-muted-foreground",children:"Packet Feed"}),w.jsx("div",{className:"flex-1 overflow-hidden",children:w.jsx(P0,{packets:n})})]})})]})]})}const zk="modulepreload",Hk=function(n){return"/"+n},lx={},Vk=function(s,i,l){let c=Promise.resolve();if(i&&i.length>0){let p=function(m){return Promise.all(m.map(x=>Promise.resolve(x).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),g=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));c=p(i.map(m=>{if(m=Hk(m),m in lx)return;lx[m]=!0;const x=m.endsWith(".css"),A=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${A}`))return;const _=document.createElement("link");if(_.rel=x?"stylesheet":zk,x||(_.as="script"),_.crossOrigin="",_.href=m,g&&_.setAttribute("nonce",g),document.head.appendChild(_),x)return new Promise((k,N)=>{_.addEventListener("load",k),_.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${m}`)))})}))}function u(p){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=p,window.dispatchEvent(d),!d.defaultPrevented)throw p}return c.then(p=>{for(const d of p||[])d.status==="rejected"&&u(d.reason);return s().catch(u)})};var Uk=Bl();const Sv=aa(Uk);var Wu={exports:{}},Zk=Wu.exports,cx;function Wk(){return cx||(cx=1,(function(n,s){(function(i,l,c){n.exports=l(At(),Bl(),yd())})(Zk,function(i){return i.HmacSHA256})})(Wu)),Wu.exports}var qk=Wk();const Gk=aa(qk);var qu={exports:{}},$k=qu.exports,ux;function Kk(){return ux||(ux=1,(function(n,s){(function(i,l){n.exports=l(At())})($k,function(i){return i.enc.Hex})})(qu)),qu.exports}var Qk=Kk();const ta=aa(Qk),Bv="abcdefghijklmnopqrstuvwxyz0123456789",Yo=Bv.length,Pv=Bv+"-",N0="[[public room]]",Gu="8b3387e9c5cdea6ac9e5edbaa115cd72",F0=720*60*60;function Yk(n){if(!n||n.length===0)return null;const s=n.length;let i=0,l=1;for(let c=0;c<s;c++){const u=n[c],p=Pv.indexOf(u);if(p===-1)return null;const d=c===0,g=c===s-1,m=d||g?36:37;if((d||g)&&p===36)return null;i+=p*l,l*=m}return{length:s,index:i}}function es(n,s){if(n<=0)return null;let i="",l=s,c=!1;for(let u=0;u<n;u++){const p=u===0,d=u===n-1,g=p||d?36:37,m=l%g;l=Math.floor(l/g);const x=m===36;if(x&&c)return null;c=x,i+=Pv[m]}return i}function L0(n){return n===N0?Gu:Sv(n).toString(ta).substring(0,32)}function M0(n){return Sv(ta.parse(n)).toString(ta).substring(0,2)}function Tv(n,s,i){const l=i.padEnd(64,"0");return Gk(ta.parse(n),ta.parse(l)).toString(ta).substring(0,4).toLowerCase()===s.toLowerCase()}function vl(n){if(n===1)return Yo;if(n===2)return Yo*Yo;let s=Yo,i=1;for(let c=2;c<=n-2;c++){const u=(s+i)*Yo,p=s;s=u,i=p}const l=n>2?s+i:1;return Yo*l*Yo}function Xk(n,s=F0,i){const l=Math.floor(Date.now()/1e3);return n<=l&&n>=l-s}function Jk(n){return!n.includes("")}class kd{constructor(){this.device=null,this.pipeline=null,this.bindGroupLayout=null,this.paramsBuffer=null,this.matchCountBuffer=null,this.matchIndicesBuffer=null,this.ciphertextBuffer=null,this.ciphertextBufferSize=0,this.matchCountReadBuffers=[null,null],this.matchIndicesReadBuffers=[null,null],this.currentReadBufferIndex=0,this.bindGroup=null,this.bindGroupDirty=!0,this.shaderCode=`
// SHA256 round constants
const K: array<u32, 64> = array<u32, 64>(
  0x428a2f98u, 0x71374491u, 0xb5c0fbcfu, 0xe9b5dba5u, 0x3956c25bu, 0x59f111f1u, 0x923f82a4u, 0xab1c5ed5u,
  0xd807aa98u, 0x12835b01u, 0x243185beu, 0x550c7dc3u, 0x72be5d74u, 0x80deb1feu, 0x9bdc06a7u, 0xc19bf174u,
  0xe49b69c1u, 0xefbe4786u, 0x0fc19dc6u, 0x240ca1ccu, 0x2de92c6fu, 0x4a7484aau, 0x5cb0a9dcu, 0x76f988dau,
  0x983e5152u, 0xa831c66du, 0xb00327c8u, 0xbf597fc7u, 0xc6e00bf3u, 0xd5a79147u, 0x06ca6351u, 0x14292967u,
  0x27b70a85u, 0x2e1b2138u, 0x4d2c6dfcu, 0x53380d13u, 0x650a7354u, 0x766a0abbu, 0x81c2c92eu, 0x92722c85u,
  0xa2bfe8a1u, 0xa81a664bu, 0xc24b8b70u, 0xc76c51a3u, 0xd192e819u, 0xd6990624u, 0xf40e3585u, 0x106aa070u,
  0x19a4c116u, 0x1e376c08u, 0x2748774cu, 0x34b0bcb5u, 0x391c0cb3u, 0x4ed8aa4au, 0x5b9cca4fu, 0x682e6ff3u,
  0x748f82eeu, 0x78a5636fu, 0x84c87814u, 0x8cc70208u, 0x90befffau, 0xa4506cebu, 0xbef9a3f7u, 0xc67178f2u
);

// Character lookup table (a-z = 0-25, 0-9 = 26-35, dash = 36)
const CHARS: array<u32, 37> = array<u32, 37>(
  0x61u, 0x62u, 0x63u, 0x64u, 0x65u, 0x66u, 0x67u, 0x68u, 0x69u, 0x6au, // a-j
  0x6bu, 0x6cu, 0x6du, 0x6eu, 0x6fu, 0x70u, 0x71u, 0x72u, 0x73u, 0x74u, // k-t
  0x75u, 0x76u, 0x77u, 0x78u, 0x79u, 0x7au,                             // u-z
  0x30u, 0x31u, 0x32u, 0x33u, 0x34u, 0x35u, 0x36u, 0x37u, 0x38u, 0x39u, // 0-9
  0x2du                                                                  // dash
);

struct Params {
  target_channel_hash: u32,
  batch_offset: u32,
  name_length: u32,
  batch_size: u32,
  target_mac: u32,           // First 2 bytes of target MAC (in high 16 bits)
  ciphertext_words: u32,     // Number of 32-bit words in ciphertext
  ciphertext_len_bits: u32,  // Length of ciphertext in bits
  verify_mac: u32,           // 1 to verify MAC, 0 to skip
}

@group(0) @binding(0) var<uniform> params: Params;
@group(0) @binding(1) var<storage, read_write> match_count: atomic<u32>;
@group(0) @binding(2) var<storage, read_write> match_indices: array<u32>;
@group(0) @binding(3) var<storage, read> ciphertext: array<u32>; // Ciphertext data

fn rotr(x: u32, n: u32) -> u32 {
  return (x >> n) | (x << (32u - n));
}

fn ch(x: u32, y: u32, z: u32) -> u32 {
  return (x & y) ^ (~x & z);
}

fn maj(x: u32, y: u32, z: u32) -> u32 {
  return (x & y) ^ (x & z) ^ (y & z);
}

fn sigma0(x: u32) -> u32 {
  return rotr(x, 2u) ^ rotr(x, 13u) ^ rotr(x, 22u);
}

fn sigma1(x: u32) -> u32 {
  return rotr(x, 6u) ^ rotr(x, 11u) ^ rotr(x, 25u);
}

fn gamma0(x: u32) -> u32 {
  return rotr(x, 7u) ^ rotr(x, 18u) ^ (x >> 3u);
}

fn gamma1(x: u32) -> u32 {
  return rotr(x, 17u) ^ rotr(x, 19u) ^ (x >> 10u);
}

// Convert index to room name bytes, returns the hash as a u32 for the first byte check
fn index_to_room_name(idx: u32, length: u32, msg: ptr<function, array<u32, 16>>) -> bool {
  // Message starts with '#' (0x23)
  var byte_pos = 0u;
  var word_idx = 0u;
  var current_word = 0x23000000u; // '#' in big-endian position 0
  byte_pos = 1u;

  var remaining = idx;
  var prev_was_dash = false;

  // Generate room name from index
  for (var i = 0u; i < length; i++) {
    let char_count = select(37u, 36u, i == 0u || i == length - 1u); // no dash at start/end
    var char_idx = remaining % char_count;
    remaining = remaining / char_count;

    // Check for consecutive dashes (invalid)
    let is_dash = char_idx == 36u && i > 0u && i < length - 1u;
    if (is_dash && prev_was_dash) {
      return false; // Invalid: consecutive dashes
    }
    prev_was_dash = is_dash;

    // Map char index to actual character
    let c = CHARS[char_idx];

    // Pack byte into current word (big-endian)
    let shift = (3u - byte_pos % 4u) * 8u;
    if (byte_pos % 4u == 0u && byte_pos > 0u) {
      (*msg)[word_idx] = current_word;
      word_idx = word_idx + 1u;
      current_word = 0u;
    }
    current_word = current_word | (c << shift);
    byte_pos = byte_pos + 1u;
  }

  // Add padding: 0x80 followed by zeros, then length in bits
  let msg_len_bits = (length + 1u) * 8u; // +1 for '#'

  // Add 0x80 padding byte
  let shift = (3u - byte_pos % 4u) * 8u;
  if (byte_pos % 4u == 0u) {
    (*msg)[word_idx] = current_word;
    word_idx = word_idx + 1u;
    current_word = 0x80000000u;
  } else {
    current_word = current_word | (0x80u << shift);
  }
  byte_pos = byte_pos + 1u;

  // Store current word
  if (byte_pos % 4u == 0u || word_idx < 14u) {
    (*msg)[word_idx] = current_word;
    word_idx = word_idx + 1u;
  }

  // Zero-fill until word 14
  for (var i = word_idx; i < 14u; i++) {
    (*msg)[i] = 0u;
  }

  // Length in bits (64-bit, but we only use lower 32 bits for short messages)
  (*msg)[14u] = 0u;
  (*msg)[15u] = msg_len_bits;

  return true;
}

fn sha256_block(msg: ptr<function, array<u32, 16>>) -> array<u32, 8> {
  // Initialize hash values
  var h: array<u32, 8> = array<u32, 8>(
    0x6a09e667u, 0xbb67ae85u, 0x3c6ef372u, 0xa54ff53au,
    0x510e527fu, 0x9b05688cu, 0x1f83d9abu, 0x5be0cd19u
  );

  // Message schedule
  var w: array<u32, 64>;
  for (var i = 0u; i < 16u; i++) {
    w[i] = (*msg)[i];
  }
  for (var i = 16u; i < 64u; i++) {
    w[i] = gamma1(w[i-2u]) + w[i-7u] + gamma0(w[i-15u]) + w[i-16u];
  }

  // Compression
  var a = h[0]; var b = h[1]; var c = h[2]; var d = h[3];
  var e = h[4]; var f = h[5]; var g = h[6]; var hh = h[7];

  for (var i = 0u; i < 64u; i++) {
    let t1 = hh + sigma1(e) + ch(e, f, g) + K[i] + w[i];
    let t2 = sigma0(a) + maj(a, b, c);
    hh = g; g = f; f = e; e = d + t1;
    d = c; c = b; b = a; a = t1 + t2;
  }

  h[0] = h[0] + a; h[1] = h[1] + b; h[2] = h[2] + c; h[3] = h[3] + d;
  h[4] = h[4] + e; h[5] = h[5] + f; h[6] = h[6] + g; h[7] = h[7] + hh;

  return h;
}

// Compute SHA256 of the key (16 bytes) to get channel hash
fn sha256_key(key: array<u32, 4>) -> u32 {
  var msg: array<u32, 16>;

  // Key bytes (16 bytes = 4 words)
  msg[0] = key[0];
  msg[1] = key[1];
  msg[2] = key[2];
  msg[3] = key[3];

  // Padding: 0x80 followed by zeros
  msg[4] = 0x80000000u;
  for (var i = 5u; i < 14u; i++) {
    msg[i] = 0u;
  }

  // Length: 128 bits
  msg[14] = 0u;
  msg[15] = 128u;

  let hash = sha256_block(&msg);

  // Return first byte of hash (big-endian)
  return hash[0] >> 24u;
}

// HMAC-SHA256 for MAC verification
// Key is 16 bytes (4 words), padded to 32 bytes with zeros for MeshCore
// Returns first 2 bytes of HMAC (as u32 in high 16 bits)
fn hmac_sha256_mac(key: array<u32, 4>, ciphertext_len: u32) -> u32 {
  // HMAC: H((K' ^ opad) || H((K' ^ ipad) || message))
  // K' is 64 bytes (32 bytes key + 32 bytes zero padding for MeshCore, then padded to 64)
  // ipad = 0x36 repeated, opad = 0x5c repeated

  // Build padded key (64 bytes = 16 words)
  // MeshCore uses 32-byte secret: 16-byte key + 16 zero bytes
  var k_pad: array<u32, 16>;
  k_pad[0] = key[0];
  k_pad[1] = key[1];
  k_pad[2] = key[2];
  k_pad[3] = key[3];
  for (var i = 4u; i < 16u; i++) {
    k_pad[i] = 0u;
  }

  // Inner hash: SHA256((K' ^ ipad) || message)
  // First block: K' ^ ipad (64 bytes)
  var inner_block: array<u32, 16>;
  for (var i = 0u; i < 16u; i++) {
    inner_block[i] = k_pad[i] ^ 0x36363636u;
  }

  // Initialize hash state with first block
  var h: array<u32, 8> = sha256_block(&inner_block);

  // Process ciphertext blocks (continuing from h state)
  let ciphertext_words = params.ciphertext_words;
  var word_idx = 0u;

  // Process full 64-byte blocks of ciphertext
  while (word_idx + 16u <= ciphertext_words) {
    var block: array<u32, 16>;
    for (var i = 0u; i < 16u; i++) {
      block[i] = ciphertext[word_idx + i];
    }
    h = sha256_block_continue(&block, h);
    word_idx = word_idx + 16u;
  }

  // Final block with remaining ciphertext + padding
  var final_block: array<u32, 16>;
  var remaining = ciphertext_words - word_idx;
  for (var i = 0u; i < 16u; i++) {
    if (i < remaining) {
      final_block[i] = ciphertext[word_idx + i];
    } else if (i == remaining) {
      // Add 0x80 padding
      final_block[i] = 0x80000000u;
    } else {
      final_block[i] = 0u;
    }
  }

  // Add length (64 bytes of ipad + ciphertext length)
  let total_bits = 512u + params.ciphertext_len_bits;
  if (remaining < 14u) {
    final_block[14] = 0u;
    final_block[15] = total_bits;
    h = sha256_block_continue(&final_block, h);
  } else {
    // Need extra block for length
    h = sha256_block_continue(&final_block, h);
    var len_block: array<u32, 16>;
    for (var i = 0u; i < 14u; i++) {
      len_block[i] = 0u;
    }
    len_block[14] = 0u;
    len_block[15] = total_bits;
    h = sha256_block_continue(&len_block, h);
  }

  let inner_hash = h;

  // Outer hash: SHA256((K' ^ opad) || inner_hash)
  var outer_block: array<u32, 16>;
  for (var i = 0u; i < 16u; i++) {
    outer_block[i] = k_pad[i] ^ 0x5c5c5c5cu;
  }
  h = sha256_block(&outer_block);

  // Second block: inner_hash (32 bytes) + padding
  var hash_block: array<u32, 16>;
  for (var i = 0u; i < 8u; i++) {
    hash_block[i] = inner_hash[i];
  }
  hash_block[8] = 0x80000000u;
  for (var i = 9u; i < 14u; i++) {
    hash_block[i] = 0u;
  }
  hash_block[14] = 0u;
  hash_block[15] = 512u + 256u; // 64 bytes opad + 32 bytes inner hash

  h = sha256_block_continue(&hash_block, h);

  // Return first 2 bytes (high 16 bits of first word)
  return h[0] & 0xFFFF0000u;
}

// SHA256 block computation continuing from existing state
fn sha256_block_continue(msg: ptr<function, array<u32, 16>>, h_in: array<u32, 8>) -> array<u32, 8> {
  var h = h_in;

  // Message schedule
  var w: array<u32, 64>;
  for (var i = 0u; i < 16u; i++) {
    w[i] = (*msg)[i];
  }
  for (var i = 16u; i < 64u; i++) {
    w[i] = gamma1(w[i-2u]) + w[i-7u] + gamma0(w[i-15u]) + w[i-16u];
  }

  // Compression
  var a = h[0]; var b = h[1]; var c = h[2]; var d = h[3];
  var e = h[4]; var f = h[5]; var g = h[6]; var hh = h[7];

  for (var i = 0u; i < 64u; i++) {
    let t1 = hh + sigma1(e) + ch(e, f, g) + K[i] + w[i];
    let t2 = sigma0(a) + maj(a, b, c);
    hh = g; g = f; f = e; e = d + t1;
    d = c; c = b; b = a; a = t1 + t2;
  }

  h[0] = h[0] + a; h[1] = h[1] + b; h[2] = h[2] + c; h[3] = h[3] + d;
  h[4] = h[4] + e; h[5] = h[5] + f; h[6] = h[6] + g; h[7] = h[7] + hh;

  return h;
}

// Process a single candidate and record match if found
fn process_candidate(name_idx: u32) {
  // Generate message for this room name
  var msg: array<u32, 16>;
  let valid = index_to_room_name(name_idx, params.name_length, &msg);

  if (!valid) {
    return;
  }

  // Compute SHA256("#roomname") - this gives us the key
  let key_hash = sha256_block(&msg);

  // Take first 16 bytes (4 words) as the key
  var key: array<u32, 4>;
  key[0] = key_hash[0];
  key[1] = key_hash[1];
  key[2] = key_hash[2];
  key[3] = key_hash[3];

  // Compute SHA256(key) to get channel hash
  let channel_hash = sha256_key(key);

  // Check if channel hash matches target
  if (channel_hash != params.target_channel_hash) {
    return;
  }

  // Channel hash matches - verify MAC if enabled
  if (params.verify_mac == 1u) {
    let computed_mac = hmac_sha256_mac(key, params.ciphertext_len_bits);
    if (computed_mac != params.target_mac) {
      return;
    }
  }

  // Found a match - record the index
  let match_idx = atomicAdd(&match_count, 1u);
  if (match_idx < 1024u) { // Limit stored matches
    match_indices[match_idx] = name_idx;
  }
}

// Each thread processes 32 candidates to amortize thread overhead
const CANDIDATES_PER_THREAD: u32 = 32u;

@compute @workgroup_size(256)
fn main(@builtin(global_invocation_id) global_id: vec3<u32>) {
  let base_idx = global_id.x * CANDIDATES_PER_THREAD;

  for (var i = 0u; i < CANDIDATES_PER_THREAD; i++) {
    let idx = base_idx + i;
    if (idx >= params.batch_size) {
      return;
    }
    let name_idx = params.batch_offset + idx;
    process_candidate(name_idx);
  }
}
`}async init(){if(!navigator.gpu)return console.warn("WebGPU not supported"),!1;try{const s=await navigator.gpu.requestAdapter();if(!s)return console.warn("No GPU adapter found"),!1;this.device=await s.requestDevice(),this.bindGroupLayout=this.device.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}}]}),this.paramsBuffer=this.device.createBuffer({size:32,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.matchCountBuffer=this.device.createBuffer({size:4,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST}),this.matchIndicesBuffer=this.device.createBuffer({size:1024*4,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC});for(let c=0;c<2;c++)this.matchCountReadBuffers[c]=this.device.createBuffer({size:4,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST}),this.matchIndicesReadBuffers[c]=this.device.createBuffer({size:1024*4,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST});const i=this.device.createShaderModule({code:this.shaderCode}),l=this.device.createPipelineLayout({bindGroupLayouts:[this.bindGroupLayout]});return this.pipeline=this.device.createComputePipeline({layout:l,compute:{module:i,entryPoint:"main"}}),!0}catch(s){return console.error("WebGPU initialization failed:",s),!1}}isAvailable(){return this.device!==null&&this.pipeline!==null}indexToRoomName(s,i){return es(i,s)}countNamesForLength(s){return vl(s)}async runBatch(s,i,l,c,u,p){if(!this.device||!this.pipeline||!this.bindGroupLayout||!this.paramsBuffer||!this.matchCountBuffer||!this.matchIndicesBuffer||!this.matchCountReadBuffers[0]||!this.matchCountReadBuffers[1]||!this.matchIndicesReadBuffers[0]||!this.matchIndicesReadBuffers[1])throw new Error("GPU not initialized");const d=this.currentReadBufferIndex;this.currentReadBufferIndex=1-this.currentReadBufferIndex;const g=this.matchCountReadBuffers[d],m=this.matchIndicesReadBuffers[d],x=u&&p?1:0;let A,_=0,k=0;if(x){const M=new Uint8Array(u.length/2);for(let Z=0;Z<M.length;Z++)M[Z]=parseInt(u.substr(Z*2,2),16);_=M.length*8;const z=Math.ceil(M.length/4)*4,U=new Uint8Array(z);U.set(M),A=new Uint32Array(z/4);for(let Z=0;Z<A.length;Z++)A[Z]=U[Z*4]<<24|U[Z*4+1]<<16|U[Z*4+2]<<8|U[Z*4+3];const j=parseInt(p.substr(0,2),16),te=parseInt(p.substr(2,2),16);k=j<<24|te<<16}else A=new Uint32Array([0]);const N=Math.max(A.length*4,4);(!this.ciphertextBuffer||this.ciphertextBufferSize<N)&&(this.ciphertextBuffer&&this.ciphertextBuffer.destroy(),this.ciphertextBuffer=this.device.createBuffer({size:N,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST}),this.ciphertextBufferSize=N,this.bindGroupDirty=!0);const C=new Uint32Array([s,l,i,c,k,A.length,_,x]);this.device.queue.writeBuffer(this.paramsBuffer,0,C),this.device.queue.writeBuffer(this.ciphertextBuffer,0,A),this.device.queue.writeBuffer(this.matchCountBuffer,0,kd.ZERO_DATA),(this.bindGroupDirty||!this.bindGroup)&&(this.bindGroup=this.device.createBindGroup({layout:this.bindGroupLayout,entries:[{binding:0,resource:{buffer:this.paramsBuffer}},{binding:1,resource:{buffer:this.matchCountBuffer}},{binding:2,resource:{buffer:this.matchIndicesBuffer}},{binding:3,resource:{buffer:this.ciphertextBuffer}}]}),this.bindGroupDirty=!1);const b=this.device.createCommandEncoder(),S=b.beginComputePass();S.setPipeline(this.pipeline),S.setBindGroup(0,this.bindGroup),S.dispatchWorkgroups(Math.ceil(c/(256*32))),S.end(),b.copyBufferToBuffer(this.matchCountBuffer,0,g,0,4),b.copyBufferToBuffer(this.matchIndicesBuffer,0,m,0,1024*4),this.device.queue.submit([b.finish()]),await g.mapAsync(GPUMapMode.READ);const D=new Uint32Array(g.getMappedRange())[0];g.unmap();const F=[];if(D>0){await m.mapAsync(GPUMapMode.READ);const M=new Uint32Array(m.getMappedRange());for(let z=0;z<Math.min(D,1024);z++)F.push(M[z]);m.unmap()}return F}destroy(){var s,i,l,c,u,p,d,g;(s=this.paramsBuffer)==null||s.destroy(),(i=this.matchCountBuffer)==null||i.destroy(),(l=this.matchIndicesBuffer)==null||l.destroy(),(c=this.ciphertextBuffer)==null||c.destroy(),(u=this.matchCountReadBuffers[0])==null||u.destroy(),(p=this.matchCountReadBuffers[1])==null||p.destroy(),(d=this.matchIndicesReadBuffers[0])==null||d.destroy(),(g=this.matchIndicesReadBuffers[1])==null||g.destroy(),this.paramsBuffer=null,this.matchCountBuffer=null,this.matchIndicesBuffer=null,this.ciphertextBuffer=null,this.ciphertextBufferSize=0,this.matchCountReadBuffers=[null,null],this.matchIndicesReadBuffers=[null,null],this.currentReadBufferIndex=0,this.bindGroup=null,this.bindGroupDirty=!0,this.device&&(this.device.destroy(),this.device=null),this.pipeline=null,this.bindGroupLayout=null}}kd.ZERO_DATA=new Uint32Array([0]);function eS(){return typeof navigator<"u"&&"gpu"in navigator}class dx{runBatch(s,i,l,c,u,p){const d=[],g=s.toString(16).padStart(2,"0"),m=!!(u&&p);for(let x=0;x<c;x++){const A=l+x,_=es(i,A);if(!_)continue;const k=L0("#"+_);M0(k)===g&&(m&&!Tv(u,p,k)||d.push(A))}return d}destroy(){}}const tS=/^[a-z0-9-]+$/,nS=/^[a-z0-9].*[a-z0-9]$|^[a-z0-9]$/,rS=/--/;function fx(n){return!(!n||n.length===0||!tS.test(n)||n.length>1&&!nS.test(n)||rS.test(n))}class iS{constructor(){this.gpuInstance=null,this.cpuInstance=null,this.wordlist=[],this.abortFlag=!1,this.useTimestampFilter=!0,this.useUtf8Filter=!0,this.useSenderFilter=!0,this.validSeconds=F0,this.useCpu=!1}async loadWordlist(s){const i=await fetch(s);if(!i.ok)throw new Error(`Failed to load wordlist: ${i.status} ${i.statusText}`);const c=(await i.text()).split(`
`).map(u=>u.trim().toLowerCase()).filter(u=>u.length>0);this.wordlist=c.filter(fx)}setWordlist(s){this.wordlist=s.map(i=>i.trim().toLowerCase()).filter(fx)}abort(){this.abortFlag=!0}isGpuAvailable(){return eS()}async decodePacket(s){var l;const i=s.trim().replace(/\s+/g,"").replace(/^0x/i,"");if(!i||!/^[0-9a-fA-F]+$/.test(i))return null;try{const u=(l=(await yt.MeshCorePacketDecoder.decodeWithVerification(i,{})).payload)==null?void 0:l.decoded;return!(u!=null&&u.channelHash)||!(u!=null&&u.ciphertext)||!(u!=null&&u.cipherMac)?null:{channelHash:u.channelHash,ciphertext:u.ciphertext,cipherMac:u.cipherMac,isGroupText:!0}}catch{return null}}async crack(s,i,l){this.abortFlag=!1,this.useTimestampFilter=(i==null?void 0:i.useTimestampFilter)??!0,this.useUtf8Filter=(i==null?void 0:i.useUtf8Filter)??!0,this.useSenderFilter=(i==null?void 0:i.useSenderFilter)??!0,this.validSeconds=(i==null?void 0:i.validSeconds)??F0,this.useCpu=(i==null?void 0:i.forceCpu)??!1;const c=(i==null?void 0:i.maxLength)??8,u=(i==null?void 0:i.startingLength)??1,p=(i==null?void 0:i.useDictionary)??!0,d=(i==null?void 0:i.startFromType)??"bruteforce",g=s.toLowerCase(),m=await this.decodePacket(g);if(!m)return{found:!1,error:"Invalid packet or not a GroupText packet"};const{channelHash:x,ciphertext:A,cipherMac:_}=m,k=parseInt(x,16);this.useCpu?this.cpuInstance||(this.cpuInstance=new dx):this.gpuInstance||(this.gpuInstance=new kd,await this.gpuInstance.init()||(this.useCpu=!0,this.cpuInstance=new dx));const N=performance.now();let C=0,b=performance.now(),S=u,B=0,D=0,F=!1;if(i!=null&&i.startFrom){const G=i.startFrom.toLowerCase();if(d==="dictionary"){const oe=this.wordlist.indexOf(G);oe>=0&&(D=oe+1)}else{F=!0;const oe=Yk(G);oe&&(S=Math.max(u,oe.length),B=oe.index+1,B>=vl(S)&&(S++,B=0))}}let M=0;p&&!F&&this.wordlist.length>0&&(M+=this.wordlist.length-D);for(let G=S;G<=c;G++)M+=vl(G);M-=B;const z=(G,oe,J)=>{if(!l)return;const de=(performance.now()-N)/1e3,W=de>0?Math.round(C/de):0,ae=M-C,H=W>0?ae/W:0;l({checked:C,total:M,percent:M>0?Math.min(100,C/M*100):0,rateKeysPerSec:W,etaSeconds:H,elapsedSeconds:de,currentLength:oe,currentPosition:J,phase:G})},U=G=>{if(!Tv(A,_,G))return{valid:!1};const oe=yt.ChannelCrypto.decryptGroupTextMessage(A,_,G);return!oe.success||!oe.data?{valid:!1}:this.useTimestampFilter&&!Xk(oe.data.timestamp,this.validSeconds)?{valid:!1}:this.useUtf8Filter&&!Jk(oe.data.message)?{valid:!1}:this.useSenderFilter&&!oe.data.sender?{valid:!1}:{valid:!0,message:oe.data.sender?`${oe.data.sender}: ${oe.data.message}`:oe.data.message}};if(!F&&D===0&&S===u&&B===0){z("public-key",0,N0);const G=M0(Gu);if(x===G){const oe=U(Gu);if(oe.valid)return{found:!0,roomName:N0,key:Gu,decryptedMessage:oe.message}}}if(p&&!F&&this.wordlist.length>0)for(let G=D;G<this.wordlist.length;G++){if(this.abortFlag)return{found:!1,aborted:!0,resumeFrom:this.wordlist[G],resumeType:"dictionary"};const oe=this.wordlist[G],J=L0("#"+oe),Y=M0(J);if(parseInt(Y,16)===k){const W=U(J);if(W.valid)return{found:!0,roomName:oe,key:J,decryptedMessage:W.message,resumeFrom:oe,resumeType:"dictionary"}}C++;const de=performance.now();de-b>=200&&(z("wordlist",oe.length,oe),b=de,await new Promise(W=>setTimeout(W,0)))}const j=this.useCpu?1024:32768,te=(i==null?void 0:i.gpuDispatchMs)??1e3;let Z=j,K=!1;for(let G=S;G<=c;G++){if(this.abortFlag)return{found:!1,aborted:!0,resumeFrom:es(G,0)||void 0,resumeType:"bruteforce"};const oe=vl(G);let J=G===S?B:0;for(;J<oe;){if(this.abortFlag)return{found:!1,aborted:!0,resumeFrom:es(G,J)||void 0,resumeType:"bruteforce"};const Y=Math.min(Z,oe-J),de=performance.now();let W;this.useCpu?W=this.cpuInstance.runBatch(k,G,J,Y,A,_):W=await this.gpuInstance.runBatch(k,G,J,Y,A,_);const ae=performance.now()-de;if(C+=Y,!this.useCpu&&!K&&Y>=j&&ae>0){const P=te/ae,V=Math.round(Y*P),q=Math.pow(2,Math.round(Math.log2(Math.max(j,V))));Z=Math.max(j,q),K=!0}for(const P of W){const V=es(G,P);if(!V)continue;const q=L0("#"+V),Q=U(q);if(Q.valid)return{found:!0,roomName:V,key:q,decryptedMessage:Q.message,resumeFrom:V,resumeType:"bruteforce"}}J+=Y;const H=performance.now();if(H-b>=200){const P=es(G,Math.min(J,oe-1))||"";z("bruteforce",G,P),b=H,await new Promise(V=>setTimeout(V,0))}}}return{found:!1,resumeFrom:es(c,vl(c)-1)||void 0,resumeType:"bruteforce"}}destroy(){this.gpuInstance&&(this.gpuInstance.destroy(),this.gpuInstance=null),this.cpuInstance&&(this.cpuInstance.destroy(),this.cpuInstance=null)}}var x0,hx;function oS(){return hx||(hx=1,x0={webm:"data:video/webm;base64,GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4EEQoWBAhhTgGcBAAAAAAAVkhFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsghV17AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU1LjMzLjEwMFdBjUxhdmY1NS4zMy4xMDBzpJBlrrXf3DCDVB8KcgbMpcr+RImIQJBgAAAAAAAWVK5rAQAAAAAAD++uAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDiDgQEj44OEAmJaAOABAAAAAAAABrCBsLqBkK4BAAAAAAAPq9eBAnPFgQKcgQAitZyDdW5khohBX1ZPUkJJU4OBAuEBAAAAAAAAEZ+BArWIQOdwAAAAAABiZIEgY6JPbwIeVgF2b3JiaXMAAAAAAoC7AAAAAAAAgLUBAAAAAAC4AQN2b3JiaXMtAAAAWGlwaC5PcmcgbGliVm9yYmlzIEkgMjAxMDExMDEgKFNjaGF1ZmVudWdnZXQpAQAAABUAAABlbmNvZGVyPUxhdmM1NS41Mi4xMDIBBXZvcmJpcyVCQ1YBAEAAACRzGCpGpXMWhBAaQlAZ4xxCzmvsGUJMEYIcMkxbyyVzkCGkoEKIWyiB0JBVAABAAACHQXgUhIpBCCGEJT1YkoMnPQghhIg5eBSEaUEIIYQQQgghhBBCCCGERTlokoMnQQgdhOMwOAyD5Tj4HIRFOVgQgydB6CCED0K4moOsOQghhCQ1SFCDBjnoHITCLCiKgsQwuBaEBDUojILkMMjUgwtCiJqDSTX4GoRnQXgWhGlBCCGEJEFIkIMGQcgYhEZBWJKDBjm4FITLQagahCo5CB+EIDRkFQCQAACgoiiKoigKEBqyCgDIAAAQQFEUx3EcyZEcybEcCwgNWQUAAAEACAAAoEiKpEiO5EiSJFmSJVmSJVmS5omqLMuyLMuyLMsyEBqyCgBIAABQUQxFcRQHCA1ZBQBkAAAIoDiKpViKpWiK54iOCISGrAIAgAAABAAAEDRDUzxHlETPVFXXtm3btm3btm3btm3btm1blmUZCA1ZBQBAAAAQ0mlmqQaIMAMZBkJDVgEACAAAgBGKMMSA0JBVAABAAACAGEoOogmtOd+c46BZDppKsTkdnEi1eZKbirk555xzzsnmnDHOOeecopxZDJoJrTnnnMSgWQqaCa0555wnsXnQmiqtOeeccc7pYJwRxjnnnCateZCajbU555wFrWmOmkuxOeecSLl5UptLtTnnnHPOOeecc84555zqxekcnBPOOeecqL25lpvQxTnnnE/G6d6cEM4555xzzjnnnHPOOeecIDRkFQAABABAEIaNYdwpCNLnaCBGEWIaMulB9+gwCRqDnELq0ehopJQ6CCWVcVJKJwgNWQUAAAIAQAghhRRSSCGFFFJIIYUUYoghhhhyyimnoIJKKqmooowyyyyzzDLLLLPMOuyssw47DDHEEEMrrcRSU2011lhr7jnnmoO0VlprrbVSSimllFIKQkNWAQAgAAAEQgYZZJBRSCGFFGKIKaeccgoqqIDQkFUAACAAgAAAAABP8hzRER3RER3RER3RER3R8RzPESVREiVREi3TMjXTU0VVdWXXlnVZt31b2IVd933d933d+HVhWJZlWZZlWZZlWZZlWZZlWZYgNGQVAAACAAAghBBCSCGFFFJIKcYYc8w56CSUEAgNWQUAAAIACAAAAHAUR3EcyZEcSbIkS9IkzdIsT/M0TxM9URRF0zRV0RVdUTdtUTZl0zVdUzZdVVZtV5ZtW7Z125dl2/d93/d93/d93/d93/d9XQdCQ1YBABIAADqSIymSIimS4ziOJElAaMgqAEAGAEAAAIriKI7jOJIkSZIlaZJneZaomZrpmZ4qqkBoyCoAABAAQAAAAAAAAIqmeIqpeIqoeI7oiJJomZaoqZoryqbsuq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq4LhIasAgAkAAB0JEdyJEdSJEVSJEdygNCQVQCADACAAAAcwzEkRXIsy9I0T/M0TxM90RM901NFV3SB0JBVAAAgAIAAAAAAAAAMybAUy9EcTRIl1VItVVMt1VJF1VNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVN0zRNEwgNWQkAkAEAkBBTLS3GmgmLJGLSaqugYwxS7KWxSCpntbfKMYUYtV4ah5RREHupJGOKQcwtpNApJq3WVEKFFKSYYyoVUg5SIDRkhQAQmgHgcBxAsixAsiwAAAAAAAAAkDQN0DwPsDQPAAAAAAAAACRNAyxPAzTPAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAA0DwP8DwR8EQRAAAAAAAAACzPAzTRAzxRBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAAsDwP8EQR0DwRAAAAAAAAACzPAzxRBDzRAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAEOAAABBgIRQasiIAiBMAcEgSJAmSBM0DSJYFTYOmwTQBkmVB06BpME0AAAAAAAAAAAAAJE2DpkHTIIoASdOgadA0iCIAAAAAAAAAAAAAkqZB06BpEEWApGnQNGgaRBEAAAAAAAAAAAAAzzQhihBFmCbAM02IIkQRpgkAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAGHAAAAgwoQwUGrIiAIgTAHA4imUBAIDjOJYFAACO41gWAABYliWKAABgWZooAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAYcAAACDChDBQashIAiAIAcCiKZQHHsSzgOJYFJMmyAJYF0DyApgFEEQAIAAAocAAACLBBU2JxgEJDVgIAUQAABsWxLE0TRZKkaZoniiRJ0zxPFGma53meacLzPM80IYqiaJoQRVE0TZimaaoqME1VFQAAUOAAABBgg6bE4gCFhqwEAEICAByKYlma5nmeJ4qmqZokSdM8TxRF0TRNU1VJkqZ5niiKommapqqyLE3zPFEURdNUVVWFpnmeKIqiaaqq6sLzPE8URdE0VdV14XmeJ4qiaJqq6roQRVE0TdNUTVV1XSCKpmmaqqqqrgtETxRNU1Vd13WB54miaaqqq7ouEE3TVFVVdV1ZBpimaaqq68oyQFVV1XVdV5YBqqqqruu6sgxQVdd1XVmWZQCu67qyLMsCAAAOHAAAAoygk4wqi7DRhAsPQKEhKwKAKAAAwBimFFPKMCYhpBAaxiSEFEImJaXSUqogpFJSKRWEVEoqJaOUUmopVRBSKamUCkIqJZVSAADYgQMA2IGFUGjISgAgDwCAMEYpxhhzTiKkFGPOOScRUoox55yTSjHmnHPOSSkZc8w556SUzjnnnHNSSuacc845KaVzzjnnnJRSSuecc05KKSWEzkEnpZTSOeecEwAAVOAAABBgo8jmBCNBhYasBABSAQAMjmNZmuZ5omialiRpmud5niiapiZJmuZ5nieKqsnzPE8URdE0VZXneZ4oiqJpqirXFUXTNE1VVV2yLIqmaZqq6rowTdNUVdd1XZimaaqq67oubFtVVdV1ZRm2raqq6rqyDFzXdWXZloEsu67s2rIAAPAEBwCgAhtWRzgpGgssNGQlAJABAEAYg5BCCCFlEEIKIYSUUggJAAAYcAAACDChDBQashIASAUAAIyx1lprrbXWQGettdZaa62AzFprrbXWWmuttdZaa6211lJrrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmstpZRSSimllFJKKaWUUkoppZRSSgUA+lU4APg/2LA6wknRWGChISsBgHAAAMAYpRhzDEIppVQIMeacdFRai7FCiDHnJKTUWmzFc85BKCGV1mIsnnMOQikpxVZjUSmEUlJKLbZYi0qho5JSSq3VWIwxqaTWWoutxmKMSSm01FqLMRYjbE2ptdhqq7EYY2sqLbQYY4zFCF9kbC2m2moNxggjWywt1VprMMYY3VuLpbaaizE++NpSLDHWXAAAd4MDAESCjTOsJJ0VjgYXGrISAAgJACAQUooxxhhzzjnnpFKMOeaccw5CCKFUijHGnHMOQgghlIwx5pxzEEIIIYRSSsaccxBCCCGEkFLqnHMQQgghhBBKKZ1zDkIIIYQQQimlgxBCCCGEEEoopaQUQgghhBBCCKmklEIIIYRSQighlZRSCCGEEEIpJaSUUgohhFJCCKGElFJKKYUQQgillJJSSimlEkoJJYQSUikppRRKCCGUUkpKKaVUSgmhhBJKKSWllFJKIYQQSikFAAAcOAAABBhBJxlVFmGjCRcegEJDVgIAZAAAkKKUUiktRYIipRikGEtGFXNQWoqocgxSzalSziDmJJaIMYSUk1Qy5hRCDELqHHVMKQYtlRhCxhik2HJLoXMOAAAAQQCAgJAAAAMEBTMAwOAA4XMQdAIERxsAgCBEZohEw0JweFAJEBFTAUBigkIuAFRYXKRdXECXAS7o4q4DIQQhCEEsDqCABByccMMTb3jCDU7QKSp1IAAAAAAADADwAACQXAAREdHMYWRobHB0eHyAhIiMkAgAAAAAABcAfAAAJCVAREQ0cxgZGhscHR4fICEiIyQBAIAAAgAAAAAggAAEBAQAAAAAAAIAAAAEBB9DtnUBAAAAAAAEPueBAKOFggAAgACjzoEAA4BwBwCdASqwAJAAAEcIhYWIhYSIAgIABhwJ7kPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99YAD+/6tQgKOFggADgAqjhYIAD4AOo4WCACSADqOZgQArADECAAEQEAAYABhYL/QACIBDmAYAAKOFggA6gA6jhYIAT4AOo5mBAFMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAGSADqOFggB6gA6jmYEAewAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAj4AOo5mBAKMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAKSADqOFggC6gA6jmYEAywAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAz4AOo4WCAOSADqOZgQDzADECAAEQEAAYABhYL/QACIBDmAYAAKOFggD6gA6jhYIBD4AOo5iBARsAEQIAARAQFGAAYWC/0AAiAQ5gGACjhYIBJIAOo4WCATqADqOZgQFDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggFPgA6jhYIBZIAOo5mBAWsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAXqADqOFggGPgA6jmYEBkwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIBpIAOo4WCAbqADqOZgQG7ADECAAEQEAAYABhYL/QACIBDmAYAAKOFggHPgA6jmYEB4wAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIB5IAOo4WCAfqADqOZgQILADECAAEQEAAYABhYL/QACIBDmAYAAKOFggIPgA6jhYICJIAOo5mBAjMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAjqADqOFggJPgA6jmYECWwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYICZIAOo4WCAnqADqOZgQKDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggKPgA6jhYICpIAOo5mBAqsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCArqADqOFggLPgA6jmIEC0wARAgABEBAUYABhYL/QACIBDmAYAKOFggLkgA6jhYIC+oAOo5mBAvsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAw+ADqOZgQMjADECAAEQEAAYABhYL/QACIBDmAYAAKOFggMkgA6jhYIDOoAOo5mBA0sAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA0+ADqOFggNkgA6jmYEDcwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIDeoAOo4WCA4+ADqOZgQObADECAAEQEAAYABhYL/QACIBDmAYAAKOFggOkgA6jhYIDuoAOo5mBA8MAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA8+ADqOFggPkgA6jhYID+oAOo4WCBA+ADhxTu2sBAAAAAAAAEbuPs4EDt4r3gQHxghEr8IEK",mp4:"data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"}),x0}var A0,px;function sS(){if(px)return A0;px=1;const{webm:n,mp4:s}=oS(),i=()=>typeof navigator<"u"&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,l=()=>"wakeLock"in navigator;class c{constructor(){if(this.enabled=!1,l()){this._wakeLock=null;const p=()=>{this._wakeLock!==null&&document.visibilityState==="visible"&&this.enable()};document.addEventListener("visibilitychange",p),document.addEventListener("fullscreenchange",p)}else i()?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("title","No Sleep"),this.noSleepVideo.setAttribute("playsinline",""),this._addSourceToVideo(this.noSleepVideo,"webm",n),this._addSourceToVideo(this.noSleepVideo,"mp4",s),this.noSleepVideo.addEventListener("loadedmetadata",()=>{this.noSleepVideo.duration<=1?this.noSleepVideo.setAttribute("loop",""):this.noSleepVideo.addEventListener("timeupdate",()=>{this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())})}))}_addSourceToVideo(p,d,g){var m=document.createElement("source");m.src=g,m.type=`video/${d}`,p.appendChild(m)}get isEnabled(){return this.enabled}enable(){return l()?navigator.wakeLock.request("screen").then(p=>{this._wakeLock=p,this.enabled=!0,console.log("Wake Lock active."),this._wakeLock.addEventListener("release",()=>{console.log("Wake Lock released.")})}).catch(p=>{throw this.enabled=!1,console.error(`${p.name}, ${p.message}`),p}):i()?(this.disable(),console.warn(`
        NoSleep enabled for older iOS devices. This can interrupt
        active or long-running network requests from completing successfully.
        See https://github.com/richtr/NoSleep.js/issues/15 for more details.
      `),this.noSleepTimer=window.setInterval(()=>{document.hidden||(window.location.href=window.location.href.split("#")[0],window.setTimeout(window.stop,0))},15e3),this.enabled=!0,Promise.resolve()):this.noSleepVideo.play().then(d=>(this.enabled=!0,d)).catch(d=>{throw this.enabled=!1,d})}disable(){l()?(this._wakeLock&&this._wakeLock.release(),this._wakeLock=null):i()?this.noSleepTimer&&(console.warn(`
          NoSleep now disabled for older iOS devices.
        `),window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause(),this.enabled=!1}}return A0=c,A0}var aS=sS();const lS=aa(aS);function cS(n){if(n.length<4)return null;try{const i=parseInt(n.slice(0,2),16)&3;let l=2;if(i===0||i===3){if(n.length<l+8)return null;l+=8}if(n.length<l+2)return null;const c=parseInt(n.slice(l,l+2),16);l+=2;const u=c*2;return n.length<l+u?null:(l+=u,n.slice(l))}catch{return null}}function uS({packets:n,channels:s,onChannelCreate:i,onRunningChange:l,visible:c=!1}){const[u,p]=R.useState(!1),[d,g]=R.useState(6),[m,x]=R.useState(!1),[A,_]=R.useState(!0),[k,N]=R.useState(!1),[C,b]=R.useState(null),[S,B]=R.useState(new Map),[D,F]=R.useState([]),[M,z]=R.useState(!1),[U,j]=R.useState(null),[te,Z]=R.useState(null),[K,ee]=R.useState(0),G=R.useRef(null),oe=R.useRef(null),J=R.useRef(!1),Y=R.useRef(!1),de=R.useRef(!1),W=R.useRef(new Map),ae=R.useRef(!1),H=R.useRef(6),P=R.useRef(!0),V=R.useRef(!1),q=R.useRef(new Set),Q=R.useRef(new Set);R.useEffect(()=>{const Be=new iS;G.current=Be,j(Be.isGpuAvailable());const Ie=new lS;return oe.current=Ie,()=>{Be.destroy(),G.current=null,Ie.disable(),oe.current=null}},[]),R.useEffect(()=>{!c||M||Vk(async()=>{const{ENGLISH_WORDLIST:Be}=await import("./wordlist-BtmChKSf.js");return{ENGLISH_WORDLIST:Be}},[]).then(({ENGLISH_WORDLIST:Be})=>{G.current&&(G.current.setWordlist(Be),z(!0))}).catch(Be=>{console.error("Failed to load wordlist:",Be),vt.error("Failed to load wordlist",{description:"Cracking will not be available"})})},[c,M]),R.useEffect(()=>{const Be=()=>{nt.getUndecryptedPacketCount().then(({count:ft})=>Z(ft)).catch(()=>Z(null))};Be();const Ie=setInterval(Be,36e5);return()=>clearInterval(Ie)},[]);const pe=R.useMemo(()=>new Set(s.map(Be=>Be.key.toUpperCase())),[s]),ue=n.filter(Be=>Be.payload_type==="GROUP_TEXT"&&!Be.decrypted);R.useEffect(()=>{let Be=0;B(Ie=>{const ft=new Map(Ie);let Nt=!1;for(const lt of ue)if(!ft.has(lt.id)){const Qe=cS(lt.data);if(Qe&&Q.current.has(Qe)){Be++;continue}Qe&&Q.current.add(Qe),ft.set(lt.id,{packet:lt,attempts:0,lastAttemptLength:0,status:"pending"}),Nt=!0}return Nt?(W.current=ft,ft):Ie}),Be>0&&ee(Ie=>Ie+Be)},[ue.length]),R.useEffect(()=>{W.current=S},[S]),R.useEffect(()=>{ae.current=m},[m]),R.useEffect(()=>{H.current=d},[d]),R.useEffect(()=>{P.current=A},[A]),R.useEffect(()=>{V.current=k},[k]),R.useEffect(()=>{q.current=new Set(ue.map(Be=>Be.id))},[ue]),R.useEffect(()=>{l==null||l(u)},[u,l]);const se=Array.from(S.values()).filter(Be=>Be.status==="pending").length,he=Array.from(S.values()).filter(Be=>Be.status==="cracked").length,Ee=Array.from(S.values()).filter(Be=>Be.status==="failed").length,We=R.useCallback(async()=>{if(de.current||!G.current||!J.current)return;const Be=W.current;let Ie=null,ft=null;for(const[qe,et]of Be.entries())if(et.status==="pending"){Ie=et,ft=qe;break}if(!Ie&&ae.current){const qe=Array.from(Be.entries()).filter(([,et])=>et.status==="failed"&&et.lastAttemptLength<10);qe.length>0&&(qe.sort((et,rt)=>et[1].lastAttemptLength-rt[1].lastAttemptLength),[ft,Ie]=qe[0])}if(!Ie||ft===null){J.current&&setTimeout(()=>We(),1e3);return}if(!q.current.has(ft)){B(qe=>{const et=new Map(qe);return et.delete(ft),et}),J.current&&setTimeout(()=>We(),10);return}de.current=!0;const Nt=H.current,lt=Ie.lastAttemptLength>0,Qe=lt?Ie.lastAttemptLength+1:Nt;try{const qe=await G.current.crack(Ie.packet.data,{maxLength:Qe,useSenderFilter:!0,useTimestampFilter:!0,useUtf8Filter:!0,...V.current&&{gpuDispatchMs:1e4},...lt&&{useDictionary:!1,startingLength:Qe}},et=>{b(et)});if(Y.current){Y.current=!1,de.current=!1,b(null);return}if(qe.found&&qe.roomName&&qe.key){B(Ue=>{const kt=new Map(Ue),$t=kt.get(ft);return $t&&kt.set(ft,{...$t,status:"cracked",attempts:$t.attempts+1,lastAttemptLength:Qe}),kt});const et={roomName:qe.roomName,key:qe.key,packetId:ft,message:qe.decryptedMessage||"",crackedAt:Date.now()};F(Ue=>[...Ue,et]);const rt=qe.key.toUpperCase();if(!pe.has(rt))try{const Ue="#"+qe.roomName;await i(Ue,qe.key),P.current&&await nt.decryptHistoricalPackets({key_type:"channel",channel_name:Ue})}catch(Ue){console.error("Failed to create channel or decrypt historical:",Ue),vt.error("Failed to save cracked channel",{description:Ue instanceof Error?Ue.message:"Channel discovered but could not be saved"})}}else B(et=>{const rt=new Map(et),Ue=rt.get(ft);return Ue&&rt.set(ft,{...Ue,status:"failed",attempts:Ue.attempts+1,lastAttemptLength:Qe}),rt})}catch(qe){console.error("Cracking error:",qe),B(et=>{const rt=new Map(et),Ue=rt.get(ft);return Ue&&rt.set(ft,{...Ue,status:"failed",attempts:Ue.attempts+1,lastAttemptLength:Qe}),rt})}de.current=!1,b(null),J.current&&setTimeout(()=>We(),100)},[pe,i]),dt=()=>{var Be;if(!U){vt.error("WebGPU not available",{description:"Cracking requires Chrome 113+ or Edge 113+ with WebGPU support."});return}p(!0),J.current=!0,Y.current=!1,(Be=oe.current)==null||Be.enable(),We()},ot=()=>{var Be,Ie;p(!1),J.current=!1,Y.current=!0,(Be=G.current)==null||Be.abort(),(Ie=oe.current)==null||Ie.disable()};return w.jsxs("div",{className:"flex flex-col h-full p-3 gap-3 bg-background border-t border-border overflow-auto",children:[w.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("label",{className:"text-sm text-muted-foreground",children:"Max Length:"}),w.jsx("input",{type:"number",min:1,max:10,value:d,onChange:Be=>g(Math.min(10,Math.max(1,parseInt(Be.target.value)||6))),className:"w-14 px-2 py-1 text-sm bg-muted border border-border rounded"})]}),w.jsxs("label",{className:"flex items-center gap-2 text-sm text-muted-foreground cursor-pointer",children:[w.jsx("input",{type:"checkbox",checked:m,onChange:Be=>x(Be.target.checked),className:"rounded"}),"Retry failed at n+1"]}),w.jsxs("label",{className:"flex items-center gap-2 text-sm text-muted-foreground cursor-pointer",children:[w.jsx("input",{type:"checkbox",checked:A,onChange:Be=>_(Be.target.checked),className:"rounded"}),"Decrypt historical packets if key found"]}),A&&w.jsx("span",{className:"text-xs text-muted-foreground",children:te!==null&&te>0?`(${te.toLocaleString()} packets; messages will stream in as decrypted)`:"(messages will stream in as decrypted)"}),w.jsxs("label",{className:"flex items-center gap-2 text-sm text-muted-foreground cursor-pointer",children:[w.jsx("input",{type:"checkbox",checked:k,onChange:Be=>N(Be.target.checked),className:"rounded"}),"Turbo mode (experimental)"]})]}),w.jsx("button",{onClick:u?ot:dt,disabled:!M||U===!1,className:at("w-48 px-4 py-1.5 rounded text-sm font-medium",u?"bg-destructive text-destructive-foreground hover:bg-destructive/90":"bg-primary text-primary-foreground hover:bg-primary/90","disabled:opacity-50 disabled:cursor-not-allowed"),children:u?"Stop Search":U===!1?"GPU Not Available":M?"Find Rooms":"Loading dictionary..."}),w.jsxs("div",{className:"flex gap-4 text-sm",children:[w.jsxs("span",{className:"text-muted-foreground",children:["Pending: ",w.jsx("span",{className:"text-foreground font-medium",children:se})]}),w.jsxs("span",{className:"text-muted-foreground",children:["Cracked: ",w.jsx("span",{className:"text-green-500 font-medium",children:he})]}),w.jsxs("span",{className:"text-muted-foreground",children:["Failed: ",w.jsx("span",{className:"text-destructive font-medium",children:Ee})]}),K>0&&w.jsxs("span",{className:"text-muted-foreground",children:["Skipped (dup):"," ",w.jsx("span",{className:"text-muted-foreground font-medium",children:K})]})]}),C&&w.jsxs("div",{className:"space-y-1",children:[w.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[w.jsxs("span",{children:[C.phase==="wordlist"?"Dictionary":C.phase==="bruteforce"?"Bruteforce":"Public Key",C.phase==="bruteforce"&&` - Length ${C.currentLength}`,":"," ",C.currentPosition]}),w.jsxs("span",{children:[C.rateKeysPerSec>=1e9?`${(C.rateKeysPerSec/1e9).toFixed(2)} Gkeys/s`:`${(C.rateKeysPerSec/1e6).toFixed(1)} Mkeys/s`," "," ETA:"," ",C.etaSeconds<60?`${Math.round(C.etaSeconds)}s`:`${Math.round(C.etaSeconds/60)}m`]})]}),w.jsx("div",{className:"h-2 bg-muted rounded overflow-hidden",children:w.jsx("div",{className:"h-full bg-primary transition-all duration-200",style:{width:`${C.percent}%`}})})]}),U===!1&&w.jsx("div",{className:"text-sm text-destructive",children:"WebGPU not available. Cracking requires Chrome 113+ or Edge 113+."}),!M&&U!==!1&&w.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading wordlist..."}),D.length>0&&w.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0",children:[w.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Cracked Rooms:"}),w.jsx("div",{className:"space-y-1",children:D.map((Be,Ie)=>w.jsxs("div",{className:"text-sm bg-green-950/30 border border-green-900/50 rounded px-2 py-1",children:[w.jsxs("span",{className:"text-green-400 font-medium",children:["#",Be.roomName]}),w.jsxs("span",{className:"text-muted-foreground ml-2 text-xs",children:['"',Be.message.slice(0,50),Be.message.length>50?"...":"",'"']})]},Ie))})]}),w.jsx("hr",{className:"border-border"}),w.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:["For unknown-keyed GroupText packets, this will attempt to dictionary attack, then brute force payloads as they arrive, testing room names up to the specified length to discover active rooms on the local mesh (GroupText packets may not be hashtag messages; we have no way of knowing but try as if they are).",w.jsx("strong",{children:" Retry failed at n+1"})," will let the cracker return to the failed queue and pick up messages it couldn't crack, attempting them at one longer length.",w.jsx("strong",{children:" Decrypt historical"})," will run an async job on any room name it finds to see if any historically captured packets will decrypt with that key.",w.jsx("strong",{children:" Turbo mode"})," will push your GPU to the max (target dispatch time of 10s) and may allow accelerated cracking and/or system instability."]})]})}const dS=mA,fS=gA,Dv=R.forwardRef(({className:n,...s},i)=>w.jsx(ld,{className:at("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...s,ref:i}));Dv.displayName=ld.displayName;const hS=Z0("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Rv=R.forwardRef(({side:n="right",className:s,children:i,hideCloseButton:l=!1,...c},u)=>w.jsxs(fS,{children:[w.jsx(Dv,{}),w.jsxs(cd,{ref:u,className:at(hS({side:n}),s),...c,children:[!l&&w.jsxs(xA,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[w.jsx(wx,{className:"h-4 w-4"}),w.jsx("span",{className:"sr-only",children:"Close"})]}),i]})]}));Rv.displayName=cd.displayName;const Nv=({className:n,...s})=>w.jsx("div",{className:at("flex flex-col space-y-2 text-center sm:text-left",n),...s});Nv.displayName="SheetHeader";const Fv=R.forwardRef(({className:n,...s},i)=>w.jsx(ud,{ref:i,className:at("text-lg font-semibold text-foreground",n),...s}));Fv.displayName=ud.displayName;const pS=R.forwardRef(({className:n,...s},i)=>w.jsx(dd,{ref:i,className:at("text-sm text-muted-foreground",n),...s}));pS.displayName=dd.displayName;const mx=500;function mS(){const n=R.useRef(null),s=R.useRef(null),i=R.useRef(new Set),[l,c]=R.useState(null),[u,p]=R.useState(null),[d,g]=R.useState(null),[m,x]=R.useState([]),[A,_]=R.useState([]),[k,N]=R.useState([]),[C,b]=R.useState(null),[S,B]=R.useState(!1),[D,F]=R.useState(!1),[M,z]=R.useState(!1),[U,j]=R.useState(0),[te,Z]=R.useState(!1),[K,ee]=R.useState(!1),G=(d==null?void 0:d.favorites)??[],oe=R.useRef(null),J=R.useRef(null);R.useEffect(()=>{J.current=(u==null?void 0:u.name)??null},[u==null?void 0:u.name]);const Y=R.useCallback(ie=>{const Ae=J.current;if(!Ae)return!1;const _e=Ae.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return new RegExp(`@\\[${_e}\\]`,"i").test(ie)},[]),{messages:de,messagesLoading:W,loadingOlder:ae,hasOlderMessages:H,setMessages:P,fetchMessages:V,fetchOlderMessages:q,addMessageIfNew:Q,updateMessageAck:pe}=m_(C),{unreadCounts:ue,mentions:se,lastMessageTimes:he,incrementUnread:Ee,markAllRead:We,trackNewMessage:dt}=zy(A,m,C,u==null?void 0:u.name),{repeaterLoggedIn:ot,activeContactIsRepeater:Be,handleTelemetryRequest:Ie,handleRepeaterCommand:ft}=Iy(C,m,P),Nt=R.useMemo(()=>({onHealth:ie=>{const Ae=oe.current;oe.current=ie,c(ie),Ae!==null&&Ae.radio_connected!==ie.radio_connected&&(ie.radio_connected?(vt.success("Radio connected",{description:ie.serial_port?`Connected to ${ie.serial_port}`:void 0}),nt.getRadioConfig().then(p).catch(console.error)):vt.error("Radio disconnected",{description:"Check radio connection and power"}))},onError:ie=>{vt.error(ie.message,{description:ie.details})},onSuccess:ie=>{vt.success(ie.message,{description:ie.details})},onContacts:ie=>x(ie),onChannels:ie=>_(ie),onMessage:ie=>{const Ae=s.current,_e=Ae&&(ie.type==="CHAN"&&Ae.type==="channel"||ie.type==="PRIV"&&Ae.type==="contact")?ie.conversation_key===Ae.id:!1;if(_e&&Q(ie),dt(ie),!ie.outgoing&&!_e){const De=iu(ie);if(i.current.has(De))return;if(i.current.add(De),i.current.size>1e3){const Fe=Array.from(i.current);i.current=new Set(Fe.slice(-500))}let Ye=null;if(ie.type==="CHAN"&&ie.conversation_key?Ye=jr("channel",ie.conversation_key):ie.type==="PRIV"&&ie.conversation_key&&(Ye=jr("contact",ie.conversation_key)),Ye){const Fe=Y(ie.text);Ee(Ye,Fe)}}},onContact:ie=>{x(Ae=>{const _e=Ae.findIndex(De=>De.public_key===ie.public_key);if(_e>=0){const De=[...Ae],Ye=Ae[_e];return De[_e]={...Ye,...ie,name:ie.name??Ye.name,last_path:ie.last_path??Ye.last_path,lat:ie.lat??Ye.lat,lon:ie.lon??Ye.lon},De}return[...Ae,ie]})},onRawPacket:ie=>{N(Ae=>{if(Ae.some(De=>De.id===ie.id))return Ae;const _e=[...Ae,ie];return _e.length>mx?_e.slice(-mx):_e})},onMessageAcked:(ie,Ae,_e)=>{pe(ie,Ae,_e)}}),[Q,dt,Ee,pe,Y]);Py(Nt);const lt=R.useCallback(async()=>{try{const ie=await nt.getRadioConfig();p(ie)}catch(ie){console.error("Failed to fetch config:",ie)}},[]),Qe=R.useCallback(async()=>{try{const ie=await nt.getSettings();g(ie),om(ie.last_message_times??{})}catch(ie){console.error("Failed to fetch app settings:",ie)}},[]),qe=R.useCallback(async()=>{try{const ie=await nt.getUndecryptedPacketCount();j(ie.count)}catch(ie){console.error("Failed to fetch undecrypted count:",ie)}},[]);R.useEffect(()=>{lt(),Qe(),qe()},[lt,Qe,qe]);const et=R.useRef(!1);R.useEffect(()=>{if(!d||et.current)return;if(d.preferences_migrated){fm(),am(),et.current=!0;return}const ie=L_(),Ae=jy(),_e=Oy();if(!(ie.length>0||Ae!=="recent"||Object.keys(_e).length>0)){et.current=!0;return}et.current=!0,(async()=>{try{const Fe=await nt.migratePreferences({favorites:ie,sort_order:Ae,last_message_times:_e});Fe.migrated&&vt.success("Preferences migrated",{description:`Migrated ${ie.length} favorites to server`}),g(Fe.settings),om(Fe.settings.last_message_times??{}),fm(),am()}catch(Fe){console.error("Failed to migrate preferences:",Fe)}})()},[d]);const rt=R.useCallback(()=>{const ie=E2();if(!ie)return null;if(ie.type==="raw")return{type:"raw",id:"raw",name:"Raw Packet Feed"};if(ie.type==="map")return{type:"map",id:"map",name:"Node Map",mapFocusKey:ie.mapFocusKey};if(ie.type==="visualizer")return{type:"visualizer",id:"visualizer",name:"Mesh Visualizer"};if(ie.type==="channel"){const Ae=A.find(_e=>_e.name===ie.name||_e.name===`#${ie.name}`);if(Ae)return{type:"channel",id:Ae.key,name:Ae.name}}if(ie.type==="contact"){const Ae=m.find(_e=>Di(_e.name,_e.public_key)===ie.name);if(Ae)return{type:"contact",id:Ae.public_key,name:Di(Ae.name,Ae.public_key)}}return null},[A,m]),Ue=R.useRef(!1);R.useEffect(()=>{if(Ue.current||C||A.length===0&&m.length===0)return;const ie=rt();if(ie){b(ie),Ue.current=!0;return}const Ae=A.find(_e=>_e.name==="Public");Ae&&(b({type:"channel",id:Ae.key,name:Ae.name}),Ue.current=!0)},[A,m,C,rt]),R.useEffect(()=>{s.current=C,C&&S2(C)},[C]);const kt=R.useCallback(async ie=>{C&&(C.type==="channel"?await nt.sendChannelMessage(C.id,ie):await nt.sendDirectMessage(C.id,ie),await V())},[C,V]),$t=R.useCallback(async ie=>{await nt.updateRadioConfig(ie),await lt()},[lt]),Pe=R.useCallback(async ie=>{await nt.updateSettings(ie),await Qe()},[Qe]),pt=R.useCallback(async ie=>{await nt.setPrivateKey(ie),await lt()},[lt]),Ut=R.useCallback(async()=>{await nt.rebootRadio(),c(Ae=>Ae&&{...Ae,radio_connected:!1}),(async()=>{for(let Ae=0;Ae<30;Ae++){await new Promise(_e=>setTimeout(_e,1e3));try{const _e=await nt.getHealth();if(c(_e),_e.radio_connected){lt();return}}catch{}}})()},[lt]),sn=R.useCallback(async()=>{try{await nt.sendAdvertisement(!0),vt.success("Advertisement sent")}catch(ie){console.error("Failed to send advertisement:",ie),vt.error("Failed to send advertisement",{description:ie instanceof Error?ie.message:"Check radio connection"})}},[]),en=R.useCallback(ie=>{var Ae;(Ae=n.current)==null||Ae.appendText(`@[${ie}] `)},[]),Kt=R.useCallback(ie=>{b(ie),z(!1)},[]),Ft=R.useCallback(async(ie,Ae)=>{const De=ts(G,ie,Ae)?G.filter(Ye=>!(Ye.type===ie&&Ye.id===Ae)):[...G,{type:ie,id:Ae}];g(Ye=>Ye&&{...Ye,favorites:De});try{const Ye=await nt.toggleFavorite(ie,Ae);g(Ye)}catch(Ye){console.error("Failed to toggle favorite:",Ye),g(Fe=>Fe&&{...Fe,favorites:G}),vt.error("Failed to update favorite")}},[G]),Qt=R.useCallback(async ie=>{if(confirm("Delete this channel? Message history will be preserved."))try{await nt.deleteChannel(ie),_(Ae=>Ae.filter(_e=>_e.key!==ie)),b(null),vt.success("Channel deleted")}catch(Ae){console.error("Failed to delete channel:",Ae),vt.error("Failed to delete channel",{description:Ae instanceof Error?Ae.message:void 0})}},[]),Yn=R.useCallback(async ie=>{if(confirm("Delete this contact? Message history will be preserved."))try{await nt.deleteContact(ie),x(Ae=>Ae.filter(_e=>_e.public_key!==ie)),b(null),vt.success("Contact deleted")}catch(Ae){console.error("Failed to delete contact:",Ae),vt.error("Failed to delete contact",{description:Ae instanceof Error?Ae.message:void 0})}},[]),Cn=R.useCallback(async(ie,Ae,_e)=>{const De=await nt.createContact(Ae,ie||void 0,_e),Ye=await nt.getContacts();x(Ye),b({type:"contact",id:De.public_key,name:Di(De.name,De.public_key)})},[]),xe=R.useCallback(async(ie,Ae,_e)=>{const De=await nt.createChannel(ie,Ae),Ye=await nt.getChannels();_(Ye),b({type:"channel",id:De.key,name:ie}),_e&&(await nt.decryptHistoricalPackets({key_type:"channel",channel_key:De.key}),qe())},[qe]),Ce=R.useCallback(async(ie,Ae)=>{const _e=ie.startsWith("#")?ie:`#${ie}`,De=await nt.createChannel(_e),Ye=await nt.getChannels();_(Ye),b({type:"channel",id:De.key,name:_e}),Ae&&(await nt.decryptHistoricalPackets({key_type:"channel",channel_name:_e}),qe())},[qe]),Ne=R.useCallback(async ie=>{const Ae=(d==null?void 0:d.sidebar_sort_order)??"recent";g(_e=>_e&&{..._e,sidebar_sort_order:ie});try{const _e=await nt.updateSettings({sidebar_sort_order:ie});g(_e)}catch(_e){console.error("Failed to update sort order:",_e),g(De=>De&&{...De,sidebar_sort_order:Ae}),vt.error("Failed to save sort preference")}},[d==null?void 0:d.sidebar_sort_order]),ct=w.jsx(N1,{contacts:m,channels:A,activeConversation:C,onSelectConversation:Kt,onNewMessage:()=>{B(!0),z(!1)},lastMessageTimes:he,unreadCounts:ue,mentions:se,showCracker:te,crackerRunning:K,onToggleCracker:()=>Z(ie=>!ie),onMarkAllRead:We,favorites:G,sortOrder:(d==null?void 0:d.sidebar_sort_order)??"recent",onSortOrderChange:Ne});return w.jsxs("div",{className:"flex flex-col h-dvh",children:[w.jsx(k_,{health:l,config:u,onSettingsClick:()=>F(!0),onMenuClick:()=>z(!0)}),w.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[w.jsx("div",{className:"hidden md:block",children:ct}),w.jsx(dS,{open:M,onOpenChange:z,children:w.jsxs(Rv,{side:"left",className:"w-[280px] p-0 flex flex-col",hideCloseButton:!0,children:[w.jsx(Nv,{className:"sr-only",children:w.jsx(Fv,{children:"Navigation"})}),w.jsx("div",{className:"flex-1 overflow-hidden",children:ct})]})}),w.jsx("div",{className:"flex-1 flex flex-col bg-background min-w-0",children:C?C.type==="map"?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"flex justify-between items-center px-4 py-3 border-b border-border font-medium text-lg",children:"Node Map"}),w.jsx("div",{className:"flex-1 overflow-hidden",children:w.jsx(zE,{contacts:m,focusedKey:C.mapFocusKey})})]}):C.type==="visualizer"?w.jsx(jk,{packets:k,contacts:m,config:u,onClearPackets:()=>N([])}):C.type==="raw"?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"flex justify-between items-center px-4 py-3 border-b border-border font-medium text-lg",children:"Raw Packet Feed"}),w.jsx("div",{className:"flex-1 overflow-hidden",children:w.jsx(P0,{packets:k})})]}):w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-border font-medium text-lg gap-2",children:[w.jsxs("span",{className:"flex flex-wrap items-baseline gap-x-2 min-w-0 flex-1",children:[w.jsxs("span",{className:"flex-shrink-0",children:[C.type==="channel"&&!C.name.startsWith("#")&&C.name!=="Public"?"#":"",C.name]}),w.jsx("span",{className:"font-normal text-sm text-muted-foreground font-mono truncate cursor-pointer hover:text-primary",onClick:ie=>{ie.stopPropagation(),navigator.clipboard.writeText(C.id),vt.success(C.type==="channel"?"Room key copied!":"Contact key copied!")},title:"Click to copy",children:C.type==="channel"?C.id.toLowerCase():C.id}),C.type==="contact"&&(()=>{const ie=m.find(_e=>_e.public_key===C.id);if(!ie)return null;const Ae=[];if(ie.last_seen&&Ae.push(`Last heard: ${ra(ie.last_seen)}`),ie.last_path_len===-1?Ae.push("flood"):ie.last_path_len===0?Ae.push("direct"):ie.last_path_len>0&&Ae.push(`${ie.last_path_len} hop${ie.last_path_len>1?"s":""}`),Bt(ie.lat,ie.lon)){const _e=u&&Bt(u.lat,u.lon)?zr(u.lat,u.lon,ie.lat,ie.lon):null;Ae.push(w.jsxs("span",{children:[w.jsxs("span",{className:"font-mono cursor-pointer hover:text-primary hover:underline",onClick:De=>{De.stopPropagation();const Ye=window.location.origin+window.location.pathname+vA(ie.public_key);window.open(Ye,"_blank")},title:"View on map",children:[ie.lat.toFixed(3),", ",ie.lon.toFixed(3)]}),_e!==null&&` (${ns(_e)})`]},"coords"))}return Ae.length>0?w.jsxs("span",{className:"font-normal text-sm text-muted-foreground flex-shrink-0",children:["(",Ae.map((_e,De)=>w.jsxs("span",{children:[De>0&&", ",_e]},De)),")"]}):null})()]}),w.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(C.type==="channel"||C.type==="contact")&&w.jsx("button",{className:"p-1.5 rounded hover:bg-accent text-xl leading-none",onClick:()=>Ft(C.type,C.id),title:ts(G,C.type,C.id)?"Remove from favorites":"Add to favorites",children:ts(G,C.type,C.id)?w.jsx("span",{className:"text-yellow-500",children:""}):w.jsx("span",{className:"text-muted-foreground",children:""})}),!(C.type==="channel"&&C.name==="Public")&&w.jsx("button",{className:"p-1.5 rounded hover:bg-destructive/20 text-destructive text-xl leading-none",onClick:()=>{C.type==="channel"?Qt(C.id):Yn(C.id)},title:"Delete",children:""})]})]}),w.jsx(N2,{messages:de,contacts:m,loading:W,loadingOlder:ae,hasOlderMessages:H,onSenderClick:C.type==="channel"?en:void 0,onLoadOlder:q,radioName:u==null?void 0:u.name,config:u}),w.jsx(O2,{ref:n,onSend:Be?ot?ft:Ie:kt,disabled:!(l!=null&&l.radio_connected),isRepeaterMode:Be&&!ot,conversationType:C.type,senderName:u==null?void 0:u.name,placeholder:l!=null&&l.radio_connected?Be?ot?"Send CLI command (requires admin login)...":`Enter password for ${C.name} (or . for none)...`:`Message ${C.name}...`:"Radio not connected"})]}):w.jsx("div",{className:"flex-1 flex items-center justify-center text-muted-foreground",children:"Select a conversation or start a new one"})})]}),w.jsx("div",{className:at("border-t border-border bg-background transition-all duration-200 overflow-hidden",te?"h-[275px]":"h-0"),children:w.jsx(uS,{packets:k,channels:A,visible:te,onChannelCreate:async(ie,Ae)=>{const _e=await nt.createChannel(ie,Ae),De=await nt.getChannels();_(De),await nt.decryptHistoricalPackets({key_type:"channel",channel_key:_e.key}),qe()},onRunningChange:ee})}),w.jsx(xb,{open:S,contacts:m,undecryptedCount:U,onClose:()=>B(!1),onSelectConversation:ie=>{b(ie),B(!1)},onCreateContact:Cn,onCreateChannel:xe,onCreateHashtagChannel:Ce}),w.jsx(bb,{open:D,config:u,health:l,appSettings:d,onClose:()=>F(!1),onSave:$t,onSaveAppSettings:Pe,onSetPrivateKey:pt,onReboot:Ut,onAdvertise:sn,onHealthRefresh:async()=>{const ie=await nt.getHealth();c(ie)},onRefreshAppSettings:Qe}),w.jsx(p_,{position:"top-right"})]})}ky.createRoot(document.getElementById("root")).render(w.jsx(R.StrictMode,{children:w.jsx(mS,{})}));
//# sourceMappingURL=index-CEs7-vRv.js.map
