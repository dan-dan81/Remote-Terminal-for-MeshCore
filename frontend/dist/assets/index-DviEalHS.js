var Dv=Object.defineProperty;var Rv=(r,a,o)=>a in r?Dv(r,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[a]=o;var Oo=(r,a,o)=>Rv(r,typeof a!="symbol"?a+"":a,o);function Fv(r,a){for(var o=0;o<a.length;o++){const l=a[o];if(typeof l!="string"&&!Array.isArray(l)){for(const d in l)if(d!=="default"&&!(d in r)){const f=Object.getOwnPropertyDescriptor(l,d);f&&Object.defineProperty(r,d,f.get?f:{enumerable:!0,get:()=>l[d]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))l(d);new MutationObserver(d=>{for(const f of d)if(f.type==="childList")for(const p of f.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&l(p)}).observe(document,{childList:!0,subtree:!0});function o(d){const f={};return d.integrity&&(f.integrity=d.integrity),d.referrerPolicy&&(f.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?f.credentials="include":d.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function l(d){if(d.ep)return;d.ep=!0;const f=o(d);fetch(d.href,f)}})();var Bf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ys(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Mg(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var a=r.default;if(typeof a=="function"){var o=function l(){return this instanceof l?Reflect.construct(a,arguments,this.constructor):a.apply(this,arguments)};o.prototype=a.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(r).forEach(function(l){var d=Object.getOwnPropertyDescriptor(r,l);Object.defineProperty(o,l,d.get?d:{enumerable:!0,get:function(){return r[l]}})}),o}var Pf={exports:{}},Za={},Tf={exports:{}},ft={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bp;function Nv(){if(bp)return ft;bp=1;var r=Symbol.for("react.element"),a=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),p=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.iterator;function w(P){return P===null||typeof P!="object"?null:(P=y&&P[y]||P["@@iterator"],typeof P=="function"?P:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,k={};function E(P,V,K){this.props=P,this.context=V,this.refs=k,this.updater=K||T}E.prototype.isReactComponent={},E.prototype.setState=function(P,V){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,V,"setState")},E.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function D(){}D.prototype=E.prototype;function B(P,V,K){this.props=P,this.context=V,this.refs=k,this.updater=K||T}var S=B.prototype=new D;S.constructor=B,F(S,E.prototype),S.isPureReactComponent=!0;var N=Array.isArray,M=Object.prototype.hasOwnProperty,z={current:null},H={key:!0,ref:!0,__self:!0,__source:!0};function j(P,V,K){var $,ce={},de=null,Se=null;if(V!=null)for($ in V.ref!==void 0&&(Se=V.ref),V.key!==void 0&&(de=""+V.key),V)M.call(V,$)&&!H.hasOwnProperty($)&&(ce[$]=V[$]);var Ae=arguments.length-2;if(Ae===1)ce.children=K;else if(1<Ae){for(var Ue=Array(Ae),Ye=0;Ye<Ae;Ye++)Ue[Ye]=arguments[Ye+2];ce.children=Ue}if(P&&P.defaultProps)for($ in Ae=P.defaultProps,Ae)ce[$]===void 0&&(ce[$]=Ae[$]);return{$$typeof:r,type:P,key:de,ref:Se,props:ce,_owner:z.current}}function J(P,V){return{$$typeof:r,type:P.type,key:V,ref:P.ref,props:P.props,_owner:P._owner}}function W(P){return typeof P=="object"&&P!==null&&P.$$typeof===r}function U(P){var V={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(K){return V[K]})}var ne=/\/+/g;function Y(P,V){return typeof P=="object"&&P!==null&&P.key!=null?U(""+P.key):V.toString(36)}function re(P,V,K,$,ce){var de=typeof P;(de==="undefined"||de==="boolean")&&(P=null);var Se=!1;if(P===null)Se=!0;else switch(de){case"string":case"number":Se=!0;break;case"object":switch(P.$$typeof){case r:case a:Se=!0}}if(Se)return Se=P,ce=ce(Se),P=$===""?"."+Y(Se,0):$,N(ce)?(K="",P!=null&&(K=P.replace(ne,"$&/")+"/"),re(ce,V,K,"",function(Ye){return Ye})):ce!=null&&(W(ce)&&(ce=J(ce,K+(!ce.key||Se&&Se.key===ce.key?"":(""+ce.key).replace(ne,"$&/")+"/")+P)),V.push(ce)),1;if(Se=0,$=$===""?".":$+":",N(P))for(var Ae=0;Ae<P.length;Ae++){de=P[Ae];var Ue=$+Y(de,Ae);Se+=re(de,V,K,Ue,ce)}else if(Ue=w(P),typeof Ue=="function")for(P=Ue.call(P),Ae=0;!(de=P.next()).done;)de=de.value,Ue=$+Y(de,Ae++),Se+=re(de,V,K,Ue,ce);else if(de==="object")throw V=String(P),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.");return Se}function fe(P,V,K){if(P==null)return P;var $=[],ce=0;return re(P,$,"","",function(de){return V.call(K,de,ce++)}),$}function ae(P){if(P._status===-1){var V=P._result;V=V(),V.then(function(K){(P._status===0||P._status===-1)&&(P._status=1,P._result=K)},function(K){(P._status===0||P._status===-1)&&(P._status=2,P._result=K)}),P._status===-1&&(P._status=0,P._result=V)}if(P._status===1)return P._result.default;throw P._result}var he={current:null},G={transition:null},pe={ReactCurrentDispatcher:he,ReactCurrentBatchConfig:G,ReactCurrentOwner:z};function Z(){throw Error("act(...) is not supported in production builds of React.")}return ft.Children={map:fe,forEach:function(P,V,K){fe(P,function(){V.apply(this,arguments)},K)},count:function(P){var V=0;return fe(P,function(){V++}),V},toArray:function(P){return fe(P,function(V){return V})||[]},only:function(P){if(!W(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},ft.Component=E,ft.Fragment=o,ft.Profiler=d,ft.PureComponent=B,ft.StrictMode=l,ft.Suspense=g,ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,ft.act=Z,ft.cloneElement=function(P,V,K){if(P==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+P+".");var $=F({},P.props),ce=P.key,de=P.ref,Se=P._owner;if(V!=null){if(V.ref!==void 0&&(de=V.ref,Se=z.current),V.key!==void 0&&(ce=""+V.key),P.type&&P.type.defaultProps)var Ae=P.type.defaultProps;for(Ue in V)M.call(V,Ue)&&!H.hasOwnProperty(Ue)&&($[Ue]=V[Ue]===void 0&&Ae!==void 0?Ae[Ue]:V[Ue])}var Ue=arguments.length-2;if(Ue===1)$.children=K;else if(1<Ue){Ae=Array(Ue);for(var Ye=0;Ye<Ue;Ye++)Ae[Ye]=arguments[Ye+2];$.children=Ae}return{$$typeof:r,type:P.type,key:ce,ref:de,props:$,_owner:Se}},ft.createContext=function(P){return P={$$typeof:p,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},P.Provider={$$typeof:f,_context:P},P.Consumer=P},ft.createElement=j,ft.createFactory=function(P){var V=j.bind(null,P);return V.type=P,V},ft.createRef=function(){return{current:null}},ft.forwardRef=function(P){return{$$typeof:h,render:P}},ft.isValidElement=W,ft.lazy=function(P){return{$$typeof:v,_payload:{_status:-1,_result:P},_init:ae}},ft.memo=function(P,V){return{$$typeof:m,type:P,compare:V===void 0?null:V}},ft.startTransition=function(P){var V=G.transition;G.transition={};try{P()}finally{G.transition=V}},ft.unstable_act=Z,ft.useCallback=function(P,V){return he.current.useCallback(P,V)},ft.useContext=function(P){return he.current.useContext(P)},ft.useDebugValue=function(){},ft.useDeferredValue=function(P){return he.current.useDeferredValue(P)},ft.useEffect=function(P,V){return he.current.useEffect(P,V)},ft.useId=function(){return he.current.useId()},ft.useImperativeHandle=function(P,V,K){return he.current.useImperativeHandle(P,V,K)},ft.useInsertionEffect=function(P,V){return he.current.useInsertionEffect(P,V)},ft.useLayoutEffect=function(P,V){return he.current.useLayoutEffect(P,V)},ft.useMemo=function(P,V){return he.current.useMemo(P,V)},ft.useReducer=function(P,V,K){return he.current.useReducer(P,V,K)},ft.useRef=function(P){return he.current.useRef(P)},ft.useState=function(P){return he.current.useState(P)},ft.useSyncExternalStore=function(P,V,K){return he.current.useSyncExternalStore(P,V,K)},ft.useTransition=function(){return he.current.useTransition()},ft.version="18.3.1",ft}var Cp;function h0(){return Cp||(Cp=1,Tf.exports=Nv()),Tf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ep;function Lv(){if(Ep)return Za;Ep=1;var r=h0(),a=Symbol.for("react.element"),o=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,d=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f={key:!0,ref:!0,__self:!0,__source:!0};function p(h,g,m){var v,y={},w=null,T=null;m!==void 0&&(w=""+m),g.key!==void 0&&(w=""+g.key),g.ref!==void 0&&(T=g.ref);for(v in g)l.call(g,v)&&!f.hasOwnProperty(v)&&(y[v]=g[v]);if(h&&h.defaultProps)for(v in g=h.defaultProps,g)y[v]===void 0&&(y[v]=g[v]);return{$$typeof:a,type:h,key:w,ref:T,props:y,_owner:d.current}}return Za.Fragment=o,Za.jsx=p,Za.jsxs=p,Za}var kp;function Mv(){return kp||(kp=1,Pf.exports=Lv()),Pf.exports}var b=Mv(),R=h0();const Ee=Ys(R),p0=Fv({__proto__:null,default:Ee},[R]);var Bu={},Df={exports:{}},Zn={},Rf={exports:{}},Ff={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sp;function Iv(){return Sp||(Sp=1,(function(r){function a(G,pe){var Z=G.length;G.push(pe);e:for(;0<Z;){var P=Z-1>>>1,V=G[P];if(0<d(V,pe))G[P]=pe,G[Z]=V,Z=P;else break e}}function o(G){return G.length===0?null:G[0]}function l(G){if(G.length===0)return null;var pe=G[0],Z=G.pop();if(Z!==pe){G[0]=Z;e:for(var P=0,V=G.length,K=V>>>1;P<K;){var $=2*(P+1)-1,ce=G[$],de=$+1,Se=G[de];if(0>d(ce,Z))de<V&&0>d(Se,ce)?(G[P]=Se,G[de]=Z,P=de):(G[P]=ce,G[$]=Z,P=$);else if(de<V&&0>d(Se,Z))G[P]=Se,G[de]=Z,P=de;else break e}}return pe}function d(G,pe){var Z=G.sortIndex-pe.sortIndex;return Z!==0?Z:G.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;r.unstable_now=function(){return f.now()}}else{var p=Date,h=p.now();r.unstable_now=function(){return p.now()-h}}var g=[],m=[],v=1,y=null,w=3,T=!1,F=!1,k=!1,E=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(G){for(var pe=o(m);pe!==null;){if(pe.callback===null)l(m);else if(pe.startTime<=G)l(m),pe.sortIndex=pe.expirationTime,a(g,pe);else break;pe=o(m)}}function N(G){if(k=!1,S(G),!F)if(o(g)!==null)F=!0,ae(M);else{var pe=o(m);pe!==null&&he(N,pe.startTime-G)}}function M(G,pe){F=!1,k&&(k=!1,D(j),j=-1),T=!0;var Z=w;try{for(S(pe),y=o(g);y!==null&&(!(y.expirationTime>pe)||G&&!U());){var P=y.callback;if(typeof P=="function"){y.callback=null,w=y.priorityLevel;var V=P(y.expirationTime<=pe);pe=r.unstable_now(),typeof V=="function"?y.callback=V:y===o(g)&&l(g),S(pe)}else l(g);y=o(g)}if(y!==null)var K=!0;else{var $=o(m);$!==null&&he(N,$.startTime-pe),K=!1}return K}finally{y=null,w=Z,T=!1}}var z=!1,H=null,j=-1,J=5,W=-1;function U(){return!(r.unstable_now()-W<J)}function ne(){if(H!==null){var G=r.unstable_now();W=G;var pe=!0;try{pe=H(!0,G)}finally{pe?Y():(z=!1,H=null)}}else z=!1}var Y;if(typeof B=="function")Y=function(){B(ne)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,fe=re.port2;re.port1.onmessage=ne,Y=function(){fe.postMessage(null)}}else Y=function(){E(ne,0)};function ae(G){H=G,z||(z=!0,Y())}function he(G,pe){j=E(function(){G(r.unstable_now())},pe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(G){G.callback=null},r.unstable_continueExecution=function(){F||T||(F=!0,ae(M))},r.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<G?Math.floor(1e3/G):5},r.unstable_getCurrentPriorityLevel=function(){return w},r.unstable_getFirstCallbackNode=function(){return o(g)},r.unstable_next=function(G){switch(w){case 1:case 2:case 3:var pe=3;break;default:pe=w}var Z=w;w=pe;try{return G()}finally{w=Z}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(G,pe){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Z=w;w=G;try{return pe()}finally{w=Z}},r.unstable_scheduleCallback=function(G,pe,Z){var P=r.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?P+Z:P):Z=P,G){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=Z+V,G={id:v++,callback:pe,priorityLevel:G,startTime:Z,expirationTime:V,sortIndex:-1},Z>P?(G.sortIndex=Z,a(m,G),o(g)===null&&G===o(m)&&(k?(D(j),j=-1):k=!0,he(N,Z-P))):(G.sortIndex=V,a(g,G),F||T||(F=!0,ae(M))),G},r.unstable_shouldYield=U,r.unstable_wrapCallback=function(G){var pe=w;return function(){var Z=w;w=pe;try{return G.apply(this,arguments)}finally{w=Z}}}})(Ff)),Ff}var Bp;function Ov(){return Bp||(Bp=1,Rf.exports=Iv()),Rf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pp;function jv(){if(Pp)return Zn;Pp=1;var r=h0(),a=Ov();function o(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=new Set,d={};function f(e,n){p(e,n),p(e+"Capture",n)}function p(e,n){for(d[e]=n,e=0;e<n.length;e++)l.add(n[e])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},y={};function w(e){return g.call(y,e)?!0:g.call(v,e)?!1:m.test(e)?y[e]=!0:(v[e]=!0,!1)}function T(e,n,s,c){if(s!==null&&s.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return c?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function F(e,n,s,c){if(n===null||typeof n>"u"||T(e,n,s,c))return!0;if(c)return!1;if(s!==null)switch(s.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function k(e,n,s,c,x,_,I){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=c,this.attributeNamespace=x,this.mustUseProperty=s,this.propertyName=e,this.type=n,this.sanitizeURL=_,this.removeEmptyString=I}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){E[e]=new k(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];E[n]=new k(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){E[e]=new k(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){E[e]=new k(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){E[e]=new k(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){E[e]=new k(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){E[e]=new k(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){E[e]=new k(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){E[e]=new k(e,5,!1,e.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function B(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(D,B);E[n]=new k(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(D,B);E[n]=new k(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(D,B);E[n]=new k(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){E[e]=new k(e,1,!1,e.toLowerCase(),null,!1,!1)}),E.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){E[e]=new k(e,1,!1,e.toLowerCase(),null,!0,!0)});function S(e,n,s,c){var x=E.hasOwnProperty(n)?E[n]:null;(x!==null?x.type!==0:c||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(F(n,s,x,c)&&(s=null),c||x===null?w(n)&&(s===null?e.removeAttribute(n):e.setAttribute(n,""+s)):x.mustUseProperty?e[x.propertyName]=s===null?x.type===3?!1:"":s:(n=x.attributeName,c=x.attributeNamespace,s===null?e.removeAttribute(n):(x=x.type,s=x===3||x===4&&s===!0?"":""+s,c?e.setAttributeNS(c,n,s):e.setAttribute(n,s))))}var N=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),z=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),U=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),fe=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),he=Symbol.for("react.offscreen"),G=Symbol.iterator;function pe(e){return e===null||typeof e!="object"?null:(e=G&&e[G]||e["@@iterator"],typeof e=="function"?e:null)}var Z=Object.assign,P;function V(e){if(P===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);P=n&&n[1]||""}return`
`+P+e}var K=!1;function $(e,n){if(!e||K)return"";K=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(ue){var c=ue}Reflect.construct(e,[],n)}else{try{n.call()}catch(ue){c=ue}e.call(n.prototype)}else{try{throw Error()}catch(ue){c=ue}e()}}catch(ue){if(ue&&c&&typeof ue.stack=="string"){for(var x=ue.stack.split(`
`),_=c.stack.split(`
`),I=x.length-1,q=_.length-1;1<=I&&0<=q&&x[I]!==_[q];)q--;for(;1<=I&&0<=q;I--,q--)if(x[I]!==_[q]){if(I!==1||q!==1)do if(I--,q--,0>q||x[I]!==_[q]){var X=`
`+x[I].replace(" at new "," at ");return e.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",e.displayName)),X}while(1<=I&&0<=q);break}}}finally{K=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?V(e):""}function ce(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=$(e.type,!1),e;case 11:return e=$(e.type.render,!1),e;case 1:return e=$(e.type,!0),e;default:return""}}function de(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case H:return"Fragment";case z:return"Portal";case J:return"Profiler";case j:return"StrictMode";case Y:return"Suspense";case re:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case U:return(e.displayName||"Context")+".Consumer";case W:return(e._context.displayName||"Context")+".Provider";case ne:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case fe:return n=e.displayName||null,n!==null?n:de(e.type)||"Memo";case ae:n=e._payload,e=e._init;try{return de(e(n))}catch{}}return null}function Se(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return de(n);case 8:return n===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Ae(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ue(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Ye(e){var n=Ue(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),c=""+e[n];if(!e.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var x=s.get,_=s.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return x.call(this)},set:function(I){c=""+I,_.call(this,I)}}),Object.defineProperty(e,n,{enumerable:s.enumerable}),{getValue:function(){return c},setValue:function(I){c=""+I},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function bt(e){e._valueTracker||(e._valueTracker=Ye(e))}function ct(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),c="";return e&&(c=Ue(e)?e.checked?"true":"false":e.value),e=c,e!==s?(n.setValue(e),!0):!1}function Be(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ze(e,n){var s=n.checked;return Z({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function dt(e,n){var s=n.defaultValue==null?"":n.defaultValue,c=n.checked!=null?n.checked:n.defaultChecked;s=Ae(n.value!=null?n.value:s),e._wrapperState={initialChecked:c,initialValue:s,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function Mt(e,n){n=n.checked,n!=null&&S(e,"checked",n,!1)}function at(e,n){Mt(e,n);var s=Ae(n.value),c=n.type;if(s!=null)c==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(c==="submit"||c==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?qe(e,n.type,s):n.hasOwnProperty("defaultValue")&&qe(e,n.type,Ae(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function gt(e,n,s){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var c=n.type;if(!(c!=="submit"&&c!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,s||n===e.value||(e.value=n),e.defaultValue=n}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function qe(e,n,s){(n!=="number"||Be(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var tt=Array.isArray;function nt(e,n,s,c){if(e=e.options,n){n={};for(var x=0;x<s.length;x++)n["$"+s[x]]=!0;for(s=0;s<e.length;s++)x=n.hasOwnProperty("$"+e[s].value),e[s].selected!==x&&(e[s].selected=x),x&&c&&(e[s].defaultSelected=!0)}else{for(s=""+Ae(s),n=null,x=0;x<e.length;x++){if(e[x].value===s){e[x].selected=!0,c&&(e[x].defaultSelected=!0);return}n!==null||e[x].disabled||(n=e[x])}n!==null&&(n.selected=!0)}}function He(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(o(91));return Z({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ct(e,n){var s=n.value;if(s==null){if(s=n.children,n=n.defaultValue,s!=null){if(n!=null)throw Error(o(92));if(tt(s)){if(1<s.length)throw Error(o(93));s=s[0]}n=s}n==null&&(n=""),s=n}e._wrapperState={initialValue:Ae(s)}}function Ce(e,n){var s=Ae(n.value),c=Ae(n.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),n.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),c!=null&&(e.defaultValue=""+c)}function Et(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function Dt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jt(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?Dt(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ut,Tn=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,s,c,x){MSApp.execUnsafeLocalFunction(function(){return e(n,s,c,x)})}:e})(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(Ut=Ut||document.createElement("div"),Ut.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Ut.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function Kt(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var Ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qt=["Webkit","ms","Moz","O"];Object.keys(Ft).forEach(function(e){Qt.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),Ft[n]=Ft[e]})});function qn(e,n,s){return n==null||typeof n=="boolean"||n===""?"":s||typeof n!="number"||n===0||Ft.hasOwnProperty(e)&&Ft[e]?(""+n).trim():n+"px"}function yn(e,n){e=e.style;for(var s in n)if(n.hasOwnProperty(s)){var c=s.indexOf("--")===0,x=qn(s,n[s],c);s==="float"&&(s="cssFloat"),c?e.setProperty(s,x):e[s]=x}}var me=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,n){if(n){if(me[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(o(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(o(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(o(61))}if(n.style!=null&&typeof n.style!="object")throw Error(o(62))}}function Re(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ot=null;function te(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ge=null,ye=null,Te=null;function Qe(e){if(e=fi(e)){if(typeof ge!="function")throw Error(o(280));var n=e.stateNode;n&&(n=Es(n),ge(e.stateNode,e.type,n))}}function Fe(e){ye?Te?Te.push(e):Te=[e]:ye=e}function vt(){if(ye){var e=ye,n=Te;if(Te=ye=null,Qe(e),n)for(e=0;e<n.length;e++)Qe(n[e])}}function Rt(e,n){return e(n)}function zt(){}var Mn=!1;function st(e,n,s){if(Mn)return e(n,s);Mn=!0;try{return Rt(e,n,s)}finally{Mn=!1,(ye!==null||Te!==null)&&(zt(),vt())}}function Bt(e,n){var s=e.stateNode;if(s===null)return null;var c=Es(s);if(c===null)return null;s=c[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(o(231,n,typeof s));return s}var Gn=!1;if(h)try{var yt={};Object.defineProperty(yt,"passive",{get:function(){Gn=!0}}),window.addEventListener("test",yt,yt),window.removeEventListener("test",yt,yt)}catch{Gn=!1}function Ht(e,n,s,c,x,_,I,q,X){var ue=Array.prototype.slice.call(arguments,3);try{n.apply(s,ue)}catch(_e){this.onError(_e)}}var $t=!1,De=null,Si=!1,es=null,ml={onError:function(e){$t=!0,De=e}};function gl(e,n,s,c,x,_,I,q,X){$t=!1,De=null,Ht.apply(ml,arguments)}function ta(e,n,s,c,x,_,I,q,X){if(gl.apply(this,arguments),$t){if($t){var ue=De;$t=!1,De=null}else throw Error(o(198));Si||(Si=!0,es=ue)}}function Mr(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function ti(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function na(e){if(Mr(e)!==e)throw Error(o(188))}function od(e){var n=e.alternate;if(!n){if(n=Mr(e),n===null)throw Error(o(188));return n!==e?null:e}for(var s=e,c=n;;){var x=s.return;if(x===null)break;var _=x.alternate;if(_===null){if(c=x.return,c!==null){s=c;continue}break}if(x.child===_.child){for(_=x.child;_;){if(_===s)return na(x),e;if(_===c)return na(x),n;_=_.sibling}throw Error(o(188))}if(s.return!==c.return)s=x,c=_;else{for(var I=!1,q=x.child;q;){if(q===s){I=!0,s=x,c=_;break}if(q===c){I=!0,c=x,s=_;break}q=q.sibling}if(!I){for(q=_.child;q;){if(q===s){I=!0,s=_,c=x;break}if(q===c){I=!0,c=_,s=x;break}q=q.sibling}if(!I)throw Error(o(189))}}if(s.alternate!==c)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?e:n}function Al(e){return e=od(e),e!==null?xl(e):null}function xl(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=xl(e);if(n!==null)return n;e=e.sibling}return null}var vl=a.unstable_scheduleCallback,ra=a.unstable_cancelCallback,sd=a.unstable_shouldYield,ts=a.unstable_requestPaint,Zt=a.unstable_now,ad=a.unstable_getCurrentPriorityLevel,ia=a.unstable_ImmediatePriority,yl=a.unstable_UserBlockingPriority,ns=a.unstable_NormalPriority,oa=a.unstable_LowPriority,Bi=a.unstable_IdlePriority,ho=null,Kn=null;function po(e){if(Kn&&typeof Kn.onCommitFiberRoot=="function")try{Kn.onCommitFiberRoot(ho,e,void 0,(e.current.flags&128)===128)}catch{}}var rt=Math.clz32?Math.clz32:Pi,It=Math.log,rs=Math.LN2;function Pi(e){return e>>>=0,e===0?32:31-(It(e)/rs|0)|0}var yr=64,Ti=4194304;function Je(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Nt(e,n){var s=e.pendingLanes;if(s===0)return 0;var c=0,x=e.suspendedLanes,_=e.pingedLanes,I=s&268435455;if(I!==0){var q=I&~x;q!==0?c=Je(q):(_&=I,_!==0&&(c=Je(_)))}else I=s&~x,I!==0?c=Je(I):_!==0&&(c=Je(_));if(c===0)return 0;if(n!==0&&n!==c&&(n&x)===0&&(x=c&-c,_=n&-n,x>=_||x===16&&(_&4194240)!==0))return n;if((c&4)!==0&&(c|=s&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=c;0<n;)s=31-rt(n),x=1<<s,c|=e[s],n&=~x;return c}function sa(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function is(e,n){for(var s=e.suspendedLanes,c=e.pingedLanes,x=e.expirationTimes,_=e.pendingLanes;0<_;){var I=31-rt(_),q=1<<I,X=x[I];X===-1?((q&s)===0||(q&c)!==0)&&(x[I]=sa(q,n)):X<=n&&(e.expiredLanes|=q),_&=~q}}function _n(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function _l(){var e=yr;return yr<<=1,(yr&4194240)===0&&(yr=64),e}function Di(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function Qn(e,n,s){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-rt(n),e[n]=s}function Yt(e,n){var s=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var c=e.eventTimes;for(e=e.expirationTimes;0<s;){var x=31-rt(s),_=1<<x;n[x]=0,c[x]=-1,e[x]=-1,s&=~_}}function _r(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var c=31-rt(s),x=1<<c;x&n|e[c]&n&&(e[c]|=n),s&=~x}}var At=0;function Ri(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var os,ni,ss,as,mo,go=!1,Fi=[],$n=null,wr=null,ar=null,Ao=new Map,$e=new Map,on=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function aa(e,n){switch(e){case"focusin":case"focusout":$n=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":ar=null;break;case"pointerover":case"pointerout":Ao.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":$e.delete(n.pointerId)}}function ri(e,n,s,c,x,_){return e===null||e.nativeEvent!==_?(e={blockedOn:n,domEventName:s,eventSystemFlags:c,nativeEvent:_,targetContainers:[x]},n!==null&&(n=fi(n),n!==null&&ni(n)),e):(e.eventSystemFlags|=c,n=e.targetContainers,x!==null&&n.indexOf(x)===-1&&n.push(x),e)}function la(e,n,s,c,x){switch(n){case"focusin":return $n=ri($n,e,n,s,c,x),!0;case"dragenter":return wr=ri(wr,e,n,s,c,x),!0;case"mouseover":return ar=ri(ar,e,n,s,c,x),!0;case"pointerover":var _=x.pointerId;return Ao.set(_,ri(Ao.get(_)||null,e,n,s,c,x)),!0;case"gotpointercapture":return _=x.pointerId,$e.set(_,ri($e.get(_)||null,e,n,s,c,x)),!0}return!1}function ls(e){var n=di(e.target);if(n!==null){var s=Mr(n);if(s!==null){if(n=s.tag,n===13){if(n=ti(s),n!==null){e.blockedOn=n,mo(e.priority,function(){ss(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function lr(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=ds(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var c=new s.constructor(s.type,s);ot=c,s.target.dispatchEvent(c),ot=null}else return n=fi(s),n!==null&&ni(n),e.blockedOn=s,!1;n.shift()}return!0}function us(e,n,s){lr(e)&&s.delete(n)}function xo(){go=!1,$n!==null&&lr($n)&&($n=null),wr!==null&&lr(wr)&&(wr=null),ar!==null&&lr(ar)&&(ar=null),Ao.forEach(us),$e.forEach(us)}function Wt(e,n){e.blockedOn===n&&(e.blockedOn=null,go||(go=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,xo)))}function Yn(e){function n(x){return Wt(x,e)}if(0<Fi.length){Wt(Fi[0],e);for(var s=1;s<Fi.length;s++){var c=Fi[s];c.blockedOn===e&&(c.blockedOn=null)}}for($n!==null&&Wt($n,e),wr!==null&&Wt(wr,e),ar!==null&&Wt(ar,e),Ao.forEach(n),$e.forEach(n),s=0;s<on.length;s++)c=on[s],c.blockedOn===e&&(c.blockedOn=null);for(;0<on.length&&(s=on[0],s.blockedOn===null);)ls(s),s.blockedOn===null&&on.shift()}var ii=N.ReactCurrentBatchConfig,vo=!0;function ld(e,n,s,c){var x=At,_=ii.transition;ii.transition=null;try{At=1,yo(e,n,s,c)}finally{At=x,ii.transition=_}}function wl(e,n,s,c){var x=At,_=ii.transition;ii.transition=null;try{At=4,yo(e,n,s,c)}finally{At=x,ii.transition=_}}function yo(e,n,s,c){if(vo){var x=ds(e,n,s,c);if(x===null)t(e,n,c,cs,s),aa(e,c);else if(la(x,e,n,s,c))c.stopPropagation();else if(aa(e,c),n&4&&-1<Pt.indexOf(e)){for(;x!==null;){var _=fi(x);if(_!==null&&os(_),_=ds(e,n,s,c),_===null&&t(e,n,c,cs,s),_===x)break;x=_}x!==null&&c.stopPropagation()}else t(e,n,c,null,s)}}var cs=null;function ds(e,n,s,c){if(cs=null,e=te(c),e=di(e),e!==null)if(n=Mr(e),n===null)e=null;else if(s=n.tag,s===13){if(e=ti(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return cs=e,null}function pt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ad()){case ia:return 1;case yl:return 4;case ns:case oa:return 16;case Bi:return 536870912;default:return 16}default:return 16}}var Ir=null,Dn=null,Or=null;function ua(){if(Or)return Or;var e,n=Dn,s=n.length,c,x="value"in Ir?Ir.value:Ir.textContent,_=x.length;for(e=0;e<s&&n[e]===x[e];e++);var I=s-e;for(c=1;c<=I&&n[s-c]===x[_-c];c++);return Or=x.slice(e,1<c?1-c:void 0)}function fs(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Ni(){return!0}function bl(){return!1}function wn(e){function n(s,c,x,_,I){this._reactName=s,this._targetInst=x,this.type=c,this.nativeEvent=_,this.target=I,this.currentTarget=null;for(var q in e)e.hasOwnProperty(q)&&(s=e[q],this[q]=s?s(_):_[q]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Ni:bl,this.isPropagationStopped=bl,this}return Z(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Ni)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Ni)},persist:function(){},isPersistent:Ni}),n}var Li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ca=wn(Li),oi=Z({},Li,{view:0,detail:0}),ud=wn(oi),In,da,Mi,Xn=Z({},oi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ai,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Mi&&(Mi&&e.type==="mousemove"?(In=e.screenX-Mi.screenX,da=e.screenY-Mi.screenY):da=In=0,Mi=e),In)},movementY:function(e){return"movementY"in e?e.movementY:da}}),fa=wn(Xn),Cl=Z({},Xn,{dataTransfer:0}),ha=wn(Cl),cd=Z({},oi,{relatedTarget:0}),hs=wn(cd),El=Z({},Li,{animationName:0,elapsedTime:0,pseudoElement:0}),dd=wn(El),fd=Z({},Li,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),pa=wn(fd),hd=Z({},Li,{data:0}),ma=wn(hd),kl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ps={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},si={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pd(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=si[e])?!!n[e]:!1}function ai(){return pd}var On=Z({},oi,{key:function(e){if(e.key){var n=kl[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=fs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ps[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ai,charCode:function(e){return e.type==="keypress"?fs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?fs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Sl=wn(On),Bl=Z({},Xn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pl=wn(Bl),ga=Z({},oi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ai}),Aa=wn(ga),md=Z({},Li,{propertyName:0,elapsedTime:0,pseudoElement:0}),gd=wn(md),Tl=Z({},Xn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ad=wn(Tl),Jn=[9,13,27,32],jr=h&&"CompositionEvent"in window,_o=null;h&&"documentMode"in document&&(_o=document.documentMode);var br=h&&"TextEvent"in window&&!_o,Dl=h&&(!jr||_o&&8<_o&&11>=_o),li=" ",Rl=!1;function Ii(e,n){switch(e){case"keyup":return Jn.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xa(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Cr=!1;function xd(e,n){switch(e){case"compositionend":return xa(n);case"keypress":return n.which!==32?null:(Rl=!0,li);case"textInput":return e=n.data,e===li&&Rl?null:e;default:return null}}function zr(e,n){if(Cr)return e==="compositionend"||!jr&&Ii(e,n)?(e=ua(),Or=Dn=Ir=null,Cr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Dl&&n.locale!=="ko"?null:n.data;default:return null}}var ms={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fl(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!ms[e.type]:n==="textarea"}function gs(e,n,s,c){Fe(c),n=u(n,"onChange"),0<n.length&&(s=new ca("onChange","change",null,s,c),e.push({event:s,listeners:n}))}var wo=null,Rn=null;function vd(e){Sa(e,0)}function Er(e){var n=hi(e);if(ct(n))return e}function yd(e,n){if(e==="change")return n}var ur=!1;if(h){var Oi;if(h){var As="oninput"in document;if(!As){var xs=document.createElement("div");xs.setAttribute("oninput","return;"),As=typeof xs.oninput=="function"}Oi=As}else Oi=!1;ur=Oi&&(!document.documentMode||9<document.documentMode)}function bo(){wo&&(wo.detachEvent("onpropertychange",vs),Rn=wo=null)}function vs(e){if(e.propertyName==="value"&&Er(Rn)){var n=[];gs(n,Rn,e,te(e)),st(vd,n)}}function ys(e,n,s){e==="focusin"?(bo(),wo=n,Rn=s,wo.attachEvent("onpropertychange",vs)):e==="focusout"&&bo()}function ji(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Er(Rn)}function _s(e,n){if(e==="click")return Er(n)}function va(e,n){if(e==="input"||e==="change")return Er(n)}function Nl(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var er=typeof Object.is=="function"?Object.is:Nl;function Hr(e,n){if(er(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),c=Object.keys(n);if(s.length!==c.length)return!1;for(c=0;c<s.length;c++){var x=s[c];if(!g.call(n,x)||!er(e[x],n[x]))return!1}return!0}function Ll(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ya(e,n){var s=Ll(e);e=0;for(var c;s;){if(s.nodeType===3){if(c=e+s.textContent.length,e<=n&&c>=n)return{node:s,offset:n-e};e=c}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Ll(s)}}function Ml(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Ml(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function _a(){for(var e=window,n=Be();n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=Be(e.document)}return n}function wa(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function cr(e){var n=_a(),s=e.focusedElem,c=e.selectionRange;if(n!==s&&s&&s.ownerDocument&&Ml(s.ownerDocument.documentElement,s)){if(c!==null&&wa(s)){if(n=c.start,e=c.end,e===void 0&&(e=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(e,s.value.length);else if(e=(n=s.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var x=s.textContent.length,_=Math.min(c.start,x);c=c.end===void 0?_:Math.min(c.end,x),!e.extend&&_>c&&(x=c,c=_,_=x),x=ya(s,_);var I=ya(s,c);x&&I&&(e.rangeCount!==1||e.anchorNode!==x.node||e.anchorOffset!==x.offset||e.focusNode!==I.node||e.focusOffset!==I.offset)&&(n=n.createRange(),n.setStart(x.node,x.offset),e.removeAllRanges(),_>c?(e.addRange(n),e.extend(I.node,I.offset)):(n.setEnd(I.node,I.offset),e.addRange(n)))}}for(n=[],e=s;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)e=n[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ws=h&&"documentMode"in document&&11>=document.documentMode,zi=null,Hi=null,Co=null,bs=!1;function Il(e,n,s){var c=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;bs||zi==null||zi!==Be(c)||(c=zi,"selectionStart"in c&&wa(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Co&&Hr(Co,c)||(Co=c,c=u(Hi,"onSelect"),0<c.length&&(n=new ca("onSelect","select",null,n,s),e.push({event:n,listeners:c}),n.target=zi)))}function Vr(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var Vi={animationend:Vr("Animation","AnimationEnd"),animationiteration:Vr("Animation","AnimationIteration"),animationstart:Vr("Animation","AnimationStart"),transitionend:Vr("Transition","TransitionEnd")},Ur={},ba={};h&&(ba=document.createElement("div").style,"AnimationEvent"in window||(delete Vi.animationend.animation,delete Vi.animationiteration.animation,delete Vi.animationstart.animation),"TransitionEvent"in window||delete Vi.transitionend.transition);function Eo(e){if(Ur[e])return Ur[e];if(!Vi[e])return e;var n=Vi[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in ba)return Ur[e]=n[s];return e}var Ol=Eo("animationend"),dr=Eo("animationiteration"),Ca=Eo("animationstart"),Ea=Eo("transitionend"),Ui=new Map,jl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tr(e,n){Ui.set(e,n),f(n,[e])}for(var ui=0;ui<jl.length;ui++){var Cs=jl[ui],zl=Cs.toLowerCase(),_d=Cs[0].toUpperCase()+Cs.slice(1);tr(zl,"on"+_d)}tr(Ol,"onAnimationEnd"),tr(dr,"onAnimationIteration"),tr(Ca,"onAnimationStart"),tr("dblclick","onDoubleClick"),tr("focusin","onFocus"),tr("focusout","onBlur"),tr(Ea,"onTransitionEnd"),p("onMouseEnter",["mouseout","mouseover"]),p("onMouseLeave",["mouseout","mouseover"]),p("onPointerEnter",["pointerout","pointerover"]),p("onPointerLeave",["pointerout","pointerover"]),f("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),f("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),f("onBeforeInput",["compositionend","keypress","textInput","paste"]),f("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hl=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zi));function ka(e,n,s){var c=e.type||"unknown-event";e.currentTarget=s,ta(c,n,void 0,e),e.currentTarget=null}function Sa(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var c=e[s],x=c.event;c=c.listeners;e:{var _=void 0;if(n)for(var I=c.length-1;0<=I;I--){var q=c[I],X=q.instance,ue=q.currentTarget;if(q=q.listener,X!==_&&x.isPropagationStopped())break e;ka(x,q,ue),_=X}else for(I=0;I<c.length;I++){if(q=c[I],X=q.instance,ue=q.currentTarget,q=q.listener,X!==_&&x.isPropagationStopped())break e;ka(x,q,ue),_=X}}}if(Si)throw e=es,Si=!1,es=null,e}function Tt(e,n){var s=n[Ki];s===void 0&&(s=n[Ki]=new Set);var c=e+"__bubble";s.has(c)||(Vl(n,e,2,!1),s.add(c))}function Ba(e,n,s){var c=0;n&&(c|=4),Vl(s,e,c,n)}var ko="_reactListening"+Math.random().toString(36).slice(2);function Wi(e){if(!e[ko]){e[ko]=!0,l.forEach(function(s){s!=="selectionchange"&&(Hl.has(s)||Ba(s,!1,e),Ba(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[ko]||(n[ko]=!0,Ba("selectionchange",!1,n))}}function Vl(e,n,s,c){switch(pt(n)){case 1:var x=ld;break;case 4:x=wl;break;default:x=yo}s=x.bind(null,n,s,e),x=void 0,!Gn||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(x=!0),c?x!==void 0?e.addEventListener(n,s,{capture:!0,passive:x}):e.addEventListener(n,s,!0):x!==void 0?e.addEventListener(n,s,{passive:x}):e.addEventListener(n,s,!1)}function t(e,n,s,c,x){var _=c;if((n&1)===0&&(n&2)===0&&c!==null)e:for(;;){if(c===null)return;var I=c.tag;if(I===3||I===4){var q=c.stateNode.containerInfo;if(q===x||q.nodeType===8&&q.parentNode===x)break;if(I===4)for(I=c.return;I!==null;){var X=I.tag;if((X===3||X===4)&&(X=I.stateNode.containerInfo,X===x||X.nodeType===8&&X.parentNode===x))return;I=I.return}for(;q!==null;){if(I=di(q),I===null)return;if(X=I.tag,X===5||X===6){c=_=I;continue e}q=q.parentNode}}c=c.return}st(function(){var ue=_,_e=te(s),we=[];e:{var ve=Ui.get(e);if(ve!==void 0){var Ne=ca,Me=e;switch(e){case"keypress":if(fs(s)===0)break e;case"keydown":case"keyup":Ne=Sl;break;case"focusin":Me="focus",Ne=hs;break;case"focusout":Me="blur",Ne=hs;break;case"beforeblur":case"afterblur":Ne=hs;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ne=fa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ne=ha;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ne=Aa;break;case Ol:case dr:case Ca:Ne=dd;break;case Ea:Ne=gd;break;case"scroll":Ne=ud;break;case"wheel":Ne=Ad;break;case"copy":case"cut":case"paste":Ne=pa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ne=Pl}var ze=(n&4)!==0,en=!ze&&e==="scroll",oe=ze?ve!==null?ve+"Capture":null:ve;ze=[];for(var ee=ue,se;ee!==null;){se=ee;var ke=se.stateNode;if(se.tag===5&&ke!==null&&(se=ke,oe!==null&&(ke=Bt(ee,oe),ke!=null&&ze.push(i(ee,ke,se)))),en)break;ee=ee.return}0<ze.length&&(ve=new Ne(ve,Me,null,s,_e),we.push({event:ve,listeners:ze}))}}if((n&7)===0){e:{if(ve=e==="mouseover"||e==="pointerover",Ne=e==="mouseout"||e==="pointerout",ve&&s!==ot&&(Me=s.relatedTarget||s.fromElement)&&(di(Me)||Me[kt]))break e;if((Ne||ve)&&(ve=_e.window===_e?_e:(ve=_e.ownerDocument)?ve.defaultView||ve.parentWindow:window,Ne?(Me=s.relatedTarget||s.toElement,Ne=ue,Me=Me?di(Me):null,Me!==null&&(en=Mr(Me),Me!==en||Me.tag!==5&&Me.tag!==6)&&(Me=null)):(Ne=null,Me=ue),Ne!==Me)){if(ze=fa,ke="onMouseLeave",oe="onMouseEnter",ee="mouse",(e==="pointerout"||e==="pointerover")&&(ze=Pl,ke="onPointerLeave",oe="onPointerEnter",ee="pointer"),en=Ne==null?ve:hi(Ne),se=Me==null?ve:hi(Me),ve=new ze(ke,ee+"leave",Ne,s,_e),ve.target=en,ve.relatedTarget=se,ke=null,di(_e)===ue&&(ze=new ze(oe,ee+"enter",Me,s,_e),ze.target=se,ze.relatedTarget=en,ke=ze),en=ke,Ne&&Me)t:{for(ze=Ne,oe=Me,ee=0,se=ze;se;se=A(se))ee++;for(se=0,ke=oe;ke;ke=A(ke))se++;for(;0<ee-se;)ze=A(ze),ee--;for(;0<se-ee;)oe=A(oe),se--;for(;ee--;){if(ze===oe||oe!==null&&ze===oe.alternate)break t;ze=A(ze),oe=A(oe)}ze=null}else ze=null;Ne!==null&&C(we,ve,Ne,ze,!1),Me!==null&&en!==null&&C(we,en,Me,ze,!0)}}e:{if(ve=ue?hi(ue):window,Ne=ve.nodeName&&ve.nodeName.toLowerCase(),Ne==="select"||Ne==="input"&&ve.type==="file")var Ve=yd;else if(Fl(ve))if(ur)Ve=va;else{Ve=ji;var Ge=ys}else(Ne=ve.nodeName)&&Ne.toLowerCase()==="input"&&(ve.type==="checkbox"||ve.type==="radio")&&(Ve=_s);if(Ve&&(Ve=Ve(e,ue))){gs(we,Ve,s,_e);break e}Ge&&Ge(e,ve,ue),e==="focusout"&&(Ge=ve._wrapperState)&&Ge.controlled&&ve.type==="number"&&qe(ve,"number",ve.value)}switch(Ge=ue?hi(ue):window,e){case"focusin":(Fl(Ge)||Ge.contentEditable==="true")&&(zi=Ge,Hi=ue,Co=null);break;case"focusout":Co=Hi=zi=null;break;case"mousedown":bs=!0;break;case"contextmenu":case"mouseup":case"dragend":bs=!1,Il(we,s,_e);break;case"selectionchange":if(ws)break;case"keydown":case"keyup":Il(we,s,_e)}var Ke;if(jr)e:{switch(e){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else Cr?Ii(e,s)&&(Xe="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Xe="onCompositionStart");Xe&&(Dl&&s.locale!=="ko"&&(Cr||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&Cr&&(Ke=ua()):(Ir=_e,Dn="value"in Ir?Ir.value:Ir.textContent,Cr=!0)),Ge=u(ue,Xe),0<Ge.length&&(Xe=new ma(Xe,e,null,s,_e),we.push({event:Xe,listeners:Ge}),Ke?Xe.data=Ke:(Ke=xa(s),Ke!==null&&(Xe.data=Ke)))),(Ke=br?xd(e,s):zr(e,s))&&(ue=u(ue,"onBeforeInput"),0<ue.length&&(_e=new ma("onBeforeInput","beforeinput",null,s,_e),we.push({event:_e,listeners:ue}),_e.data=Ke))}Sa(we,n)})}function i(e,n,s){return{instance:e,listener:n,currentTarget:s}}function u(e,n){for(var s=n+"Capture",c=[];e!==null;){var x=e,_=x.stateNode;x.tag===5&&_!==null&&(x=_,_=Bt(e,s),_!=null&&c.unshift(i(e,_,x)),_=Bt(e,n),_!=null&&c.push(i(e,_,x))),e=e.return}return c}function A(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function C(e,n,s,c,x){for(var _=n._reactName,I=[];s!==null&&s!==c;){var q=s,X=q.alternate,ue=q.stateNode;if(X!==null&&X===c)break;q.tag===5&&ue!==null&&(q=ue,x?(X=Bt(s,_),X!=null&&I.unshift(i(s,X,q))):x||(X=Bt(s,_),X!=null&&I.push(i(s,X,q)))),s=s.return}I.length!==0&&e.push({event:n,listeners:I})}var O=/\r\n?/g,Q=/\u0000|\uFFFD/g;function ie(e){return(typeof e=="string"?e:""+e).replace(O,`
`).replace(Q,"")}function le(e,n,s){if(n=ie(n),ie(e)!==n&&s)throw Error(o(425))}function xe(){}var Pe=null,We=null;function it(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var sn=typeof setTimeout=="function"?setTimeout:void 0,nn=typeof clearTimeout=="function"?clearTimeout:void 0,Fn=typeof Promise=="function"?Promise:void 0,bn=typeof queueMicrotask=="function"?queueMicrotask:typeof Fn<"u"?function(e){return Fn.resolve(null).then(e).catch(qi)}:sn;function qi(e){setTimeout(function(){throw e})}function Pa(e,n){var s=n,c=0;do{var x=s.nextSibling;if(e.removeChild(s),x&&x.nodeType===8)if(s=x.data,s==="/$"){if(c===0){e.removeChild(x),Yn(n);return}c--}else s!=="$"&&s!=="$?"&&s!=="$!"||c++;s=x}while(s);Yn(n)}function Zr(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function Ul(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return e;n--}else s==="/$"&&n++}e=e.previousSibling}return null}var ci=Math.random().toString(36).slice(2),fr="__reactFiber$"+ci,Gi="__reactProps$"+ci,kt="__reactContainer$"+ci,Ki="__reactEvents$"+ci,wd="__reactListeners$"+ci,bd="__reactHandles$"+ci;function di(e){var n=e[fr];if(n)return n;for(var s=e.parentNode;s;){if(n=s[kt]||s[fr]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=Ul(e);e!==null;){if(s=e[fr])return s;e=Ul(e)}return n}e=s,s=e.parentNode}return null}function fi(e){return e=e[fr]||e[kt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function hi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(o(33))}function Es(e){return e[Gi]||null}var Cd=[],ks=-1;function Qi(e){return{current:e}}function Ot(e){0>ks||(e.current=Cd[ks],Cd[ks]=null,ks--)}function Lt(e,n){ks++,Cd[ks]=e.current,e.current=n}var $i={},Cn=Qi($i),jn=Qi(!1),So=$i;function Ss(e,n){var s=e.type.contextTypes;if(!s)return $i;var c=e.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===n)return c.__reactInternalMemoizedMaskedChildContext;var x={},_;for(_ in s)x[_]=n[_];return c&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=x),x}function zn(e){return e=e.childContextTypes,e!=null}function Zl(){Ot(jn),Ot(Cn)}function W0(e,n,s){if(Cn.current!==$i)throw Error(o(168));Lt(Cn,n),Lt(jn,s)}function q0(e,n,s){var c=e.stateNode;if(n=n.childContextTypes,typeof c.getChildContext!="function")return s;c=c.getChildContext();for(var x in c)if(!(x in n))throw Error(o(108,Se(e)||"Unknown",x));return Z({},s,c)}function Wl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||$i,So=Cn.current,Lt(Cn,e),Lt(jn,jn.current),!0}function G0(e,n,s){var c=e.stateNode;if(!c)throw Error(o(169));s?(e=q0(e,n,So),c.__reactInternalMemoizedMergedChildContext=e,Ot(jn),Ot(Cn),Lt(Cn,e)):Ot(jn),Lt(jn,s)}var pi=null,ql=!1,Ed=!1;function K0(e){pi===null?pi=[e]:pi.push(e)}function $x(e){ql=!0,K0(e)}function Yi(){if(!Ed&&pi!==null){Ed=!0;var e=0,n=At;try{var s=pi;for(At=1;e<s.length;e++){var c=s[e];do c=c(!0);while(c!==null)}pi=null,ql=!1}catch(x){throw pi!==null&&(pi=pi.slice(e+1)),vl(ia,Yi),x}finally{At=n,Ed=!1}}return null}var Bs=[],Ps=0,Gl=null,Kl=0,hr=[],pr=0,Bo=null,mi=1,gi="";function Po(e,n){Bs[Ps++]=Kl,Bs[Ps++]=Gl,Gl=e,Kl=n}function Q0(e,n,s){hr[pr++]=mi,hr[pr++]=gi,hr[pr++]=Bo,Bo=e;var c=mi;e=gi;var x=32-rt(c)-1;c&=~(1<<x),s+=1;var _=32-rt(n)+x;if(30<_){var I=x-x%5;_=(c&(1<<I)-1).toString(32),c>>=I,x-=I,mi=1<<32-rt(n)+x|s<<x|c,gi=_+e}else mi=1<<_|s<<x|c,gi=e}function kd(e){e.return!==null&&(Po(e,1),Q0(e,1,0))}function Sd(e){for(;e===Gl;)Gl=Bs[--Ps],Bs[Ps]=null,Kl=Bs[--Ps],Bs[Ps]=null;for(;e===Bo;)Bo=hr[--pr],hr[pr]=null,gi=hr[--pr],hr[pr]=null,mi=hr[--pr],hr[pr]=null}var nr=null,rr=null,Vt=!1,kr=null;function $0(e,n){var s=xr(5,null,null,0);s.elementType="DELETED",s.stateNode=n,s.return=e,n=e.deletions,n===null?(e.deletions=[s],e.flags|=16):n.push(s)}function Y0(e,n){switch(e.tag){case 5:var s=e.type;return n=n.nodeType!==1||s.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,nr=e,rr=Zr(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,nr=e,rr=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(s=Bo!==null?{id:mi,overflow:gi}:null,e.memoizedState={dehydrated:n,treeContext:s,retryLane:1073741824},s=xr(18,null,null,0),s.stateNode=n,s.return=e,e.child=s,nr=e,rr=null,!0):!1;default:return!1}}function Bd(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Pd(e){if(Vt){var n=rr;if(n){var s=n;if(!Y0(e,n)){if(Bd(e))throw Error(o(418));n=Zr(s.nextSibling);var c=nr;n&&Y0(e,n)?$0(c,s):(e.flags=e.flags&-4097|2,Vt=!1,nr=e)}}else{if(Bd(e))throw Error(o(418));e.flags=e.flags&-4097|2,Vt=!1,nr=e}}}function X0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;nr=e}function Ql(e){if(e!==nr)return!1;if(!Vt)return X0(e),Vt=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!it(e.type,e.memoizedProps)),n&&(n=rr)){if(Bd(e))throw J0(),Error(o(418));for(;n;)$0(e,n),n=Zr(n.nextSibling)}if(X0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(n===0){rr=Zr(e.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++}e=e.nextSibling}rr=null}}else rr=nr?Zr(e.stateNode.nextSibling):null;return!0}function J0(){for(var e=rr;e;)e=Zr(e.nextSibling)}function Ts(){rr=nr=null,Vt=!1}function Td(e){kr===null?kr=[e]:kr.push(e)}var Yx=N.ReactCurrentBatchConfig;function Ta(e,n,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(o(309));var c=s.stateNode}if(!c)throw Error(o(147,e));var x=c,_=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===_?n.ref:(n=function(I){var q=x.refs;I===null?delete q[_]:q[_]=I},n._stringRef=_,n)}if(typeof e!="string")throw Error(o(284));if(!s._owner)throw Error(o(290,e))}return e}function $l(e,n){throw e=Object.prototype.toString.call(n),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function eh(e){var n=e._init;return n(e._payload)}function th(e){function n(oe,ee){if(e){var se=oe.deletions;se===null?(oe.deletions=[ee],oe.flags|=16):se.push(ee)}}function s(oe,ee){if(!e)return null;for(;ee!==null;)n(oe,ee),ee=ee.sibling;return null}function c(oe,ee){for(oe=new Map;ee!==null;)ee.key!==null?oe.set(ee.key,ee):oe.set(ee.index,ee),ee=ee.sibling;return oe}function x(oe,ee){return oe=oo(oe,ee),oe.index=0,oe.sibling=null,oe}function _(oe,ee,se){return oe.index=se,e?(se=oe.alternate,se!==null?(se=se.index,se<ee?(oe.flags|=2,ee):se):(oe.flags|=2,ee)):(oe.flags|=1048576,ee)}function I(oe){return e&&oe.alternate===null&&(oe.flags|=2),oe}function q(oe,ee,se,ke){return ee===null||ee.tag!==6?(ee=wf(se,oe.mode,ke),ee.return=oe,ee):(ee=x(ee,se),ee.return=oe,ee)}function X(oe,ee,se,ke){var Ve=se.type;return Ve===H?_e(oe,ee,se.props.children,ke,se.key):ee!==null&&(ee.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===ae&&eh(Ve)===ee.type)?(ke=x(ee,se.props),ke.ref=Ta(oe,ee,se),ke.return=oe,ke):(ke=yu(se.type,se.key,se.props,null,oe.mode,ke),ke.ref=Ta(oe,ee,se),ke.return=oe,ke)}function ue(oe,ee,se,ke){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==se.containerInfo||ee.stateNode.implementation!==se.implementation?(ee=bf(se,oe.mode,ke),ee.return=oe,ee):(ee=x(ee,se.children||[]),ee.return=oe,ee)}function _e(oe,ee,se,ke,Ve){return ee===null||ee.tag!==7?(ee=Io(se,oe.mode,ke,Ve),ee.return=oe,ee):(ee=x(ee,se),ee.return=oe,ee)}function we(oe,ee,se){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=wf(""+ee,oe.mode,se),ee.return=oe,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case M:return se=yu(ee.type,ee.key,ee.props,null,oe.mode,se),se.ref=Ta(oe,null,ee),se.return=oe,se;case z:return ee=bf(ee,oe.mode,se),ee.return=oe,ee;case ae:var ke=ee._init;return we(oe,ke(ee._payload),se)}if(tt(ee)||pe(ee))return ee=Io(ee,oe.mode,se,null),ee.return=oe,ee;$l(oe,ee)}return null}function ve(oe,ee,se,ke){var Ve=ee!==null?ee.key:null;if(typeof se=="string"&&se!==""||typeof se=="number")return Ve!==null?null:q(oe,ee,""+se,ke);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case M:return se.key===Ve?X(oe,ee,se,ke):null;case z:return se.key===Ve?ue(oe,ee,se,ke):null;case ae:return Ve=se._init,ve(oe,ee,Ve(se._payload),ke)}if(tt(se)||pe(se))return Ve!==null?null:_e(oe,ee,se,ke,null);$l(oe,se)}return null}function Ne(oe,ee,se,ke,Ve){if(typeof ke=="string"&&ke!==""||typeof ke=="number")return oe=oe.get(se)||null,q(ee,oe,""+ke,Ve);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case M:return oe=oe.get(ke.key===null?se:ke.key)||null,X(ee,oe,ke,Ve);case z:return oe=oe.get(ke.key===null?se:ke.key)||null,ue(ee,oe,ke,Ve);case ae:var Ge=ke._init;return Ne(oe,ee,se,Ge(ke._payload),Ve)}if(tt(ke)||pe(ke))return oe=oe.get(se)||null,_e(ee,oe,ke,Ve,null);$l(ee,ke)}return null}function Me(oe,ee,se,ke){for(var Ve=null,Ge=null,Ke=ee,Xe=ee=0,hn=null;Ke!==null&&Xe<se.length;Xe++){Ke.index>Xe?(hn=Ke,Ke=null):hn=Ke.sibling;var wt=ve(oe,Ke,se[Xe],ke);if(wt===null){Ke===null&&(Ke=hn);break}e&&Ke&&wt.alternate===null&&n(oe,Ke),ee=_(wt,ee,Xe),Ge===null?Ve=wt:Ge.sibling=wt,Ge=wt,Ke=hn}if(Xe===se.length)return s(oe,Ke),Vt&&Po(oe,Xe),Ve;if(Ke===null){for(;Xe<se.length;Xe++)Ke=we(oe,se[Xe],ke),Ke!==null&&(ee=_(Ke,ee,Xe),Ge===null?Ve=Ke:Ge.sibling=Ke,Ge=Ke);return Vt&&Po(oe,Xe),Ve}for(Ke=c(oe,Ke);Xe<se.length;Xe++)hn=Ne(Ke,oe,Xe,se[Xe],ke),hn!==null&&(e&&hn.alternate!==null&&Ke.delete(hn.key===null?Xe:hn.key),ee=_(hn,ee,Xe),Ge===null?Ve=hn:Ge.sibling=hn,Ge=hn);return e&&Ke.forEach(function(so){return n(oe,so)}),Vt&&Po(oe,Xe),Ve}function ze(oe,ee,se,ke){var Ve=pe(se);if(typeof Ve!="function")throw Error(o(150));if(se=Ve.call(se),se==null)throw Error(o(151));for(var Ge=Ve=null,Ke=ee,Xe=ee=0,hn=null,wt=se.next();Ke!==null&&!wt.done;Xe++,wt=se.next()){Ke.index>Xe?(hn=Ke,Ke=null):hn=Ke.sibling;var so=ve(oe,Ke,wt.value,ke);if(so===null){Ke===null&&(Ke=hn);break}e&&Ke&&so.alternate===null&&n(oe,Ke),ee=_(so,ee,Xe),Ge===null?Ve=so:Ge.sibling=so,Ge=so,Ke=hn}if(wt.done)return s(oe,Ke),Vt&&Po(oe,Xe),Ve;if(Ke===null){for(;!wt.done;Xe++,wt=se.next())wt=we(oe,wt.value,ke),wt!==null&&(ee=_(wt,ee,Xe),Ge===null?Ve=wt:Ge.sibling=wt,Ge=wt);return Vt&&Po(oe,Xe),Ve}for(Ke=c(oe,Ke);!wt.done;Xe++,wt=se.next())wt=Ne(Ke,oe,Xe,wt.value,ke),wt!==null&&(e&&wt.alternate!==null&&Ke.delete(wt.key===null?Xe:wt.key),ee=_(wt,ee,Xe),Ge===null?Ve=wt:Ge.sibling=wt,Ge=wt);return e&&Ke.forEach(function(Tv){return n(oe,Tv)}),Vt&&Po(oe,Xe),Ve}function en(oe,ee,se,ke){if(typeof se=="object"&&se!==null&&se.type===H&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case M:e:{for(var Ve=se.key,Ge=ee;Ge!==null;){if(Ge.key===Ve){if(Ve=se.type,Ve===H){if(Ge.tag===7){s(oe,Ge.sibling),ee=x(Ge,se.props.children),ee.return=oe,oe=ee;break e}}else if(Ge.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===ae&&eh(Ve)===Ge.type){s(oe,Ge.sibling),ee=x(Ge,se.props),ee.ref=Ta(oe,Ge,se),ee.return=oe,oe=ee;break e}s(oe,Ge);break}else n(oe,Ge);Ge=Ge.sibling}se.type===H?(ee=Io(se.props.children,oe.mode,ke,se.key),ee.return=oe,oe=ee):(ke=yu(se.type,se.key,se.props,null,oe.mode,ke),ke.ref=Ta(oe,ee,se),ke.return=oe,oe=ke)}return I(oe);case z:e:{for(Ge=se.key;ee!==null;){if(ee.key===Ge)if(ee.tag===4&&ee.stateNode.containerInfo===se.containerInfo&&ee.stateNode.implementation===se.implementation){s(oe,ee.sibling),ee=x(ee,se.children||[]),ee.return=oe,oe=ee;break e}else{s(oe,ee);break}else n(oe,ee);ee=ee.sibling}ee=bf(se,oe.mode,ke),ee.return=oe,oe=ee}return I(oe);case ae:return Ge=se._init,en(oe,ee,Ge(se._payload),ke)}if(tt(se))return Me(oe,ee,se,ke);if(pe(se))return ze(oe,ee,se,ke);$l(oe,se)}return typeof se=="string"&&se!==""||typeof se=="number"?(se=""+se,ee!==null&&ee.tag===6?(s(oe,ee.sibling),ee=x(ee,se),ee.return=oe,oe=ee):(s(oe,ee),ee=wf(se,oe.mode,ke),ee.return=oe,oe=ee),I(oe)):s(oe,ee)}return en}var Ds=th(!0),nh=th(!1),Yl=Qi(null),Xl=null,Rs=null,Dd=null;function Rd(){Dd=Rs=Xl=null}function Fd(e){var n=Yl.current;Ot(Yl),e._currentValue=n}function Nd(e,n,s){for(;e!==null;){var c=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,c!==null&&(c.childLanes|=n)):c!==null&&(c.childLanes&n)!==n&&(c.childLanes|=n),e===s)break;e=e.return}}function Fs(e,n){Xl=e,Dd=Rs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(Hn=!0),e.firstContext=null)}function mr(e){var n=e._currentValue;if(Dd!==e)if(e={context:e,memoizedValue:n,next:null},Rs===null){if(Xl===null)throw Error(o(308));Rs=e,Xl.dependencies={lanes:0,firstContext:e}}else Rs=Rs.next=e;return n}var To=null;function Ld(e){To===null?To=[e]:To.push(e)}function rh(e,n,s,c){var x=n.interleaved;return x===null?(s.next=s,Ld(n)):(s.next=x.next,x.next=s),n.interleaved=s,Ai(e,c)}function Ai(e,n){e.lanes|=n;var s=e.alternate;for(s!==null&&(s.lanes|=n),s=e,e=e.return;e!==null;)e.childLanes|=n,s=e.alternate,s!==null&&(s.childLanes|=n),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Xi=!1;function Md(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ih(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function xi(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function Ji(e,n,s){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(_t&2)!==0){var x=c.pending;return x===null?n.next=n:(n.next=x.next,x.next=n),c.pending=n,Ai(e,s)}return x=c.interleaved,x===null?(n.next=n,Ld(c)):(n.next=x.next,x.next=n),c.interleaved=n,Ai(e,s)}function Jl(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194240)!==0)){var c=n.lanes;c&=e.pendingLanes,s|=c,n.lanes=s,_r(e,s)}}function oh(e,n){var s=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,s===c)){var x=null,_=null;if(s=s.firstBaseUpdate,s!==null){do{var I={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};_===null?x=_=I:_=_.next=I,s=s.next}while(s!==null);_===null?x=_=n:_=_.next=n}else x=_=n;s={baseState:c.baseState,firstBaseUpdate:x,lastBaseUpdate:_,shared:c.shared,effects:c.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}function eu(e,n,s,c){var x=e.updateQueue;Xi=!1;var _=x.firstBaseUpdate,I=x.lastBaseUpdate,q=x.shared.pending;if(q!==null){x.shared.pending=null;var X=q,ue=X.next;X.next=null,I===null?_=ue:I.next=ue,I=X;var _e=e.alternate;_e!==null&&(_e=_e.updateQueue,q=_e.lastBaseUpdate,q!==I&&(q===null?_e.firstBaseUpdate=ue:q.next=ue,_e.lastBaseUpdate=X))}if(_!==null){var we=x.baseState;I=0,_e=ue=X=null,q=_;do{var ve=q.lane,Ne=q.eventTime;if((c&ve)===ve){_e!==null&&(_e=_e.next={eventTime:Ne,lane:0,tag:q.tag,payload:q.payload,callback:q.callback,next:null});e:{var Me=e,ze=q;switch(ve=n,Ne=s,ze.tag){case 1:if(Me=ze.payload,typeof Me=="function"){we=Me.call(Ne,we,ve);break e}we=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=ze.payload,ve=typeof Me=="function"?Me.call(Ne,we,ve):Me,ve==null)break e;we=Z({},we,ve);break e;case 2:Xi=!0}}q.callback!==null&&q.lane!==0&&(e.flags|=64,ve=x.effects,ve===null?x.effects=[q]:ve.push(q))}else Ne={eventTime:Ne,lane:ve,tag:q.tag,payload:q.payload,callback:q.callback,next:null},_e===null?(ue=_e=Ne,X=we):_e=_e.next=Ne,I|=ve;if(q=q.next,q===null){if(q=x.shared.pending,q===null)break;ve=q,q=ve.next,ve.next=null,x.lastBaseUpdate=ve,x.shared.pending=null}}while(!0);if(_e===null&&(X=we),x.baseState=X,x.firstBaseUpdate=ue,x.lastBaseUpdate=_e,n=x.shared.interleaved,n!==null){x=n;do I|=x.lane,x=x.next;while(x!==n)}else _===null&&(x.shared.lanes=0);Fo|=I,e.lanes=I,e.memoizedState=we}}function sh(e,n,s){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var c=e[n],x=c.callback;if(x!==null){if(c.callback=null,c=s,typeof x!="function")throw Error(o(191,x));x.call(c)}}}var Da={},Wr=Qi(Da),Ra=Qi(Da),Fa=Qi(Da);function Do(e){if(e===Da)throw Error(o(174));return e}function Id(e,n){switch(Lt(Fa,n),Lt(Ra,e),Lt(Wr,Da),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Jt(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=Jt(n,e)}Ot(Wr),Lt(Wr,n)}function Ns(){Ot(Wr),Ot(Ra),Ot(Fa)}function ah(e){Do(Fa.current);var n=Do(Wr.current),s=Jt(n,e.type);n!==s&&(Lt(Ra,e),Lt(Wr,s))}function Od(e){Ra.current===e&&(Ot(Wr),Ot(Ra))}var qt=Qi(0);function tu(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var jd=[];function zd(){for(var e=0;e<jd.length;e++)jd[e]._workInProgressVersionPrimary=null;jd.length=0}var nu=N.ReactCurrentDispatcher,Hd=N.ReactCurrentBatchConfig,Ro=0,Gt=null,an=null,dn=null,ru=!1,Na=!1,La=0,Xx=0;function En(){throw Error(o(321))}function Vd(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!er(e[s],n[s]))return!1;return!0}function Ud(e,n,s,c,x,_){if(Ro=_,Gt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,nu.current=e===null||e.memoizedState===null?nv:rv,e=s(c,x),Na){_=0;do{if(Na=!1,La=0,25<=_)throw Error(o(301));_+=1,dn=an=null,n.updateQueue=null,nu.current=iv,e=s(c,x)}while(Na)}if(nu.current=su,n=an!==null&&an.next!==null,Ro=0,dn=an=Gt=null,ru=!1,n)throw Error(o(300));return e}function Zd(){var e=La!==0;return La=0,e}function qr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?Gt.memoizedState=dn=e:dn=dn.next=e,dn}function gr(){if(an===null){var e=Gt.alternate;e=e!==null?e.memoizedState:null}else e=an.next;var n=dn===null?Gt.memoizedState:dn.next;if(n!==null)dn=n,an=e;else{if(e===null)throw Error(o(310));an=e,e={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},dn===null?Gt.memoizedState=dn=e:dn=dn.next=e}return dn}function Ma(e,n){return typeof n=="function"?n(e):n}function Wd(e){var n=gr(),s=n.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=e;var c=an,x=c.baseQueue,_=s.pending;if(_!==null){if(x!==null){var I=x.next;x.next=_.next,_.next=I}c.baseQueue=x=_,s.pending=null}if(x!==null){_=x.next,c=c.baseState;var q=I=null,X=null,ue=_;do{var _e=ue.lane;if((Ro&_e)===_e)X!==null&&(X=X.next={lane:0,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),c=ue.hasEagerState?ue.eagerState:e(c,ue.action);else{var we={lane:_e,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null};X===null?(q=X=we,I=c):X=X.next=we,Gt.lanes|=_e,Fo|=_e}ue=ue.next}while(ue!==null&&ue!==_);X===null?I=c:X.next=q,er(c,n.memoizedState)||(Hn=!0),n.memoizedState=c,n.baseState=I,n.baseQueue=X,s.lastRenderedState=c}if(e=s.interleaved,e!==null){x=e;do _=x.lane,Gt.lanes|=_,Fo|=_,x=x.next;while(x!==e)}else x===null&&(s.lanes=0);return[n.memoizedState,s.dispatch]}function qd(e){var n=gr(),s=n.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=e;var c=s.dispatch,x=s.pending,_=n.memoizedState;if(x!==null){s.pending=null;var I=x=x.next;do _=e(_,I.action),I=I.next;while(I!==x);er(_,n.memoizedState)||(Hn=!0),n.memoizedState=_,n.baseQueue===null&&(n.baseState=_),s.lastRenderedState=_}return[_,c]}function lh(){}function uh(e,n){var s=Gt,c=gr(),x=n(),_=!er(c.memoizedState,x);if(_&&(c.memoizedState=x,Hn=!0),c=c.queue,Gd(fh.bind(null,s,c,e),[e]),c.getSnapshot!==n||_||dn!==null&&dn.memoizedState.tag&1){if(s.flags|=2048,Ia(9,dh.bind(null,s,c,x,n),void 0,null),fn===null)throw Error(o(349));(Ro&30)!==0||ch(s,n,x)}return x}function ch(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=Gt.updateQueue,n===null?(n={lastEffect:null,stores:null},Gt.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function dh(e,n,s,c){n.value=s,n.getSnapshot=c,hh(n)&&ph(e)}function fh(e,n,s){return s(function(){hh(n)&&ph(e)})}function hh(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!er(e,s)}catch{return!0}}function ph(e){var n=Ai(e,1);n!==null&&Tr(n,e,1,-1)}function mh(e){var n=qr();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:e},n.queue=e,e=e.dispatch=tv.bind(null,Gt,e),[n.memoizedState,e]}function Ia(e,n,s,c){return e={tag:e,create:n,destroy:s,deps:c,next:null},n=Gt.updateQueue,n===null?(n={lastEffect:null,stores:null},Gt.updateQueue=n,n.lastEffect=e.next=e):(s=n.lastEffect,s===null?n.lastEffect=e.next=e:(c=s.next,s.next=e,e.next=c,n.lastEffect=e)),e}function gh(){return gr().memoizedState}function iu(e,n,s,c){var x=qr();Gt.flags|=e,x.memoizedState=Ia(1|n,s,void 0,c===void 0?null:c)}function ou(e,n,s,c){var x=gr();c=c===void 0?null:c;var _=void 0;if(an!==null){var I=an.memoizedState;if(_=I.destroy,c!==null&&Vd(c,I.deps)){x.memoizedState=Ia(n,s,_,c);return}}Gt.flags|=e,x.memoizedState=Ia(1|n,s,_,c)}function Ah(e,n){return iu(8390656,8,e,n)}function Gd(e,n){return ou(2048,8,e,n)}function xh(e,n){return ou(4,2,e,n)}function vh(e,n){return ou(4,4,e,n)}function yh(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function _h(e,n,s){return s=s!=null?s.concat([e]):null,ou(4,4,yh.bind(null,n,e),s)}function Kd(){}function wh(e,n){var s=gr();n=n===void 0?null:n;var c=s.memoizedState;return c!==null&&n!==null&&Vd(n,c[1])?c[0]:(s.memoizedState=[e,n],e)}function bh(e,n){var s=gr();n=n===void 0?null:n;var c=s.memoizedState;return c!==null&&n!==null&&Vd(n,c[1])?c[0]:(e=e(),s.memoizedState=[e,n],e)}function Ch(e,n,s){return(Ro&21)===0?(e.baseState&&(e.baseState=!1,Hn=!0),e.memoizedState=s):(er(s,n)||(s=_l(),Gt.lanes|=s,Fo|=s,e.baseState=!0),n)}function Jx(e,n){var s=At;At=s!==0&&4>s?s:4,e(!0);var c=Hd.transition;Hd.transition={};try{e(!1),n()}finally{At=s,Hd.transition=c}}function Eh(){return gr().memoizedState}function ev(e,n,s){var c=ro(e);if(s={lane:c,action:s,hasEagerState:!1,eagerState:null,next:null},kh(e))Sh(n,s);else if(s=rh(e,n,s,c),s!==null){var x=Ln();Tr(s,e,c,x),Bh(s,n,c)}}function tv(e,n,s){var c=ro(e),x={lane:c,action:s,hasEagerState:!1,eagerState:null,next:null};if(kh(e))Sh(n,x);else{var _=e.alternate;if(e.lanes===0&&(_===null||_.lanes===0)&&(_=n.lastRenderedReducer,_!==null))try{var I=n.lastRenderedState,q=_(I,s);if(x.hasEagerState=!0,x.eagerState=q,er(q,I)){var X=n.interleaved;X===null?(x.next=x,Ld(n)):(x.next=X.next,X.next=x),n.interleaved=x;return}}catch{}finally{}s=rh(e,n,x,c),s!==null&&(x=Ln(),Tr(s,e,c,x),Bh(s,n,c))}}function kh(e){var n=e.alternate;return e===Gt||n!==null&&n===Gt}function Sh(e,n){Na=ru=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function Bh(e,n,s){if((s&4194240)!==0){var c=n.lanes;c&=e.pendingLanes,s|=c,n.lanes=s,_r(e,s)}}var su={readContext:mr,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useInsertionEffect:En,useLayoutEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useMutableSource:En,useSyncExternalStore:En,useId:En,unstable_isNewReconciler:!1},nv={readContext:mr,useCallback:function(e,n){return qr().memoizedState=[e,n===void 0?null:n],e},useContext:mr,useEffect:Ah,useImperativeHandle:function(e,n,s){return s=s!=null?s.concat([e]):null,iu(4194308,4,yh.bind(null,n,e),s)},useLayoutEffect:function(e,n){return iu(4194308,4,e,n)},useInsertionEffect:function(e,n){return iu(4,2,e,n)},useMemo:function(e,n){var s=qr();return n=n===void 0?null:n,e=e(),s.memoizedState=[e,n],e},useReducer:function(e,n,s){var c=qr();return n=s!==void 0?s(n):n,c.memoizedState=c.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},c.queue=e,e=e.dispatch=ev.bind(null,Gt,e),[c.memoizedState,e]},useRef:function(e){var n=qr();return e={current:e},n.memoizedState=e},useState:mh,useDebugValue:Kd,useDeferredValue:function(e){return qr().memoizedState=e},useTransition:function(){var e=mh(!1),n=e[0];return e=Jx.bind(null,e[1]),qr().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,s){var c=Gt,x=qr();if(Vt){if(s===void 0)throw Error(o(407));s=s()}else{if(s=n(),fn===null)throw Error(o(349));(Ro&30)!==0||ch(c,n,s)}x.memoizedState=s;var _={value:s,getSnapshot:n};return x.queue=_,Ah(fh.bind(null,c,_,e),[e]),c.flags|=2048,Ia(9,dh.bind(null,c,_,s,n),void 0,null),s},useId:function(){var e=qr(),n=fn.identifierPrefix;if(Vt){var s=gi,c=mi;s=(c&~(1<<32-rt(c)-1)).toString(32)+s,n=":"+n+"R"+s,s=La++,0<s&&(n+="H"+s.toString(32)),n+=":"}else s=Xx++,n=":"+n+"r"+s.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},rv={readContext:mr,useCallback:wh,useContext:mr,useEffect:Gd,useImperativeHandle:_h,useInsertionEffect:xh,useLayoutEffect:vh,useMemo:bh,useReducer:Wd,useRef:gh,useState:function(){return Wd(Ma)},useDebugValue:Kd,useDeferredValue:function(e){var n=gr();return Ch(n,an.memoizedState,e)},useTransition:function(){var e=Wd(Ma)[0],n=gr().memoizedState;return[e,n]},useMutableSource:lh,useSyncExternalStore:uh,useId:Eh,unstable_isNewReconciler:!1},iv={readContext:mr,useCallback:wh,useContext:mr,useEffect:Gd,useImperativeHandle:_h,useInsertionEffect:xh,useLayoutEffect:vh,useMemo:bh,useReducer:qd,useRef:gh,useState:function(){return qd(Ma)},useDebugValue:Kd,useDeferredValue:function(e){var n=gr();return an===null?n.memoizedState=e:Ch(n,an.memoizedState,e)},useTransition:function(){var e=qd(Ma)[0],n=gr().memoizedState;return[e,n]},useMutableSource:lh,useSyncExternalStore:uh,useId:Eh,unstable_isNewReconciler:!1};function Sr(e,n){if(e&&e.defaultProps){n=Z({},n),e=e.defaultProps;for(var s in e)n[s]===void 0&&(n[s]=e[s]);return n}return n}function Qd(e,n,s,c){n=e.memoizedState,s=s(c,n),s=s==null?n:Z({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var au={isMounted:function(e){return(e=e._reactInternals)?Mr(e)===e:!1},enqueueSetState:function(e,n,s){e=e._reactInternals;var c=Ln(),x=ro(e),_=xi(c,x);_.payload=n,s!=null&&(_.callback=s),n=Ji(e,_,x),n!==null&&(Tr(n,e,x,c),Jl(n,e,x))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var c=Ln(),x=ro(e),_=xi(c,x);_.tag=1,_.payload=n,s!=null&&(_.callback=s),n=Ji(e,_,x),n!==null&&(Tr(n,e,x,c),Jl(n,e,x))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=Ln(),c=ro(e),x=xi(s,c);x.tag=2,n!=null&&(x.callback=n),n=Ji(e,x,c),n!==null&&(Tr(n,e,c,s),Jl(n,e,c))}};function Ph(e,n,s,c,x,_,I){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,_,I):n.prototype&&n.prototype.isPureReactComponent?!Hr(s,c)||!Hr(x,_):!0}function Th(e,n,s){var c=!1,x=$i,_=n.contextType;return typeof _=="object"&&_!==null?_=mr(_):(x=zn(n)?So:Cn.current,c=n.contextTypes,_=(c=c!=null)?Ss(e,x):$i),n=new n(s,_),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=au,e.stateNode=n,n._reactInternals=e,c&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=x,e.__reactInternalMemoizedMaskedChildContext=_),n}function Dh(e,n,s,c){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,c),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,c),n.state!==e&&au.enqueueReplaceState(n,n.state,null)}function $d(e,n,s,c){var x=e.stateNode;x.props=s,x.state=e.memoizedState,x.refs={},Md(e);var _=n.contextType;typeof _=="object"&&_!==null?x.context=mr(_):(_=zn(n)?So:Cn.current,x.context=Ss(e,_)),x.state=e.memoizedState,_=n.getDerivedStateFromProps,typeof _=="function"&&(Qd(e,n,_,s),x.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(n=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),n!==x.state&&au.enqueueReplaceState(x,x.state,null),eu(e,s,x,c),x.state=e.memoizedState),typeof x.componentDidMount=="function"&&(e.flags|=4194308)}function Ls(e,n){try{var s="",c=n;do s+=ce(c),c=c.return;while(c);var x=s}catch(_){x=`
Error generating stack: `+_.message+`
`+_.stack}return{value:e,source:n,stack:x,digest:null}}function Yd(e,n,s){return{value:e,source:null,stack:s??null,digest:n??null}}function Xd(e,n){try{console.error(n.value)}catch(s){setTimeout(function(){throw s})}}var ov=typeof WeakMap=="function"?WeakMap:Map;function Rh(e,n,s){s=xi(-1,s),s.tag=3,s.payload={element:null};var c=n.value;return s.callback=function(){pu||(pu=!0,pf=c),Xd(e,n)},s}function Fh(e,n,s){s=xi(-1,s),s.tag=3;var c=e.type.getDerivedStateFromError;if(typeof c=="function"){var x=n.value;s.payload=function(){return c(x)},s.callback=function(){Xd(e,n)}}var _=e.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(s.callback=function(){Xd(e,n),typeof c!="function"&&(to===null?to=new Set([this]):to.add(this));var I=n.stack;this.componentDidCatch(n.value,{componentStack:I!==null?I:""})}),s}function Nh(e,n,s){var c=e.pingCache;if(c===null){c=e.pingCache=new ov;var x=new Set;c.set(n,x)}else x=c.get(n),x===void 0&&(x=new Set,c.set(n,x));x.has(s)||(x.add(s),e=vv.bind(null,e,n,s),n.then(e,e))}function Lh(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function Mh(e,n,s,c,x){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(n=xi(-1,1),n.tag=2,Ji(s,n,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=x,e)}var sv=N.ReactCurrentOwner,Hn=!1;function Nn(e,n,s,c){n.child=e===null?nh(n,null,s,c):Ds(n,e.child,s,c)}function Ih(e,n,s,c,x){s=s.render;var _=n.ref;return Fs(n,x),c=Ud(e,n,s,c,_,x),s=Zd(),e!==null&&!Hn?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~x,vi(e,n,x)):(Vt&&s&&kd(n),n.flags|=1,Nn(e,n,c,x),n.child)}function Oh(e,n,s,c,x){if(e===null){var _=s.type;return typeof _=="function"&&!_f(_)&&_.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(n.tag=15,n.type=_,jh(e,n,_,c,x)):(e=yu(s.type,null,c,n,n.mode,x),e.ref=n.ref,e.return=n,n.child=e)}if(_=e.child,(e.lanes&x)===0){var I=_.memoizedProps;if(s=s.compare,s=s!==null?s:Hr,s(I,c)&&e.ref===n.ref)return vi(e,n,x)}return n.flags|=1,e=oo(_,c),e.ref=n.ref,e.return=n,n.child=e}function jh(e,n,s,c,x){if(e!==null){var _=e.memoizedProps;if(Hr(_,c)&&e.ref===n.ref)if(Hn=!1,n.pendingProps=c=_,(e.lanes&x)!==0)(e.flags&131072)!==0&&(Hn=!0);else return n.lanes=e.lanes,vi(e,n,x)}return Jd(e,n,s,c,x)}function zh(e,n,s){var c=n.pendingProps,x=c.children,_=e!==null?e.memoizedState:null;if(c.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Lt(Is,ir),ir|=s;else{if((s&1073741824)===0)return e=_!==null?_.baseLanes|s:s,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Lt(Is,ir),ir|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=_!==null?_.baseLanes:s,Lt(Is,ir),ir|=c}else _!==null?(c=_.baseLanes|s,n.memoizedState=null):c=s,Lt(Is,ir),ir|=c;return Nn(e,n,x,s),n.child}function Hh(e,n){var s=n.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(n.flags|=512,n.flags|=2097152)}function Jd(e,n,s,c,x){var _=zn(s)?So:Cn.current;return _=Ss(n,_),Fs(n,x),s=Ud(e,n,s,c,_,x),c=Zd(),e!==null&&!Hn?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~x,vi(e,n,x)):(Vt&&c&&kd(n),n.flags|=1,Nn(e,n,s,x),n.child)}function Vh(e,n,s,c,x){if(zn(s)){var _=!0;Wl(n)}else _=!1;if(Fs(n,x),n.stateNode===null)uu(e,n),Th(n,s,c),$d(n,s,c,x),c=!0;else if(e===null){var I=n.stateNode,q=n.memoizedProps;I.props=q;var X=I.context,ue=s.contextType;typeof ue=="object"&&ue!==null?ue=mr(ue):(ue=zn(s)?So:Cn.current,ue=Ss(n,ue));var _e=s.getDerivedStateFromProps,we=typeof _e=="function"||typeof I.getSnapshotBeforeUpdate=="function";we||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(q!==c||X!==ue)&&Dh(n,I,c,ue),Xi=!1;var ve=n.memoizedState;I.state=ve,eu(n,c,I,x),X=n.memoizedState,q!==c||ve!==X||jn.current||Xi?(typeof _e=="function"&&(Qd(n,s,_e,c),X=n.memoizedState),(q=Xi||Ph(n,s,q,c,ve,X,ue))?(we||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(n.flags|=4194308)):(typeof I.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=c,n.memoizedState=X),I.props=c,I.state=X,I.context=ue,c=q):(typeof I.componentDidMount=="function"&&(n.flags|=4194308),c=!1)}else{I=n.stateNode,ih(e,n),q=n.memoizedProps,ue=n.type===n.elementType?q:Sr(n.type,q),I.props=ue,we=n.pendingProps,ve=I.context,X=s.contextType,typeof X=="object"&&X!==null?X=mr(X):(X=zn(s)?So:Cn.current,X=Ss(n,X));var Ne=s.getDerivedStateFromProps;(_e=typeof Ne=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(q!==we||ve!==X)&&Dh(n,I,c,X),Xi=!1,ve=n.memoizedState,I.state=ve,eu(n,c,I,x);var Me=n.memoizedState;q!==we||ve!==Me||jn.current||Xi?(typeof Ne=="function"&&(Qd(n,s,Ne,c),Me=n.memoizedState),(ue=Xi||Ph(n,s,ue,c,ve,Me,X)||!1)?(_e||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(c,Me,X),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(c,Me,X)),typeof I.componentDidUpdate=="function"&&(n.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof I.componentDidUpdate!="function"||q===e.memoizedProps&&ve===e.memoizedState||(n.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||q===e.memoizedProps&&ve===e.memoizedState||(n.flags|=1024),n.memoizedProps=c,n.memoizedState=Me),I.props=c,I.state=Me,I.context=X,c=ue):(typeof I.componentDidUpdate!="function"||q===e.memoizedProps&&ve===e.memoizedState||(n.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||q===e.memoizedProps&&ve===e.memoizedState||(n.flags|=1024),c=!1)}return ef(e,n,s,c,_,x)}function ef(e,n,s,c,x,_){Hh(e,n);var I=(n.flags&128)!==0;if(!c&&!I)return x&&G0(n,s,!1),vi(e,n,_);c=n.stateNode,sv.current=n;var q=I&&typeof s.getDerivedStateFromError!="function"?null:c.render();return n.flags|=1,e!==null&&I?(n.child=Ds(n,e.child,null,_),n.child=Ds(n,null,q,_)):Nn(e,n,q,_),n.memoizedState=c.state,x&&G0(n,s,!0),n.child}function Uh(e){var n=e.stateNode;n.pendingContext?W0(e,n.pendingContext,n.pendingContext!==n.context):n.context&&W0(e,n.context,!1),Id(e,n.containerInfo)}function Zh(e,n,s,c,x){return Ts(),Td(x),n.flags|=256,Nn(e,n,s,c),n.child}var tf={dehydrated:null,treeContext:null,retryLane:0};function nf(e){return{baseLanes:e,cachePool:null,transitions:null}}function Wh(e,n,s){var c=n.pendingProps,x=qt.current,_=!1,I=(n.flags&128)!==0,q;if((q=I)||(q=e!==null&&e.memoizedState===null?!1:(x&2)!==0),q?(_=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(x|=1),Lt(qt,x&1),e===null)return Pd(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(I=c.children,e=c.fallback,_?(c=n.mode,_=n.child,I={mode:"hidden",children:I},(c&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=I):_=_u(I,c,0,null),e=Io(e,c,s,null),_.return=n,e.return=n,_.sibling=e,n.child=_,n.child.memoizedState=nf(s),n.memoizedState=tf,e):rf(n,I));if(x=e.memoizedState,x!==null&&(q=x.dehydrated,q!==null))return av(e,n,I,c,q,x,s);if(_){_=c.fallback,I=n.mode,x=e.child,q=x.sibling;var X={mode:"hidden",children:c.children};return(I&1)===0&&n.child!==x?(c=n.child,c.childLanes=0,c.pendingProps=X,n.deletions=null):(c=oo(x,X),c.subtreeFlags=x.subtreeFlags&14680064),q!==null?_=oo(q,_):(_=Io(_,I,s,null),_.flags|=2),_.return=n,c.return=n,c.sibling=_,n.child=c,c=_,_=n.child,I=e.child.memoizedState,I=I===null?nf(s):{baseLanes:I.baseLanes|s,cachePool:null,transitions:I.transitions},_.memoizedState=I,_.childLanes=e.childLanes&~s,n.memoizedState=tf,c}return _=e.child,e=_.sibling,c=oo(_,{mode:"visible",children:c.children}),(n.mode&1)===0&&(c.lanes=s),c.return=n,c.sibling=null,e!==null&&(s=n.deletions,s===null?(n.deletions=[e],n.flags|=16):s.push(e)),n.child=c,n.memoizedState=null,c}function rf(e,n){return n=_u({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function lu(e,n,s,c){return c!==null&&Td(c),Ds(n,e.child,null,s),e=rf(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function av(e,n,s,c,x,_,I){if(s)return n.flags&256?(n.flags&=-257,c=Yd(Error(o(422))),lu(e,n,I,c)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(_=c.fallback,x=n.mode,c=_u({mode:"visible",children:c.children},x,0,null),_=Io(_,x,I,null),_.flags|=2,c.return=n,_.return=n,c.sibling=_,n.child=c,(n.mode&1)!==0&&Ds(n,e.child,null,I),n.child.memoizedState=nf(I),n.memoizedState=tf,_);if((n.mode&1)===0)return lu(e,n,I,null);if(x.data==="$!"){if(c=x.nextSibling&&x.nextSibling.dataset,c)var q=c.dgst;return c=q,_=Error(o(419)),c=Yd(_,c,void 0),lu(e,n,I,c)}if(q=(I&e.childLanes)!==0,Hn||q){if(c=fn,c!==null){switch(I&-I){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(c.suspendedLanes|I))!==0?0:x,x!==0&&x!==_.retryLane&&(_.retryLane=x,Ai(e,x),Tr(c,e,x,-1))}return yf(),c=Yd(Error(o(421))),lu(e,n,I,c)}return x.data==="$?"?(n.flags|=128,n.child=e.child,n=yv.bind(null,e),x._reactRetry=n,null):(e=_.treeContext,rr=Zr(x.nextSibling),nr=n,Vt=!0,kr=null,e!==null&&(hr[pr++]=mi,hr[pr++]=gi,hr[pr++]=Bo,mi=e.id,gi=e.overflow,Bo=n),n=rf(n,c.children),n.flags|=4096,n)}function qh(e,n,s){e.lanes|=n;var c=e.alternate;c!==null&&(c.lanes|=n),Nd(e.return,n,s)}function of(e,n,s,c,x){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:c,tail:s,tailMode:x}:(_.isBackwards=n,_.rendering=null,_.renderingStartTime=0,_.last=c,_.tail=s,_.tailMode=x)}function Gh(e,n,s){var c=n.pendingProps,x=c.revealOrder,_=c.tail;if(Nn(e,n,c.children,s),c=qt.current,(c&2)!==0)c=c&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&qh(e,s,n);else if(e.tag===19)qh(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}c&=1}if(Lt(qt,c),(n.mode&1)===0)n.memoizedState=null;else switch(x){case"forwards":for(s=n.child,x=null;s!==null;)e=s.alternate,e!==null&&tu(e)===null&&(x=s),s=s.sibling;s=x,s===null?(x=n.child,n.child=null):(x=s.sibling,s.sibling=null),of(n,!1,x,s,_);break;case"backwards":for(s=null,x=n.child,n.child=null;x!==null;){if(e=x.alternate,e!==null&&tu(e)===null){n.child=x;break}e=x.sibling,x.sibling=s,s=x,x=e}of(n,!0,s,null,_);break;case"together":of(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function uu(e,n){(n.mode&1)===0&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function vi(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),Fo|=n.lanes,(s&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(o(153));if(n.child!==null){for(e=n.child,s=oo(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=oo(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function lv(e,n,s){switch(n.tag){case 3:Uh(n),Ts();break;case 5:ah(n);break;case 1:zn(n.type)&&Wl(n);break;case 4:Id(n,n.stateNode.containerInfo);break;case 10:var c=n.type._context,x=n.memoizedProps.value;Lt(Yl,c._currentValue),c._currentValue=x;break;case 13:if(c=n.memoizedState,c!==null)return c.dehydrated!==null?(Lt(qt,qt.current&1),n.flags|=128,null):(s&n.child.childLanes)!==0?Wh(e,n,s):(Lt(qt,qt.current&1),e=vi(e,n,s),e!==null?e.sibling:null);Lt(qt,qt.current&1);break;case 19:if(c=(s&n.childLanes)!==0,(e.flags&128)!==0){if(c)return Gh(e,n,s);n.flags|=128}if(x=n.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Lt(qt,qt.current),c)break;return null;case 22:case 23:return n.lanes=0,zh(e,n,s)}return vi(e,n,s)}var Kh,sf,Qh,$h;Kh=function(e,n){for(var s=n.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},sf=function(){},Qh=function(e,n,s,c){var x=e.memoizedProps;if(x!==c){e=n.stateNode,Do(Wr.current);var _=null;switch(s){case"input":x=Ze(e,x),c=Ze(e,c),_=[];break;case"select":x=Z({},x,{value:void 0}),c=Z({},c,{value:void 0}),_=[];break;case"textarea":x=He(e,x),c=He(e,c),_=[];break;default:typeof x.onClick!="function"&&typeof c.onClick=="function"&&(e.onclick=xe)}be(s,c);var I;s=null;for(ue in x)if(!c.hasOwnProperty(ue)&&x.hasOwnProperty(ue)&&x[ue]!=null)if(ue==="style"){var q=x[ue];for(I in q)q.hasOwnProperty(I)&&(s||(s={}),s[I]="")}else ue!=="dangerouslySetInnerHTML"&&ue!=="children"&&ue!=="suppressContentEditableWarning"&&ue!=="suppressHydrationWarning"&&ue!=="autoFocus"&&(d.hasOwnProperty(ue)?_||(_=[]):(_=_||[]).push(ue,null));for(ue in c){var X=c[ue];if(q=x!=null?x[ue]:void 0,c.hasOwnProperty(ue)&&X!==q&&(X!=null||q!=null))if(ue==="style")if(q){for(I in q)!q.hasOwnProperty(I)||X&&X.hasOwnProperty(I)||(s||(s={}),s[I]="");for(I in X)X.hasOwnProperty(I)&&q[I]!==X[I]&&(s||(s={}),s[I]=X[I])}else s||(_||(_=[]),_.push(ue,s)),s=X;else ue==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,q=q?q.__html:void 0,X!=null&&q!==X&&(_=_||[]).push(ue,X)):ue==="children"?typeof X!="string"&&typeof X!="number"||(_=_||[]).push(ue,""+X):ue!=="suppressContentEditableWarning"&&ue!=="suppressHydrationWarning"&&(d.hasOwnProperty(ue)?(X!=null&&ue==="onScroll"&&Tt("scroll",e),_||q===X||(_=[])):(_=_||[]).push(ue,X))}s&&(_=_||[]).push("style",s);var ue=_;(n.updateQueue=ue)&&(n.flags|=4)}},$h=function(e,n,s,c){s!==c&&(n.flags|=4)};function Oa(e,n){if(!Vt)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function kn(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,c=0;if(n)for(var x=e.child;x!==null;)s|=x.lanes|x.childLanes,c|=x.subtreeFlags&14680064,c|=x.flags&14680064,x.return=e,x=x.sibling;else for(x=e.child;x!==null;)s|=x.lanes|x.childLanes,c|=x.subtreeFlags,c|=x.flags,x.return=e,x=x.sibling;return e.subtreeFlags|=c,e.childLanes=s,n}function uv(e,n,s){var c=n.pendingProps;switch(Sd(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kn(n),null;case 1:return zn(n.type)&&Zl(),kn(n),null;case 3:return c=n.stateNode,Ns(),Ot(jn),Ot(Cn),zd(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(e===null||e.child===null)&&(Ql(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,kr!==null&&(Af(kr),kr=null))),sf(e,n),kn(n),null;case 5:Od(n);var x=Do(Fa.current);if(s=n.type,e!==null&&n.stateNode!=null)Qh(e,n,s,c,x),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!c){if(n.stateNode===null)throw Error(o(166));return kn(n),null}if(e=Do(Wr.current),Ql(n)){c=n.stateNode,s=n.type;var _=n.memoizedProps;switch(c[fr]=n,c[Gi]=_,e=(n.mode&1)!==0,s){case"dialog":Tt("cancel",c),Tt("close",c);break;case"iframe":case"object":case"embed":Tt("load",c);break;case"video":case"audio":for(x=0;x<Zi.length;x++)Tt(Zi[x],c);break;case"source":Tt("error",c);break;case"img":case"image":case"link":Tt("error",c),Tt("load",c);break;case"details":Tt("toggle",c);break;case"input":dt(c,_),Tt("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!_.multiple},Tt("invalid",c);break;case"textarea":Ct(c,_),Tt("invalid",c)}be(s,_),x=null;for(var I in _)if(_.hasOwnProperty(I)){var q=_[I];I==="children"?typeof q=="string"?c.textContent!==q&&(_.suppressHydrationWarning!==!0&&le(c.textContent,q,e),x=["children",q]):typeof q=="number"&&c.textContent!==""+q&&(_.suppressHydrationWarning!==!0&&le(c.textContent,q,e),x=["children",""+q]):d.hasOwnProperty(I)&&q!=null&&I==="onScroll"&&Tt("scroll",c)}switch(s){case"input":bt(c),gt(c,_,!0);break;case"textarea":bt(c),Et(c);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(c.onclick=xe)}c=x,n.updateQueue=c,c!==null&&(n.flags|=4)}else{I=x.nodeType===9?x:x.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Dt(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=I.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof c.is=="string"?e=I.createElement(s,{is:c.is}):(e=I.createElement(s),s==="select"&&(I=e,c.multiple?I.multiple=!0:c.size&&(I.size=c.size))):e=I.createElementNS(e,s),e[fr]=n,e[Gi]=c,Kh(e,n,!1,!1),n.stateNode=e;e:{switch(I=Re(s,c),s){case"dialog":Tt("cancel",e),Tt("close",e),x=c;break;case"iframe":case"object":case"embed":Tt("load",e),x=c;break;case"video":case"audio":for(x=0;x<Zi.length;x++)Tt(Zi[x],e);x=c;break;case"source":Tt("error",e),x=c;break;case"img":case"image":case"link":Tt("error",e),Tt("load",e),x=c;break;case"details":Tt("toggle",e),x=c;break;case"input":dt(e,c),x=Ze(e,c),Tt("invalid",e);break;case"option":x=c;break;case"select":e._wrapperState={wasMultiple:!!c.multiple},x=Z({},c,{value:void 0}),Tt("invalid",e);break;case"textarea":Ct(e,c),x=He(e,c),Tt("invalid",e);break;default:x=c}be(s,x),q=x;for(_ in q)if(q.hasOwnProperty(_)){var X=q[_];_==="style"?yn(e,X):_==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,X!=null&&Tn(e,X)):_==="children"?typeof X=="string"?(s!=="textarea"||X!=="")&&Kt(e,X):typeof X=="number"&&Kt(e,""+X):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(d.hasOwnProperty(_)?X!=null&&_==="onScroll"&&Tt("scroll",e):X!=null&&S(e,_,X,I))}switch(s){case"input":bt(e),gt(e,c,!1);break;case"textarea":bt(e),Et(e);break;case"option":c.value!=null&&e.setAttribute("value",""+Ae(c.value));break;case"select":e.multiple=!!c.multiple,_=c.value,_!=null?nt(e,!!c.multiple,_,!1):c.defaultValue!=null&&nt(e,!!c.multiple,c.defaultValue,!0);break;default:typeof x.onClick=="function"&&(e.onclick=xe)}switch(s){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return kn(n),null;case 6:if(e&&n.stateNode!=null)$h(e,n,e.memoizedProps,c);else{if(typeof c!="string"&&n.stateNode===null)throw Error(o(166));if(s=Do(Fa.current),Do(Wr.current),Ql(n)){if(c=n.stateNode,s=n.memoizedProps,c[fr]=n,(_=c.nodeValue!==s)&&(e=nr,e!==null))switch(e.tag){case 3:le(c.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&le(c.nodeValue,s,(e.mode&1)!==0)}_&&(n.flags|=4)}else c=(s.nodeType===9?s:s.ownerDocument).createTextNode(c),c[fr]=n,n.stateNode=c}return kn(n),null;case 13:if(Ot(qt),c=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Vt&&rr!==null&&(n.mode&1)!==0&&(n.flags&128)===0)J0(),Ts(),n.flags|=98560,_=!1;else if(_=Ql(n),c!==null&&c.dehydrated!==null){if(e===null){if(!_)throw Error(o(318));if(_=n.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(o(317));_[fr]=n}else Ts(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;kn(n),_=!1}else kr!==null&&(Af(kr),kr=null),_=!0;if(!_)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=s,n):(c=c!==null,c!==(e!==null&&e.memoizedState!==null)&&c&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||(qt.current&1)!==0?ln===0&&(ln=3):yf())),n.updateQueue!==null&&(n.flags|=4),kn(n),null);case 4:return Ns(),sf(e,n),e===null&&Wi(n.stateNode.containerInfo),kn(n),null;case 10:return Fd(n.type._context),kn(n),null;case 17:return zn(n.type)&&Zl(),kn(n),null;case 19:if(Ot(qt),_=n.memoizedState,_===null)return kn(n),null;if(c=(n.flags&128)!==0,I=_.rendering,I===null)if(c)Oa(_,!1);else{if(ln!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(I=tu(e),I!==null){for(n.flags|=128,Oa(_,!1),c=I.updateQueue,c!==null&&(n.updateQueue=c,n.flags|=4),n.subtreeFlags=0,c=s,s=n.child;s!==null;)_=s,e=c,_.flags&=14680066,I=_.alternate,I===null?(_.childLanes=0,_.lanes=e,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=I.childLanes,_.lanes=I.lanes,_.child=I.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=I.memoizedProps,_.memoizedState=I.memoizedState,_.updateQueue=I.updateQueue,_.type=I.type,e=I.dependencies,_.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Lt(qt,qt.current&1|2),n.child}e=e.sibling}_.tail!==null&&Zt()>Os&&(n.flags|=128,c=!0,Oa(_,!1),n.lanes=4194304)}else{if(!c)if(e=tu(I),e!==null){if(n.flags|=128,c=!0,s=e.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),Oa(_,!0),_.tail===null&&_.tailMode==="hidden"&&!I.alternate&&!Vt)return kn(n),null}else 2*Zt()-_.renderingStartTime>Os&&s!==1073741824&&(n.flags|=128,c=!0,Oa(_,!1),n.lanes=4194304);_.isBackwards?(I.sibling=n.child,n.child=I):(s=_.last,s!==null?s.sibling=I:n.child=I,_.last=I)}return _.tail!==null?(n=_.tail,_.rendering=n,_.tail=n.sibling,_.renderingStartTime=Zt(),n.sibling=null,s=qt.current,Lt(qt,c?s&1|2:s&1),n):(kn(n),null);case 22:case 23:return vf(),c=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==c&&(n.flags|=8192),c&&(n.mode&1)!==0?(ir&1073741824)!==0&&(kn(n),n.subtreeFlags&6&&(n.flags|=8192)):kn(n),null;case 24:return null;case 25:return null}throw Error(o(156,n.tag))}function cv(e,n){switch(Sd(n),n.tag){case 1:return zn(n.type)&&Zl(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Ns(),Ot(jn),Ot(Cn),zd(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return Od(n),null;case 13:if(Ot(qt),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(o(340));Ts()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Ot(qt),null;case 4:return Ns(),null;case 10:return Fd(n.type._context),null;case 22:case 23:return vf(),null;case 24:return null;default:return null}}var cu=!1,Sn=!1,dv=typeof WeakSet=="function"?WeakSet:Set,Le=null;function Ms(e,n){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(c){Xt(e,n,c)}else s.current=null}function af(e,n,s){try{s()}catch(c){Xt(e,n,c)}}var Yh=!1;function fv(e,n){if(Pe=vo,e=_a(),wa(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var c=s.getSelection&&s.getSelection();if(c&&c.rangeCount!==0){s=c.anchorNode;var x=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{s.nodeType,_.nodeType}catch{s=null;break e}var I=0,q=-1,X=-1,ue=0,_e=0,we=e,ve=null;t:for(;;){for(var Ne;we!==s||x!==0&&we.nodeType!==3||(q=I+x),we!==_||c!==0&&we.nodeType!==3||(X=I+c),we.nodeType===3&&(I+=we.nodeValue.length),(Ne=we.firstChild)!==null;)ve=we,we=Ne;for(;;){if(we===e)break t;if(ve===s&&++ue===x&&(q=I),ve===_&&++_e===c&&(X=I),(Ne=we.nextSibling)!==null)break;we=ve,ve=we.parentNode}we=Ne}s=q===-1||X===-1?null:{start:q,end:X}}else s=null}s=s||{start:0,end:0}}else s=null;for(We={focusedElem:e,selectionRange:s},vo=!1,Le=n;Le!==null;)if(n=Le,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Le=e;else for(;Le!==null;){n=Le;try{var Me=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(Me!==null){var ze=Me.memoizedProps,en=Me.memoizedState,oe=n.stateNode,ee=oe.getSnapshotBeforeUpdate(n.elementType===n.type?ze:Sr(n.type,ze),en);oe.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:var se=n.stateNode.containerInfo;se.nodeType===1?se.textContent="":se.nodeType===9&&se.documentElement&&se.removeChild(se.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ke){Xt(n,n.return,ke)}if(e=n.sibling,e!==null){e.return=n.return,Le=e;break}Le=n.return}return Me=Yh,Yh=!1,Me}function ja(e,n,s){var c=n.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var x=c=c.next;do{if((x.tag&e)===e){var _=x.destroy;x.destroy=void 0,_!==void 0&&af(n,s,_)}x=x.next}while(x!==c)}}function du(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var c=s.create;s.destroy=c()}s=s.next}while(s!==n)}}function lf(e){var n=e.ref;if(n!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof n=="function"?n(e):n.current=e}}function Xh(e){var n=e.alternate;n!==null&&(e.alternate=null,Xh(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[fr],delete n[Gi],delete n[Ki],delete n[wd],delete n[bd])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Jh(e){return e.tag===5||e.tag===3||e.tag===4}function ep(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Jh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function uf(e,n,s){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?s.nodeType===8?s.parentNode.insertBefore(e,n):s.insertBefore(e,n):(s.nodeType===8?(n=s.parentNode,n.insertBefore(e,s)):(n=s,n.appendChild(e)),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=xe));else if(c!==4&&(e=e.child,e!==null))for(uf(e,n,s),e=e.sibling;e!==null;)uf(e,n,s),e=e.sibling}function cf(e,n,s){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(c!==4&&(e=e.child,e!==null))for(cf(e,n,s),e=e.sibling;e!==null;)cf(e,n,s),e=e.sibling}var gn=null,Br=!1;function eo(e,n,s){for(s=s.child;s!==null;)tp(e,n,s),s=s.sibling}function tp(e,n,s){if(Kn&&typeof Kn.onCommitFiberUnmount=="function")try{Kn.onCommitFiberUnmount(ho,s)}catch{}switch(s.tag){case 5:Sn||Ms(s,n);case 6:var c=gn,x=Br;gn=null,eo(e,n,s),gn=c,Br=x,gn!==null&&(Br?(e=gn,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):gn.removeChild(s.stateNode));break;case 18:gn!==null&&(Br?(e=gn,s=s.stateNode,e.nodeType===8?Pa(e.parentNode,s):e.nodeType===1&&Pa(e,s),Yn(e)):Pa(gn,s.stateNode));break;case 4:c=gn,x=Br,gn=s.stateNode.containerInfo,Br=!0,eo(e,n,s),gn=c,Br=x;break;case 0:case 11:case 14:case 15:if(!Sn&&(c=s.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){x=c=c.next;do{var _=x,I=_.destroy;_=_.tag,I!==void 0&&((_&2)!==0||(_&4)!==0)&&af(s,n,I),x=x.next}while(x!==c)}eo(e,n,s);break;case 1:if(!Sn&&(Ms(s,n),c=s.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=s.memoizedProps,c.state=s.memoizedState,c.componentWillUnmount()}catch(q){Xt(s,n,q)}eo(e,n,s);break;case 21:eo(e,n,s);break;case 22:s.mode&1?(Sn=(c=Sn)||s.memoizedState!==null,eo(e,n,s),Sn=c):eo(e,n,s);break;default:eo(e,n,s)}}function np(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new dv),n.forEach(function(c){var x=_v.bind(null,e,c);s.has(c)||(s.add(c),c.then(x,x))})}}function Pr(e,n){var s=n.deletions;if(s!==null)for(var c=0;c<s.length;c++){var x=s[c];try{var _=e,I=n,q=I;e:for(;q!==null;){switch(q.tag){case 5:gn=q.stateNode,Br=!1;break e;case 3:gn=q.stateNode.containerInfo,Br=!0;break e;case 4:gn=q.stateNode.containerInfo,Br=!0;break e}q=q.return}if(gn===null)throw Error(o(160));tp(_,I,x),gn=null,Br=!1;var X=x.alternate;X!==null&&(X.return=null),x.return=null}catch(ue){Xt(x,n,ue)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)rp(n,e),n=n.sibling}function rp(e,n){var s=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Pr(n,e),Gr(e),c&4){try{ja(3,e,e.return),du(3,e)}catch(ze){Xt(e,e.return,ze)}try{ja(5,e,e.return)}catch(ze){Xt(e,e.return,ze)}}break;case 1:Pr(n,e),Gr(e),c&512&&s!==null&&Ms(s,s.return);break;case 5:if(Pr(n,e),Gr(e),c&512&&s!==null&&Ms(s,s.return),e.flags&32){var x=e.stateNode;try{Kt(x,"")}catch(ze){Xt(e,e.return,ze)}}if(c&4&&(x=e.stateNode,x!=null)){var _=e.memoizedProps,I=s!==null?s.memoizedProps:_,q=e.type,X=e.updateQueue;if(e.updateQueue=null,X!==null)try{q==="input"&&_.type==="radio"&&_.name!=null&&Mt(x,_),Re(q,I);var ue=Re(q,_);for(I=0;I<X.length;I+=2){var _e=X[I],we=X[I+1];_e==="style"?yn(x,we):_e==="dangerouslySetInnerHTML"?Tn(x,we):_e==="children"?Kt(x,we):S(x,_e,we,ue)}switch(q){case"input":at(x,_);break;case"textarea":Ce(x,_);break;case"select":var ve=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!_.multiple;var Ne=_.value;Ne!=null?nt(x,!!_.multiple,Ne,!1):ve!==!!_.multiple&&(_.defaultValue!=null?nt(x,!!_.multiple,_.defaultValue,!0):nt(x,!!_.multiple,_.multiple?[]:"",!1))}x[Gi]=_}catch(ze){Xt(e,e.return,ze)}}break;case 6:if(Pr(n,e),Gr(e),c&4){if(e.stateNode===null)throw Error(o(162));x=e.stateNode,_=e.memoizedProps;try{x.nodeValue=_}catch(ze){Xt(e,e.return,ze)}}break;case 3:if(Pr(n,e),Gr(e),c&4&&s!==null&&s.memoizedState.isDehydrated)try{Yn(n.containerInfo)}catch(ze){Xt(e,e.return,ze)}break;case 4:Pr(n,e),Gr(e);break;case 13:Pr(n,e),Gr(e),x=e.child,x.flags&8192&&(_=x.memoizedState!==null,x.stateNode.isHidden=_,!_||x.alternate!==null&&x.alternate.memoizedState!==null||(hf=Zt())),c&4&&np(e);break;case 22:if(_e=s!==null&&s.memoizedState!==null,e.mode&1?(Sn=(ue=Sn)||_e,Pr(n,e),Sn=ue):Pr(n,e),Gr(e),c&8192){if(ue=e.memoizedState!==null,(e.stateNode.isHidden=ue)&&!_e&&(e.mode&1)!==0)for(Le=e,_e=e.child;_e!==null;){for(we=Le=_e;Le!==null;){switch(ve=Le,Ne=ve.child,ve.tag){case 0:case 11:case 14:case 15:ja(4,ve,ve.return);break;case 1:Ms(ve,ve.return);var Me=ve.stateNode;if(typeof Me.componentWillUnmount=="function"){c=ve,s=ve.return;try{n=c,Me.props=n.memoizedProps,Me.state=n.memoizedState,Me.componentWillUnmount()}catch(ze){Xt(c,s,ze)}}break;case 5:Ms(ve,ve.return);break;case 22:if(ve.memoizedState!==null){sp(we);continue}}Ne!==null?(Ne.return=ve,Le=Ne):sp(we)}_e=_e.sibling}e:for(_e=null,we=e;;){if(we.tag===5){if(_e===null){_e=we;try{x=we.stateNode,ue?(_=x.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(q=we.stateNode,X=we.memoizedProps.style,I=X!=null&&X.hasOwnProperty("display")?X.display:null,q.style.display=qn("display",I))}catch(ze){Xt(e,e.return,ze)}}}else if(we.tag===6){if(_e===null)try{we.stateNode.nodeValue=ue?"":we.memoizedProps}catch(ze){Xt(e,e.return,ze)}}else if((we.tag!==22&&we.tag!==23||we.memoizedState===null||we===e)&&we.child!==null){we.child.return=we,we=we.child;continue}if(we===e)break e;for(;we.sibling===null;){if(we.return===null||we.return===e)break e;_e===we&&(_e=null),we=we.return}_e===we&&(_e=null),we.sibling.return=we.return,we=we.sibling}}break;case 19:Pr(n,e),Gr(e),c&4&&np(e);break;case 21:break;default:Pr(n,e),Gr(e)}}function Gr(e){var n=e.flags;if(n&2){try{e:{for(var s=e.return;s!==null;){if(Jh(s)){var c=s;break e}s=s.return}throw Error(o(160))}switch(c.tag){case 5:var x=c.stateNode;c.flags&32&&(Kt(x,""),c.flags&=-33);var _=ep(e);cf(e,_,x);break;case 3:case 4:var I=c.stateNode.containerInfo,q=ep(e);uf(e,q,I);break;default:throw Error(o(161))}}catch(X){Xt(e,e.return,X)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function hv(e,n,s){Le=e,ip(e)}function ip(e,n,s){for(var c=(e.mode&1)!==0;Le!==null;){var x=Le,_=x.child;if(x.tag===22&&c){var I=x.memoizedState!==null||cu;if(!I){var q=x.alternate,X=q!==null&&q.memoizedState!==null||Sn;q=cu;var ue=Sn;if(cu=I,(Sn=X)&&!ue)for(Le=x;Le!==null;)I=Le,X=I.child,I.tag===22&&I.memoizedState!==null?ap(x):X!==null?(X.return=I,Le=X):ap(x);for(;_!==null;)Le=_,ip(_),_=_.sibling;Le=x,cu=q,Sn=ue}op(e)}else(x.subtreeFlags&8772)!==0&&_!==null?(_.return=x,Le=_):op(e)}}function op(e){for(;Le!==null;){var n=Le;if((n.flags&8772)!==0){var s=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:Sn||du(5,n);break;case 1:var c=n.stateNode;if(n.flags&4&&!Sn)if(s===null)c.componentDidMount();else{var x=n.elementType===n.type?s.memoizedProps:Sr(n.type,s.memoizedProps);c.componentDidUpdate(x,s.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var _=n.updateQueue;_!==null&&sh(n,_,c);break;case 3:var I=n.updateQueue;if(I!==null){if(s=null,n.child!==null)switch(n.child.tag){case 5:s=n.child.stateNode;break;case 1:s=n.child.stateNode}sh(n,I,s)}break;case 5:var q=n.stateNode;if(s===null&&n.flags&4){s=q;var X=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":X.autoFocus&&s.focus();break;case"img":X.src&&(s.src=X.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var ue=n.alternate;if(ue!==null){var _e=ue.memoizedState;if(_e!==null){var we=_e.dehydrated;we!==null&&Yn(we)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}Sn||n.flags&512&&lf(n)}catch(ve){Xt(n,n.return,ve)}}if(n===e){Le=null;break}if(s=n.sibling,s!==null){s.return=n.return,Le=s;break}Le=n.return}}function sp(e){for(;Le!==null;){var n=Le;if(n===e){Le=null;break}var s=n.sibling;if(s!==null){s.return=n.return,Le=s;break}Le=n.return}}function ap(e){for(;Le!==null;){var n=Le;try{switch(n.tag){case 0:case 11:case 15:var s=n.return;try{du(4,n)}catch(X){Xt(n,s,X)}break;case 1:var c=n.stateNode;if(typeof c.componentDidMount=="function"){var x=n.return;try{c.componentDidMount()}catch(X){Xt(n,x,X)}}var _=n.return;try{lf(n)}catch(X){Xt(n,_,X)}break;case 5:var I=n.return;try{lf(n)}catch(X){Xt(n,I,X)}}}catch(X){Xt(n,n.return,X)}if(n===e){Le=null;break}var q=n.sibling;if(q!==null){q.return=n.return,Le=q;break}Le=n.return}}var pv=Math.ceil,fu=N.ReactCurrentDispatcher,df=N.ReactCurrentOwner,Ar=N.ReactCurrentBatchConfig,_t=0,fn=null,rn=null,An=0,ir=0,Is=Qi(0),ln=0,za=null,Fo=0,hu=0,ff=0,Ha=null,Vn=null,hf=0,Os=1/0,yi=null,pu=!1,pf=null,to=null,mu=!1,no=null,gu=0,Va=0,mf=null,Au=-1,xu=0;function Ln(){return(_t&6)!==0?Zt():Au!==-1?Au:Au=Zt()}function ro(e){return(e.mode&1)===0?1:(_t&2)!==0&&An!==0?An&-An:Yx.transition!==null?(xu===0&&(xu=_l()),xu):(e=At,e!==0||(e=window.event,e=e===void 0?16:pt(e.type)),e)}function Tr(e,n,s,c){if(50<Va)throw Va=0,mf=null,Error(o(185));Qn(e,s,c),((_t&2)===0||e!==fn)&&(e===fn&&((_t&2)===0&&(hu|=s),ln===4&&io(e,An)),Un(e,c),s===1&&_t===0&&(n.mode&1)===0&&(Os=Zt()+500,ql&&Yi()))}function Un(e,n){var s=e.callbackNode;is(e,n);var c=Nt(e,e===fn?An:0);if(c===0)s!==null&&ra(s),e.callbackNode=null,e.callbackPriority=0;else if(n=c&-c,e.callbackPriority!==n){if(s!=null&&ra(s),n===1)e.tag===0?$x(up.bind(null,e)):K0(up.bind(null,e)),bn(function(){(_t&6)===0&&Yi()}),s=null;else{switch(Ri(c)){case 1:s=ia;break;case 4:s=yl;break;case 16:s=ns;break;case 536870912:s=Bi;break;default:s=ns}s=Ap(s,lp.bind(null,e))}e.callbackPriority=n,e.callbackNode=s}}function lp(e,n){if(Au=-1,xu=0,(_t&6)!==0)throw Error(o(327));var s=e.callbackNode;if(js()&&e.callbackNode!==s)return null;var c=Nt(e,e===fn?An:0);if(c===0)return null;if((c&30)!==0||(c&e.expiredLanes)!==0||n)n=vu(e,c);else{n=c;var x=_t;_t|=2;var _=dp();(fn!==e||An!==n)&&(yi=null,Os=Zt()+500,Lo(e,n));do try{Av();break}catch(q){cp(e,q)}while(!0);Rd(),fu.current=_,_t=x,rn!==null?n=0:(fn=null,An=0,n=ln)}if(n!==0){if(n===2&&(x=_n(e),x!==0&&(c=x,n=gf(e,x))),n===1)throw s=za,Lo(e,0),io(e,c),Un(e,Zt()),s;if(n===6)io(e,c);else{if(x=e.current.alternate,(c&30)===0&&!mv(x)&&(n=vu(e,c),n===2&&(_=_n(e),_!==0&&(c=_,n=gf(e,_))),n===1))throw s=za,Lo(e,0),io(e,c),Un(e,Zt()),s;switch(e.finishedWork=x,e.finishedLanes=c,n){case 0:case 1:throw Error(o(345));case 2:Mo(e,Vn,yi);break;case 3:if(io(e,c),(c&130023424)===c&&(n=hf+500-Zt(),10<n)){if(Nt(e,0)!==0)break;if(x=e.suspendedLanes,(x&c)!==c){Ln(),e.pingedLanes|=e.suspendedLanes&x;break}e.timeoutHandle=sn(Mo.bind(null,e,Vn,yi),n);break}Mo(e,Vn,yi);break;case 4:if(io(e,c),(c&4194240)===c)break;for(n=e.eventTimes,x=-1;0<c;){var I=31-rt(c);_=1<<I,I=n[I],I>x&&(x=I),c&=~_}if(c=x,c=Zt()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*pv(c/1960))-c,10<c){e.timeoutHandle=sn(Mo.bind(null,e,Vn,yi),c);break}Mo(e,Vn,yi);break;case 5:Mo(e,Vn,yi);break;default:throw Error(o(329))}}}return Un(e,Zt()),e.callbackNode===s?lp.bind(null,e):null}function gf(e,n){var s=Ha;return e.current.memoizedState.isDehydrated&&(Lo(e,n).flags|=256),e=vu(e,n),e!==2&&(n=Vn,Vn=s,n!==null&&Af(n)),e}function Af(e){Vn===null?Vn=e:Vn.push.apply(Vn,e)}function mv(e){for(var n=e;;){if(n.flags&16384){var s=n.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var c=0;c<s.length;c++){var x=s[c],_=x.getSnapshot;x=x.value;try{if(!er(_(),x))return!1}catch{return!1}}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function io(e,n){for(n&=~ff,n&=~hu,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var s=31-rt(n),c=1<<s;e[s]=-1,n&=~c}}function up(e){if((_t&6)!==0)throw Error(o(327));js();var n=Nt(e,0);if((n&1)===0)return Un(e,Zt()),null;var s=vu(e,n);if(e.tag!==0&&s===2){var c=_n(e);c!==0&&(n=c,s=gf(e,c))}if(s===1)throw s=za,Lo(e,0),io(e,n),Un(e,Zt()),s;if(s===6)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,Mo(e,Vn,yi),Un(e,Zt()),null}function xf(e,n){var s=_t;_t|=1;try{return e(n)}finally{_t=s,_t===0&&(Os=Zt()+500,ql&&Yi())}}function No(e){no!==null&&no.tag===0&&(_t&6)===0&&js();var n=_t;_t|=1;var s=Ar.transition,c=At;try{if(Ar.transition=null,At=1,e)return e()}finally{At=c,Ar.transition=s,_t=n,(_t&6)===0&&Yi()}}function vf(){ir=Is.current,Ot(Is)}function Lo(e,n){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,nn(s)),rn!==null)for(s=rn.return;s!==null;){var c=s;switch(Sd(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Zl();break;case 3:Ns(),Ot(jn),Ot(Cn),zd();break;case 5:Od(c);break;case 4:Ns();break;case 13:Ot(qt);break;case 19:Ot(qt);break;case 10:Fd(c.type._context);break;case 22:case 23:vf()}s=s.return}if(fn=e,rn=e=oo(e.current,null),An=ir=n,ln=0,za=null,ff=hu=Fo=0,Vn=Ha=null,To!==null){for(n=0;n<To.length;n++)if(s=To[n],c=s.interleaved,c!==null){s.interleaved=null;var x=c.next,_=s.pending;if(_!==null){var I=_.next;_.next=x,c.next=I}s.pending=c}To=null}return e}function cp(e,n){do{var s=rn;try{if(Rd(),nu.current=su,ru){for(var c=Gt.memoizedState;c!==null;){var x=c.queue;x!==null&&(x.pending=null),c=c.next}ru=!1}if(Ro=0,dn=an=Gt=null,Na=!1,La=0,df.current=null,s===null||s.return===null){ln=1,za=n,rn=null;break}e:{var _=e,I=s.return,q=s,X=n;if(n=An,q.flags|=32768,X!==null&&typeof X=="object"&&typeof X.then=="function"){var ue=X,_e=q,we=_e.tag;if((_e.mode&1)===0&&(we===0||we===11||we===15)){var ve=_e.alternate;ve?(_e.updateQueue=ve.updateQueue,_e.memoizedState=ve.memoizedState,_e.lanes=ve.lanes):(_e.updateQueue=null,_e.memoizedState=null)}var Ne=Lh(I);if(Ne!==null){Ne.flags&=-257,Mh(Ne,I,q,_,n),Ne.mode&1&&Nh(_,ue,n),n=Ne,X=ue;var Me=n.updateQueue;if(Me===null){var ze=new Set;ze.add(X),n.updateQueue=ze}else Me.add(X);break e}else{if((n&1)===0){Nh(_,ue,n),yf();break e}X=Error(o(426))}}else if(Vt&&q.mode&1){var en=Lh(I);if(en!==null){(en.flags&65536)===0&&(en.flags|=256),Mh(en,I,q,_,n),Td(Ls(X,q));break e}}_=X=Ls(X,q),ln!==4&&(ln=2),Ha===null?Ha=[_]:Ha.push(_),_=I;do{switch(_.tag){case 3:_.flags|=65536,n&=-n,_.lanes|=n;var oe=Rh(_,X,n);oh(_,oe);break e;case 1:q=X;var ee=_.type,se=_.stateNode;if((_.flags&128)===0&&(typeof ee.getDerivedStateFromError=="function"||se!==null&&typeof se.componentDidCatch=="function"&&(to===null||!to.has(se)))){_.flags|=65536,n&=-n,_.lanes|=n;var ke=Fh(_,q,n);oh(_,ke);break e}}_=_.return}while(_!==null)}hp(s)}catch(Ve){n=Ve,rn===s&&s!==null&&(rn=s=s.return);continue}break}while(!0)}function dp(){var e=fu.current;return fu.current=su,e===null?su:e}function yf(){(ln===0||ln===3||ln===2)&&(ln=4),fn===null||(Fo&268435455)===0&&(hu&268435455)===0||io(fn,An)}function vu(e,n){var s=_t;_t|=2;var c=dp();(fn!==e||An!==n)&&(yi=null,Lo(e,n));do try{gv();break}catch(x){cp(e,x)}while(!0);if(Rd(),_t=s,fu.current=c,rn!==null)throw Error(o(261));return fn=null,An=0,ln}function gv(){for(;rn!==null;)fp(rn)}function Av(){for(;rn!==null&&!sd();)fp(rn)}function fp(e){var n=gp(e.alternate,e,ir);e.memoizedProps=e.pendingProps,n===null?hp(e):rn=n,df.current=null}function hp(e){var n=e;do{var s=n.alternate;if(e=n.return,(n.flags&32768)===0){if(s=uv(s,n,ir),s!==null){rn=s;return}}else{if(s=cv(s,n),s!==null){s.flags&=32767,rn=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ln=6,rn=null;return}}if(n=n.sibling,n!==null){rn=n;return}rn=n=e}while(n!==null);ln===0&&(ln=5)}function Mo(e,n,s){var c=At,x=Ar.transition;try{Ar.transition=null,At=1,xv(e,n,s,c)}finally{Ar.transition=x,At=c}return null}function xv(e,n,s,c){do js();while(no!==null);if((_t&6)!==0)throw Error(o(327));s=e.finishedWork;var x=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var _=s.lanes|s.childLanes;if(Yt(e,_),e===fn&&(rn=fn=null,An=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||mu||(mu=!0,Ap(ns,function(){return js(),null})),_=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||_){_=Ar.transition,Ar.transition=null;var I=At;At=1;var q=_t;_t|=4,df.current=null,fv(e,s),rp(s,e),cr(We),vo=!!Pe,We=Pe=null,e.current=s,hv(s),ts(),_t=q,At=I,Ar.transition=_}else e.current=s;if(mu&&(mu=!1,no=e,gu=x),_=e.pendingLanes,_===0&&(to=null),po(s.stateNode),Un(e,Zt()),n!==null)for(c=e.onRecoverableError,s=0;s<n.length;s++)x=n[s],c(x.value,{componentStack:x.stack,digest:x.digest});if(pu)throw pu=!1,e=pf,pf=null,e;return(gu&1)!==0&&e.tag!==0&&js(),_=e.pendingLanes,(_&1)!==0?e===mf?Va++:(Va=0,mf=e):Va=0,Yi(),null}function js(){if(no!==null){var e=Ri(gu),n=Ar.transition,s=At;try{if(Ar.transition=null,At=16>e?16:e,no===null)var c=!1;else{if(e=no,no=null,gu=0,(_t&6)!==0)throw Error(o(331));var x=_t;for(_t|=4,Le=e.current;Le!==null;){var _=Le,I=_.child;if((Le.flags&16)!==0){var q=_.deletions;if(q!==null){for(var X=0;X<q.length;X++){var ue=q[X];for(Le=ue;Le!==null;){var _e=Le;switch(_e.tag){case 0:case 11:case 15:ja(8,_e,_)}var we=_e.child;if(we!==null)we.return=_e,Le=we;else for(;Le!==null;){_e=Le;var ve=_e.sibling,Ne=_e.return;if(Xh(_e),_e===ue){Le=null;break}if(ve!==null){ve.return=Ne,Le=ve;break}Le=Ne}}}var Me=_.alternate;if(Me!==null){var ze=Me.child;if(ze!==null){Me.child=null;do{var en=ze.sibling;ze.sibling=null,ze=en}while(ze!==null)}}Le=_}}if((_.subtreeFlags&2064)!==0&&I!==null)I.return=_,Le=I;else e:for(;Le!==null;){if(_=Le,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:ja(9,_,_.return)}var oe=_.sibling;if(oe!==null){oe.return=_.return,Le=oe;break e}Le=_.return}}var ee=e.current;for(Le=ee;Le!==null;){I=Le;var se=I.child;if((I.subtreeFlags&2064)!==0&&se!==null)se.return=I,Le=se;else e:for(I=ee;Le!==null;){if(q=Le,(q.flags&2048)!==0)try{switch(q.tag){case 0:case 11:case 15:du(9,q)}}catch(Ve){Xt(q,q.return,Ve)}if(q===I){Le=null;break e}var ke=q.sibling;if(ke!==null){ke.return=q.return,Le=ke;break e}Le=q.return}}if(_t=x,Yi(),Kn&&typeof Kn.onPostCommitFiberRoot=="function")try{Kn.onPostCommitFiberRoot(ho,e)}catch{}c=!0}return c}finally{At=s,Ar.transition=n}}return!1}function pp(e,n,s){n=Ls(s,n),n=Rh(e,n,1),e=Ji(e,n,1),n=Ln(),e!==null&&(Qn(e,1,n),Un(e,n))}function Xt(e,n,s){if(e.tag===3)pp(e,e,s);else for(;n!==null;){if(n.tag===3){pp(n,e,s);break}else if(n.tag===1){var c=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(to===null||!to.has(c))){e=Ls(s,e),e=Fh(n,e,1),n=Ji(n,e,1),e=Ln(),n!==null&&(Qn(n,1,e),Un(n,e));break}}n=n.return}}function vv(e,n,s){var c=e.pingCache;c!==null&&c.delete(n),n=Ln(),e.pingedLanes|=e.suspendedLanes&s,fn===e&&(An&s)===s&&(ln===4||ln===3&&(An&130023424)===An&&500>Zt()-hf?Lo(e,0):ff|=s),Un(e,n)}function mp(e,n){n===0&&((e.mode&1)===0?n=1:(n=Ti,Ti<<=1,(Ti&130023424)===0&&(Ti=4194304)));var s=Ln();e=Ai(e,n),e!==null&&(Qn(e,n,s),Un(e,s))}function yv(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),mp(e,s)}function _v(e,n){var s=0;switch(e.tag){case 13:var c=e.stateNode,x=e.memoizedState;x!==null&&(s=x.retryLane);break;case 19:c=e.stateNode;break;default:throw Error(o(314))}c!==null&&c.delete(n),mp(e,s)}var gp;gp=function(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps||jn.current)Hn=!0;else{if((e.lanes&s)===0&&(n.flags&128)===0)return Hn=!1,lv(e,n,s);Hn=(e.flags&131072)!==0}else Hn=!1,Vt&&(n.flags&1048576)!==0&&Q0(n,Kl,n.index);switch(n.lanes=0,n.tag){case 2:var c=n.type;uu(e,n),e=n.pendingProps;var x=Ss(n,Cn.current);Fs(n,s),x=Ud(null,n,c,e,x,s);var _=Zd();return n.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,zn(c)?(_=!0,Wl(n)):_=!1,n.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,Md(n),x.updater=au,n.stateNode=x,x._reactInternals=n,$d(n,c,e,s),n=ef(null,n,c,!0,_,s)):(n.tag=0,Vt&&_&&kd(n),Nn(null,n,x,s),n=n.child),n;case 16:c=n.elementType;e:{switch(uu(e,n),e=n.pendingProps,x=c._init,c=x(c._payload),n.type=c,x=n.tag=bv(c),e=Sr(c,e),x){case 0:n=Jd(null,n,c,e,s);break e;case 1:n=Vh(null,n,c,e,s);break e;case 11:n=Ih(null,n,c,e,s);break e;case 14:n=Oh(null,n,c,Sr(c.type,e),s);break e}throw Error(o(306,c,""))}return n;case 0:return c=n.type,x=n.pendingProps,x=n.elementType===c?x:Sr(c,x),Jd(e,n,c,x,s);case 1:return c=n.type,x=n.pendingProps,x=n.elementType===c?x:Sr(c,x),Vh(e,n,c,x,s);case 3:e:{if(Uh(n),e===null)throw Error(o(387));c=n.pendingProps,_=n.memoizedState,x=_.element,ih(e,n),eu(n,c,null,s);var I=n.memoizedState;if(c=I.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},n.updateQueue.baseState=_,n.memoizedState=_,n.flags&256){x=Ls(Error(o(423)),n),n=Zh(e,n,c,s,x);break e}else if(c!==x){x=Ls(Error(o(424)),n),n=Zh(e,n,c,s,x);break e}else for(rr=Zr(n.stateNode.containerInfo.firstChild),nr=n,Vt=!0,kr=null,s=nh(n,null,c,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ts(),c===x){n=vi(e,n,s);break e}Nn(e,n,c,s)}n=n.child}return n;case 5:return ah(n),e===null&&Pd(n),c=n.type,x=n.pendingProps,_=e!==null?e.memoizedProps:null,I=x.children,it(c,x)?I=null:_!==null&&it(c,_)&&(n.flags|=32),Hh(e,n),Nn(e,n,I,s),n.child;case 6:return e===null&&Pd(n),null;case 13:return Wh(e,n,s);case 4:return Id(n,n.stateNode.containerInfo),c=n.pendingProps,e===null?n.child=Ds(n,null,c,s):Nn(e,n,c,s),n.child;case 11:return c=n.type,x=n.pendingProps,x=n.elementType===c?x:Sr(c,x),Ih(e,n,c,x,s);case 7:return Nn(e,n,n.pendingProps,s),n.child;case 8:return Nn(e,n,n.pendingProps.children,s),n.child;case 12:return Nn(e,n,n.pendingProps.children,s),n.child;case 10:e:{if(c=n.type._context,x=n.pendingProps,_=n.memoizedProps,I=x.value,Lt(Yl,c._currentValue),c._currentValue=I,_!==null)if(er(_.value,I)){if(_.children===x.children&&!jn.current){n=vi(e,n,s);break e}}else for(_=n.child,_!==null&&(_.return=n);_!==null;){var q=_.dependencies;if(q!==null){I=_.child;for(var X=q.firstContext;X!==null;){if(X.context===c){if(_.tag===1){X=xi(-1,s&-s),X.tag=2;var ue=_.updateQueue;if(ue!==null){ue=ue.shared;var _e=ue.pending;_e===null?X.next=X:(X.next=_e.next,_e.next=X),ue.pending=X}}_.lanes|=s,X=_.alternate,X!==null&&(X.lanes|=s),Nd(_.return,s,n),q.lanes|=s;break}X=X.next}}else if(_.tag===10)I=_.type===n.type?null:_.child;else if(_.tag===18){if(I=_.return,I===null)throw Error(o(341));I.lanes|=s,q=I.alternate,q!==null&&(q.lanes|=s),Nd(I,s,n),I=_.sibling}else I=_.child;if(I!==null)I.return=_;else for(I=_;I!==null;){if(I===n){I=null;break}if(_=I.sibling,_!==null){_.return=I.return,I=_;break}I=I.return}_=I}Nn(e,n,x.children,s),n=n.child}return n;case 9:return x=n.type,c=n.pendingProps.children,Fs(n,s),x=mr(x),c=c(x),n.flags|=1,Nn(e,n,c,s),n.child;case 14:return c=n.type,x=Sr(c,n.pendingProps),x=Sr(c.type,x),Oh(e,n,c,x,s);case 15:return jh(e,n,n.type,n.pendingProps,s);case 17:return c=n.type,x=n.pendingProps,x=n.elementType===c?x:Sr(c,x),uu(e,n),n.tag=1,zn(c)?(e=!0,Wl(n)):e=!1,Fs(n,s),Th(n,c,x),$d(n,c,x,s),ef(null,n,c,!0,e,s);case 19:return Gh(e,n,s);case 22:return zh(e,n,s)}throw Error(o(156,n.tag))};function Ap(e,n){return vl(e,n)}function wv(e,n,s,c){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xr(e,n,s,c){return new wv(e,n,s,c)}function _f(e){return e=e.prototype,!(!e||!e.isReactComponent)}function bv(e){if(typeof e=="function")return _f(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ne)return 11;if(e===fe)return 14}return 2}function oo(e,n){var s=e.alternate;return s===null?(s=xr(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function yu(e,n,s,c,x,_){var I=2;if(c=e,typeof e=="function")_f(e)&&(I=1);else if(typeof e=="string")I=5;else e:switch(e){case H:return Io(s.children,x,_,n);case j:I=8,x|=8;break;case J:return e=xr(12,s,n,x|2),e.elementType=J,e.lanes=_,e;case Y:return e=xr(13,s,n,x),e.elementType=Y,e.lanes=_,e;case re:return e=xr(19,s,n,x),e.elementType=re,e.lanes=_,e;case he:return _u(s,x,_,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case W:I=10;break e;case U:I=9;break e;case ne:I=11;break e;case fe:I=14;break e;case ae:I=16,c=null;break e}throw Error(o(130,e==null?e:typeof e,""))}return n=xr(I,s,n,x),n.elementType=e,n.type=c,n.lanes=_,n}function Io(e,n,s,c){return e=xr(7,e,c,n),e.lanes=s,e}function _u(e,n,s,c){return e=xr(22,e,c,n),e.elementType=he,e.lanes=s,e.stateNode={isHidden:!1},e}function wf(e,n,s){return e=xr(6,e,null,n),e.lanes=s,e}function bf(e,n,s){return n=xr(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function Cv(e,n,s,c,x){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Di(0),this.expirationTimes=Di(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Di(0),this.identifierPrefix=c,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function Cf(e,n,s,c,x,_,I,q,X){return e=new Cv(e,n,s,q,X),n===1?(n=1,_===!0&&(n|=8)):n=0,_=xr(3,null,null,n),e.current=_,_.stateNode=e,_.memoizedState={element:c,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Md(_),e}function Ev(e,n,s){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:c==null?null:""+c,children:e,containerInfo:n,implementation:s}}function xp(e){if(!e)return $i;e=e._reactInternals;e:{if(Mr(e)!==e||e.tag!==1)throw Error(o(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(zn(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(o(171))}if(e.tag===1){var s=e.type;if(zn(s))return q0(e,s,n)}return n}function vp(e,n,s,c,x,_,I,q,X){return e=Cf(s,c,!0,e,x,_,I,q,X),e.context=xp(null),s=e.current,c=Ln(),x=ro(s),_=xi(c,x),_.callback=n??null,Ji(s,_,x),e.current.lanes=x,Qn(e,x,c),Un(e,c),e}function wu(e,n,s,c){var x=n.current,_=Ln(),I=ro(x);return s=xp(s),n.context===null?n.context=s:n.pendingContext=s,n=xi(_,I),n.payload={element:e},c=c===void 0?null:c,c!==null&&(n.callback=c),e=Ji(x,n,I),e!==null&&(Tr(e,x,I,_),Jl(e,x,I)),I}function bu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function yp(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function Ef(e,n){yp(e,n),(e=e.alternate)&&yp(e,n)}function kv(){return null}var _p=typeof reportError=="function"?reportError:function(e){console.error(e)};function kf(e){this._internalRoot=e}Cu.prototype.render=kf.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(o(409));wu(e,n,null,null)},Cu.prototype.unmount=kf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;No(function(){wu(null,e,null,null)}),n[kt]=null}};function Cu(e){this._internalRoot=e}Cu.prototype.unstable_scheduleHydration=function(e){if(e){var n=as();e={blockedOn:null,target:e,priority:n};for(var s=0;s<on.length&&n!==0&&n<on[s].priority;s++);on.splice(s,0,e),s===0&&ls(e)}};function Sf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Eu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function wp(){}function Sv(e,n,s,c,x){if(x){if(typeof c=="function"){var _=c;c=function(){var ue=bu(I);_.call(ue)}}var I=vp(n,c,e,0,null,!1,!1,"",wp);return e._reactRootContainer=I,e[kt]=I.current,Wi(e.nodeType===8?e.parentNode:e),No(),I}for(;x=e.lastChild;)e.removeChild(x);if(typeof c=="function"){var q=c;c=function(){var ue=bu(X);q.call(ue)}}var X=Cf(e,0,!1,null,null,!1,!1,"",wp);return e._reactRootContainer=X,e[kt]=X.current,Wi(e.nodeType===8?e.parentNode:e),No(function(){wu(n,X,s,c)}),X}function ku(e,n,s,c,x){var _=s._reactRootContainer;if(_){var I=_;if(typeof x=="function"){var q=x;x=function(){var X=bu(I);q.call(X)}}wu(n,I,e,x)}else I=Sv(s,n,e,x,c);return bu(I)}os=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var s=Je(n.pendingLanes);s!==0&&(_r(n,s|1),Un(n,Zt()),(_t&6)===0&&(Os=Zt()+500,Yi()))}break;case 13:No(function(){var c=Ai(e,1);if(c!==null){var x=Ln();Tr(c,e,1,x)}}),Ef(e,1)}},ni=function(e){if(e.tag===13){var n=Ai(e,134217728);if(n!==null){var s=Ln();Tr(n,e,134217728,s)}Ef(e,134217728)}},ss=function(e){if(e.tag===13){var n=ro(e),s=Ai(e,n);if(s!==null){var c=Ln();Tr(s,e,n,c)}Ef(e,n)}},as=function(){return At},mo=function(e,n){var s=At;try{return At=e,n()}finally{At=s}},ge=function(e,n,s){switch(n){case"input":if(at(e,s),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<s.length;n++){var c=s[n];if(c!==e&&c.form===e.form){var x=Es(c);if(!x)throw Error(o(90));ct(c),at(c,x)}}}break;case"textarea":Ce(e,s);break;case"select":n=s.value,n!=null&&nt(e,!!s.multiple,n,!1)}},Rt=xf,zt=No;var Bv={usingClientEntryPoint:!1,Events:[fi,hi,Es,Fe,vt,xf]},Ua={findFiberByHostInstance:di,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Pv={bundleType:Ua.bundleType,version:Ua.version,rendererPackageName:Ua.rendererPackageName,rendererConfig:Ua.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Al(e),e===null?null:e.stateNode},findFiberByHostInstance:Ua.findFiberByHostInstance||kv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Su.isDisabled&&Su.supportsFiber)try{ho=Su.inject(Pv),Kn=Su}catch{}}return Zn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bv,Zn.createPortal=function(e,n){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sf(n))throw Error(o(200));return Ev(e,n,null,s)},Zn.createRoot=function(e,n){if(!Sf(e))throw Error(o(299));var s=!1,c="",x=_p;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onRecoverableError!==void 0&&(x=n.onRecoverableError)),n=Cf(e,1,!1,null,null,s,!1,c,x),e[kt]=n.current,Wi(e.nodeType===8?e.parentNode:e),new kf(n)},Zn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=Al(n),e=e===null?null:e.stateNode,e},Zn.flushSync=function(e){return No(e)},Zn.hydrate=function(e,n,s){if(!Eu(n))throw Error(o(200));return ku(null,e,n,!0,s)},Zn.hydrateRoot=function(e,n,s){if(!Sf(e))throw Error(o(405));var c=s!=null&&s.hydratedSources||null,x=!1,_="",I=_p;if(s!=null&&(s.unstable_strictMode===!0&&(x=!0),s.identifierPrefix!==void 0&&(_=s.identifierPrefix),s.onRecoverableError!==void 0&&(I=s.onRecoverableError)),n=vp(n,null,e,1,s??null,x,!1,_,I),e[kt]=n.current,Wi(e),c)for(e=0;e<c.length;e++)s=c[e],x=s._getVersion,x=x(s._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[s,x]:n.mutableSourceEagerHydrationData.push(s,x);return new Cu(n)},Zn.render=function(e,n,s){if(!Eu(n))throw Error(o(200));return ku(null,e,n,!1,s)},Zn.unmountComponentAtNode=function(e){if(!Eu(e))throw Error(o(40));return e._reactRootContainer?(No(function(){ku(null,null,e,!1,function(){e._reactRootContainer=null,e[kt]=null})}),!0):!1},Zn.unstable_batchedUpdates=xf,Zn.unstable_renderSubtreeIntoContainer=function(e,n,s,c){if(!Eu(s))throw Error(o(200));if(e==null||e._reactInternals===void 0)throw Error(o(38));return ku(e,n,s,!1,c)},Zn.version="18.3.1-next-f1338f8080-20240426",Zn}var Tp;function Ig(){if(Tp)return Df.exports;Tp=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(a){console.error(a)}}return r(),Df.exports=jv(),Df.exports}var Dp;function zv(){if(Dp)return Bu;Dp=1;var r=Ig();return Bu.createRoot=r.createRoot,Bu.hydrateRoot=r.hydrateRoot,Bu}var Hv=zv();const Vv="/api",m0=100;async function ht(r,a){const o=await fetch(`${Vv}${r}`,{...a,headers:{"Content-Type":"application/json",...a==null?void 0:a.headers}});if(!o.ok){const l=await o.text();let d=l||o.statusText;try{const f=JSON.parse(l);f.detail&&(d=f.detail)}catch{}throw new Error(d)}return o.json()}function Uv(r){return r instanceof DOMException&&r.name==="AbortError"?!0:r instanceof Error&&r.name==="AbortError"}const et={getHealth:()=>ht("/health"),getRadioConfig:()=>ht("/radio/config"),updateRadioConfig:r=>ht("/radio/config",{method:"PATCH",body:JSON.stringify(r)}),setPrivateKey:r=>ht("/radio/private-key",{method:"PUT",body:JSON.stringify({private_key:r})}),sendAdvertisement:(r=!0)=>ht(`/radio/advertise?flood=${r}`,{method:"POST"}),rebootRadio:()=>ht("/radio/reboot",{method:"POST"}),reconnectRadio:()=>ht("/radio/reconnect",{method:"POST"}),getContacts:(r=100,a=0)=>ht(`/contacts?limit=${r}&offset=${a}`),getContact:r=>ht(`/contacts/${r}`),syncContacts:()=>ht("/contacts/sync",{method:"POST"}),addContactToRadio:r=>ht(`/contacts/${r}/add-to-radio`,{method:"POST"}),removeContactFromRadio:r=>ht(`/contacts/${r}/remove-from-radio`,{method:"POST"}),deleteContact:r=>ht(`/contacts/${r}`,{method:"DELETE"}),createContact:(r,a,o)=>ht("/contacts",{method:"POST",body:JSON.stringify({public_key:r,name:a,try_historical:o})}),markContactRead:r=>ht(`/contacts/${r}/mark-read`,{method:"POST"}),requestTelemetry:(r,a)=>ht(`/contacts/${r}/telemetry`,{method:"POST",body:JSON.stringify({password:a})}),sendRepeaterCommand:(r,a)=>ht(`/contacts/${r}/command`,{method:"POST",body:JSON.stringify({command:a})}),getChannels:()=>ht("/channels"),getChannel:r=>ht(`/channels/${r}`),createChannel:(r,a)=>ht("/channels",{method:"POST",body:JSON.stringify({name:r,key:a})}),syncChannels:()=>ht("/channels/sync",{method:"POST"}),deleteChannel:r=>ht(`/channels/${r}`,{method:"DELETE"}),markChannelRead:r=>ht(`/channels/${r}/mark-read`,{method:"POST"}),getMessages:(r,a)=>{const o=new URLSearchParams;r!=null&&r.limit&&o.set("limit",r.limit.toString()),r!=null&&r.offset&&o.set("offset",r.offset.toString()),r!=null&&r.type&&o.set("type",r.type),r!=null&&r.conversation_key&&o.set("conversation_key",r.conversation_key);const l=o.toString();return ht(`/messages${l?`?${l}`:""}`,{signal:a})},getMessagesBulk:(r,a=m0)=>ht(`/messages/bulk?limit_per_conversation=${a}`,{method:"POST",body:JSON.stringify(r)}),sendDirectMessage:(r,a)=>ht("/messages/direct",{method:"POST",body:JSON.stringify({destination:r,text:a})}),sendChannelMessage:(r,a)=>ht("/messages/channel",{method:"POST",body:JSON.stringify({channel_key:r,text:a})}),getUndecryptedPacketCount:()=>ht("/packets/undecrypted/count"),decryptHistoricalPackets:r=>ht("/packets/decrypt/historical",{method:"POST",body:JSON.stringify(r)}),runMaintenance:r=>ht("/packets/maintenance",{method:"POST",body:JSON.stringify({prune_undecrypted_days:r})}),markAllRead:()=>ht("/read-state/mark-all-read",{method:"POST"}),getSettings:()=>ht("/settings"),updateSettings:r=>ht("/settings",{method:"PATCH",body:JSON.stringify(r)}),addFavorite:(r,a)=>ht("/settings/favorites",{method:"POST",body:JSON.stringify({type:r,id:a})}),removeFavorite:(r,a)=>ht("/settings/favorites",{method:"DELETE",body:JSON.stringify({type:r,id:a})}),toggleFavorite:(r,a)=>ht("/settings/favorites/toggle",{method:"POST",body:JSON.stringify({type:r,id:a})}),updateLastMessageTime:(r,a)=>ht("/settings/last-message-time",{method:"POST",body:JSON.stringify({state_key:r,timestamp:a})}),migratePreferences:r=>ht("/settings/migrate",{method:"POST",body:JSON.stringify(r)})};function Zv(r){const a=R.useRef(null),o=R.useRef(null),[l,d]=R.useState(!1),f=R.useRef(r);R.useEffect(()=>{f.current=r},[r]);const p=R.useCallback(()=>{const h=window.location.protocol==="https:"?"wss:":"ws:",m=window.location.port==="5173"?"ws://localhost:8000/api/ws":`${h}//${window.location.host}/api/ws`,v=new WebSocket(m);v.onopen=()=>{console.log("WebSocket connected"),d(!0)},v.onclose=()=>{console.log("WebSocket disconnected"),d(!1),a.current=null,o.current=window.setTimeout(()=>{console.log("Attempting WebSocket reconnect..."),p()},3e3)},v.onerror=y=>{console.error("WebSocket error:",y)},v.onmessage=y=>{var w,T,F,k,E,D,B,S,N;try{const M=JSON.parse(y.data),z=f.current;switch(M.type){case"health":(w=z.onHealth)==null||w.call(z,M.data);break;case"contacts":(T=z.onContacts)==null||T.call(z,M.data);break;case"channels":(F=z.onChannels)==null||F.call(z,M.data);break;case"message":(k=z.onMessage)==null||k.call(z,M.data);break;case"contact":(E=z.onContact)==null||E.call(z,M.data);break;case"raw_packet":(D=z.onRawPacket)==null||D.call(z,M.data);break;case"message_acked":{const H=M.data;(B=z.onMessageAcked)==null||B.call(z,H.message_id,H.ack_count,H.paths);break}case"error":(S=z.onError)==null||S.call(z,M.data);break;case"success":(N=z.onSuccess)==null||N.call(z,M.data);break;case"pong":break;default:console.log("Unknown WebSocket message type:",M.type)}}catch(M){console.error("Failed to parse WebSocket message:",M)}},a.current=v},[]);return R.useEffect(()=>{p();const h=setInterval(()=>{var g;((g=a.current)==null?void 0:g.readyState)===WebSocket.OPEN&&a.current.send("ping")},3e4);return()=>{clearInterval(h),o.current&&clearTimeout(o.current),a.current&&a.current.close()}},[p]),{connected:l}}const Oc=2,Wv=300*1e3;function Rp(r){const a=Math.floor(r/3600),o=Math.floor(r%3600/60),l=Math.floor(r%60);return`${a}h${o}m${l}s`}function qv(r){return r<=5?"":r<=10?"":r<=25?"":r<=50?"":""}function Gv(r,a){const l=Math.floor(Date.now()/1e3)-r.startTime,d=a.uptime_seconds-r.uptime,f=a.airtime_seconds-r.txAirtime,p=a.rx_airtime_seconds-r.rxAirtime,h=a.sent_flood-r.sentFlood,g=a.sent_direct-r.sentDirect,m=a.recv_flood-r.recvFlood,v=a.recv_direct-r.recvDirect,y=d>0?f/d*100:0,w=d>0?p/d*100:0,T=h+g,F=m+v,k=T>0?y*(h/T):0,E=T>0?y*(g/T):0,D=F>0?w*(m/F):0,B=F>0?w*(v/F):0,S=qv(y),N=Math.max(0,100-y-w);return["Airtime/Duty Cycle Statistics",`Duration: ${Rp(l)} (uptime delta: ${Rp(d)})`,"",`${S} TX Airtime: ${y.toFixed(3)}% (${T.toLocaleString()} pkts)`,`  Flood: ${k.toFixed(3)}% (${h.toLocaleString()} pkts)`,`  Direct: ${E.toFixed(3)}% (${g.toLocaleString()} pkts)`,"",`RX Airtime: ${w.toFixed(3)}% (${F.toLocaleString()} pkts)`,`  Flood: ${D.toFixed(3)}% (${m.toLocaleString()} pkts)`,`  Direct: ${B.toFixed(3)}% (${v.toLocaleString()} pkts)`,"",`Idle: ${N.toFixed(3)}%`].join(`
`)}function zs(r,a,o){const l=Math.floor(Date.now()/1e3);return{id:-Date.now(),type:"PRIV",conversation_key:r,text:a,sender_timestamp:l,received_at:l,paths:null,txt_type:0,signature:null,outgoing:o,acked:1}}function Kv(r){const a=R.useRef(null),o=R.useRef(null),l=R.useCallback(()=>{o.current!==null&&(clearInterval(o.current),o.current=null),a.current=null},[]),d=R.useCallback(async()=>{const p=a.current;if(!p)return;let h=null,g=null;for(let m=0;m<2;m++)try{h=await et.requestTelemetry(p.conversationId,"");break}catch(v){g=v instanceof Error?v:new Error("Unknown error"),m===0&&await new Promise(y=>setTimeout(y,2e3))}if(h){const m=zs(p.conversationId,Gv(p,h),!1);r(v=>[...v,m])}else{const m=zs(p.conversationId,`Duty cycle poll failed after retry: ${(g==null?void 0:g.message)??"Unknown error"}`,!1);r(v=>[...v,m])}},[r]),f=R.useCallback(async(p,h)=>{const g=p.trim().toLowerCase();if(g==="dutycycle_start"){l();let m=null,v=null;for(let T=0;T<2;T++)try{m=await et.requestTelemetry(h,"");break}catch(F){v=F instanceof Error?F:new Error("Unknown error"),T===0&&await new Promise(k=>setTimeout(k,2e3))}if(!m){const T=zs(h,`Failed to start duty cycle tracking after retry: ${(v==null?void 0:v.message)??"Unknown error"}`,!1);return r(F=>[...F,T]),!0}const y=Math.floor(Date.now()/1e3);a.current={startTime:y,uptime:m.uptime_seconds,txAirtime:m.airtime_seconds,rxAirtime:m.rx_airtime_seconds,sentFlood:m.sent_flood,sentDirect:m.sent_direct,recvFlood:m.recv_flood,recvDirect:m.recv_direct,conversationId:h};const w=zs(h,`Airtime/duty cycle statistics gathering begins at ${y}. Logs will follow every 5 minutes. To stop, run dutycycle_stop or navigate away from this conversation.`,!1);return r(T=>[...T,w]),o.current=window.setInterval(d,Wv),!0}if(g==="dutycycle_stop"){if(a.current&&a.current.conversationId===h){await d(),l();const m=zs(h,"Airtime/duty cycle statistics gathering stopped.",!1);r(v=>[...v,m])}else{const m=zs(h,"Duty cycle tracking is not active.",!1);r(v=>[...v,m])}return!0}return!1},[r,l,d]);return R.useEffect(()=>()=>{o.current!==null&&clearInterval(o.current)},[]),{handleAirtimeCommand:f,stopTracking:l}}function zu(r){if(r<60)return`${r}s`;const a=Math.floor(r/86400),o=Math.floor(r%86400/3600),l=Math.floor(r%3600/60);return a>0?o>0&&l>0?`${a}d${o}h${l}m`:o>0?`${a}d${o}h`:l>0?`${a}d${l}m`:`${a}d`:o>0?l>0?`${o}h${l}m`:`${o}h`:`${l}m`}function Qv(r){return["Telemetry",`Battery Voltage: ${r.battery_volts.toFixed(3)}V`,`Uptime: ${zu(r.uptime_seconds)}`,`TX Airtime: ${zu(r.airtime_seconds)}`,`RX Airtime: ${zu(r.rx_airtime_seconds)}`,"",`Noise Floor: ${r.noise_floor_dbm} dBm`,`Last RSSI: ${r.last_rssi_dbm} dBm`,`Last SNR: ${r.last_snr_db.toFixed(1)} dB`,"",`Packets: ${r.packets_received.toLocaleString()} rx / ${r.packets_sent.toLocaleString()} tx`,`Flood: ${r.recv_flood.toLocaleString()} rx / ${r.sent_flood.toLocaleString()} tx`,`Direct: ${r.recv_direct.toLocaleString()} rx / ${r.sent_direct.toLocaleString()} tx`,`Duplicates: ${r.flood_dups.toLocaleString()} flood / ${r.direct_dups.toLocaleString()} direct`,"",`TX Queue: ${r.tx_queue_len}`,`Debug Flags: ${r.full_events}`].join(`
`)}function $v(r){if(r.length===0)return`Neighbors
No neighbors reported`;const a=[...r].sort((l,d)=>d.snr-l.snr),o=[`Neighbors (${a.length})`];for(const l of a){const d=l.name||l.pubkey_prefix,f=l.snr>=0?`+${l.snr.toFixed(1)}`:l.snr.toFixed(1);o.push(`${d}, ${f} dB [${zu(l.last_heard_seconds)} ago]`)}return o.join(`
`)}function Yv(r){if(r.length===0)return`ACL
No ACL entries`;const a=[`ACL (${r.length})`];for(const o of r){const l=o.name||o.pubkey_prefix;a.push(`${l}: ${o.permission_name}`)}return a.join(`
`)}function jo(r,a,o,l=0){const d=Math.floor(Date.now()/1e3);return{id:-Date.now()-l,type:"PRIV",conversation_key:r,text:a,sender_timestamp:d,received_at:d,paths:null,txt_type:0,signature:null,outgoing:o,acked:1}}function Xv(r,a,o){const[l,d]=R.useState(!1),{handleAirtimeCommand:f,stopTracking:p}=Kv(o);R.useEffect(()=>{d(!1),p()},[r==null?void 0:r.id,p]);const h=R.useMemo(()=>{if(!r||r.type!=="contact")return!1;const v=a.find(y=>y.public_key===r.id);return(v==null?void 0:v.type)===Oc},[r,a]),g=R.useCallback(async v=>{if(!(!r||r.type!=="contact")&&h)try{const y=await et.requestTelemetry(r.id,v),w=jo(r.id,Qv(y),!1,0),T=jo(r.id,$v(y.neighbors),!1,1),F=jo(r.id,Yv(y.acl),!1,2);o(k=>[...k,w,T,F]),d(!0)}catch(y){const w=jo(r.id,`Telemetry request failed: ${y instanceof Error?y.message:"Unknown error"}`,!1,0);o(T=>[...T,w])}},[r,h,o]),m=R.useCallback(async v=>{if(!r||r.type!=="contact"||!h||!l||await f(v,r.id))return;const w=jo(r.id,`> ${v}`,!0,0);o(T=>[...T,w]);try{const T=await et.sendRepeaterCommand(r.id,v),F=jo(r.id,T.response,!1,1);T.sender_timestamp&&(F.sender_timestamp=T.sender_timestamp),o(k=>[...k,F])}catch(T){const F=jo(r.id,`Command failed: ${T instanceof Error?T.message:"Unknown error"}`,!1,1);o(k=>[...k,F])}},[r,h,l,o,f]);return{repeaterLoggedIn:l,activeContactIsRepeater:h,handleTelemetryRequest:g,handleRepeaterCommand:m}}const Og="remoteterm-lastMessageTime",jg="remoteterm-sortOrder";let Tc={};function Fp(r){Tc={...r}}function Np(){return{...Tc}}function Nf(r,a){return Tc[r]=a,{...Tc}}function Rr(r,a){return`${r}-${a}`}function Jv(){try{const r=localStorage.getItem(Og);return r?JSON.parse(r):{}}catch{return{}}}function ey(){try{return localStorage.getItem(jg)==="alpha"?"alpha":"recent"}catch{return"recent"}}function Lp(){try{localStorage.removeItem(Og),localStorage.removeItem(jg)}catch{}}function Mp(r,a){if(!a)return!1;const o=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return new RegExp(`@\\[${o}\\]`,"i").test(r)}function ty(r,a,o,l=null){const[d,f]=R.useState({}),[p,h]=R.useState({}),[g,m]=R.useState(Np),v=R.useRef(l);R.useEffect(()=>{v.current=l},[l]);const y=R.useRef(new Set),w=R.useRef(new Set);R.useEffect(()=>{const D=r.filter(N=>!y.current.has(N.key)),B=a.filter(N=>N.public_key&&!w.current.has(N.public_key));if(D.length===0&&B.length===0)return;D.forEach(N=>y.current.add(N.key)),B.forEach(N=>w.current.add(N.public_key)),(async()=>{const N=[...D.map(M=>({type:"CHAN",conversation_key:M.key})),...B.map(M=>({type:"PRIV",conversation_key:M.public_key}))];if(N.length!==0)try{const M=await et.getMessagesBulk(N,m0),z={},H={},j={};for(const J of D){const W=M[`CHAN:${J.key}`]||[];if(W.length>0){const U=Rr("channel",J.key),ne=J.last_read_at||0,Y=W.filter(fe=>!fe.outgoing&&fe.received_at>ne);Y.length>0&&(z[U]=Y.length,Y.some(fe=>Mp(fe.text,v.current))&&(H[U]=!0));const re=Math.max(...W.map(fe=>fe.received_at));j[U]=re,Nf(U,re)}}for(const J of B){const W=M[`PRIV:${J.public_key}`]||[];if(W.length>0){const U=Rr("contact",J.public_key),ne=J.last_read_at||0,Y=W.filter(fe=>!fe.outgoing&&fe.received_at>ne);Y.length>0&&(z[U]=Y.length,Y.some(fe=>Mp(fe.text,v.current))&&(H[U]=!0));const re=Math.max(...W.map(fe=>fe.received_at));j[U]=re,Nf(U,re)}}Object.keys(z).length>0&&f(J=>({...J,...z})),Object.keys(H).length>0&&h(J=>({...J,...H})),m(Np())}catch(M){console.error("Failed to fetch messages bulk:",M)}})()},[r,a]),R.useEffect(()=>{if(o&&o.type!=="raw"&&o.type!=="map"){const D=Rr(o.type,o.id);f(B=>{if(B[D]){const S={...B};return delete S[D],S}return B}),h(B=>{if(B[D]){const S={...B};return delete S[D],S}return B}),o.type==="channel"?et.markChannelRead(o.id).catch(B=>{console.error("Failed to mark channel as read on server:",B)}):o.type==="contact"&&et.markContactRead(o.id).catch(B=>{console.error("Failed to mark contact as read on server:",B)})}},[o]);const T=R.useCallback((D,B)=>{f(S=>({...S,[D]:(S[D]||0)+1})),B&&h(S=>({...S,[D]:!0}))},[]),F=R.useCallback(()=>{f({}),h({}),et.markAllRead().catch(D=>{console.error("Failed to mark all as read on server:",D)})},[]),k=R.useCallback(D=>{if(D.type==="raw"||D.type==="map")return;const B=Rr(D.type,D.id);f(S=>{if(S[B]){const N={...S};return delete N[B],N}return S}),h(S=>{if(S[B]){const N={...S};return delete N[B],N}return S}),D.type==="channel"?et.markChannelRead(D.id).catch(S=>{console.error("Failed to mark channel as read on server:",S)}):D.type==="contact"&&et.markContactRead(D.id).catch(S=>{console.error("Failed to mark contact as read on server:",S)})},[]),E=R.useCallback(D=>{let B=null;if(D.type==="CHAN"&&D.conversation_key?B=Rr("channel",D.conversation_key):D.type==="PRIV"&&D.conversation_key&&(B=Rr("contact",D.conversation_key)),B){const S=D.received_at||Math.floor(Date.now()/1e3),N=Nf(B,S);m(N)}},[]);return{unreadCounts:d,mentions:p,lastMessageTimes:g,incrementUnread:T,markAllRead:F,markConversationRead:k,trackNewMessage:E}}var g0=Ig();const zg=Ys(g0);function ny(r){if(typeof document>"u")return;let a=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",a.appendChild(o),o.styleSheet?o.styleSheet.cssText=r:o.appendChild(document.createTextNode(r))}const ry=r=>{switch(r){case"success":return sy;case"info":return ly;case"warning":return ay;case"error":return uy;default:return null}},iy=Array(12).fill(0),oy=({visible:r,className:a})=>Ee.createElement("div",{className:["sonner-loading-wrapper",a].filter(Boolean).join(" "),"data-visible":r},Ee.createElement("div",{className:"sonner-spinner"},iy.map((o,l)=>Ee.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${l}`})))),sy=Ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ee.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),ay=Ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ee.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),ly=Ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ee.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),uy=Ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ee.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),cy=Ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ee.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ee.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),dy=()=>{const[r,a]=Ee.useState(document.hidden);return Ee.useEffect(()=>{const o=()=>{a(document.hidden)};return document.addEventListener("visibilitychange",o),()=>window.removeEventListener("visibilitychange",o)},[]),r};let Yf=1;class fy{constructor(){this.subscribe=a=>(this.subscribers.push(a),()=>{const o=this.subscribers.indexOf(a);this.subscribers.splice(o,1)}),this.publish=a=>{this.subscribers.forEach(o=>o(a))},this.addToast=a=>{this.publish(a),this.toasts=[...this.toasts,a]},this.create=a=>{var o;const{message:l,...d}=a,f=typeof(a==null?void 0:a.id)=="number"||((o=a.id)==null?void 0:o.length)>0?a.id:Yf++,p=this.toasts.find(g=>g.id===f),h=a.dismissible===void 0?!0:a.dismissible;return this.dismissedToasts.has(f)&&this.dismissedToasts.delete(f),p?this.toasts=this.toasts.map(g=>g.id===f?(this.publish({...g,...a,id:f,title:l}),{...g,...a,id:f,dismissible:h,title:l}):g):this.addToast({title:l,...d,dismissible:h,id:f}),f},this.dismiss=a=>(a?(this.dismissedToasts.add(a),requestAnimationFrame(()=>this.subscribers.forEach(o=>o({id:a,dismiss:!0})))):this.toasts.forEach(o=>{this.subscribers.forEach(l=>l({id:o.id,dismiss:!0}))}),a),this.message=(a,o)=>this.create({...o,message:a}),this.error=(a,o)=>this.create({...o,message:a,type:"error"}),this.success=(a,o)=>this.create({...o,type:"success",message:a}),this.info=(a,o)=>this.create({...o,type:"info",message:a}),this.warning=(a,o)=>this.create({...o,type:"warning",message:a}),this.loading=(a,o)=>this.create({...o,type:"loading",message:a}),this.promise=(a,o)=>{if(!o)return;let l;o.loading!==void 0&&(l=this.create({...o,promise:a,type:"loading",message:o.loading,description:typeof o.description!="function"?o.description:void 0}));const d=Promise.resolve(a instanceof Function?a():a);let f=l!==void 0,p;const h=d.then(async m=>{if(p=["resolve",m],Ee.isValidElement(m))f=!1,this.create({id:l,type:"default",message:m});else if(py(m)&&!m.ok){f=!1;const y=typeof o.error=="function"?await o.error(`HTTP error! status: ${m.status}`):o.error,w=typeof o.description=="function"?await o.description(`HTTP error! status: ${m.status}`):o.description,F=typeof y=="object"&&!Ee.isValidElement(y)?y:{message:y};this.create({id:l,type:"error",description:w,...F})}else if(m instanceof Error){f=!1;const y=typeof o.error=="function"?await o.error(m):o.error,w=typeof o.description=="function"?await o.description(m):o.description,F=typeof y=="object"&&!Ee.isValidElement(y)?y:{message:y};this.create({id:l,type:"error",description:w,...F})}else if(o.success!==void 0){f=!1;const y=typeof o.success=="function"?await o.success(m):o.success,w=typeof o.description=="function"?await o.description(m):o.description,F=typeof y=="object"&&!Ee.isValidElement(y)?y:{message:y};this.create({id:l,type:"success",description:w,...F})}}).catch(async m=>{if(p=["reject",m],o.error!==void 0){f=!1;const v=typeof o.error=="function"?await o.error(m):o.error,y=typeof o.description=="function"?await o.description(m):o.description,T=typeof v=="object"&&!Ee.isValidElement(v)?v:{message:v};this.create({id:l,type:"error",description:y,...T})}}).finally(()=>{f&&(this.dismiss(l),l=void 0),o.finally==null||o.finally.call(o)}),g=()=>new Promise((m,v)=>h.then(()=>p[0]==="reject"?v(p[1]):m(p[1])).catch(v));return typeof l!="string"&&typeof l!="number"?{unwrap:g}:Object.assign(l,{unwrap:g})},this.custom=(a,o)=>{const l=(o==null?void 0:o.id)||Yf++;return this.create({jsx:a(l),id:l,...o}),l},this.getActiveToasts=()=>this.toasts.filter(a=>!this.dismissedToasts.has(a.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Wn=new fy,hy=(r,a)=>{const o=(a==null?void 0:a.id)||Yf++;return Wn.addToast({title:r,...a,id:o}),o},py=r=>r&&typeof r=="object"&&"ok"in r&&typeof r.ok=="boolean"&&"status"in r&&typeof r.status=="number",my=hy,gy=()=>Wn.toasts,Ay=()=>Wn.getActiveToasts(),xt=Object.assign(my,{success:Wn.success,info:Wn.info,warning:Wn.warning,error:Wn.error,custom:Wn.custom,message:Wn.message,promise:Wn.promise,dismiss:Wn.dismiss,loading:Wn.loading},{getHistory:gy,getToasts:Ay});ny("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Pu(r){return r.label!==void 0}const xy=3,vy="24px",yy="16px",Ip=4e3,_y=356,wy=14,by=45,Cy=200;function Kr(...r){return r.filter(Boolean).join(" ")}function Ey(r){const[a,o]=r.split("-"),l=[];return a&&l.push(a),o&&l.push(o),l}const ky=r=>{var a,o,l,d,f,p,h,g,m;const{invert:v,toast:y,unstyled:w,interacting:T,setHeights:F,visibleToasts:k,heights:E,index:D,toasts:B,expanded:S,removeToast:N,defaultRichColors:M,closeButton:z,style:H,cancelButtonStyle:j,actionButtonStyle:J,className:W="",descriptionClassName:U="",duration:ne,position:Y,gap:re,expandByDefault:fe,classNames:ae,icons:he,closeButtonAriaLabel:G="Close toast"}=r,[pe,Z]=Ee.useState(null),[P,V]=Ee.useState(null),[K,$]=Ee.useState(!1),[ce,de]=Ee.useState(!1),[Se,Ae]=Ee.useState(!1),[Ue,Ye]=Ee.useState(!1),[bt,ct]=Ee.useState(!1),[Be,Ze]=Ee.useState(0),[dt,Mt]=Ee.useState(0),at=Ee.useRef(y.duration||ne||Ip),gt=Ee.useRef(null),qe=Ee.useRef(null),tt=D===0,nt=D+1<=k,He=y.type,Ct=y.dismissible!==!1,Ce=y.className||"",Et=y.descriptionClassName||"",Dt=Ee.useMemo(()=>E.findIndex(Fe=>Fe.toastId===y.id)||0,[E,y.id]),Jt=Ee.useMemo(()=>{var Fe;return(Fe=y.closeButton)!=null?Fe:z},[y.closeButton,z]),Ut=Ee.useMemo(()=>y.duration||ne||Ip,[y.duration,ne]),Tn=Ee.useRef(0),Kt=Ee.useRef(0),Ft=Ee.useRef(0),Qt=Ee.useRef(null),[qn,yn]=Y.split("-"),me=Ee.useMemo(()=>E.reduce((Fe,vt,Rt)=>Rt>=Dt?Fe:Fe+vt.height,0),[E,Dt]),be=dy(),Re=y.invert||v,ot=He==="loading";Kt.current=Ee.useMemo(()=>Dt*re+me,[Dt,me]),Ee.useEffect(()=>{at.current=Ut},[Ut]),Ee.useEffect(()=>{$(!0)},[]),Ee.useEffect(()=>{const Fe=qe.current;if(Fe){const vt=Fe.getBoundingClientRect().height;return Mt(vt),F(Rt=>[{toastId:y.id,height:vt,position:y.position},...Rt]),()=>F(Rt=>Rt.filter(zt=>zt.toastId!==y.id))}},[F,y.id]),Ee.useLayoutEffect(()=>{if(!K)return;const Fe=qe.current,vt=Fe.style.height;Fe.style.height="auto";const Rt=Fe.getBoundingClientRect().height;Fe.style.height=vt,Mt(Rt),F(zt=>zt.find(st=>st.toastId===y.id)?zt.map(st=>st.toastId===y.id?{...st,height:Rt}:st):[{toastId:y.id,height:Rt,position:y.position},...zt])},[K,y.title,y.description,F,y.id,y.jsx,y.action,y.cancel]);const te=Ee.useCallback(()=>{de(!0),Ze(Kt.current),F(Fe=>Fe.filter(vt=>vt.toastId!==y.id)),setTimeout(()=>{N(y)},Cy)},[y,N,F,Kt]);Ee.useEffect(()=>{if(y.promise&&He==="loading"||y.duration===1/0||y.type==="loading")return;let Fe;return S||T||be?(()=>{if(Ft.current<Tn.current){const zt=new Date().getTime()-Tn.current;at.current=at.current-zt}Ft.current=new Date().getTime()})():(()=>{at.current!==1/0&&(Tn.current=new Date().getTime(),Fe=setTimeout(()=>{y.onAutoClose==null||y.onAutoClose.call(y,y),te()},at.current))})(),()=>clearTimeout(Fe)},[S,T,y,He,be,te]),Ee.useEffect(()=>{y.delete&&(te(),y.onDismiss==null||y.onDismiss.call(y,y))},[te,y.delete]);function ge(){var Fe;if(he!=null&&he.loading){var vt;return Ee.createElement("div",{className:Kr(ae==null?void 0:ae.loader,y==null||(vt=y.classNames)==null?void 0:vt.loader,"sonner-loader"),"data-visible":He==="loading"},he.loading)}return Ee.createElement(oy,{className:Kr(ae==null?void 0:ae.loader,y==null||(Fe=y.classNames)==null?void 0:Fe.loader),visible:He==="loading"})}const ye=y.icon||(he==null?void 0:he[He])||ry(He);var Te,Qe;return Ee.createElement("li",{tabIndex:0,ref:qe,className:Kr(W,Ce,ae==null?void 0:ae.toast,y==null||(a=y.classNames)==null?void 0:a.toast,ae==null?void 0:ae.default,ae==null?void 0:ae[He],y==null||(o=y.classNames)==null?void 0:o[He]),"data-sonner-toast":"","data-rich-colors":(Te=y.richColors)!=null?Te:M,"data-styled":!(y.jsx||y.unstyled||w),"data-mounted":K,"data-promise":!!y.promise,"data-swiped":bt,"data-removed":ce,"data-visible":nt,"data-y-position":qn,"data-x-position":yn,"data-index":D,"data-front":tt,"data-swiping":Se,"data-dismissible":Ct,"data-type":He,"data-invert":Re,"data-swipe-out":Ue,"data-swipe-direction":P,"data-expanded":!!(S||fe&&K),"data-testid":y.testId,style:{"--index":D,"--toasts-before":D,"--z-index":B.length-D,"--offset":`${ce?Be:Kt.current}px`,"--initial-height":fe?"auto":`${dt}px`,...H,...y.style},onDragEnd:()=>{Ae(!1),Z(null),Qt.current=null},onPointerDown:Fe=>{Fe.button!==2&&(ot||!Ct||(gt.current=new Date,Ze(Kt.current),Fe.target.setPointerCapture(Fe.pointerId),Fe.target.tagName!=="BUTTON"&&(Ae(!0),Qt.current={x:Fe.clientX,y:Fe.clientY})))},onPointerUp:()=>{var Fe,vt,Rt;if(Ue||!Ct)return;Qt.current=null;const zt=Number(((Fe=qe.current)==null?void 0:Fe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Mn=Number(((vt=qe.current)==null?void 0:vt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),st=new Date().getTime()-((Rt=gt.current)==null?void 0:Rt.getTime()),Bt=pe==="x"?zt:Mn,Gn=Math.abs(Bt)/st;if(Math.abs(Bt)>=by||Gn>.11){Ze(Kt.current),y.onDismiss==null||y.onDismiss.call(y,y),V(pe==="x"?zt>0?"right":"left":Mn>0?"down":"up"),te(),Ye(!0);return}else{var yt,Ht;(yt=qe.current)==null||yt.style.setProperty("--swipe-amount-x","0px"),(Ht=qe.current)==null||Ht.style.setProperty("--swipe-amount-y","0px")}ct(!1),Ae(!1),Z(null)},onPointerMove:Fe=>{var vt,Rt,zt;if(!Qt.current||!Ct||((vt=window.getSelection())==null?void 0:vt.toString().length)>0)return;const st=Fe.clientY-Qt.current.y,Bt=Fe.clientX-Qt.current.x;var Gn;const yt=(Gn=r.swipeDirections)!=null?Gn:Ey(Y);!pe&&(Math.abs(Bt)>1||Math.abs(st)>1)&&Z(Math.abs(Bt)>Math.abs(st)?"x":"y");let Ht={x:0,y:0};const $t=De=>1/(1.5+Math.abs(De)/20);if(pe==="y"){if(yt.includes("top")||yt.includes("bottom"))if(yt.includes("top")&&st<0||yt.includes("bottom")&&st>0)Ht.y=st;else{const De=st*$t(st);Ht.y=Math.abs(De)<Math.abs(st)?De:st}}else if(pe==="x"&&(yt.includes("left")||yt.includes("right")))if(yt.includes("left")&&Bt<0||yt.includes("right")&&Bt>0)Ht.x=Bt;else{const De=Bt*$t(Bt);Ht.x=Math.abs(De)<Math.abs(Bt)?De:Bt}(Math.abs(Ht.x)>0||Math.abs(Ht.y)>0)&&ct(!0),(Rt=qe.current)==null||Rt.style.setProperty("--swipe-amount-x",`${Ht.x}px`),(zt=qe.current)==null||zt.style.setProperty("--swipe-amount-y",`${Ht.y}px`)}},Jt&&!y.jsx&&He!=="loading"?Ee.createElement("button",{"aria-label":G,"data-disabled":ot,"data-close-button":!0,onClick:ot||!Ct?()=>{}:()=>{te(),y.onDismiss==null||y.onDismiss.call(y,y)},className:Kr(ae==null?void 0:ae.closeButton,y==null||(l=y.classNames)==null?void 0:l.closeButton)},(Qe=he==null?void 0:he.close)!=null?Qe:cy):null,(He||y.icon||y.promise)&&y.icon!==null&&((he==null?void 0:he[He])!==null||y.icon)?Ee.createElement("div",{"data-icon":"",className:Kr(ae==null?void 0:ae.icon,y==null||(d=y.classNames)==null?void 0:d.icon)},y.promise||y.type==="loading"&&!y.icon?y.icon||ge():null,y.type!=="loading"?ye:null):null,Ee.createElement("div",{"data-content":"",className:Kr(ae==null?void 0:ae.content,y==null||(f=y.classNames)==null?void 0:f.content)},Ee.createElement("div",{"data-title":"",className:Kr(ae==null?void 0:ae.title,y==null||(p=y.classNames)==null?void 0:p.title)},y.jsx?y.jsx:typeof y.title=="function"?y.title():y.title),y.description?Ee.createElement("div",{"data-description":"",className:Kr(U,Et,ae==null?void 0:ae.description,y==null||(h=y.classNames)==null?void 0:h.description)},typeof y.description=="function"?y.description():y.description):null),Ee.isValidElement(y.cancel)?y.cancel:y.cancel&&Pu(y.cancel)?Ee.createElement("button",{"data-button":!0,"data-cancel":!0,style:y.cancelButtonStyle||j,onClick:Fe=>{Pu(y.cancel)&&Ct&&(y.cancel.onClick==null||y.cancel.onClick.call(y.cancel,Fe),te())},className:Kr(ae==null?void 0:ae.cancelButton,y==null||(g=y.classNames)==null?void 0:g.cancelButton)},y.cancel.label):null,Ee.isValidElement(y.action)?y.action:y.action&&Pu(y.action)?Ee.createElement("button",{"data-button":!0,"data-action":!0,style:y.actionButtonStyle||J,onClick:Fe=>{Pu(y.action)&&(y.action.onClick==null||y.action.onClick.call(y.action,Fe),!Fe.defaultPrevented&&te())},className:Kr(ae==null?void 0:ae.actionButton,y==null||(m=y.classNames)==null?void 0:m.actionButton)},y.action.label):null)};function Op(){if(typeof window>"u"||typeof document>"u")return"ltr";const r=document.documentElement.getAttribute("dir");return r==="auto"||!r?window.getComputedStyle(document.documentElement).direction:r}function Sy(r,a){const o={};return[r,a].forEach((l,d)=>{const f=d===1,p=f?"--mobile-offset":"--offset",h=f?yy:vy;function g(m){["top","right","bottom","left"].forEach(v=>{o[`${p}-${v}`]=typeof m=="number"?`${m}px`:m})}typeof l=="number"||typeof l=="string"?g(l):typeof l=="object"?["top","right","bottom","left"].forEach(m=>{l[m]===void 0?o[`${p}-${m}`]=h:o[`${p}-${m}`]=typeof l[m]=="number"?`${l[m]}px`:l[m]}):g(h)}),o}const By=Ee.forwardRef(function(a,o){const{id:l,invert:d,position:f="bottom-right",hotkey:p=["altKey","KeyT"],expand:h,closeButton:g,className:m,offset:v,mobileOffset:y,theme:w="light",richColors:T,duration:F,style:k,visibleToasts:E=xy,toastOptions:D,dir:B=Op(),gap:S=wy,icons:N,containerAriaLabel:M="Notifications"}=a,[z,H]=Ee.useState([]),j=Ee.useMemo(()=>l?z.filter(K=>K.toasterId===l):z.filter(K=>!K.toasterId),[z,l]),J=Ee.useMemo(()=>Array.from(new Set([f].concat(j.filter(K=>K.position).map(K=>K.position)))),[j,f]),[W,U]=Ee.useState([]),[ne,Y]=Ee.useState(!1),[re,fe]=Ee.useState(!1),[ae,he]=Ee.useState(w!=="system"?w:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),G=Ee.useRef(null),pe=p.join("+").replace(/Key/g,"").replace(/Digit/g,""),Z=Ee.useRef(null),P=Ee.useRef(!1),V=Ee.useCallback(K=>{H($=>{var ce;return(ce=$.find(de=>de.id===K.id))!=null&&ce.delete||Wn.dismiss(K.id),$.filter(({id:de})=>de!==K.id)})},[]);return Ee.useEffect(()=>Wn.subscribe(K=>{if(K.dismiss){requestAnimationFrame(()=>{H($=>$.map(ce=>ce.id===K.id?{...ce,delete:!0}:ce))});return}setTimeout(()=>{zg.flushSync(()=>{H($=>{const ce=$.findIndex(de=>de.id===K.id);return ce!==-1?[...$.slice(0,ce),{...$[ce],...K},...$.slice(ce+1)]:[K,...$]})})})}),[z]),Ee.useEffect(()=>{if(w!=="system"){he(w);return}if(w==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?he("dark"):he("light")),typeof window>"u")return;const K=window.matchMedia("(prefers-color-scheme: dark)");try{K.addEventListener("change",({matches:$})=>{he($?"dark":"light")})}catch{K.addListener(({matches:ce})=>{try{he(ce?"dark":"light")}catch(de){console.error(de)}})}},[w]),Ee.useEffect(()=>{z.length<=1&&Y(!1)},[z]),Ee.useEffect(()=>{const K=$=>{var ce;if(p.every(Ae=>$[Ae]||$.code===Ae)){var Se;Y(!0),(Se=G.current)==null||Se.focus()}$.code==="Escape"&&(document.activeElement===G.current||(ce=G.current)!=null&&ce.contains(document.activeElement))&&Y(!1)};return document.addEventListener("keydown",K),()=>document.removeEventListener("keydown",K)},[p]),Ee.useEffect(()=>{if(G.current)return()=>{Z.current&&(Z.current.focus({preventScroll:!0}),Z.current=null,P.current=!1)}},[G.current]),Ee.createElement("section",{ref:o,"aria-label":`${M} ${pe}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},J.map((K,$)=>{var ce;const[de,Se]=K.split("-");return j.length?Ee.createElement("ol",{key:K,dir:B==="auto"?Op():B,tabIndex:-1,ref:G,className:m,"data-sonner-toaster":!0,"data-sonner-theme":ae,"data-y-position":de,"data-x-position":Se,style:{"--front-toast-height":`${((ce=W[0])==null?void 0:ce.height)||0}px`,"--width":`${_y}px`,"--gap":`${S}px`,...k,...Sy(v,y)},onBlur:Ae=>{P.current&&!Ae.currentTarget.contains(Ae.relatedTarget)&&(P.current=!1,Z.current&&(Z.current.focus({preventScroll:!0}),Z.current=null))},onFocus:Ae=>{Ae.target instanceof HTMLElement&&Ae.target.dataset.dismissible==="false"||P.current||(P.current=!0,Z.current=Ae.relatedTarget)},onMouseEnter:()=>Y(!0),onMouseMove:()=>Y(!0),onMouseLeave:()=>{re||Y(!1)},onDragEnd:()=>Y(!1),onPointerDown:Ae=>{Ae.target instanceof HTMLElement&&Ae.target.dataset.dismissible==="false"||fe(!0)},onPointerUp:()=>fe(!1)},j.filter(Ae=>!Ae.position&&$===0||Ae.position===K).map((Ae,Ue)=>{var Ye,bt;return Ee.createElement(ky,{key:Ae.id,icons:N,index:Ue,toast:Ae,defaultRichColors:T,duration:(Ye=D==null?void 0:D.duration)!=null?Ye:F,className:D==null?void 0:D.className,descriptionClassName:D==null?void 0:D.descriptionClassName,invert:d,visibleToasts:E,closeButton:(bt=D==null?void 0:D.closeButton)!=null?bt:g,interacting:re,position:K,style:D==null?void 0:D.style,unstyled:D==null?void 0:D.unstyled,classNames:D==null?void 0:D.classNames,cancelButtonStyle:D==null?void 0:D.cancelButtonStyle,actionButtonStyle:D==null?void 0:D.actionButtonStyle,closeButtonAriaLabel:D==null?void 0:D.closeButtonAriaLabel,removeToast:V,toasts:j.filter(ct=>ct.position==Ae.position),heights:W.filter(ct=>ct.position==Ae.position),setHeights:U,expandByDefault:h,gap:S,expanded:ne,swipeDirections:a.swipeDirections})})):null}))}),Py=({...r})=>b.jsx(By,{theme:"dark",className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-card group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground",error:"group-[.toaster]:bg-[#2a1a1a] group-[.toaster]:text-[#e8a0a0] group-[.toaster]:border-[#4a2a2a] [&_[data-description]]:text-[#b08080]"}},...r}),Tu=200;function Hu(r){return`${r.type}-${r.conversation_key}-${r.text}-${r.sender_timestamp}`}function Ty(r){const[a,o]=R.useState([]),[l,d]=R.useState(!1),[f,p]=R.useState(!1),[h,g]=R.useState(!1),m=R.useRef(new Set),v=R.useRef(null),y=R.useRef(null),w=R.useCallback(async(E=!1,D)=>{if(!r||r.type==="raw"){o([]),g(!1);return}const B=r.id;E&&(d(!0),o([]));try{const S=await et.getMessages({type:r.type==="channel"?"CHAN":"PRIV",conversation_key:r.id,limit:Tu},D);if(y.current!==B)return;o(S),m.current.clear();for(const N of S)m.current.add(Hu(N));g(S.length>=Tu)}catch(S){if(Uv(S))return;console.error("Failed to fetch messages:",S),xt.error("Failed to load messages",{description:S instanceof Error?S.message:"Check your connection"})}finally{E&&d(!1)}},[r]),T=R.useCallback(async()=>{if(!(!r||r.type==="raw"||f||!h)){p(!0);try{const E=await et.getMessages({type:r.type==="channel"?"CHAN":"PRIV",conversation_key:r.id,limit:Tu,offset:a.length});if(E.length>0){o(D=>[...D,...E]);for(const D of E)m.current.add(Hu(D))}g(E.length>=Tu)}catch(E){console.error("Failed to fetch older messages:",E),xt.error("Failed to load older messages",{description:E instanceof Error?E.message:"Check your connection"})}finally{p(!1)}}},[r,f,h,a.length]);R.useEffect(()=>{if(v.current&&v.current.abort(),y.current=(r==null?void 0:r.id)??null,!r||r.type==="raw"){o([]),g(!1);return}const E=new AbortController;return v.current=E,w(!0,E.signal),()=>{E.abort()}},[r==null?void 0:r.id,r==null?void 0:r.type]);const F=R.useCallback(E=>{const D=Hu(E);if(m.current.has(D))return console.debug("Duplicate message content ignored:",D.slice(0,50)),!1;if(m.current.add(D),m.current.size>1e3){const B=Array.from(m.current);m.current=new Set(B.slice(-500))}return o(B=>B.some(S=>S.id===E.id)?B:[...B,E]),!0},[]),k=R.useCallback((E,D,B)=>{o(S=>{const N=S.findIndex(M=>M.id===E);if(N>=0){const M=[...S];return M[N]={...S[N],acked:D,...B!==void 0&&{paths:B}},M}return S})},[]);return{messages:a,messagesLoading:l,loadingOlder:f,hasOlderMessages:h,setMessages:o,fetchMessages:w,fetchOlderMessages:T,addMessageIfNew:F,updateMessageAck:k}}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ry=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,o,l)=>l?l.toUpperCase():o.toLowerCase()),jp=r=>{const a=Ry(r);return a.charAt(0).toUpperCase()+a.slice(1)},Hg=(...r)=>r.filter((a,o,l)=>!!a&&a.trim()!==""&&l.indexOf(a)===o).join(" ").trim(),Fy=r=>{for(const a in r)if(a.startsWith("aria-")||a==="role"||a==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ny={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=R.forwardRef(({color:r="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:d="",children:f,iconNode:p,...h},g)=>R.createElement("svg",{ref:g,...Ny,width:a,height:a,stroke:r,strokeWidth:l?Number(o)*24/Number(a):o,className:Hg("lucide",d),...!f&&!Fy(h)&&{"aria-hidden":"true"},...h},[...p.map(([m,v])=>R.createElement(m,v)),...Array.isArray(f)?f:[f]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=(r,a)=>{const o=R.forwardRef(({className:l,...d},f)=>R.createElement(Ly,{ref:f,iconNode:a,className:Hg(`lucide-${Dy(jp(r))}`,`lucide-${r}`,l),...d}));return o.displayName=jp(r),o};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Iy=A0("check",My);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],jy=A0("menu",Oy);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Vg=A0("x",zy);function Hy({health:r,config:a,onSettingsClick:o,onMenuClick:l}){const d=(r==null?void 0:r.radio_connected)??!1,[f,p]=R.useState(!1),h=async()=>{p(!0);try{const g=await et.reconnectRadio();g.connected&&xt.success("Reconnected",{description:g.message})}catch(g){xt.error("Reconnection failed",{description:g instanceof Error?g.message:"Check radio connection and power"})}finally{p(!1)}};return b.jsxs("div",{className:"flex items-center gap-4 px-4 py-2 bg-[#252525] border-b border-[#333] text-xs",children:[l&&b.jsx("button",{onClick:l,className:"md:hidden p-1 bg-transparent border-none text-[#e0e0e0] cursor-pointer","aria-label":"Open menu",children:b.jsx(jy,{className:"h-5 w-5"})}),b.jsx("h1",{className:"text-base font-semibold mr-auto",children:"RemoteTerm"}),b.jsxs("div",{className:"flex items-center gap-1 text-[#888]",children:[b.jsx("div",{className:`w-2 h-2 rounded-full ${d?"bg-[#4caf50]":"bg-[#666]"}`}),b.jsx("span",{className:"hidden lg:inline text-[#e0e0e0]",children:d?"Connected":"Disconnected"})]}),a&&b.jsxs("div",{className:"hidden lg:flex items-center gap-2 text-[#888]",children:[b.jsx("span",{className:"text-[#e0e0e0]",children:a.name||"Unnamed"}),b.jsx("span",{className:"font-mono text-[#888] cursor-pointer hover:text-[#4a9eff]",onClick:()=>{navigator.clipboard.writeText(a.public_key),xt.success("Public key copied!")},title:"Click to copy public key",children:a.public_key.toLowerCase()})]}),!d&&b.jsx("button",{onClick:h,disabled:f,className:"px-3 py-1 bg-[#4a3000] border border-[#6b4500] text-[#ffa500] rounded text-xs cursor-pointer hover:bg-[#5a3a00] disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Reconnecting...":"Reconnect"}),b.jsxs("button",{onClick:o,className:"px-3 py-1 bg-[#333] border border-[#444] text-[#e0e0e0] rounded text-xs cursor-pointer hover:bg-[#444]",children:[b.jsx("span",{role:"img","aria-label":"Settings",children:""})," ","Radio & Config"]})]})}const Vy=12;function Uy(r){return r.slice(0,Vy)}function Ei(r,a){return r||Uy(a)}const Xf=2,Zy={text:"",background:"#444444",textColor:"#ffffff"};function Wy(r){let a=0;for(let o=0;o<r.length;o++){const l=r.charCodeAt(o);a=(a<<5)-a+l,a=a&a}return Math.abs(a)}const qy=/[\u{1F300}-\u{1F9FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]|[\u{1F600}-\u{1F64F}]|[\u{1F680}-\u{1F6FF}]|[\u{1F1E0}-\u{1F1FF}]/u;function Gy(r,a){if(!r)return a.slice(0,2).toUpperCase();const o=r.match(qy);if(o)return o[0];const l=r.match(/[a-zA-Z]/g);if(!l||l.length===0)return a.slice(0,2).toUpperCase();const d=r.indexOf(" ");if(d!==-1){const f=l[0],p=r.slice(d+1).match(/[a-zA-Z]/);if(p)return(f+p[0]).toUpperCase()}return l[0].toUpperCase()}function Ky(r){const a=Wy(r),o=a%360,l=50+(a>>8)%30,d=35+(a>>16)%20,f=`hsl(${o}, ${l}%, ${d}%)`,p=d<45?"#ffffff":"#000000";return{background:f,text:p}}function Qy(r,a,o){if(o===Xf)return Zy;const l=Gy(r,a),d=Ky(a);return{text:l,background:d.background,textColor:d.text}}function Jf({name:r,publicKey:a,size:o=28,contactType:l}){const d=Qy(r,a,l);return b.jsx("div",{className:"flex items-center justify-center rounded-full font-semibold flex-shrink-0 select-none",style:{backgroundColor:d.background,color:d.textColor,width:o,height:o,fontSize:o*.45},children:d.text})}const Ug="remoteterm-favorites";function Ko(r,a,o){return r.some(l=>l.type===a&&l.id===o)}function $y(){try{const r=localStorage.getItem(Ug);return r?JSON.parse(r):[]}catch{return[]}}function zp(){try{localStorage.removeItem(Ug)}catch{}}function Zg(r){var a,o,l="";if(typeof r=="string"||typeof r=="number")l+=r;else if(typeof r=="object")if(Array.isArray(r)){var d=r.length;for(a=0;a<d;a++)r[a]&&(o=Zg(r[a]))&&(l&&(l+=" "),l+=o)}else for(o in r)r[o]&&(l&&(l+=" "),l+=o);return l}function Wg(){for(var r,a,o=0,l="",d=arguments.length;o<d;o++)(r=arguments[o])&&(a=Zg(r))&&(l&&(l+=" "),l+=a);return l}const Yy=(r,a)=>{const o=new Array(r.length+a.length);for(let l=0;l<r.length;l++)o[l]=r[l];for(let l=0;l<a.length;l++)o[r.length+l]=a[l];return o},Xy=(r,a)=>({classGroupId:r,validator:a}),qg=(r=new Map,a=null,o)=>({nextPart:r,validators:a,classGroupId:o}),Dc="-",Hp=[],Jy="arbitrary..",e_=r=>{const a=n_(r),{conflictingClassGroups:o,conflictingClassGroupModifiers:l}=r;return{getClassGroupId:p=>{if(p.startsWith("[")&&p.endsWith("]"))return t_(p);const h=p.split(Dc),g=h[0]===""&&h.length>1?1:0;return Gg(h,g,a)},getConflictingClassGroupIds:(p,h)=>{if(h){const g=l[p],m=o[p];return g?m?Yy(m,g):g:m||Hp}return o[p]||Hp}}},Gg=(r,a,o)=>{if(r.length-a===0)return o.classGroupId;const d=r[a],f=o.nextPart.get(d);if(f){const m=Gg(r,a+1,f);if(m)return m}const p=o.validators;if(p===null)return;const h=a===0?r.join(Dc):r.slice(a).join(Dc),g=p.length;for(let m=0;m<g;m++){const v=p[m];if(v.validator(h))return v.classGroupId}},t_=r=>r.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const a=r.slice(1,-1),o=a.indexOf(":"),l=a.slice(0,o);return l?Jy+l:void 0})(),n_=r=>{const{theme:a,classGroups:o}=r;return r_(o,a)},r_=(r,a)=>{const o=qg();for(const l in r){const d=r[l];x0(d,o,l,a)}return o},x0=(r,a,o,l)=>{const d=r.length;for(let f=0;f<d;f++){const p=r[f];i_(p,a,o,l)}},i_=(r,a,o,l)=>{if(typeof r=="string"){o_(r,a,o);return}if(typeof r=="function"){s_(r,a,o,l);return}a_(r,a,o,l)},o_=(r,a,o)=>{const l=r===""?a:Kg(a,r);l.classGroupId=o},s_=(r,a,o,l)=>{if(l_(r)){x0(r(l),a,o,l);return}a.validators===null&&(a.validators=[]),a.validators.push(Xy(o,r))},a_=(r,a,o,l)=>{const d=Object.entries(r),f=d.length;for(let p=0;p<f;p++){const[h,g]=d[p];x0(g,Kg(a,h),o,l)}},Kg=(r,a)=>{let o=r;const l=a.split(Dc),d=l.length;for(let f=0;f<d;f++){const p=l[f];let h=o.nextPart.get(p);h||(h=qg(),o.nextPart.set(p,h)),o=h}return o},l_=r=>"isThemeGetter"in r&&r.isThemeGetter===!0,u_=r=>{if(r<1)return{get:()=>{},set:()=>{}};let a=0,o=Object.create(null),l=Object.create(null);const d=(f,p)=>{o[f]=p,a++,a>r&&(a=0,l=o,o=Object.create(null))};return{get(f){let p=o[f];if(p!==void 0)return p;if((p=l[f])!==void 0)return d(f,p),p},set(f,p){f in o?o[f]=p:d(f,p)}}},e0="!",Vp=":",c_=[],Up=(r,a,o,l,d)=>({modifiers:r,hasImportantModifier:a,baseClassName:o,maybePostfixModifierPosition:l,isExternal:d}),d_=r=>{const{prefix:a,experimentalParseClassName:o}=r;let l=d=>{const f=[];let p=0,h=0,g=0,m;const v=d.length;for(let k=0;k<v;k++){const E=d[k];if(p===0&&h===0){if(E===Vp){f.push(d.slice(g,k)),g=k+1;continue}if(E==="/"){m=k;continue}}E==="["?p++:E==="]"?p--:E==="("?h++:E===")"&&h--}const y=f.length===0?d:d.slice(g);let w=y,T=!1;y.endsWith(e0)?(w=y.slice(0,-1),T=!0):y.startsWith(e0)&&(w=y.slice(1),T=!0);const F=m&&m>g?m-g:void 0;return Up(f,T,w,F)};if(a){const d=a+Vp,f=l;l=p=>p.startsWith(d)?f(p.slice(d.length)):Up(c_,!1,p,void 0,!0)}if(o){const d=l;l=f=>o({className:f,parseClassName:d})}return l},f_=r=>{const a=new Map;return r.orderSensitiveModifiers.forEach((o,l)=>{a.set(o,1e6+l)}),o=>{const l=[];let d=[];for(let f=0;f<o.length;f++){const p=o[f],h=p[0]==="[",g=a.has(p);h||g?(d.length>0&&(d.sort(),l.push(...d),d=[]),l.push(p)):d.push(p)}return d.length>0&&(d.sort(),l.push(...d)),l}},h_=r=>({cache:u_(r.cacheSize),parseClassName:d_(r),sortModifiers:f_(r),...e_(r)}),p_=/\s+/,m_=(r,a)=>{const{parseClassName:o,getClassGroupId:l,getConflictingClassGroupIds:d,sortModifiers:f}=a,p=[],h=r.trim().split(p_);let g="";for(let m=h.length-1;m>=0;m-=1){const v=h[m],{isExternal:y,modifiers:w,hasImportantModifier:T,baseClassName:F,maybePostfixModifierPosition:k}=o(v);if(y){g=v+(g.length>0?" "+g:g);continue}let E=!!k,D=l(E?F.substring(0,k):F);if(!D){if(!E){g=v+(g.length>0?" "+g:g);continue}if(D=l(F),!D){g=v+(g.length>0?" "+g:g);continue}E=!1}const B=w.length===0?"":w.length===1?w[0]:f(w).join(":"),S=T?B+e0:B,N=S+D;if(p.indexOf(N)>-1)continue;p.push(N);const M=d(D,E);for(let z=0;z<M.length;++z){const H=M[z];p.push(S+H)}g=v+(g.length>0?" "+g:g)}return g},g_=(...r)=>{let a=0,o,l,d="";for(;a<r.length;)(o=r[a++])&&(l=Qg(o))&&(d&&(d+=" "),d+=l);return d},Qg=r=>{if(typeof r=="string")return r;let a,o="";for(let l=0;l<r.length;l++)r[l]&&(a=Qg(r[l]))&&(o&&(o+=" "),o+=a);return o},A_=(r,...a)=>{let o,l,d,f;const p=g=>{const m=a.reduce((v,y)=>y(v),r());return o=h_(m),l=o.cache.get,d=o.cache.set,f=h,h(g)},h=g=>{const m=l(g);if(m)return m;const v=m_(g,o);return d(g,v),v};return f=p,(...g)=>f(g_(...g))},x_=[],un=r=>{const a=o=>o[r]||x_;return a.isThemeGetter=!0,a},$g=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Yg=/^\((?:(\w[\w-]*):)?(.+)\)$/i,v_=/^\d+\/\d+$/,y_=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,__=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,w_=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,b_=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,C_=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Hs=r=>v_.test(r),lt=r=>!!r&&!Number.isNaN(Number(r)),ao=r=>!!r&&Number.isInteger(Number(r)),Lf=r=>r.endsWith("%")&&lt(r.slice(0,-1)),_i=r=>y_.test(r),E_=()=>!0,k_=r=>__.test(r)&&!w_.test(r),Xg=()=>!1,S_=r=>b_.test(r),B_=r=>C_.test(r),P_=r=>!Ie(r)&&!Oe(r),T_=r=>Xs(r,tA,Xg),Ie=r=>$g.test(r),zo=r=>Xs(r,nA,k_),Mf=r=>Xs(r,L_,lt),Zp=r=>Xs(r,Jg,Xg),D_=r=>Xs(r,eA,B_),Du=r=>Xs(r,rA,S_),Oe=r=>Yg.test(r),Wa=r=>Js(r,nA),R_=r=>Js(r,M_),Wp=r=>Js(r,Jg),F_=r=>Js(r,tA),N_=r=>Js(r,eA),Ru=r=>Js(r,rA,!0),Xs=(r,a,o)=>{const l=$g.exec(r);return l?l[1]?a(l[1]):o(l[2]):!1},Js=(r,a,o=!1)=>{const l=Yg.exec(r);return l?l[1]?a(l[1]):o:!1},Jg=r=>r==="position"||r==="percentage",eA=r=>r==="image"||r==="url",tA=r=>r==="length"||r==="size"||r==="bg-size",nA=r=>r==="length",L_=r=>r==="number",M_=r=>r==="family-name",rA=r=>r==="shadow",I_=()=>{const r=un("color"),a=un("font"),o=un("text"),l=un("font-weight"),d=un("tracking"),f=un("leading"),p=un("breakpoint"),h=un("container"),g=un("spacing"),m=un("radius"),v=un("shadow"),y=un("inset-shadow"),w=un("text-shadow"),T=un("drop-shadow"),F=un("blur"),k=un("perspective"),E=un("aspect"),D=un("ease"),B=un("animate"),S=()=>["auto","avoid","all","avoid-page","page","left","right","column"],N=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],M=()=>[...N(),Oe,Ie],z=()=>["auto","hidden","clip","visible","scroll"],H=()=>["auto","contain","none"],j=()=>[Oe,Ie,g],J=()=>[Hs,"full","auto",...j()],W=()=>[ao,"none","subgrid",Oe,Ie],U=()=>["auto",{span:["full",ao,Oe,Ie]},ao,Oe,Ie],ne=()=>[ao,"auto",Oe,Ie],Y=()=>["auto","min","max","fr",Oe,Ie],re=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],fe=()=>["start","end","center","stretch","center-safe","end-safe"],ae=()=>["auto",...j()],he=()=>[Hs,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...j()],G=()=>[r,Oe,Ie],pe=()=>[...N(),Wp,Zp,{position:[Oe,Ie]}],Z=()=>["no-repeat",{repeat:["","x","y","space","round"]}],P=()=>["auto","cover","contain",F_,T_,{size:[Oe,Ie]}],V=()=>[Lf,Wa,zo],K=()=>["","none","full",m,Oe,Ie],$=()=>["",lt,Wa,zo],ce=()=>["solid","dashed","dotted","double"],de=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Se=()=>[lt,Lf,Wp,Zp],Ae=()=>["","none",F,Oe,Ie],Ue=()=>["none",lt,Oe,Ie],Ye=()=>["none",lt,Oe,Ie],bt=()=>[lt,Oe,Ie],ct=()=>[Hs,"full",...j()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[_i],breakpoint:[_i],color:[E_],container:[_i],"drop-shadow":[_i],ease:["in","out","in-out"],font:[P_],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[_i],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[_i],shadow:[_i],spacing:["px",lt],text:[_i],"text-shadow":[_i],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Hs,Ie,Oe,E]}],container:["container"],columns:[{columns:[lt,Ie,Oe,h]}],"break-after":[{"break-after":S()}],"break-before":[{"break-before":S()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:M()}],overflow:[{overflow:z()}],"overflow-x":[{"overflow-x":z()}],"overflow-y":[{"overflow-y":z()}],overscroll:[{overscroll:H()}],"overscroll-x":[{"overscroll-x":H()}],"overscroll-y":[{"overscroll-y":H()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:J()}],"inset-x":[{"inset-x":J()}],"inset-y":[{"inset-y":J()}],start:[{start:J()}],end:[{end:J()}],top:[{top:J()}],right:[{right:J()}],bottom:[{bottom:J()}],left:[{left:J()}],visibility:["visible","invisible","collapse"],z:[{z:[ao,"auto",Oe,Ie]}],basis:[{basis:[Hs,"full","auto",h,...j()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[lt,Hs,"auto","initial","none",Ie]}],grow:[{grow:["",lt,Oe,Ie]}],shrink:[{shrink:["",lt,Oe,Ie]}],order:[{order:[ao,"first","last","none",Oe,Ie]}],"grid-cols":[{"grid-cols":W()}],"col-start-end":[{col:U()}],"col-start":[{"col-start":ne()}],"col-end":[{"col-end":ne()}],"grid-rows":[{"grid-rows":W()}],"row-start-end":[{row:U()}],"row-start":[{"row-start":ne()}],"row-end":[{"row-end":ne()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Y()}],"auto-rows":[{"auto-rows":Y()}],gap:[{gap:j()}],"gap-x":[{"gap-x":j()}],"gap-y":[{"gap-y":j()}],"justify-content":[{justify:[...re(),"normal"]}],"justify-items":[{"justify-items":[...fe(),"normal"]}],"justify-self":[{"justify-self":["auto",...fe()]}],"align-content":[{content:["normal",...re()]}],"align-items":[{items:[...fe(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...fe(),{baseline:["","last"]}]}],"place-content":[{"place-content":re()}],"place-items":[{"place-items":[...fe(),"baseline"]}],"place-self":[{"place-self":["auto",...fe()]}],p:[{p:j()}],px:[{px:j()}],py:[{py:j()}],ps:[{ps:j()}],pe:[{pe:j()}],pt:[{pt:j()}],pr:[{pr:j()}],pb:[{pb:j()}],pl:[{pl:j()}],m:[{m:ae()}],mx:[{mx:ae()}],my:[{my:ae()}],ms:[{ms:ae()}],me:[{me:ae()}],mt:[{mt:ae()}],mr:[{mr:ae()}],mb:[{mb:ae()}],ml:[{ml:ae()}],"space-x":[{"space-x":j()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":j()}],"space-y-reverse":["space-y-reverse"],size:[{size:he()}],w:[{w:[h,"screen",...he()]}],"min-w":[{"min-w":[h,"screen","none",...he()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[p]},...he()]}],h:[{h:["screen","lh",...he()]}],"min-h":[{"min-h":["screen","lh","none",...he()]}],"max-h":[{"max-h":["screen","lh",...he()]}],"font-size":[{text:["base",o,Wa,zo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[l,Oe,Mf]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Lf,Ie]}],"font-family":[{font:[R_,Ie,a]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[d,Oe,Ie]}],"line-clamp":[{"line-clamp":[lt,"none",Oe,Mf]}],leading:[{leading:[f,...j()]}],"list-image":[{"list-image":["none",Oe,Ie]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Oe,Ie]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:G()}],"text-color":[{text:G()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ce(),"wavy"]}],"text-decoration-thickness":[{decoration:[lt,"from-font","auto",Oe,zo]}],"text-decoration-color":[{decoration:G()}],"underline-offset":[{"underline-offset":[lt,"auto",Oe,Ie]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Oe,Ie]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Oe,Ie]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:pe()}],"bg-repeat":[{bg:Z()}],"bg-size":[{bg:P()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ao,Oe,Ie],radial:["",Oe,Ie],conic:[ao,Oe,Ie]},N_,D_]}],"bg-color":[{bg:G()}],"gradient-from-pos":[{from:V()}],"gradient-via-pos":[{via:V()}],"gradient-to-pos":[{to:V()}],"gradient-from":[{from:G()}],"gradient-via":[{via:G()}],"gradient-to":[{to:G()}],rounded:[{rounded:K()}],"rounded-s":[{"rounded-s":K()}],"rounded-e":[{"rounded-e":K()}],"rounded-t":[{"rounded-t":K()}],"rounded-r":[{"rounded-r":K()}],"rounded-b":[{"rounded-b":K()}],"rounded-l":[{"rounded-l":K()}],"rounded-ss":[{"rounded-ss":K()}],"rounded-se":[{"rounded-se":K()}],"rounded-ee":[{"rounded-ee":K()}],"rounded-es":[{"rounded-es":K()}],"rounded-tl":[{"rounded-tl":K()}],"rounded-tr":[{"rounded-tr":K()}],"rounded-br":[{"rounded-br":K()}],"rounded-bl":[{"rounded-bl":K()}],"border-w":[{border:$()}],"border-w-x":[{"border-x":$()}],"border-w-y":[{"border-y":$()}],"border-w-s":[{"border-s":$()}],"border-w-e":[{"border-e":$()}],"border-w-t":[{"border-t":$()}],"border-w-r":[{"border-r":$()}],"border-w-b":[{"border-b":$()}],"border-w-l":[{"border-l":$()}],"divide-x":[{"divide-x":$()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":$()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ce(),"hidden","none"]}],"divide-style":[{divide:[...ce(),"hidden","none"]}],"border-color":[{border:G()}],"border-color-x":[{"border-x":G()}],"border-color-y":[{"border-y":G()}],"border-color-s":[{"border-s":G()}],"border-color-e":[{"border-e":G()}],"border-color-t":[{"border-t":G()}],"border-color-r":[{"border-r":G()}],"border-color-b":[{"border-b":G()}],"border-color-l":[{"border-l":G()}],"divide-color":[{divide:G()}],"outline-style":[{outline:[...ce(),"none","hidden"]}],"outline-offset":[{"outline-offset":[lt,Oe,Ie]}],"outline-w":[{outline:["",lt,Wa,zo]}],"outline-color":[{outline:G()}],shadow:[{shadow:["","none",v,Ru,Du]}],"shadow-color":[{shadow:G()}],"inset-shadow":[{"inset-shadow":["none",y,Ru,Du]}],"inset-shadow-color":[{"inset-shadow":G()}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:G()}],"ring-offset-w":[{"ring-offset":[lt,zo]}],"ring-offset-color":[{"ring-offset":G()}],"inset-ring-w":[{"inset-ring":$()}],"inset-ring-color":[{"inset-ring":G()}],"text-shadow":[{"text-shadow":["none",w,Ru,Du]}],"text-shadow-color":[{"text-shadow":G()}],opacity:[{opacity:[lt,Oe,Ie]}],"mix-blend":[{"mix-blend":[...de(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":de()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[lt]}],"mask-image-linear-from-pos":[{"mask-linear-from":Se()}],"mask-image-linear-to-pos":[{"mask-linear-to":Se()}],"mask-image-linear-from-color":[{"mask-linear-from":G()}],"mask-image-linear-to-color":[{"mask-linear-to":G()}],"mask-image-t-from-pos":[{"mask-t-from":Se()}],"mask-image-t-to-pos":[{"mask-t-to":Se()}],"mask-image-t-from-color":[{"mask-t-from":G()}],"mask-image-t-to-color":[{"mask-t-to":G()}],"mask-image-r-from-pos":[{"mask-r-from":Se()}],"mask-image-r-to-pos":[{"mask-r-to":Se()}],"mask-image-r-from-color":[{"mask-r-from":G()}],"mask-image-r-to-color":[{"mask-r-to":G()}],"mask-image-b-from-pos":[{"mask-b-from":Se()}],"mask-image-b-to-pos":[{"mask-b-to":Se()}],"mask-image-b-from-color":[{"mask-b-from":G()}],"mask-image-b-to-color":[{"mask-b-to":G()}],"mask-image-l-from-pos":[{"mask-l-from":Se()}],"mask-image-l-to-pos":[{"mask-l-to":Se()}],"mask-image-l-from-color":[{"mask-l-from":G()}],"mask-image-l-to-color":[{"mask-l-to":G()}],"mask-image-x-from-pos":[{"mask-x-from":Se()}],"mask-image-x-to-pos":[{"mask-x-to":Se()}],"mask-image-x-from-color":[{"mask-x-from":G()}],"mask-image-x-to-color":[{"mask-x-to":G()}],"mask-image-y-from-pos":[{"mask-y-from":Se()}],"mask-image-y-to-pos":[{"mask-y-to":Se()}],"mask-image-y-from-color":[{"mask-y-from":G()}],"mask-image-y-to-color":[{"mask-y-to":G()}],"mask-image-radial":[{"mask-radial":[Oe,Ie]}],"mask-image-radial-from-pos":[{"mask-radial-from":Se()}],"mask-image-radial-to-pos":[{"mask-radial-to":Se()}],"mask-image-radial-from-color":[{"mask-radial-from":G()}],"mask-image-radial-to-color":[{"mask-radial-to":G()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":N()}],"mask-image-conic-pos":[{"mask-conic":[lt]}],"mask-image-conic-from-pos":[{"mask-conic-from":Se()}],"mask-image-conic-to-pos":[{"mask-conic-to":Se()}],"mask-image-conic-from-color":[{"mask-conic-from":G()}],"mask-image-conic-to-color":[{"mask-conic-to":G()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:pe()}],"mask-repeat":[{mask:Z()}],"mask-size":[{mask:P()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Oe,Ie]}],filter:[{filter:["","none",Oe,Ie]}],blur:[{blur:Ae()}],brightness:[{brightness:[lt,Oe,Ie]}],contrast:[{contrast:[lt,Oe,Ie]}],"drop-shadow":[{"drop-shadow":["","none",T,Ru,Du]}],"drop-shadow-color":[{"drop-shadow":G()}],grayscale:[{grayscale:["",lt,Oe,Ie]}],"hue-rotate":[{"hue-rotate":[lt,Oe,Ie]}],invert:[{invert:["",lt,Oe,Ie]}],saturate:[{saturate:[lt,Oe,Ie]}],sepia:[{sepia:["",lt,Oe,Ie]}],"backdrop-filter":[{"backdrop-filter":["","none",Oe,Ie]}],"backdrop-blur":[{"backdrop-blur":Ae()}],"backdrop-brightness":[{"backdrop-brightness":[lt,Oe,Ie]}],"backdrop-contrast":[{"backdrop-contrast":[lt,Oe,Ie]}],"backdrop-grayscale":[{"backdrop-grayscale":["",lt,Oe,Ie]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[lt,Oe,Ie]}],"backdrop-invert":[{"backdrop-invert":["",lt,Oe,Ie]}],"backdrop-opacity":[{"backdrop-opacity":[lt,Oe,Ie]}],"backdrop-saturate":[{"backdrop-saturate":[lt,Oe,Ie]}],"backdrop-sepia":[{"backdrop-sepia":["",lt,Oe,Ie]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":j()}],"border-spacing-x":[{"border-spacing-x":j()}],"border-spacing-y":[{"border-spacing-y":j()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Oe,Ie]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[lt,"initial",Oe,Ie]}],ease:[{ease:["linear","initial",D,Oe,Ie]}],delay:[{delay:[lt,Oe,Ie]}],animate:[{animate:["none",B,Oe,Ie]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[k,Oe,Ie]}],"perspective-origin":[{"perspective-origin":M()}],rotate:[{rotate:Ue()}],"rotate-x":[{"rotate-x":Ue()}],"rotate-y":[{"rotate-y":Ue()}],"rotate-z":[{"rotate-z":Ue()}],scale:[{scale:Ye()}],"scale-x":[{"scale-x":Ye()}],"scale-y":[{"scale-y":Ye()}],"scale-z":[{"scale-z":Ye()}],"scale-3d":["scale-3d"],skew:[{skew:bt()}],"skew-x":[{"skew-x":bt()}],"skew-y":[{"skew-y":bt()}],transform:[{transform:[Oe,Ie,"","none","gpu","cpu"]}],"transform-origin":[{origin:M()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ct()}],"translate-x":[{"translate-x":ct()}],"translate-y":[{"translate-y":ct()}],"translate-z":[{"translate-z":ct()}],"translate-none":["translate-none"],accent:[{accent:G()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:G()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Oe,Ie]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Oe,Ie]}],fill:[{fill:["none",...G()]}],"stroke-w":[{stroke:[lt,Wa,zo,Mf]}],stroke:[{stroke:["none",...G()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},O_=A_(I_);function ut(...r){return O_(Wg(r))}const tn=R.forwardRef(({className:r,type:a,...o},l)=>b.jsx("input",{type:a,className:ut("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:l,...o}));tn.displayName="Input";function qp(r,a){if(typeof r=="function")return r(a);r!=null&&(r.current=a)}function dl(...r){return a=>{let o=!1;const l=r.map(d=>{const f=qp(d,a);return!o&&typeof f=="function"&&(o=!0),f});if(o)return()=>{for(let d=0;d<l.length;d++){const f=l[d];typeof f=="function"?f():qp(r[d],null)}}}}function vr(...r){return R.useCallback(dl(...r),r)}var j_=Symbol.for("react.lazy"),Rc=p0[" use ".trim().toString()];function z_(r){return typeof r=="object"&&r!==null&&"then"in r}function iA(r){return r!=null&&typeof r=="object"&&"$$typeof"in r&&r.$$typeof===j_&&"_payload"in r&&z_(r._payload)}function v0(r){const a=V_(r),o=R.forwardRef((l,d)=>{let{children:f,...p}=l;iA(f)&&typeof Rc=="function"&&(f=Rc(f._payload));const h=R.Children.toArray(f),g=h.find(Z_);if(g){const m=g.props.children,v=h.map(y=>y===g?R.Children.count(m)>1?R.Children.only(null):R.isValidElement(m)?m.props.children:null:y);return b.jsx(a,{...p,ref:d,children:R.isValidElement(m)?R.cloneElement(m,void 0,v):null})}return b.jsx(a,{...p,ref:d,children:f})});return o.displayName=`${r}.Slot`,o}var H_=v0("Slot");function V_(r){const a=R.forwardRef((o,l)=>{let{children:d,...f}=o;if(iA(d)&&typeof Rc=="function"&&(d=Rc(d._payload)),R.isValidElement(d)){const p=q_(d),h=W_(f,d.props);return d.type!==R.Fragment&&(h.ref=l?dl(l,p):p),R.cloneElement(d,h)}return R.Children.count(d)>1?R.Children.only(null):null});return a.displayName=`${r}.SlotClone`,a}var U_=Symbol("radix.slottable");function Z_(r){return R.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===U_}function W_(r,a){const o={...a};for(const l in a){const d=r[l],f=a[l];/^on[A-Z]/.test(l)?d&&f?o[l]=(...h)=>{const g=f(...h);return d(...h),g}:d&&(o[l]=d):l==="style"?o[l]={...d,...f}:l==="className"&&(o[l]=[d,f].filter(Boolean).join(" "))}return{...r,...o}}function q_(r){var l,d;let a=(l=Object.getOwnPropertyDescriptor(r.props,"ref"))==null?void 0:l.get,o=a&&"isReactWarning"in a&&a.isReactWarning;return o?r.ref:(a=(d=Object.getOwnPropertyDescriptor(r,"ref"))==null?void 0:d.get,o=a&&"isReactWarning"in a&&a.isReactWarning,o?r.props.ref:r.props.ref||r.ref)}const Gp=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,Kp=Wg,y0=(r,a)=>o=>{var l;if((a==null?void 0:a.variants)==null)return Kp(r,o==null?void 0:o.class,o==null?void 0:o.className);const{variants:d,defaultVariants:f}=a,p=Object.keys(d).map(m=>{const v=o==null?void 0:o[m],y=f==null?void 0:f[m];if(v===null)return null;const w=Gp(v)||Gp(y);return d[m][w]}),h=o&&Object.entries(o).reduce((m,v)=>{let[y,w]=v;return w===void 0||(m[y]=w),m},{}),g=a==null||(l=a.compoundVariants)===null||l===void 0?void 0:l.reduce((m,v)=>{let{class:y,className:w,...T}=v;return Object.entries(T).every(F=>{let[k,E]=F;return Array.isArray(E)?E.includes({...f,...h}[k]):{...f,...h}[k]===E})?[...m,y,w]:m},[]);return Kp(r,p,g,o==null?void 0:o.class,o==null?void 0:o.className)},G_=y0("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Pn=R.forwardRef(({className:r,variant:a,size:o,asChild:l=!1,...d},f)=>{const p=l?H_:"button";return b.jsx(p,{className:ut(G_({variant:a,size:o,className:r})),ref:f,...d})});Pn.displayName="Button";function Fu(r){return r>=m0?`${r}+`:`${r}`}function K_({contacts:r,channels:a,activeConversation:o,onSelectConversation:l,onNewMessage:d,lastMessageTimes:f,unreadCounts:p,mentions:h,showCracker:g,crackerRunning:m,onToggleCracker:v,onMarkAllRead:y,favorites:w,sortOrder:T="recent",onSortOrderChange:F}){const k=T,[E,D]=R.useState(""),B=()=>{const Z=k==="alpha"?"recent":"alpha";F==null||F(Z)},S=Z=>{D(""),l(Z)},N=(Z,P)=>(o==null?void 0:o.type)===Z&&(o==null?void 0:o.id)===P,M=(Z,P)=>{const V=Rr(Z,P);return p[V]||0},z=(Z,P)=>{const V=Rr(Z,P);return h[V]||!1},H=(Z,P)=>{const V=Rr(Z,P);return f[V]||0},j=a.reduce((Z,P)=>(Z.some(V=>V.name===P.name)||Z.push(P),Z),[]),J=r.filter(Z=>Z.public_key&&Z.public_key.length>0).sort((Z,P)=>Z.name&&!P.name?-1:!Z.name&&P.name?1:(Z.name||"").localeCompare(P.name||"")).reduce((Z,P)=>(Z.some(V=>V.public_key===P.public_key)||Z.push(P),Z),[]),W=[...j].sort((Z,P)=>{if(Z.name==="Public")return-1;if(P.name==="Public")return 1;if(k==="recent"){const V=H("channel",Z.key),K=H("channel",P.key);if(V&&K)return K-V;if(V&&!K)return-1;if(!V&&K)return 1}return Z.name.localeCompare(P.name)}),U=[...J].sort((Z,P)=>{const V=Z.type===Xf,K=P.type===Xf;if(V&&!K)return 1;if(!V&&K)return-1;if(V&&K)return(Z.name||Z.public_key).localeCompare(P.name||P.public_key);if(k==="recent"){const $=H("contact",Z.public_key),ce=H("contact",P.public_key);if($&&ce)return ce-$;if($&&!ce)return-1;if(!$&&ce)return 1}return(Z.name||Z.public_key).localeCompare(P.name||P.public_key)}),ne=E.toLowerCase().trim(),Y=ne?W.filter(Z=>Z.name.toLowerCase().includes(ne)||Z.key.toLowerCase().includes(ne)):W,re=ne?U.filter(Z=>{var P;return((P=Z.name)==null?void 0:P.toLowerCase().includes(ne))||Z.public_key.toLowerCase().includes(ne)}):U,fe=Y.filter(Z=>Ko(w,"channel",Z.key)),ae=re.filter(Z=>Ko(w,"contact",Z.public_key)),he=Y.filter(Z=>!Ko(w,"channel",Z.key)),G=re.filter(Z=>!Ko(w,"contact",Z.public_key)),pe=[...fe.map(Z=>({type:"channel",channel:Z})),...ae.map(Z=>({type:"contact",contact:Z}))].sort((Z,P)=>{const V=Z.type==="channel"?H("channel",Z.channel.key):H("contact",Z.contact.public_key),K=P.type==="channel"?H("channel",P.channel.key):H("contact",P.contact.public_key);if(V&&K)return K-V;if(V&&!K)return-1;if(!V&&K)return 1;const $=Z.type==="channel"?Z.channel.name:Z.contact.name||Z.contact.public_key,ce=P.type==="channel"?P.channel.name:P.contact.name||P.contact.public_key;return $.localeCompare(ce)});return b.jsxs("div",{className:"sidebar w-60 h-full min-h-0 bg-card border-r border-border flex flex-col",children:[b.jsxs("div",{className:"flex justify-between items-center px-3 py-3 border-b border-border",children:[b.jsx("h2",{className:"text-xs uppercase text-muted-foreground font-medium",children:"Conversations"}),b.jsx(Pn,{variant:"ghost",size:"sm",onClick:d,title:"New Message",className:"h-6 w-6 p-0 text-muted-foreground hover:text-foreground",children:"+"})]}),b.jsxs("div",{className:"relative px-3 py-2 border-b border-border",children:[b.jsx(tn,{type:"text",placeholder:"Search...",value:E,onChange:Z=>D(Z.target.value),className:"h-8 text-sm pr-8"}),E&&b.jsx("button",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground text-lg leading-none",onClick:()=>D(""),title:"Clear search",children:""})]}),b.jsxs("div",{className:"flex-1 overflow-y-auto",children:[!ne&&b.jsxs("div",{className:ut("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",N("raw","raw")&&"bg-accent border-l-primary"),onClick:()=>S({type:"raw",id:"raw",name:"Raw Packet Feed"}),children:[b.jsx("span",{className:"text-muted-foreground text-xs",children:""}),b.jsx("span",{className:"flex-1 truncate",children:"Packet Feed"})]}),!ne&&b.jsxs("div",{className:ut("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",N("map","map")&&"bg-accent border-l-primary"),onClick:()=>S({type:"map",id:"map",name:"Node Map"}),children:[b.jsx("span",{className:"text-muted-foreground text-xs",children:""}),b.jsx("span",{className:"flex-1 truncate",children:"Node Map"})]}),!ne&&b.jsxs("div",{className:ut("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",g&&"bg-accent border-l-primary"),onClick:v,children:[b.jsx("span",{className:"text-muted-foreground text-xs",children:""}),b.jsxs("span",{className:"flex-1 truncate",children:[g?"Hide":"Show"," Room Finder",b.jsxs("span",{className:ut("ml-1 text-xs",m?"text-green-500":"text-muted-foreground"),children:["(",m?"running":"stopped",")"]})]})]}),!ne&&Object.keys(p).length>0&&b.jsxs("div",{className:"px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",onClick:y,children:[b.jsx("span",{className:"text-muted-foreground text-xs",children:""}),b.jsx("span",{className:"flex-1 truncate text-muted-foreground",children:"Mark all as read"})]}),pe.length>0&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"flex justify-between items-center px-3 py-2 pt-3",children:b.jsx("span",{className:"text-[11px] uppercase text-muted-foreground",children:"Favorites"})}),pe.map(Z=>{if(Z.type==="channel"){const P=Z.channel,V=M("channel",P.key),K=z("channel",P.key);return b.jsxs("div",{className:ut("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",N("channel",P.key)&&"bg-accent border-l-primary",V>0&&"[&_.name]:font-bold [&_.name]:text-foreground"),onClick:()=>S({type:"channel",id:P.key,name:P.name}),children:[b.jsx("span",{className:"name flex-1 truncate",children:P.name}),V>0&&b.jsx("span",{className:ut("text-[10px] font-semibold px-1.5 py-0.5 rounded-full min-w-[18px] text-center",K?"bg-destructive text-destructive-foreground":"bg-primary text-primary-foreground"),children:Fu(V)})]},`fav-chan-${P.key}`)}else{const P=Z.contact,V=M("contact",P.public_key),K=z("contact",P.public_key);return b.jsxs("div",{className:ut("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",N("contact",P.public_key)&&"bg-accent border-l-primary",V>0&&"[&_.name]:font-bold [&_.name]:text-foreground"),onClick:()=>S({type:"contact",id:P.public_key,name:Ei(P.name,P.public_key)}),children:[b.jsx(Jf,{name:P.name,publicKey:P.public_key,size:24,contactType:P.type}),b.jsx("span",{className:"name flex-1 truncate",children:Ei(P.name,P.public_key)}),V>0&&b.jsx("span",{className:ut("text-[10px] font-semibold px-1.5 py-0.5 rounded-full min-w-[18px] text-center",K?"bg-destructive text-destructive-foreground":"bg-primary text-primary-foreground"),children:Fu(V)})]},`fav-contact-${P.public_key}`)}})]}),he.length>0&&b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"flex justify-between items-center px-3 py-2 pt-3",children:[b.jsx("span",{className:"text-[11px] uppercase text-muted-foreground",children:"Channels"}),b.jsx("button",{className:"bg-transparent border border-border text-muted-foreground px-1.5 py-0.5 text-[10px] rounded hover:bg-accent hover:text-foreground",onClick:B,title:k==="alpha"?"Sort by recent":"Sort alphabetically",children:k==="alpha"?"A-Z":""})]}),he.map(Z=>{const P=M("channel",Z.key),V=z("channel",Z.key);return b.jsxs("div",{className:ut("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",N("channel",Z.key)&&"bg-accent border-l-primary",P>0&&"[&_.name]:font-bold [&_.name]:text-foreground"),onClick:()=>S({type:"channel",id:Z.key,name:Z.name}),children:[b.jsx("span",{className:"name flex-1 truncate",children:Z.name}),P>0&&b.jsx("span",{className:ut("text-[10px] font-semibold px-1.5 py-0.5 rounded-full min-w-[18px] text-center",V?"bg-destructive text-destructive-foreground":"bg-primary text-primary-foreground"),children:Fu(P)})]},`chan-${Z.key}`)})]}),G.length>0&&b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"flex justify-between items-center px-3 py-2 pt-3",children:[b.jsx("span",{className:"text-[11px] uppercase text-muted-foreground",children:"Contacts"}),he.length===0&&b.jsx("button",{className:"bg-transparent border border-border text-muted-foreground px-1.5 py-0.5 text-[10px] rounded hover:bg-accent hover:text-foreground",onClick:B,title:k==="alpha"?"Sort by recent":"Sort alphabetically",children:k==="alpha"?"A-Z":""})]}),G.map(Z=>{const P=M("contact",Z.public_key),V=z("contact",Z.public_key);return b.jsxs("div",{className:ut("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",N("contact",Z.public_key)&&"bg-accent border-l-primary",P>0&&"[&_.name]:font-bold [&_.name]:text-foreground"),onClick:()=>S({type:"contact",id:Z.public_key,name:Ei(Z.name,Z.public_key)}),children:[b.jsx(Jf,{name:Z.name,publicKey:Z.public_key,size:24,contactType:Z.type}),b.jsx("span",{className:"name flex-1 truncate",children:Ei(Z.name,Z.public_key)}),P>0&&b.jsx("span",{className:ut("text-[10px] font-semibold px-1.5 py-0.5 rounded-full min-w-[18px] text-center",V?"bg-destructive text-destructive-foreground":"bg-primary text-primary-foreground"),children:Fu(P)})]},Z.public_key)})]}),G.length===0&&he.length===0&&pe.length===0&&b.jsx("div",{className:"p-5 text-center text-muted-foreground",children:ne?"No matches found":"No conversations yet"})]})]})}function Qp(r){const a=r.indexOf(": ");if(a>0&&a<50){const o=r.substring(0,a);if(!o.includes(":"))return{sender:o,content:r.substring(a+2)}}return{sender:null,content:r}}function Ks(r){const a=new Date(r*1e3),o=new Date,l=a.toDateString()===o.toDateString(),d=a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return l?d:`${a.toLocaleDateString([],{month:"short",day:"numeric"})} ${d}`}function Q_(r){if(!r||r.length===0)return[];const a=r.toUpperCase(),o=[];for(let l=0;l<a.length;l+=2)l+1<a.length&&o.push(a.slice(l,l+2));return o}function $_(r,a,o=!0){const l=r.toUpperCase();return a.filter(d=>o&&d.type!==Oc?!1:d.public_key.toUpperCase().startsWith(l))}function Fr(r,a,o,l){if(r===null||a===null||o===null||l===null)return null;const d=6371,f=Nu(o-r),p=Nu(l-a),h=Math.sin(f/2)*Math.sin(f/2)+Math.cos(Nu(r))*Math.cos(Nu(o))*Math.sin(p/2)*Math.sin(p/2),g=2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h));return d*g}function Nu(r){return r*Math.PI/180}function St(r,a){return!(r===null||a===null||r===0&&a===0)}function Qo(r){return r<1?`${Math.round(r*1e3)}m`:`${r.toFixed(1)}km`}function Y_(r,a,o){return a===null||o===null?r:[...r].sort((l,d)=>{const f=Fr(a,o,l.lat,l.lon),p=Fr(a,o,d.lat,d.lon);return f===null&&p===null?0:f===null?1:p===null?-1:f-p})}function X_(r){return!r||r.length===0?0:Math.floor(r.length/2)}function J_(r){if(!r||r.length===0)return{display:"",allDirect:!0,hasMultiple:!1};const a=r.map(p=>X_(p.path)).sort((p,h)=>p-h),o=a.every(p=>p===0),l=r.length>1;return{display:a.map(p=>p===0?"d":p.toString()).join("/"),allDirect:o,hasMultiple:l}}function e1(r,a,o,l){var k;const d=Q_(r),f=a.publicKeyOrPrefix.toUpperCase().slice(0,2),p={name:a.name,prefix:f,lat:a.lat,lon:a.lon},h=((k=l==null?void 0:l.public_key)==null?void 0:k.toUpperCase().slice(0,2))||"??",g={name:(l==null?void 0:l.name)||"Unknown",prefix:h,lat:(l==null?void 0:l.lat)??null,lon:(l==null?void 0:l.lon)??null,publicKey:(l==null?void 0:l.public_key)??null},m=[];let v=a.lat,y=a.lon,w=!St(a.lat,a.lon);for(const E of d){const D=$_(E,o,!0),B=Y_(D,v,y);let S=null;const N=B.length===1&&St(B[0].lat,B[0].lon);!w&&N&&(S=Fr(v,y,B[0].lat,B[0].lon)),m.push({prefix:E,matches:B,distanceFromPrev:S}),B.length===0?(w=!0,v=null,y=null):B.length>1?(w=!0,St(B[0].lat,B[0].lon)?(v=B[0].lat,y=B[0].lon):(v=null,y=null)):St(B[0].lat,B[0].lon)?(w=!1,v=B[0].lat,y=B[0].lon):(w=!0,v=null,y=null)}const T=t1(p,m,g),F=!St(p.lat,p.lon)||!St(g.lat,g.lon)||m.some(E=>E.matches.length!==1||!St(E.matches[0].lat,E.matches[0].lon));return{sender:p,hops:m,receiver:g,totalDistances:T,hasGaps:F}}function t1(r,a,o){if(a.length===0){if(!St(r.lat,r.lon)||!St(o.lat,o.lon))return null;const m=Fr(r.lat,r.lon,o.lat,o.lon);return m!==null?[m]:null}let l=r.lat,d=r.lon,f=0;if(!St(l,d)){for(let m=0;m<a.length;m++){const v=a[m];if(v.matches.length===1&&St(v.matches[0].lat,v.matches[0].lon)){l=v.matches[0].lat,d=v.matches[0].lon,f=m+1;break}}if(!St(l,d))return null}let p=0,h=!1,g=-1;for(let m=f;m<a.length;m++){const v=a[m];if(v.matches.length!==1||!St(v.matches[0].lat,v.matches[0].lon)){l=null,d=null;continue}if(l!==null&&d!==null){const y=Fr(l,d,v.matches[0].lat,v.matches[0].lon);y!==null&&(p+=y,h=!0)}l=v.matches[0].lat,d=v.matches[0].lon,g=m}if(g===a.length-1&&l!==null&&d!==null&&St(o.lat,o.lon)){const m=Fr(l,d,o.lat,o.lon);m!==null&&(p+=m,h=!0)}return h?[p]:null}function cn(r,a,{checkForDefaultPrevented:o=!0}={}){return function(d){if(r==null||r(d),o===!1||!d.defaultPrevented)return a==null?void 0:a(d)}}function n1(r,a){const o=R.createContext(a),l=f=>{const{children:p,...h}=f,g=R.useMemo(()=>h,Object.values(h));return b.jsx(o.Provider,{value:g,children:p})};l.displayName=r+"Provider";function d(f){const p=R.useContext(o);if(p)return p;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${r}\``)}return[l,d]}function fl(r,a=[]){let o=[];function l(f,p){const h=R.createContext(p),g=o.length;o=[...o,p];const m=y=>{var D;const{scope:w,children:T,...F}=y,k=((D=w==null?void 0:w[r])==null?void 0:D[g])||h,E=R.useMemo(()=>F,Object.values(F));return b.jsx(k.Provider,{value:E,children:T})};m.displayName=f+"Provider";function v(y,w){var k;const T=((k=w==null?void 0:w[r])==null?void 0:k[g])||h,F=R.useContext(T);if(F)return F;if(p!==void 0)return p;throw new Error(`\`${y}\` must be used within \`${f}\``)}return[m,v]}const d=()=>{const f=o.map(p=>R.createContext(p));return function(h){const g=(h==null?void 0:h[r])||f;return R.useMemo(()=>({[`__scope${r}`]:{...h,[r]:g}}),[h,g])}};return d.scopeName=r,[l,r1(d,...a)]}function r1(...r){const a=r[0];if(r.length===1)return a;const o=()=>{const l=r.map(d=>({useScope:d(),scopeName:d.scopeName}));return function(f){const p=l.reduce((h,{useScope:g,scopeName:m})=>{const y=g(f)[`__scope${m}`];return{...h,...y}},{});return R.useMemo(()=>({[`__scope${a.scopeName}`]:p}),[p])}};return o.scopeName=a.scopeName,o}var Qs=globalThis!=null&&globalThis.document?R.useLayoutEffect:()=>{},i1=p0[" useId ".trim().toString()]||(()=>{}),o1=0;function al(r){const[a,o]=R.useState(i1());return Qs(()=>{o(l=>l??String(o1++))},[r]),a?`radix-${a}`:""}var s1=p0[" useInsertionEffect ".trim().toString()]||Qs;function jc({prop:r,defaultProp:a,onChange:o=()=>{},caller:l}){const[d,f,p]=a1({defaultProp:a,onChange:o}),h=r!==void 0,g=h?r:d;{const v=R.useRef(r!==void 0);R.useEffect(()=>{const y=v.current;y!==h&&console.warn(`${l} is changing from ${y?"controlled":"uncontrolled"} to ${h?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),v.current=h},[h,l])}const m=R.useCallback(v=>{var y;if(h){const w=l1(v)?v(r):v;w!==r&&((y=p.current)==null||y.call(p,w))}else f(v)},[h,r,f,p]);return[g,m]}function a1({defaultProp:r,onChange:a}){const[o,l]=R.useState(r),d=R.useRef(o),f=R.useRef(a);return s1(()=>{f.current=a},[a]),R.useEffect(()=>{var p;d.current!==o&&((p=f.current)==null||p.call(f,o),d.current=o)},[o,d]),[o,l,f]}function l1(r){return typeof r=="function"}function u1(r){const a=c1(r),o=R.forwardRef((l,d)=>{const{children:f,...p}=l,h=R.Children.toArray(f),g=h.find(f1);if(g){const m=g.props.children,v=h.map(y=>y===g?R.Children.count(m)>1?R.Children.only(null):R.isValidElement(m)?m.props.children:null:y);return b.jsx(a,{...p,ref:d,children:R.isValidElement(m)?R.cloneElement(m,void 0,v):null})}return b.jsx(a,{...p,ref:d,children:f})});return o.displayName=`${r}.Slot`,o}function c1(r){const a=R.forwardRef((o,l)=>{const{children:d,...f}=o;if(R.isValidElement(d)){const p=p1(d),h=h1(f,d.props);return d.type!==R.Fragment&&(h.ref=l?dl(l,p):p),R.cloneElement(d,h)}return R.Children.count(d)>1?R.Children.only(null):null});return a.displayName=`${r}.SlotClone`,a}var d1=Symbol("radix.slottable");function f1(r){return R.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===d1}function h1(r,a){const o={...a};for(const l in a){const d=r[l],f=a[l];/^on[A-Z]/.test(l)?d&&f?o[l]=(...h)=>{const g=f(...h);return d(...h),g}:d&&(o[l]=d):l==="style"?o[l]={...d,...f}:l==="className"&&(o[l]=[d,f].filter(Boolean).join(" "))}return{...r,...o}}function p1(r){var l,d;let a=(l=Object.getOwnPropertyDescriptor(r.props,"ref"))==null?void 0:l.get,o=a&&"isReactWarning"in a&&a.isReactWarning;return o?r.ref:(a=(d=Object.getOwnPropertyDescriptor(r,"ref"))==null?void 0:d.get,o=a&&"isReactWarning"in a&&a.isReactWarning,o?r.props.ref:r.props.ref||r.ref)}var m1=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],pn=m1.reduce((r,a)=>{const o=u1(`Primitive.${a}`),l=R.forwardRef((d,f)=>{const{asChild:p,...h}=d,g=p?o:a;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(g,{...h,ref:f})});return l.displayName=`Primitive.${a}`,{...r,[a]:l}},{});function g1(r,a){r&&g0.flushSync(()=>r.dispatchEvent(a))}function $s(r){const a=R.useRef(r);return R.useEffect(()=>{a.current=r}),R.useMemo(()=>(...o)=>{var l;return(l=a.current)==null?void 0:l.call(a,...o)},[])}function A1(r,a=globalThis==null?void 0:globalThis.document){const o=$s(r);R.useEffect(()=>{const l=d=>{d.key==="Escape"&&o(d)};return a.addEventListener("keydown",l,{capture:!0}),()=>a.removeEventListener("keydown",l,{capture:!0})},[o,a])}var x1="DismissableLayer",t0="dismissableLayer.update",v1="dismissableLayer.pointerDownOutside",y1="dismissableLayer.focusOutside",$p,oA=R.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),sA=R.forwardRef((r,a)=>{const{disableOutsidePointerEvents:o=!1,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:p,onDismiss:h,...g}=r,m=R.useContext(oA),[v,y]=R.useState(null),w=(v==null?void 0:v.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,T]=R.useState({}),F=vr(a,H=>y(H)),k=Array.from(m.layers),[E]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),D=k.indexOf(E),B=v?k.indexOf(v):-1,S=m.layersWithOutsidePointerEventsDisabled.size>0,N=B>=D,M=b1(H=>{const j=H.target,J=[...m.branches].some(W=>W.contains(j));!N||J||(d==null||d(H),p==null||p(H),H.defaultPrevented||h==null||h())},w),z=C1(H=>{const j=H.target;[...m.branches].some(W=>W.contains(j))||(f==null||f(H),p==null||p(H),H.defaultPrevented||h==null||h())},w);return A1(H=>{B===m.layers.size-1&&(l==null||l(H),!H.defaultPrevented&&h&&(H.preventDefault(),h()))},w),R.useEffect(()=>{if(v)return o&&(m.layersWithOutsidePointerEventsDisabled.size===0&&($p=w.body.style.pointerEvents,w.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(v)),m.layers.add(v),Yp(),()=>{o&&m.layersWithOutsidePointerEventsDisabled.size===1&&(w.body.style.pointerEvents=$p)}},[v,w,o,m]),R.useEffect(()=>()=>{v&&(m.layers.delete(v),m.layersWithOutsidePointerEventsDisabled.delete(v),Yp())},[v,m]),R.useEffect(()=>{const H=()=>T({});return document.addEventListener(t0,H),()=>document.removeEventListener(t0,H)},[]),b.jsx(pn.div,{...g,ref:F,style:{pointerEvents:S?N?"auto":"none":void 0,...r.style},onFocusCapture:cn(r.onFocusCapture,z.onFocusCapture),onBlurCapture:cn(r.onBlurCapture,z.onBlurCapture),onPointerDownCapture:cn(r.onPointerDownCapture,M.onPointerDownCapture)})});sA.displayName=x1;var _1="DismissableLayerBranch",w1=R.forwardRef((r,a)=>{const o=R.useContext(oA),l=R.useRef(null),d=vr(a,l);return R.useEffect(()=>{const f=l.current;if(f)return o.branches.add(f),()=>{o.branches.delete(f)}},[o.branches]),b.jsx(pn.div,{...r,ref:d})});w1.displayName=_1;function b1(r,a=globalThis==null?void 0:globalThis.document){const o=$s(r),l=R.useRef(!1),d=R.useRef(()=>{});return R.useEffect(()=>{const f=h=>{if(h.target&&!l.current){let g=function(){aA(v1,o,m,{discrete:!0})};const m={originalEvent:h};h.pointerType==="touch"?(a.removeEventListener("click",d.current),d.current=g,a.addEventListener("click",d.current,{once:!0})):g()}else a.removeEventListener("click",d.current);l.current=!1},p=window.setTimeout(()=>{a.addEventListener("pointerdown",f)},0);return()=>{window.clearTimeout(p),a.removeEventListener("pointerdown",f),a.removeEventListener("click",d.current)}},[a,o]),{onPointerDownCapture:()=>l.current=!0}}function C1(r,a=globalThis==null?void 0:globalThis.document){const o=$s(r),l=R.useRef(!1);return R.useEffect(()=>{const d=f=>{f.target&&!l.current&&aA(y1,o,{originalEvent:f},{discrete:!1})};return a.addEventListener("focusin",d),()=>a.removeEventListener("focusin",d)},[a,o]),{onFocusCapture:()=>l.current=!0,onBlurCapture:()=>l.current=!1}}function Yp(){const r=new CustomEvent(t0);document.dispatchEvent(r)}function aA(r,a,o,{discrete:l}){const d=o.originalEvent.target,f=new CustomEvent(r,{bubbles:!1,cancelable:!0,detail:o});a&&d.addEventListener(r,a,{once:!0}),l?g1(d,f):d.dispatchEvent(f)}var If="focusScope.autoFocusOnMount",Of="focusScope.autoFocusOnUnmount",Xp={bubbles:!1,cancelable:!0},E1="FocusScope",lA=R.forwardRef((r,a)=>{const{loop:o=!1,trapped:l=!1,onMountAutoFocus:d,onUnmountAutoFocus:f,...p}=r,[h,g]=R.useState(null),m=$s(d),v=$s(f),y=R.useRef(null),w=vr(a,k=>g(k)),T=R.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;R.useEffect(()=>{if(l){let k=function(S){if(T.paused||!h)return;const N=S.target;h.contains(N)?y.current=N:lo(y.current,{select:!0})},E=function(S){if(T.paused||!h)return;const N=S.relatedTarget;N!==null&&(h.contains(N)||lo(y.current,{select:!0}))},D=function(S){if(document.activeElement===document.body)for(const M of S)M.removedNodes.length>0&&lo(h)};document.addEventListener("focusin",k),document.addEventListener("focusout",E);const B=new MutationObserver(D);return h&&B.observe(h,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",k),document.removeEventListener("focusout",E),B.disconnect()}}},[l,h,T.paused]),R.useEffect(()=>{if(h){em.add(T);const k=document.activeElement;if(!h.contains(k)){const D=new CustomEvent(If,Xp);h.addEventListener(If,m),h.dispatchEvent(D),D.defaultPrevented||(k1(D1(uA(h)),{select:!0}),document.activeElement===k&&lo(h))}return()=>{h.removeEventListener(If,m),setTimeout(()=>{const D=new CustomEvent(Of,Xp);h.addEventListener(Of,v),h.dispatchEvent(D),D.defaultPrevented||lo(k??document.body,{select:!0}),h.removeEventListener(Of,v),em.remove(T)},0)}}},[h,m,v,T]);const F=R.useCallback(k=>{if(!o&&!l||T.paused)return;const E=k.key==="Tab"&&!k.altKey&&!k.ctrlKey&&!k.metaKey,D=document.activeElement;if(E&&D){const B=k.currentTarget,[S,N]=S1(B);S&&N?!k.shiftKey&&D===N?(k.preventDefault(),o&&lo(S,{select:!0})):k.shiftKey&&D===S&&(k.preventDefault(),o&&lo(N,{select:!0})):D===B&&k.preventDefault()}},[o,l,T.paused]);return b.jsx(pn.div,{tabIndex:-1,...p,ref:w,onKeyDown:F})});lA.displayName=E1;function k1(r,{select:a=!1}={}){const o=document.activeElement;for(const l of r)if(lo(l,{select:a}),document.activeElement!==o)return}function S1(r){const a=uA(r),o=Jp(a,r),l=Jp(a.reverse(),r);return[o,l]}function uA(r){const a=[],o=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:l=>{const d=l.tagName==="INPUT"&&l.type==="hidden";return l.disabled||l.hidden||d?NodeFilter.FILTER_SKIP:l.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;o.nextNode();)a.push(o.currentNode);return a}function Jp(r,a){for(const o of r)if(!B1(o,{upTo:a}))return o}function B1(r,{upTo:a}){if(getComputedStyle(r).visibility==="hidden")return!0;for(;r;){if(a!==void 0&&r===a)return!1;if(getComputedStyle(r).display==="none")return!0;r=r.parentElement}return!1}function P1(r){return r instanceof HTMLInputElement&&"select"in r}function lo(r,{select:a=!1}={}){if(r&&r.focus){const o=document.activeElement;r.focus({preventScroll:!0}),r!==o&&P1(r)&&a&&r.select()}}var em=T1();function T1(){let r=[];return{add(a){const o=r[0];a!==o&&(o==null||o.pause()),r=tm(r,a),r.unshift(a)},remove(a){var o;r=tm(r,a),(o=r[0])==null||o.resume()}}}function tm(r,a){const o=[...r],l=o.indexOf(a);return l!==-1&&o.splice(l,1),o}function D1(r){return r.filter(a=>a.tagName!=="A")}var R1="Portal",cA=R.forwardRef((r,a)=>{var h;const{container:o,...l}=r,[d,f]=R.useState(!1);Qs(()=>f(!0),[]);const p=o||d&&((h=globalThis==null?void 0:globalThis.document)==null?void 0:h.body);return p?zg.createPortal(b.jsx(pn.div,{...l,ref:a}),p):null});cA.displayName=R1;function F1(r,a){return R.useReducer((o,l)=>a[o][l]??o,r)}var ea=r=>{const{present:a,children:o}=r,l=N1(a),d=typeof o=="function"?o({present:l.isPresent}):R.Children.only(o),f=vr(l.ref,L1(d));return typeof o=="function"||l.isPresent?R.cloneElement(d,{ref:f}):null};ea.displayName="Presence";function N1(r){const[a,o]=R.useState(),l=R.useRef(null),d=R.useRef(r),f=R.useRef("none"),p=r?"mounted":"unmounted",[h,g]=F1(p,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return R.useEffect(()=>{const m=Lu(l.current);f.current=h==="mounted"?m:"none"},[h]),Qs(()=>{const m=l.current,v=d.current;if(v!==r){const w=f.current,T=Lu(m);r?g("MOUNT"):T==="none"||(m==null?void 0:m.display)==="none"?g("UNMOUNT"):g(v&&w!==T?"ANIMATION_OUT":"UNMOUNT"),d.current=r}},[r,g]),Qs(()=>{if(a){let m;const v=a.ownerDocument.defaultView??window,y=T=>{const k=Lu(l.current).includes(CSS.escape(T.animationName));if(T.target===a&&k&&(g("ANIMATION_END"),!d.current)){const E=a.style.animationFillMode;a.style.animationFillMode="forwards",m=v.setTimeout(()=>{a.style.animationFillMode==="forwards"&&(a.style.animationFillMode=E)})}},w=T=>{T.target===a&&(f.current=Lu(l.current))};return a.addEventListener("animationstart",w),a.addEventListener("animationcancel",y),a.addEventListener("animationend",y),()=>{v.clearTimeout(m),a.removeEventListener("animationstart",w),a.removeEventListener("animationcancel",y),a.removeEventListener("animationend",y)}}else g("ANIMATION_END")},[a,g]),{isPresent:["mounted","unmountSuspended"].includes(h),ref:R.useCallback(m=>{l.current=m?getComputedStyle(m):null,o(m)},[])}}function Lu(r){return(r==null?void 0:r.animationName)||"none"}function L1(r){var l,d;let a=(l=Object.getOwnPropertyDescriptor(r.props,"ref"))==null?void 0:l.get,o=a&&"isReactWarning"in a&&a.isReactWarning;return o?r.ref:(a=(d=Object.getOwnPropertyDescriptor(r,"ref"))==null?void 0:d.get,o=a&&"isReactWarning"in a&&a.isReactWarning,o?r.props.ref:r.props.ref||r.ref)}var jf=0;function M1(){R.useEffect(()=>{const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",r[0]??nm()),document.body.insertAdjacentElement("beforeend",r[1]??nm()),jf++,()=>{jf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(a=>a.remove()),jf--}},[])}function nm(){const r=document.createElement("span");return r.setAttribute("data-radix-focus-guard",""),r.tabIndex=0,r.style.outline="none",r.style.opacity="0",r.style.position="fixed",r.style.pointerEvents="none",r}var Yr=function(){return Yr=Object.assign||function(a){for(var o,l=1,d=arguments.length;l<d;l++){o=arguments[l];for(var f in o)Object.prototype.hasOwnProperty.call(o,f)&&(a[f]=o[f])}return a},Yr.apply(this,arguments)};function dA(r,a){var o={};for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&a.indexOf(l)<0&&(o[l]=r[l]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,l=Object.getOwnPropertySymbols(r);d<l.length;d++)a.indexOf(l[d])<0&&Object.prototype.propertyIsEnumerable.call(r,l[d])&&(o[l[d]]=r[l[d]]);return o}function I1(r,a,o){if(o||arguments.length===2)for(var l=0,d=a.length,f;l<d;l++)(f||!(l in a))&&(f||(f=Array.prototype.slice.call(a,0,l)),f[l]=a[l]);return r.concat(f||Array.prototype.slice.call(a))}var Vu="right-scroll-bar-position",Uu="width-before-scroll-bar",O1="with-scroll-bars-hidden",j1="--removed-body-scroll-bar-size";function zf(r,a){return typeof r=="function"?r(a):r&&(r.current=a),r}function z1(r,a){var o=R.useState(function(){return{value:r,callback:a,facade:{get current(){return o.value},set current(l){var d=o.value;d!==l&&(o.value=l,o.callback(l,d))}}}})[0];return o.callback=a,o.facade}var H1=typeof window<"u"?R.useLayoutEffect:R.useEffect,rm=new WeakMap;function V1(r,a){var o=z1(null,function(l){return r.forEach(function(d){return zf(d,l)})});return H1(function(){var l=rm.get(o);if(l){var d=new Set(l),f=new Set(r),p=o.current;d.forEach(function(h){f.has(h)||zf(h,null)}),f.forEach(function(h){d.has(h)||zf(h,p)})}rm.set(o,r)},[r]),o}function U1(r){return r}function Z1(r,a){a===void 0&&(a=U1);var o=[],l=!1,d={read:function(){if(l)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return o.length?o[o.length-1]:r},useMedium:function(f){var p=a(f,l);return o.push(p),function(){o=o.filter(function(h){return h!==p})}},assignSyncMedium:function(f){for(l=!0;o.length;){var p=o;o=[],p.forEach(f)}o={push:function(h){return f(h)},filter:function(){return o}}},assignMedium:function(f){l=!0;var p=[];if(o.length){var h=o;o=[],h.forEach(f),p=o}var g=function(){var v=p;p=[],v.forEach(f)},m=function(){return Promise.resolve().then(g)};m(),o={push:function(v){p.push(v),m()},filter:function(v){return p=p.filter(v),o}}}};return d}function W1(r){r===void 0&&(r={});var a=Z1(null);return a.options=Yr({async:!0,ssr:!1},r),a}var fA=function(r){var a=r.sideCar,o=dA(r,["sideCar"]);if(!a)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var l=a.read();if(!l)throw new Error("Sidecar medium not found");return R.createElement(l,Yr({},o))};fA.isSideCarExport=!0;function q1(r,a){return r.useMedium(a),fA}var hA=W1(),Hf=function(){},zc=R.forwardRef(function(r,a){var o=R.useRef(null),l=R.useState({onScrollCapture:Hf,onWheelCapture:Hf,onTouchMoveCapture:Hf}),d=l[0],f=l[1],p=r.forwardProps,h=r.children,g=r.className,m=r.removeScrollBar,v=r.enabled,y=r.shards,w=r.sideCar,T=r.noRelative,F=r.noIsolation,k=r.inert,E=r.allowPinchZoom,D=r.as,B=D===void 0?"div":D,S=r.gapMode,N=dA(r,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=w,z=V1([o,a]),H=Yr(Yr({},N),d);return R.createElement(R.Fragment,null,v&&R.createElement(M,{sideCar:hA,removeScrollBar:m,shards:y,noRelative:T,noIsolation:F,inert:k,setCallbacks:f,allowPinchZoom:!!E,lockRef:o,gapMode:S}),p?R.cloneElement(R.Children.only(h),Yr(Yr({},H),{ref:z})):R.createElement(B,Yr({},H,{className:g,ref:z}),h))});zc.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};zc.classNames={fullWidth:Uu,zeroRight:Vu};var G1=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function K1(){if(!document)return null;var r=document.createElement("style");r.type="text/css";var a=G1();return a&&r.setAttribute("nonce",a),r}function Q1(r,a){r.styleSheet?r.styleSheet.cssText=a:r.appendChild(document.createTextNode(a))}function $1(r){var a=document.head||document.getElementsByTagName("head")[0];a.appendChild(r)}var Y1=function(){var r=0,a=null;return{add:function(o){r==0&&(a=K1())&&(Q1(a,o),$1(a)),r++},remove:function(){r--,!r&&a&&(a.parentNode&&a.parentNode.removeChild(a),a=null)}}},X1=function(){var r=Y1();return function(a,o){R.useEffect(function(){return r.add(a),function(){r.remove()}},[a&&o])}},pA=function(){var r=X1(),a=function(o){var l=o.styles,d=o.dynamic;return r(l,d),null};return a},J1={left:0,top:0,right:0,gap:0},Vf=function(r){return parseInt(r||"",10)||0},ew=function(r){var a=window.getComputedStyle(document.body),o=a[r==="padding"?"paddingLeft":"marginLeft"],l=a[r==="padding"?"paddingTop":"marginTop"],d=a[r==="padding"?"paddingRight":"marginRight"];return[Vf(o),Vf(l),Vf(d)]},tw=function(r){if(r===void 0&&(r="margin"),typeof window>"u")return J1;var a=ew(r),o=document.documentElement.clientWidth,l=window.innerWidth;return{left:a[0],top:a[1],right:a[2],gap:Math.max(0,l-o+a[2]-a[0])}},nw=pA(),qs="data-scroll-locked",rw=function(r,a,o,l){var d=r.left,f=r.top,p=r.right,h=r.gap;return o===void 0&&(o="margin"),`
  .`.concat(O1,` {
   overflow: hidden `).concat(l,`;
   padding-right: `).concat(h,"px ").concat(l,`;
  }
  body[`).concat(qs,`] {
    overflow: hidden `).concat(l,`;
    overscroll-behavior: contain;
    `).concat([a&&"position: relative ".concat(l,";"),o==="margin"&&`
    padding-left: `.concat(d,`px;
    padding-top: `).concat(f,`px;
    padding-right: `).concat(p,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(h,"px ").concat(l,`;
    `),o==="padding"&&"padding-right: ".concat(h,"px ").concat(l,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Vu,` {
    right: `).concat(h,"px ").concat(l,`;
  }
  
  .`).concat(Uu,` {
    margin-right: `).concat(h,"px ").concat(l,`;
  }
  
  .`).concat(Vu," .").concat(Vu,` {
    right: 0 `).concat(l,`;
  }
  
  .`).concat(Uu," .").concat(Uu,` {
    margin-right: 0 `).concat(l,`;
  }
  
  body[`).concat(qs,`] {
    `).concat(j1,": ").concat(h,`px;
  }
`)},im=function(){var r=parseInt(document.body.getAttribute(qs)||"0",10);return isFinite(r)?r:0},iw=function(){R.useEffect(function(){return document.body.setAttribute(qs,(im()+1).toString()),function(){var r=im()-1;r<=0?document.body.removeAttribute(qs):document.body.setAttribute(qs,r.toString())}},[])},ow=function(r){var a=r.noRelative,o=r.noImportant,l=r.gapMode,d=l===void 0?"margin":l;iw();var f=R.useMemo(function(){return tw(d)},[d]);return R.createElement(nw,{styles:rw(f,!a,d,o?"":"!important")})},n0=!1;if(typeof window<"u")try{var Mu=Object.defineProperty({},"passive",{get:function(){return n0=!0,!0}});window.addEventListener("test",Mu,Mu),window.removeEventListener("test",Mu,Mu)}catch{n0=!1}var Vs=n0?{passive:!1}:!1,sw=function(r){return r.tagName==="TEXTAREA"},mA=function(r,a){if(!(r instanceof Element))return!1;var o=window.getComputedStyle(r);return o[a]!=="hidden"&&!(o.overflowY===o.overflowX&&!sw(r)&&o[a]==="visible")},aw=function(r){return mA(r,"overflowY")},lw=function(r){return mA(r,"overflowX")},om=function(r,a){var o=a.ownerDocument,l=a;do{typeof ShadowRoot<"u"&&l instanceof ShadowRoot&&(l=l.host);var d=gA(r,l);if(d){var f=AA(r,l),p=f[1],h=f[2];if(p>h)return!0}l=l.parentNode}while(l&&l!==o.body);return!1},uw=function(r){var a=r.scrollTop,o=r.scrollHeight,l=r.clientHeight;return[a,o,l]},cw=function(r){var a=r.scrollLeft,o=r.scrollWidth,l=r.clientWidth;return[a,o,l]},gA=function(r,a){return r==="v"?aw(a):lw(a)},AA=function(r,a){return r==="v"?uw(a):cw(a)},dw=function(r,a){return r==="h"&&a==="rtl"?-1:1},fw=function(r,a,o,l,d){var f=dw(r,window.getComputedStyle(a).direction),p=f*l,h=o.target,g=a.contains(h),m=!1,v=p>0,y=0,w=0;do{if(!h)break;var T=AA(r,h),F=T[0],k=T[1],E=T[2],D=k-E-f*F;(F||D)&&gA(r,h)&&(y+=D,w+=F);var B=h.parentNode;h=B&&B.nodeType===Node.DOCUMENT_FRAGMENT_NODE?B.host:B}while(!g&&h!==document.body||g&&(a.contains(h)||a===h));return(v&&Math.abs(y)<1||!v&&Math.abs(w)<1)&&(m=!0),m},Iu=function(r){return"changedTouches"in r?[r.changedTouches[0].clientX,r.changedTouches[0].clientY]:[0,0]},sm=function(r){return[r.deltaX,r.deltaY]},am=function(r){return r&&"current"in r?r.current:r},hw=function(r,a){return r[0]===a[0]&&r[1]===a[1]},pw=function(r){return`
  .block-interactivity-`.concat(r,` {pointer-events: none;}
  .allow-interactivity-`).concat(r,` {pointer-events: all;}
`)},mw=0,Us=[];function gw(r){var a=R.useRef([]),o=R.useRef([0,0]),l=R.useRef(),d=R.useState(mw++)[0],f=R.useState(pA)[0],p=R.useRef(r);R.useEffect(function(){p.current=r},[r]),R.useEffect(function(){if(r.inert){document.body.classList.add("block-interactivity-".concat(d));var k=I1([r.lockRef.current],(r.shards||[]).map(am),!0).filter(Boolean);return k.forEach(function(E){return E.classList.add("allow-interactivity-".concat(d))}),function(){document.body.classList.remove("block-interactivity-".concat(d)),k.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(d))})}}},[r.inert,r.lockRef.current,r.shards]);var h=R.useCallback(function(k,E){if("touches"in k&&k.touches.length===2||k.type==="wheel"&&k.ctrlKey)return!p.current.allowPinchZoom;var D=Iu(k),B=o.current,S="deltaX"in k?k.deltaX:B[0]-D[0],N="deltaY"in k?k.deltaY:B[1]-D[1],M,z=k.target,H=Math.abs(S)>Math.abs(N)?"h":"v";if("touches"in k&&H==="h"&&z.type==="range")return!1;var j=window.getSelection(),J=j&&j.anchorNode,W=J?J===z||J.contains(z):!1;if(W)return!1;var U=om(H,z);if(!U)return!0;if(U?M=H:(M=H==="v"?"h":"v",U=om(H,z)),!U)return!1;if(!l.current&&"changedTouches"in k&&(S||N)&&(l.current=M),!M)return!0;var ne=l.current||M;return fw(ne,E,k,ne==="h"?S:N)},[]),g=R.useCallback(function(k){var E=k;if(!(!Us.length||Us[Us.length-1]!==f)){var D="deltaY"in E?sm(E):Iu(E),B=a.current.filter(function(M){return M.name===E.type&&(M.target===E.target||E.target===M.shadowParent)&&hw(M.delta,D)})[0];if(B&&B.should){E.cancelable&&E.preventDefault();return}if(!B){var S=(p.current.shards||[]).map(am).filter(Boolean).filter(function(M){return M.contains(E.target)}),N=S.length>0?h(E,S[0]):!p.current.noIsolation;N&&E.cancelable&&E.preventDefault()}}},[]),m=R.useCallback(function(k,E,D,B){var S={name:k,delta:E,target:D,should:B,shadowParent:Aw(D)};a.current.push(S),setTimeout(function(){a.current=a.current.filter(function(N){return N!==S})},1)},[]),v=R.useCallback(function(k){o.current=Iu(k),l.current=void 0},[]),y=R.useCallback(function(k){m(k.type,sm(k),k.target,h(k,r.lockRef.current))},[]),w=R.useCallback(function(k){m(k.type,Iu(k),k.target,h(k,r.lockRef.current))},[]);R.useEffect(function(){return Us.push(f),r.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:w}),document.addEventListener("wheel",g,Vs),document.addEventListener("touchmove",g,Vs),document.addEventListener("touchstart",v,Vs),function(){Us=Us.filter(function(k){return k!==f}),document.removeEventListener("wheel",g,Vs),document.removeEventListener("touchmove",g,Vs),document.removeEventListener("touchstart",v,Vs)}},[]);var T=r.removeScrollBar,F=r.inert;return R.createElement(R.Fragment,null,F?R.createElement(f,{styles:pw(d)}):null,T?R.createElement(ow,{noRelative:r.noRelative,gapMode:r.gapMode}):null)}function Aw(r){for(var a=null;r!==null;)r instanceof ShadowRoot&&(a=r.host,r=r.host),r=r.parentNode;return a}const xw=q1(hA,gw);var xA=R.forwardRef(function(r,a){return R.createElement(zc,Yr({},r,{ref:a,sideCar:xw}))});xA.classNames=zc.classNames;var vw=function(r){if(typeof document>"u")return null;var a=Array.isArray(r)?r[0]:r;return a.ownerDocument.body},Zs=new WeakMap,Ou=new WeakMap,ju={},Uf=0,vA=function(r){return r&&(r.host||vA(r.parentNode))},yw=function(r,a){return a.map(function(o){if(r.contains(o))return o;var l=vA(o);return l&&r.contains(l)?l:(console.error("aria-hidden",o,"in not contained inside",r,". Doing nothing"),null)}).filter(function(o){return!!o})},_w=function(r,a,o,l){var d=yw(a,Array.isArray(r)?r:[r]);ju[o]||(ju[o]=new WeakMap);var f=ju[o],p=[],h=new Set,g=new Set(d),m=function(y){!y||h.has(y)||(h.add(y),m(y.parentNode))};d.forEach(m);var v=function(y){!y||g.has(y)||Array.prototype.forEach.call(y.children,function(w){if(h.has(w))v(w);else try{var T=w.getAttribute(l),F=T!==null&&T!=="false",k=(Zs.get(w)||0)+1,E=(f.get(w)||0)+1;Zs.set(w,k),f.set(w,E),p.push(w),k===1&&F&&Ou.set(w,!0),E===1&&w.setAttribute(o,"true"),F||w.setAttribute(l,"true")}catch(D){console.error("aria-hidden: cannot operate on ",w,D)}})};return v(a),h.clear(),Uf++,function(){p.forEach(function(y){var w=Zs.get(y)-1,T=f.get(y)-1;Zs.set(y,w),f.set(y,T),w||(Ou.has(y)||y.removeAttribute(l),Ou.delete(y)),T||y.removeAttribute(o)}),Uf--,Uf||(Zs=new WeakMap,Zs=new WeakMap,Ou=new WeakMap,ju={})}},ww=function(r,a,o){o===void 0&&(o="data-aria-hidden");var l=Array.from(Array.isArray(r)?r:[r]),d=vw(r);return d?(l.push.apply(l,Array.from(d.querySelectorAll("[aria-live], script"))),_w(l,d,o,"aria-hidden")):function(){return null}};function bw(r){const a=Cw(r),o=R.forwardRef((l,d)=>{const{children:f,...p}=l,h=R.Children.toArray(f),g=h.find(kw);if(g){const m=g.props.children,v=h.map(y=>y===g?R.Children.count(m)>1?R.Children.only(null):R.isValidElement(m)?m.props.children:null:y);return b.jsx(a,{...p,ref:d,children:R.isValidElement(m)?R.cloneElement(m,void 0,v):null})}return b.jsx(a,{...p,ref:d,children:f})});return o.displayName=`${r}.Slot`,o}function Cw(r){const a=R.forwardRef((o,l)=>{const{children:d,...f}=o;if(R.isValidElement(d)){const p=Bw(d),h=Sw(f,d.props);return d.type!==R.Fragment&&(h.ref=l?dl(l,p):p),R.cloneElement(d,h)}return R.Children.count(d)>1?R.Children.only(null):null});return a.displayName=`${r}.SlotClone`,a}var Ew=Symbol("radix.slottable");function kw(r){return R.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===Ew}function Sw(r,a){const o={...a};for(const l in a){const d=r[l],f=a[l];/^on[A-Z]/.test(l)?d&&f?o[l]=(...h)=>{const g=f(...h);return d(...h),g}:d&&(o[l]=d):l==="style"?o[l]={...d,...f}:l==="className"&&(o[l]=[d,f].filter(Boolean).join(" "))}return{...r,...o}}function Bw(r){var l,d;let a=(l=Object.getOwnPropertyDescriptor(r.props,"ref"))==null?void 0:l.get,o=a&&"isReactWarning"in a&&a.isReactWarning;return o?r.ref:(a=(d=Object.getOwnPropertyDescriptor(r,"ref"))==null?void 0:d.get,o=a&&"isReactWarning"in a&&a.isReactWarning,o?r.props.ref:r.props.ref||r.ref)}var Hc="Dialog",[yA]=fl(Hc),[Pw,Lr]=yA(Hc),_A=r=>{const{__scopeDialog:a,children:o,open:l,defaultOpen:d,onOpenChange:f,modal:p=!0}=r,h=R.useRef(null),g=R.useRef(null),[m,v]=jc({prop:l,defaultProp:d??!1,onChange:f,caller:Hc});return b.jsx(Pw,{scope:a,triggerRef:h,contentRef:g,contentId:al(),titleId:al(),descriptionId:al(),open:m,onOpenChange:v,onOpenToggle:R.useCallback(()=>v(y=>!y),[v]),modal:p,children:o})};_A.displayName=Hc;var wA="DialogTrigger",Tw=R.forwardRef((r,a)=>{const{__scopeDialog:o,...l}=r,d=Lr(wA,o),f=vr(a,d.triggerRef);return b.jsx(pn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":d.open,"aria-controls":d.contentId,"data-state":b0(d.open),...l,ref:f,onClick:cn(r.onClick,d.onOpenToggle)})});Tw.displayName=wA;var _0="DialogPortal",[Dw,bA]=yA(_0,{forceMount:void 0}),CA=r=>{const{__scopeDialog:a,forceMount:o,children:l,container:d}=r,f=Lr(_0,a);return b.jsx(Dw,{scope:a,forceMount:o,children:R.Children.map(l,p=>b.jsx(ea,{present:o||f.open,children:b.jsx(cA,{asChild:!0,container:d,children:p})}))})};CA.displayName=_0;var Fc="DialogOverlay",EA=R.forwardRef((r,a)=>{const o=bA(Fc,r.__scopeDialog),{forceMount:l=o.forceMount,...d}=r,f=Lr(Fc,r.__scopeDialog);return f.modal?b.jsx(ea,{present:l||f.open,children:b.jsx(Fw,{...d,ref:a})}):null});EA.displayName=Fc;var Rw=bw("DialogOverlay.RemoveScroll"),Fw=R.forwardRef((r,a)=>{const{__scopeDialog:o,...l}=r,d=Lr(Fc,o);return b.jsx(xA,{as:Rw,allowPinchZoom:!0,shards:[d.contentRef],children:b.jsx(pn.div,{"data-state":b0(d.open),...l,ref:a,style:{pointerEvents:"auto",...l.style}})})}),$o="DialogContent",kA=R.forwardRef((r,a)=>{const o=bA($o,r.__scopeDialog),{forceMount:l=o.forceMount,...d}=r,f=Lr($o,r.__scopeDialog);return b.jsx(ea,{present:l||f.open,children:f.modal?b.jsx(Nw,{...d,ref:a}):b.jsx(Lw,{...d,ref:a})})});kA.displayName=$o;var Nw=R.forwardRef((r,a)=>{const o=Lr($o,r.__scopeDialog),l=R.useRef(null),d=vr(a,o.contentRef,l);return R.useEffect(()=>{const f=l.current;if(f)return ww(f)},[]),b.jsx(SA,{...r,ref:d,trapFocus:o.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:cn(r.onCloseAutoFocus,f=>{var p;f.preventDefault(),(p=o.triggerRef.current)==null||p.focus()}),onPointerDownOutside:cn(r.onPointerDownOutside,f=>{const p=f.detail.originalEvent,h=p.button===0&&p.ctrlKey===!0;(p.button===2||h)&&f.preventDefault()}),onFocusOutside:cn(r.onFocusOutside,f=>f.preventDefault())})}),Lw=R.forwardRef((r,a)=>{const o=Lr($o,r.__scopeDialog),l=R.useRef(!1),d=R.useRef(!1);return b.jsx(SA,{...r,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:f=>{var p,h;(p=r.onCloseAutoFocus)==null||p.call(r,f),f.defaultPrevented||(l.current||(h=o.triggerRef.current)==null||h.focus(),f.preventDefault()),l.current=!1,d.current=!1},onInteractOutside:f=>{var g,m;(g=r.onInteractOutside)==null||g.call(r,f),f.defaultPrevented||(l.current=!0,f.detail.originalEvent.type==="pointerdown"&&(d.current=!0));const p=f.target;((m=o.triggerRef.current)==null?void 0:m.contains(p))&&f.preventDefault(),f.detail.originalEvent.type==="focusin"&&d.current&&f.preventDefault()}})}),SA=R.forwardRef((r,a)=>{const{__scopeDialog:o,trapFocus:l,onOpenAutoFocus:d,onCloseAutoFocus:f,...p}=r,h=Lr($o,o),g=R.useRef(null),m=vr(a,g);return M1(),b.jsxs(b.Fragment,{children:[b.jsx(lA,{asChild:!0,loop:!0,trapped:l,onMountAutoFocus:d,onUnmountAutoFocus:f,children:b.jsx(sA,{role:"dialog",id:h.contentId,"aria-describedby":h.descriptionId,"aria-labelledby":h.titleId,"data-state":b0(h.open),...p,ref:m,onDismiss:()=>h.onOpenChange(!1)})}),b.jsxs(b.Fragment,{children:[b.jsx(Mw,{titleId:h.titleId}),b.jsx(Ow,{contentRef:g,descriptionId:h.descriptionId})]})]})}),w0="DialogTitle",BA=R.forwardRef((r,a)=>{const{__scopeDialog:o,...l}=r,d=Lr(w0,o);return b.jsx(pn.h2,{id:d.titleId,...l,ref:a})});BA.displayName=w0;var PA="DialogDescription",TA=R.forwardRef((r,a)=>{const{__scopeDialog:o,...l}=r,d=Lr(PA,o);return b.jsx(pn.p,{id:d.descriptionId,...l,ref:a})});TA.displayName=PA;var DA="DialogClose",RA=R.forwardRef((r,a)=>{const{__scopeDialog:o,...l}=r,d=Lr(DA,o);return b.jsx(pn.button,{type:"button",...l,ref:a,onClick:cn(r.onClick,()=>d.onOpenChange(!1))})});RA.displayName=DA;function b0(r){return r?"open":"closed"}var FA="DialogTitleWarning",[RE,NA]=n1(FA,{contentName:$o,titleName:w0,docsSlug:"dialog"}),Mw=({titleId:r})=>{const a=NA(FA),o=`\`${a.contentName}\` requires a \`${a.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${a.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${a.docsSlug}`;return R.useEffect(()=>{r&&(document.getElementById(r)||console.error(o))},[o,r]),null},Iw="DialogDescriptionWarning",Ow=({contentRef:r,descriptionId:a})=>{const l=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${NA(Iw).contentName}}.`;return R.useEffect(()=>{var f;const d=(f=r.current)==null?void 0:f.getAttribute("aria-describedby");a&&d&&(document.getElementById(a)||console.warn(l))},[l,r,a]),null},LA=_A,MA=CA,Vc=EA,Uc=kA,Zc=BA,Wc=TA,IA=RA;const C0=LA,jw=MA,OA=R.forwardRef(({className:r,...a},o)=>b.jsx(Vc,{ref:o,className:ut("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...a}));OA.displayName=Vc.displayName;const qc=R.forwardRef(({className:r,children:a,...o},l)=>b.jsxs(jw,{children:[b.jsx(OA,{}),b.jsxs(Uc,{ref:l,className:ut("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...o,children:[a,b.jsxs(IA,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[b.jsx(Vg,{className:"h-4 w-4"}),b.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));qc.displayName=Uc.displayName;const Gc=({className:r,...a})=>b.jsx("div",{className:ut("flex flex-col space-y-1.5 text-center sm:text-left",r),...a});Gc.displayName="DialogHeader";const E0=({className:r,...a})=>b.jsx("div",{className:ut("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r),...a});E0.displayName="DialogFooter";const Kc=R.forwardRef(({className:r,...a},o)=>b.jsx(Zc,{ref:o,className:ut("text-lg font-semibold leading-none tracking-tight",r),...a}));Kc.displayName=Zc.displayName;const Qc=R.forwardRef(({className:r,...a},o)=>b.jsx(Wc,{ref:o,className:ut("text-sm text-muted-foreground",r),...a}));Qc.displayName=Wc.displayName;function zw(){const r=window.location.hash.slice(1);if(!r)return null;if(r==="raw")return{type:"raw",name:"raw"};if(r==="map")return{type:"map",name:"map"};if(r.startsWith("map/focus/")){const d=r.slice(10);return d?{type:"map",name:"map",mapFocusKey:decodeURIComponent(d)}:{type:"map",name:"map"}}const a=r.indexOf("/");if(a===-1)return null;const o=r.slice(0,a),l=decodeURIComponent(r.slice(a+1));return(o==="channel"||o==="contact")&&l?{type:o,name:l}:null}function jA(r){return`#map/focus/${encodeURIComponent(r)}`}function Hw(r){if(!r)return"";if(r.type==="raw")return"#raw";if(r.type==="map")return"#map";const a=r.type==="channel"&&r.name.startsWith("#")?r.name.slice(1):r.name;return`#${r.type}/${encodeURIComponent(a)}`}function Vw(r){const a=Hw(r);a!==window.location.hash&&window.history.replaceState(null,"",a||window.location.pathname)}function Uw({open:r,onClose:a,paths:o,senderInfo:l,contacts:d,config:f}){const p=o.map(g=>({...g,resolved:e1(g.path,l,d,f)})),h=o.length===1;return b.jsx(C0,{open:r,onOpenChange:g=>!g&&a(),children:b.jsxs(qc,{className:"max-w-md max-h-[80vh] flex flex-col",children:[b.jsxs(Gc,{children:[b.jsxs(Kc,{children:["Message Path",!h&&`s (${o.length})`]}),b.jsx(Qc,{children:h?b.jsxs(b.Fragment,{children:["This shows ",b.jsx("em",{children:"one route"})," that this message traveled through the mesh network. Routers may be incorrectly identified due to prefix collisions between heard and non-heard router advertisements."]}):b.jsxs(b.Fragment,{children:["This message was received via ",b.jsxs("strong",{children:[o.length," different routes"]}),". Routers may be incorrectly identified due to prefix collisions."]})})]}),b.jsxs("div",{className:"flex-1 overflow-y-auto py-2 space-y-4",children:[p.map((g,m)=>b.jsxs("div",{children:[!h&&b.jsxs("div",{className:"text-xs text-muted-foreground font-medium mb-2 pb-1 border-b border-border",children:["Path ",m+1,"  received ",Ks(g.received_at)]}),b.jsx(Zw,{resolved:g.resolved,senderInfo:l,hideStraightLine:!h})]},m)),!h&&p.length>0&&(()=>{const g=p[0].resolved;return St(g.sender.lat,g.sender.lon)&&St(g.receiver.lat,g.receiver.lon)?b.jsxs("div",{className:"pt-3 mt-1 border-t border-border",children:[b.jsx("span",{className:"text-sm text-muted-foreground",children:"Straight-line distance: "}),b.jsx("span",{className:"text-sm font-medium",children:Qo(Fr(g.sender.lat,g.sender.lon,g.receiver.lat,g.receiver.lon))})]}):null})()]}),b.jsx(E0,{children:b.jsx(Pn,{onClick:a,children:"Close"})})]})})}function Zw({resolved:r,senderInfo:a,hideStraightLine:o}){const l=d=>{if(d===0)return St(r.sender.lat,r.sender.lon)?{lat:r.sender.lat,lon:r.sender.lon}:null;const f=r.hops[d-1];return f.matches.length>1||f.matches.length===0?null:St(f.matches[0].lat,f.matches[0].lon)?{lat:f.matches[0].lat,lon:f.matches[0].lon}:null};return b.jsxs("div",{className:"space-y-0",children:[b.jsx(lm,{label:"Sender",name:r.sender.name,prefix:r.sender.prefix,distance:null,isFirst:!0,lat:r.sender.lat,lon:r.sender.lon,publicKey:a.publicKeyOrPrefix}),r.hops.map((d,f)=>b.jsx(Ww,{hop:d,hopNumber:f+1,prevLocation:l(f)},f)),b.jsx(lm,{label:"Receiver (me)",name:r.receiver.name,prefix:r.receiver.prefix,distance:qw(r),isLast:!0,lat:r.receiver.lat,lon:r.receiver.lon,publicKey:r.receiver.publicKey??void 0}),r.totalDistances&&r.totalDistances.length>0&&b.jsxs("div",{className:"pt-3 mt-3 border-t border-border",children:[b.jsxs("span",{className:"text-sm text-muted-foreground",children:["Presumed unambiguous distance covered:"," "]}),b.jsxs("span",{className:"text-sm font-medium",children:[r.hasGaps?">":"",Qo(r.totalDistances[0])]})]}),!o&&St(r.sender.lat,r.sender.lon)&&St(r.receiver.lat,r.receiver.lon)&&b.jsxs("div",{className:r.totalDistances&&r.totalDistances.length>0?"pt-1":"pt-3 mt-3 border-t border-border",children:[b.jsx("span",{className:"text-sm text-muted-foreground",children:"Straight-line distance: "}),b.jsx("span",{className:"text-sm font-medium",children:Qo(Fr(r.sender.lat,r.sender.lon,r.receiver.lat,r.receiver.lon))})]})]})}function lm({label:r,name:a,prefix:o,distance:l,isFirst:d,isLast:f,lat:p,lon:h,publicKey:g}){const m=St(p??null,h??null)&&g;return b.jsxs("div",{className:"flex gap-3",children:[b.jsxs("div",{className:"flex flex-col items-center w-4 flex-shrink-0",children:[!d&&b.jsx("div",{className:"w-0.5 h-3 bg-border"}),b.jsx("div",{className:"w-3 h-3 rounded-full bg-primary flex-shrink-0"}),!f&&b.jsx("div",{className:"w-0.5 flex-1 bg-border"})]}),b.jsxs("div",{className:"pb-3 flex-1 min-w-0",children:[b.jsx("div",{className:"text-xs text-muted-foreground font-medium",children:r}),b.jsxs("div",{className:"font-medium truncate",children:[a," ",b.jsxs("span",{className:"text-muted-foreground font-mono text-sm",children:["(",o,")"]}),l!==null&&b.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["- ",Qo(l)]}),m&&b.jsx(r0,{lat:p,lon:h,publicKey:g})]})]})]})}function Ww({hop:r,hopNumber:a,prevLocation:o}){const l=r.matches.length>1,d=r.matches.length===0,f=p=>!o||o.lat===null||o.lon===null||!St(p.lat,p.lon)?null:Fr(o.lat,o.lon,p.lat,p.lon);return b.jsxs("div",{className:"flex gap-3",children:[b.jsxs("div",{className:"flex flex-col items-center w-4 flex-shrink-0",children:[b.jsx("div",{className:"w-0.5 h-3 bg-border"}),b.jsx("div",{className:"w-3 h-3 rounded-full bg-muted-foreground flex-shrink-0"}),b.jsx("div",{className:"w-0.5 flex-1 bg-border"})]}),b.jsxs("div",{className:"pb-3 flex-1 min-w-0",children:[b.jsxs("div",{className:"text-xs text-muted-foreground font-medium",children:["Hop ",a,l&&b.jsx("span",{className:"text-yellow-500 ml-1",children:"(ambiguous)"})]}),d?b.jsxs("div",{className:"font-medium text-muted-foreground/70",children:["<UNKNOWN ",b.jsx("span",{className:"font-mono text-sm",children:r.prefix}),">"]}):l?b.jsx("div",{children:r.matches.map(p=>{const h=f(p),g=St(p.lat,p.lon);return b.jsxs("div",{className:"font-medium truncate",children:[p.name||p.public_key.slice(0,12)," ",b.jsxs("span",{className:"text-muted-foreground font-mono text-sm",children:["(",p.public_key.slice(0,2).toUpperCase(),")"]}),h!==null&&b.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["- ",Qo(h)]}),g&&b.jsx(r0,{lat:p.lat,lon:p.lon,publicKey:p.public_key})]},p.public_key)})}):b.jsxs("div",{className:"font-medium truncate",children:[r.matches[0].name||r.matches[0].public_key.slice(0,12)," ",b.jsxs("span",{className:"text-muted-foreground font-mono text-sm",children:["(",r.prefix,")"]}),r.distanceFromPrev!==null&&b.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["- ",Qo(r.distanceFromPrev)]}),St(r.matches[0].lat,r.matches[0].lon)&&b.jsx(r0,{lat:r.matches[0].lat,lon:r.matches[0].lon,publicKey:r.matches[0].public_key})]})]})]})}function r0({lat:r,lon:a,publicKey:o}){const l=d=>{d.preventDefault(),d.stopPropagation();const f=window.location.origin+window.location.pathname+jA(o);window.open(f,"_blank")};return b.jsxs("span",{className:"text-xs text-muted-foreground/70 font-mono cursor-pointer hover:text-primary hover:underline ml-1",onClick:l,title:"View on map",children:["(",r.toFixed(4),", ",a.toFixed(4),")"]})}function qw(r){let a=null,o=null;if(r.hops.length>0){const l=r.hops[r.hops.length-1];l.matches.length===1&&St(l.matches[0].lat,l.matches[0].lon)&&(a=l.matches[0].lat,o=l.matches[0].lon)}else St(r.sender.lat,r.sender.lon)&&(a=r.sender.lat,o=r.sender.lon);return a===null||o===null||!St(r.receiver.lat,r.receiver.lon)?null:Fr(a,o,r.receiver.lat,r.receiver.lon)}function Gw(r,a){if(!a)return r;const o=/@\[([^\]]+)\]/g,l=[];let d=0,f,p=0;for(;(f=o.exec(r))!==null;){f.index>d&&l.push(r.slice(d,f.index));const h=f[1],g=h===a;l.push(b.jsxs("span",{className:ut("rounded px-0.5",g?"bg-primary/30 text-primary font-medium":"bg-muted-foreground/20"),children:["@[",h,"]"]},p++)),d=f.index+f[0].length}return d<r.length&&l.push(r.slice(d)),l.length>0?l:r}function um({paths:r,onClick:a,variant:o}){const d=`(${J_(r).display})`,f=o==="header"?"font-normal text-muted-foreground/70 ml-1 text-[11px] cursor-pointer hover:text-primary hover:underline":"text-[10px] text-muted-foreground/50 ml-1 cursor-pointer hover:text-primary hover:underline";return b.jsx("span",{className:f,onClick:p=>{p.stopPropagation(),a()},title:"View message path",children:d})}function Kw({messages:r,contacts:a,loading:o,loadingOlder:l=!1,hasOlderMessages:d=!1,onSenderClick:f,onLoadOlder:p,radioName:h,config:g}){const m=R.useRef(null),v=R.useRef(0),y=R.useRef(!0),[w,T]=R.useState(!1),[F,k]=R.useState(null),E=R.useRef({scrollTop:0,scrollHeight:0,clientHeight:0,wasNearTop:!1,wasNearBottom:!0});R.useLayoutEffect(()=>{if(!m.current)return;const j=m.current,J=r.length-v.current;if(y.current&&r.length>0)j.scrollTop=j.scrollHeight,y.current=!1;else if(J>0&&v.current>0){const W=j.scrollHeight-E.current.scrollHeight;E.current.wasNearTop&&W>0?j.scrollTop=E.current.scrollTop+W:E.current.wasNearBottom&&(j.scrollTop=j.scrollHeight)}v.current=r.length},[r]),R.useEffect(()=>{r.length===0&&(y.current=!0,v.current=0,E.current={scrollTop:0,scrollHeight:0,clientHeight:0,wasNearTop:!1,wasNearBottom:!0})},[r.length]);const D=R.useCallback(()=>{if(!m.current)return;const{scrollTop:j,scrollHeight:J,clientHeight:W}=m.current,U=J-j-W;E.current={scrollTop:j,scrollHeight:J,clientHeight:W,wasNearTop:j<150,wasNearBottom:U<100},T(U>100),!(!p||l||!d)&&j<100&&p()},[p,l,d]),B=R.useCallback(()=>{m.current&&(m.current.scrollTop=m.current.scrollHeight)},[]),S=j=>j&&a.find(J=>J.public_key===j)||null,N=j=>a.find(J=>J.name===j)||null,M=(j,J,W)=>{if(j.type==="PRIV"&&J)return{name:J.name||J.public_key.slice(0,12),publicKeyOrPrefix:J.public_key,lat:J.lat,lon:J.lon};if(W){const U=N(W);if(U)return{name:W,publicKeyOrPrefix:U.public_key,lat:U.lat,lon:U.lon}}return{name:W||"Unknown",publicKeyOrPrefix:j.conversation_key||"",lat:null,lon:null}};if(o)return b.jsx("div",{className:"flex-1 overflow-y-auto p-5 text-center text-muted-foreground",children:"Loading messages..."});if(r.length===0)return b.jsx("div",{className:"flex-1 overflow-y-auto p-5 text-center text-muted-foreground",children:"No messages yet"});const z=[...r].sort((j,J)=>j.received_at-J.received_at),H=(j,J)=>j.outgoing?"__outgoing__":j.type==="PRIV"&&j.conversation_key?j.conversation_key:J||"__unknown__";return b.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[b.jsxs("div",{className:"h-full overflow-y-auto p-4 flex flex-col gap-0.5",ref:m,onScroll:D,children:[l&&b.jsx("div",{className:"text-center py-2 text-muted-foreground text-sm",children:"Loading older messages..."}),!l&&d&&b.jsx("div",{className:"text-center py-2 text-muted-foreground text-xs",children:"Scroll up for older messages"}),z.map((j,J)=>{var K;const W=j.type==="PRIV"?S(j.conversation_key):null,U=(W==null?void 0:W.type)===Oc,{sender:ne,content:Y}=U?{sender:null,content:j.text}:Qp(j.text),re=j.outgoing?"You":(W==null?void 0:W.name)||ne||((K=j.conversation_key)==null?void 0:K.slice(0,8))||"Unknown",fe=!j.outgoing&&f&&re!=="Unknown",ae=H(j,ne),he=z[J-1],G=he?H(he,Qp(he.text).sender):null,pe=!j.outgoing&&ae!==G,Z=J===0;let P=null,V="";if(!j.outgoing){if(j.type==="PRIV"&&j.conversation_key)P=(W==null?void 0:W.name)||null,V=j.conversation_key;else if(ne){const $=N(ne);P=ne,V=($==null?void 0:$.public_key)||`name:${ne}`}}return b.jsxs("div",{className:ut("flex items-start max-w-[85%]",j.outgoing&&"flex-row-reverse self-end",pe&&!Z&&"mt-3"),children:[!j.outgoing&&b.jsx("div",{className:"w-10 flex-shrink-0 flex items-start pt-0.5",children:pe&&V&&b.jsx(Jf,{name:P,publicKey:V,size:32})}),b.jsxs("div",{className:ut("py-1.5 px-3 rounded-lg min-w-0",j.outgoing?"bg-[#1e3a29]":"bg-muted"),children:[pe&&b.jsxs("div",{className:"text-[13px] font-semibold text-muted-foreground mb-0.5",children:[fe?b.jsx("span",{className:"cursor-pointer hover:text-primary hover:underline",onClick:()=>f(re),title:`Mention ${re}`,children:re}):re,b.jsx("span",{className:"font-normal text-muted-foreground/70 ml-2 text-[11px]",children:Ks(j.sender_timestamp||j.received_at)}),!j.outgoing&&j.paths&&j.paths.length>0&&b.jsx(um,{paths:j.paths,variant:"header",onClick:()=>k({paths:j.paths,senderInfo:M(j,W,ne)})})]}),b.jsxs("div",{className:"break-words whitespace-pre-wrap",children:[Y.split(`
`).map(($,ce,de)=>b.jsxs("span",{children:[Gw($,h),ce<de.length-1&&b.jsx("br",{})]},ce)),!pe&&b.jsxs(b.Fragment,{children:[b.jsx("span",{className:"text-[10px] text-muted-foreground/50 ml-2",children:Ks(j.sender_timestamp||j.received_at)}),!j.outgoing&&j.paths&&j.paths.length>0&&b.jsx(um,{paths:j.paths,variant:"inline",onClick:()=>k({paths:j.paths,senderInfo:M(j,W,ne)})})]}),j.outgoing&&(j.acked>0?` ${j.acked>1?j.acked:""}`:" ?")]})]})]},j.id)})]}),w&&b.jsx("button",{onClick:B,className:"absolute bottom-4 right-4 w-10 h-10 rounded-full bg-muted hover:bg-accent border border-border flex items-center justify-center shadow-lg transition-opacity",title:"Scroll to bottom",children:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-muted-foreground",children:b.jsx("polyline",{points:"6 9 12 15 18 9"})})}),F&&b.jsx(Uw,{open:!0,onClose:()=>k(null),paths:F.paths,senderInfo:F.senderInfo,contacts:a,config:g??null})]})}const cm=156,Qw=140,$w=156,Yw=120,Xw=8,Jw=R.forwardRef(function({onSend:a,disabled:o,placeholder:l,isRepeaterMode:d,conversationType:f,senderName:p},h){const[g,m]=R.useState(""),[v,y]=R.useState(!1),w=R.useRef(null);R.useImperativeHandle(h,()=>({appendText:M=>{var z;m(H=>H+M),(z=w.current)==null||z.focus()}}));const T=R.useMemo(()=>{if(f==="contact")return{warningAt:Qw,dangerAt:cm,hardLimit:cm};if(f==="channel"){const M=(p==null?void 0:p.length)??10,z=Math.max(1,$w-M-2);return{warningAt:Yw,dangerAt:Math.max(1,z-Xw),hardLimit:z}}return null},[f,p]),{limitState:F,warningMessage:k}=R.useMemo(()=>{if(!T)return{limitState:"normal",warningMessage:null};const M=g.length;return M>=T.hardLimit?{limitState:"error",warningMessage:"likely truncated by radio"}:M>=T.dangerAt?{limitState:"danger",warningMessage:"may impact multi-repeater hop delivery"}:M>=T.warningAt?{limitState:"warning",warningMessage:"may impact multi-repeater hop delivery"}:{limitState:"normal",warningMessage:null}},[g.length,T]),E=T?T.hardLimit-g.length:0,D=R.useCallback(async M=>{M.preventDefault();const z=g.trim();if(d){if(v||o)return;y(!0);try{await a(z),m("")}catch(H){console.error("Failed to request telemetry:",H),xt.error("Failed to request telemetry",{description:H instanceof Error?H.message:"Check radio connection"});return}finally{y(!1)}setTimeout(()=>{var H;return(H=w.current)==null?void 0:H.focus()},0)}else{if(!z||v||o)return;y(!0);try{await a(z),m("")}catch(H){console.error("Failed to send message:",H),xt.error("Failed to send message",{description:H instanceof Error?H.message:"Check radio connection"});return}finally{y(!1)}setTimeout(()=>{var H;return(H=w.current)==null?void 0:H.focus()},0)}},[g,v,o,a,d]),B=R.useCallback(M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),D(M))},[D]),S=d?!0:g.trim().length>0,N=!d&&T!==null;return b.jsxs("form",{className:"px-4 py-3 border-t border-border flex flex-col gap-1",onSubmit:D,children:[b.jsxs("div",{className:"flex gap-2",children:[b.jsx(tn,{ref:w,type:d?"password":"text",autoComplete:d?"off":void 0,value:g,onChange:M=>m(M.target.value),onKeyDown:B,placeholder:l||(d?"Enter password for admin login...":"Type a message..."),disabled:o||v,className:"flex-1 min-w-0"}),b.jsx(Pn,{type:"submit",disabled:o||v||!S,className:"flex-shrink-0",children:v?d?"Logging in...":"Sending...":d?g.trim()?"Log in with password":"Log in as guest/use repeater ACLs":"Send"})]}),N&&b.jsxs("div",{className:"flex items-center justify-end gap-2 text-xs",children:[b.jsxs("span",{className:ut("tabular-nums",F==="error"||F==="danger"?"text-red-500 font-medium":F==="warning"?"text-yellow-500":"text-muted-foreground"),children:[g.length,"/",T.hardLimit,E<0&&` (${E})`]}),k&&b.jsxs("span",{className:ut(F==="error"?"text-red-500":"text-yellow-500"),children:[" ",k]})]})]})});function dm(r){const a=e2(r),o=R.forwardRef((l,d)=>{const{children:f,...p}=l,h=R.Children.toArray(f),g=h.find(n2);if(g){const m=g.props.children,v=h.map(y=>y===g?R.Children.count(m)>1?R.Children.only(null):R.isValidElement(m)?m.props.children:null:y);return b.jsx(a,{...p,ref:d,children:R.isValidElement(m)?R.cloneElement(m,void 0,v):null})}return b.jsx(a,{...p,ref:d,children:f})});return o.displayName=`${r}.Slot`,o}function e2(r){const a=R.forwardRef((o,l)=>{const{children:d,...f}=o;if(R.isValidElement(d)){const p=i2(d),h=r2(f,d.props);return d.type!==R.Fragment&&(h.ref=l?dl(l,p):p),R.cloneElement(d,h)}return R.Children.count(d)>1?R.Children.only(null):null});return a.displayName=`${r}.SlotClone`,a}var t2=Symbol("radix.slottable");function n2(r){return R.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===t2}function r2(r,a){const o={...a};for(const l in a){const d=r[l],f=a[l];/^on[A-Z]/.test(l)?d&&f?o[l]=(...h)=>{const g=f(...h);return d(...h),g}:d&&(o[l]=d):l==="style"?o[l]={...d,...f}:l==="className"&&(o[l]=[d,f].filter(Boolean).join(" "))}return{...r,...o}}function i2(r){var l,d;let a=(l=Object.getOwnPropertyDescriptor(r.props,"ref"))==null?void 0:l.get,o=a&&"isReactWarning"in a&&a.isReactWarning;return o?r.ref:(a=(d=Object.getOwnPropertyDescriptor(r,"ref"))==null?void 0:d.get,o=a&&"isReactWarning"in a&&a.isReactWarning,o?r.props.ref:r.props.ref||r.ref)}function o2(r){const a=r+"CollectionProvider",[o,l]=fl(a),[d,f]=o(a,{collectionRef:{current:null},itemMap:new Map}),p=k=>{const{scope:E,children:D}=k,B=Ee.useRef(null),S=Ee.useRef(new Map).current;return b.jsx(d,{scope:E,itemMap:S,collectionRef:B,children:D})};p.displayName=a;const h=r+"CollectionSlot",g=dm(h),m=Ee.forwardRef((k,E)=>{const{scope:D,children:B}=k,S=f(h,D),N=vr(E,S.collectionRef);return b.jsx(g,{ref:N,children:B})});m.displayName=h;const v=r+"CollectionItemSlot",y="data-radix-collection-item",w=dm(v),T=Ee.forwardRef((k,E)=>{const{scope:D,children:B,...S}=k,N=Ee.useRef(null),M=vr(E,N),z=f(v,D);return Ee.useEffect(()=>(z.itemMap.set(N,{ref:N,...S}),()=>void z.itemMap.delete(N))),b.jsx(w,{[y]:"",ref:M,children:B})});T.displayName=v;function F(k){const E=f(r+"CollectionConsumer",k);return Ee.useCallback(()=>{const B=E.collectionRef.current;if(!B)return[];const S=Array.from(B.querySelectorAll(`[${y}]`));return Array.from(E.itemMap.values()).sort((z,H)=>S.indexOf(z.ref.current)-S.indexOf(H.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:p,Slot:m,ItemSlot:T},F,l]}var s2=R.createContext(void 0);function zA(r){const a=R.useContext(s2);return r||a||"ltr"}var Zf="rovingFocusGroup.onEntryFocus",a2={bubbles:!1,cancelable:!0},hl="RovingFocusGroup",[i0,HA,l2]=o2(hl),[u2,VA]=fl(hl,[l2]),[c2,d2]=u2(hl),UA=R.forwardRef((r,a)=>b.jsx(i0.Provider,{scope:r.__scopeRovingFocusGroup,children:b.jsx(i0.Slot,{scope:r.__scopeRovingFocusGroup,children:b.jsx(f2,{...r,ref:a})})}));UA.displayName=hl;var f2=R.forwardRef((r,a)=>{const{__scopeRovingFocusGroup:o,orientation:l,loop:d=!1,dir:f,currentTabStopId:p,defaultCurrentTabStopId:h,onCurrentTabStopIdChange:g,onEntryFocus:m,preventScrollOnEntryFocus:v=!1,...y}=r,w=R.useRef(null),T=vr(a,w),F=zA(f),[k,E]=jc({prop:p,defaultProp:h??null,onChange:g,caller:hl}),[D,B]=R.useState(!1),S=$s(m),N=HA(o),M=R.useRef(!1),[z,H]=R.useState(0);return R.useEffect(()=>{const j=w.current;if(j)return j.addEventListener(Zf,S),()=>j.removeEventListener(Zf,S)},[S]),b.jsx(c2,{scope:o,orientation:l,dir:F,loop:d,currentTabStopId:k,onItemFocus:R.useCallback(j=>E(j),[E]),onItemShiftTab:R.useCallback(()=>B(!0),[]),onFocusableItemAdd:R.useCallback(()=>H(j=>j+1),[]),onFocusableItemRemove:R.useCallback(()=>H(j=>j-1),[]),children:b.jsx(pn.div,{tabIndex:D||z===0?-1:0,"data-orientation":l,...y,ref:T,style:{outline:"none",...r.style},onMouseDown:cn(r.onMouseDown,()=>{M.current=!0}),onFocus:cn(r.onFocus,j=>{const J=!M.current;if(j.target===j.currentTarget&&J&&!D){const W=new CustomEvent(Zf,a2);if(j.currentTarget.dispatchEvent(W),!W.defaultPrevented){const U=N().filter(ae=>ae.focusable),ne=U.find(ae=>ae.active),Y=U.find(ae=>ae.id===k),fe=[ne,Y,...U].filter(Boolean).map(ae=>ae.ref.current);qA(fe,v)}}M.current=!1}),onBlur:cn(r.onBlur,()=>B(!1))})})}),ZA="RovingFocusGroupItem",WA=R.forwardRef((r,a)=>{const{__scopeRovingFocusGroup:o,focusable:l=!0,active:d=!1,tabStopId:f,children:p,...h}=r,g=al(),m=f||g,v=d2(ZA,o),y=v.currentTabStopId===m,w=HA(o),{onFocusableItemAdd:T,onFocusableItemRemove:F,currentTabStopId:k}=v;return R.useEffect(()=>{if(l)return T(),()=>F()},[l,T,F]),b.jsx(i0.ItemSlot,{scope:o,id:m,focusable:l,active:d,children:b.jsx(pn.span,{tabIndex:y?0:-1,"data-orientation":v.orientation,...h,ref:a,onMouseDown:cn(r.onMouseDown,E=>{l?v.onItemFocus(m):E.preventDefault()}),onFocus:cn(r.onFocus,()=>v.onItemFocus(m)),onKeyDown:cn(r.onKeyDown,E=>{if(E.key==="Tab"&&E.shiftKey){v.onItemShiftTab();return}if(E.target!==E.currentTarget)return;const D=m2(E,v.orientation,v.dir);if(D!==void 0){if(E.metaKey||E.ctrlKey||E.altKey||E.shiftKey)return;E.preventDefault();let S=w().filter(N=>N.focusable).map(N=>N.ref.current);if(D==="last")S.reverse();else if(D==="prev"||D==="next"){D==="prev"&&S.reverse();const N=S.indexOf(E.currentTarget);S=v.loop?g2(S,N+1):S.slice(N+1)}setTimeout(()=>qA(S))}}),children:typeof p=="function"?p({isCurrentTabStop:y,hasTabStop:k!=null}):p})})});WA.displayName=ZA;var h2={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function p2(r,a){return a!=="rtl"?r:r==="ArrowLeft"?"ArrowRight":r==="ArrowRight"?"ArrowLeft":r}function m2(r,a,o){const l=p2(r.key,o);if(!(a==="vertical"&&["ArrowLeft","ArrowRight"].includes(l))&&!(a==="horizontal"&&["ArrowUp","ArrowDown"].includes(l)))return h2[l]}function qA(r,a=!1){const o=document.activeElement;for(const l of r)if(l===o||(l.focus({preventScroll:a}),document.activeElement!==o))return}function g2(r,a){return r.map((o,l)=>r[(a+l)%r.length])}var A2=UA,x2=WA,$c="Tabs",[v2]=fl($c,[VA]),GA=VA(),[y2,k0]=v2($c),KA=R.forwardRef((r,a)=>{const{__scopeTabs:o,value:l,onValueChange:d,defaultValue:f,orientation:p="horizontal",dir:h,activationMode:g="automatic",...m}=r,v=zA(h),[y,w]=jc({prop:l,onChange:d,defaultProp:f??"",caller:$c});return b.jsx(y2,{scope:o,baseId:al(),value:y,onValueChange:w,orientation:p,dir:v,activationMode:g,children:b.jsx(pn.div,{dir:v,"data-orientation":p,...m,ref:a})})});KA.displayName=$c;var QA="TabsList",$A=R.forwardRef((r,a)=>{const{__scopeTabs:o,loop:l=!0,...d}=r,f=k0(QA,o),p=GA(o);return b.jsx(A2,{asChild:!0,...p,orientation:f.orientation,dir:f.dir,loop:l,children:b.jsx(pn.div,{role:"tablist","aria-orientation":f.orientation,...d,ref:a})})});$A.displayName=QA;var YA="TabsTrigger",XA=R.forwardRef((r,a)=>{const{__scopeTabs:o,value:l,disabled:d=!1,...f}=r,p=k0(YA,o),h=GA(o),g=tx(p.baseId,l),m=nx(p.baseId,l),v=l===p.value;return b.jsx(x2,{asChild:!0,...h,focusable:!d,active:v,children:b.jsx(pn.button,{type:"button",role:"tab","aria-selected":v,"aria-controls":m,"data-state":v?"active":"inactive","data-disabled":d?"":void 0,disabled:d,id:g,...f,ref:a,onMouseDown:cn(r.onMouseDown,y=>{!d&&y.button===0&&y.ctrlKey===!1?p.onValueChange(l):y.preventDefault()}),onKeyDown:cn(r.onKeyDown,y=>{[" ","Enter"].includes(y.key)&&p.onValueChange(l)}),onFocus:cn(r.onFocus,()=>{const y=p.activationMode!=="manual";!v&&!d&&y&&p.onValueChange(l)})})})});XA.displayName=YA;var JA="TabsContent",ex=R.forwardRef((r,a)=>{const{__scopeTabs:o,value:l,forceMount:d,children:f,...p}=r,h=k0(JA,o),g=tx(h.baseId,l),m=nx(h.baseId,l),v=l===h.value,y=R.useRef(v);return R.useEffect(()=>{const w=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(w)},[]),b.jsx(ea,{present:d||v,children:({present:w})=>b.jsx(pn.div,{"data-state":v?"active":"inactive","data-orientation":h.orientation,role:"tabpanel","aria-labelledby":g,hidden:!w,id:m,tabIndex:0,...p,ref:a,style:{...r.style,animationDuration:y.current?"0s":void 0},children:w&&f})})});ex.displayName=JA;function tx(r,a){return`${r}-trigger-${a}`}function nx(r,a){return`${r}-content-${a}`}var _2=KA,rx=$A,ix=XA,ox=ex;const sx=_2,S0=R.forwardRef(({className:r,...a},o)=>b.jsx(rx,{ref:o,className:ut("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...a}));S0.displayName=rx.displayName;const Xr=R.forwardRef(({className:r,...a},o)=>b.jsx(ix,{ref:o,className:ut("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...a}));Xr.displayName=ix.displayName;const Jr=R.forwardRef(({className:r,...a},o)=>b.jsx(ox,{ref:o,className:ut("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...a}));Jr.displayName=ox.displayName;var w2=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],b2=w2.reduce((r,a)=>{const o=v0(`Primitive.${a}`),l=R.forwardRef((d,f)=>{const{asChild:p,...h}=d,g=p?o:a;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(g,{...h,ref:f})});return l.displayName=`Primitive.${a}`,{...r,[a]:l}},{}),C2="Label",ax=R.forwardRef((r,a)=>b.jsx(b2.label,{...r,ref:a,onMouseDown:o=>{var d;o.target.closest("button, input, select, textarea")||((d=r.onMouseDown)==null||d.call(r,o),!o.defaultPrevented&&o.detail>1&&o.preventDefault())}}));ax.displayName=C2;var lx=ax;const E2=y0("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),jt=R.forwardRef(({className:r,...a},o)=>b.jsx(lx,{ref:o,className:ut(E2(),r),...a}));jt.displayName=lx.displayName;function k2(r){const a=R.useRef({value:r,previous:r});return R.useMemo(()=>(a.current.value!==r&&(a.current.previous=a.current.value,a.current.value=r),a.current.previous),[r])}function S2(r){const[a,o]=R.useState(void 0);return Qs(()=>{if(r){o({width:r.offsetWidth,height:r.offsetHeight});const l=new ResizeObserver(d=>{if(!Array.isArray(d)||!d.length)return;const f=d[0];let p,h;if("borderBoxSize"in f){const g=f.borderBoxSize,m=Array.isArray(g)?g[0]:g;p=m.inlineSize,h=m.blockSize}else p=r.offsetWidth,h=r.offsetHeight;o({width:p,height:h})});return l.observe(r,{box:"border-box"}),()=>l.unobserve(r)}else o(void 0)},[r]),a}var Yc="Checkbox",[B2]=fl(Yc),[P2,B0]=B2(Yc);function T2(r){const{__scopeCheckbox:a,checked:o,children:l,defaultChecked:d,disabled:f,form:p,name:h,onCheckedChange:g,required:m,value:v="on",internal_do_not_use_render:y}=r,[w,T]=jc({prop:o,defaultProp:d??!1,onChange:g,caller:Yc}),[F,k]=R.useState(null),[E,D]=R.useState(null),B=R.useRef(!1),S=F?!!p||!!F.closest("form"):!0,N={checked:w,disabled:f,setChecked:T,control:F,setControl:k,name:h,form:p,value:v,hasConsumerStoppedPropagationRef:B,required:m,defaultChecked:uo(d)?!1:d,isFormControl:S,bubbleInput:E,setBubbleInput:D};return b.jsx(P2,{scope:a,...N,children:D2(y)?y(N):l})}var ux="CheckboxTrigger",cx=R.forwardRef(({__scopeCheckbox:r,onKeyDown:a,onClick:o,...l},d)=>{const{control:f,value:p,disabled:h,checked:g,required:m,setControl:v,setChecked:y,hasConsumerStoppedPropagationRef:w,isFormControl:T,bubbleInput:F}=B0(ux,r),k=vr(d,v),E=R.useRef(g);return R.useEffect(()=>{const D=f==null?void 0:f.form;if(D){const B=()=>y(E.current);return D.addEventListener("reset",B),()=>D.removeEventListener("reset",B)}},[f,y]),b.jsx(pn.button,{type:"button",role:"checkbox","aria-checked":uo(g)?"mixed":g,"aria-required":m,"data-state":mx(g),"data-disabled":h?"":void 0,disabled:h,value:p,...l,ref:k,onKeyDown:cn(a,D=>{D.key==="Enter"&&D.preventDefault()}),onClick:cn(o,D=>{y(B=>uo(B)?!0:!B),F&&T&&(w.current=D.isPropagationStopped(),w.current||D.stopPropagation())})})});cx.displayName=ux;var P0=R.forwardRef((r,a)=>{const{__scopeCheckbox:o,name:l,checked:d,defaultChecked:f,required:p,disabled:h,value:g,onCheckedChange:m,form:v,...y}=r;return b.jsx(T2,{__scopeCheckbox:o,checked:d,defaultChecked:f,disabled:h,required:p,onCheckedChange:m,name:l,form:v,value:g,internal_do_not_use_render:({isFormControl:w})=>b.jsxs(b.Fragment,{children:[b.jsx(cx,{...y,ref:a,__scopeCheckbox:o}),w&&b.jsx(px,{__scopeCheckbox:o})]})})});P0.displayName=Yc;var dx="CheckboxIndicator",fx=R.forwardRef((r,a)=>{const{__scopeCheckbox:o,forceMount:l,...d}=r,f=B0(dx,o);return b.jsx(ea,{present:l||uo(f.checked)||f.checked===!0,children:b.jsx(pn.span,{"data-state":mx(f.checked),"data-disabled":f.disabled?"":void 0,...d,ref:a,style:{pointerEvents:"none",...r.style}})})});fx.displayName=dx;var hx="CheckboxBubbleInput",px=R.forwardRef(({__scopeCheckbox:r,...a},o)=>{const{control:l,hasConsumerStoppedPropagationRef:d,checked:f,defaultChecked:p,required:h,disabled:g,name:m,value:v,form:y,bubbleInput:w,setBubbleInput:T}=B0(hx,r),F=vr(o,T),k=k2(f),E=S2(l);R.useEffect(()=>{const B=w;if(!B)return;const S=window.HTMLInputElement.prototype,M=Object.getOwnPropertyDescriptor(S,"checked").set,z=!d.current;if(k!==f&&M){const H=new Event("click",{bubbles:z});B.indeterminate=uo(f),M.call(B,uo(f)?!1:f),B.dispatchEvent(H)}},[w,k,f,d]);const D=R.useRef(uo(f)?!1:f);return b.jsx(pn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:p??D.current,required:h,disabled:g,name:m,value:v,form:y,...a,tabIndex:-1,ref:F,style:{...a.style,...E,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});px.displayName=hx;function D2(r){return typeof r=="function"}function uo(r){return r==="indeterminate"}function mx(r){return uo(r)?"indeterminate":r?"checked":"unchecked"}const gx=R.forwardRef(({className:r,...a},o)=>b.jsx(P0,{ref:o,className:ut("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...a,children:b.jsx(fx,{className:ut("flex items-center justify-center text-current"),children:b.jsx(Iy,{className:"h-4 w-4"})})}));gx.displayName=P0.displayName;function R2({open:r,contacts:a,undecryptedCount:o,onClose:l,onSelectConversation:d,onCreateContact:f,onCreateChannel:p,onCreateHashtagChannel:h}){const[g,m]=R.useState("existing"),[v,y]=R.useState(""),[w,T]=R.useState(""),[F,k]=R.useState(""),[E,D]=R.useState(!1),[B,S]=R.useState(""),[N,M]=R.useState(!1),z=R.useRef(null),H=async()=>{S(""),M(!0);try{if(g==="new-contact"){if(!v.trim()||!w.trim()){S("Name and public key are required");return}await f(v.trim(),w.trim(),E)}else if(g==="new-room"){if(!v.trim()||!F.trim()){S("Room name and key are required");return}await p(v.trim(),F.trim(),E)}else if(g==="hashtag"){const U=v.trim(),ne=j(U);if(ne){S(ne);return}await h(`#${U}`,E)}l()}catch(U){S(U instanceof Error?U.message:"Failed to create")}finally{M(!1)}},j=U=>U?/^[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*$/.test(U)?null:"Use letters, numbers, and single dashes (no leading/trailing dashes)":"Channel name is required",J=async()=>{var Y;S("");const U=v.trim(),ne=j(U);if(ne){S(ne);return}M(!0);try{await h(`#${U}`,E),y(""),(Y=z.current)==null||Y.focus()}catch(re){S(re instanceof Error?re.message:"Failed to create")}finally{M(!1)}},W=g!=="existing"&&o>0;return b.jsx(C0,{open:r,onOpenChange:U=>!U&&l(),children:b.jsxs(qc,{className:"sm:max-w-[500px]",children:[b.jsxs(Gc,{children:[b.jsx(Kc,{children:"New Conversation"}),b.jsxs(Qc,{className:"sr-only",children:[g==="existing"&&"Select an existing contact to start a conversation",g==="new-contact"&&"Add a new contact by entering their name and public key",g==="new-room"&&"Create a private room with a shared encryption key",g==="hashtag"&&"Join a public hashtag channel"]})]}),b.jsxs(sx,{value:g,onValueChange:U=>m(U),className:"w-full",children:[b.jsxs(S0,{className:"grid w-full grid-cols-4",children:[b.jsx(Xr,{value:"existing",children:"Existing"}),b.jsx(Xr,{value:"new-contact",children:"Contact"}),b.jsx(Xr,{value:"new-room",children:"Room"}),b.jsx(Xr,{value:"hashtag",children:"Hashtag"})]}),b.jsx(Jr,{value:"existing",className:"mt-4",children:b.jsx("div",{className:"max-h-[300px] overflow-y-auto rounded-md border",children:a.length===0?b.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No contacts available"}):a.map(U=>b.jsx("div",{className:"cursor-pointer px-4 py-2 hover:bg-accent",onClick:()=>{d({type:"contact",id:U.public_key,name:Ei(U.name,U.public_key)}),l()},children:Ei(U.name,U.public_key)},U.public_key))})}),b.jsxs(Jr,{value:"new-contact",className:"mt-4 space-y-4",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(jt,{htmlFor:"contact-name",children:"Name"}),b.jsx(tn,{id:"contact-name",value:v,onChange:U=>y(U.target.value),placeholder:"Contact name"})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(jt,{htmlFor:"contact-key",children:"Public Key"}),b.jsx(tn,{id:"contact-key",value:w,onChange:U=>T(U.target.value),placeholder:"64-character hex public key"})]})]}),b.jsxs(Jr,{value:"new-room",className:"mt-4 space-y-4",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(jt,{htmlFor:"room-name",children:"Room Name"}),b.jsx(tn,{id:"room-name",value:v,onChange:U=>y(U.target.value),placeholder:"Room name"})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(jt,{htmlFor:"room-key",children:"Room Key"}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx(tn,{id:"room-key",value:F,onChange:U=>k(U.target.value),placeholder:"Pre-shared key (hex)",className:"flex-1"}),b.jsx(Pn,{type:"button",variant:"outline",size:"icon",onClick:()=>{const U=new Uint8Array(16);crypto.getRandomValues(U);const ne=Array.from(U).map(Y=>Y.toString(16).padStart(2,"0")).join("");k(ne)},title:"Generate random key",children:""})]})]})]}),b.jsx(Jr,{value:"hashtag",className:"mt-4",children:b.jsxs("div",{className:"space-y-2",children:[b.jsx(jt,{htmlFor:"hashtag-name",children:"Hashtag Channel"}),b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsx("span",{className:"text-sm text-muted-foreground",children:"#"}),b.jsx(tn,{ref:z,id:"hashtag-name",value:v,onChange:U=>y(U.target.value),placeholder:"channel-name",className:"flex-1"})]})]})})]}),W&&b.jsxs("div",{className:"space-y-1",children:[b.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[b.jsxs(jt,{htmlFor:"try-historical",className:"text-sm text-muted-foreground cursor-pointer",children:["Try decrypting ",o.toLocaleString()," stored packet",o!==1?"s":""]}),b.jsx(gx,{id:"try-historical",checked:E,onCheckedChange:U=>D(U===!0)})]}),E&&b.jsx("p",{className:"text-xs text-muted-foreground text-right",children:"Messages will stream in as they decrypt in the background"})]}),B&&b.jsx("div",{className:"text-sm text-destructive",children:B}),b.jsxs(E0,{children:[b.jsx(Pn,{variant:"outline",onClick:l,children:"Cancel"}),g==="hashtag"&&b.jsx(Pn,{variant:"secondary",onClick:J,disabled:N,children:N?"Creating...":"Create & Add Another"}),g!=="existing"&&b.jsx(Pn,{onClick:H,disabled:N,children:N?"Creating...":"Create"})]})]})})}var F2=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],N2=F2.reduce((r,a)=>{const o=v0(`Primitive.${a}`),l=R.forwardRef((d,f)=>{const{asChild:p,...h}=d,g=p?o:a;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(g,{...h,ref:f})});return l.displayName=`Primitive.${a}`,{...r,[a]:l}},{}),L2="Separator",fm="horizontal",M2=["horizontal","vertical"],Ax=R.forwardRef((r,a)=>{const{decorative:o,orientation:l=fm,...d}=r,f=I2(l)?l:fm,h=o?{role:"none"}:{"aria-orientation":f==="vertical"?f:void 0,role:"separator"};return b.jsx(N2.div,{"data-orientation":f,...h,...d,ref:a})});Ax.displayName=L2;function I2(r){return M2.includes(r)}var xx=Ax;const Wo=R.forwardRef(({className:r,orientation:a="horizontal",decorative:o=!0,...l},d)=>b.jsx(xx,{ref:d,decorative:o,orientation:a,className:ut("shrink-0 bg-border",a==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",r),...l}));Wo.displayName=xx.displayName;const Wf=[{name:"USA/Canada",freq:910.525,bw:62.5,sf:7,cr:5},{name:"Australia",freq:915.8,bw:250,sf:10,cr:5},{name:"Australia (narrow)",freq:916.575,bw:62.5,sf:7,cr:8},{name:"Australia SA, WA",freq:923.125,bw:62.5,sf:8,cr:8},{name:"Australia QLD",freq:923.125,bw:62.5,sf:8,cr:5},{name:"New Zealand",freq:917.375,bw:250,sf:11,cr:5},{name:"New Zealand (narrow)",freq:917.375,bw:62.5,sf:7,cr:5},{name:"EU/UK/Switzerland Long Range",freq:869.525,bw:250,sf:11,cr:5},{name:"EU/UK/Switzerland Medium Range",freq:869.525,bw:250,sf:10,cr:5},{name:"EU/UK/Switzerland Narrow",freq:869.618,bw:62.5,sf:8,cr:8},{name:"Czech Republic (Narrow)",freq:869.432,bw:62.5,sf:7,cr:5},{name:"EU 433MHz Long Range",freq:433.65,bw:250,sf:11,cr:5},{name:"Portugal 433MHz",freq:433.375,bw:62.5,sf:9,cr:6},{name:"Portugal 868MHz",freq:869.618,bw:62.5,sf:7,cr:6},{name:"Vietnam",freq:920.25,bw:250,sf:11,cr:5}];function O2({open:r,config:a,health:o,appSettings:l,onClose:d,onSave:f,onSaveAppSettings:p,onSetPrivateKey:h,onReboot:g,onAdvertise:m,onHealthRefresh:v}){const[y,w]=R.useState("radio"),[T,F]=R.useState(""),[k,E]=R.useState(""),[D,B]=R.useState(""),[S,N]=R.useState(""),[M,z]=R.useState(""),[H,j]=R.useState(""),[J,W]=R.useState(""),[U,ne]=R.useState(""),[Y,re]=R.useState(""),[fe,ae]=R.useState(""),[he,G]=R.useState(!1),[pe,Z]=R.useState(!1),[P,V]=R.useState(!1),[K,$]=R.useState(!1),[ce,de]=R.useState(""),[Se,Ae]=R.useState("14"),[Ue,Ye]=R.useState(!1),[bt,ct]=R.useState(!1);R.useEffect(()=>{a&&(F(a.name),E(String(a.lat)),B(String(a.lon)),N(String(a.tx_power)),z(String(a.radio.freq)),j(String(a.radio.bw)),W(String(a.radio.sf)),ne(String(a.radio.cr)))},[a]),R.useEffect(()=>{l&&(ae(String(l.max_radio_contacts)),ct(l.auto_decrypt_dm_on_advert))},[l]);const Be=R.useMemo(()=>{const Ce=parseFloat(M),Et=parseFloat(H),Dt=parseInt(J,10),Jt=parseInt(U,10);for(const Ut of Wf)if(Ut.freq===Ce&&Ut.bw===Et&&Ut.sf===Dt&&Ut.cr===Jt)return Ut.name;return"custom"},[M,H,J,U]),Ze=Ce=>{if(Ce==="custom")return;const Et=Wf.find(Dt=>Dt.name===Ce);Et&&(z(String(Et.freq)),j(String(Et.bw)),W(String(Et.sf)),ne(String(Et.cr)))},dt=()=>{if(!navigator.geolocation){xt.error("Geolocation not supported",{description:"Your browser does not support geolocation"});return}$(!0),navigator.geolocation.getCurrentPosition(Ce=>{E(Ce.coords.latitude.toFixed(6)),B(Ce.coords.longitude.toFixed(6)),$(!1),xt.success("Location updated")},Ce=>{$(!1),xt.error("Failed to get location",{description:Ce.message})},{enableHighAccuracy:!0,timeout:1e4})},Mt=async()=>{de(""),G(!0);try{const Ce={lat:parseFloat(k),lon:parseFloat(D),tx_power:parseInt(S,10),radio:{freq:parseFloat(M),bw:parseFloat(H),sf:parseInt(J,10),cr:parseInt(U,10)}};await f(Ce),xt.success("Radio config saved, rebooting..."),G(!1),Z(!0),await g(),d()}catch(Ce){de(Ce instanceof Error?Ce.message:"Failed to save"),G(!1)}finally{Z(!1)}},at=async()=>{de(""),G(!0);try{await f({name:T}),xt.success("Identity saved")}catch(Ce){de(Ce instanceof Error?Ce.message:"Failed to save")}finally{G(!1)}},gt=async()=>{de(""),G(!0);try{const Ce=parseInt(fe,10);!isNaN(Ce)&&Ce!==(l==null?void 0:l.max_radio_contacts)&&await p({max_radio_contacts:Ce}),xt.success("Serial settings saved")}catch(Ce){de(Ce instanceof Error?Ce.message:"Failed to save")}finally{G(!1)}},qe=async()=>{if(!Y.trim()){de("Private key is required");return}de(""),G(!0);try{await h(Y.trim()),re(""),xt.success("Private key set, rebooting..."),G(!1),Z(!0),await g(),d()}catch(Ce){de(Ce instanceof Error?Ce.message:"Failed to set private key"),G(!1)}finally{Z(!1)}},tt=async()=>{if(confirm("Are you sure you want to reboot the radio? The connection will drop temporarily.")){de(""),Z(!0);try{await g(),d()}catch(Ce){de(Ce instanceof Error?Ce.message:"Failed to reboot radio")}finally{Z(!1)}}},nt=async()=>{V(!0);try{await m()}finally{V(!1)}},He=async()=>{const Ce=parseInt(Se,10);if(isNaN(Ce)||Ce<1){xt.error("Invalid retention days",{description:"Retention days must be at least 1"});return}Ye(!0);try{const Et=await et.runMaintenance(Ce);xt.success("Database cleanup complete",{description:`Deleted ${Et.packets_deleted} old packet${Et.packets_deleted===1?"":"s"}`}),await v()}catch(Et){console.error("Failed to run maintenance:",Et),xt.error("Database cleanup failed",{description:Et instanceof Error?Et.message:"Unknown error"})}finally{Ye(!1)}},Ct=async()=>{const Ce=!bt;ct(Ce);try{await p({auto_decrypt_dm_on_advert:Ce})}catch(Et){console.error("Failed to save auto-decrypt setting:",Et),ct(!Ce),xt.error("Failed to save setting")}};return b.jsx(C0,{open:r,onOpenChange:Ce=>!Ce&&d(),children:b.jsxs(qc,{className:"sm:max-w-[500px] max-h-[90vh] overflow-y-auto",children:[b.jsxs(Gc,{children:[b.jsx(Kc,{children:"Radio & Settings"}),b.jsxs(Qc,{className:"sr-only",children:[y==="radio"&&"Configure radio frequency, power, and location settings",y==="identity"&&"Manage radio name, public key, and private key",y==="serial"&&"View serial port connection and configure contact sync",y==="database"&&"View database statistics and clean up old packets",y==="advertise"&&"Send a flood advertisement to announce your presence"]})]}),a?b.jsxs(sx,{value:y,onValueChange:Ce=>w(Ce),className:"w-full",children:[b.jsxs(S0,{className:"grid w-full grid-cols-5",children:[b.jsx(Xr,{value:"radio",children:"Radio"}),b.jsx(Xr,{value:"identity",children:"Identity"}),b.jsx(Xr,{value:"serial",children:"Serial"}),b.jsx(Xr,{value:"database",children:"Database"}),b.jsx(Xr,{value:"advertise",children:"Advertise"})]}),b.jsxs(Jr,{value:"radio",className:"space-y-4 mt-4",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(jt,{htmlFor:"preset",children:"Preset"}),b.jsxs("select",{id:"preset",value:Be,onChange:Ce=>Ze(Ce.target.value),className:"w-full h-10 px-3 rounded-md border border-input bg-background text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:[b.jsx("option",{value:"custom",children:"Custom"}),Wf.map(Ce=>b.jsx("option",{value:Ce.name,children:Ce.name},Ce.name))]})]}),b.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(jt,{htmlFor:"freq",children:"Frequency (MHz)"}),b.jsx(tn,{id:"freq",type:"number",step:"any",value:M,onChange:Ce=>z(Ce.target.value)})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(jt,{htmlFor:"bw",children:"Bandwidth (kHz)"}),b.jsx(tn,{id:"bw",type:"number",step:"any",value:H,onChange:Ce=>j(Ce.target.value)})]})]}),b.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(jt,{htmlFor:"sf",children:"Spreading Factor"}),b.jsx(tn,{id:"sf",type:"number",min:"7",max:"12",value:J,onChange:Ce=>W(Ce.target.value)})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(jt,{htmlFor:"cr",children:"Coding Rate"}),b.jsx(tn,{id:"cr",type:"number",min:"5",max:"8",value:U,onChange:Ce=>ne(Ce.target.value)})]})]}),b.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(jt,{htmlFor:"tx-power",children:"TX Power (dBm)"}),b.jsx(tn,{id:"tx-power",type:"number",value:S,onChange:Ce=>N(Ce.target.value)})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(jt,{htmlFor:"max-tx",children:"Max TX Power"}),b.jsx(tn,{id:"max-tx",type:"number",value:a.max_tx_power,disabled:!0})]})]}),b.jsx(Wo,{}),b.jsxs("div",{className:"space-y-2",children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsx(jt,{children:"Location"}),b.jsx(Pn,{type:"button",variant:"outline",size:"sm",onClick:dt,disabled:K,children:K?"Getting...":" Use My Location"})]}),b.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(jt,{htmlFor:"lat",className:"text-xs text-muted-foreground",children:"Latitude"}),b.jsx(tn,{id:"lat",type:"number",step:"any",value:k,onChange:Ce=>E(Ce.target.value)})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(jt,{htmlFor:"lon",className:"text-xs text-muted-foreground",children:"Longitude"}),b.jsx(tn,{id:"lon",type:"number",step:"any",value:D,onChange:Ce=>B(Ce.target.value)})]})]})]}),ce&&b.jsx("div",{className:"text-sm text-destructive",children:ce}),b.jsx(Pn,{onClick:Mt,disabled:he||pe,className:"w-full",children:he||pe?"Saving & Rebooting...":"Save Radio Config & Reboot"})]}),b.jsxs(Jr,{value:"identity",className:"space-y-4 mt-4",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(jt,{htmlFor:"public-key",children:"Public Key"}),b.jsx(tn,{id:"public-key",value:a.public_key,disabled:!0,className:"font-mono text-xs"})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(jt,{htmlFor:"name",children:"Radio Name"}),b.jsx(tn,{id:"name",value:T,onChange:Ce=>F(Ce.target.value)})]}),b.jsx(Pn,{onClick:at,disabled:he,className:"w-full",children:he?"Saving...":"Set Name"}),b.jsx(Wo,{}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(jt,{htmlFor:"private-key",children:"Set Private Key (write-only)"}),b.jsx(tn,{id:"private-key",type:"password",autoComplete:"off",value:Y,onChange:Ce=>re(Ce.target.value),placeholder:"64-character hex private key"}),b.jsx(Pn,{onClick:qe,disabled:he||pe||!Y.trim(),className:"w-full",children:he||pe?"Setting & Rebooting...":"Set Private Key & Reboot"})]}),ce&&b.jsx("div",{className:"text-sm text-destructive",children:ce})]}),b.jsxs(Jr,{value:"serial",className:"space-y-4 mt-4",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(jt,{children:"Serial Port"}),o!=null&&o.serial_port?b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),b.jsx("code",{className:"px-2 py-1 bg-muted rounded text-foreground text-sm",children:o.serial_port})]}):b.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[b.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500"}),b.jsx("span",{children:"Not connected"})]})]}),b.jsx(Wo,{}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(jt,{htmlFor:"max-contacts",children:"Max Contacts on Radio"}),b.jsx(tn,{id:"max-contacts",type:"number",min:"1",max:"1000",value:fe,onChange:Ce=>ae(Ce.target.value)}),b.jsx("p",{className:"text-xs text-muted-foreground",children:"Recent non-repeater contacts loaded to radio for DM auto-ACK (1-1000)"})]}),b.jsx(Pn,{onClick:gt,disabled:he,className:"w-full",children:he?"Saving...":"Save Settings"}),b.jsx(Wo,{}),b.jsx(Pn,{variant:"outline",onClick:tt,disabled:pe||he,className:"w-full border-red-500/50 text-red-400 hover:bg-red-500/10",children:pe?"Rebooting...":"Reboot Radio"}),ce&&b.jsx("div",{className:"text-sm text-destructive",children:ce})]}),b.jsxs(Jr,{value:"database",className:"space-y-4 mt-4",children:[b.jsxs("div",{className:"space-y-3",children:[b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("span",{className:"text-sm text-muted-foreground",children:"Database size"}),b.jsxs("span",{className:"font-medium",children:[(o==null?void 0:o.database_size_mb)??"?"," MB"]})]}),o!=null&&o.oldest_undecrypted_timestamp?b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("span",{className:"text-sm text-muted-foreground",children:"Oldest undecrypted packet"}),b.jsxs("span",{className:"font-medium",children:[Ks(o.oldest_undecrypted_timestamp),b.jsxs("span",{className:"text-muted-foreground ml-1",children:["(",Math.floor((Date.now()/1e3-o.oldest_undecrypted_timestamp)/86400)," ","days old)"]})]})]}):b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("span",{className:"text-sm text-muted-foreground",children:"Oldest undecrypted packet"}),b.jsx("span",{className:"text-muted-foreground",children:"None"})]})]}),b.jsx(Wo,{}),b.jsxs("div",{className:"space-y-3",children:[b.jsx(jt,{children:"Cleanup Old Packets"}),b.jsx("p",{className:"text-xs text-muted-foreground",children:"Delete undecrypted packets older than the specified days. This helps manage storage for packets that couldn't be decrypted (unknown channel keys)."}),b.jsxs("div",{className:"flex gap-2 items-end",children:[b.jsxs("div",{className:"space-y-1",children:[b.jsx(jt,{htmlFor:"retention-days",className:"text-xs",children:"Days to retain"}),b.jsx(tn,{id:"retention-days",type:"number",min:"1",max:"365",value:Se,onChange:Ce=>Ae(Ce.target.value),className:"w-24"})]}),b.jsx(Pn,{variant:"outline",onClick:He,disabled:Ue,children:Ue?"Cleaning...":"Cleanup"})]})]}),b.jsx(Wo,{}),b.jsxs("div",{className:"space-y-3",children:[b.jsx(jt,{children:"DM Decryption"}),b.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:Ct,children:[b.jsx("input",{type:"checkbox",checked:bt,readOnly:!0,className:"w-4 h-4 rounded border-input accent-primary pointer-events-none"}),b.jsx("span",{className:"text-sm",children:"Auto-decrypt historical DMs when new contact advertises"})]}),b.jsx("p",{className:"text-xs text-muted-foreground",children:"When enabled, the server will automatically try to decrypt stored DM packets when a new contact sends an advertisement. This may cause brief delays on large packet backlogs."})]})]}),b.jsx(Jr,{value:"advertise",className:"space-y-4 mt-4",children:b.jsxs("div",{className:"text-center py-8",children:[b.jsx("p",{className:"text-muted-foreground mb-6",children:"Send a flood advertisement to announce your presence on the mesh network."}),b.jsx(Pn,{size:"lg",onClick:nt,disabled:P||!(o!=null&&o.radio_connected),className:"bg-green-600 hover:bg-green-700 text-white px-12 py-6 text-lg",children:P?"Sending...":"Send Advertisement"}),!(o!=null&&o.radio_connected)&&b.jsx("p",{className:"text-sm text-destructive mt-4",children:"Radio not connected"})]})})]}):b.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"Loading configuration..."})]})})}function j2(r){return new Date(r*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}function hm(r){return r.split("_").map(a=>a.charAt(0)+a.slice(1).toLowerCase()).join(" ")}function z2(r){if(!r.decrypted||!r.decrypted_info)return hm(r.payload_type);const a=r.decrypted_info;return r.payload_type==="GROUP_TEXT"&&a.channel_name?`GroupText to ${a.channel_name}`:r.payload_type==="TEXT_MESSAGE"&&a.sender?`TextMessage from ${a.sender}`:hm(r.payload_type)}function H2(r){const a=[];return r.snr!==null&&r.snr!==void 0&&a.push(`SNR: ${r.snr.toFixed(1)} dB`),r.rssi!==null&&r.rssi!==void 0&&a.push(`RSSI: ${r.rssi} dBm`),a.join(" | ")}function V2({packets:r}){const a=R.useRef(null);if(R.useEffect(()=>{a.current&&(a.current.scrollTop=a.current.scrollHeight)},[r]),r.length===0)return b.jsx("div",{className:"h-full overflow-y-auto p-5 text-center text-muted-foreground",children:"No packets received yet. Packets will appear here in real-time."});const o=[...r].sort((l,d)=>l.timestamp-d.timestamp);return b.jsx("div",{className:"h-full overflow-y-auto p-4 flex flex-col gap-3",ref:a,children:o.map(l=>b.jsxs("div",{className:"py-2 px-3 bg-muted rounded",children:[b.jsxs("div",{className:l.decrypted?"text-primary":"text-destructive",children:[!l.decrypted&&b.jsx("span",{className:"mr-1",children:""}),z2(l),"  ",j2(l.timestamp)]}),(l.snr!==null||l.rssi!==null)&&b.jsx("div",{className:"text-[11px] text-muted-foreground mt-0.5",children:H2(l)}),b.jsx("div",{className:"font-mono text-[11px] break-all text-muted-foreground/70 mt-1",children:l.data.toUpperCase()})]},l.id))})}function vx(r,a){const o=R.useRef(a);R.useEffect(function(){a!==o.current&&r.attributionControl!=null&&(o.current!=null&&r.attributionControl.removeAttribution(o.current),a!=null&&r.attributionControl.addAttribution(a)),o.current=a},[r,a])}function U2(r,a,o){a.center!==o.center&&r.setLatLng(a.center),a.radius!=null&&a.radius!==o.radius&&r.setRadius(a.radius)}const Z2=1;function W2(r){return Object.freeze({__version:Z2,map:r})}function q2(r,a){return Object.freeze({...r,...a})}const yx=R.createContext(null),_x=yx.Provider;function Xc(){const r=R.useContext(yx);if(r==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return r}function G2(r){function a(o,l){const{instance:d,context:f}=r(o).current;return R.useImperativeHandle(l,()=>d),o.children==null?null:Ee.createElement(_x,{value:f},o.children)}return R.forwardRef(a)}function K2(r){function a(o,l){const[d,f]=R.useState(!1),{instance:p}=r(o,f).current;R.useImperativeHandle(l,()=>p),R.useEffect(function(){d&&p.update()},[p,d,o.children]);const h=p._contentNode;return h?g0.createPortal(o.children,h):null}return R.forwardRef(a)}function Q2(r){function a(o,l){const{instance:d}=r(o).current;return R.useImperativeHandle(l,()=>d),null}return R.forwardRef(a)}function T0(r,a){const o=R.useRef();R.useEffect(function(){return a!=null&&r.instance.on(a),o.current=a,function(){o.current!=null&&r.instance.off(o.current),o.current=null}},[r,a])}function Jc(r,a){const o=r.pane??a.pane;return o?{...r,pane:o}:r}function $2(r,a){return function(l,d){const f=Xc(),p=r(Jc(l,f),f);return vx(f.map,l.attribution),T0(p.current,l.eventHandlers),a(p.current,f,l,d),p}}var ol={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var Y2=ol.exports,pm;function X2(){return pm||(pm=1,(function(r,a){(function(o,l){l(a)})(Y2,(function(o){var l="1.9.4";function d(t){var i,u,A,C;for(u=1,A=arguments.length;u<A;u++){C=arguments[u];for(i in C)t[i]=C[i]}return t}var f=Object.create||(function(){function t(){}return function(i){return t.prototype=i,new t}})();function p(t,i){var u=Array.prototype.slice;if(t.bind)return t.bind.apply(t,u.call(arguments,1));var A=u.call(arguments,2);return function(){return t.apply(i,A.length?A.concat(u.call(arguments)):arguments)}}var h=0;function g(t){return"_leaflet_id"in t||(t._leaflet_id=++h),t._leaflet_id}function m(t,i,u){var A,C,O,Q;return Q=function(){A=!1,C&&(O.apply(u,C),C=!1)},O=function(){A?C=arguments:(t.apply(u,arguments),setTimeout(Q,i),A=!0)},O}function v(t,i,u){var A=i[1],C=i[0],O=A-C;return t===A&&u?t:((t-C)%O+O)%O+C}function y(){return!1}function w(t,i){if(i===!1)return t;var u=Math.pow(10,i===void 0?6:i);return Math.round(t*u)/u}function T(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function F(t){return T(t).split(/\s+/)}function k(t,i){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?f(t.options):{});for(var u in i)t.options[u]=i[u];return t.options}function E(t,i,u){var A=[];for(var C in t)A.push(encodeURIComponent(u?C.toUpperCase():C)+"="+encodeURIComponent(t[C]));return(!i||i.indexOf("?")===-1?"?":"&")+A.join("&")}var D=/\{ *([\w_ -]+) *\}/g;function B(t,i){return t.replace(D,function(u,A){var C=i[A];if(C===void 0)throw new Error("No value provided for variable "+u);return typeof C=="function"&&(C=C(i)),C})}var S=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function N(t,i){for(var u=0;u<t.length;u++)if(t[u]===i)return u;return-1}var M="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function z(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var H=0;function j(t){var i=+new Date,u=Math.max(0,16-(i-H));return H=i+u,window.setTimeout(t,u)}var J=window.requestAnimationFrame||z("RequestAnimationFrame")||j,W=window.cancelAnimationFrame||z("CancelAnimationFrame")||z("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function U(t,i,u){if(u&&J===j)t.call(i);else return J.call(window,p(t,i))}function ne(t){t&&W.call(window,t)}var Y={__proto__:null,extend:d,create:f,bind:p,get lastId(){return h},stamp:g,throttle:m,wrapNum:v,falseFn:y,formatNum:w,trim:T,splitWords:F,setOptions:k,getParamString:E,template:B,isArray:S,indexOf:N,emptyImageUrl:M,requestFn:J,cancelFn:W,requestAnimFrame:U,cancelAnimFrame:ne};function re(){}re.extend=function(t){var i=function(){k(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=i.__super__=this.prototype,A=f(u);A.constructor=i,i.prototype=A;for(var C in this)Object.prototype.hasOwnProperty.call(this,C)&&C!=="prototype"&&C!=="__super__"&&(i[C]=this[C]);return t.statics&&d(i,t.statics),t.includes&&(fe(t.includes),d.apply(null,[A].concat(t.includes))),d(A,t),delete A.statics,delete A.includes,A.options&&(A.options=u.options?f(u.options):{},d(A.options,t.options)),A._initHooks=[],A.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var O=0,Q=A._initHooks.length;O<Q;O++)A._initHooks[O].call(this)}},i},re.include=function(t){var i=this.prototype.options;return d(this.prototype,t),t.options&&(this.prototype.options=i,this.mergeOptions(t.options)),this},re.mergeOptions=function(t){return d(this.prototype.options,t),this},re.addInitHook=function(t){var i=Array.prototype.slice.call(arguments,1),u=typeof t=="function"?t:function(){this[t].apply(this,i)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};function fe(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=S(t)?t:[t];for(var i=0;i<t.length;i++)t[i]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ae={on:function(t,i,u){if(typeof t=="object")for(var A in t)this._on(A,t[A],i);else{t=F(t);for(var C=0,O=t.length;C<O;C++)this._on(t[C],i,u)}return this},off:function(t,i,u){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var A in t)this._off(A,t[A],i);else{t=F(t);for(var C=arguments.length===1,O=0,Q=t.length;O<Q;O++)C?this._off(t[O]):this._off(t[O],i,u)}return this},_on:function(t,i,u,A){if(typeof i!="function"){console.warn("wrong listener type: "+typeof i);return}if(this._listens(t,i,u)===!1){u===this&&(u=void 0);var C={fn:i,ctx:u};A&&(C.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(C)}},_off:function(t,i,u){var A,C,O;if(this._events&&(A=this._events[t],!!A)){if(arguments.length===1){if(this._firingCount)for(C=0,O=A.length;C<O;C++)A[C].fn=y;delete this._events[t];return}if(typeof i!="function"){console.warn("wrong listener type: "+typeof i);return}var Q=this._listens(t,i,u);if(Q!==!1){var ie=A[Q];this._firingCount&&(ie.fn=y,this._events[t]=A=A.slice()),A.splice(Q,1)}}},fire:function(t,i,u){if(!this.listens(t,u))return this;var A=d({},i,{type:t,target:this,sourceTarget:i&&i.sourceTarget||this});if(this._events){var C=this._events[t];if(C){this._firingCount=this._firingCount+1||1;for(var O=0,Q=C.length;O<Q;O++){var ie=C[O],le=ie.fn;ie.once&&this.off(t,le,ie.ctx),le.call(ie.ctx||this,A)}this._firingCount--}}return u&&this._propagateEvent(A),this},listens:function(t,i,u,A){typeof t!="string"&&console.warn('"string" type argument expected');var C=i;typeof i!="function"&&(A=!!i,C=void 0,u=void 0);var O=this._events&&this._events[t];if(O&&O.length&&this._listens(t,C,u)!==!1)return!0;if(A){for(var Q in this._eventParents)if(this._eventParents[Q].listens(t,i,u,A))return!0}return!1},_listens:function(t,i,u){if(!this._events)return!1;var A=this._events[t]||[];if(!i)return!!A.length;u===this&&(u=void 0);for(var C=0,O=A.length;C<O;C++)if(A[C].fn===i&&A[C].ctx===u)return C;return!1},once:function(t,i,u){if(typeof t=="object")for(var A in t)this._on(A,t[A],i,!0);else{t=F(t);for(var C=0,O=t.length;C<O;C++)this._on(t[C],i,u,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[g(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[g(t)],this},_propagateEvent:function(t){for(var i in this._eventParents)this._eventParents[i].fire(t.type,d({layer:t.target,propagatedFrom:t.target},t),!0)}};ae.addEventListener=ae.on,ae.removeEventListener=ae.clearAllEventListeners=ae.off,ae.addOneTimeEventListener=ae.once,ae.fireEvent=ae.fire,ae.hasEventListeners=ae.listens;var he=re.extend(ae);function G(t,i,u){this.x=u?Math.round(t):t,this.y=u?Math.round(i):i}var pe=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};G.prototype={clone:function(){return new G(this.x,this.y)},add:function(t){return this.clone()._add(Z(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(Z(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new G(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new G(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=pe(this.x),this.y=pe(this.y),this},distanceTo:function(t){t=Z(t);var i=t.x-this.x,u=t.y-this.y;return Math.sqrt(i*i+u*u)},equals:function(t){return t=Z(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=Z(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+w(this.x)+", "+w(this.y)+")"}};function Z(t,i,u){return t instanceof G?t:S(t)?new G(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new G(t.x,t.y):new G(t,i,u)}function P(t,i){if(t)for(var u=i?[t,i]:t,A=0,C=u.length;A<C;A++)this.extend(u[A])}P.prototype={extend:function(t){var i,u;if(!t)return this;if(t instanceof G||typeof t[0]=="number"||"x"in t)i=u=Z(t);else if(t=V(t),i=t.min,u=t.max,!i||!u)return this;return!this.min&&!this.max?(this.min=i.clone(),this.max=u.clone()):(this.min.x=Math.min(i.x,this.min.x),this.max.x=Math.max(u.x,this.max.x),this.min.y=Math.min(i.y,this.min.y),this.max.y=Math.max(u.y,this.max.y)),this},getCenter:function(t){return Z((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return Z(this.min.x,this.max.y)},getTopRight:function(){return Z(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var i,u;return typeof t[0]=="number"||t instanceof G?t=Z(t):t=V(t),t instanceof P?(i=t.min,u=t.max):i=u=t,i.x>=this.min.x&&u.x<=this.max.x&&i.y>=this.min.y&&u.y<=this.max.y},intersects:function(t){t=V(t);var i=this.min,u=this.max,A=t.min,C=t.max,O=C.x>=i.x&&A.x<=u.x,Q=C.y>=i.y&&A.y<=u.y;return O&&Q},overlaps:function(t){t=V(t);var i=this.min,u=this.max,A=t.min,C=t.max,O=C.x>i.x&&A.x<u.x,Q=C.y>i.y&&A.y<u.y;return O&&Q},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var i=this.min,u=this.max,A=Math.abs(i.x-u.x)*t,C=Math.abs(i.y-u.y)*t;return V(Z(i.x-A,i.y-C),Z(u.x+A,u.y+C))},equals:function(t){return t?(t=V(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function V(t,i){return!t||t instanceof P?t:new P(t,i)}function K(t,i){if(t)for(var u=i?[t,i]:t,A=0,C=u.length;A<C;A++)this.extend(u[A])}K.prototype={extend:function(t){var i=this._southWest,u=this._northEast,A,C;if(t instanceof ce)A=t,C=t;else if(t instanceof K){if(A=t._southWest,C=t._northEast,!A||!C)return this}else return t?this.extend(de(t)||$(t)):this;return!i&&!u?(this._southWest=new ce(A.lat,A.lng),this._northEast=new ce(C.lat,C.lng)):(i.lat=Math.min(A.lat,i.lat),i.lng=Math.min(A.lng,i.lng),u.lat=Math.max(C.lat,u.lat),u.lng=Math.max(C.lng,u.lng)),this},pad:function(t){var i=this._southWest,u=this._northEast,A=Math.abs(i.lat-u.lat)*t,C=Math.abs(i.lng-u.lng)*t;return new K(new ce(i.lat-A,i.lng-C),new ce(u.lat+A,u.lng+C))},getCenter:function(){return new ce((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ce(this.getNorth(),this.getWest())},getSouthEast:function(){return new ce(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof ce||"lat"in t?t=de(t):t=$(t);var i=this._southWest,u=this._northEast,A,C;return t instanceof K?(A=t.getSouthWest(),C=t.getNorthEast()):A=C=t,A.lat>=i.lat&&C.lat<=u.lat&&A.lng>=i.lng&&C.lng<=u.lng},intersects:function(t){t=$(t);var i=this._southWest,u=this._northEast,A=t.getSouthWest(),C=t.getNorthEast(),O=C.lat>=i.lat&&A.lat<=u.lat,Q=C.lng>=i.lng&&A.lng<=u.lng;return O&&Q},overlaps:function(t){t=$(t);var i=this._southWest,u=this._northEast,A=t.getSouthWest(),C=t.getNorthEast(),O=C.lat>i.lat&&A.lat<u.lat,Q=C.lng>i.lng&&A.lng<u.lng;return O&&Q},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,i){return t?(t=$(t),this._southWest.equals(t.getSouthWest(),i)&&this._northEast.equals(t.getNorthEast(),i)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function $(t,i){return t instanceof K?t:new K(t,i)}function ce(t,i,u){if(isNaN(t)||isNaN(i))throw new Error("Invalid LatLng object: ("+t+", "+i+")");this.lat=+t,this.lng=+i,u!==void 0&&(this.alt=+u)}ce.prototype={equals:function(t,i){if(!t)return!1;t=de(t);var u=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return u<=(i===void 0?1e-9:i)},toString:function(t){return"LatLng("+w(this.lat,t)+", "+w(this.lng,t)+")"},distanceTo:function(t){return Ae.distance(this,de(t))},wrap:function(){return Ae.wrapLatLng(this)},toBounds:function(t){var i=180*t/40075017,u=i/Math.cos(Math.PI/180*this.lat);return $([this.lat-i,this.lng-u],[this.lat+i,this.lng+u])},clone:function(){return new ce(this.lat,this.lng,this.alt)}};function de(t,i,u){return t instanceof ce?t:S(t)&&typeof t[0]!="object"?t.length===3?new ce(t[0],t[1],t[2]):t.length===2?new ce(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new ce(t.lat,"lng"in t?t.lng:t.lon,t.alt):i===void 0?null:new ce(t,i,u)}var Se={latLngToPoint:function(t,i){var u=this.projection.project(t),A=this.scale(i);return this.transformation._transform(u,A)},pointToLatLng:function(t,i){var u=this.scale(i),A=this.transformation.untransform(t,u);return this.projection.unproject(A)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var i=this.projection.bounds,u=this.scale(t),A=this.transformation.transform(i.min,u),C=this.transformation.transform(i.max,u);return new P(A,C)},infinite:!1,wrapLatLng:function(t){var i=this.wrapLng?v(t.lng,this.wrapLng,!0):t.lng,u=this.wrapLat?v(t.lat,this.wrapLat,!0):t.lat,A=t.alt;return new ce(u,i,A)},wrapLatLngBounds:function(t){var i=t.getCenter(),u=this.wrapLatLng(i),A=i.lat-u.lat,C=i.lng-u.lng;if(A===0&&C===0)return t;var O=t.getSouthWest(),Q=t.getNorthEast(),ie=new ce(O.lat-A,O.lng-C),le=new ce(Q.lat-A,Q.lng-C);return new K(ie,le)}},Ae=d({},Se,{wrapLng:[-180,180],R:6371e3,distance:function(t,i){var u=Math.PI/180,A=t.lat*u,C=i.lat*u,O=Math.sin((i.lat-t.lat)*u/2),Q=Math.sin((i.lng-t.lng)*u/2),ie=O*O+Math.cos(A)*Math.cos(C)*Q*Q,le=2*Math.atan2(Math.sqrt(ie),Math.sqrt(1-ie));return this.R*le}}),Ue=6378137,Ye={R:Ue,MAX_LATITUDE:85.0511287798,project:function(t){var i=Math.PI/180,u=this.MAX_LATITUDE,A=Math.max(Math.min(u,t.lat),-u),C=Math.sin(A*i);return new G(this.R*t.lng*i,this.R*Math.log((1+C)/(1-C))/2)},unproject:function(t){var i=180/Math.PI;return new ce((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*i,t.x*i/this.R)},bounds:(function(){var t=Ue*Math.PI;return new P([-t,-t],[t,t])})()};function bt(t,i,u,A){if(S(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=i,this._c=u,this._d=A}bt.prototype={transform:function(t,i){return this._transform(t.clone(),i)},_transform:function(t,i){return i=i||1,t.x=i*(this._a*t.x+this._b),t.y=i*(this._c*t.y+this._d),t},untransform:function(t,i){return i=i||1,new G((t.x/i-this._b)/this._a,(t.y/i-this._d)/this._c)}};function ct(t,i,u,A){return new bt(t,i,u,A)}var Be=d({},Ae,{code:"EPSG:3857",projection:Ye,transformation:(function(){var t=.5/(Math.PI*Ye.R);return ct(t,.5,-t,.5)})()}),Ze=d({},Be,{code:"EPSG:900913"});function dt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Mt(t,i){var u="",A,C,O,Q,ie,le;for(A=0,O=t.length;A<O;A++){for(ie=t[A],C=0,Q=ie.length;C<Q;C++)le=ie[C],u+=(C?"L":"M")+le.x+" "+le.y;u+=i?De.svg?"z":"x":""}return u||"M0 0"}var at=document.documentElement.style,gt="ActiveXObject"in window,qe=gt&&!document.addEventListener,tt="msLaunchUri"in navigator&&!("documentMode"in document),nt=$t("webkit"),He=$t("android"),Ct=$t("android 2")||$t("android 3"),Ce=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Et=He&&$t("Google")&&Ce<537&&!("AudioNode"in window),Dt=!!window.opera,Jt=!tt&&$t("chrome"),Ut=$t("gecko")&&!nt&&!Dt&&!gt,Tn=!Jt&&$t("safari"),Kt=$t("phantom"),Ft="OTransition"in at,Qt=navigator.platform.indexOf("Win")===0,qn=gt&&"transition"in at,yn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ct,me="MozPerspective"in at,be=!window.L_DISABLE_3D&&(qn||yn||me)&&!Ft&&!Kt,Re=typeof orientation<"u"||$t("mobile"),ot=Re&&nt,te=Re&&yn,ge=!window.PointerEvent&&window.MSPointerEvent,ye=!!(window.PointerEvent||ge),Te="ontouchstart"in window||!!window.TouchEvent,Qe=!window.L_NO_TOUCH&&(Te||ye),Fe=Re&&Dt,vt=Re&&Ut,Rt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,zt=(function(){var t=!1;try{var i=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",y,i),window.removeEventListener("testPassiveEventSupport",y,i)}catch{}return t})(),Mn=(function(){return!!document.createElement("canvas").getContext})(),st=!!(document.createElementNS&&dt("svg").createSVGRect),Bt=!!st&&(function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Gn=!st&&(function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var i=t.firstChild;return i.style.behavior="url(#default#VML)",i&&typeof i.adj=="object"}catch{return!1}})(),yt=navigator.platform.indexOf("Mac")===0,Ht=navigator.platform.indexOf("Linux")===0;function $t(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var De={ie:gt,ielt9:qe,edge:tt,webkit:nt,android:He,android23:Ct,androidStock:Et,opera:Dt,chrome:Jt,gecko:Ut,safari:Tn,phantom:Kt,opera12:Ft,win:Qt,ie3d:qn,webkit3d:yn,gecko3d:me,any3d:be,mobile:Re,mobileWebkit:ot,mobileWebkit3d:te,msPointer:ge,pointer:ye,touch:Qe,touchNative:Te,mobileOpera:Fe,mobileGecko:vt,retina:Rt,passiveEvents:zt,canvas:Mn,svg:st,vml:Gn,inlineSvg:Bt,mac:yt,linux:Ht},Si=De.msPointer?"MSPointerDown":"pointerdown",es=De.msPointer?"MSPointerMove":"pointermove",ml=De.msPointer?"MSPointerUp":"pointerup",gl=De.msPointer?"MSPointerCancel":"pointercancel",ta={touchstart:Si,touchmove:es,touchend:ml,touchcancel:gl},Mr={touchstart:Zt,touchmove:ts,touchend:ts,touchcancel:ts},ti={},na=!1;function od(t,i,u){return i==="touchstart"&&sd(),Mr[i]?(u=Mr[i].bind(this,u),t.addEventListener(ta[i],u,!1),u):(console.warn("wrong event specified:",i),y)}function Al(t,i,u){if(!ta[i]){console.warn("wrong event specified:",i);return}t.removeEventListener(ta[i],u,!1)}function xl(t){ti[t.pointerId]=t}function vl(t){ti[t.pointerId]&&(ti[t.pointerId]=t)}function ra(t){delete ti[t.pointerId]}function sd(){na||(document.addEventListener(Si,xl,!0),document.addEventListener(es,vl,!0),document.addEventListener(ml,ra,!0),document.addEventListener(gl,ra,!0),na=!0)}function ts(t,i){if(i.pointerType!==(i.MSPOINTER_TYPE_MOUSE||"mouse")){i.touches=[];for(var u in ti)i.touches.push(ti[u]);i.changedTouches=[i],t(i)}}function Zt(t,i){i.MSPOINTER_TYPE_TOUCH&&i.pointerType===i.MSPOINTER_TYPE_TOUCH&&Wt(i),ts(t,i)}function ad(t){var i={},u,A;for(A in t)u=t[A],i[A]=u&&u.bind?u.bind(t):u;return t=i,i.type="dblclick",i.detail=2,i.isTrusted=!1,i._simulated=!0,i}var ia=200;function yl(t,i){t.addEventListener("dblclick",i);var u=0,A;function C(O){if(O.detail!==1){A=O.detail;return}if(!(O.pointerType==="mouse"||O.sourceCapabilities&&!O.sourceCapabilities.firesTouchEvents)){var Q=ii(O);if(!(Q.some(function(le){return le instanceof HTMLLabelElement&&le.attributes.for})&&!Q.some(function(le){return le instanceof HTMLInputElement||le instanceof HTMLSelectElement}))){var ie=Date.now();ie-u<=ia?(A++,A===2&&i(ad(O))):A=1,u=ie}}}return t.addEventListener("click",C),{dblclick:i,simDblclick:C}}function ns(t,i){t.removeEventListener("dblclick",i.dblclick),t.removeEventListener("click",i.simDblclick)}var oa=Di(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Bi=Di(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ho=Bi==="webkitTransition"||Bi==="OTransition"?Bi+"End":"transitionend";function Kn(t){return typeof t=="string"?document.getElementById(t):t}function po(t,i){var u=t.style[i]||t.currentStyle&&t.currentStyle[i];if((!u||u==="auto")&&document.defaultView){var A=document.defaultView.getComputedStyle(t,null);u=A?A[i]:null}return u==="auto"?null:u}function rt(t,i,u){var A=document.createElement(t);return A.className=i||"",u&&u.appendChild(A),A}function It(t){var i=t.parentNode;i&&i.removeChild(t)}function rs(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Pi(t){var i=t.parentNode;i&&i.lastChild!==t&&i.appendChild(t)}function yr(t){var i=t.parentNode;i&&i.firstChild!==t&&i.insertBefore(t,i.firstChild)}function Ti(t,i){if(t.classList!==void 0)return t.classList.contains(i);var u=is(t);return u.length>0&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(u)}function Je(t,i){if(t.classList!==void 0)for(var u=F(i),A=0,C=u.length;A<C;A++)t.classList.add(u[A]);else if(!Ti(t,i)){var O=is(t);sa(t,(O?O+" ":"")+i)}}function Nt(t,i){t.classList!==void 0?t.classList.remove(i):sa(t,T((" "+is(t)+" ").replace(" "+i+" "," ")))}function sa(t,i){t.className.baseVal===void 0?t.className=i:t.className.baseVal=i}function is(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function _n(t,i){"opacity"in t.style?t.style.opacity=i:"filter"in t.style&&_l(t,i)}function _l(t,i){var u=!1,A="DXImageTransform.Microsoft.Alpha";try{u=t.filters.item(A)}catch{if(i===1)return}i=Math.round(i*100),u?(u.Enabled=i!==100,u.Opacity=i):t.style.filter+=" progid:"+A+"(opacity="+i+")"}function Di(t){for(var i=document.documentElement.style,u=0;u<t.length;u++)if(t[u]in i)return t[u];return!1}function Qn(t,i,u){var A=i||new G(0,0);t.style[oa]=(De.ie3d?"translate("+A.x+"px,"+A.y+"px)":"translate3d("+A.x+"px,"+A.y+"px,0)")+(u?" scale("+u+")":"")}function Yt(t,i){t._leaflet_pos=i,De.any3d?Qn(t,i):(t.style.left=i.x+"px",t.style.top=i.y+"px")}function _r(t){return t._leaflet_pos||new G(0,0)}var At,Ri,os;if("onselectstart"in document)At=function(){$e(window,"selectstart",Wt)},Ri=function(){Pt(window,"selectstart",Wt)};else{var ni=Di(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);At=function(){if(ni){var t=document.documentElement.style;os=t[ni],t[ni]="none"}},Ri=function(){ni&&(document.documentElement.style[ni]=os,os=void 0)}}function ss(){$e(window,"dragstart",Wt)}function as(){Pt(window,"dragstart",Wt)}var mo,go;function Fi(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&($n(),mo=t,go=t.style.outlineStyle,t.style.outlineStyle="none",$e(window,"keydown",$n))}function $n(){mo&&(mo.style.outlineStyle=go,mo=void 0,go=void 0,Pt(window,"keydown",$n))}function wr(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function ar(t){var i=t.getBoundingClientRect();return{x:i.width/t.offsetWidth||1,y:i.height/t.offsetHeight||1,boundingClientRect:i}}var Ao={__proto__:null,TRANSFORM:oa,TRANSITION:Bi,TRANSITION_END:ho,get:Kn,getStyle:po,create:rt,remove:It,empty:rs,toFront:Pi,toBack:yr,hasClass:Ti,addClass:Je,removeClass:Nt,setClass:sa,getClass:is,setOpacity:_n,testProp:Di,setTransform:Qn,setPosition:Yt,getPosition:_r,get disableTextSelection(){return At},get enableTextSelection(){return Ri},disableImageDrag:ss,enableImageDrag:as,preventOutline:Fi,restoreOutline:$n,getSizedParentNode:wr,getScale:ar};function $e(t,i,u,A){if(i&&typeof i=="object")for(var C in i)la(t,C,i[C],u);else{i=F(i);for(var O=0,Q=i.length;O<Q;O++)la(t,i[O],u,A)}return this}var on="_leaflet_events";function Pt(t,i,u,A){if(arguments.length===1)aa(t),delete t[on];else if(i&&typeof i=="object")for(var C in i)ls(t,C,i[C],u);else if(i=F(i),arguments.length===2)aa(t,function(ie){return N(i,ie)!==-1});else for(var O=0,Q=i.length;O<Q;O++)ls(t,i[O],u,A);return this}function aa(t,i){for(var u in t[on]){var A=u.split(/\d/)[0];(!i||i(A))&&ls(t,A,null,null,u)}}var ri={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function la(t,i,u,A){var C=i+g(u)+(A?"_"+g(A):"");if(t[on]&&t[on][C])return this;var O=function(ie){return u.call(A||t,ie||window.event)},Q=O;!De.touchNative&&De.pointer&&i.indexOf("touch")===0?O=od(t,i,O):De.touch&&i==="dblclick"?O=yl(t,O):"addEventListener"in t?i==="touchstart"||i==="touchmove"||i==="wheel"||i==="mousewheel"?t.addEventListener(ri[i]||i,O,De.passiveEvents?{passive:!1}:!1):i==="mouseenter"||i==="mouseleave"?(O=function(ie){ie=ie||window.event,yo(t,ie)&&Q(ie)},t.addEventListener(ri[i],O,!1)):t.addEventListener(i,Q,!1):t.attachEvent("on"+i,O),t[on]=t[on]||{},t[on][C]=O}function ls(t,i,u,A,C){C=C||i+g(u)+(A?"_"+g(A):"");var O=t[on]&&t[on][C];if(!O)return this;!De.touchNative&&De.pointer&&i.indexOf("touch")===0?Al(t,i,O):De.touch&&i==="dblclick"?ns(t,O):"removeEventListener"in t?t.removeEventListener(ri[i]||i,O,!1):t.detachEvent("on"+i,O),t[on][C]=null}function lr(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function us(t){return la(t,"wheel",lr),this}function xo(t){return $e(t,"mousedown touchstart dblclick contextmenu",lr),t._leaflet_disable_click=!0,this}function Wt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Yn(t){return Wt(t),lr(t),this}function ii(t){if(t.composedPath)return t.composedPath();for(var i=[],u=t.target;u;)i.push(u),u=u.parentNode;return i}function vo(t,i){if(!i)return new G(t.clientX,t.clientY);var u=ar(i),A=u.boundingClientRect;return new G((t.clientX-A.left)/u.x-i.clientLeft,(t.clientY-A.top)/u.y-i.clientTop)}var ld=De.linux&&De.chrome?window.devicePixelRatio:De.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function wl(t){return De.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/ld:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function yo(t,i){var u=i.relatedTarget;if(!u)return!0;try{for(;u&&u!==t;)u=u.parentNode}catch{return!1}return u!==t}var cs={__proto__:null,on:$e,off:Pt,stopPropagation:lr,disableScrollPropagation:us,disableClickPropagation:xo,preventDefault:Wt,stop:Yn,getPropagationPath:ii,getMousePosition:vo,getWheelDelta:wl,isExternalTarget:yo,addListener:$e,removeListener:Pt},ds=he.extend({run:function(t,i,u,A){this.stop(),this._el=t,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(A||.5,.2),this._startPos=_r(t),this._offset=i.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=U(this._animate,this),this._step()},_step:function(t){var i=+new Date-this._startTime,u=this._duration*1e3;i<u?this._runFrame(this._easeOut(i/u),t):(this._runFrame(1),this._complete())},_runFrame:function(t,i){var u=this._startPos.add(this._offset.multiplyBy(t));i&&u._round(),Yt(this._el,u),this.fire("step")},_complete:function(){ne(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),pt=he.extend({options:{crs:Be,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,i){i=k(this,i),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=p(this._onResize,this),this._initEvents(),i.maxBounds&&this.setMaxBounds(i.maxBounds),i.zoom!==void 0&&(this._zoom=this._limitZoom(i.zoom)),i.center&&i.zoom!==void 0&&this.setView(de(i.center),i.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Bi&&De.any3d&&!De.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),$e(this._proxy,ho,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,i,u){if(i=i===void 0?this._zoom:this._limitZoom(i),t=this._limitCenter(de(t),i,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==void 0&&(u.zoom=d({animate:u.animate},u.zoom),u.pan=d({animate:u.animate,duration:u.duration},u.pan));var A=this._zoom!==i?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,i,u.zoom):this._tryAnimatedPan(t,u.pan);if(A)return clearTimeout(this._sizeTimer),this}return this._resetView(t,i,u.pan&&u.pan.noMoveStart),this},setZoom:function(t,i){return this._loaded?this.setView(this.getCenter(),t,{zoom:i}):(this._zoom=t,this)},zoomIn:function(t,i){return t=t||(De.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,i)},zoomOut:function(t,i){return t=t||(De.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,i)},setZoomAround:function(t,i,u){var A=this.getZoomScale(i),C=this.getSize().divideBy(2),O=t instanceof G?t:this.latLngToContainerPoint(t),Q=O.subtract(C).multiplyBy(1-1/A),ie=this.containerPointToLatLng(C.add(Q));return this.setView(ie,i,{zoom:u})},_getBoundsCenterZoom:function(t,i){i=i||{},t=t.getBounds?t.getBounds():$(t);var u=Z(i.paddingTopLeft||i.padding||[0,0]),A=Z(i.paddingBottomRight||i.padding||[0,0]),C=this.getBoundsZoom(t,!1,u.add(A));if(C=typeof i.maxZoom=="number"?Math.min(i.maxZoom,C):C,C===1/0)return{center:t.getCenter(),zoom:C};var O=A.subtract(u).divideBy(2),Q=this.project(t.getSouthWest(),C),ie=this.project(t.getNorthEast(),C),le=this.unproject(Q.add(ie).divideBy(2).add(O),C);return{center:le,zoom:C}},fitBounds:function(t,i){if(t=$(t),!t.isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(t,i);return this.setView(u.center,u.zoom,i)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,i){return this.setView(t,this._zoom,{pan:i})},panBy:function(t,i){if(t=Z(t).round(),i=i||{},!t.x&&!t.y)return this.fire("moveend");if(i.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ds,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),i.noMoveStart||this.fire("movestart"),i.animate!==!1){Je(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,u,i.duration||.25,i.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,i,u){if(u=u||{},u.animate===!1||!De.any3d)return this.setView(t,i,u);this._stop();var A=this.project(this.getCenter()),C=this.project(t),O=this.getSize(),Q=this._zoom;t=de(t),i=i===void 0?Q:i;var ie=Math.max(O.x,O.y),le=ie*this.getZoomScale(Q,i),xe=C.distanceTo(A)||1,Pe=1.42,We=Pe*Pe;function it(kt){var Ki=kt?-1:1,wd=kt?le:ie,bd=le*le-ie*ie+Ki*We*We*xe*xe,di=2*wd*We*xe,fi=bd/di,hi=Math.sqrt(fi*fi+1)-fi,Es=hi<1e-9?-18:Math.log(hi);return Es}function sn(kt){return(Math.exp(kt)-Math.exp(-kt))/2}function nn(kt){return(Math.exp(kt)+Math.exp(-kt))/2}function Fn(kt){return sn(kt)/nn(kt)}var bn=it(0);function qi(kt){return ie*(nn(bn)/nn(bn+Pe*kt))}function Pa(kt){return ie*(nn(bn)*Fn(bn+Pe*kt)-sn(bn))/We}function Zr(kt){return 1-Math.pow(1-kt,1.5)}var Ul=Date.now(),ci=(it(1)-bn)/Pe,fr=u.duration?1e3*u.duration:1e3*ci*.8;function Gi(){var kt=(Date.now()-Ul)/fr,Ki=Zr(kt)*ci;kt<=1?(this._flyToFrame=U(Gi,this),this._move(this.unproject(A.add(C.subtract(A).multiplyBy(Pa(Ki)/xe)),Q),this.getScaleZoom(ie/qi(Ki),Q),{flyTo:!0})):this._move(t,i)._moveEnd(!0)}return this._moveStart(!0,u.noMoveStart),Gi.call(this),this},flyToBounds:function(t,i){var u=this._getBoundsCenterZoom(t,i);return this.flyTo(u.center,u.zoom,i)},setMaxBounds:function(t){return t=$(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var i=this.options.minZoom;return this.options.minZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var i=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,i){this._enforcingBounds=!0;var u=this.getCenter(),A=this._limitCenter(u,this._zoom,$(t));return u.equals(A)||this.panTo(A,i),this._enforcingBounds=!1,this},panInside:function(t,i){i=i||{};var u=Z(i.paddingTopLeft||i.padding||[0,0]),A=Z(i.paddingBottomRight||i.padding||[0,0]),C=this.project(this.getCenter()),O=this.project(t),Q=this.getPixelBounds(),ie=V([Q.min.add(u),Q.max.subtract(A)]),le=ie.getSize();if(!ie.contains(O)){this._enforcingBounds=!0;var xe=O.subtract(ie.getCenter()),Pe=ie.extend(O).getSize().subtract(le);C.x+=xe.x<0?-Pe.x:Pe.x,C.y+=xe.y<0?-Pe.y:Pe.y,this.panTo(this.unproject(C),i),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=d({animate:!1,pan:!0},t===!0?{animate:!0}:t);var i=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),A=i.divideBy(2).round(),C=u.divideBy(2).round(),O=A.subtract(C);return!O.x&&!O.y?this:(t.animate&&t.pan?this.panBy(O):(t.pan&&this._rawPanBy(O),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(p(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:u}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=d({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var i=p(this._handleGeolocationResponse,this),u=p(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,u,t):navigator.geolocation.getCurrentPosition(i,u,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var i=t.code,u=t.message||(i===1?"permission denied":i===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:i,message:"Geolocation error: "+u+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var i=t.coords.latitude,u=t.coords.longitude,A=new ce(i,u),C=A.toBounds(t.coords.accuracy*2),O=this._locateOptions;if(O.setView){var Q=this.getBoundsZoom(C);this.setView(A,O.maxZoom?Math.min(Q,O.maxZoom):Q)}var ie={latlng:A,bounds:C,timestamp:t.timestamp};for(var le in t.coords)typeof t.coords[le]=="number"&&(ie[le]=t.coords[le]);this.fire("locationfound",ie)}},addHandler:function(t,i){if(!i)return this;var u=this[t]=new i(this);return this._handlers.push(u),this.options[t]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),It(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ne(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)It(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,i){var u="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),A=rt("div",u,i||this._mapPane);return t&&(this._panes[t]=A),A},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),i=this.unproject(t.getBottomLeft()),u=this.unproject(t.getTopRight());return new K(i,u)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,i,u){t=$(t),u=Z(u||[0,0]);var A=this.getZoom()||0,C=this.getMinZoom(),O=this.getMaxZoom(),Q=t.getNorthWest(),ie=t.getSouthEast(),le=this.getSize().subtract(u),xe=V(this.project(ie,A),this.project(Q,A)).getSize(),Pe=De.any3d?this.options.zoomSnap:1,We=le.x/xe.x,it=le.y/xe.y,sn=i?Math.max(We,it):Math.min(We,it);return A=this.getScaleZoom(sn,A),Pe&&(A=Math.round(A/(Pe/100))*(Pe/100),A=i?Math.ceil(A/Pe)*Pe:Math.floor(A/Pe)*Pe),Math.max(C,Math.min(O,A))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new G(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,i){var u=this._getTopLeftPoint(t,i);return new P(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,i){var u=this.options.crs;return i=i===void 0?this._zoom:i,u.scale(t)/u.scale(i)},getScaleZoom:function(t,i){var u=this.options.crs;i=i===void 0?this._zoom:i;var A=u.zoom(t*u.scale(i));return isNaN(A)?1/0:A},project:function(t,i){return i=i===void 0?this._zoom:i,this.options.crs.latLngToPoint(de(t),i)},unproject:function(t,i){return i=i===void 0?this._zoom:i,this.options.crs.pointToLatLng(Z(t),i)},layerPointToLatLng:function(t){var i=Z(t).add(this.getPixelOrigin());return this.unproject(i)},latLngToLayerPoint:function(t){var i=this.project(de(t))._round();return i._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(de(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds($(t))},distance:function(t,i){return this.options.crs.distance(de(t),de(i))},containerPointToLayerPoint:function(t){return Z(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return Z(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var i=this.containerPointToLayerPoint(Z(t));return this.layerPointToLatLng(i)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(de(t)))},mouseEventToContainerPoint:function(t){return vo(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var i=this._container=Kn(t);if(i){if(i._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");$e(i,"scroll",this._onScroll,this),this._containerId=g(i)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&De.any3d,Je(t,"leaflet-container"+(De.touch?" leaflet-touch":"")+(De.retina?" leaflet-retina":"")+(De.ielt9?" leaflet-oldie":"")+(De.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var i=po(t,"position");i!=="absolute"&&i!=="relative"&&i!=="fixed"&&i!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Yt(this._mapPane,new G(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Je(t.markerPane,"leaflet-zoom-hide"),Je(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,i,u){Yt(this._mapPane,new G(0,0));var A=!this._loaded;this._loaded=!0,i=this._limitZoom(i),this.fire("viewprereset");var C=this._zoom!==i;this._moveStart(C,u)._move(t,i)._moveEnd(C),this.fire("viewreset"),A&&this.fire("load")},_moveStart:function(t,i){return t&&this.fire("zoomstart"),i||this.fire("movestart"),this},_move:function(t,i,u,A){i===void 0&&(i=this._zoom);var C=this._zoom!==i;return this._zoom=i,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),A?u&&u.pinch&&this.fire("zoom",u):((C||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ne(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Yt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[g(this._container)]=this;var i=t?Pt:$e;i(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&i(window,"resize",this._onResize,this),De.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ne(this._resizeRequest),this._resizeRequest=U(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,i){for(var u=[],A,C=i==="mouseout"||i==="mouseover",O=t.target||t.srcElement,Q=!1;O;){if(A=this._targets[g(O)],A&&(i==="click"||i==="preclick")&&this._draggableMoved(A)){Q=!0;break}if(A&&A.listens(i,!0)&&(C&&!yo(O,t)||(u.push(A),C))||O===this._container)break;O=O.parentNode}return!u.length&&!Q&&!C&&this.listens(i,!0)&&(u=[this]),u},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var i=t.target||t.srcElement;if(!(!this._loaded||i._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(i))){var u=t.type;u==="mousedown"&&Fi(i),this._fireDOMEvent(t,u)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,i,u){if(t.type==="click"){var A=d({},t);A.type="preclick",this._fireDOMEvent(A,A.type,u)}var C=this._findEventTargets(t,i);if(u){for(var O=[],Q=0;Q<u.length;Q++)u[Q].listens(i,!0)&&O.push(u[Q]);C=O.concat(C)}if(C.length){i==="contextmenu"&&Wt(t);var ie=C[0],le={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var xe=ie.getLatLng&&(!ie._radius||ie._radius<=10);le.containerPoint=xe?this.latLngToContainerPoint(ie.getLatLng()):this.mouseEventToContainerPoint(t),le.layerPoint=this.containerPointToLayerPoint(le.containerPoint),le.latlng=xe?ie.getLatLng():this.layerPointToLatLng(le.layerPoint)}for(Q=0;Q<C.length;Q++)if(C[Q].fire(i,le,!0),le.originalEvent._stopped||C[Q].options.bubblingMouseEvents===!1&&N(this._mouseEvents,i)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,i=this._handlers.length;t<i;t++)this._handlers[t].disable()},whenReady:function(t,i){return this._loaded?t.call(i||this,{target:this}):this.on("load",t,i),this},_getMapPanePos:function(){return _r(this._mapPane)||new G(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,i){var u=t&&i!==void 0?this._getNewPixelOrigin(t,i):this.getPixelOrigin();return u.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,i){var u=this.getSize()._divideBy(2);return this.project(t,i)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,i,u){var A=this._getNewPixelOrigin(u,i);return this.project(t,i)._subtract(A)},_latLngBoundsToNewLayerBounds:function(t,i,u){var A=this._getNewPixelOrigin(u,i);return V([this.project(t.getSouthWest(),i)._subtract(A),this.project(t.getNorthWest(),i)._subtract(A),this.project(t.getSouthEast(),i)._subtract(A),this.project(t.getNorthEast(),i)._subtract(A)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,i,u){if(!u)return t;var A=this.project(t,i),C=this.getSize().divideBy(2),O=new P(A.subtract(C),A.add(C)),Q=this._getBoundsOffset(O,u,i);return Math.abs(Q.x)<=1&&Math.abs(Q.y)<=1?t:this.unproject(A.add(Q),i)},_limitOffset:function(t,i){if(!i)return t;var u=this.getPixelBounds(),A=new P(u.min.add(t),u.max.add(t));return t.add(this._getBoundsOffset(A,i))},_getBoundsOffset:function(t,i,u){var A=V(this.project(i.getNorthEast(),u),this.project(i.getSouthWest(),u)),C=A.min.subtract(t.min),O=A.max.subtract(t.max),Q=this._rebound(C.x,-O.x),ie=this._rebound(C.y,-O.y);return new G(Q,ie)},_rebound:function(t,i){return t+i>0?Math.round(t-i)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(i))},_limitZoom:function(t){var i=this.getMinZoom(),u=this.getMaxZoom(),A=De.any3d?this.options.zoomSnap:1;return A&&(t=Math.round(t/A)*A),Math.max(i,Math.min(u,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Nt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,i){var u=this._getCenterOffset(t)._trunc();return(i&&i.animate)!==!0&&!this.getSize().contains(u)?!1:(this.panBy(u,i),!0)},_createAnimProxy:function(){var t=this._proxy=rt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(i){var u=oa,A=this._proxy.style[u];Qn(this._proxy,this.project(i.center,i.zoom),this.getZoomScale(i.zoom,1)),A===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){It(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),i=this.getZoom();Qn(this._proxy,this.project(t,i),this.getZoomScale(i,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,i,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||u.animate===!1||this._nothingToAnimate()||Math.abs(i-this._zoom)>this.options.zoomAnimationThreshold)return!1;var A=this.getZoomScale(i),C=this._getCenterOffset(t)._divideBy(1-1/A);return u.animate!==!0&&!this.getSize().contains(C)?!1:(U(function(){this._moveStart(!0,u.noMoveStart||!1)._animateZoom(t,i,!0)},this),!0)},_animateZoom:function(t,i,u,A){this._mapPane&&(u&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=i,Je(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:i,noUpdate:A}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(p(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Nt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ir(t,i){return new pt(t,i)}var Dn=re.extend({options:{position:"topright"},initialize:function(t){k(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var i=this._map;return i&&i.removeControl(this),this.options.position=t,i&&i.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var i=this._container=this.onAdd(t),u=this.getPosition(),A=t._controlCorners[u];return Je(i,"leaflet-control"),u.indexOf("bottom")!==-1?A.insertBefore(i,A.firstChild):A.appendChild(i),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(It(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Or=function(t){return new Dn(t)};pt.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},i="leaflet-",u=this._controlContainer=rt("div",i+"control-container",this._container);function A(C,O){var Q=i+C+" "+i+O;t[C+O]=rt("div",Q,u)}A("top","left"),A("top","right"),A("bottom","left"),A("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)It(this._controlCorners[t]);It(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ua=Dn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,i,u,A){return u<A?-1:A<u?1:0}},initialize:function(t,i,u){k(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var A in t)this._addLayer(t[A],A);for(A in i)this._addLayer(i[A],A,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Dn.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,i){return this._addLayer(t,i),this._map?this._update():this},addOverlay:function(t,i){return this._addLayer(t,i,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var i=this._getLayer(g(t));return i&&this._layers.splice(this._layers.indexOf(i),1),this._map?this._update():this},expand:function(){Je(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(Je(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):Nt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Nt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",i=this._container=rt("div",t),u=this.options.collapsed;i.setAttribute("aria-haspopup",!0),xo(i),us(i);var A=this._section=rt("section",t+"-list");u&&(this._map.on("click",this.collapse,this),$e(i,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var C=this._layersLink=rt("a",t+"-toggle",i);C.href="#",C.title="Layers",C.setAttribute("role","button"),$e(C,{keydown:function(O){O.keyCode===13&&this._expandSafely()},click:function(O){Wt(O),this._expandSafely()}},this),u||this.expand(),this._baseLayersList=rt("div",t+"-base",A),this._separator=rt("div",t+"-separator",A),this._overlaysList=rt("div",t+"-overlays",A),i.appendChild(A)},_getLayer:function(t){for(var i=0;i<this._layers.length;i++)if(this._layers[i]&&g(this._layers[i].layer)===t)return this._layers[i]},_addLayer:function(t,i,u){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:i,overlay:u}),this.options.sortLayers&&this._layers.sort(p(function(A,C){return this.options.sortFunction(A.layer,C.layer,A.name,C.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;rs(this._baseLayersList),rs(this._overlaysList),this._layerControlInputs=[];var t,i,u,A,C=0;for(u=0;u<this._layers.length;u++)A=this._layers[u],this._addItem(A),i=i||A.overlay,t=t||!A.overlay,C+=A.overlay?0:1;return this.options.hideSingleBase&&(t=t&&C>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=i&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var i=this._getLayer(g(t.target)),u=i.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;u&&this._map.fire(u,i)},_createRadioElement:function(t,i){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(i?' checked="checked"':"")+"/>",A=document.createElement("div");return A.innerHTML=u,A.firstChild},_addItem:function(t){var i=document.createElement("label"),u=this._map.hasLayer(t.layer),A;t.overlay?(A=document.createElement("input"),A.type="checkbox",A.className="leaflet-control-layers-selector",A.defaultChecked=u):A=this._createRadioElement("leaflet-base-layers_"+g(this),u),this._layerControlInputs.push(A),A.layerId=g(t.layer),$e(A,"click",this._onInputClick,this);var C=document.createElement("span");C.innerHTML=" "+t.name;var O=document.createElement("span");i.appendChild(O),O.appendChild(A),O.appendChild(C);var Q=t.overlay?this._overlaysList:this._baseLayersList;return Q.appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,i,u,A=[],C=[];this._handlingClick=!0;for(var O=t.length-1;O>=0;O--)i=t[O],u=this._getLayer(i.layerId).layer,i.checked?A.push(u):i.checked||C.push(u);for(O=0;O<C.length;O++)this._map.hasLayer(C[O])&&this._map.removeLayer(C[O]);for(O=0;O<A.length;O++)this._map.hasLayer(A[O])||this._map.addLayer(A[O]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,i,u,A=this._map.getZoom(),C=t.length-1;C>=0;C--)i=t[C],u=this._getLayer(i.layerId).layer,i.disabled=u.options.minZoom!==void 0&&A<u.options.minZoom||u.options.maxZoom!==void 0&&A>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,$e(t,"click",Wt),this.expand();var i=this;setTimeout(function(){Pt(t,"click",Wt),i._preventClick=!1})}}),fs=function(t,i,u){return new ua(t,i,u)},Ni=Dn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var i="leaflet-control-zoom",u=rt("div",i+" leaflet-bar"),A=this.options;return this._zoomInButton=this._createButton(A.zoomInText,A.zoomInTitle,i+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(A.zoomOutText,A.zoomOutTitle,i+"-out",u,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,i,u,A,C){var O=rt("a",u,A);return O.innerHTML=t,O.href="#",O.title=i,O.setAttribute("role","button"),O.setAttribute("aria-label",i),xo(O),$e(O,"click",Yn),$e(O,"click",C,this),$e(O,"click",this._refocusOnMap,this),O},_updateDisabled:function(){var t=this._map,i="leaflet-disabled";Nt(this._zoomInButton,i),Nt(this._zoomOutButton,i),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(Je(this._zoomOutButton,i),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(Je(this._zoomInButton,i),this._zoomInButton.setAttribute("aria-disabled","true"))}});pt.mergeOptions({zoomControl:!0}),pt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ni,this.addControl(this.zoomControl))});var bl=function(t){return new Ni(t)},wn=Dn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var i="leaflet-control-scale",u=rt("div",i),A=this.options;return this._addScales(A,i+"-line",u),t.on(A.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),u},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,i,u){t.metric&&(this._mScale=rt("div",i,u)),t.imperial&&(this._iScale=rt("div",i,u))},_update:function(){var t=this._map,i=t.getSize().y/2,u=t.distance(t.containerPointToLatLng([0,i]),t.containerPointToLatLng([this.options.maxWidth,i]));this._updateScales(u)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var i=this._getRoundNum(t),u=i<1e3?i+" m":i/1e3+" km";this._updateScale(this._mScale,u,i/t)},_updateImperial:function(t){var i=t*3.2808399,u,A,C;i>5280?(u=i/5280,A=this._getRoundNum(u),this._updateScale(this._iScale,A+" mi",A/u)):(C=this._getRoundNum(i),this._updateScale(this._iScale,C+" ft",C/i))},_updateScale:function(t,i,u){t.style.width=Math.round(this.options.maxWidth*u)+"px",t.innerHTML=i},_getRoundNum:function(t){var i=Math.pow(10,(Math.floor(t)+"").length-1),u=t/i;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,i*u}}),Li=function(t){return new wn(t)},ca='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',oi=Dn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(De.inlineSvg?ca+" ":"")+"Leaflet</a>"},initialize:function(t){k(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=rt("div","leaflet-control-attribution"),xo(this._container);for(var i in t._layers)t._layers[i].getAttribution&&this.addAttribution(t._layers[i].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var i in this._attributions)this._attributions[i]&&t.push(i);var u=[];this.options.prefix&&u.push(this.options.prefix),t.length&&u.push(t.join(", ")),this._container.innerHTML=u.join(' <span aria-hidden="true">|</span> ')}}});pt.mergeOptions({attributionControl:!0}),pt.addInitHook(function(){this.options.attributionControl&&new oi().addTo(this)});var ud=function(t){return new oi(t)};Dn.Layers=ua,Dn.Zoom=Ni,Dn.Scale=wn,Dn.Attribution=oi,Or.layers=fs,Or.zoom=bl,Or.scale=Li,Or.attribution=ud;var In=re.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});In.addTo=function(t,i){return t.addHandler(i,this),this};var da={Events:ae},Mi=De.touch?"touchstart mousedown":"mousedown",Xn=he.extend({options:{clickTolerance:3},initialize:function(t,i,u,A){k(this,A),this._element=t,this._dragStartTarget=i||t,this._preventOutline=u},enable:function(){this._enabled||($e(this._dragStartTarget,Mi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Xn._dragging===this&&this.finishDrag(!0),Pt(this._dragStartTarget,Mi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!Ti(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){Xn._dragging===this&&this.finishDrag();return}if(!(Xn._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(Xn._dragging=this,this._preventOutline&&Fi(this._element),ss(),At(),!this._moving)){this.fire("down");var i=t.touches?t.touches[0]:t,u=wr(this._element);this._startPoint=new G(i.clientX,i.clientY),this._startPos=_r(this._element),this._parentScale=ar(u);var A=t.type==="mousedown";$e(document,A?"mousemove":"touchmove",this._onMove,this),$e(document,A?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var i=t.touches&&t.touches.length===1?t.touches[0]:t,u=new G(i.clientX,i.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,Wt(t),this._moved||(this.fire("dragstart"),this._moved=!0,Je(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Je(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Yt(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){Nt(document.body,"leaflet-dragging"),this._lastTarget&&(Nt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Pt(document,"mousemove touchmove",this._onMove,this),Pt(document,"mouseup touchend touchcancel",this._onUp,this),as(),Ri();var i=this._moved&&this._moving;this._moving=!1,Xn._dragging=!1,i&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function fa(t,i,u){var A,C=[1,4,2,8],O,Q,ie,le,xe,Pe,We,it;for(O=0,Pe=t.length;O<Pe;O++)t[O]._code=si(t[O],i);for(ie=0;ie<4;ie++){for(We=C[ie],A=[],O=0,Pe=t.length,Q=Pe-1;O<Pe;Q=O++)le=t[O],xe=t[Q],le._code&We?xe._code&We||(it=ps(xe,le,We,i,u),it._code=si(it,i),A.push(it)):(xe._code&We&&(it=ps(xe,le,We,i,u),it._code=si(it,i),A.push(it)),A.push(le));t=A}return t}function Cl(t,i){var u,A,C,O,Q,ie,le,xe,Pe;if(!t||t.length===0)throw new Error("latlngs not passed");On(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var We=de([0,0]),it=$(t),sn=it.getNorthWest().distanceTo(it.getSouthWest())*it.getNorthEast().distanceTo(it.getNorthWest());sn<1700&&(We=ha(t));var nn=t.length,Fn=[];for(u=0;u<nn;u++){var bn=de(t[u]);Fn.push(i.project(de([bn.lat-We.lat,bn.lng-We.lng])))}for(ie=le=xe=0,u=0,A=nn-1;u<nn;A=u++)C=Fn[u],O=Fn[A],Q=C.y*O.x-O.y*C.x,le+=(C.x+O.x)*Q,xe+=(C.y+O.y)*Q,ie+=Q*3;ie===0?Pe=Fn[0]:Pe=[le/ie,xe/ie];var qi=i.unproject(Z(Pe));return de([qi.lat+We.lat,qi.lng+We.lng])}function ha(t){for(var i=0,u=0,A=0,C=0;C<t.length;C++){var O=de(t[C]);i+=O.lat,u+=O.lng,A++}return de([i/A,u/A])}var cd={__proto__:null,clipPolygon:fa,polygonCenter:Cl,centroid:ha};function hs(t,i){if(!i||!t.length)return t.slice();var u=i*i;return t=hd(t,u),t=fd(t,u),t}function El(t,i,u){return Math.sqrt(ai(t,i,u,!0))}function dd(t,i,u){return ai(t,i,u)}function fd(t,i){var u=t.length,A=typeof Uint8Array<"u"?Uint8Array:Array,C=new A(u);C[0]=C[u-1]=1,pa(t,C,i,0,u-1);var O,Q=[];for(O=0;O<u;O++)C[O]&&Q.push(t[O]);return Q}function pa(t,i,u,A,C){var O=0,Q,ie,le;for(ie=A+1;ie<=C-1;ie++)le=ai(t[ie],t[A],t[C],!0),le>O&&(Q=ie,O=le);O>u&&(i[Q]=1,pa(t,i,u,A,Q),pa(t,i,u,Q,C))}function hd(t,i){for(var u=[t[0]],A=1,C=0,O=t.length;A<O;A++)pd(t[A],t[C])>i&&(u.push(t[A]),C=A);return C<O-1&&u.push(t[O-1]),u}var ma;function kl(t,i,u,A,C){var O=A?ma:si(t,u),Q=si(i,u),ie,le,xe;for(ma=Q;;){if(!(O|Q))return[t,i];if(O&Q)return!1;ie=O||Q,le=ps(t,i,ie,u,C),xe=si(le,u),ie===O?(t=le,O=xe):(i=le,Q=xe)}}function ps(t,i,u,A,C){var O=i.x-t.x,Q=i.y-t.y,ie=A.min,le=A.max,xe,Pe;return u&8?(xe=t.x+O*(le.y-t.y)/Q,Pe=le.y):u&4?(xe=t.x+O*(ie.y-t.y)/Q,Pe=ie.y):u&2?(xe=le.x,Pe=t.y+Q*(le.x-t.x)/O):u&1&&(xe=ie.x,Pe=t.y+Q*(ie.x-t.x)/O),new G(xe,Pe,C)}function si(t,i){var u=0;return t.x<i.min.x?u|=1:t.x>i.max.x&&(u|=2),t.y<i.min.y?u|=4:t.y>i.max.y&&(u|=8),u}function pd(t,i){var u=i.x-t.x,A=i.y-t.y;return u*u+A*A}function ai(t,i,u,A){var C=i.x,O=i.y,Q=u.x-C,ie=u.y-O,le=Q*Q+ie*ie,xe;return le>0&&(xe=((t.x-C)*Q+(t.y-O)*ie)/le,xe>1?(C=u.x,O=u.y):xe>0&&(C+=Q*xe,O+=ie*xe)),Q=t.x-C,ie=t.y-O,A?Q*Q+ie*ie:new G(C,O)}function On(t){return!S(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Sl(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),On(t)}function Bl(t,i){var u,A,C,O,Q,ie,le,xe;if(!t||t.length===0)throw new Error("latlngs not passed");On(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var Pe=de([0,0]),We=$(t),it=We.getNorthWest().distanceTo(We.getSouthWest())*We.getNorthEast().distanceTo(We.getNorthWest());it<1700&&(Pe=ha(t));var sn=t.length,nn=[];for(u=0;u<sn;u++){var Fn=de(t[u]);nn.push(i.project(de([Fn.lat-Pe.lat,Fn.lng-Pe.lng])))}for(u=0,A=0;u<sn-1;u++)A+=nn[u].distanceTo(nn[u+1])/2;if(A===0)xe=nn[0];else for(u=0,O=0;u<sn-1;u++)if(Q=nn[u],ie=nn[u+1],C=Q.distanceTo(ie),O+=C,O>A){le=(O-A)/C,xe=[ie.x-le*(ie.x-Q.x),ie.y-le*(ie.y-Q.y)];break}var bn=i.unproject(Z(xe));return de([bn.lat+Pe.lat,bn.lng+Pe.lng])}var Pl={__proto__:null,simplify:hs,pointToSegmentDistance:El,closestPointOnSegment:dd,clipSegment:kl,_getEdgeIntersection:ps,_getBitCode:si,_sqClosestPointOnSegment:ai,isFlat:On,_flat:Sl,polylineCenter:Bl},ga={project:function(t){return new G(t.lng,t.lat)},unproject:function(t){return new ce(t.y,t.x)},bounds:new P([-180,-90],[180,90])},Aa={R:6378137,R_MINOR:6356752314245179e-9,bounds:new P([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var i=Math.PI/180,u=this.R,A=t.lat*i,C=this.R_MINOR/u,O=Math.sqrt(1-C*C),Q=O*Math.sin(A),ie=Math.tan(Math.PI/4-A/2)/Math.pow((1-Q)/(1+Q),O/2);return A=-u*Math.log(Math.max(ie,1e-10)),new G(t.lng*i*u,A)},unproject:function(t){for(var i=180/Math.PI,u=this.R,A=this.R_MINOR/u,C=Math.sqrt(1-A*A),O=Math.exp(-t.y/u),Q=Math.PI/2-2*Math.atan(O),ie=0,le=.1,xe;ie<15&&Math.abs(le)>1e-7;ie++)xe=C*Math.sin(Q),xe=Math.pow((1-xe)/(1+xe),C/2),le=Math.PI/2-2*Math.atan(O*xe)-Q,Q+=le;return new ce(Q*i,t.x*i/u)}},md={__proto__:null,LonLat:ga,Mercator:Aa,SphericalMercator:Ye},gd=d({},Ae,{code:"EPSG:3395",projection:Aa,transformation:(function(){var t=.5/(Math.PI*Aa.R);return ct(t,.5,-t,.5)})()}),Tl=d({},Ae,{code:"EPSG:4326",projection:ga,transformation:ct(1/180,1,-1/180,.5)}),Ad=d({},Se,{projection:ga,transformation:ct(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,i){var u=i.lng-t.lng,A=i.lat-t.lat;return Math.sqrt(u*u+A*A)},infinite:!0});Se.Earth=Ae,Se.EPSG3395=gd,Se.EPSG3857=Be,Se.EPSG900913=Ze,Se.EPSG4326=Tl,Se.Simple=Ad;var Jn=he.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[g(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[g(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var i=t.target;if(i.hasLayer(this)){if(this._map=i,this._zoomAnimated=i._zoomAnimated,this.getEvents){var u=this.getEvents();i.on(u,this),this.once("remove",function(){i.off(u,this)},this)}this.onAdd(i),this.fire("add"),i.fire("layeradd",{layer:this})}}});pt.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var i=g(t);return this._layers[i]?this:(this._layers[i]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var i=g(t);return this._layers[i]?(this._loaded&&t.onRemove(this),delete this._layers[i],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return g(t)in this._layers},eachLayer:function(t,i){for(var u in this._layers)t.call(i,this._layers[u]);return this},_addLayers:function(t){t=t?S(t)?t:[t]:[];for(var i=0,u=t.length;i<u;i++)this.addLayer(t[i])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[g(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var i=g(t);this._zoomBoundLayers[i]&&(delete this._zoomBoundLayers[i],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,i=-1/0,u=this._getZoomSpan();for(var A in this._zoomBoundLayers){var C=this._zoomBoundLayers[A].options;t=C.minZoom===void 0?t:Math.min(t,C.minZoom),i=C.maxZoom===void 0?i:Math.max(i,C.maxZoom)}this._layersMaxZoom=i===-1/0?void 0:i,this._layersMinZoom=t===1/0?void 0:t,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var jr=Jn.extend({initialize:function(t,i){k(this,i),this._layers={};var u,A;if(t)for(u=0,A=t.length;u<A;u++)this.addLayer(t[u])},addLayer:function(t){var i=this.getLayerId(t);return this._layers[i]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var i=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[i]&&this._map.removeLayer(this._layers[i]),delete this._layers[i],this},hasLayer:function(t){var i=typeof t=="number"?t:this.getLayerId(t);return i in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var i=Array.prototype.slice.call(arguments,1),u,A;for(u in this._layers)A=this._layers[u],A[t]&&A[t].apply(A,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,i){for(var u in this._layers)t.call(i,this._layers[u]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return g(t)}}),_o=function(t,i){return new jr(t,i)},br=jr.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),jr.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),jr.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new K;for(var i in this._layers){var u=this._layers[i];t.extend(u.getBounds?u.getBounds():u.getLatLng())}return t}}),Dl=function(t,i){return new br(t,i)},li=re.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){k(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,i){var u=this._getIconUrl(t);if(!u){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var A=this._createImg(u,i&&i.tagName==="IMG"?i:null);return this._setIconStyles(A,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(A.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),A},_setIconStyles:function(t,i){var u=this.options,A=u[i+"Size"];typeof A=="number"&&(A=[A,A]);var C=Z(A),O=Z(i==="shadow"&&u.shadowAnchor||u.iconAnchor||C&&C.divideBy(2,!0));t.className="leaflet-marker-"+i+" "+(u.className||""),O&&(t.style.marginLeft=-O.x+"px",t.style.marginTop=-O.y+"px"),C&&(t.style.width=C.x+"px",t.style.height=C.y+"px")},_createImg:function(t,i){return i=i||document.createElement("img"),i.src=t,i},_getIconUrl:function(t){return De.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Rl(t){return new li(t)}var Ii=li.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Ii.imagePath!="string"&&(Ii.imagePath=this._detectIconPath()),(this.options.imagePath||Ii.imagePath)+li.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var i=function(u,A,C){var O=A.exec(u);return O&&O[C]};return t=i(t,/^url\((['"])?(.+)\1\)$/,2),t&&i(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=rt("div","leaflet-default-icon-path",document.body),i=po(t,"background-image")||po(t,"backgroundImage");if(document.body.removeChild(t),i=this._stripUrl(i),i)return i;var u=document.querySelector('link[href$="leaflet.css"]');return u?u.href.substring(0,u.href.length-11-1):""}}),xa=In.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Xn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Je(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Nt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var i=this._marker,u=i._map,A=this._marker.options.autoPanSpeed,C=this._marker.options.autoPanPadding,O=_r(i._icon),Q=u.getPixelBounds(),ie=u.getPixelOrigin(),le=V(Q.min._subtract(ie).add(C),Q.max._subtract(ie).subtract(C));if(!le.contains(O)){var xe=Z((Math.max(le.max.x,O.x)-le.max.x)/(Q.max.x-le.max.x)-(Math.min(le.min.x,O.x)-le.min.x)/(Q.min.x-le.min.x),(Math.max(le.max.y,O.y)-le.max.y)/(Q.max.y-le.max.y)-(Math.min(le.min.y,O.y)-le.min.y)/(Q.min.y-le.min.y)).multiplyBy(A);u.panBy(xe,{animate:!1}),this._draggable._newPos._add(xe),this._draggable._startPos._add(xe),Yt(i._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=U(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(ne(this._panRequest),this._panRequest=U(this._adjustPan.bind(this,t)))},_onDrag:function(t){var i=this._marker,u=i._shadow,A=_r(i._icon),C=i._map.layerPointToLatLng(A);u&&Yt(u,A),i._latlng=C,t.latlng=C,t.oldLatLng=this._oldLatLng,i.fire("move",t).fire("drag",t)},_onDragEnd:function(t){ne(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Cr=Jn.extend({options:{icon:new Ii,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,i){k(this,i),this._latlng=de(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var i=this._latlng;return this._latlng=de(t),this.update(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,i="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=t.icon.createIcon(this._icon),A=!1;u!==this._icon&&(this._icon&&this._removeIcon(),A=!0,t.title&&(u.title=t.title),u.tagName==="IMG"&&(u.alt=t.alt||"")),Je(u,i),t.keyboard&&(u.tabIndex="0",u.setAttribute("role","button")),this._icon=u,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&$e(u,"focus",this._panOnFocus,this);var C=t.icon.createShadow(this._shadow),O=!1;C!==this._shadow&&(this._removeShadow(),O=!0),C&&(Je(C,i),C.alt=""),this._shadow=C,t.opacity<1&&this._updateOpacity(),A&&this.getPane().appendChild(this._icon),this._initInteraction(),C&&O&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Pt(this._icon,"focus",this._panOnFocus,this),It(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&It(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&Yt(this._icon,t),this._shadow&&Yt(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(i)},_initInteraction:function(){if(this.options.interactive&&(Je(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),xa)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new xa(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&_n(this._icon,t),this._shadow&&_n(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var i=this.options.icon.options,u=i.iconSize?Z(i.iconSize):Z(0,0),A=i.iconAnchor?Z(i.iconAnchor):Z(0,0);t.panInside(this._latlng,{paddingTopLeft:A,paddingBottomRight:u.subtract(A)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function xd(t,i){return new Cr(t,i)}var zr=Jn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return k(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ms=zr.extend({options:{fill:!0,radius:10},initialize:function(t,i){k(this,i),this._latlng=de(t),this._radius=this.options.radius},setLatLng:function(t){var i=this._latlng;return this._latlng=de(t),this.redraw(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var i=t&&t.radius||this._radius;return zr.prototype.setStyle.call(this,t),this.setRadius(i),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,i=this._radiusY||t,u=this._clickTolerance(),A=[t+u,i+u];this._pxBounds=new P(this._point.subtract(A),this._point.add(A))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Fl(t,i){return new ms(t,i)}var gs=ms.extend({initialize:function(t,i,u){if(typeof i=="number"&&(i=d({},u,{radius:i})),k(this,i),this._latlng=de(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new K(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:zr.prototype.setStyle,_project:function(){var t=this._latlng.lng,i=this._latlng.lat,u=this._map,A=u.options.crs;if(A.distance===Ae.distance){var C=Math.PI/180,O=this._mRadius/Ae.R/C,Q=u.project([i+O,t]),ie=u.project([i-O,t]),le=Q.add(ie).divideBy(2),xe=u.unproject(le).lat,Pe=Math.acos((Math.cos(O*C)-Math.sin(i*C)*Math.sin(xe*C))/(Math.cos(i*C)*Math.cos(xe*C)))/C;(isNaN(Pe)||Pe===0)&&(Pe=O/Math.cos(Math.PI/180*i)),this._point=le.subtract(u.getPixelOrigin()),this._radius=isNaN(Pe)?0:le.x-u.project([xe,t-Pe]).x,this._radiusY=le.y-Q.y}else{var We=A.unproject(A.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(We).x}this._updateBounds()}});function wo(t,i,u){return new gs(t,i,u)}var Rn=zr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,i){k(this,i),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var i=1/0,u=null,A=ai,C,O,Q=0,ie=this._parts.length;Q<ie;Q++)for(var le=this._parts[Q],xe=1,Pe=le.length;xe<Pe;xe++){C=le[xe-1],O=le[xe];var We=A(t,C,O,!0);We<i&&(i=We,u=A(t,C,O))}return u&&(u.distance=Math.sqrt(i)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Bl(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,i){return i=i||this._defaultShape(),t=de(t),i.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new K,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return On(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var i=[],u=On(t),A=0,C=t.length;A<C;A++)u?(i[A]=de(t[A]),this._bounds.extend(i[A])):i[A]=this._convertLatLngs(t[A]);return i},_project:function(){var t=new P;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),i=new G(t,t);this._rawPxBounds&&(this._pxBounds=new P([this._rawPxBounds.min.subtract(i),this._rawPxBounds.max.add(i)]))},_projectLatlngs:function(t,i,u){var A=t[0]instanceof ce,C=t.length,O,Q;if(A){for(Q=[],O=0;O<C;O++)Q[O]=this._map.latLngToLayerPoint(t[O]),u.extend(Q[O]);i.push(Q)}else for(O=0;O<C;O++)this._projectLatlngs(t[O],i,u)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var i=this._parts,u,A,C,O,Q,ie,le;for(u=0,C=0,O=this._rings.length;u<O;u++)for(le=this._rings[u],A=0,Q=le.length;A<Q-1;A++)ie=kl(le[A],le[A+1],t,A,!0),ie&&(i[C]=i[C]||[],i[C].push(ie[0]),(ie[1]!==le[A+1]||A===Q-2)&&(i[C].push(ie[1]),C++))}},_simplifyPoints:function(){for(var t=this._parts,i=this.options.smoothFactor,u=0,A=t.length;u<A;u++)t[u]=hs(t[u],i)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,i){var u,A,C,O,Q,ie,le=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(u=0,O=this._parts.length;u<O;u++)for(ie=this._parts[u],A=0,Q=ie.length,C=Q-1;A<Q;C=A++)if(!(!i&&A===0)&&El(t,ie[C],ie[A])<=le)return!0;return!1}});function vd(t,i){return new Rn(t,i)}Rn._flat=Sl;var Er=Rn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Cl(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var i=Rn.prototype._convertLatLngs.call(this,t),u=i.length;return u>=2&&i[0]instanceof ce&&i[0].equals(i[u-1])&&i.pop(),i},_setLatLngs:function(t){Rn.prototype._setLatLngs.call(this,t),On(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return On(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,i=this.options.weight,u=new G(i,i);if(t=new P(t.min.subtract(u),t.max.add(u)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var A=0,C=this._rings.length,O;A<C;A++)O=fa(this._rings[A],t,!0),O.length&&this._parts.push(O)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var i=!1,u,A,C,O,Q,ie,le,xe;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(O=0,le=this._parts.length;O<le;O++)for(u=this._parts[O],Q=0,xe=u.length,ie=xe-1;Q<xe;ie=Q++)A=u[Q],C=u[ie],A.y>t.y!=C.y>t.y&&t.x<(C.x-A.x)*(t.y-A.y)/(C.y-A.y)+A.x&&(i=!i);return i||Rn.prototype._containsPoint.call(this,t,!0)}});function yd(t,i){return new Er(t,i)}var ur=br.extend({initialize:function(t,i){k(this,i),this._layers={},t&&this.addData(t)},addData:function(t){var i=S(t)?t:t.features,u,A,C;if(i){for(u=0,A=i.length;u<A;u++)C=i[u],(C.geometries||C.geometry||C.features||C.coordinates)&&this.addData(C);return this}var O=this.options;if(O.filter&&!O.filter(t))return this;var Q=Oi(t,O);return Q?(Q.feature=_s(t),Q.defaultOptions=Q.options,this.resetStyle(Q),O.onEachFeature&&O.onEachFeature(t,Q),this.addLayer(Q)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=d({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(i){this._setLayerStyle(i,t)},this)},_setLayerStyle:function(t,i){t.setStyle&&(typeof i=="function"&&(i=i(t.feature)),t.setStyle(i))}});function Oi(t,i){var u=t.type==="Feature"?t.geometry:t,A=u?u.coordinates:null,C=[],O=i&&i.pointToLayer,Q=i&&i.coordsToLatLng||xs,ie,le,xe,Pe;if(!A&&!u)return null;switch(u.type){case"Point":return ie=Q(A),As(O,t,ie,i);case"MultiPoint":for(xe=0,Pe=A.length;xe<Pe;xe++)ie=Q(A[xe]),C.push(As(O,t,ie,i));return new br(C);case"LineString":case"MultiLineString":return le=bo(A,u.type==="LineString"?0:1,Q),new Rn(le,i);case"Polygon":case"MultiPolygon":return le=bo(A,u.type==="Polygon"?1:2,Q),new Er(le,i);case"GeometryCollection":for(xe=0,Pe=u.geometries.length;xe<Pe;xe++){var We=Oi({geometry:u.geometries[xe],type:"Feature",properties:t.properties},i);We&&C.push(We)}return new br(C);case"FeatureCollection":for(xe=0,Pe=u.features.length;xe<Pe;xe++){var it=Oi(u.features[xe],i);it&&C.push(it)}return new br(C);default:throw new Error("Invalid GeoJSON object.")}}function As(t,i,u,A){return t?t(i,u):new Cr(u,A&&A.markersInheritOptions&&A)}function xs(t){return new ce(t[1],t[0],t[2])}function bo(t,i,u){for(var A=[],C=0,O=t.length,Q;C<O;C++)Q=i?bo(t[C],i-1,u):(u||xs)(t[C]),A.push(Q);return A}function vs(t,i){return t=de(t),t.alt!==void 0?[w(t.lng,i),w(t.lat,i),w(t.alt,i)]:[w(t.lng,i),w(t.lat,i)]}function ys(t,i,u,A){for(var C=[],O=0,Q=t.length;O<Q;O++)C.push(i?ys(t[O],On(t[O])?0:i-1,u,A):vs(t[O],A));return!i&&u&&C.length>0&&C.push(C[0].slice()),C}function ji(t,i){return t.feature?d({},t.feature,{geometry:i}):_s(i)}function _s(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var va={toGeoJSON:function(t){return ji(this,{type:"Point",coordinates:vs(this.getLatLng(),t)})}};Cr.include(va),gs.include(va),ms.include(va),Rn.include({toGeoJSON:function(t){var i=!On(this._latlngs),u=ys(this._latlngs,i?1:0,!1,t);return ji(this,{type:(i?"Multi":"")+"LineString",coordinates:u})}}),Er.include({toGeoJSON:function(t){var i=!On(this._latlngs),u=i&&!On(this._latlngs[0]),A=ys(this._latlngs,u?2:i?1:0,!0,t);return i||(A=[A]),ji(this,{type:(u?"Multi":"")+"Polygon",coordinates:A})}}),jr.include({toMultiPoint:function(t){var i=[];return this.eachLayer(function(u){i.push(u.toGeoJSON(t).geometry.coordinates)}),ji(this,{type:"MultiPoint",coordinates:i})},toGeoJSON:function(t){var i=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(i==="MultiPoint")return this.toMultiPoint(t);var u=i==="GeometryCollection",A=[];return this.eachLayer(function(C){if(C.toGeoJSON){var O=C.toGeoJSON(t);if(u)A.push(O.geometry);else{var Q=_s(O);Q.type==="FeatureCollection"?A.push.apply(A,Q.features):A.push(Q)}}}),u?ji(this,{geometries:A,type:"GeometryCollection"}):{type:"FeatureCollection",features:A}}});function Nl(t,i){return new ur(t,i)}var er=Nl,Hr=Jn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,i,u){this._url=t,this._bounds=$(i),k(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Je(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){It(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Pi(this._image),this},bringToBack:function(){return this._map&&yr(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=$(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",i=this._image=t?this._url:rt("img");if(Je(i,"leaflet-image-layer"),this._zoomAnimated&&Je(i,"leaflet-zoom-animated"),this.options.className&&Je(i,this.options.className),i.onselectstart=y,i.onmousemove=y,i.onload=p(this.fire,this,"load"),i.onerror=p(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=i.src;return}i.src=this._url,i.alt=this.options.alt},_animateZoom:function(t){var i=this._map.getZoomScale(t.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Qn(this._image,u,i)},_reset:function(){var t=this._image,i=new P(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=i.getSize();Yt(t,i.min),t.style.width=u.x+"px",t.style.height=u.y+"px"},_updateOpacity:function(){_n(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Ll=function(t,i,u){return new Hr(t,i,u)},ya=Hr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",i=this._image=t?this._url:rt("video");if(Je(i,"leaflet-image-layer"),this._zoomAnimated&&Je(i,"leaflet-zoom-animated"),this.options.className&&Je(i,this.options.className),i.onselectstart=y,i.onmousemove=y,i.onloadeddata=p(this.fire,this,"load"),t){for(var u=i.getElementsByTagName("source"),A=[],C=0;C<u.length;C++)A.push(u[C].src);this._url=u.length>0?A:[i.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(i.style,"objectFit")&&(i.style.objectFit="fill"),i.autoplay=!!this.options.autoplay,i.loop=!!this.options.loop,i.muted=!!this.options.muted,i.playsInline=!!this.options.playsInline;for(var O=0;O<this._url.length;O++){var Q=rt("source");Q.src=this._url[O],i.appendChild(Q)}}});function Ml(t,i,u){return new ya(t,i,u)}var _a=Hr.extend({_initImage:function(){var t=this._image=this._url;Je(t,"leaflet-image-layer"),this._zoomAnimated&&Je(t,"leaflet-zoom-animated"),this.options.className&&Je(t,this.options.className),t.onselectstart=y,t.onmousemove=y}});function wa(t,i,u){return new _a(t,i,u)}var cr=Jn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,i){t&&(t instanceof ce||S(t))?(this._latlng=de(t),k(this,i)):(k(this,t),this._source=i),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&_n(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&_n(this._container,1),this.bringToFront(),this.options.interactive&&(Je(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(_n(this._container,0),this._removeTimeout=setTimeout(p(It,void 0,this._container),200)):It(this._container),this.options.interactive&&(Nt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=de(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Pi(this._container),this},bringToBack:function(){return this._map&&yr(this._container),this},_prepareOpen:function(t){var i=this._source;if(!i._map)return!1;if(i instanceof br){i=null;var u=this._source._layers;for(var A in u)if(u[A]._map){i=u[A];break}if(!i)return!1;this._source=i}if(!t)if(i.getCenter)t=i.getCenter();else if(i.getLatLng)t=i.getLatLng();else if(i.getBounds)t=i.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,i=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof i=="string")t.innerHTML=i;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(i)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),i=Z(this.options.offset),u=this._getAnchor();this._zoomAnimated?Yt(this._container,t.add(u)):i=i.add(t).add(u);var A=this._containerBottom=-i.y,C=this._containerLeft=-Math.round(this._containerWidth/2)+i.x;this._container.style.bottom=A+"px",this._container.style.left=C+"px"}},_getAnchor:function(){return[0,0]}});pt.include({_initOverlay:function(t,i,u,A){var C=i;return C instanceof t||(C=new t(A).setContent(i)),u&&C.setLatLng(u),C}}),Jn.include({_initOverlay:function(t,i,u,A){var C=u;return C instanceof t?(k(C,A),C._source=this):(C=i&&!A?i:new t(A,this),C.setContent(u)),C}});var ws=cr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,cr.prototype.openOn.call(this,t)},onAdd:function(t){cr.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof zr||this._source.on("preclick",lr))},onRemove:function(t){cr.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof zr||this._source.off("preclick",lr))},getEvents:function(){var t=cr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",i=this._container=rt("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=rt("div",t+"-content-wrapper",i);if(this._contentNode=rt("div",t+"-content",u),xo(i),us(this._contentNode),$e(i,"contextmenu",lr),this._tipContainer=rt("div",t+"-tip-container",i),this._tip=rt("div",t+"-tip",this._tipContainer),this.options.closeButton){var A=this._closeButton=rt("a",t+"-close-button",i);A.setAttribute("role","button"),A.setAttribute("aria-label","Close popup"),A.href="#close",A.innerHTML='<span aria-hidden="true">&#215;</span>',$e(A,"click",function(C){Wt(C),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,i=t.style;i.width="",i.whiteSpace="nowrap";var u=t.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),i.width=u+1+"px",i.whiteSpace="",i.height="";var A=t.offsetHeight,C=this.options.maxHeight,O="leaflet-popup-scrolled";C&&A>C?(i.height=C+"px",Je(t,O)):Nt(t,O),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),u=this._getAnchor();Yt(this._container,i.add(u))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,i=parseInt(po(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+i,A=this._containerWidth,C=new G(this._containerLeft,-u-this._containerBottom);C._add(_r(this._container));var O=t.layerPointToContainerPoint(C),Q=Z(this.options.autoPanPadding),ie=Z(this.options.autoPanPaddingTopLeft||Q),le=Z(this.options.autoPanPaddingBottomRight||Q),xe=t.getSize(),Pe=0,We=0;O.x+A+le.x>xe.x&&(Pe=O.x+A-xe.x+le.x),O.x-Pe-ie.x<0&&(Pe=O.x-ie.x),O.y+u+le.y>xe.y&&(We=O.y+u-xe.y+le.y),O.y-We-ie.y<0&&(We=O.y-ie.y),(Pe||We)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([Pe,We]))}},_getAnchor:function(){return Z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),zi=function(t,i){return new ws(t,i)};pt.mergeOptions({closePopupOnClick:!0}),pt.include({openPopup:function(t,i,u){return this._initOverlay(ws,t,i,u).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Jn.include({bindPopup:function(t,i){return this._popup=this._initOverlay(ws,this._popup,t,i),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof br||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){Yn(t);var i=t.layer||t.target;if(this._popup._source===i&&!(i instanceof zr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=i,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Hi=cr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){cr.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){cr.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=cr.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",i=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=rt("div",i),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+g(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var i,u,A=this._map,C=this._container,O=A.latLngToContainerPoint(A.getCenter()),Q=A.layerPointToContainerPoint(t),ie=this.options.direction,le=C.offsetWidth,xe=C.offsetHeight,Pe=Z(this.options.offset),We=this._getAnchor();ie==="top"?(i=le/2,u=xe):ie==="bottom"?(i=le/2,u=0):ie==="center"?(i=le/2,u=xe/2):ie==="right"?(i=0,u=xe/2):ie==="left"?(i=le,u=xe/2):Q.x<O.x?(ie="right",i=0,u=xe/2):(ie="left",i=le+(Pe.x+We.x)*2,u=xe/2),t=t.subtract(Z(i,u,!0)).add(Pe).add(We),Nt(C,"leaflet-tooltip-right"),Nt(C,"leaflet-tooltip-left"),Nt(C,"leaflet-tooltip-top"),Nt(C,"leaflet-tooltip-bottom"),Je(C,"leaflet-tooltip-"+ie),Yt(C,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&_n(this._container,t)},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(i)},_getAnchor:function(){return Z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Co=function(t,i){return new Hi(t,i)};pt.include({openTooltip:function(t,i,u){return this._initOverlay(Hi,t,i,u).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Jn.include({bindTooltip:function(t,i){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Hi,this._tooltip,t,i),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var i=t?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,u.click=this._openTooltip,this._map?this._addFocusListeners():u.add=this._addFocusListeners),this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),this[i](u),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof br||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var i=typeof t.getElement=="function"&&t.getElement();i&&($e(i,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),$e(i,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var i=typeof t.getElement=="function"&&t.getElement();i&&i.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var i=this;this._map.once("moveend",function(){i._openOnceFlag=!1,i._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var i=t.latlng,u,A;this._tooltip.options.sticky&&t.originalEvent&&(u=this._map.mouseEventToContainerPoint(t.originalEvent),A=this._map.containerPointToLayerPoint(u),i=this._map.layerPointToLatLng(A)),this._tooltip.setLatLng(i)}});var bs=li.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var i=t&&t.tagName==="DIV"?t:document.createElement("div"),u=this.options;if(u.html instanceof Element?(rs(i),i.appendChild(u.html)):i.innerHTML=u.html!==!1?u.html:"",u.bgPos){var A=Z(u.bgPos);i.style.backgroundPosition=-A.x+"px "+-A.y+"px"}return this._setIconStyles(i,"icon"),i},createShadow:function(){return null}});function Il(t){return new bs(t)}li.Default=Ii;var Vr=Jn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:De.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){k(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),It(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Pi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(yr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof G?t:new G(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var i=this.getPane().children,u=-t(-1/0,1/0),A=0,C=i.length,O;A<C;A++)O=i[A].style.zIndex,i[A]!==this._container&&O&&(u=t(u,+O));isFinite(u)&&(this.options.zIndex=u+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!De.ielt9){_n(this._container,this.options.opacity);var t=+new Date,i=!1,u=!1;for(var A in this._tiles){var C=this._tiles[A];if(!(!C.current||!C.loaded)){var O=Math.min(1,(t-C.loaded)/200);_n(C.el,O),O<1?i=!0:(C.active?u=!0:this._onOpaqueTile(C),C.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),i&&(ne(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=rt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,i=this.options.maxZoom;if(t!==void 0){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===t?(this._levels[u].el.style.zIndex=i-Math.abs(t-u),this._onUpdateLevel(u)):(It(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var A=this._levels[t],C=this._map;return A||(A=this._levels[t]={},A.el=rt("div","leaflet-tile-container leaflet-zoom-animated",this._container),A.el.style.zIndex=i,A.origin=C.project(C.unproject(C.getPixelOrigin()),t).round(),A.zoom=t,this._setZoomTransform(A,C.getCenter(),C.getZoom()),y(A.el.offsetWidth),this._onCreateLevel(A)),this._level=A,A}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var t,i,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)i=this._tiles[t],i.retain=i.current;for(t in this._tiles)if(i=this._tiles[t],i.current&&!i.active){var A=i.coords;this._retainParent(A.x,A.y,A.z,A.z-5)||this._retainChildren(A.x,A.y,A.z,A.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var i in this._tiles)this._tiles[i].coords.z===t&&this._removeTile(i)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)It(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,i,u,A){var C=Math.floor(t/2),O=Math.floor(i/2),Q=u-1,ie=new G(+C,+O);ie.z=+Q;var le=this._tileCoordsToKey(ie),xe=this._tiles[le];return xe&&xe.active?(xe.retain=!0,!0):(xe&&xe.loaded&&(xe.retain=!0),Q>A?this._retainParent(C,O,Q,A):!1)},_retainChildren:function(t,i,u,A){for(var C=2*t;C<2*t+2;C++)for(var O=2*i;O<2*i+2;O++){var Q=new G(C,O);Q.z=u+1;var ie=this._tileCoordsToKey(Q),le=this._tiles[ie];if(le&&le.active){le.retain=!0;continue}else le&&le.loaded&&(le.retain=!0);u+1<A&&this._retainChildren(C,O,u+1,A)}},_resetView:function(t){var i=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),i,i)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var i=this.options;return i.minNativeZoom!==void 0&&t<i.minNativeZoom?i.minNativeZoom:i.maxNativeZoom!==void 0&&i.maxNativeZoom<t?i.maxNativeZoom:t},_setView:function(t,i,u,A){var C=Math.round(i);this.options.maxZoom!==void 0&&C>this.options.maxZoom||this.options.minZoom!==void 0&&C<this.options.minZoom?C=void 0:C=this._clampZoom(C);var O=this.options.updateWhenZooming&&C!==this._tileZoom;(!A||O)&&(this._tileZoom=C,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),C!==void 0&&this._update(t),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(t,i)},_setZoomTransforms:function(t,i){for(var u in this._levels)this._setZoomTransform(this._levels[u],t,i)},_setZoomTransform:function(t,i,u){var A=this._map.getZoomScale(u,t.zoom),C=t.origin.multiplyBy(A).subtract(this._map._getNewPixelOrigin(i,u)).round();De.any3d?Qn(t.el,C,A):Yt(t.el,C)},_resetGrid:function(){var t=this._map,i=t.options.crs,u=this._tileSize=this.getTileSize(),A=this._tileZoom,C=this._map.getPixelWorldBounds(this._tileZoom);C&&(this._globalTileRange=this._pxBoundsToTileRange(C)),this._wrapX=i.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,i.wrapLng[0]],A).x/u.x),Math.ceil(t.project([0,i.wrapLng[1]],A).x/u.y)],this._wrapY=i.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([i.wrapLat[0],0],A).y/u.x),Math.ceil(t.project([i.wrapLat[1],0],A).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var i=this._map,u=i._animatingZoom?Math.max(i._animateToZoom,i.getZoom()):i.getZoom(),A=i.getZoomScale(u,this._tileZoom),C=i.project(t,this._tileZoom).floor(),O=i.getSize().divideBy(A*2);return new P(C.subtract(O),C.add(O))},_update:function(t){var i=this._map;if(i){var u=this._clampZoom(i.getZoom());if(t===void 0&&(t=i.getCenter()),this._tileZoom!==void 0){var A=this._getTiledPixelBounds(t),C=this._pxBoundsToTileRange(A),O=C.getCenter(),Q=[],ie=this.options.keepBuffer,le=new P(C.getBottomLeft().subtract([ie,-ie]),C.getTopRight().add([ie,-ie]));if(!(isFinite(C.min.x)&&isFinite(C.min.y)&&isFinite(C.max.x)&&isFinite(C.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var xe in this._tiles){var Pe=this._tiles[xe].coords;(Pe.z!==this._tileZoom||!le.contains(new G(Pe.x,Pe.y)))&&(this._tiles[xe].current=!1)}if(Math.abs(u-this._tileZoom)>1){this._setView(t,u);return}for(var We=C.min.y;We<=C.max.y;We++)for(var it=C.min.x;it<=C.max.x;it++){var sn=new G(it,We);if(sn.z=this._tileZoom,!!this._isValidTile(sn)){var nn=this._tiles[this._tileCoordsToKey(sn)];nn?nn.current=!0:Q.push(sn)}}if(Q.sort(function(bn,qi){return bn.distanceTo(O)-qi.distanceTo(O)}),Q.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Fn=document.createDocumentFragment();for(it=0;it<Q.length;it++)this._addTile(Q[it],Fn);this._level.el.appendChild(Fn)}}}},_isValidTile:function(t){var i=this._map.options.crs;if(!i.infinite){var u=this._globalTileRange;if(!i.wrapLng&&(t.x<u.min.x||t.x>u.max.x)||!i.wrapLat&&(t.y<u.min.y||t.y>u.max.y))return!1}if(!this.options.bounds)return!0;var A=this._tileCoordsToBounds(t);return $(this.options.bounds).overlaps(A)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var i=this._map,u=this.getTileSize(),A=t.scaleBy(u),C=A.add(u),O=i.unproject(A,t.z),Q=i.unproject(C,t.z);return[O,Q]},_tileCoordsToBounds:function(t){var i=this._tileCoordsToNwSe(t),u=new K(i[0],i[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var i=t.split(":"),u=new G(+i[0],+i[1]);return u.z=+i[2],u},_removeTile:function(t){var i=this._tiles[t];i&&(It(i.el),delete this._tiles[t],this.fire("tileunload",{tile:i.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Je(t,"leaflet-tile");var i=this.getTileSize();t.style.width=i.x+"px",t.style.height=i.y+"px",t.onselectstart=y,t.onmousemove=y,De.ielt9&&this.options.opacity<1&&_n(t,this.options.opacity)},_addTile:function(t,i){var u=this._getTilePos(t),A=this._tileCoordsToKey(t),C=this.createTile(this._wrapCoords(t),p(this._tileReady,this,t));this._initTile(C),this.createTile.length<2&&U(p(this._tileReady,this,t,null,C)),Yt(C,u),this._tiles[A]={el:C,coords:t,current:!0},i.appendChild(C),this.fire("tileloadstart",{tile:C,coords:t})},_tileReady:function(t,i,u){i&&this.fire("tileerror",{error:i,tile:u,coords:t});var A=this._tileCoordsToKey(t);u=this._tiles[A],u&&(u.loaded=+new Date,this._map._fadeAnimated?(_n(u.el,0),ne(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),i||(Je(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),De.ielt9||!this._map._fadeAnimated?U(this._pruneTiles,this):setTimeout(p(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var i=new G(this._wrapX?v(t.x,this._wrapX):t.x,this._wrapY?v(t.y,this._wrapY):t.y);return i.z=t.z,i},_pxBoundsToTileRange:function(t){var i=this.getTileSize();return new P(t.min.unscaleBy(i).floor(),t.max.unscaleBy(i).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Vi(t){return new Vr(t)}var Ur=Vr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,i){this._url=t,i=k(this,i),i.detectRetina&&De.retina&&i.maxZoom>0?(i.tileSize=Math.floor(i.tileSize/2),i.zoomReverse?(i.zoomOffset--,i.minZoom=Math.min(i.maxZoom,i.minZoom+1)):(i.zoomOffset++,i.maxZoom=Math.max(i.minZoom,i.maxZoom-1)),i.minZoom=Math.max(0,i.minZoom)):i.zoomReverse?i.minZoom=Math.min(i.maxZoom,i.minZoom):i.maxZoom=Math.max(i.minZoom,i.maxZoom),typeof i.subdomains=="string"&&(i.subdomains=i.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,i){return this._url===t&&i===void 0&&(i=!0),this._url=t,i||this.redraw(),this},createTile:function(t,i){var u=document.createElement("img");return $e(u,"load",p(this._tileOnLoad,this,i,u)),$e(u,"error",p(this._tileOnError,this,i,u)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(u.referrerPolicy=this.options.referrerPolicy),u.alt="",u.src=this.getTileUrl(t),u},getTileUrl:function(t){var i={r:De.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-t.y;this.options.tms&&(i.y=u),i["-y"]=u}return B(this._url,d(i,this.options))},_tileOnLoad:function(t,i){De.ielt9?setTimeout(p(t,this,null,i),0):t(null,i)},_tileOnError:function(t,i,u){var A=this.options.errorTileUrl;A&&i.getAttribute("src")!==A&&(i.src=A),t(u,i)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,i=this.options.maxZoom,u=this.options.zoomReverse,A=this.options.zoomOffset;return u&&(t=i-t),t+A},_getSubdomain:function(t){var i=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[i]},_abortLoading:function(){var t,i;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(i=this._tiles[t].el,i.onload=y,i.onerror=y,!i.complete)){i.src=M;var u=this._tiles[t].coords;It(i),delete this._tiles[t],this.fire("tileabort",{tile:i,coords:u})}},_removeTile:function(t){var i=this._tiles[t];if(i)return i.el.setAttribute("src",M),Vr.prototype._removeTile.call(this,t)},_tileReady:function(t,i,u){if(!(!this._map||u&&u.getAttribute("src")===M))return Vr.prototype._tileReady.call(this,t,i,u)}});function ba(t,i){return new Ur(t,i)}var Eo=Ur.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,i){this._url=t;var u=d({},this.defaultWmsParams);for(var A in i)A in this.options||(u[A]=i[A]);i=k(this,i);var C=i.detectRetina&&De.retina?2:1,O=this.getTileSize();u.width=O.x*C,u.height=O.y*C,this.wmsParams=u},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var i=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[i]=this._crs.code,Ur.prototype.onAdd.call(this,t)},getTileUrl:function(t){var i=this._tileCoordsToNwSe(t),u=this._crs,A=V(u.project(i[0]),u.project(i[1])),C=A.min,O=A.max,Q=(this._wmsVersion>=1.3&&this._crs===Tl?[C.y,C.x,O.y,O.x]:[C.x,C.y,O.x,O.y]).join(","),ie=Ur.prototype.getTileUrl.call(this,t);return ie+E(this.wmsParams,ie,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Q},setParams:function(t,i){return d(this.wmsParams,t),i||this.redraw(),this}});function Ol(t,i){return new Eo(t,i)}Ur.WMS=Eo,ba.wms=Ol;var dr=Jn.extend({options:{padding:.1},initialize:function(t){k(this,t),g(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Je(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,i){var u=this._map.getZoomScale(i,this._zoom),A=this._map.getSize().multiplyBy(.5+this.options.padding),C=this._map.project(this._center,i),O=A.multiplyBy(-u).add(C).subtract(this._map._getNewPixelOrigin(t,i));De.any3d?Qn(this._container,O,u):Yt(this._container,O)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,i=this._map.getSize(),u=this._map.containerPointToLayerPoint(i.multiplyBy(-t)).round();this._bounds=new P(u,u.add(i.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ca=dr.extend({options:{tolerance:0},getEvents:function(){var t=dr.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){dr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");$e(t,"mousemove",this._onMouseMove,this),$e(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),$e(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){ne(this._redrawRequest),delete this._ctx,It(this._container),Pt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var i in this._layers)t=this._layers[i],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){dr.prototype._update.call(this);var t=this._bounds,i=this._container,u=t.getSize(),A=De.retina?2:1;Yt(i,t.min),i.width=A*u.x,i.height=A*u.y,i.style.width=u.x+"px",i.style.height=u.y+"px",De.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){dr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[g(t)]=t;var i=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=i),this._drawLast=i,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var i=t._order,u=i.next,A=i.prev;u?u.prev=A:this._drawLast=A,A?A.next=u:this._drawFirst=u,delete t._order,delete this._layers[g(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var i=t.options.dashArray.split(/[, ]+/),u=[],A,C;for(C=0;C<i.length;C++){if(A=Number(i[C]),isNaN(A))return;u.push(A)}t.options._dashArray=u}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||U(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var i=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new P,this._redrawBounds.extend(t._pxBounds.min.subtract([i,i])),this._redrawBounds.extend(t._pxBounds.max.add([i,i]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var i=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,i.x,i.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,i=this._redrawBounds;if(this._ctx.save(),i){var u=i.getSize();this._ctx.beginPath(),this._ctx.rect(i.min.x,i.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var A=this._drawFirst;A;A=A.next)t=A.layer,(!i||t._pxBounds&&t._pxBounds.intersects(i))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,i){if(this._drawing){var u,A,C,O,Q=t._parts,ie=Q.length,le=this._ctx;if(ie){for(le.beginPath(),u=0;u<ie;u++){for(A=0,C=Q[u].length;A<C;A++)O=Q[u][A],le[A?"lineTo":"moveTo"](O.x,O.y);i&&le.closePath()}this._fillStroke(le,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var i=t._point,u=this._ctx,A=Math.max(Math.round(t._radius),1),C=(Math.max(Math.round(t._radiusY),1)||A)/A;C!==1&&(u.save(),u.scale(1,C)),u.beginPath(),u.arc(i.x,i.y/C,A,0,Math.PI*2,!1),C!==1&&u.restore(),this._fillStroke(u,t)}},_fillStroke:function(t,i){var u=i.options;u.fill&&(t.globalAlpha=u.fillOpacity,t.fillStyle=u.fillColor||u.color,t.fill(u.fillRule||"evenodd")),u.stroke&&u.weight!==0&&(t.setLineDash&&t.setLineDash(i.options&&i.options._dashArray||[]),t.globalAlpha=u.opacity,t.lineWidth=u.weight,t.strokeStyle=u.color,t.lineCap=u.lineCap,t.lineJoin=u.lineJoin,t.stroke())},_onClick:function(t){for(var i=this._map.mouseEventToLayerPoint(t),u,A,C=this._drawFirst;C;C=C.next)u=C.layer,u.options.interactive&&u._containsPoint(i)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(u))&&(A=u);this._fireEvent(A?[A]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var i=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,i)}},_handleMouseOut:function(t){var i=this._hoveredLayer;i&&(Nt(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,i){if(!this._mouseHoverThrottled){for(var u,A,C=this._drawFirst;C;C=C.next)u=C.layer,u.options.interactive&&u._containsPoint(i)&&(A=u);A!==this._hoveredLayer&&(this._handleMouseOut(t),A&&(Je(this._container,"leaflet-interactive"),this._fireEvent([A],t,"mouseover"),this._hoveredLayer=A)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(p(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,i,u){this._map._fireDOMEvent(i,u||i.type,t)},_bringToFront:function(t){var i=t._order;if(i){var u=i.next,A=i.prev;if(u)u.prev=A;else return;A?A.next=u:u&&(this._drawFirst=u),i.prev=this._drawLast,this._drawLast.next=i,i.next=null,this._drawLast=i,this._requestRedraw(t)}},_bringToBack:function(t){var i=t._order;if(i){var u=i.next,A=i.prev;if(A)A.next=u;else return;u?u.prev=A:A&&(this._drawLast=A),i.prev=null,i.next=this._drawFirst,this._drawFirst.prev=i,this._drawFirst=i,this._requestRedraw(t)}}});function Ea(t){return De.canvas?new Ca(t):null}var Ui=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),jl={_initContainer:function(){this._container=rt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(dr.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var i=t._container=Ui("shape");Je(i,"leaflet-vml-shape "+(this.options.className||"")),i.coordsize="1 1",t._path=Ui("path"),i.appendChild(t._path),this._updateStyle(t),this._layers[g(t)]=t},_addPath:function(t){var i=t._container;this._container.appendChild(i),t.options.interactive&&t.addInteractiveTarget(i)},_removePath:function(t){var i=t._container;It(i),t.removeInteractiveTarget(i),delete this._layers[g(t)]},_updateStyle:function(t){var i=t._stroke,u=t._fill,A=t.options,C=t._container;C.stroked=!!A.stroke,C.filled=!!A.fill,A.stroke?(i||(i=t._stroke=Ui("stroke")),C.appendChild(i),i.weight=A.weight+"px",i.color=A.color,i.opacity=A.opacity,A.dashArray?i.dashStyle=S(A.dashArray)?A.dashArray.join(" "):A.dashArray.replace(/( *, *)/g," "):i.dashStyle="",i.endcap=A.lineCap.replace("butt","flat"),i.joinstyle=A.lineJoin):i&&(C.removeChild(i),t._stroke=null),A.fill?(u||(u=t._fill=Ui("fill")),C.appendChild(u),u.color=A.fillColor||A.color,u.opacity=A.fillOpacity):u&&(C.removeChild(u),t._fill=null)},_updateCircle:function(t){var i=t._point.round(),u=Math.round(t._radius),A=Math.round(t._radiusY||u);this._setPath(t,t._empty()?"M0 0":"AL "+i.x+","+i.y+" "+u+","+A+" 0,"+65535*360)},_setPath:function(t,i){t._path.v=i},_bringToFront:function(t){Pi(t._container)},_bringToBack:function(t){yr(t._container)}},tr=De.vml?Ui:dt,ui=dr.extend({_initContainer:function(){this._container=tr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=tr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){It(this._container),Pt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){dr.prototype._update.call(this);var t=this._bounds,i=t.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(i))&&(this._svgSize=i,u.setAttribute("width",i.x),u.setAttribute("height",i.y)),Yt(u,t.min),u.setAttribute("viewBox",[t.min.x,t.min.y,i.x,i.y].join(" ")),this.fire("update")}},_initPath:function(t){var i=t._path=tr("path");t.options.className&&Je(i,t.options.className),t.options.interactive&&Je(i,"leaflet-interactive"),this._updateStyle(t),this._layers[g(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){It(t._path),t.removeInteractiveTarget(t._path),delete this._layers[g(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var i=t._path,u=t.options;i&&(u.stroke?(i.setAttribute("stroke",u.color),i.setAttribute("stroke-opacity",u.opacity),i.setAttribute("stroke-width",u.weight),i.setAttribute("stroke-linecap",u.lineCap),i.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?i.setAttribute("stroke-dasharray",u.dashArray):i.removeAttribute("stroke-dasharray"),u.dashOffset?i.setAttribute("stroke-dashoffset",u.dashOffset):i.removeAttribute("stroke-dashoffset")):i.setAttribute("stroke","none"),u.fill?(i.setAttribute("fill",u.fillColor||u.color),i.setAttribute("fill-opacity",u.fillOpacity),i.setAttribute("fill-rule",u.fillRule||"evenodd")):i.setAttribute("fill","none"))},_updatePoly:function(t,i){this._setPath(t,Mt(t._parts,i))},_updateCircle:function(t){var i=t._point,u=Math.max(Math.round(t._radius),1),A=Math.max(Math.round(t._radiusY),1)||u,C="a"+u+","+A+" 0 1,0 ",O=t._empty()?"M0 0":"M"+(i.x-u)+","+i.y+C+u*2+",0 "+C+-u*2+",0 ";this._setPath(t,O)},_setPath:function(t,i){t._path.setAttribute("d",i)},_bringToFront:function(t){Pi(t._path)},_bringToBack:function(t){yr(t._path)}});De.vml&&ui.include(jl);function Cs(t){return De.svg||De.vml?new ui(t):null}pt.include({getRenderer:function(t){var i=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return i||(i=this._renderer=this._createRenderer()),this.hasLayer(i)||this.addLayer(i),i},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var i=this._paneRenderers[t];return i===void 0&&(i=this._createRenderer({pane:t}),this._paneRenderers[t]=i),i},_createRenderer:function(t){return this.options.preferCanvas&&Ea(t)||Cs(t)}});var zl=Er.extend({initialize:function(t,i){Er.prototype.initialize.call(this,this._boundsToLatLngs(t),i)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=$(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function _d(t,i){return new zl(t,i)}ui.create=tr,ui.pointsToPath=Mt,ur.geometryToLayer=Oi,ur.coordsToLatLng=xs,ur.coordsToLatLngs=bo,ur.latLngToCoords=vs,ur.latLngsToCoords=ys,ur.getFeature=ji,ur.asFeature=_s,pt.mergeOptions({boxZoom:!0});var Zi=In.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){$e(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Pt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){It(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),At(),ss(),this._startPoint=this._map.mouseEventToContainerPoint(t),$e(document,{contextmenu:Yn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=rt("div","leaflet-zoom-box",this._container),Je(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var i=new P(this._point,this._startPoint),u=i.getSize();Yt(this._box,i.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(It(this._box),Nt(this._container,"leaflet-crosshair")),Ri(),as(),Pt(document,{contextmenu:Yn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(p(this._resetState,this),0);var i=new K(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(i).fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});pt.addInitHook("addHandler","boxZoom",Zi),pt.mergeOptions({doubleClickZoom:!0});var Hl=In.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var i=this._map,u=i.getZoom(),A=i.options.zoomDelta,C=t.originalEvent.shiftKey?u-A:u+A;i.options.doubleClickZoom==="center"?i.setZoom(C):i.setZoomAround(t.containerPoint,C)}});pt.addInitHook("addHandler","doubleClickZoom",Hl),pt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ka=In.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Xn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Je(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Nt(this._map._container,"leaflet-grab"),Nt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var i=$(this._map.options.maxBounds);this._offsetLimit=V(this._map.latLngToContainerPoint(i.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(i.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var i=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(i),this._prunePositions(i)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),i=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=i.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,i){return t-(t-i)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),i=this._offsetLimit;t.x<i.min.x&&(t.x=this._viscousLimit(t.x,i.min.x)),t.y<i.min.y&&(t.y=this._viscousLimit(t.y,i.min.y)),t.x>i.max.x&&(t.x=this._viscousLimit(t.x,i.max.x)),t.y>i.max.y&&(t.y=this._viscousLimit(t.y,i.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,i=Math.round(t/2),u=this._initialWorldOffset,A=this._draggable._newPos.x,C=(A-i+u)%t+i-u,O=(A+i+u)%t-i-u,Q=Math.abs(C+u)<Math.abs(O+u)?C:O;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Q},_onDragEnd:function(t){var i=this._map,u=i.options,A=!u.inertia||t.noInertia||this._times.length<2;if(i.fire("dragend",t),A)i.fire("moveend");else{this._prunePositions(+new Date);var C=this._lastPos.subtract(this._positions[0]),O=(this._lastTime-this._times[0])/1e3,Q=u.easeLinearity,ie=C.multiplyBy(Q/O),le=ie.distanceTo([0,0]),xe=Math.min(u.inertiaMaxSpeed,le),Pe=ie.multiplyBy(xe/le),We=xe/(u.inertiaDeceleration*Q),it=Pe.multiplyBy(-We/2).round();!it.x&&!it.y?i.fire("moveend"):(it=i._limitOffset(it,i.options.maxBounds),U(function(){i.panBy(it,{duration:We,easeLinearity:Q,noMoveStart:!0,animate:!0})}))}}});pt.addInitHook("addHandler","dragging",ka),pt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Sa=In.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),$e(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Pt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,i=document.documentElement,u=t.scrollTop||i.scrollTop,A=t.scrollLeft||i.scrollLeft;this._map._container.focus(),window.scrollTo(A,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var i=this._panKeys={},u=this.keyCodes,A,C;for(A=0,C=u.left.length;A<C;A++)i[u.left[A]]=[-1*t,0];for(A=0,C=u.right.length;A<C;A++)i[u.right[A]]=[t,0];for(A=0,C=u.down.length;A<C;A++)i[u.down[A]]=[0,t];for(A=0,C=u.up.length;A<C;A++)i[u.up[A]]=[0,-1*t]},_setZoomDelta:function(t){var i=this._zoomKeys={},u=this.keyCodes,A,C;for(A=0,C=u.zoomIn.length;A<C;A++)i[u.zoomIn[A]]=t;for(A=0,C=u.zoomOut.length;A<C;A++)i[u.zoomOut[A]]=-t},_addHooks:function(){$e(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Pt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var i=t.keyCode,u=this._map,A;if(i in this._panKeys){if(!u._panAnim||!u._panAnim._inProgress)if(A=this._panKeys[i],t.shiftKey&&(A=Z(A).multiplyBy(3)),u.options.maxBounds&&(A=u._limitOffset(Z(A),u.options.maxBounds)),u.options.worldCopyJump){var C=u.wrapLatLng(u.unproject(u.project(u.getCenter()).add(A)));u.panTo(C)}else u.panBy(A)}else if(i in this._zoomKeys)u.setZoom(u.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else if(i===27&&u._popup&&u._popup.options.closeOnEscapeKey)u.closePopup();else return;Yn(t)}}});pt.addInitHook("addHandler","keyboard",Sa),pt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Tt=In.extend({addHooks:function(){$e(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Pt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var i=wl(t),u=this._map.options.wheelDebounceTime;this._delta+=i,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var A=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(p(this._performZoom,this),A),Yn(t)},_performZoom:function(){var t=this._map,i=t.getZoom(),u=this._map.options.zoomSnap||0;t._stop();var A=this._delta/(this._map.options.wheelPxPerZoomLevel*4),C=4*Math.log(2/(1+Math.exp(-Math.abs(A))))/Math.LN2,O=u?Math.ceil(C/u)*u:C,Q=t._limitZoom(i+(this._delta>0?O:-O))-i;this._delta=0,this._startTime=null,Q&&(t.options.scrollWheelZoom==="center"?t.setZoom(i+Q):t.setZoomAround(this._lastMousePos,i+Q))}});pt.addInitHook("addHandler","scrollWheelZoom",Tt);var Ba=600;pt.mergeOptions({tapHold:De.touchNative&&De.safari&&De.mobile,tapTolerance:15});var ko=In.extend({addHooks:function(){$e(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Pt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var i=t.touches[0];this._startPos=this._newPos=new G(i.clientX,i.clientY),this._holdTimeout=setTimeout(p(function(){this._cancel(),this._isTapValid()&&($e(document,"touchend",Wt),$e(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",i))},this),Ba),$e(document,"touchend touchcancel contextmenu",this._cancel,this),$e(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Pt(document,"touchend",Wt),Pt(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Pt(document,"touchend touchcancel contextmenu",this._cancel,this),Pt(document,"touchmove",this._onMove,this)},_onMove:function(t){var i=t.touches[0];this._newPos=new G(i.clientX,i.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,i){var u=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY});u._simulated=!0,i.target.dispatchEvent(u)}});pt.addInitHook("addHandler","tapHold",ko),pt.mergeOptions({touchZoom:De.touch,bounceAtZoomLimits:!0});var Wi=In.extend({addHooks:function(){Je(this._map._container,"leaflet-touch-zoom"),$e(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Nt(this._map._container,"leaflet-touch-zoom"),Pt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var i=this._map;if(!(!t.touches||t.touches.length!==2||i._animatingZoom||this._zooming)){var u=i.mouseEventToContainerPoint(t.touches[0]),A=i.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=i.getSize()._divideBy(2),this._startLatLng=i.containerPointToLatLng(this._centerPoint),i.options.touchZoom!=="center"&&(this._pinchStartLatLng=i.containerPointToLatLng(u.add(A)._divideBy(2))),this._startDist=u.distanceTo(A),this._startZoom=i.getZoom(),this._moved=!1,this._zooming=!0,i._stop(),$e(document,"touchmove",this._onTouchMove,this),$e(document,"touchend touchcancel",this._onTouchEnd,this),Wt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var i=this._map,u=i.mouseEventToContainerPoint(t.touches[0]),A=i.mouseEventToContainerPoint(t.touches[1]),C=u.distanceTo(A)/this._startDist;if(this._zoom=i.getScaleZoom(C,this._startZoom),!i.options.bounceAtZoomLimits&&(this._zoom<i.getMinZoom()&&C<1||this._zoom>i.getMaxZoom()&&C>1)&&(this._zoom=i._limitZoom(this._zoom)),i.options.touchZoom==="center"){if(this._center=this._startLatLng,C===1)return}else{var O=u._add(A)._divideBy(2)._subtract(this._centerPoint);if(C===1&&O.x===0&&O.y===0)return;this._center=i.unproject(i.project(this._pinchStartLatLng,this._zoom).subtract(O),this._zoom)}this._moved||(i._moveStart(!0,!1),this._moved=!0),ne(this._animRequest);var Q=p(i._move,i,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=U(Q,this,!0),Wt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ne(this._animRequest),Pt(document,"touchmove",this._onTouchMove,this),Pt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});pt.addInitHook("addHandler","touchZoom",Wi),pt.BoxZoom=Zi,pt.DoubleClickZoom=Hl,pt.Drag=ka,pt.Keyboard=Sa,pt.ScrollWheelZoom=Tt,pt.TapHold=ko,pt.TouchZoom=Wi,o.Bounds=P,o.Browser=De,o.CRS=Se,o.Canvas=Ca,o.Circle=gs,o.CircleMarker=ms,o.Class=re,o.Control=Dn,o.DivIcon=bs,o.DivOverlay=cr,o.DomEvent=cs,o.DomUtil=Ao,o.Draggable=Xn,o.Evented=he,o.FeatureGroup=br,o.GeoJSON=ur,o.GridLayer=Vr,o.Handler=In,o.Icon=li,o.ImageOverlay=Hr,o.LatLng=ce,o.LatLngBounds=K,o.Layer=Jn,o.LayerGroup=jr,o.LineUtil=Pl,o.Map=pt,o.Marker=Cr,o.Mixin=da,o.Path=zr,o.Point=G,o.PolyUtil=cd,o.Polygon=Er,o.Polyline=Rn,o.Popup=ws,o.PosAnimation=ds,o.Projection=md,o.Rectangle=zl,o.Renderer=dr,o.SVG=ui,o.SVGOverlay=_a,o.TileLayer=Ur,o.Tooltip=Hi,o.Transformation=bt,o.Util=Y,o.VideoOverlay=ya,o.bind=p,o.bounds=V,o.canvas=Ea,o.circle=wo,o.circleMarker=Fl,o.control=Or,o.divIcon=Il,o.extend=d,o.featureGroup=Dl,o.geoJSON=Nl,o.geoJson=er,o.gridLayer=Vi,o.icon=Rl,o.imageOverlay=Ll,o.latLng=de,o.latLngBounds=$,o.layerGroup=_o,o.map=Ir,o.marker=xd,o.point=Z,o.polygon=yd,o.polyline=vd,o.popup=zi,o.rectangle=_d,o.setOptions=k,o.stamp=g,o.svg=Cs,o.svgOverlay=wa,o.tileLayer=ba,o.tooltip=Co,o.transformation=ct,o.version=l,o.videoOverlay=Ml;var Vl=window.L;o.noConflict=function(){return window.L=Vl,this},window.L=o}))})(ol,ol.exports)),ol.exports}var ed=X2();function D0(r,a,o){return Object.freeze({instance:r,context:a,container:o})}function R0(r,a){return a==null?function(l,d){const f=R.useRef();return f.current||(f.current=r(l,d)),f}:function(l,d){const f=R.useRef();f.current||(f.current=r(l,d));const p=R.useRef(l),{instance:h}=f.current;return R.useEffect(function(){p.current!==l&&(a(h,l,p.current),p.current=l)},[h,l,d]),f}}function wx(r,a){R.useEffect(function(){return(a.layerContainer??a.map).addLayer(r.instance),function(){var f;(f=a.layerContainer)==null||f.removeLayer(r.instance),a.map.removeLayer(r.instance)}},[a,r])}function J2(r){return function(o){const l=Xc(),d=r(Jc(o,l),l);return vx(l.map,o.attribution),T0(d.current,o.eventHandlers),wx(d.current,l),d}}function eb(r,a){const o=R.useRef();R.useEffect(function(){if(a.pathOptions!==o.current){const d=a.pathOptions??{};r.instance.setStyle(d),o.current=d}},[r,a])}function tb(r){return function(o){const l=Xc(),d=r(Jc(o,l),l);return T0(d.current,o.eventHandlers),wx(d.current,l),eb(d.current,o),d}}function nb(r,a){const o=R0(r),l=$2(o,a);return K2(l)}function rb(r,a){const o=R0(r,a),l=tb(o);return G2(l)}function ib(r,a){const o=R0(r,a),l=J2(o);return Q2(l)}function ob(r,a,o){const{opacity:l,zIndex:d}=a;l!=null&&l!==o.opacity&&r.setOpacity(l),d!=null&&d!==o.zIndex&&r.setZIndex(d)}function sb(){return Xc().map}const ab=rb(function({center:a,children:o,...l},d){const f=new ed.CircleMarker(a,l);return D0(f,q2(d,{overlayContainer:f}))},U2);function o0(){return o0=Object.assign||function(r){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])}return r},o0.apply(this,arguments)}function lb({bounds:r,boundsOptions:a,center:o,children:l,className:d,id:f,placeholder:p,style:h,whenReady:g,zoom:m,...v},y){const[w]=R.useState({className:d,id:f,style:h}),[T,F]=R.useState(null);R.useImperativeHandle(y,()=>(T==null?void 0:T.map)??null,[T]);const k=R.useCallback(D=>{if(D!==null&&T===null){const B=new ed.Map(D,v);o!=null&&m!=null?B.setView(o,m):r!=null&&B.fitBounds(r,a),g!=null&&B.whenReady(g),F(W2(B))}},[]);R.useEffect(()=>()=>{T==null||T.map.remove()},[T]);const E=T?Ee.createElement(_x,{value:T},l):p??null;return Ee.createElement("div",o0({},w,{ref:k}),E)}const ub=R.forwardRef(lb),cb=nb(function(a,o){const l=new ed.Popup(a,o.overlayContainer);return D0(l,o)},function(a,o,{position:l},d){R.useEffect(function(){const{instance:p}=a;function h(m){m.popup===p&&(p.update(),d(!0))}function g(m){m.popup===p&&d(!1)}return o.map.on({popupopen:h,popupclose:g}),o.overlayContainer==null?(l!=null&&p.setLatLng(l),p.openOn(o.map)):o.overlayContainer.bindPopup(p),function(){var v;o.map.off({popupopen:h,popupclose:g}),(v=o.overlayContainer)==null||v.unbindPopup(),o.map.removeLayer(p)}},[a,o,d,l])}),db=ib(function({url:a,...o},l){const d=new ed.TileLayer(a,Jc(o,l));return D0(d,l)},function(a,o,l){ob(a,o,l);const{url:d}=o;d!=null&&d!==l.url&&a.setUrl(d)});function fb(r){const o=Date.now()/1e3-r,l=3600,d=86400;return o<l?"#22c55e":o<d?"#4ade80":o<3*d?"#a3e635":"#9ca3af"}function hb({contacts:r,focusedContact:a}){const o=sb(),[l,d]=R.useState(!1);return R.useEffect(()=>{if(a&&a.lat!=null&&a.lon!=null){o.setView([a.lat,a.lon],12),d(!0);return}if(l)return;const f=()=>{if(r.length===0){o.setView([20,0],2),d(!0);return}if(r.length===1){o.setView([r[0].lat,r[0].lon],10),d(!0);return}const p=r.map(h=>[h.lat,h.lon]);o.fitBounds(p,{padding:[50,50],maxZoom:12}),d(!0)};"geolocation"in navigator?navigator.geolocation.getCurrentPosition(p=>{o.setView([p.coords.latitude,p.coords.longitude],8),d(!0)},()=>{f()},{timeout:5e3,maximumAge:3e5}):f()},[o,r,l,a]),null}function pb({contacts:r,focusedKey:a}){const o=R.useMemo(()=>{const p=Date.now()/1e3-604800;return r.filter(h=>h.lat!=null&&h.lon!=null&&h.last_seen!=null&&h.last_seen>p)},[r]),l=R.useMemo(()=>a&&o.find(p=>p.public_key===a)||null,[a,o]),d=R.useRef({}),f=R.useCallback((p,h)=>{d.current[p]=h},[]);return R.useEffect(()=>{if(l&&d.current[l.public_key]){const p=setTimeout(()=>{var h;(h=d.current[l.public_key])==null||h.openPopup()},100);return()=>clearTimeout(p)}},[l]),b.jsxs("div",{className:"flex flex-col h-full",children:[b.jsxs("div",{className:"px-4 py-2 bg-muted/50 text-xs text-muted-foreground flex items-center justify-between",children:[b.jsxs("span",{children:["Showing ",o.length," contact",o.length!==1?"s":""," heard in the last 7 days"]}),b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsxs("span",{className:"flex items-center gap-1",children:[b.jsx("span",{className:"w-3 h-3 rounded-full bg-[#22c55e]"})," <1h"]}),b.jsxs("span",{className:"flex items-center gap-1",children:[b.jsx("span",{className:"w-3 h-3 rounded-full bg-[#4ade80]"})," <1d"]}),b.jsxs("span",{className:"flex items-center gap-1",children:[b.jsx("span",{className:"w-3 h-3 rounded-full bg-[#a3e635]"})," <3d"]}),b.jsxs("span",{className:"flex items-center gap-1",children:[b.jsx("span",{className:"w-3 h-3 rounded-full bg-[#9ca3af]"})," older"]})]})]}),b.jsx("div",{className:"flex-1 relative",style:{zIndex:0},children:b.jsxs(ub,{center:[20,0],zoom:2,className:"h-full w-full",style:{background:"#1a1a2e"},children:[b.jsx(db,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),b.jsx(hb,{contacts:o,focusedContact:l}),o.map(p=>{const h=p.type===Oc,g=fb(p.last_seen),m=p.name||p.public_key.slice(0,12);return b.jsx(ab,{ref:v=>f(p.public_key,v),center:[p.lat,p.lon],radius:h?10:7,pathOptions:{color:h?g:"#000",fillColor:g,fillOpacity:.8,weight:h?0:1},children:b.jsx(cb,{children:b.jsxs("div",{className:"text-sm",children:[b.jsxs("div",{className:"font-medium flex items-center gap-1",children:[h&&b.jsx("span",{title:"Repeater",children:""}),m]}),b.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Last heard: ",Ks(p.last_seen)]}),b.jsxs("div",{className:"text-xs text-gray-400 mt-1 font-mono",children:[p.lat.toFixed(5),", ",p.lon.toFixed(5)]})]})})},p.public_key)})]})})]})}const mb="modulepreload",gb=function(r){return"/"+r},mm={},Ab=function(a,o,l){let d=Promise.resolve();if(o&&o.length>0){let p=function(m){return Promise.all(m.map(v=>Promise.resolve(v).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),g=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));d=p(o.map(m=>{if(m=gb(m),m in mm)return;mm[m]=!0;const v=m.endsWith(".css"),y=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${y}`))return;const w=document.createElement("link");if(w.rel=v?"stylesheet":mb,v||(w.as="script"),w.crossOrigin="",w.href=m,g&&w.setAttribute("nonce",g),document.head.appendChild(w),v)return new Promise((T,F)=>{w.addEventListener("load",T),w.addEventListener("error",()=>F(new Error(`Unable to preload CSS for ${m}`)))})}))}function f(p){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=p,window.dispatchEvent(h),!h.defaultPrevented)throw p}return d.then(p=>{for(const h of p||[])h.status==="rejected"&&f(h.reason);return a().catch(f)})};var wi={},qa={},xn={},gm;function sr(){if(gm)return xn;gm=1,Object.defineProperty(xn,"__esModule",{value:!0}),xn.RequestType=xn.AdvertFlags=xn.DeviceRole=xn.PayloadVersion=xn.ControlSubType=xn.PayloadType=xn.RouteType=void 0;var r;(function(h){h[h.TransportFlood=0]="TransportFlood",h[h.Flood=1]="Flood",h[h.Direct=2]="Direct",h[h.TransportDirect=3]="TransportDirect"})(r||(xn.RouteType=r={}));var a;(function(h){h[h.Request=0]="Request",h[h.Response=1]="Response",h[h.TextMessage=2]="TextMessage",h[h.Ack=3]="Ack",h[h.Advert=4]="Advert",h[h.GroupText=5]="GroupText",h[h.GroupData=6]="GroupData",h[h.AnonRequest=7]="AnonRequest",h[h.Path=8]="Path",h[h.Trace=9]="Trace",h[h.Multipart=10]="Multipart",h[h.Control=11]="Control",h[h.RawCustom=15]="RawCustom"})(a||(xn.PayloadType=a={}));var o;(function(h){h[h.NodeDiscoverReq=128]="NodeDiscoverReq",h[h.NodeDiscoverResp=144]="NodeDiscoverResp"})(o||(xn.ControlSubType=o={}));var l;(function(h){h[h.Version1=0]="Version1",h[h.Version2=1]="Version2",h[h.Version3=2]="Version3",h[h.Version4=3]="Version4"})(l||(xn.PayloadVersion=l={}));var d;(function(h){h[h.Unknown=0]="Unknown",h[h.ChatNode=1]="ChatNode",h[h.Repeater=2]="Repeater",h[h.RoomServer=3]="RoomServer",h[h.Sensor=4]="Sensor"})(d||(xn.DeviceRole=d={}));var f;(function(h){h[h.HasLocation=16]="HasLocation",h[h.HasFeature1=32]="HasFeature1",h[h.HasFeature2=64]="HasFeature2",h[h.HasName=128]="HasName"})(f||(xn.AdvertFlags=f={}));var p;return(function(h){h[h.GetStats=1]="GetStats",h[h.Keepalive=2]="Keepalive",h[h.GetTelemetryData=3]="GetTelemetryData",h[h.GetMinMaxAvgData=4]="GetMinMaxAvgData",h[h.GetAccessList=5]="GetAccessList"})(p||(xn.RequestType=p={})),xn}var Ho={},Am;function vn(){if(Am)return Ho;Am=1,Object.defineProperty(Ho,"__esModule",{value:!0}),Ho.byteToHex=r,Ho.bytesToHex=a,Ho.numberToHex=o,Ho.hexToBytes=l;function r(d){return d.toString(16).padStart(2,"0").toUpperCase()}function a(d){return Array.from(d).map(r).join("")}function o(d,f=8){return(d>>>0).toString(16).padStart(f,"0").toUpperCase()}function l(d){const f=d.replace(/\s/g,"").toUpperCase();if(!/^[0-9A-F]*$/.test(f))throw new Error("Invalid hex string: invalid characters at position 0");if(f.length%2!==0)throw new Error("Invalid hex string: odd length");const p=new Uint8Array(f.length/2);for(let h=0;h<f.length;h+=2)p[h/2]=parseInt(f.substr(h,2),16);return p}return Ho}var bi={},xm;function ll(){if(xm)return bi;xm=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.getRouteTypeName=a,bi.getPayloadTypeName=o,bi.getPayloadVersionName=l,bi.getDeviceRoleName=d,bi.getRequestTypeName=f,bi.getControlSubTypeName=p;const r=sr();function a(h){switch(h){case r.RouteType.Flood:return"Flood";case r.RouteType.Direct:return"Direct";case r.RouteType.TransportFlood:return"TransportFlood";case r.RouteType.TransportDirect:return"TransportDirect";default:return`Unknown (${h})`}}function o(h){switch(h){case r.PayloadType.RawCustom:return"RawCustom";case r.PayloadType.Trace:return"Trace";case r.PayloadType.Advert:return"Advert";case r.PayloadType.GroupText:return"GroupText";case r.PayloadType.GroupData:return"GroupData";case r.PayloadType.Request:return"Request";case r.PayloadType.Response:return"Response";case r.PayloadType.TextMessage:return"TextMessage";case r.PayloadType.AnonRequest:return"AnonRequest";case r.PayloadType.Ack:return"Ack";case r.PayloadType.Path:return"Path";case r.PayloadType.Multipart:return"Multipart";case r.PayloadType.Control:return"Control";default:return`Unknown (0x${h.toString(16)})`}}function l(h){switch(h){case r.PayloadVersion.Version1:return"Version 1";case r.PayloadVersion.Version2:return"Version 2";case r.PayloadVersion.Version3:return"Version 3";case r.PayloadVersion.Version4:return"Version 4";default:return`Unknown (${h})`}}function d(h){switch(h){case r.DeviceRole.Unknown:return"Unknown";case r.DeviceRole.ChatNode:return"Chat Node";case r.DeviceRole.Repeater:return"Repeater";case r.DeviceRole.RoomServer:return"Room Server";case r.DeviceRole.Sensor:return"Sensor";default:return`Unknown (${h})`}}function f(h){switch(h){case r.RequestType.GetStats:return"Get Stats";case r.RequestType.Keepalive:return"Keepalive (deprecated)";case r.RequestType.GetTelemetryData:return"Get Telemetry Data";case r.RequestType.GetMinMaxAvgData:return"Get Min/Max/Avg Data";case r.RequestType.GetAccessList:return"Get Access List";default:return`Unknown (${h})`}}function p(h){switch(h){case r.ControlSubType.NodeDiscoverReq:return"Node Discover Request";case r.ControlSubType.NodeDiscoverResp:return"Node Discover Response";default:return`Unknown (0x${h.toString(16)})`}}return bi}var Ga={},Ka={},Zu={exports:{}};function s0(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Wu={exports:{}};const xb={},vb=Object.freeze(Object.defineProperty({__proto__:null,default:xb},Symbol.toStringTag,{value:"Module"})),Nc=Mg(vb);var yb=Wu.exports,vm;function mt(){return vm||(vm=1,(function(r,a){(function(o,l){r.exports=l()})(yb,function(){var o=o||(function(l,d){var f;if(typeof window<"u"&&window.crypto&&(f=window.crypto),typeof self<"u"&&self.crypto&&(f=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(f=globalThis.crypto),!f&&typeof window<"u"&&window.msCrypto&&(f=window.msCrypto),!f&&typeof Bf<"u"&&Bf.crypto&&(f=Bf.crypto),!f&&typeof s0=="function")try{f=Nc}catch{}var p=function(){if(f){if(typeof f.getRandomValues=="function")try{return f.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof f.randomBytes=="function")try{return f.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},h=Object.create||(function(){function B(){}return function(S){var N;return B.prototype=S,N=new B,B.prototype=null,N}})(),g={},m=g.lib={},v=m.Base=(function(){return{extend:function(B){var S=h(this);return B&&S.mixIn(B),(!S.hasOwnProperty("init")||this.init===S.init)&&(S.init=function(){S.$super.init.apply(this,arguments)}),S.init.prototype=S,S.$super=this,S},create:function(){var B=this.extend();return B.init.apply(B,arguments),B},init:function(){},mixIn:function(B){for(var S in B)B.hasOwnProperty(S)&&(this[S]=B[S]);B.hasOwnProperty("toString")&&(this.toString=B.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),y=m.WordArray=v.extend({init:function(B,S){B=this.words=B||[],S!=d?this.sigBytes=S:this.sigBytes=B.length*4},toString:function(B){return(B||T).stringify(this)},concat:function(B){var S=this.words,N=B.words,M=this.sigBytes,z=B.sigBytes;if(this.clamp(),M%4)for(var H=0;H<z;H++){var j=N[H>>>2]>>>24-H%4*8&255;S[M+H>>>2]|=j<<24-(M+H)%4*8}else for(var J=0;J<z;J+=4)S[M+J>>>2]=N[J>>>2];return this.sigBytes+=z,this},clamp:function(){var B=this.words,S=this.sigBytes;B[S>>>2]&=4294967295<<32-S%4*8,B.length=l.ceil(S/4)},clone:function(){var B=v.clone.call(this);return B.words=this.words.slice(0),B},random:function(B){for(var S=[],N=0;N<B;N+=4)S.push(p());return new y.init(S,B)}}),w=g.enc={},T=w.Hex={stringify:function(B){for(var S=B.words,N=B.sigBytes,M=[],z=0;z<N;z++){var H=S[z>>>2]>>>24-z%4*8&255;M.push((H>>>4).toString(16)),M.push((H&15).toString(16))}return M.join("")},parse:function(B){for(var S=B.length,N=[],M=0;M<S;M+=2)N[M>>>3]|=parseInt(B.substr(M,2),16)<<24-M%8*4;return new y.init(N,S/2)}},F=w.Latin1={stringify:function(B){for(var S=B.words,N=B.sigBytes,M=[],z=0;z<N;z++){var H=S[z>>>2]>>>24-z%4*8&255;M.push(String.fromCharCode(H))}return M.join("")},parse:function(B){for(var S=B.length,N=[],M=0;M<S;M++)N[M>>>2]|=(B.charCodeAt(M)&255)<<24-M%4*8;return new y.init(N,S)}},k=w.Utf8={stringify:function(B){try{return decodeURIComponent(escape(F.stringify(B)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(B){return F.parse(unescape(encodeURIComponent(B)))}},E=m.BufferedBlockAlgorithm=v.extend({reset:function(){this._data=new y.init,this._nDataBytes=0},_append:function(B){typeof B=="string"&&(B=k.parse(B)),this._data.concat(B),this._nDataBytes+=B.sigBytes},_process:function(B){var S,N=this._data,M=N.words,z=N.sigBytes,H=this.blockSize,j=H*4,J=z/j;B?J=l.ceil(J):J=l.max((J|0)-this._minBufferSize,0);var W=J*H,U=l.min(W*4,z);if(W){for(var ne=0;ne<W;ne+=H)this._doProcessBlock(M,ne);S=M.splice(0,W),N.sigBytes-=U}return new y.init(S,U)},clone:function(){var B=v.clone.call(this);return B._data=this._data.clone(),B},_minBufferSize:0});m.Hasher=E.extend({cfg:v.extend(),init:function(B){this.cfg=this.cfg.extend(B),this.reset()},reset:function(){E.reset.call(this),this._doReset()},update:function(B){return this._append(B),this._process(),this},finalize:function(B){B&&this._append(B);var S=this._doFinalize();return S},blockSize:16,_createHelper:function(B){return function(S,N){return new B.init(N).finalize(S)}},_createHmacHelper:function(B){return function(S,N){return new D.HMAC.init(B,N).finalize(S)}}});var D=g.algo={};return g})(Math);return o})})(Wu)),Wu.exports}var qu={exports:{}},_b=qu.exports,ym;function td(){return ym||(ym=1,(function(r,a){(function(o,l){r.exports=l(mt())})(_b,function(o){return(function(l){var d=o,f=d.lib,p=f.Base,h=f.WordArray,g=d.x64={};g.Word=p.extend({init:function(m,v){this.high=m,this.low=v}}),g.WordArray=p.extend({init:function(m,v){m=this.words=m||[],v!=l?this.sigBytes=v:this.sigBytes=m.length*8},toX32:function(){for(var m=this.words,v=m.length,y=[],w=0;w<v;w++){var T=m[w];y.push(T.high),y.push(T.low)}return h.create(y,this.sigBytes)},clone:function(){for(var m=p.clone.call(this),v=m.words=this.words.slice(0),y=v.length,w=0;w<y;w++)v[w]=v[w].clone();return m}})})(),o})})(qu)),qu.exports}var Gu={exports:{}},wb=Gu.exports,_m;function bb(){return _m||(_m=1,(function(r,a){(function(o,l){r.exports=l(mt())})(wb,function(o){return(function(){if(typeof ArrayBuffer=="function"){var l=o,d=l.lib,f=d.WordArray,p=f.init,h=f.init=function(g){if(g instanceof ArrayBuffer&&(g=new Uint8Array(g)),(g instanceof Int8Array||typeof Uint8ClampedArray<"u"&&g instanceof Uint8ClampedArray||g instanceof Int16Array||g instanceof Uint16Array||g instanceof Int32Array||g instanceof Uint32Array||g instanceof Float32Array||g instanceof Float64Array)&&(g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength)),g instanceof Uint8Array){for(var m=g.byteLength,v=[],y=0;y<m;y++)v[y>>>2]|=g[y]<<24-y%4*8;p.call(this,v,m)}else p.apply(this,arguments)};h.prototype=f}})(),o.lib.WordArray})})(Gu)),Gu.exports}var Ku={exports:{}},Cb=Ku.exports,wm;function Eb(){return wm||(wm=1,(function(r,a){(function(o,l){r.exports=l(mt())})(Cb,function(o){return(function(){var l=o,d=l.lib,f=d.WordArray,p=l.enc;p.Utf16=p.Utf16BE={stringify:function(g){for(var m=g.words,v=g.sigBytes,y=[],w=0;w<v;w+=2){var T=m[w>>>2]>>>16-w%4*8&65535;y.push(String.fromCharCode(T))}return y.join("")},parse:function(g){for(var m=g.length,v=[],y=0;y<m;y++)v[y>>>1]|=g.charCodeAt(y)<<16-y%2*16;return f.create(v,m*2)}},p.Utf16LE={stringify:function(g){for(var m=g.words,v=g.sigBytes,y=[],w=0;w<v;w+=2){var T=h(m[w>>>2]>>>16-w%4*8&65535);y.push(String.fromCharCode(T))}return y.join("")},parse:function(g){for(var m=g.length,v=[],y=0;y<m;y++)v[y>>>1]|=h(g.charCodeAt(y)<<16-y%2*16);return f.create(v,m*2)}};function h(g){return g<<8&4278255360|g>>>8&16711935}})(),o.enc.Utf16})})(Ku)),Ku.exports}var Qu={exports:{}},kb=Qu.exports,bm;function Xo(){return bm||(bm=1,(function(r,a){(function(o,l){r.exports=l(mt())})(kb,function(o){return(function(){var l=o,d=l.lib,f=d.WordArray,p=l.enc;p.Base64={stringify:function(g){var m=g.words,v=g.sigBytes,y=this._map;g.clamp();for(var w=[],T=0;T<v;T+=3)for(var F=m[T>>>2]>>>24-T%4*8&255,k=m[T+1>>>2]>>>24-(T+1)%4*8&255,E=m[T+2>>>2]>>>24-(T+2)%4*8&255,D=F<<16|k<<8|E,B=0;B<4&&T+B*.75<v;B++)w.push(y.charAt(D>>>6*(3-B)&63));var S=y.charAt(64);if(S)for(;w.length%4;)w.push(S);return w.join("")},parse:function(g){var m=g.length,v=this._map,y=this._reverseMap;if(!y){y=this._reverseMap=[];for(var w=0;w<v.length;w++)y[v.charCodeAt(w)]=w}var T=v.charAt(64);if(T){var F=g.indexOf(T);F!==-1&&(m=F)}return h(g,m,y)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function h(g,m,v){for(var y=[],w=0,T=0;T<m;T++)if(T%4){var F=v[g.charCodeAt(T-1)]<<T%4*2,k=v[g.charCodeAt(T)]>>>6-T%4*2,E=F|k;y[w>>>2]|=E<<24-w%4*8,w++}return f.create(y,w)}})(),o.enc.Base64})})(Qu)),Qu.exports}var $u={exports:{}},Sb=$u.exports,Cm;function Bb(){return Cm||(Cm=1,(function(r,a){(function(o,l){r.exports=l(mt())})(Sb,function(o){return(function(){var l=o,d=l.lib,f=d.WordArray,p=l.enc;p.Base64url={stringify:function(g,m){m===void 0&&(m=!0);var v=g.words,y=g.sigBytes,w=m?this._safe_map:this._map;g.clamp();for(var T=[],F=0;F<y;F+=3)for(var k=v[F>>>2]>>>24-F%4*8&255,E=v[F+1>>>2]>>>24-(F+1)%4*8&255,D=v[F+2>>>2]>>>24-(F+2)%4*8&255,B=k<<16|E<<8|D,S=0;S<4&&F+S*.75<y;S++)T.push(w.charAt(B>>>6*(3-S)&63));var N=w.charAt(64);if(N)for(;T.length%4;)T.push(N);return T.join("")},parse:function(g,m){m===void 0&&(m=!0);var v=g.length,y=m?this._safe_map:this._map,w=this._reverseMap;if(!w){w=this._reverseMap=[];for(var T=0;T<y.length;T++)w[y.charCodeAt(T)]=T}var F=y.charAt(64);if(F){var k=g.indexOf(F);k!==-1&&(v=k)}return h(g,v,w)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function h(g,m,v){for(var y=[],w=0,T=0;T<m;T++)if(T%4){var F=v[g.charCodeAt(T-1)]<<T%4*2,k=v[g.charCodeAt(T)]>>>6-T%4*2,E=F|k;y[w>>>2]|=E<<24-w%4*8,w++}return f.create(y,w)}})(),o.enc.Base64url})})($u)),$u.exports}var Yu={exports:{}},Pb=Yu.exports,Em;function Jo(){return Em||(Em=1,(function(r,a){(function(o,l){r.exports=l(mt())})(Pb,function(o){return(function(l){var d=o,f=d.lib,p=f.WordArray,h=f.Hasher,g=d.algo,m=[];(function(){for(var k=0;k<64;k++)m[k]=l.abs(l.sin(k+1))*4294967296|0})();var v=g.MD5=h.extend({_doReset:function(){this._hash=new p.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(k,E){for(var D=0;D<16;D++){var B=E+D,S=k[B];k[B]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360}var N=this._hash.words,M=k[E+0],z=k[E+1],H=k[E+2],j=k[E+3],J=k[E+4],W=k[E+5],U=k[E+6],ne=k[E+7],Y=k[E+8],re=k[E+9],fe=k[E+10],ae=k[E+11],he=k[E+12],G=k[E+13],pe=k[E+14],Z=k[E+15],P=N[0],V=N[1],K=N[2],$=N[3];P=y(P,V,K,$,M,7,m[0]),$=y($,P,V,K,z,12,m[1]),K=y(K,$,P,V,H,17,m[2]),V=y(V,K,$,P,j,22,m[3]),P=y(P,V,K,$,J,7,m[4]),$=y($,P,V,K,W,12,m[5]),K=y(K,$,P,V,U,17,m[6]),V=y(V,K,$,P,ne,22,m[7]),P=y(P,V,K,$,Y,7,m[8]),$=y($,P,V,K,re,12,m[9]),K=y(K,$,P,V,fe,17,m[10]),V=y(V,K,$,P,ae,22,m[11]),P=y(P,V,K,$,he,7,m[12]),$=y($,P,V,K,G,12,m[13]),K=y(K,$,P,V,pe,17,m[14]),V=y(V,K,$,P,Z,22,m[15]),P=w(P,V,K,$,z,5,m[16]),$=w($,P,V,K,U,9,m[17]),K=w(K,$,P,V,ae,14,m[18]),V=w(V,K,$,P,M,20,m[19]),P=w(P,V,K,$,W,5,m[20]),$=w($,P,V,K,fe,9,m[21]),K=w(K,$,P,V,Z,14,m[22]),V=w(V,K,$,P,J,20,m[23]),P=w(P,V,K,$,re,5,m[24]),$=w($,P,V,K,pe,9,m[25]),K=w(K,$,P,V,j,14,m[26]),V=w(V,K,$,P,Y,20,m[27]),P=w(P,V,K,$,G,5,m[28]),$=w($,P,V,K,H,9,m[29]),K=w(K,$,P,V,ne,14,m[30]),V=w(V,K,$,P,he,20,m[31]),P=T(P,V,K,$,W,4,m[32]),$=T($,P,V,K,Y,11,m[33]),K=T(K,$,P,V,ae,16,m[34]),V=T(V,K,$,P,pe,23,m[35]),P=T(P,V,K,$,z,4,m[36]),$=T($,P,V,K,J,11,m[37]),K=T(K,$,P,V,ne,16,m[38]),V=T(V,K,$,P,fe,23,m[39]),P=T(P,V,K,$,G,4,m[40]),$=T($,P,V,K,M,11,m[41]),K=T(K,$,P,V,j,16,m[42]),V=T(V,K,$,P,U,23,m[43]),P=T(P,V,K,$,re,4,m[44]),$=T($,P,V,K,he,11,m[45]),K=T(K,$,P,V,Z,16,m[46]),V=T(V,K,$,P,H,23,m[47]),P=F(P,V,K,$,M,6,m[48]),$=F($,P,V,K,ne,10,m[49]),K=F(K,$,P,V,pe,15,m[50]),V=F(V,K,$,P,W,21,m[51]),P=F(P,V,K,$,he,6,m[52]),$=F($,P,V,K,j,10,m[53]),K=F(K,$,P,V,fe,15,m[54]),V=F(V,K,$,P,z,21,m[55]),P=F(P,V,K,$,Y,6,m[56]),$=F($,P,V,K,Z,10,m[57]),K=F(K,$,P,V,U,15,m[58]),V=F(V,K,$,P,G,21,m[59]),P=F(P,V,K,$,J,6,m[60]),$=F($,P,V,K,ae,10,m[61]),K=F(K,$,P,V,H,15,m[62]),V=F(V,K,$,P,re,21,m[63]),N[0]=N[0]+P|0,N[1]=N[1]+V|0,N[2]=N[2]+K|0,N[3]=N[3]+$|0},_doFinalize:function(){var k=this._data,E=k.words,D=this._nDataBytes*8,B=k.sigBytes*8;E[B>>>5]|=128<<24-B%32;var S=l.floor(D/4294967296),N=D;E[(B+64>>>9<<4)+15]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,E[(B+64>>>9<<4)+14]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,k.sigBytes=(E.length+1)*4,this._process();for(var M=this._hash,z=M.words,H=0;H<4;H++){var j=z[H];z[H]=(j<<8|j>>>24)&16711935|(j<<24|j>>>8)&4278255360}return M},clone:function(){var k=h.clone.call(this);return k._hash=this._hash.clone(),k}});function y(k,E,D,B,S,N,M){var z=k+(E&D|~E&B)+S+M;return(z<<N|z>>>32-N)+E}function w(k,E,D,B,S,N,M){var z=k+(E&B|D&~B)+S+M;return(z<<N|z>>>32-N)+E}function T(k,E,D,B,S,N,M){var z=k+(E^D^B)+S+M;return(z<<N|z>>>32-N)+E}function F(k,E,D,B,S,N,M){var z=k+(D^(E|~B))+S+M;return(z<<N|z>>>32-N)+E}d.MD5=h._createHelper(v),d.HmacMD5=h._createHmacHelper(v)})(Math),o.MD5})})(Yu)),Yu.exports}var Xu={exports:{}},Tb=Xu.exports,km;function bx(){return km||(km=1,(function(r,a){(function(o,l){r.exports=l(mt())})(Tb,function(o){return(function(){var l=o,d=l.lib,f=d.WordArray,p=d.Hasher,h=l.algo,g=[],m=h.SHA1=p.extend({_doReset:function(){this._hash=new f.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(v,y){for(var w=this._hash.words,T=w[0],F=w[1],k=w[2],E=w[3],D=w[4],B=0;B<80;B++){if(B<16)g[B]=v[y+B]|0;else{var S=g[B-3]^g[B-8]^g[B-14]^g[B-16];g[B]=S<<1|S>>>31}var N=(T<<5|T>>>27)+D+g[B];B<20?N+=(F&k|~F&E)+1518500249:B<40?N+=(F^k^E)+1859775393:B<60?N+=(F&k|F&E|k&E)-1894007588:N+=(F^k^E)-899497514,D=E,E=k,k=F<<30|F>>>2,F=T,T=N}w[0]=w[0]+T|0,w[1]=w[1]+F|0,w[2]=w[2]+k|0,w[3]=w[3]+E|0,w[4]=w[4]+D|0},_doFinalize:function(){var v=this._data,y=v.words,w=this._nDataBytes*8,T=v.sigBytes*8;return y[T>>>5]|=128<<24-T%32,y[(T+64>>>9<<4)+14]=Math.floor(w/4294967296),y[(T+64>>>9<<4)+15]=w,v.sigBytes=y.length*4,this._process(),this._hash},clone:function(){var v=p.clone.call(this);return v._hash=this._hash.clone(),v}});l.SHA1=p._createHelper(m),l.HmacSHA1=p._createHmacHelper(m)})(),o.SHA1})})(Xu)),Xu.exports}var Ju={exports:{}},Db=Ju.exports,Sm;function pl(){return Sm||(Sm=1,(function(r,a){(function(o,l){r.exports=l(mt())})(Db,function(o){return(function(l){var d=o,f=d.lib,p=f.WordArray,h=f.Hasher,g=d.algo,m=[],v=[];(function(){function T(D){for(var B=l.sqrt(D),S=2;S<=B;S++)if(!(D%S))return!1;return!0}function F(D){return(D-(D|0))*4294967296|0}for(var k=2,E=0;E<64;)T(k)&&(E<8&&(m[E]=F(l.pow(k,1/2))),v[E]=F(l.pow(k,1/3)),E++),k++})();var y=[],w=g.SHA256=h.extend({_doReset:function(){this._hash=new p.init(m.slice(0))},_doProcessBlock:function(T,F){for(var k=this._hash.words,E=k[0],D=k[1],B=k[2],S=k[3],N=k[4],M=k[5],z=k[6],H=k[7],j=0;j<64;j++){if(j<16)y[j]=T[F+j]|0;else{var J=y[j-15],W=(J<<25|J>>>7)^(J<<14|J>>>18)^J>>>3,U=y[j-2],ne=(U<<15|U>>>17)^(U<<13|U>>>19)^U>>>10;y[j]=W+y[j-7]+ne+y[j-16]}var Y=N&M^~N&z,re=E&D^E&B^D&B,fe=(E<<30|E>>>2)^(E<<19|E>>>13)^(E<<10|E>>>22),ae=(N<<26|N>>>6)^(N<<21|N>>>11)^(N<<7|N>>>25),he=H+ae+Y+v[j]+y[j],G=fe+re;H=z,z=M,M=N,N=S+he|0,S=B,B=D,D=E,E=he+G|0}k[0]=k[0]+E|0,k[1]=k[1]+D|0,k[2]=k[2]+B|0,k[3]=k[3]+S|0,k[4]=k[4]+N|0,k[5]=k[5]+M|0,k[6]=k[6]+z|0,k[7]=k[7]+H|0},_doFinalize:function(){var T=this._data,F=T.words,k=this._nDataBytes*8,E=T.sigBytes*8;return F[E>>>5]|=128<<24-E%32,F[(E+64>>>9<<4)+14]=l.floor(k/4294967296),F[(E+64>>>9<<4)+15]=k,T.sigBytes=F.length*4,this._process(),this._hash},clone:function(){var T=h.clone.call(this);return T._hash=this._hash.clone(),T}});d.SHA256=h._createHelper(w),d.HmacSHA256=h._createHmacHelper(w)})(Math),o.SHA256})})(Ju)),Ju.exports}var ec={exports:{}},Rb=ec.exports,Bm;function Fb(){return Bm||(Bm=1,(function(r,a){(function(o,l,d){r.exports=l(mt(),pl())})(Rb,function(o){return(function(){var l=o,d=l.lib,f=d.WordArray,p=l.algo,h=p.SHA256,g=p.SHA224=h.extend({_doReset:function(){this._hash=new f.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var m=h._doFinalize.call(this);return m.sigBytes-=4,m}});l.SHA224=h._createHelper(g),l.HmacSHA224=h._createHmacHelper(g)})(),o.SHA224})})(ec)),ec.exports}var tc={exports:{}},Nb=tc.exports,Pm;function Cx(){return Pm||(Pm=1,(function(r,a){(function(o,l,d){r.exports=l(mt(),td())})(Nb,function(o){return(function(){var l=o,d=l.lib,f=d.Hasher,p=l.x64,h=p.Word,g=p.WordArray,m=l.algo;function v(){return h.create.apply(h,arguments)}var y=[v(1116352408,3609767458),v(1899447441,602891725),v(3049323471,3964484399),v(3921009573,2173295548),v(961987163,4081628472),v(1508970993,3053834265),v(2453635748,2937671579),v(2870763221,3664609560),v(3624381080,2734883394),v(310598401,1164996542),v(607225278,1323610764),v(1426881987,3590304994),v(1925078388,4068182383),v(2162078206,991336113),v(2614888103,633803317),v(3248222580,3479774868),v(3835390401,2666613458),v(4022224774,944711139),v(264347078,2341262773),v(604807628,2007800933),v(770255983,1495990901),v(1249150122,1856431235),v(1555081692,3175218132),v(1996064986,2198950837),v(2554220882,3999719339),v(2821834349,766784016),v(2952996808,2566594879),v(3210313671,3203337956),v(3336571891,1034457026),v(3584528711,2466948901),v(113926993,3758326383),v(338241895,168717936),v(666307205,1188179964),v(773529912,1546045734),v(1294757372,1522805485),v(1396182291,2643833823),v(1695183700,2343527390),v(1986661051,1014477480),v(2177026350,1206759142),v(2456956037,344077627),v(2730485921,1290863460),v(2820302411,3158454273),v(3259730800,3505952657),v(3345764771,106217008),v(3516065817,3606008344),v(3600352804,1432725776),v(4094571909,1467031594),v(275423344,851169720),v(430227734,3100823752),v(506948616,1363258195),v(659060556,3750685593),v(883997877,3785050280),v(958139571,3318307427),v(1322822218,3812723403),v(1537002063,2003034995),v(1747873779,3602036899),v(1955562222,1575990012),v(2024104815,1125592928),v(2227730452,2716904306),v(2361852424,442776044),v(2428436474,593698344),v(2756734187,3733110249),v(3204031479,2999351573),v(3329325298,3815920427),v(3391569614,3928383900),v(3515267271,566280711),v(3940187606,3454069534),v(4118630271,4000239992),v(116418474,1914138554),v(174292421,2731055270),v(289380356,3203993006),v(460393269,320620315),v(685471733,587496836),v(852142971,1086792851),v(1017036298,365543100),v(1126000580,2618297676),v(1288033470,3409855158),v(1501505948,4234509866),v(1607167915,987167468),v(1816402316,1246189591)],w=[];(function(){for(var F=0;F<80;F++)w[F]=v()})();var T=m.SHA512=f.extend({_doReset:function(){this._hash=new g.init([new h.init(1779033703,4089235720),new h.init(3144134277,2227873595),new h.init(1013904242,4271175723),new h.init(2773480762,1595750129),new h.init(1359893119,2917565137),new h.init(2600822924,725511199),new h.init(528734635,4215389547),new h.init(1541459225,327033209)])},_doProcessBlock:function(F,k){for(var E=this._hash.words,D=E[0],B=E[1],S=E[2],N=E[3],M=E[4],z=E[5],H=E[6],j=E[7],J=D.high,W=D.low,U=B.high,ne=B.low,Y=S.high,re=S.low,fe=N.high,ae=N.low,he=M.high,G=M.low,pe=z.high,Z=z.low,P=H.high,V=H.low,K=j.high,$=j.low,ce=J,de=W,Se=U,Ae=ne,Ue=Y,Ye=re,bt=fe,ct=ae,Be=he,Ze=G,dt=pe,Mt=Z,at=P,gt=V,qe=K,tt=$,nt=0;nt<80;nt++){var He,Ct,Ce=w[nt];if(nt<16)Ct=Ce.high=F[k+nt*2]|0,He=Ce.low=F[k+nt*2+1]|0;else{var Et=w[nt-15],Dt=Et.high,Jt=Et.low,Ut=(Dt>>>1|Jt<<31)^(Dt>>>8|Jt<<24)^Dt>>>7,Tn=(Jt>>>1|Dt<<31)^(Jt>>>8|Dt<<24)^(Jt>>>7|Dt<<25),Kt=w[nt-2],Ft=Kt.high,Qt=Kt.low,qn=(Ft>>>19|Qt<<13)^(Ft<<3|Qt>>>29)^Ft>>>6,yn=(Qt>>>19|Ft<<13)^(Qt<<3|Ft>>>29)^(Qt>>>6|Ft<<26),me=w[nt-7],be=me.high,Re=me.low,ot=w[nt-16],te=ot.high,ge=ot.low;He=Tn+Re,Ct=Ut+be+(He>>>0<Tn>>>0?1:0),He=He+yn,Ct=Ct+qn+(He>>>0<yn>>>0?1:0),He=He+ge,Ct=Ct+te+(He>>>0<ge>>>0?1:0),Ce.high=Ct,Ce.low=He}var ye=Be&dt^~Be&at,Te=Ze&Mt^~Ze&gt,Qe=ce&Se^ce&Ue^Se&Ue,Fe=de&Ae^de&Ye^Ae&Ye,vt=(ce>>>28|de<<4)^(ce<<30|de>>>2)^(ce<<25|de>>>7),Rt=(de>>>28|ce<<4)^(de<<30|ce>>>2)^(de<<25|ce>>>7),zt=(Be>>>14|Ze<<18)^(Be>>>18|Ze<<14)^(Be<<23|Ze>>>9),Mn=(Ze>>>14|Be<<18)^(Ze>>>18|Be<<14)^(Ze<<23|Be>>>9),st=y[nt],Bt=st.high,Gn=st.low,yt=tt+Mn,Ht=qe+zt+(yt>>>0<tt>>>0?1:0),yt=yt+Te,Ht=Ht+ye+(yt>>>0<Te>>>0?1:0),yt=yt+Gn,Ht=Ht+Bt+(yt>>>0<Gn>>>0?1:0),yt=yt+He,Ht=Ht+Ct+(yt>>>0<He>>>0?1:0),$t=Rt+Fe,De=vt+Qe+($t>>>0<Rt>>>0?1:0);qe=at,tt=gt,at=dt,gt=Mt,dt=Be,Mt=Ze,Ze=ct+yt|0,Be=bt+Ht+(Ze>>>0<ct>>>0?1:0)|0,bt=Ue,ct=Ye,Ue=Se,Ye=Ae,Se=ce,Ae=de,de=yt+$t|0,ce=Ht+De+(de>>>0<yt>>>0?1:0)|0}W=D.low=W+de,D.high=J+ce+(W>>>0<de>>>0?1:0),ne=B.low=ne+Ae,B.high=U+Se+(ne>>>0<Ae>>>0?1:0),re=S.low=re+Ye,S.high=Y+Ue+(re>>>0<Ye>>>0?1:0),ae=N.low=ae+ct,N.high=fe+bt+(ae>>>0<ct>>>0?1:0),G=M.low=G+Ze,M.high=he+Be+(G>>>0<Ze>>>0?1:0),Z=z.low=Z+Mt,z.high=pe+dt+(Z>>>0<Mt>>>0?1:0),V=H.low=V+gt,H.high=P+at+(V>>>0<gt>>>0?1:0),$=j.low=$+tt,j.high=K+qe+($>>>0<tt>>>0?1:0)},_doFinalize:function(){var F=this._data,k=F.words,E=this._nDataBytes*8,D=F.sigBytes*8;k[D>>>5]|=128<<24-D%32,k[(D+128>>>10<<5)+30]=Math.floor(E/4294967296),k[(D+128>>>10<<5)+31]=E,F.sigBytes=k.length*4,this._process();var B=this._hash.toX32();return B},clone:function(){var F=f.clone.call(this);return F._hash=this._hash.clone(),F},blockSize:1024/32});l.SHA512=f._createHelper(T),l.HmacSHA512=f._createHmacHelper(T)})(),o.SHA512})})(tc)),tc.exports}var nc={exports:{}},Lb=nc.exports,Tm;function Mb(){return Tm||(Tm=1,(function(r,a){(function(o,l,d){r.exports=l(mt(),td(),Cx())})(Lb,function(o){return(function(){var l=o,d=l.x64,f=d.Word,p=d.WordArray,h=l.algo,g=h.SHA512,m=h.SHA384=g.extend({_doReset:function(){this._hash=new p.init([new f.init(3418070365,3238371032),new f.init(1654270250,914150663),new f.init(2438529370,812702999),new f.init(355462360,4144912697),new f.init(1731405415,4290775857),new f.init(2394180231,1750603025),new f.init(3675008525,1694076839),new f.init(1203062813,3204075428)])},_doFinalize:function(){var v=g._doFinalize.call(this);return v.sigBytes-=16,v}});l.SHA384=g._createHelper(m),l.HmacSHA384=g._createHmacHelper(m)})(),o.SHA384})})(nc)),nc.exports}var rc={exports:{}},Ib=rc.exports,Dm;function Ob(){return Dm||(Dm=1,(function(r,a){(function(o,l,d){r.exports=l(mt(),td())})(Ib,function(o){return(function(l){var d=o,f=d.lib,p=f.WordArray,h=f.Hasher,g=d.x64,m=g.Word,v=d.algo,y=[],w=[],T=[];(function(){for(var E=1,D=0,B=0;B<24;B++){y[E+5*D]=(B+1)*(B+2)/2%64;var S=D%5,N=(2*E+3*D)%5;E=S,D=N}for(var E=0;E<5;E++)for(var D=0;D<5;D++)w[E+5*D]=D+(2*E+3*D)%5*5;for(var M=1,z=0;z<24;z++){for(var H=0,j=0,J=0;J<7;J++){if(M&1){var W=(1<<J)-1;W<32?j^=1<<W:H^=1<<W-32}M&128?M=M<<1^113:M<<=1}T[z]=m.create(H,j)}})();var F=[];(function(){for(var E=0;E<25;E++)F[E]=m.create()})();var k=v.SHA3=h.extend({cfg:h.cfg.extend({outputLength:512}),_doReset:function(){for(var E=this._state=[],D=0;D<25;D++)E[D]=new m.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(E,D){for(var B=this._state,S=this.blockSize/2,N=0;N<S;N++){var M=E[D+2*N],z=E[D+2*N+1];M=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360,z=(z<<8|z>>>24)&16711935|(z<<24|z>>>8)&4278255360;var H=B[N];H.high^=z,H.low^=M}for(var j=0;j<24;j++){for(var J=0;J<5;J++){for(var W=0,U=0,ne=0;ne<5;ne++){var H=B[J+5*ne];W^=H.high,U^=H.low}var Y=F[J];Y.high=W,Y.low=U}for(var J=0;J<5;J++)for(var re=F[(J+4)%5],fe=F[(J+1)%5],ae=fe.high,he=fe.low,W=re.high^(ae<<1|he>>>31),U=re.low^(he<<1|ae>>>31),ne=0;ne<5;ne++){var H=B[J+5*ne];H.high^=W,H.low^=U}for(var G=1;G<25;G++){var W,U,H=B[G],pe=H.high,Z=H.low,P=y[G];P<32?(W=pe<<P|Z>>>32-P,U=Z<<P|pe>>>32-P):(W=Z<<P-32|pe>>>64-P,U=pe<<P-32|Z>>>64-P);var V=F[w[G]];V.high=W,V.low=U}var K=F[0],$=B[0];K.high=$.high,K.low=$.low;for(var J=0;J<5;J++)for(var ne=0;ne<5;ne++){var G=J+5*ne,H=B[G],ce=F[G],de=F[(J+1)%5+5*ne],Se=F[(J+2)%5+5*ne];H.high=ce.high^~de.high&Se.high,H.low=ce.low^~de.low&Se.low}var H=B[0],Ae=T[j];H.high^=Ae.high,H.low^=Ae.low}},_doFinalize:function(){var E=this._data,D=E.words;this._nDataBytes*8;var B=E.sigBytes*8,S=this.blockSize*32;D[B>>>5]|=1<<24-B%32,D[(l.ceil((B+1)/S)*S>>>5)-1]|=128,E.sigBytes=D.length*4,this._process();for(var N=this._state,M=this.cfg.outputLength/8,z=M/8,H=[],j=0;j<z;j++){var J=N[j],W=J.high,U=J.low;W=(W<<8|W>>>24)&16711935|(W<<24|W>>>8)&4278255360,U=(U<<8|U>>>24)&16711935|(U<<24|U>>>8)&4278255360,H.push(U),H.push(W)}return new p.init(H,M)},clone:function(){for(var E=h.clone.call(this),D=E._state=this._state.slice(0),B=0;B<25;B++)D[B]=D[B].clone();return E}});d.SHA3=h._createHelper(k),d.HmacSHA3=h._createHmacHelper(k)})(Math),o.SHA3})})(rc)),rc.exports}var ic={exports:{}},jb=ic.exports,Rm;function zb(){return Rm||(Rm=1,(function(r,a){(function(o,l){r.exports=l(mt())})(jb,function(o){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return(function(l){var d=o,f=d.lib,p=f.WordArray,h=f.Hasher,g=d.algo,m=p.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),v=p.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),y=p.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),w=p.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),T=p.create([0,1518500249,1859775393,2400959708,2840853838]),F=p.create([1352829926,1548603684,1836072691,2053994217,0]),k=g.RIPEMD160=h.extend({_doReset:function(){this._hash=p.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(z,H){for(var j=0;j<16;j++){var J=H+j,W=z[J];z[J]=(W<<8|W>>>24)&16711935|(W<<24|W>>>8)&4278255360}var U=this._hash.words,ne=T.words,Y=F.words,re=m.words,fe=v.words,ae=y.words,he=w.words,G,pe,Z,P,V,K,$,ce,de,Se;K=G=U[0],$=pe=U[1],ce=Z=U[2],de=P=U[3],Se=V=U[4];for(var Ae,j=0;j<80;j+=1)Ae=G+z[H+re[j]]|0,j<16?Ae+=E(pe,Z,P)+ne[0]:j<32?Ae+=D(pe,Z,P)+ne[1]:j<48?Ae+=B(pe,Z,P)+ne[2]:j<64?Ae+=S(pe,Z,P)+ne[3]:Ae+=N(pe,Z,P)+ne[4],Ae=Ae|0,Ae=M(Ae,ae[j]),Ae=Ae+V|0,G=V,V=P,P=M(Z,10),Z=pe,pe=Ae,Ae=K+z[H+fe[j]]|0,j<16?Ae+=N($,ce,de)+Y[0]:j<32?Ae+=S($,ce,de)+Y[1]:j<48?Ae+=B($,ce,de)+Y[2]:j<64?Ae+=D($,ce,de)+Y[3]:Ae+=E($,ce,de)+Y[4],Ae=Ae|0,Ae=M(Ae,he[j]),Ae=Ae+Se|0,K=Se,Se=de,de=M(ce,10),ce=$,$=Ae;Ae=U[1]+Z+de|0,U[1]=U[2]+P+Se|0,U[2]=U[3]+V+K|0,U[3]=U[4]+G+$|0,U[4]=U[0]+pe+ce|0,U[0]=Ae},_doFinalize:function(){var z=this._data,H=z.words,j=this._nDataBytes*8,J=z.sigBytes*8;H[J>>>5]|=128<<24-J%32,H[(J+64>>>9<<4)+14]=(j<<8|j>>>24)&16711935|(j<<24|j>>>8)&4278255360,z.sigBytes=(H.length+1)*4,this._process();for(var W=this._hash,U=W.words,ne=0;ne<5;ne++){var Y=U[ne];U[ne]=(Y<<8|Y>>>24)&16711935|(Y<<24|Y>>>8)&4278255360}return W},clone:function(){var z=h.clone.call(this);return z._hash=this._hash.clone(),z}});function E(z,H,j){return z^H^j}function D(z,H,j){return z&H|~z&j}function B(z,H,j){return(z|~H)^j}function S(z,H,j){return z&j|H&~j}function N(z,H,j){return z^(H|~j)}function M(z,H){return z<<H|z>>>32-H}d.RIPEMD160=h._createHelper(k),d.HmacRIPEMD160=h._createHmacHelper(k)})(),o.RIPEMD160})})(ic)),ic.exports}var oc={exports:{}},Hb=oc.exports,Fm;function nd(){return Fm||(Fm=1,(function(r,a){(function(o,l){r.exports=l(mt())})(Hb,function(o){(function(){var l=o,d=l.lib,f=d.Base,p=l.enc,h=p.Utf8,g=l.algo;g.HMAC=f.extend({init:function(m,v){m=this._hasher=new m.init,typeof v=="string"&&(v=h.parse(v));var y=m.blockSize,w=y*4;v.sigBytes>w&&(v=m.finalize(v)),v.clamp();for(var T=this._oKey=v.clone(),F=this._iKey=v.clone(),k=T.words,E=F.words,D=0;D<y;D++)k[D]^=1549556828,E[D]^=909522486;T.sigBytes=F.sigBytes=w,this.reset()},reset:function(){var m=this._hasher;m.reset(),m.update(this._iKey)},update:function(m){return this._hasher.update(m),this},finalize:function(m){var v=this._hasher,y=v.finalize(m);v.reset();var w=v.finalize(this._oKey.clone().concat(y));return w}})})()})})(oc)),oc.exports}var sc={exports:{}},Vb=sc.exports,Nm;function Ub(){return Nm||(Nm=1,(function(r,a){(function(o,l,d){r.exports=l(mt(),pl(),nd())})(Vb,function(o){return(function(){var l=o,d=l.lib,f=d.Base,p=d.WordArray,h=l.algo,g=h.SHA256,m=h.HMAC,v=h.PBKDF2=f.extend({cfg:f.extend({keySize:128/32,hasher:g,iterations:25e4}),init:function(y){this.cfg=this.cfg.extend(y)},compute:function(y,w){for(var T=this.cfg,F=m.create(T.hasher,y),k=p.create(),E=p.create([1]),D=k.words,B=E.words,S=T.keySize,N=T.iterations;D.length<S;){var M=F.update(w).finalize(E);F.reset();for(var z=M.words,H=z.length,j=M,J=1;J<N;J++){j=F.finalize(j),F.reset();for(var W=j.words,U=0;U<H;U++)z[U]^=W[U]}k.concat(M),B[0]++}return k.sigBytes=S*4,k}});l.PBKDF2=function(y,w,T){return v.create(T).compute(y,w)}})(),o.PBKDF2})})(sc)),sc.exports}var ac={exports:{}},Zb=ac.exports,Lm;function fo(){return Lm||(Lm=1,(function(r,a){(function(o,l,d){r.exports=l(mt(),bx(),nd())})(Zb,function(o){return(function(){var l=o,d=l.lib,f=d.Base,p=d.WordArray,h=l.algo,g=h.MD5,m=h.EvpKDF=f.extend({cfg:f.extend({keySize:128/32,hasher:g,iterations:1}),init:function(v){this.cfg=this.cfg.extend(v)},compute:function(v,y){for(var w,T=this.cfg,F=T.hasher.create(),k=p.create(),E=k.words,D=T.keySize,B=T.iterations;E.length<D;){w&&F.update(w),w=F.update(v).finalize(y),F.reset();for(var S=1;S<B;S++)w=F.finalize(w),F.reset();k.concat(w)}return k.sigBytes=D*4,k}});l.EvpKDF=function(v,y,w){return m.create(w).compute(v,y)}})(),o.EvpKDF})})(ac)),ac.exports}var lc={exports:{}},Wb=lc.exports,Mm;function mn(){return Mm||(Mm=1,(function(r,a){(function(o,l,d){r.exports=l(mt(),fo())})(Wb,function(o){o.lib.Cipher||(function(l){var d=o,f=d.lib,p=f.Base,h=f.WordArray,g=f.BufferedBlockAlgorithm,m=d.enc;m.Utf8;var v=m.Base64,y=d.algo,w=y.EvpKDF,T=f.Cipher=g.extend({cfg:p.extend(),createEncryptor:function(W,U){return this.create(this._ENC_XFORM_MODE,W,U)},createDecryptor:function(W,U){return this.create(this._DEC_XFORM_MODE,W,U)},init:function(W,U,ne){this.cfg=this.cfg.extend(ne),this._xformMode=W,this._key=U,this.reset()},reset:function(){g.reset.call(this),this._doReset()},process:function(W){return this._append(W),this._process()},finalize:function(W){W&&this._append(W);var U=this._doFinalize();return U},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:(function(){function W(U){return typeof U=="string"?J:z}return function(U){return{encrypt:function(ne,Y,re){return W(Y).encrypt(U,ne,Y,re)},decrypt:function(ne,Y,re){return W(Y).decrypt(U,ne,Y,re)}}}})()});f.StreamCipher=T.extend({_doFinalize:function(){var W=this._process(!0);return W},blockSize:1});var F=d.mode={},k=f.BlockCipherMode=p.extend({createEncryptor:function(W,U){return this.Encryptor.create(W,U)},createDecryptor:function(W,U){return this.Decryptor.create(W,U)},init:function(W,U){this._cipher=W,this._iv=U}}),E=F.CBC=(function(){var W=k.extend();W.Encryptor=W.extend({processBlock:function(ne,Y){var re=this._cipher,fe=re.blockSize;U.call(this,ne,Y,fe),re.encryptBlock(ne,Y),this._prevBlock=ne.slice(Y,Y+fe)}}),W.Decryptor=W.extend({processBlock:function(ne,Y){var re=this._cipher,fe=re.blockSize,ae=ne.slice(Y,Y+fe);re.decryptBlock(ne,Y),U.call(this,ne,Y,fe),this._prevBlock=ae}});function U(ne,Y,re){var fe,ae=this._iv;ae?(fe=ae,this._iv=l):fe=this._prevBlock;for(var he=0;he<re;he++)ne[Y+he]^=fe[he]}return W})(),D=d.pad={},B=D.Pkcs7={pad:function(W,U){for(var ne=U*4,Y=ne-W.sigBytes%ne,re=Y<<24|Y<<16|Y<<8|Y,fe=[],ae=0;ae<Y;ae+=4)fe.push(re);var he=h.create(fe,Y);W.concat(he)},unpad:function(W){var U=W.words[W.sigBytes-1>>>2]&255;W.sigBytes-=U}};f.BlockCipher=T.extend({cfg:T.cfg.extend({mode:E,padding:B}),reset:function(){var W;T.reset.call(this);var U=this.cfg,ne=U.iv,Y=U.mode;this._xformMode==this._ENC_XFORM_MODE?W=Y.createEncryptor:(W=Y.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==W?this._mode.init(this,ne&&ne.words):(this._mode=W.call(Y,this,ne&&ne.words),this._mode.__creator=W)},_doProcessBlock:function(W,U){this._mode.processBlock(W,U)},_doFinalize:function(){var W,U=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(U.pad(this._data,this.blockSize),W=this._process(!0)):(W=this._process(!0),U.unpad(W)),W},blockSize:128/32});var S=f.CipherParams=p.extend({init:function(W){this.mixIn(W)},toString:function(W){return(W||this.formatter).stringify(this)}}),N=d.format={},M=N.OpenSSL={stringify:function(W){var U,ne=W.ciphertext,Y=W.salt;return Y?U=h.create([1398893684,1701076831]).concat(Y).concat(ne):U=ne,U.toString(v)},parse:function(W){var U,ne=v.parse(W),Y=ne.words;return Y[0]==1398893684&&Y[1]==1701076831&&(U=h.create(Y.slice(2,4)),Y.splice(0,4),ne.sigBytes-=16),S.create({ciphertext:ne,salt:U})}},z=f.SerializableCipher=p.extend({cfg:p.extend({format:M}),encrypt:function(W,U,ne,Y){Y=this.cfg.extend(Y);var re=W.createEncryptor(ne,Y),fe=re.finalize(U),ae=re.cfg;return S.create({ciphertext:fe,key:ne,iv:ae.iv,algorithm:W,mode:ae.mode,padding:ae.padding,blockSize:W.blockSize,formatter:Y.format})},decrypt:function(W,U,ne,Y){Y=this.cfg.extend(Y),U=this._parse(U,Y.format);var re=W.createDecryptor(ne,Y).finalize(U.ciphertext);return re},_parse:function(W,U){return typeof W=="string"?U.parse(W,this):W}}),H=d.kdf={},j=H.OpenSSL={execute:function(W,U,ne,Y,re){if(Y||(Y=h.random(64/8)),re)var fe=w.create({keySize:U+ne,hasher:re}).compute(W,Y);else var fe=w.create({keySize:U+ne}).compute(W,Y);var ae=h.create(fe.words.slice(U),ne*4);return fe.sigBytes=U*4,S.create({key:fe,iv:ae,salt:Y})}},J=f.PasswordBasedCipher=z.extend({cfg:z.cfg.extend({kdf:j}),encrypt:function(W,U,ne,Y){Y=this.cfg.extend(Y);var re=Y.kdf.execute(ne,W.keySize,W.ivSize,Y.salt,Y.hasher);Y.iv=re.iv;var fe=z.encrypt.call(this,W,U,re.key,Y);return fe.mixIn(re),fe},decrypt:function(W,U,ne,Y){Y=this.cfg.extend(Y),U=this._parse(U,Y.format);var re=Y.kdf.execute(ne,W.keySize,W.ivSize,U.salt,Y.hasher);Y.iv=re.iv;var fe=z.decrypt.call(this,W,U,re.key,Y);return fe}})})()})})(lc)),lc.exports}var uc={exports:{}},qb=uc.exports,Im;function Gb(){return Im||(Im=1,(function(r,a){(function(o,l,d){r.exports=l(mt(),mn())})(qb,function(o){return o.mode.CFB=(function(){var l=o.lib.BlockCipherMode.extend();l.Encryptor=l.extend({processBlock:function(f,p){var h=this._cipher,g=h.blockSize;d.call(this,f,p,g,h),this._prevBlock=f.slice(p,p+g)}}),l.Decryptor=l.extend({processBlock:function(f,p){var h=this._cipher,g=h.blockSize,m=f.slice(p,p+g);d.call(this,f,p,g,h),this._prevBlock=m}});function d(f,p,h,g){var m,v=this._iv;v?(m=v.slice(0),this._iv=void 0):m=this._prevBlock,g.encryptBlock(m,0);for(var y=0;y<h;y++)f[p+y]^=m[y]}return l})(),o.mode.CFB})})(uc)),uc.exports}var cc={exports:{}},Kb=cc.exports,Om;function Qb(){return Om||(Om=1,(function(r,a){(function(o,l,d){r.exports=l(mt(),mn())})(Kb,function(o){return o.mode.CTR=(function(){var l=o.lib.BlockCipherMode.extend(),d=l.Encryptor=l.extend({processBlock:function(f,p){var h=this._cipher,g=h.blockSize,m=this._iv,v=this._counter;m&&(v=this._counter=m.slice(0),this._iv=void 0);var y=v.slice(0);h.encryptBlock(y,0),v[g-1]=v[g-1]+1|0;for(var w=0;w<g;w++)f[p+w]^=y[w]}});return l.Decryptor=d,l})(),o.mode.CTR})})(cc)),cc.exports}var dc={exports:{}},$b=dc.exports,jm;function Yb(){return jm||(jm=1,(function(r,a){(function(o,l,d){r.exports=l(mt(),mn())})($b,function(o){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return o.mode.CTRGladman=(function(){var l=o.lib.BlockCipherMode.extend();function d(h){if((h>>24&255)===255){var g=h>>16&255,m=h>>8&255,v=h&255;g===255?(g=0,m===255?(m=0,v===255?v=0:++v):++m):++g,h=0,h+=g<<16,h+=m<<8,h+=v}else h+=1<<24;return h}function f(h){return(h[0]=d(h[0]))===0&&(h[1]=d(h[1])),h}var p=l.Encryptor=l.extend({processBlock:function(h,g){var m=this._cipher,v=m.blockSize,y=this._iv,w=this._counter;y&&(w=this._counter=y.slice(0),this._iv=void 0),f(w);var T=w.slice(0);m.encryptBlock(T,0);for(var F=0;F<v;F++)h[g+F]^=T[F]}});return l.Decryptor=p,l})(),o.mode.CTRGladman})})(dc)),dc.exports}var fc={exports:{}},Xb=fc.exports,zm;function Jb(){return zm||(zm=1,(function(r,a){(function(o,l,d){r.exports=l(mt(),mn())})(Xb,function(o){return o.mode.OFB=(function(){var l=o.lib.BlockCipherMode.extend(),d=l.Encryptor=l.extend({processBlock:function(f,p){var h=this._cipher,g=h.blockSize,m=this._iv,v=this._keystream;m&&(v=this._keystream=m.slice(0),this._iv=void 0),h.encryptBlock(v,0);for(var y=0;y<g;y++)f[p+y]^=v[y]}});return l.Decryptor=d,l})(),o.mode.OFB})})(fc)),fc.exports}var hc={exports:{}},eC=hc.exports,Hm;function tC(){return Hm||(Hm=1,(function(r,a){(function(o,l,d){r.exports=l(mt(),mn())})(eC,function(o){return o.mode.ECB=(function(){var l=o.lib.BlockCipherMode.extend();return l.Encryptor=l.extend({processBlock:function(d,f){this._cipher.encryptBlock(d,f)}}),l.Decryptor=l.extend({processBlock:function(d,f){this._cipher.decryptBlock(d,f)}}),l})(),o.mode.ECB})})(hc)),hc.exports}var pc={exports:{}},nC=pc.exports,Vm;function rC(){return Vm||(Vm=1,(function(r,a){(function(o,l,d){r.exports=l(mt(),mn())})(nC,function(o){return o.pad.AnsiX923={pad:function(l,d){var f=l.sigBytes,p=d*4,h=p-f%p,g=f+h-1;l.clamp(),l.words[g>>>2]|=h<<24-g%4*8,l.sigBytes+=h},unpad:function(l){var d=l.words[l.sigBytes-1>>>2]&255;l.sigBytes-=d}},o.pad.Ansix923})})(pc)),pc.exports}var mc={exports:{}},iC=mc.exports,Um;function oC(){return Um||(Um=1,(function(r,a){(function(o,l,d){r.exports=l(mt(),mn())})(iC,function(o){return o.pad.Iso10126={pad:function(l,d){var f=d*4,p=f-l.sigBytes%f;l.concat(o.lib.WordArray.random(p-1)).concat(o.lib.WordArray.create([p<<24],1))},unpad:function(l){var d=l.words[l.sigBytes-1>>>2]&255;l.sigBytes-=d}},o.pad.Iso10126})})(mc)),mc.exports}var gc={exports:{}},sC=gc.exports,Zm;function aC(){return Zm||(Zm=1,(function(r,a){(function(o,l,d){r.exports=l(mt(),mn())})(sC,function(o){return o.pad.Iso97971={pad:function(l,d){l.concat(o.lib.WordArray.create([2147483648],1)),o.pad.ZeroPadding.pad(l,d)},unpad:function(l){o.pad.ZeroPadding.unpad(l),l.sigBytes--}},o.pad.Iso97971})})(gc)),gc.exports}var Ac={exports:{}},lC=Ac.exports,Wm;function uC(){return Wm||(Wm=1,(function(r,a){(function(o,l,d){r.exports=l(mt(),mn())})(lC,function(o){return o.pad.ZeroPadding={pad:function(l,d){var f=d*4;l.clamp(),l.sigBytes+=f-(l.sigBytes%f||f)},unpad:function(l){for(var d=l.words,f=l.sigBytes-1,f=l.sigBytes-1;f>=0;f--)if(d[f>>>2]>>>24-f%4*8&255){l.sigBytes=f+1;break}}},o.pad.ZeroPadding})})(Ac)),Ac.exports}var xc={exports:{}},cC=xc.exports,qm;function dC(){return qm||(qm=1,(function(r,a){(function(o,l,d){r.exports=l(mt(),mn())})(cC,function(o){return o.pad.NoPadding={pad:function(){},unpad:function(){}},o.pad.NoPadding})})(xc)),xc.exports}var vc={exports:{}},fC=vc.exports,Gm;function hC(){return Gm||(Gm=1,(function(r,a){(function(o,l,d){r.exports=l(mt(),mn())})(fC,function(o){return(function(l){var d=o,f=d.lib,p=f.CipherParams,h=d.enc,g=h.Hex,m=d.format;m.Hex={stringify:function(v){return v.ciphertext.toString(g)},parse:function(v){var y=g.parse(v);return p.create({ciphertext:y})}}})(),o.format.Hex})})(vc)),vc.exports}var yc={exports:{}},pC=yc.exports,Km;function mC(){return Km||(Km=1,(function(r,a){(function(o,l,d){r.exports=l(mt(),Xo(),Jo(),fo(),mn())})(pC,function(o){return(function(){var l=o,d=l.lib,f=d.BlockCipher,p=l.algo,h=[],g=[],m=[],v=[],y=[],w=[],T=[],F=[],k=[],E=[];(function(){for(var S=[],N=0;N<256;N++)N<128?S[N]=N<<1:S[N]=N<<1^283;for(var M=0,z=0,N=0;N<256;N++){var H=z^z<<1^z<<2^z<<3^z<<4;H=H>>>8^H&255^99,h[M]=H,g[H]=M;var j=S[M],J=S[j],W=S[J],U=S[H]*257^H*16843008;m[M]=U<<24|U>>>8,v[M]=U<<16|U>>>16,y[M]=U<<8|U>>>24,w[M]=U;var U=W*16843009^J*65537^j*257^M*16843008;T[H]=U<<24|U>>>8,F[H]=U<<16|U>>>16,k[H]=U<<8|U>>>24,E[H]=U,M?(M=j^S[S[S[W^j]]],z^=S[S[z]]):M=z=1}})();var D=[0,1,2,4,8,16,32,64,128,27,54],B=p.AES=f.extend({_doReset:function(){var S;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var N=this._keyPriorReset=this._key,M=N.words,z=N.sigBytes/4,H=this._nRounds=z+6,j=(H+1)*4,J=this._keySchedule=[],W=0;W<j;W++)W<z?J[W]=M[W]:(S=J[W-1],W%z?z>6&&W%z==4&&(S=h[S>>>24]<<24|h[S>>>16&255]<<16|h[S>>>8&255]<<8|h[S&255]):(S=S<<8|S>>>24,S=h[S>>>24]<<24|h[S>>>16&255]<<16|h[S>>>8&255]<<8|h[S&255],S^=D[W/z|0]<<24),J[W]=J[W-z]^S);for(var U=this._invKeySchedule=[],ne=0;ne<j;ne++){var W=j-ne;if(ne%4)var S=J[W];else var S=J[W-4];ne<4||W<=4?U[ne]=S:U[ne]=T[h[S>>>24]]^F[h[S>>>16&255]]^k[h[S>>>8&255]]^E[h[S&255]]}}},encryptBlock:function(S,N){this._doCryptBlock(S,N,this._keySchedule,m,v,y,w,h)},decryptBlock:function(S,N){var M=S[N+1];S[N+1]=S[N+3],S[N+3]=M,this._doCryptBlock(S,N,this._invKeySchedule,T,F,k,E,g);var M=S[N+1];S[N+1]=S[N+3],S[N+3]=M},_doCryptBlock:function(S,N,M,z,H,j,J,W){for(var U=this._nRounds,ne=S[N]^M[0],Y=S[N+1]^M[1],re=S[N+2]^M[2],fe=S[N+3]^M[3],ae=4,he=1;he<U;he++){var G=z[ne>>>24]^H[Y>>>16&255]^j[re>>>8&255]^J[fe&255]^M[ae++],pe=z[Y>>>24]^H[re>>>16&255]^j[fe>>>8&255]^J[ne&255]^M[ae++],Z=z[re>>>24]^H[fe>>>16&255]^j[ne>>>8&255]^J[Y&255]^M[ae++],P=z[fe>>>24]^H[ne>>>16&255]^j[Y>>>8&255]^J[re&255]^M[ae++];ne=G,Y=pe,re=Z,fe=P}var G=(W[ne>>>24]<<24|W[Y>>>16&255]<<16|W[re>>>8&255]<<8|W[fe&255])^M[ae++],pe=(W[Y>>>24]<<24|W[re>>>16&255]<<16|W[fe>>>8&255]<<8|W[ne&255])^M[ae++],Z=(W[re>>>24]<<24|W[fe>>>16&255]<<16|W[ne>>>8&255]<<8|W[Y&255])^M[ae++],P=(W[fe>>>24]<<24|W[ne>>>16&255]<<16|W[Y>>>8&255]<<8|W[re&255])^M[ae++];S[N]=G,S[N+1]=pe,S[N+2]=Z,S[N+3]=P},keySize:256/32});l.AES=f._createHelper(B)})(),o.AES})})(yc)),yc.exports}var _c={exports:{}},gC=_c.exports,Qm;function AC(){return Qm||(Qm=1,(function(r,a){(function(o,l,d){r.exports=l(mt(),Xo(),Jo(),fo(),mn())})(gC,function(o){return(function(){var l=o,d=l.lib,f=d.WordArray,p=d.BlockCipher,h=l.algo,g=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],m=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],v=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],y=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],w=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],T=h.DES=p.extend({_doReset:function(){for(var D=this._key,B=D.words,S=[],N=0;N<56;N++){var M=g[N]-1;S[N]=B[M>>>5]>>>31-M%32&1}for(var z=this._subKeys=[],H=0;H<16;H++){for(var j=z[H]=[],J=v[H],N=0;N<24;N++)j[N/6|0]|=S[(m[N]-1+J)%28]<<31-N%6,j[4+(N/6|0)]|=S[28+(m[N+24]-1+J)%28]<<31-N%6;j[0]=j[0]<<1|j[0]>>>31;for(var N=1;N<7;N++)j[N]=j[N]>>>(N-1)*4+3;j[7]=j[7]<<5|j[7]>>>27}for(var W=this._invSubKeys=[],N=0;N<16;N++)W[N]=z[15-N]},encryptBlock:function(D,B){this._doCryptBlock(D,B,this._subKeys)},decryptBlock:function(D,B){this._doCryptBlock(D,B,this._invSubKeys)},_doCryptBlock:function(D,B,S){this._lBlock=D[B],this._rBlock=D[B+1],F.call(this,4,252645135),F.call(this,16,65535),k.call(this,2,858993459),k.call(this,8,16711935),F.call(this,1,1431655765);for(var N=0;N<16;N++){for(var M=S[N],z=this._lBlock,H=this._rBlock,j=0,J=0;J<8;J++)j|=y[J][((H^M[J])&w[J])>>>0];this._lBlock=H,this._rBlock=z^j}var W=this._lBlock;this._lBlock=this._rBlock,this._rBlock=W,F.call(this,1,1431655765),k.call(this,8,16711935),k.call(this,2,858993459),F.call(this,16,65535),F.call(this,4,252645135),D[B]=this._lBlock,D[B+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function F(D,B){var S=(this._lBlock>>>D^this._rBlock)&B;this._rBlock^=S,this._lBlock^=S<<D}function k(D,B){var S=(this._rBlock>>>D^this._lBlock)&B;this._lBlock^=S,this._rBlock^=S<<D}l.DES=p._createHelper(T);var E=h.TripleDES=p.extend({_doReset:function(){var D=this._key,B=D.words;if(B.length!==2&&B.length!==4&&B.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var S=B.slice(0,2),N=B.length<4?B.slice(0,2):B.slice(2,4),M=B.length<6?B.slice(0,2):B.slice(4,6);this._des1=T.createEncryptor(f.create(S)),this._des2=T.createEncryptor(f.create(N)),this._des3=T.createEncryptor(f.create(M))},encryptBlock:function(D,B){this._des1.encryptBlock(D,B),this._des2.decryptBlock(D,B),this._des3.encryptBlock(D,B)},decryptBlock:function(D,B){this._des3.decryptBlock(D,B),this._des2.encryptBlock(D,B),this._des1.decryptBlock(D,B)},keySize:192/32,ivSize:64/32,blockSize:64/32});l.TripleDES=p._createHelper(E)})(),o.TripleDES})})(_c)),_c.exports}var wc={exports:{}},xC=wc.exports,$m;function vC(){return $m||($m=1,(function(r,a){(function(o,l,d){r.exports=l(mt(),Xo(),Jo(),fo(),mn())})(xC,function(o){return(function(){var l=o,d=l.lib,f=d.StreamCipher,p=l.algo,h=p.RC4=f.extend({_doReset:function(){for(var v=this._key,y=v.words,w=v.sigBytes,T=this._S=[],F=0;F<256;F++)T[F]=F;for(var F=0,k=0;F<256;F++){var E=F%w,D=y[E>>>2]>>>24-E%4*8&255;k=(k+T[F]+D)%256;var B=T[F];T[F]=T[k],T[k]=B}this._i=this._j=0},_doProcessBlock:function(v,y){v[y]^=g.call(this)},keySize:256/32,ivSize:0});function g(){for(var v=this._S,y=this._i,w=this._j,T=0,F=0;F<4;F++){y=(y+1)%256,w=(w+v[y])%256;var k=v[y];v[y]=v[w],v[w]=k,T|=v[(v[y]+v[w])%256]<<24-F*8}return this._i=y,this._j=w,T}l.RC4=f._createHelper(h);var m=p.RC4Drop=h.extend({cfg:h.cfg.extend({drop:192}),_doReset:function(){h._doReset.call(this);for(var v=this.cfg.drop;v>0;v--)g.call(this)}});l.RC4Drop=f._createHelper(m)})(),o.RC4})})(wc)),wc.exports}var bc={exports:{}},yC=bc.exports,Ym;function _C(){return Ym||(Ym=1,(function(r,a){(function(o,l,d){r.exports=l(mt(),Xo(),Jo(),fo(),mn())})(yC,function(o){return(function(){var l=o,d=l.lib,f=d.StreamCipher,p=l.algo,h=[],g=[],m=[],v=p.Rabbit=f.extend({_doReset:function(){for(var w=this._key.words,T=this.cfg.iv,F=0;F<4;F++)w[F]=(w[F]<<8|w[F]>>>24)&16711935|(w[F]<<24|w[F]>>>8)&4278255360;var k=this._X=[w[0],w[3]<<16|w[2]>>>16,w[1],w[0]<<16|w[3]>>>16,w[2],w[1]<<16|w[0]>>>16,w[3],w[2]<<16|w[1]>>>16],E=this._C=[w[2]<<16|w[2]>>>16,w[0]&4294901760|w[1]&65535,w[3]<<16|w[3]>>>16,w[1]&4294901760|w[2]&65535,w[0]<<16|w[0]>>>16,w[2]&4294901760|w[3]&65535,w[1]<<16|w[1]>>>16,w[3]&4294901760|w[0]&65535];this._b=0;for(var F=0;F<4;F++)y.call(this);for(var F=0;F<8;F++)E[F]^=k[F+4&7];if(T){var D=T.words,B=D[0],S=D[1],N=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,M=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,z=N>>>16|M&4294901760,H=M<<16|N&65535;E[0]^=N,E[1]^=z,E[2]^=M,E[3]^=H,E[4]^=N,E[5]^=z,E[6]^=M,E[7]^=H;for(var F=0;F<4;F++)y.call(this)}},_doProcessBlock:function(w,T){var F=this._X;y.call(this),h[0]=F[0]^F[5]>>>16^F[3]<<16,h[1]=F[2]^F[7]>>>16^F[5]<<16,h[2]=F[4]^F[1]>>>16^F[7]<<16,h[3]=F[6]^F[3]>>>16^F[1]<<16;for(var k=0;k<4;k++)h[k]=(h[k]<<8|h[k]>>>24)&16711935|(h[k]<<24|h[k]>>>8)&4278255360,w[T+k]^=h[k]},blockSize:128/32,ivSize:64/32});function y(){for(var w=this._X,T=this._C,F=0;F<8;F++)g[F]=T[F];T[0]=T[0]+1295307597+this._b|0,T[1]=T[1]+3545052371+(T[0]>>>0<g[0]>>>0?1:0)|0,T[2]=T[2]+886263092+(T[1]>>>0<g[1]>>>0?1:0)|0,T[3]=T[3]+1295307597+(T[2]>>>0<g[2]>>>0?1:0)|0,T[4]=T[4]+3545052371+(T[3]>>>0<g[3]>>>0?1:0)|0,T[5]=T[5]+886263092+(T[4]>>>0<g[4]>>>0?1:0)|0,T[6]=T[6]+1295307597+(T[5]>>>0<g[5]>>>0?1:0)|0,T[7]=T[7]+3545052371+(T[6]>>>0<g[6]>>>0?1:0)|0,this._b=T[7]>>>0<g[7]>>>0?1:0;for(var F=0;F<8;F++){var k=w[F]+T[F],E=k&65535,D=k>>>16,B=((E*E>>>17)+E*D>>>15)+D*D,S=((k&4294901760)*k|0)+((k&65535)*k|0);m[F]=B^S}w[0]=m[0]+(m[7]<<16|m[7]>>>16)+(m[6]<<16|m[6]>>>16)|0,w[1]=m[1]+(m[0]<<8|m[0]>>>24)+m[7]|0,w[2]=m[2]+(m[1]<<16|m[1]>>>16)+(m[0]<<16|m[0]>>>16)|0,w[3]=m[3]+(m[2]<<8|m[2]>>>24)+m[1]|0,w[4]=m[4]+(m[3]<<16|m[3]>>>16)+(m[2]<<16|m[2]>>>16)|0,w[5]=m[5]+(m[4]<<8|m[4]>>>24)+m[3]|0,w[6]=m[6]+(m[5]<<16|m[5]>>>16)+(m[4]<<16|m[4]>>>16)|0,w[7]=m[7]+(m[6]<<8|m[6]>>>24)+m[5]|0}l.Rabbit=f._createHelper(v)})(),o.Rabbit})})(bc)),bc.exports}var Cc={exports:{}},wC=Cc.exports,Xm;function bC(){return Xm||(Xm=1,(function(r,a){(function(o,l,d){r.exports=l(mt(),Xo(),Jo(),fo(),mn())})(wC,function(o){return(function(){var l=o,d=l.lib,f=d.StreamCipher,p=l.algo,h=[],g=[],m=[],v=p.RabbitLegacy=f.extend({_doReset:function(){var w=this._key.words,T=this.cfg.iv,F=this._X=[w[0],w[3]<<16|w[2]>>>16,w[1],w[0]<<16|w[3]>>>16,w[2],w[1]<<16|w[0]>>>16,w[3],w[2]<<16|w[1]>>>16],k=this._C=[w[2]<<16|w[2]>>>16,w[0]&4294901760|w[1]&65535,w[3]<<16|w[3]>>>16,w[1]&4294901760|w[2]&65535,w[0]<<16|w[0]>>>16,w[2]&4294901760|w[3]&65535,w[1]<<16|w[1]>>>16,w[3]&4294901760|w[0]&65535];this._b=0;for(var E=0;E<4;E++)y.call(this);for(var E=0;E<8;E++)k[E]^=F[E+4&7];if(T){var D=T.words,B=D[0],S=D[1],N=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,M=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,z=N>>>16|M&4294901760,H=M<<16|N&65535;k[0]^=N,k[1]^=z,k[2]^=M,k[3]^=H,k[4]^=N,k[5]^=z,k[6]^=M,k[7]^=H;for(var E=0;E<4;E++)y.call(this)}},_doProcessBlock:function(w,T){var F=this._X;y.call(this),h[0]=F[0]^F[5]>>>16^F[3]<<16,h[1]=F[2]^F[7]>>>16^F[5]<<16,h[2]=F[4]^F[1]>>>16^F[7]<<16,h[3]=F[6]^F[3]>>>16^F[1]<<16;for(var k=0;k<4;k++)h[k]=(h[k]<<8|h[k]>>>24)&16711935|(h[k]<<24|h[k]>>>8)&4278255360,w[T+k]^=h[k]},blockSize:128/32,ivSize:64/32});function y(){for(var w=this._X,T=this._C,F=0;F<8;F++)g[F]=T[F];T[0]=T[0]+1295307597+this._b|0,T[1]=T[1]+3545052371+(T[0]>>>0<g[0]>>>0?1:0)|0,T[2]=T[2]+886263092+(T[1]>>>0<g[1]>>>0?1:0)|0,T[3]=T[3]+1295307597+(T[2]>>>0<g[2]>>>0?1:0)|0,T[4]=T[4]+3545052371+(T[3]>>>0<g[3]>>>0?1:0)|0,T[5]=T[5]+886263092+(T[4]>>>0<g[4]>>>0?1:0)|0,T[6]=T[6]+1295307597+(T[5]>>>0<g[5]>>>0?1:0)|0,T[7]=T[7]+3545052371+(T[6]>>>0<g[6]>>>0?1:0)|0,this._b=T[7]>>>0<g[7]>>>0?1:0;for(var F=0;F<8;F++){var k=w[F]+T[F],E=k&65535,D=k>>>16,B=((E*E>>>17)+E*D>>>15)+D*D,S=((k&4294901760)*k|0)+((k&65535)*k|0);m[F]=B^S}w[0]=m[0]+(m[7]<<16|m[7]>>>16)+(m[6]<<16|m[6]>>>16)|0,w[1]=m[1]+(m[0]<<8|m[0]>>>24)+m[7]|0,w[2]=m[2]+(m[1]<<16|m[1]>>>16)+(m[0]<<16|m[0]>>>16)|0,w[3]=m[3]+(m[2]<<8|m[2]>>>24)+m[1]|0,w[4]=m[4]+(m[3]<<16|m[3]>>>16)+(m[2]<<16|m[2]>>>16)|0,w[5]=m[5]+(m[4]<<8|m[4]>>>24)+m[3]|0,w[6]=m[6]+(m[5]<<16|m[5]>>>16)+(m[4]<<16|m[4]>>>16)|0,w[7]=m[7]+(m[6]<<8|m[6]>>>24)+m[5]|0}l.RabbitLegacy=f._createHelper(v)})(),o.RabbitLegacy})})(Cc)),Cc.exports}var Ec={exports:{}},CC=Ec.exports,Jm;function EC(){return Jm||(Jm=1,(function(r,a){(function(o,l,d){r.exports=l(mt(),Xo(),Jo(),fo(),mn())})(CC,function(o){return(function(){var l=o,d=l.lib,f=d.BlockCipher,p=l.algo;const h=16,g=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],m=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var v={pbox:[],sbox:[]};function y(E,D){let B=D>>24&255,S=D>>16&255,N=D>>8&255,M=D&255,z=E.sbox[0][B]+E.sbox[1][S];return z=z^E.sbox[2][N],z=z+E.sbox[3][M],z}function w(E,D,B){let S=D,N=B,M;for(let z=0;z<h;++z)S=S^E.pbox[z],N=y(E,S)^N,M=S,S=N,N=M;return M=S,S=N,N=M,N=N^E.pbox[h],S=S^E.pbox[h+1],{left:S,right:N}}function T(E,D,B){let S=D,N=B,M;for(let z=h+1;z>1;--z)S=S^E.pbox[z],N=y(E,S)^N,M=S,S=N,N=M;return M=S,S=N,N=M,N=N^E.pbox[1],S=S^E.pbox[0],{left:S,right:N}}function F(E,D,B){for(let H=0;H<4;H++){E.sbox[H]=[];for(let j=0;j<256;j++)E.sbox[H][j]=m[H][j]}let S=0;for(let H=0;H<h+2;H++)E.pbox[H]=g[H]^D[S],S++,S>=B&&(S=0);let N=0,M=0,z=0;for(let H=0;H<h+2;H+=2)z=w(E,N,M),N=z.left,M=z.right,E.pbox[H]=N,E.pbox[H+1]=M;for(let H=0;H<4;H++)for(let j=0;j<256;j+=2)z=w(E,N,M),N=z.left,M=z.right,E.sbox[H][j]=N,E.sbox[H][j+1]=M;return!0}var k=p.Blowfish=f.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var E=this._keyPriorReset=this._key,D=E.words,B=E.sigBytes/4;F(v,D,B)}},encryptBlock:function(E,D){var B=w(v,E[D],E[D+1]);E[D]=B.left,E[D+1]=B.right},decryptBlock:function(E,D){var B=T(v,E[D],E[D+1]);E[D]=B.left,E[D+1]=B.right},blockSize:64/32,keySize:128/32,ivSize:64/32});l.Blowfish=f._createHelper(k)})(),o.Blowfish})})(Ec)),Ec.exports}var kC=Zu.exports,eg;function Ex(){return eg||(eg=1,(function(r,a){(function(o,l,d){r.exports=l(mt(),td(),bb(),Eb(),Xo(),Bb(),Jo(),bx(),pl(),Fb(),Cx(),Mb(),Ob(),zb(),nd(),Ub(),fo(),mn(),Gb(),Qb(),Yb(),Jb(),tC(),rC(),oC(),aC(),uC(),dC(),hC(),mC(),AC(),vC(),_C(),bC(),EC())})(kC,function(o){return o})})(Zu)),Zu.exports}var tg;function F0(){if(tg)return Ka;tg=1,Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.ChannelCrypto=void 0;const r=Ex(),a=vn();class o{static decryptGroupTextMessage(d,f,p){try{const h=(0,a.hexToBytes)(p),g=(0,a.hexToBytes)(f),m=new Uint8Array(32);m.set(h,0);const v=(0,r.HmacSHA256)(r.enc.Hex.parse(d),r.enc.Hex.parse((0,a.bytesToHex)(m))),w=(0,a.hexToBytes)(v.toString(r.enc.Hex)).slice(0,2);if(w[0]!==g[0]||w[1]!==g[1])return{success:!1,error:"MAC verification failed"};const T=r.enc.Hex.parse(p),F=r.enc.Hex.parse(d),k=r.AES.decrypt(r.lib.CipherParams.create({ciphertext:F}),T,{mode:r.mode.ECB,padding:r.pad.NoPadding}),E=(0,a.hexToBytes)(k.toString(r.enc.Hex));if(!E||E.length<5)return{success:!1,error:"Decrypted content too short"};const D=E[0]|E[1]<<8|E[2]<<16|E[3]<<24,B=E[4],S=E.slice(5);let M=new TextDecoder("utf-8").decode(S);const z=M.indexOf("\0");z>=0&&(M=M.substring(0,z));const H=M.indexOf(": ");let j,J;if(H>0&&H<50){const W=M.substring(0,H);/[:\[\]]/.test(W)?J=M:(j=W,J=M.substring(H+2))}else J=M;return{success:!0,data:{timestamp:D,flags:B,sender:j,message:J}}}catch(h){return{success:!1,error:h instanceof Error?h.message:"Decryption failed"}}}static calculateChannelHash(d){const f=(0,r.SHA256)(r.enc.Hex.parse(d));return(0,a.hexToBytes)(f.toString(r.enc.Hex))[0].toString(16).padStart(2,"0")}}return Ka.ChannelCrypto=o,Ka}var ng;function kx(){if(ng)return Ga;ng=1,Object.defineProperty(Ga,"__esModule",{value:!0}),Ga.MeshCoreKeyStore=void 0;const r=F0();class a{constructor(l){this.nodeKeys=new Map,this.channelHashToKeys=new Map,l!=null&&l.channelSecrets&&this.addChannelSecrets(l.channelSecrets),l!=null&&l.nodeKeys&&Object.entries(l.nodeKeys).forEach(([d,f])=>{this.addNodeKey(d,f)})}addNodeKey(l,d){const f=l.toUpperCase();this.nodeKeys.set(f,d)}hasChannelKey(l){const d=l.toLowerCase();return this.channelHashToKeys.has(d)}hasNodeKey(l){const d=l.toUpperCase();return this.nodeKeys.has(d)}getChannelKeys(l){const d=l.toLowerCase();return this.channelHashToKeys.get(d)||[]}getNodeKey(l){const d=l.toUpperCase();return this.nodeKeys.get(d)}addChannelSecrets(l){for(const d of l){const f=r.ChannelCrypto.calculateChannelHash(d).toLowerCase();this.channelHashToKeys.has(f)||this.channelHashToKeys.set(f,[]),this.channelHashToKeys.get(f).push(d)}}}return Ga.MeshCoreKeyStore=a,Ga}var Qa={},Dr={};/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const Sx={p:0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,n:0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3edn,h:8n,a:0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffecn,d:0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3n,Gx:0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51an,Gy:0x6666666666666666666666666666666666666666666666666666666666666658n},{p:Bn,n:kc,Gx:rg,Gy:ig,a:qf,d:Gf}=Sx,SC=8n,ei=32,ul=64,or=(r="")=>{throw new Error(r)},BC=r=>typeof r=="bigint",Bx=r=>typeof r=="string",PC=r=>r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array",Yo=(r,a)=>!PC(r)||typeof a=="number"&&a>0&&r.length!==a?or("Uint8Array expected"):r,rd=r=>new Uint8Array(r),N0=r=>Uint8Array.from(r),Px=(r,a)=>r.toString(16).padStart(a,"0"),L0=r=>Array.from(Yo(r)).map(a=>Px(a,2)).join(""),Ci={_0:48,_9:57,A:65,F:70,a:97,f:102},og=r=>{if(r>=Ci._0&&r<=Ci._9)return r-Ci._0;if(r>=Ci.A&&r<=Ci.F)return r-(Ci.A-10);if(r>=Ci.a&&r<=Ci.f)return r-(Ci.a-10)},M0=r=>{const a="hex invalid";if(!Bx(r))return or(a);const o=r.length,l=o/2;if(o%2)return or(a);const d=rd(l);for(let f=0,p=0;f<l;f++,p+=2){const h=og(r.charCodeAt(p)),g=og(r.charCodeAt(p+1));if(h===void 0||g===void 0)return or(a);d[f]=h*16+g}return d},co=(r,a)=>Yo(Bx(r)?M0(r):N0(Yo(r)),a),Tx=()=>globalThis==null?void 0:globalThis.crypto,TC=()=>{var r;return((r=Tx())==null?void 0:r.subtle)??or("crypto.subtle must be defined")},cl=(...r)=>{const a=rd(r.reduce((l,d)=>l+Yo(d).length,0));let o=0;return r.forEach(l=>{a.set(l,o),o+=l.length}),a},Dx=(r=ei)=>Tx().getRandomValues(rd(r)),Lc=BigInt,qo=(r,a,o,l="bad number: out of range")=>BC(r)&&a<=r&&r<o?r:or(l),je=(r,a=Bn)=>{const o=r%a;return o>=0n?o:a+o},Rx=r=>je(r,kc),Fx=(r,a)=>{(r===0n||a<=0n)&&or("no inverse n="+r+" mod="+a);let o=je(r,a),l=a,d=0n,f=1n;for(;o!==0n;){const p=l/o,h=l%o,g=d-f*p;l=o,o=h,d=f,f=g}return l===1n?je(d,a):or("no inverse")},DC=r=>{const a=U0[r];return typeof a!="function"&&or("hashes."+r+" not set"),a},sg=r=>r instanceof Nr?r:or("Point expected"),a0=2n**256n,$r=class $r{constructor(a,o,l,d){Oo(this,"ex");Oo(this,"ey");Oo(this,"ez");Oo(this,"et");const f=a0;this.ex=qo(a,0n,f),this.ey=qo(o,0n,f),this.ez=qo(l,1n,f),this.et=qo(d,0n,f),Object.freeze(this)}static fromAffine(a){return new $r(a.x,a.y,1n,je(a.x*a.y))}static fromBytes(a,o=!1){const l=Gf,d=N0(Yo(a,ei)),f=a[31];d[31]=f&-129;const p=I0(d);qo(p,0n,o?a0:Bn);const g=je(p*p),m=je(g-1n),v=je(l*g+1n);let{isValid:y,value:w}=FC(m,v);y||or("bad point: y not sqrt");const T=(w&1n)===1n,F=(f&128)!==0;return!o&&w===0n&&F&&or("bad point: x==0, isLastByteOdd"),F!==T&&(w=je(-w)),new $r(w,p,1n,je(w*p))}assertValidity(){const a=qf,o=Gf,l=this;if(l.is0())throw new Error("bad point: ZERO");const{ex:d,ey:f,ez:p,et:h}=l,g=je(d*d),m=je(f*f),v=je(p*p),y=je(v*v),w=je(g*a),T=je(v*je(w+m)),F=je(y+je(o*je(g*m)));if(T!==F)throw new Error("bad point: equation left != right (1)");const k=je(d*f),E=je(p*h);if(k!==E)throw new Error("bad point: equation left != right (2)");return this}equals(a){const{ex:o,ey:l,ez:d}=this,{ex:f,ey:p,ez:h}=sg(a),g=je(o*h),m=je(f*d),v=je(l*h),y=je(p*d);return g===m&&v===y}is0(){return this.equals(Ws)}negate(){return new $r(je(-this.ex),this.ey,this.ez,je(-this.et))}double(){const{ex:a,ey:o,ez:l}=this,d=qf,f=je(a*a),p=je(o*o),h=je(2n*je(l*l)),g=je(d*f),m=a+o,v=je(je(m*m)-f-p),y=g+p,w=y-h,T=g-p,F=je(v*w),k=je(y*T),E=je(v*T),D=je(w*y);return new $r(F,k,D,E)}add(a){const{ex:o,ey:l,ez:d,et:f}=this,{ex:p,ey:h,ez:g,et:m}=sg(a),v=qf,y=Gf,w=je(o*p),T=je(l*h),F=je(f*y*m),k=je(d*g),E=je((o+l)*(p+h)-w-T),D=je(k-F),B=je(k+F),S=je(T-v*w),N=je(E*D),M=je(B*S),z=je(E*S),H=je(D*B);return new $r(N,M,H,z)}multiply(a,o=!0){if(!o&&(a===0n||this.is0()))return Ws;if(qo(a,1n,kc),a===1n)return this;if(this.equals(ki))return UC(a).p;let l=Ws,d=ki;for(let f=this;a>0n;f=f.double(),a>>=1n)a&1n?l=l.add(f):o&&(d=d.add(f));return l}toAffine(){const{ex:a,ey:o,ez:l}=this;if(this.equals(Ws))return{x:0n,y:1n};const d=Fx(l,Bn);return je(l*d)!==1n&&or("invalid inverse"),{x:je(a*d),y:je(o*d)}}toBytes(){const{x:a,y:o}=this.assertValidity().toAffine(),l=Nx(o);return l[31]|=a&1n?128:0,l}toHex(){return L0(this.toBytes())}clearCofactor(){return this.multiply(Lc(SC),!1)}isSmallOrder(){return this.clearCofactor().is0()}isTorsionFree(){let a=this.multiply(kc/2n,!1).double();return kc%2n&&(a=a.add(this)),a.is0()}static fromHex(a,o){return $r.fromBytes(co(a),o)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}toRawBytes(){return this.toBytes()}};Oo($r,"BASE"),Oo($r,"ZERO");let Nr=$r;const ki=new Nr(rg,ig,1n,je(rg*ig)),Ws=new Nr(0n,1n,1n,0n);Nr.BASE=ki;Nr.ZERO=Ws;const Nx=r=>M0(Px(qo(r,0n,a0),ul)).reverse(),I0=r=>Lc("0x"+L0(N0(Yo(r)).reverse())),Qr=(r,a)=>{let o=r;for(;a-- >0n;)o*=o,o%=Bn;return o},RC=r=>{const o=r*r%Bn*r%Bn,l=Qr(o,2n)*o%Bn,d=Qr(l,1n)*r%Bn,f=Qr(d,5n)*d%Bn,p=Qr(f,10n)*f%Bn,h=Qr(p,20n)*p%Bn,g=Qr(h,40n)*h%Bn,m=Qr(g,80n)*g%Bn,v=Qr(m,80n)*g%Bn,y=Qr(v,10n)*f%Bn;return{pow_p_5_8:Qr(y,2n)*r%Bn,b2:o}},ag=0x2b8324804fc1df0b2b4d00993dfbd7a72f431806ad2fe478c4ee1b274a0ea0b0n,FC=(r,a)=>{const o=je(a*a*a),l=je(o*o*a),d=RC(r*l).pow_p_5_8;let f=je(r*o*d);const p=je(a*f*f),h=f,g=je(f*ag),m=p===r,v=p===je(-r),y=p===je(-r*ag);return m&&(f=h),(v||y)&&(f=g),(je(f)&1n)===1n&&(f=je(-f)),{isValid:m||v,value:f}},Mc=r=>Rx(I0(r)),O0=(...r)=>U0.sha512Async(...r),j0=(...r)=>DC("sha512Sync")(...r),Lx=r=>{const a=r.slice(0,ei);a[0]&=248,a[31]&=127,a[31]|=64;const o=r.slice(ei,ul),l=Mc(a),d=ki.multiply(l),f=d.toBytes();return{head:a,prefix:o,scalar:l,point:d,pointBytes:f}},z0=r=>O0(co(r,ei)).then(Lx),H0=r=>Lx(j0(co(r,ei))),NC=r=>z0(r).then(a=>a.pointBytes),LC=r=>H0(r).pointBytes,Mx=r=>O0(r.hashable).then(r.finish),Ix=r=>r.finish(j0(r.hashable)),Ox=(r,a,o)=>{const{pointBytes:l,scalar:d}=r,f=Mc(a),p=ki.multiply(f).toBytes();return{hashable:cl(p,l,o),finish:m=>{const v=Rx(f+Mc(m)*d);return Yo(cl(p,Nx(v)),ul)}}},MC=async(r,a)=>{const o=co(r),l=await z0(a),d=await O0(l.prefix,o);return Mx(Ox(l,d,o))},IC=(r,a)=>{const o=co(r),l=H0(a),d=j0(l.prefix,o);return Ix(Ox(l,d,o))},V0={zip215:!0},jx=(r,a,o,l=V0)=>{r=co(r,ul),a=co(a),o=co(o,ei);const{zip215:d}=l;let f,p,h,g,m=Uint8Array.of();try{f=Nr.fromHex(o,d),p=Nr.fromHex(r.slice(0,ei),d),h=I0(r.slice(ei,ul)),g=ki.multiply(h,!1),m=cl(p.toBytes(),f.toBytes(),a)}catch{}return{hashable:m,finish:y=>{if(g==null||!d&&f.isSmallOrder())return!1;const w=Mc(y);return p.add(f.multiply(w,!1)).add(g.negate()).clearCofactor().is0()}}},OC=async(r,a,o,l=V0)=>Mx(jx(r,a,o,l)),jC=(r,a,o,l=V0)=>Ix(jx(r,a,o,l)),U0={sha512Async:async(...r)=>{const a=TC(),o=cl(...r);return rd(await a.digest("SHA-512",o.buffer))},sha512Sync:void 0,bytesToHex:L0,hexToBytes:M0,concatBytes:cl,mod:je,invert:Fx,randomBytes:Dx},zC={getExtendedPublicKeyAsync:z0,getExtendedPublicKey:H0,randomPrivateKey:()=>Dx(ei),precompute:(r=8,a=ki)=>(a.multiply(3n),a)},Ic=8,HC=256,zx=Math.ceil(HC/Ic)+1,l0=2**(Ic-1),VC=()=>{const r=[];let a=ki,o=a;for(let l=0;l<zx;l++){o=a,r.push(o);for(let d=1;d<l0;d++)o=o.add(a),r.push(o);a=o.double()}return r};let lg;const ug=(r,a)=>{const o=a.negate();return r?o:a},UC=r=>{const a=lg||(lg=VC());let o=Ws,l=ki;const d=2**Ic,f=d,p=Lc(d-1),h=Lc(Ic);for(let g=0;g<zx;g++){let m=Number(r&p);r>>=h,m>l0&&(m-=f,r+=1n);const v=g*l0,y=v,w=v+Math.abs(m)-1,T=g%2!==0,F=m<0;m===0?l=l.add(ug(T,a[y])):o=o.add(ug(F,a[w]))}return{p:o,f:l}},ZC=Object.freeze(Object.defineProperty({__proto__:null,CURVE:Sx,ExtendedPoint:Nr,Point:Nr,etc:U0,getPublicKey:LC,getPublicKeyAsync:NC,sign:IC,signAsync:MC,utils:zC,verify:jC,verifyAsync:OC},Symbol.toStringTag,{value:"Module"})),WC=Mg(ZC);var Vo={},Kf={exports:{}},cg;function qC(){return cg||(cg=1,(function(r,a){var o=(()=>{var d;var l=typeof document<"u"?(d=document.currentScript)==null?void 0:d.src:void 0;return(async function(f={}){var yn;var p,h=f,g=typeof window=="object",m=typeof WorkerGlobalScope<"u",v=typeof process=="object"&&((yn=process.versions)==null?void 0:yn.node)&&process.type!="renderer";typeof __filename<"u"?l=__filename:m&&(l=self.location.href);var y="";function w(me){return h.locateFile?h.locateFile(me,y):y+me}var T,F;if(v){var k=Nc;y=__dirname+"/",F=me=>{me=S(me)?new URL(me):me;var be=k.readFileSync(me);return be},T=async(me,be=!0)=>{me=S(me)?new URL(me):me;var Re=k.readFileSync(me,be?void 0:"utf8");return Re},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2)}else if(g||m){try{y=new URL(".",l).href}catch{}m&&(F=me=>{var be=new XMLHttpRequest;return be.open("GET",me,!1),be.responseType="arraybuffer",be.send(null),new Uint8Array(be.response)}),T=async me=>{if(S(me))return new Promise((Re,ot)=>{var te=new XMLHttpRequest;te.open("GET",me,!0),te.responseType="arraybuffer",te.onload=()=>{if(te.status==200||te.status==0&&te.response){Re(te.response);return}ot(te.status)},te.onerror=ot,te.send(null)});var be=await fetch(me,{credentials:"same-origin"});if(be.ok)return be.arrayBuffer();throw new Error(be.status+" : "+be.url)}}console.log.bind(console);var E=console.error.bind(console),D,B=!1,S=me=>me.startsWith("file://"),N,M,z,H,j,J=!1;function W(){var me=z.buffer;h.HEAP8=H=new Int8Array(me),h.HEAPU8=j=new Uint8Array(me),h.HEAP32=new Int32Array(me),h.HEAPU32=new Uint32Array(me),new BigInt64Array(me),new BigUint64Array(me)}function U(){if(h.preRun)for(typeof h.preRun=="function"&&(h.preRun=[h.preRun]);h.preRun.length;)bt(h.preRun.shift());Se(Ye)}function ne(){J=!0,Ft.b()}function Y(){if(h.postRun)for(typeof h.postRun=="function"&&(h.postRun=[h.postRun]);h.postRun.length;)Ue(h.postRun.shift());Se(Ae)}var re=0,fe=null;function ae(me){var be;re++,(be=h.monitorRunDependencies)==null||be.call(h,re)}function he(me){var Re;if(re--,(Re=h.monitorRunDependencies)==null||Re.call(h,re),re==0&&fe){var be=fe;fe=null,be()}}function G(me){var Re;(Re=h.onAbort)==null||Re.call(h,me),me="Aborted("+me+")",E(me),B=!0,me+=". Build with -sASSERTIONS for more info.";var be=new WebAssembly.RuntimeError(me);throw M==null||M(be),be}var pe;function Z(){return w("orlp-ed25519.wasm")}function P(me){if(me==pe&&D)return new Uint8Array(D);if(F)return F(me);throw"both async and sync fetching of the wasm failed"}async function V(me){if(!D)try{var be=await T(me);return new Uint8Array(be)}catch{}return P(me)}async function K(me,be){try{var Re=await V(me),ot=await WebAssembly.instantiate(Re,be);return ot}catch(te){E(`failed to asynchronously prepare wasm: ${te}`),G(te)}}async function $(me,be,Re){if(!me&&typeof WebAssembly.instantiateStreaming=="function"&&!S(be)&&!v)try{var ot=fetch(be,{credentials:"same-origin"}),te=await WebAssembly.instantiateStreaming(ot,Re);return te}catch(ge){E(`wasm streaming compile failed: ${ge}`),E("falling back to ArrayBuffer instantiation")}return K(be,Re)}function ce(){return{a:Kt}}async function de(){function me(ge,ye){return Ft=ge.exports,z=Ft.a,W(),Tn(Ft),he(),Ft}ae();function be(ge){return me(ge.instance)}var Re=ce();if(h.instantiateWasm)return new Promise((ge,ye)=>{h.instantiateWasm(Re,(Te,Qe)=>{ge(me(Te))})});pe??(pe=Z());var ot=await $(D,pe,Re),te=be(ot);return te}var Se=me=>{for(;me.length>0;)me.shift()(h)},Ae=[],Ue=me=>Ae.push(me),Ye=[],bt=me=>Ye.push(me),ct=me=>Dt(me),Be=()=>Ut(),Ze=me=>{var be=h["_"+me];return be},dt=(me,be)=>{H.set(me,be)},Mt=me=>{for(var be=0,Re=0;Re<me.length;++Re){var ot=me.charCodeAt(Re);ot<=127?be++:ot<=2047?be+=2:ot>=55296&&ot<=57343?(be+=4,++Re):be+=3}return be},at=(me,be,Re,ot)=>{if(!(ot>0))return 0;for(var te=Re,ge=Re+ot-1,ye=0;ye<me.length;++ye){var Te=me.codePointAt(ye);if(Te<=127){if(Re>=ge)break;be[Re++]=Te}else if(Te<=2047){if(Re+1>=ge)break;be[Re++]=192|Te>>6,be[Re++]=128|Te&63}else if(Te<=65535){if(Re+2>=ge)break;be[Re++]=224|Te>>12,be[Re++]=128|Te>>6&63,be[Re++]=128|Te&63}else{if(Re+3>=ge)break;be[Re++]=240|Te>>18,be[Re++]=128|Te>>12&63,be[Re++]=128|Te>>6&63,be[Re++]=128|Te&63,ye++}}return be[Re]=0,Re-te},gt=(me,be,Re)=>at(me,j,be,Re),qe=me=>Jt(me),tt=me=>{var be=Mt(me)+1,Re=qe(be);return gt(me,Re,be),Re},nt=typeof TextDecoder<"u"?new TextDecoder:void 0,He=(me,be=0,Re=NaN)=>{for(var ot=be+Re,te=be;me[te]&&!(te>=ot);)++te;if(te-be>16&&me.buffer&&nt)return nt.decode(me.subarray(be,te));for(var ge="";be<te;){var ye=me[be++];if(!(ye&128)){ge+=String.fromCharCode(ye);continue}var Te=me[be++]&63;if((ye&224)==192){ge+=String.fromCharCode((ye&31)<<6|Te);continue}var Qe=me[be++]&63;if((ye&240)==224?ye=(ye&15)<<12|Te<<6|Qe:ye=(ye&7)<<18|Te<<12|Qe<<6|me[be++]&63,ye<65536)ge+=String.fromCharCode(ye);else{var Fe=ye-65536;ge+=String.fromCharCode(55296|Fe>>10,56320|Fe&1023)}}return ge},Ct=(me,be)=>me?He(j,me,be):"",Ce=(me,be,Re,ot,te)=>{var ge={string:st=>{var Bt=0;return st!=null&&st!==0&&(Bt=tt(st)),Bt},array:st=>{var Bt=qe(st.length);return dt(st,Bt),Bt}};function ye(st){return be==="string"?Ct(st):be==="boolean"?!!st:st}var Te=Ze(me),Qe=[],Fe=0;if(ot)for(var vt=0;vt<ot.length;vt++){var Rt=ge[Re[vt]];Rt?(Fe===0&&(Fe=Be()),Qe[vt]=Rt(ot[vt])):Qe[vt]=ot[vt]}var zt=Te(...Qe);function Mn(st){return Fe!==0&&ct(Fe),ye(st)}return zt=Mn(zt),zt},Et=(me,be,Re,ot)=>{var te=!Re||Re.every(ye=>ye==="number"||ye==="boolean"),ge=be!=="string";return ge&&te&&!ot?Ze(me):(...ye)=>Ce(me,be,Re,ye)};h.noExitRuntime&&h.noExitRuntime,h.print&&h.print,h.printErr&&(E=h.printErr),h.wasmBinary&&(D=h.wasmBinary),h.arguments&&h.arguments,h.thisProgram&&h.thisProgram,h.ccall=Ce,h.cwrap=Et;var Dt,Jt,Ut;function Tn(me){h._orlp_derive_public_key=me.c,h._orlp_validate_keypair=me.d,h._orlp_sign=me.e,h._orlp_verify=me.f,Dt=me.g,Jt=me.h,Ut=me.i}var Kt={},Ft=await de();function Qt(){if(re>0){fe=Qt;return}if(U(),re>0){fe=Qt;return}function me(){var be;h.calledRun=!0,!B&&(ne(),N==null||N(h),(be=h.onRuntimeInitialized)==null||be.call(h),Y())}h.setStatus?(h.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>h.setStatus(""),1),me()},1)):me()}function qn(){if(h.preInit)for(typeof h.preInit=="function"&&(h.preInit=[h.preInit]);h.preInit.length>0;)h.preInit.shift()()}return qn(),Qt(),J?p=h:p=new Promise((me,be)=>{N=me,M=be}),p})})();r.exports=o,r.exports.default=o})(Kf)),Kf.exports}var dg;function Z0(){if(dg)return Vo;dg=1,Object.defineProperty(Vo,"__esModule",{value:!0}),Vo.derivePublicKey=l,Vo.validateKeyPair=d,Vo.sign=f,Vo.verify=p;const r=vn(),a=qC();async function o(){return await a()}async function l(h){const g=await o(),m=(0,r.hexToBytes)(h);if(m.length!==64)throw new Error(`Invalid private key length: expected 64 bytes, got ${m.length}`);const v=1024,y=1088;if(g.HEAPU8.set(m,v),g.ccall("orlp_derive_public_key","number",["number","number"],[y,v])!==0)throw new Error("orlp key derivation failed: invalid private key");const T=new Uint8Array(32);return T.set(g.HEAPU8.subarray(y,y+32)),(0,r.bytesToHex)(T)}async function d(h,g){try{const m=await o(),v=(0,r.hexToBytes)(h),y=(0,r.hexToBytes)(g);if(v.length!==64||y.length!==32)return!1;const w=2048,T=2112;return m.HEAPU8.set(v,w),m.HEAPU8.set(y,T),m.ccall("orlp_validate_keypair","number",["number","number"],[T,w])===1}catch{return!1}}async function f(h,g,m){const v=await o(),y=(0,r.hexToBytes)(h),w=(0,r.hexToBytes)(g),T=(0,r.hexToBytes)(m);if(w.length!==64)throw new Error(`Invalid private key length: expected 64 bytes, got ${w.length}`);if(T.length!==32)throw new Error(`Invalid public key length: expected 32 bytes, got ${T.length}`);const F=1e5,k=2e5,E=3e5,D=4e5;v.HEAPU8.set(y,F),v.HEAPU8.set(w,k),v.HEAPU8.set(T,E),v.ccall("orlp_sign","void",["number","number","number","number","number"],[D,F,y.length,E,k]);const B=new Uint8Array(64);return B.set(v.HEAPU8.subarray(D,D+64)),(0,r.bytesToHex)(B)}async function p(h,g,m){try{const v=await o(),y=(0,r.hexToBytes)(h),w=(0,r.hexToBytes)(g),T=(0,r.hexToBytes)(m);if(y.length!==64||T.length!==32)return!1;const F=5e5,k=6e5,E=7e5;return v.HEAPU8.set(y,k),v.HEAPU8.set(w,F),v.HEAPU8.set(T,E),v.ccall("orlp_verify","number",["number","number","number","number"],[k,F,w.length,E])===1}catch{return!1}}return Vo}var fg;function Hx(){if(fg)return Dr;fg=1;var r=Dr&&Dr.__createBinding||(Object.create?(function(m,v,y,w){w===void 0&&(w=y);var T=Object.getOwnPropertyDescriptor(v,y);(!T||("get"in T?!v.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return v[y]}}),Object.defineProperty(m,w,T)}):(function(m,v,y,w){w===void 0&&(w=y),m[w]=v[y]})),a=Dr&&Dr.__setModuleDefault||(Object.create?(function(m,v){Object.defineProperty(m,"default",{enumerable:!0,value:v})}):function(m,v){m.default=v}),o=Dr&&Dr.__importStar||(function(){var m=function(v){return m=Object.getOwnPropertyNames||function(y){var w=[];for(var T in y)Object.prototype.hasOwnProperty.call(y,T)&&(w[w.length]=T);return w},m(v)};return function(v){if(v&&v.__esModule)return v;var y={};if(v!=null)for(var w=m(v),T=0;T<w.length;T++)w[T]!=="default"&&r(y,v,w[T]);return a(y,v),y}})();Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.Ed25519SignatureVerifier=void 0;const l=o(WC),d=vn(),f=Z0();async function p(m){if(typeof globalThis<"u"&&globalThis.crypto&&globalThis.crypto.subtle){const v=await globalThis.crypto.subtle.digest("SHA-512",m);return new Uint8Array(v)}if(typeof s0<"u")try{const{createHash:v}=Nc;return v("sha512").update(m).digest()}catch{}throw new Error("No SHA-512 implementation available")}function h(m){if(typeof s0<"u")try{const{createHash:v}=Nc;return v("sha512").update(m).digest()}catch{}try{const v=Ex(),y=v.lib.WordArray.create(m),w=v.SHA512(y),T=new Uint8Array(64);for(let F=0;F<16;F++){const k=w.words[F]||0;T[F*4]=k>>>24&255,T[F*4+1]=k>>>16&255,T[F*4+2]=k>>>8&255,T[F*4+3]=k&255}return T}catch{throw new Error("No SHA-512 implementation available for synchronous operation")}}l.etc.sha512Async=p;try{l.etc.sha512Sync=h}catch(m){console.debug("Could not set up synchronous SHA-512:",m)}class g{static async verifyAdvertisementSignature(v,y,w,T){try{const F=(0,d.hexToBytes)(v),k=(0,d.hexToBytes)(y),E=(0,d.hexToBytes)(T),D=this.constructAdvertSignedMessage(v,w,E);return await l.verify(k,D,F)}catch(F){return console.error("Ed25519 signature verification failed:",F),!1}}static constructAdvertSignedMessage(v,y,w){const T=(0,d.hexToBytes)(v),F=new Uint8Array(4);F[0]=y&255,F[1]=y>>8&255,F[2]=y>>16&255,F[3]=y>>24&255;const k=new Uint8Array(36+w.length);return k.set(T,0),k.set(F,32),k.set(w,36),k}static getSignedMessageDescription(v,y,w){return`Public Key: ${v} + Timestamp: ${y} (${new Date(y*1e3).toISOString()}) + App Data: ${w}`}static getSignedMessageHex(v,y,w){const T=(0,d.hexToBytes)(w),F=this.constructAdvertSignedMessage(v,y,T);return(0,d.bytesToHex)(F)}static async derivePublicKey(v){try{const y=(0,d.hexToBytes)(v);if(y.length!==64)throw new Error(`Invalid private key length: expected 64 bytes, got ${y.length}`);return await(0,f.derivePublicKey)(v)}catch(y){throw new Error(`Failed to derive public key: ${y instanceof Error?y.message:"Unknown error"}`)}}static derivePublicKeySync(v){try{const y=(0,d.hexToBytes)(v);throw y.length!==64?new Error(`Invalid private key length: expected 64 bytes, got ${y.length}`):new Error("Synchronous key derivation not supported with WASM. Use derivePublicKey() instead.")}catch(y){throw new Error(`Failed to derive public key: ${y instanceof Error?y.message:"Unknown error"}`)}}static async validateKeyPair(v,y){try{return await(0,f.validateKeyPair)(v,y)}catch{return!1}}}return Dr.Ed25519SignatureVerifier=g,Dr}var hg;function GC(){if(hg)return Qa;hg=1,Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.AdvertPayloadDecoder=void 0;const r=sr(),a=vn(),o=ll(),l=Hx();class d{static decode(p,h){try{if(p.length<101){const D={type:r.PayloadType.Advert,version:r.PayloadVersion.Version1,isValid:!1,errors:["Advertisement payload too short"],publicKey:"",timestamp:0,signature:"",appData:{flags:0,deviceRole:r.DeviceRole.ChatNode,hasLocation:!1,hasName:!1}};return h!=null&&h.includeSegments&&(D.segments=[{name:"Invalid Advert Data",description:"Advert payload too short (minimum 101 bytes required)",startByte:h.segmentOffset||0,endByte:(h.segmentOffset||0)+p.length-1,value:(0,a.bytesToHex)(p)}]),D}const g=[],m=(h==null?void 0:h.segmentOffset)||0;let v=0;const y=(0,a.bytesToHex)(p.subarray(v,v+32));h!=null&&h.includeSegments&&g.push({name:"Public Key",description:"Ed25519 public key",startByte:m+v,endByte:m+v+31,value:y}),v+=32;const w=this.readUint32LE(p,v);if(h!=null&&h.includeSegments){const D=new Date(w*1e3);g.push({name:"Timestamp",description:`${w} (${D.toISOString().slice(0,19)}Z)`,startByte:m+v,endByte:m+v+3,value:(0,a.bytesToHex)(p.subarray(v,v+4))})}v+=4;const T=(0,a.bytesToHex)(p.subarray(v,v+64));h!=null&&h.includeSegments&&g.push({name:"Signature",description:"Ed25519 signature",startByte:m+v,endByte:m+v+63,value:T}),v+=64;const F=p[v];if(h!=null&&h.includeSegments){const D=F.toString(2).padStart(8,"0"),B=this.parseDeviceRole(F),N=` | Bits 0-3 (Role): ${(0,o.getDeviceRoleName)(B)} | Bit 4 (Location): ${F&r.AdvertFlags.HasLocation?"Yes":"No"} | Bit 7 (Name): ${F&r.AdvertFlags.HasName?"Yes":"No"}`;g.push({name:"App Flags",description:`Binary: ${D}${N}`,startByte:m+v,endByte:m+v,value:F.toString(16).padStart(2,"0").toUpperCase()})}v+=1;const k={type:r.PayloadType.Advert,version:r.PayloadVersion.Version1,isValid:!0,publicKey:y,timestamp:w,signature:T,appData:{flags:F,deviceRole:this.parseDeviceRole(F),hasLocation:!!(F&r.AdvertFlags.HasLocation),hasName:!!(F&r.AdvertFlags.HasName)}};let E=v;if(F&r.AdvertFlags.HasLocation&&p.length>=E+8){const D=this.readInt32LE(p,E)/1e6,B=this.readInt32LE(p,E+4)/1e6;k.appData.location={latitude:Math.round(D*1e6)/1e6,longitude:Math.round(B*1e6)/1e6},h!=null&&h.includeSegments&&(g.push({name:"Latitude",description:`${D} (${D})`,startByte:m+E,endByte:m+E+3,value:(0,a.bytesToHex)(p.subarray(E,E+4))}),g.push({name:"Longitude",description:`${B} (${B})`,startByte:m+E+4,endByte:m+E+7,value:(0,a.bytesToHex)(p.subarray(E+4,E+8))})),E+=8}if(F&r.AdvertFlags.HasFeature1&&(E+=2),F&r.AdvertFlags.HasFeature2&&(E+=2),F&r.AdvertFlags.HasName&&p.length>E){const D=p.subarray(E),B=new TextDecoder("utf-8").decode(D).replace(/\0.*$/,"");k.appData.name=this.sanitizeControlCharacters(B)||B,h!=null&&h.includeSegments&&g.push({name:"Node Name",description:`Node name: "${k.appData.name}"`,startByte:m+E,endByte:m+p.length-1,value:(0,a.bytesToHex)(D)})}return h!=null&&h.includeSegments&&(k.segments=g),k}catch(g){return{type:r.PayloadType.Advert,version:r.PayloadVersion.Version1,isValid:!1,errors:[g instanceof Error?g.message:"Failed to decode advertisement payload"],publicKey:"",timestamp:0,signature:"",appData:{flags:0,deviceRole:r.DeviceRole.ChatNode,hasLocation:!1,hasName:!1}}}}static async decodeWithVerification(p,h){const g=this.decode(p,h);if(!g||!g.isValid)return g;try{const v=p.subarray(100),y=(0,a.bytesToHex)(v),w=await l.Ed25519SignatureVerifier.verifyAdvertisementSignature(g.publicKey,g.signature,g.timestamp,y);g.signatureValid=w,w||(g.signatureError="Ed25519 signature verification failed",g.isValid=!1,g.errors||(g.errors=[]),g.errors.push("Invalid Ed25519 signature"))}catch(m){g.signatureValid=!1,g.signatureError=m instanceof Error?m.message:"Signature verification error",g.isValid=!1,g.errors||(g.errors=[]),g.errors.push("Signature verification failed: "+(m instanceof Error?m.message:"Unknown error"))}return g}static parseDeviceRole(p){switch(p&15){case 1:return r.DeviceRole.ChatNode;case 2:return r.DeviceRole.Repeater;case 3:return r.DeviceRole.RoomServer;case 4:return r.DeviceRole.Sensor;default:return r.DeviceRole.ChatNode}}static readUint32LE(p,h){return p[h]|p[h+1]<<8|p[h+2]<<16|p[h+3]<<24}static readInt32LE(p,h){const g=this.readUint32LE(p,h);return g>2147483647?g-4294967296:g}static sanitizeControlCharacters(p){return p&&p.trim().replace(/[\x00-\x1F\x7F]/g,"")||null}}return Qa.AdvertPayloadDecoder=d,Qa}var $a={},pg;function KC(){if(pg)return $a;pg=1,Object.defineProperty($a,"__esModule",{value:!0}),$a.TracePayloadDecoder=void 0;const r=sr(),a=vn();class o{static decode(d,f,p){try{if(d.length<9){const B={type:r.PayloadType.Trace,version:r.PayloadVersion.Version1,isValid:!1,errors:["Trace payload too short (need at least tag(4) + auth(4) + flags(1))"],traceTag:"00000000",authCode:0,flags:0,pathHashes:[]};return p!=null&&p.includeSegments&&(B.segments=[{name:"Invalid Trace Data",description:"Trace payload too short (minimum 9 bytes required)",startByte:p.segmentOffset||0,endByte:(p.segmentOffset||0)+d.length-1,value:(0,a.bytesToHex)(d)}]),B}let h=0;const g=[],m=(p==null?void 0:p.segmentOffset)||0,v=this.readUint32LE(d,h),y=(0,a.numberToHex)(v,8);p!=null&&p.includeSegments&&g.push({name:"Trace Tag",description:`Unique identifier for this trace: 0x${v.toString(16).padStart(8,"0")}`,startByte:m+h,endByte:m+h+3,value:(0,a.bytesToHex)(d.slice(h,h+4))}),h+=4;const w=this.readUint32LE(d,h);p!=null&&p.includeSegments&&g.push({name:"Auth Code",description:`Authentication/verification code: ${w}`,startByte:m+h,endByte:m+h+3,value:(0,a.bytesToHex)(d.slice(h,h+4))}),h+=4;const T=d[h];p!=null&&p.includeSegments&&g.push({name:"Flags",description:`Application-defined control flags: 0x${T.toString(16).padStart(2,"0")} (${T.toString(2).padStart(8,"0")}b)`,startByte:m+h,endByte:m+h,value:T.toString(16).padStart(2,"0").toUpperCase()}),h+=1;const F=[],k=h;for(;h<d.length;)F.push((0,a.byteToHex)(d[h])),h++;if(p!=null&&p.includeSegments&&F.length>0){const B=F.join(" ");g.push({name:"Path Hashes",description:`Node hashes in trace path: ${B}`,startByte:m+k,endByte:m+d.length-1,value:(0,a.bytesToHex)(d.slice(k))})}let E;f&&f.length>0&&(E=f.map(B=>{const S=parseInt(B,16);return(S>127?S-256:S)/4}));const D={type:r.PayloadType.Trace,version:r.PayloadVersion.Version1,isValid:!0,traceTag:y,authCode:w,flags:T,pathHashes:F,snrValues:E};return p!=null&&p.includeSegments&&(D.segments=g),D}catch(h){return{type:r.PayloadType.Trace,version:r.PayloadVersion.Version1,isValid:!1,errors:[h instanceof Error?h.message:"Failed to decode trace payload"],traceTag:"00000000",authCode:0,flags:0,pathHashes:[]}}}static readUint32LE(d,f){return d[f]|d[f+1]<<8|d[f+2]<<16|d[f+3]<<24}}return $a.TracePayloadDecoder=o,$a}var Ya={},mg;function QC(){if(mg)return Ya;mg=1,Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.GroupTextPayloadDecoder=void 0;const r=sr(),a=F0(),o=vn();class l{static decode(f,p){try{if(f.length<3){const F={type:r.PayloadType.GroupText,version:r.PayloadVersion.Version1,isValid:!1,errors:["GroupText payload too short (need at least channel_hash(1) + MAC(2))"],channelHash:"",cipherMac:"",ciphertext:"",ciphertextLength:0};return p!=null&&p.includeSegments&&(F.segments=[{name:"Invalid GroupText Data",description:"GroupText payload too short (minimum 3 bytes required)",startByte:p.segmentOffset||0,endByte:(p.segmentOffset||0)+f.length-1,value:(0,o.bytesToHex)(f)}]),F}const h=[],g=(p==null?void 0:p.segmentOffset)||0;let m=0;const v=(0,o.byteToHex)(f[m]);p!=null&&p.includeSegments&&h.push({name:"Channel Hash",description:"First byte of SHA256 of channel's shared key",startByte:g+m,endByte:g+m,value:v}),m+=1;const y=(0,o.bytesToHex)(f.subarray(m,m+2));p!=null&&p.includeSegments&&h.push({name:"Cipher MAC",description:"MAC for encrypted data",startByte:g+m,endByte:g+m+1,value:y}),m+=2;const w=(0,o.bytesToHex)(f.subarray(m));p!=null&&p.includeSegments&&f.length>m&&h.push({name:"Ciphertext",description:"Encrypted message content (timestamp + flags + message)",startByte:g+m,endByte:g+f.length-1,value:w});const T={type:r.PayloadType.GroupText,version:r.PayloadVersion.Version1,isValid:!0,channelHash:v,cipherMac:y,ciphertext:w,ciphertextLength:f.length-3};if(p!=null&&p.keyStore&&p.keyStore.hasChannelKey(v)){const F=p.keyStore.getChannelKeys(v);for(const k of F){const E=a.ChannelCrypto.decryptGroupTextMessage(w,y,k);if(E.success&&E.data){T.decrypted={timestamp:E.data.timestamp,flags:E.data.flags,sender:E.data.sender,message:E.data.message};break}}}return p!=null&&p.includeSegments&&(T.segments=h),T}catch(h){return{type:r.PayloadType.GroupText,version:r.PayloadVersion.Version1,isValid:!1,errors:[h instanceof Error?h.message:"Failed to decode GroupText payload"],channelHash:"",cipherMac:"",ciphertext:"",ciphertextLength:0}}}}return Ya.GroupTextPayloadDecoder=l,Ya}var Xa={},gg;function $C(){if(gg)return Xa;gg=1,Object.defineProperty(Xa,"__esModule",{value:!0}),Xa.RequestPayloadDecoder=void 0;const r=sr(),a=vn();class o{static decode(d,f){try{if(d.length<4){const F={type:r.PayloadType.Request,version:r.PayloadVersion.Version1,isValid:!1,errors:["Request payload too short (minimum 4 bytes: dest hash + source hash + MAC)"],timestamp:0,requestType:r.RequestType.GetStats,requestData:"",destinationHash:"",sourceHash:"",cipherMac:"",ciphertext:""};return f!=null&&f.includeSegments&&(F.segments=[{name:"Invalid Request Data",description:"Request payload too short (minimum 4 bytes required: 1 for dest hash + 1 for source hash + 2 for MAC)",startByte:f.segmentOffset||0,endByte:(f.segmentOffset||0)+d.length-1,value:(0,a.bytesToHex)(d)}]),F}const p=[],h=(f==null?void 0:f.segmentOffset)||0;let g=0;const m=(0,a.bytesToHex)(d.subarray(g,g+1));f!=null&&f.includeSegments&&p.push({name:"Destination Hash",description:`First byte of destination node public key: 0x${m}`,startByte:h+g,endByte:h+g,value:m}),g+=1;const v=(0,a.bytesToHex)(d.subarray(g,g+1));f!=null&&f.includeSegments&&p.push({name:"Source Hash",description:`First byte of source node public key: 0x${v}`,startByte:h+g,endByte:h+g,value:v}),g+=1;const y=(0,a.bytesToHex)(d.subarray(g,g+2));f!=null&&f.includeSegments&&p.push({name:"Cipher MAC",description:"MAC for encrypted data verification (2 bytes)",startByte:h+g,endByte:h+g+1,value:y}),g+=2;const w=(0,a.bytesToHex)(d.subarray(g));f!=null&&f.includeSegments&&d.length>g&&p.push({name:"Ciphertext",description:`Encrypted message data (${d.length-g} bytes). Contains encrypted plaintext with this structure:
 Timestamp (4 bytes) - send time as unix timestamp
 Request Type (1 byte) - type of request (GetStats, GetTelemetryData, etc.)
 Request Data (remaining bytes) - additional request-specific data`,startByte:h+g,endByte:h+d.length-1,value:w});const T={type:r.PayloadType.Request,version:r.PayloadVersion.Version1,isValid:!0,timestamp:0,requestType:r.RequestType.GetStats,requestData:"",destinationHash:m,sourceHash:v,cipherMac:y,ciphertext:w};return f!=null&&f.includeSegments&&(T.segments=p),T}catch(p){return{type:r.PayloadType.Request,version:r.PayloadVersion.Version1,isValid:!1,errors:[p instanceof Error?p.message:"Failed to decode request payload"],timestamp:0,requestType:r.RequestType.GetStats,requestData:"",destinationHash:"",sourceHash:"",cipherMac:"",ciphertext:""}}}}return Xa.RequestPayloadDecoder=o,Xa}var Ja={},Ag;function YC(){if(Ag)return Ja;Ag=1,Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.ResponsePayloadDecoder=void 0;const r=sr(),a=vn();class o{static decode(d,f){try{if(d.length<4){const F={type:r.PayloadType.Response,version:r.PayloadVersion.Version1,isValid:!1,errors:["Response payload too short (minimum 4 bytes: dest + source + MAC)"],destinationHash:"",sourceHash:"",cipherMac:"",ciphertext:"",ciphertextLength:0};return f!=null&&f.includeSegments&&(F.segments=[{name:"Invalid Response Data",description:"Response payload too short (minimum 4 bytes required)",startByte:f.segmentOffset||0,endByte:(f.segmentOffset||0)+d.length-1,value:(0,a.bytesToHex)(d)}]),F}const p=[],h=(f==null?void 0:f.segmentOffset)||0;let g=0;const m=(0,a.byteToHex)(d[g]);f!=null&&f.includeSegments&&p.push({name:"Destination Hash",description:"First byte of destination node public key",startByte:h+g,endByte:h+g,value:m}),g+=1;const v=(0,a.byteToHex)(d[g]);f!=null&&f.includeSegments&&p.push({name:"Source Hash",description:"First byte of source node public key",startByte:h+g,endByte:h+g,value:v}),g+=1;const y=(0,a.bytesToHex)(d.subarray(g,g+2));f!=null&&f.includeSegments&&p.push({name:"Cipher MAC",description:"MAC for encrypted data in next field",startByte:h+g,endByte:h+g+1,value:y}),g+=2;const w=(0,a.bytesToHex)(d.subarray(g));f!=null&&f.includeSegments&&d.length>g&&p.push({name:"Ciphertext",description:"Encrypted response data (tag + content)",startByte:h+g,endByte:h+d.length-1,value:w});const T={type:r.PayloadType.Response,version:r.PayloadVersion.Version1,isValid:!0,destinationHash:m,sourceHash:v,cipherMac:y,ciphertext:w,ciphertextLength:d.length-4};return f!=null&&f.includeSegments&&(T.segments=p),T}catch(p){return{type:r.PayloadType.Response,version:r.PayloadVersion.Version1,isValid:!1,errors:[p instanceof Error?p.message:"Failed to decode response payload"],destinationHash:"",sourceHash:"",cipherMac:"",ciphertext:"",ciphertextLength:0}}}}return Ja.ResponsePayloadDecoder=o,Ja}var el={},xg;function XC(){if(xg)return el;xg=1,Object.defineProperty(el,"__esModule",{value:!0}),el.AnonRequestPayloadDecoder=void 0;const r=sr(),a=vn();class o{static decode(d,f){try{if(d.length<35){const F={type:r.PayloadType.AnonRequest,version:r.PayloadVersion.Version1,isValid:!1,errors:["AnonRequest payload too short (minimum 35 bytes: dest + public key + MAC)"],destinationHash:"",senderPublicKey:"",cipherMac:"",ciphertext:"",ciphertextLength:0};return f!=null&&f.includeSegments&&(F.segments=[{name:"Invalid AnonRequest Data",description:"AnonRequest payload too short (minimum 35 bytes required: 1 for dest hash + 32 for public key + 2 for MAC)",startByte:f.segmentOffset||0,endByte:(f.segmentOffset||0)+d.length-1,value:(0,a.bytesToHex)(d)}]),F}const p=[],h=(f==null?void 0:f.segmentOffset)||0;let g=0;const m=(0,a.byteToHex)(d[0]);f!=null&&f.includeSegments&&p.push({name:"Destination Hash",description:`First byte of destination node public key: 0x${m}`,startByte:h+g,endByte:h+g,value:m}),g+=1;const v=(0,a.bytesToHex)(d.subarray(1,33));f!=null&&f.includeSegments&&p.push({name:"Sender Public Key",description:"Ed25519 public key of the sender (32 bytes)",startByte:h+g,endByte:h+g+31,value:v}),g+=32;const y=(0,a.bytesToHex)(d.subarray(33,35));f!=null&&f.includeSegments&&p.push({name:"Cipher MAC",description:"MAC for encrypted data verification (2 bytes)",startByte:h+g,endByte:h+g+1,value:y}),g+=2;const w=(0,a.bytesToHex)(d.subarray(35));f!=null&&f.includeSegments&&d.length>35&&p.push({name:"Ciphertext",description:`Encrypted message data (${d.length-35} bytes). Contains encrypted plaintext with this structure:
 Timestamp (4 bytes) - send time as unix timestamp
 Sync Timestamp (4 bytes) - room server only, sender's "sync messages SINCE x" timestamp  
 Password (remaining bytes) - password for repeater/room`,startByte:h+g,endByte:h+d.length-1,value:w});const T={type:r.PayloadType.AnonRequest,version:r.PayloadVersion.Version1,isValid:!0,destinationHash:m,senderPublicKey:v,cipherMac:y,ciphertext:w,ciphertextLength:d.length-35};return f!=null&&f.includeSegments&&(T.segments=p),T}catch(p){return{type:r.PayloadType.AnonRequest,version:r.PayloadVersion.Version1,isValid:!1,errors:[p instanceof Error?p.message:"Failed to decode AnonRequest payload"],destinationHash:"",senderPublicKey:"",cipherMac:"",ciphertext:"",ciphertextLength:0}}}}return el.AnonRequestPayloadDecoder=o,el}var tl={},vg;function JC(){if(vg)return tl;vg=1,Object.defineProperty(tl,"__esModule",{value:!0}),tl.AckPayloadDecoder=void 0;const r=sr(),a=vn();class o{static decode(d,f){try{if(d.length<4){const v={type:r.PayloadType.Ack,version:r.PayloadVersion.Version1,isValid:!1,errors:["Ack payload too short (minimum 4 bytes for checksum)"],checksum:""};return f!=null&&f.includeSegments&&(v.segments=[{name:"Invalid Ack Data",description:"Ack payload too short (minimum 4 bytes required for checksum)",startByte:f.segmentOffset||0,endByte:(f.segmentOffset||0)+d.length-1,value:(0,a.bytesToHex)(d)}]),v}const p=[],h=(f==null?void 0:f.segmentOffset)||0,g=(0,a.bytesToHex)(d.subarray(0,4));f!=null&&f.includeSegments&&p.push({name:"Checksum",description:`CRC checksum of message timestamp, text, and sender pubkey: 0x${g}`,startByte:h,endByte:h+3,value:g}),f!=null&&f.includeSegments&&d.length>4&&p.push({name:"Additional Data",description:"Extra data in Ack payload",startByte:h+4,endByte:h+d.length-1,value:(0,a.bytesToHex)(d.subarray(4))});const m={type:r.PayloadType.Ack,version:r.PayloadVersion.Version1,isValid:!0,checksum:g};return f!=null&&f.includeSegments&&(m.segments=p),m}catch(p){return{type:r.PayloadType.Ack,version:r.PayloadVersion.Version1,isValid:!1,errors:[p instanceof Error?p.message:"Failed to decode Ack payload"],checksum:""}}}}return tl.AckPayloadDecoder=o,tl}var nl={},yg;function eE(){if(yg)return nl;yg=1,Object.defineProperty(nl,"__esModule",{value:!0}),nl.PathPayloadDecoder=void 0;const r=sr(),a=vn();class o{static decode(d){try{if(d.length<2)return{type:r.PayloadType.Path,version:r.PayloadVersion.Version1,isValid:!1,errors:["Path payload too short (minimum 2 bytes: path length + extra type)"],pathLength:0,pathHashes:[],extraType:0,extraData:""};const f=d[0];if(d.length<1+f+1)return{type:r.PayloadType.Path,version:r.PayloadVersion.Version1,isValid:!1,errors:[`Path payload too short (need ${1+f+1} bytes for path length + path + extra type)`],pathLength:f,pathHashes:[],extraType:0,extraData:""};const p=[];for(let m=0;m<f;m++)p.push((0,a.byteToHex)(d[1+m]));const h=d[1+f];let g="";return d.length>1+f+1&&(g=(0,a.bytesToHex)(d.subarray(1+f+1))),{type:r.PayloadType.Path,version:r.PayloadVersion.Version1,isValid:!0,pathLength:f,pathHashes:p,extraType:h,extraData:g}}catch(f){return{type:r.PayloadType.Path,version:r.PayloadVersion.Version1,isValid:!1,errors:[f instanceof Error?f.message:"Failed to decode Path payload"],pathLength:0,pathHashes:[],extraType:0,extraData:""}}}}return nl.PathPayloadDecoder=o,nl}var rl={},_g;function tE(){if(_g)return rl;_g=1,Object.defineProperty(rl,"__esModule",{value:!0}),rl.TextMessagePayloadDecoder=void 0;const r=sr(),a=vn();class o{static decode(d,f){try{if(d.length<4){const F={type:r.PayloadType.TextMessage,version:r.PayloadVersion.Version1,isValid:!1,errors:["TextMessage payload too short (minimum 4 bytes: dest + source + MAC)"],destinationHash:"",sourceHash:"",cipherMac:"",ciphertext:"",ciphertextLength:0};return f!=null&&f.includeSegments&&(F.segments=[{name:"Invalid TextMessage Data",description:"TextMessage payload too short (minimum 4 bytes required)",startByte:f.segmentOffset||0,endByte:(f.segmentOffset||0)+d.length-1,value:(0,a.bytesToHex)(d)}]),F}const p=[],h=(f==null?void 0:f.segmentOffset)||0;let g=0;const m=(0,a.byteToHex)(d[g]);f!=null&&f.includeSegments&&p.push({name:"Destination Hash",description:"First byte of destination node public key",startByte:h+g,endByte:h+g,value:m}),g+=1;const v=(0,a.byteToHex)(d[g]);f!=null&&f.includeSegments&&p.push({name:"Source Hash",description:"First byte of source node public key",startByte:h+g,endByte:h+g,value:v}),g+=1;const y=(0,a.bytesToHex)(d.subarray(g,g+2));f!=null&&f.includeSegments&&p.push({name:"Cipher MAC",description:"MAC for encrypted data in next field",startByte:h+g,endByte:h+g+1,value:y}),g+=2;const w=(0,a.bytesToHex)(d.subarray(g));f!=null&&f.includeSegments&&d.length>g&&p.push({name:"Ciphertext",description:"Encrypted message data (timestamp + message text)",startByte:h+g,endByte:h+d.length-1,value:w});const T={type:r.PayloadType.TextMessage,version:r.PayloadVersion.Version1,isValid:!0,destinationHash:m,sourceHash:v,cipherMac:y,ciphertext:w,ciphertextLength:d.length-4};return f!=null&&f.includeSegments&&(T.segments=p),T}catch(p){return{type:r.PayloadType.TextMessage,version:r.PayloadVersion.Version1,isValid:!1,errors:[p instanceof Error?p.message:"Failed to decode TextMessage payload"],destinationHash:"",sourceHash:"",cipherMac:"",ciphertext:"",ciphertextLength:0}}}}return rl.TextMessagePayloadDecoder=o,rl}var il={},wg;function nE(){if(wg)return il;wg=1,Object.defineProperty(il,"__esModule",{value:!0}),il.ControlPayloadDecoder=void 0;const r=sr(),a=vn(),o=ll();class l{static decode(f,p){try{if(f.length<1)return this.createErrorPayload("Control payload too short (minimum 1 byte required)",f,p);const g=f[0]&240;switch(g){case r.ControlSubType.NodeDiscoverReq:return this.decodeDiscoverReq(f,p);case r.ControlSubType.NodeDiscoverResp:return this.decodeDiscoverResp(f,p);default:return this.createErrorPayload(`Unknown control sub-type: 0x${g.toString(16).padStart(2,"0")}`,f,p)}}catch(h){return this.createErrorPayload(h instanceof Error?h.message:"Failed to decode control payload",f,p)}}static decodeDiscoverReq(f,p){const h=[],g=(p==null?void 0:p.segmentOffset)??0;if(f.length<6){const D={type:r.PayloadType.Control,version:r.PayloadVersion.Version1,isValid:!1,errors:["DISCOVER_REQ payload too short (minimum 6 bytes required)"],subType:r.ControlSubType.NodeDiscoverReq,rawFlags:f[0],prefixOnly:!1,typeFilter:0,typeFilterNames:[],tag:0,since:0};return p!=null&&p.includeSegments&&(D.segments=[{name:"Invalid DISCOVER_REQ Data",description:"DISCOVER_REQ payload too short (minimum 6 bytes required)",startByte:g,endByte:g+f.length-1,value:(0,a.bytesToHex)(f)}]),D}let m=0;const v=f[m],y=(v&1)!==0;p!=null&&p.includeSegments&&h.push({name:"Flags",description:`Sub-type: DISCOVER_REQ (0x8) | Prefix Only: ${y}`,startByte:g+m,endByte:g+m,value:v.toString(16).padStart(2,"0").toUpperCase()}),m+=1;const w=f[m],T=this.parseTypeFilter(w);p!=null&&p.includeSegments&&h.push({name:"Type Filter",description:`Filter mask: 0b${w.toString(2).padStart(8,"0")} | Types: ${T.length>0?T.join(", "):"None"}`,startByte:g+m,endByte:g+m,value:w.toString(16).padStart(2,"0").toUpperCase()}),m+=1;const F=this.readUint32LE(f,m);p!=null&&p.includeSegments&&h.push({name:"Tag",description:`Random tag for response matching: 0x${F.toString(16).padStart(8,"0")}`,startByte:g+m,endByte:g+m+3,value:(0,a.bytesToHex)(f.slice(m,m+4))}),m+=4;let k=0;if(f.length>=m+4&&(k=this.readUint32LE(f,m),p!=null&&p.includeSegments)){const D=k>0?new Date(k*1e3).toISOString().slice(0,19)+"Z":"N/A";h.push({name:"Since",description:`Filter timestamp: ${k} (${D})`,startByte:g+m,endByte:g+m+3,value:(0,a.bytesToHex)(f.slice(m,m+4))})}const E={type:r.PayloadType.Control,version:r.PayloadVersion.Version1,isValid:!0,subType:r.ControlSubType.NodeDiscoverReq,rawFlags:v,prefixOnly:y,typeFilter:w,typeFilterNames:T,tag:F,since:k};return p!=null&&p.includeSegments&&(E.segments=h),E}static decodeDiscoverResp(f,p){const h=[],g=(p==null?void 0:p.segmentOffset)??0;if(f.length<14){const z={type:r.PayloadType.Control,version:r.PayloadVersion.Version1,isValid:!1,errors:["DISCOVER_RESP payload too short (minimum 14 bytes required)"],subType:r.ControlSubType.NodeDiscoverResp,rawFlags:f.length>0?f[0]:0,nodeType:r.DeviceRole.Unknown,nodeTypeName:"Unknown",snr:0,tag:0,publicKey:"",publicKeyLength:0};return p!=null&&p.includeSegments&&(z.segments=[{name:"Invalid DISCOVER_RESP Data",description:"DISCOVER_RESP payload too short (minimum 14 bytes required)",startByte:g,endByte:g+f.length-1,value:(0,a.bytesToHex)(f)}]),z}let m=0;const v=f[m],y=v&15,w=(0,o.getDeviceRoleName)(y);p!=null&&p.includeSegments&&h.push({name:"Flags",description:`Sub-type: DISCOVER_RESP (0x9) | Node Type: ${w}`,startByte:g+m,endByte:g+m,value:v.toString(16).padStart(2,"0").toUpperCase()}),m+=1;const T=f[m],F=T>127?T-256:T,k=F/4;p!=null&&p.includeSegments&&h.push({name:"SNR",description:`Inbound SNR: ${k.toFixed(2)} dB (raw: ${T}, signed: ${F})`,startByte:g+m,endByte:g+m,value:T.toString(16).padStart(2,"0").toUpperCase()}),m+=1;const E=this.readUint32LE(f,m);p!=null&&p.includeSegments&&h.push({name:"Tag",description:`Reflected tag from request: 0x${E.toString(16).padStart(8,"0")}`,startByte:g+m,endByte:g+m+3,value:(0,a.bytesToHex)(f.slice(m,m+4))}),m+=4;const B=f.length-m,S=f.slice(m,m+B),N=(0,a.bytesToHex)(S);if(p!=null&&p.includeSegments){const z=B===32?"Full Public Key":"Public Key Prefix";h.push({name:z,description:`${z} (${B} bytes)`,startByte:g+m,endByte:g+m+B-1,value:N})}const M={type:r.PayloadType.Control,version:r.PayloadVersion.Version1,isValid:!0,subType:r.ControlSubType.NodeDiscoverResp,rawFlags:v,nodeType:y,nodeTypeName:w,snr:k,tag:E,publicKey:N,publicKeyLength:B};return p!=null&&p.includeSegments&&(M.segments=h),M}static parseTypeFilter(f){const p=[];return f&1<<r.DeviceRole.ChatNode&&p.push("Chat"),f&1<<r.DeviceRole.Repeater&&p.push("Repeater"),f&1<<r.DeviceRole.RoomServer&&p.push("Room"),f&1<<r.DeviceRole.Sensor&&p.push("Sensor"),p}static createErrorPayload(f,p,h){const g={type:r.PayloadType.Control,version:r.PayloadVersion.Version1,isValid:!1,errors:[f],subType:r.ControlSubType.NodeDiscoverReq,rawFlags:p.length>0?p[0]:0,prefixOnly:!1,typeFilter:0,typeFilterNames:[],tag:0,since:0};return h!=null&&h.includeSegments&&(g.segments=[{name:"Invalid Control Data",description:f,startByte:h.segmentOffset??0,endByte:(h.segmentOffset??0)+p.length-1,value:(0,a.bytesToHex)(p)}]),g}static readUint32LE(f,p){return(f[p]|f[p+1]<<8|f[p+2]<<16|f[p+3]<<24)>>>0}}return il.ControlPayloadDecoder=l,il}var bg;function Cg(){if(bg)return qa;bg=1,Object.defineProperty(qa,"__esModule",{value:!0}),qa.MeshCorePacketDecoder=void 0;const r=sr(),a=vn(),o=ll(),l=kx(),d=GC(),f=KC(),p=QC(),h=$C(),g=YC(),m=XC(),v=JC(),y=eE(),w=tE(),T=nE();class F{static decode(E,D){return this.parseInternal(E,!1,D).packet}static async decodeWithVerification(E,D){return(await this.parseInternalAsync(E,!1,D)).packet}static analyzeStructure(E,D){return this.parseInternal(E,!0,D).structure}static async analyzeStructureWithVerification(E,D){return(await this.parseInternalAsync(E,!0,D)).structure}static parseInternal(E,D,B){const S=(0,a.hexToBytes)(E),N=[];if(S.length<2){const M={messageHash:"",routeType:r.RouteType.Flood,payloadType:r.PayloadType.RawCustom,payloadVersion:r.PayloadVersion.Version1,pathLength:0,path:null,payload:{raw:"",decoded:null},totalBytes:S.length,isValid:!1,errors:["Packet too short (minimum 2 bytes required)"]},z={segments:[],totalBytes:S.length,rawHex:E.toUpperCase(),messageHash:"",payload:{segments:[],hex:"",startByte:0,type:"Unknown"}};return{packet:M,structure:z}}try{let M=0;const z=S[0],H=z&3,j=z>>2&15,J=z>>6&3;D&&N.push({name:"Header",description:"Header byte breakdown",startByte:0,endByte:0,value:`0x${z.toString(16).padStart(2,"0")}`,headerBreakdown:{fullBinary:z.toString(2).padStart(8,"0"),fields:[{bits:"0-1",field:"Route Type",value:(0,o.getRouteTypeName)(H),binary:(z&3).toString(2).padStart(2,"0")},{bits:"2-5",field:"Payload Type",value:(0,o.getPayloadTypeName)(j),binary:(z>>2&15).toString(2).padStart(4,"0")},{bits:"6-7",field:"Version",value:J.toString(),binary:(z>>6&3).toString(2).padStart(2,"0")}]}}),M=1;let W;if(H===r.RouteType.TransportFlood||H===r.RouteType.TransportDirect){if(S.length<M+4)throw new Error("Packet too short for transport codes");const P=S[M]|S[M+1]<<8,V=S[M+2]|S[M+3]<<8;if(W=[P,V],D){const K=S[M]|S[M+1]<<8|S[M+2]<<16|S[M+3]<<24;N.push({name:"Transport Code",description:"Used for Direct/Response routing",startByte:M,endByte:M+3,value:`0x${K.toString(16).padStart(8,"0")}`})}M+=4}if(S.length<M+1)throw new Error("Packet too short for path length");const U=S[M];if(D){let P=`Path contains ${U} bytes`;H===r.RouteType.Direct||H===r.RouteType.TransportDirect?P=`For "Direct" packets, this contains routing instructions. ${U} bytes of routing instructions (decreases as packet travels)`:(H===r.RouteType.Flood||H===r.RouteType.TransportFlood)&&(P=`${U} bytes showing route taken (increases as packet floods)`),N.push({name:"Path Length",description:P,startByte:M,endByte:M,value:`0x${U.toString(16).padStart(2,"0")}`})}if(M+=1,S.length<M+U)throw new Error("Packet too short for path data");const ne=S.subarray(M,M+U),Y=U>0?Array.from(ne).map(a.byteToHex):null;if(D&&U>0)if(j===r.PayloadType.Trace){const P=[];for(let V=0;V<U;V++){const K=S[M+V],ce=(K>127?K-256:K)/4;P.push(`${ce.toFixed(2)}dB (0x${K.toString(16).padStart(2,"0")})`)}N.push({name:"Path SNR Data",description:`SNR values collected during trace: ${P.join(", ")}`,startByte:M,endByte:M+U-1,value:(0,a.bytesToHex)(S.slice(M,M+U))})}else{let P="Routing path information";H===r.RouteType.Direct||H===r.RouteType.TransportDirect?P="Routing instructions (bytes are stripped at each hop as packet travels to destination)":(H===r.RouteType.Flood||H===r.RouteType.TransportFlood)&&(P="Historical route taken (bytes are added as packet floods through network)"),N.push({name:"Path Data",description:P,startByte:M,endByte:M+U-1,value:(0,a.bytesToHex)(S.slice(M,M+U))})}M+=U;const re=S.subarray(M),fe=(0,a.bytesToHex)(re);D&&S.length>M&&N.push({name:"Payload",description:`${(0,o.getPayloadTypeName)(j)} payload data`,startByte:M,endByte:S.length-1,value:(0,a.bytesToHex)(S.slice(M))});let ae=null;const he=[];if(j===r.PayloadType.Advert){const P=d.AdvertPayloadDecoder.decode(re,{includeSegments:D,segmentOffset:0});ae=P,P!=null&&P.segments&&(he.push(...P.segments),delete P.segments)}else if(j===r.PayloadType.Trace){const P=f.TracePayloadDecoder.decode(re,Y,{includeSegments:D,segmentOffset:0});ae=P,P!=null&&P.segments&&(he.push(...P.segments),delete P.segments)}else if(j===r.PayloadType.GroupText){const P=p.GroupTextPayloadDecoder.decode(re,{...B,includeSegments:D,segmentOffset:0});ae=P,P!=null&&P.segments&&(he.push(...P.segments),delete P.segments)}else if(j===r.PayloadType.Request){const P=h.RequestPayloadDecoder.decode(re,{includeSegments:D,segmentOffset:0});ae=P,P!=null&&P.segments&&(he.push(...P.segments),delete P.segments)}else if(j===r.PayloadType.Response){const P=g.ResponsePayloadDecoder.decode(re,{includeSegments:D,segmentOffset:0});ae=P,P!=null&&P.segments&&(he.push(...P.segments),delete P.segments)}else if(j===r.PayloadType.AnonRequest){const P=m.AnonRequestPayloadDecoder.decode(re,{includeSegments:D,segmentOffset:0});ae=P,P!=null&&P.segments&&(he.push(...P.segments),delete P.segments)}else if(j===r.PayloadType.Ack){const P=v.AckPayloadDecoder.decode(re,{includeSegments:D,segmentOffset:0});ae=P,P!=null&&P.segments&&(he.push(...P.segments),delete P.segments)}else if(j===r.PayloadType.Path)ae=y.PathPayloadDecoder.decode(re);else if(j===r.PayloadType.TextMessage){const P=w.TextMessagePayloadDecoder.decode(re,{includeSegments:D,segmentOffset:0});ae=P,P!=null&&P.segments&&(he.push(...P.segments),delete P.segments)}else if(j===r.PayloadType.Control){const P=T.ControlPayloadDecoder.decode(re,{includeSegments:D,segmentOffset:0});ae=P,P!=null&&P.segments&&(he.push(...P.segments),delete P.segments)}D&&he.length===0&&S.length>M&&he.push({name:`${(0,o.getPayloadTypeName)(j)} Payload`,description:`Raw ${(0,o.getPayloadTypeName)(j)} payload data (${re.length} bytes)`,startByte:0,endByte:re.length-1,value:(0,a.bytesToHex)(re)});const G=this.calculateMessageHash(S,H,j,J),pe={messageHash:G,routeType:H,payloadType:j,payloadVersion:J,transportCodes:W,pathLength:U,path:Y,payload:{raw:fe,decoded:ae},totalBytes:S.length,isValid:!0},Z={segments:N,totalBytes:S.length,rawHex:E.toUpperCase(),messageHash:G,payload:{segments:he,hex:fe,startByte:M,type:(0,o.getPayloadTypeName)(j)}};return{packet:pe,structure:Z}}catch(M){const z={messageHash:"",routeType:r.RouteType.Flood,payloadType:r.PayloadType.RawCustom,payloadVersion:r.PayloadVersion.Version1,pathLength:0,path:null,payload:{raw:"",decoded:null},totalBytes:S.length,isValid:!1,errors:[M instanceof Error?M.message:"Unknown decoding error"]},H={segments:[],totalBytes:S.length,rawHex:E.toUpperCase(),messageHash:"",payload:{segments:[],hex:"",startByte:0,type:"Unknown"}};return{packet:z,structure:H}}}static async parseInternalAsync(E,D,B){const S=this.parseInternal(E,D,B);if(S.packet.payloadType===r.PayloadType.Advert&&S.packet.payload.decoded)try{const N=S.packet.payload.decoded,M=await d.AdvertPayloadDecoder.decodeWithVerification((0,a.hexToBytes)(S.packet.payload.raw),{includeSegments:D,segmentOffset:0});M&&(S.packet.payload.decoded=M,M.isValid||(S.packet.isValid=!1,S.packet.errors=M.errors||["Invalid advertisement signature"]),D&&M.segments&&(S.structure.payload.segments=M.segments,delete M.segments))}catch(N){console.error("Signature verification failed:",N)}return S}static validate(E){const D=(0,a.hexToBytes)(E),B=[];if(D.length<2)return B.push("Packet too short (minimum 2 bytes required)"),{isValid:!1,errors:B};try{let S=1;const M=D[0]&3;if((M===r.RouteType.TransportFlood||M===r.RouteType.TransportDirect)&&(D.length<S+4&&B.push("Packet too short for transport codes"),S+=4),D.length<S+1)B.push("Packet too short for path length");else{const z=D[S];S+=1,D.length<S+z&&B.push("Packet too short for path data"),S+=z}S>=D.length&&B.push("No payload data found")}catch(S){B.push(S instanceof Error?S.message:"Validation error")}return{isValid:B.length===0,errors:B.length>0?B:void 0}}static calculateMessageHash(E,D,B,S){if(B===r.PayloadType.Trace&&E.length>=13){let J=1;if((D===r.RouteType.TransportFlood||D===r.RouteType.TransportDirect)&&(J+=4),E.length>J){const W=E[J];J+=1+W}if(E.length>=J+4){const W=E[J]|E[J+1]<<8|E[J+2]<<16|E[J+3]<<24;return(0,a.numberToHex)(W,8)}}const N=B<<2|S<<6;let M=1;if((D===r.RouteType.TransportFlood||D===r.RouteType.TransportDirect)&&(M+=4),E.length>M){const J=E[M];M+=1+J}const z=E.slice(M),H=[N,...Array.from(z)];let j=0;for(let J=0;J<H.length;J++)j=(j<<5)-j+H[J]&4294967295;return(0,a.numberToHex)(j,8)}static createKeyStore(E){return new l.MeshCoreKeyStore(E)}}return qa.MeshCorePacketDecoder=F,qa}var Uo={},Eg;function kg(){if(Eg)return Uo;Eg=1,Object.defineProperty(Uo,"__esModule",{value:!0}),Uo.createAuthToken=d,Uo.verifyAuthToken=f,Uo.parseAuthToken=p,Uo.decodeAuthTokenPayload=h;const r=Z0(),a=vn();function o(g){let m="";if(typeof Buffer<"u")m=Buffer.from(g).toString("base64");else{const v=String.fromCharCode(...Array.from(g));m=btoa(v)}return m.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function l(g){let m=g.replace(/-/g,"+").replace(/_/g,"/");for(;m.length%4;)m+="=";if(typeof Buffer<"u")return new Uint8Array(Buffer.from(m,"base64"));{const v=atob(m),y=new Uint8Array(v.length);for(let w=0;w<v.length;w++)y[w]=v.charCodeAt(w);return y}}async function d(g,m,v){const y={alg:"Ed25519",typ:"JWT"};g.publicKey?g.publicKey=g.publicKey.toUpperCase():g.publicKey=v.toUpperCase(),g.iat||(g.iat=Math.floor(Date.now()/1e3));const w=JSON.stringify(y),T=JSON.stringify(g),F=new TextEncoder().encode(w),k=new TextEncoder().encode(T),E=o(F),D=o(k),B=`${E}.${D}`,S=new TextEncoder().encode(B),N=(0,a.bytesToHex)(S),M=await(0,r.sign)(N,m,g.publicKey);return`${E}.${D}.${M}`}async function f(g,m){try{const v=g.split(".");if(v.length!==3)return null;const[y,w,T]=v,F=l(y),k=l(w),E=new TextDecoder().decode(F),D=new TextDecoder().decode(k),B=JSON.parse(E),S=JSON.parse(D);if(B.alg!=="Ed25519"||B.typ!=="JWT"||!S.publicKey||!S.iat||m&&S.publicKey.toUpperCase()!==m.toUpperCase()||S.exp&&Math.floor(Date.now()/1e3)>S.exp)return null;const N=`${y}.${w}`,M=new TextEncoder().encode(N),z=(0,a.bytesToHex)(M);return await(0,r.verify)(T,z,S.publicKey)?S:null}catch{return null}}function p(g){try{const m=g.split(".");return m.length!==3?null:{header:m[0],payload:m[1],signature:m[2]}}catch{return null}}function h(g){try{const m=g.split(".");if(m.length!==3)return null;const v=l(m[1]),y=new TextDecoder().decode(v);return JSON.parse(y)}catch{return null}}return Uo}var Sg;function rE(){return Sg||(Sg=1,(function(r){var a=wi&&wi.__createBinding||(Object.create?(function(D,B,S,N){N===void 0&&(N=S);var M=Object.getOwnPropertyDescriptor(B,S);(!M||("get"in M?!B.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return B[S]}}),Object.defineProperty(D,N,M)}):(function(D,B,S,N){N===void 0&&(N=S),D[N]=B[S]})),o=wi&&wi.__setModuleDefault||(Object.create?(function(D,B){Object.defineProperty(D,"default",{enumerable:!0,value:B})}):function(D,B){D.default=B}),l=wi&&wi.__importStar||(function(){var D=function(B){return D=Object.getOwnPropertyNames||function(S){var N=[];for(var M in S)Object.prototype.hasOwnProperty.call(S,M)&&(N[N.length]=M);return N},D(B)};return function(B){if(B&&B.__esModule)return B;var S={};if(B!=null)for(var N=D(B),M=0;M<N.length;M++)N[M]!=="default"&&a(S,B,N[M]);return o(S,B),S}})();Object.defineProperty(r,"__esModule",{value:!0}),r.Utils=r.decodeAuthTokenPayload=r.parseAuthToken=r.verifyAuthToken=r.createAuthToken=r.getControlSubTypeName=r.getRequestTypeName=r.getDeviceRoleName=r.getPayloadVersionName=r.getPayloadTypeName=r.getRouteTypeName=r.numberToHex=r.byteToHex=r.bytesToHex=r.hexToBytes=r.Ed25519SignatureVerifier=r.ChannelCrypto=r.MeshCoreKeyStore=r.ControlSubType=r.RequestType=r.AdvertFlags=r.DeviceRole=r.PayloadVersion=r.PayloadType=r.RouteType=r.MeshCoreDecoder=r.MeshCorePacketDecoder=void 0;var d=Cg();Object.defineProperty(r,"MeshCorePacketDecoder",{enumerable:!0,get:function(){return d.MeshCorePacketDecoder}});var f=Cg();Object.defineProperty(r,"MeshCoreDecoder",{enumerable:!0,get:function(){return f.MeshCorePacketDecoder}});var p=sr();Object.defineProperty(r,"RouteType",{enumerable:!0,get:function(){return p.RouteType}}),Object.defineProperty(r,"PayloadType",{enumerable:!0,get:function(){return p.PayloadType}}),Object.defineProperty(r,"PayloadVersion",{enumerable:!0,get:function(){return p.PayloadVersion}}),Object.defineProperty(r,"DeviceRole",{enumerable:!0,get:function(){return p.DeviceRole}}),Object.defineProperty(r,"AdvertFlags",{enumerable:!0,get:function(){return p.AdvertFlags}}),Object.defineProperty(r,"RequestType",{enumerable:!0,get:function(){return p.RequestType}}),Object.defineProperty(r,"ControlSubType",{enumerable:!0,get:function(){return p.ControlSubType}});var h=kx();Object.defineProperty(r,"MeshCoreKeyStore",{enumerable:!0,get:function(){return h.MeshCoreKeyStore}});var g=F0();Object.defineProperty(r,"ChannelCrypto",{enumerable:!0,get:function(){return g.ChannelCrypto}});var m=Hx();Object.defineProperty(r,"Ed25519SignatureVerifier",{enumerable:!0,get:function(){return m.Ed25519SignatureVerifier}});var v=vn();Object.defineProperty(r,"hexToBytes",{enumerable:!0,get:function(){return v.hexToBytes}}),Object.defineProperty(r,"bytesToHex",{enumerable:!0,get:function(){return v.bytesToHex}}),Object.defineProperty(r,"byteToHex",{enumerable:!0,get:function(){return v.byteToHex}}),Object.defineProperty(r,"numberToHex",{enumerable:!0,get:function(){return v.numberToHex}});var y=ll();Object.defineProperty(r,"getRouteTypeName",{enumerable:!0,get:function(){return y.getRouteTypeName}}),Object.defineProperty(r,"getPayloadTypeName",{enumerable:!0,get:function(){return y.getPayloadTypeName}}),Object.defineProperty(r,"getPayloadVersionName",{enumerable:!0,get:function(){return y.getPayloadVersionName}}),Object.defineProperty(r,"getDeviceRoleName",{enumerable:!0,get:function(){return y.getDeviceRoleName}}),Object.defineProperty(r,"getRequestTypeName",{enumerable:!0,get:function(){return y.getRequestTypeName}}),Object.defineProperty(r,"getControlSubTypeName",{enumerable:!0,get:function(){return y.getControlSubTypeName}});var w=kg();Object.defineProperty(r,"createAuthToken",{enumerable:!0,get:function(){return w.createAuthToken}}),Object.defineProperty(r,"verifyAuthToken",{enumerable:!0,get:function(){return w.verifyAuthToken}}),Object.defineProperty(r,"parseAuthToken",{enumerable:!0,get:function(){return w.parseAuthToken}}),Object.defineProperty(r,"decodeAuthTokenPayload",{enumerable:!0,get:function(){return w.decodeAuthTokenPayload}});const T=l(ll()),F=l(vn()),k=l(kg()),E=Z0();r.Utils={...T,...F,...k,derivePublicKey:E.derivePublicKey,validateKeyPair:E.validateKeyPair,sign:E.sign,verify:E.verify}})(wi)),wi}var Bg=rE(),iE=pl();const Vx=Ys(iE);var Sc={exports:{}},oE=Sc.exports,Pg;function sE(){return Pg||(Pg=1,(function(r,a){(function(o,l,d){r.exports=l(mt(),pl(),nd())})(oE,function(o){return o.HmacSHA256})})(Sc)),Sc.exports}var aE=sE();const lE=Ys(aE);var Bc={exports:{}},uE=Bc.exports,Tg;function cE(){return Tg||(Tg=1,(function(r,a){(function(o,l){r.exports=l(mt())})(uE,function(o){return o.enc.Hex})})(Bc)),Bc.exports}var dE=cE();const Gs=Ys(dE),Ux="abcdefghijklmnopqrstuvwxyz0123456789",Zo=Ux.length,Zx=Ux+"-",u0="[[public room]]",Pc="8b3387e9c5cdea6ac9e5edbaa115cd72",c0=720*60*60;function fE(r){if(!r||r.length===0)return null;const a=r.length;let o=0,l=1;for(let d=0;d<a;d++){const f=r[d],p=Zx.indexOf(f);if(p===-1)return null;const h=d===0,g=d===a-1,m=h||g?36:37;if((h||g)&&p===36)return null;o+=p*l,l*=m}return{length:a,index:o}}function Go(r,a){if(r<=0)return null;let o="",l=a,d=!1;for(let f=0;f<r;f++){const p=f===0,h=f===r-1,g=p||h?36:37,m=l%g;l=Math.floor(l/g);const v=m===36;if(v&&d)return null;d=v,o+=Zx[m]}return o}function d0(r){return r===u0?Pc:Vx(r).toString(Gs).substring(0,32)}function f0(r){return Vx(Gs.parse(r)).toString(Gs).substring(0,2)}function Wx(r,a,o){const l=o.padEnd(64,"0");return lE(Gs.parse(r),Gs.parse(l)).toString(Gs).substring(0,4).toLowerCase()===a.toLowerCase()}function sl(r){if(r===1)return Zo;if(r===2)return Zo*Zo;let a=Zo,o=1;for(let d=2;d<=r-2;d++){const f=(a+o)*Zo,p=a;a=f,o=p}const l=r>2?a+o:1;return Zo*l*Zo}function hE(r,a=c0,o){const l=Math.floor(Date.now()/1e3);return r<=l&&r>=l-a}function pE(r){return!r.includes("")}class id{constructor(){this.device=null,this.pipeline=null,this.bindGroupLayout=null,this.paramsBuffer=null,this.matchCountBuffer=null,this.matchIndicesBuffer=null,this.ciphertextBuffer=null,this.ciphertextBufferSize=0,this.matchCountReadBuffers=[null,null],this.matchIndicesReadBuffers=[null,null],this.currentReadBufferIndex=0,this.bindGroup=null,this.bindGroupDirty=!0,this.shaderCode=`
// SHA256 round constants
const K: array<u32, 64> = array<u32, 64>(
  0x428a2f98u, 0x71374491u, 0xb5c0fbcfu, 0xe9b5dba5u, 0x3956c25bu, 0x59f111f1u, 0x923f82a4u, 0xab1c5ed5u,
  0xd807aa98u, 0x12835b01u, 0x243185beu, 0x550c7dc3u, 0x72be5d74u, 0x80deb1feu, 0x9bdc06a7u, 0xc19bf174u,
  0xe49b69c1u, 0xefbe4786u, 0x0fc19dc6u, 0x240ca1ccu, 0x2de92c6fu, 0x4a7484aau, 0x5cb0a9dcu, 0x76f988dau,
  0x983e5152u, 0xa831c66du, 0xb00327c8u, 0xbf597fc7u, 0xc6e00bf3u, 0xd5a79147u, 0x06ca6351u, 0x14292967u,
  0x27b70a85u, 0x2e1b2138u, 0x4d2c6dfcu, 0x53380d13u, 0x650a7354u, 0x766a0abbu, 0x81c2c92eu, 0x92722c85u,
  0xa2bfe8a1u, 0xa81a664bu, 0xc24b8b70u, 0xc76c51a3u, 0xd192e819u, 0xd6990624u, 0xf40e3585u, 0x106aa070u,
  0x19a4c116u, 0x1e376c08u, 0x2748774cu, 0x34b0bcb5u, 0x391c0cb3u, 0x4ed8aa4au, 0x5b9cca4fu, 0x682e6ff3u,
  0x748f82eeu, 0x78a5636fu, 0x84c87814u, 0x8cc70208u, 0x90befffau, 0xa4506cebu, 0xbef9a3f7u, 0xc67178f2u
);

// Character lookup table (a-z = 0-25, 0-9 = 26-35, dash = 36)
const CHARS: array<u32, 37> = array<u32, 37>(
  0x61u, 0x62u, 0x63u, 0x64u, 0x65u, 0x66u, 0x67u, 0x68u, 0x69u, 0x6au, // a-j
  0x6bu, 0x6cu, 0x6du, 0x6eu, 0x6fu, 0x70u, 0x71u, 0x72u, 0x73u, 0x74u, // k-t
  0x75u, 0x76u, 0x77u, 0x78u, 0x79u, 0x7au,                             // u-z
  0x30u, 0x31u, 0x32u, 0x33u, 0x34u, 0x35u, 0x36u, 0x37u, 0x38u, 0x39u, // 0-9
  0x2du                                                                  // dash
);

struct Params {
  target_channel_hash: u32,
  batch_offset: u32,
  name_length: u32,
  batch_size: u32,
  target_mac: u32,           // First 2 bytes of target MAC (in high 16 bits)
  ciphertext_words: u32,     // Number of 32-bit words in ciphertext
  ciphertext_len_bits: u32,  // Length of ciphertext in bits
  verify_mac: u32,           // 1 to verify MAC, 0 to skip
}

@group(0) @binding(0) var<uniform> params: Params;
@group(0) @binding(1) var<storage, read_write> match_count: atomic<u32>;
@group(0) @binding(2) var<storage, read_write> match_indices: array<u32>;
@group(0) @binding(3) var<storage, read> ciphertext: array<u32>; // Ciphertext data

fn rotr(x: u32, n: u32) -> u32 {
  return (x >> n) | (x << (32u - n));
}

fn ch(x: u32, y: u32, z: u32) -> u32 {
  return (x & y) ^ (~x & z);
}

fn maj(x: u32, y: u32, z: u32) -> u32 {
  return (x & y) ^ (x & z) ^ (y & z);
}

fn sigma0(x: u32) -> u32 {
  return rotr(x, 2u) ^ rotr(x, 13u) ^ rotr(x, 22u);
}

fn sigma1(x: u32) -> u32 {
  return rotr(x, 6u) ^ rotr(x, 11u) ^ rotr(x, 25u);
}

fn gamma0(x: u32) -> u32 {
  return rotr(x, 7u) ^ rotr(x, 18u) ^ (x >> 3u);
}

fn gamma1(x: u32) -> u32 {
  return rotr(x, 17u) ^ rotr(x, 19u) ^ (x >> 10u);
}

// Convert index to room name bytes, returns the hash as a u32 for the first byte check
fn index_to_room_name(idx: u32, length: u32, msg: ptr<function, array<u32, 16>>) -> bool {
  // Message starts with '#' (0x23)
  var byte_pos = 0u;
  var word_idx = 0u;
  var current_word = 0x23000000u; // '#' in big-endian position 0
  byte_pos = 1u;

  var remaining = idx;
  var prev_was_dash = false;

  // Generate room name from index
  for (var i = 0u; i < length; i++) {
    let char_count = select(37u, 36u, i == 0u || i == length - 1u); // no dash at start/end
    var char_idx = remaining % char_count;
    remaining = remaining / char_count;

    // Check for consecutive dashes (invalid)
    let is_dash = char_idx == 36u && i > 0u && i < length - 1u;
    if (is_dash && prev_was_dash) {
      return false; // Invalid: consecutive dashes
    }
    prev_was_dash = is_dash;

    // Map char index to actual character
    let c = CHARS[char_idx];

    // Pack byte into current word (big-endian)
    let shift = (3u - byte_pos % 4u) * 8u;
    if (byte_pos % 4u == 0u && byte_pos > 0u) {
      (*msg)[word_idx] = current_word;
      word_idx = word_idx + 1u;
      current_word = 0u;
    }
    current_word = current_word | (c << shift);
    byte_pos = byte_pos + 1u;
  }

  // Add padding: 0x80 followed by zeros, then length in bits
  let msg_len_bits = (length + 1u) * 8u; // +1 for '#'

  // Add 0x80 padding byte
  let shift = (3u - byte_pos % 4u) * 8u;
  if (byte_pos % 4u == 0u) {
    (*msg)[word_idx] = current_word;
    word_idx = word_idx + 1u;
    current_word = 0x80000000u;
  } else {
    current_word = current_word | (0x80u << shift);
  }
  byte_pos = byte_pos + 1u;

  // Store current word
  if (byte_pos % 4u == 0u || word_idx < 14u) {
    (*msg)[word_idx] = current_word;
    word_idx = word_idx + 1u;
  }

  // Zero-fill until word 14
  for (var i = word_idx; i < 14u; i++) {
    (*msg)[i] = 0u;
  }

  // Length in bits (64-bit, but we only use lower 32 bits for short messages)
  (*msg)[14u] = 0u;
  (*msg)[15u] = msg_len_bits;

  return true;
}

fn sha256_block(msg: ptr<function, array<u32, 16>>) -> array<u32, 8> {
  // Initialize hash values
  var h: array<u32, 8> = array<u32, 8>(
    0x6a09e667u, 0xbb67ae85u, 0x3c6ef372u, 0xa54ff53au,
    0x510e527fu, 0x9b05688cu, 0x1f83d9abu, 0x5be0cd19u
  );

  // Message schedule
  var w: array<u32, 64>;
  for (var i = 0u; i < 16u; i++) {
    w[i] = (*msg)[i];
  }
  for (var i = 16u; i < 64u; i++) {
    w[i] = gamma1(w[i-2u]) + w[i-7u] + gamma0(w[i-15u]) + w[i-16u];
  }

  // Compression
  var a = h[0]; var b = h[1]; var c = h[2]; var d = h[3];
  var e = h[4]; var f = h[5]; var g = h[6]; var hh = h[7];

  for (var i = 0u; i < 64u; i++) {
    let t1 = hh + sigma1(e) + ch(e, f, g) + K[i] + w[i];
    let t2 = sigma0(a) + maj(a, b, c);
    hh = g; g = f; f = e; e = d + t1;
    d = c; c = b; b = a; a = t1 + t2;
  }

  h[0] = h[0] + a; h[1] = h[1] + b; h[2] = h[2] + c; h[3] = h[3] + d;
  h[4] = h[4] + e; h[5] = h[5] + f; h[6] = h[6] + g; h[7] = h[7] + hh;

  return h;
}

// Compute SHA256 of the key (16 bytes) to get channel hash
fn sha256_key(key: array<u32, 4>) -> u32 {
  var msg: array<u32, 16>;

  // Key bytes (16 bytes = 4 words)
  msg[0] = key[0];
  msg[1] = key[1];
  msg[2] = key[2];
  msg[3] = key[3];

  // Padding: 0x80 followed by zeros
  msg[4] = 0x80000000u;
  for (var i = 5u; i < 14u; i++) {
    msg[i] = 0u;
  }

  // Length: 128 bits
  msg[14] = 0u;
  msg[15] = 128u;

  let hash = sha256_block(&msg);

  // Return first byte of hash (big-endian)
  return hash[0] >> 24u;
}

// HMAC-SHA256 for MAC verification
// Key is 16 bytes (4 words), padded to 32 bytes with zeros for MeshCore
// Returns first 2 bytes of HMAC (as u32 in high 16 bits)
fn hmac_sha256_mac(key: array<u32, 4>, ciphertext_len: u32) -> u32 {
  // HMAC: H((K' ^ opad) || H((K' ^ ipad) || message))
  // K' is 64 bytes (32 bytes key + 32 bytes zero padding for MeshCore, then padded to 64)
  // ipad = 0x36 repeated, opad = 0x5c repeated

  // Build padded key (64 bytes = 16 words)
  // MeshCore uses 32-byte secret: 16-byte key + 16 zero bytes
  var k_pad: array<u32, 16>;
  k_pad[0] = key[0];
  k_pad[1] = key[1];
  k_pad[2] = key[2];
  k_pad[3] = key[3];
  for (var i = 4u; i < 16u; i++) {
    k_pad[i] = 0u;
  }

  // Inner hash: SHA256((K' ^ ipad) || message)
  // First block: K' ^ ipad (64 bytes)
  var inner_block: array<u32, 16>;
  for (var i = 0u; i < 16u; i++) {
    inner_block[i] = k_pad[i] ^ 0x36363636u;
  }

  // Initialize hash state with first block
  var h: array<u32, 8> = sha256_block(&inner_block);

  // Process ciphertext blocks (continuing from h state)
  let ciphertext_words = params.ciphertext_words;
  var word_idx = 0u;

  // Process full 64-byte blocks of ciphertext
  while (word_idx + 16u <= ciphertext_words) {
    var block: array<u32, 16>;
    for (var i = 0u; i < 16u; i++) {
      block[i] = ciphertext[word_idx + i];
    }
    h = sha256_block_continue(&block, h);
    word_idx = word_idx + 16u;
  }

  // Final block with remaining ciphertext + padding
  var final_block: array<u32, 16>;
  var remaining = ciphertext_words - word_idx;
  for (var i = 0u; i < 16u; i++) {
    if (i < remaining) {
      final_block[i] = ciphertext[word_idx + i];
    } else if (i == remaining) {
      // Add 0x80 padding
      final_block[i] = 0x80000000u;
    } else {
      final_block[i] = 0u;
    }
  }

  // Add length (64 bytes of ipad + ciphertext length)
  let total_bits = 512u + params.ciphertext_len_bits;
  if (remaining < 14u) {
    final_block[14] = 0u;
    final_block[15] = total_bits;
    h = sha256_block_continue(&final_block, h);
  } else {
    // Need extra block for length
    h = sha256_block_continue(&final_block, h);
    var len_block: array<u32, 16>;
    for (var i = 0u; i < 14u; i++) {
      len_block[i] = 0u;
    }
    len_block[14] = 0u;
    len_block[15] = total_bits;
    h = sha256_block_continue(&len_block, h);
  }

  let inner_hash = h;

  // Outer hash: SHA256((K' ^ opad) || inner_hash)
  var outer_block: array<u32, 16>;
  for (var i = 0u; i < 16u; i++) {
    outer_block[i] = k_pad[i] ^ 0x5c5c5c5cu;
  }
  h = sha256_block(&outer_block);

  // Second block: inner_hash (32 bytes) + padding
  var hash_block: array<u32, 16>;
  for (var i = 0u; i < 8u; i++) {
    hash_block[i] = inner_hash[i];
  }
  hash_block[8] = 0x80000000u;
  for (var i = 9u; i < 14u; i++) {
    hash_block[i] = 0u;
  }
  hash_block[14] = 0u;
  hash_block[15] = 512u + 256u; // 64 bytes opad + 32 bytes inner hash

  h = sha256_block_continue(&hash_block, h);

  // Return first 2 bytes (high 16 bits of first word)
  return h[0] & 0xFFFF0000u;
}

// SHA256 block computation continuing from existing state
fn sha256_block_continue(msg: ptr<function, array<u32, 16>>, h_in: array<u32, 8>) -> array<u32, 8> {
  var h = h_in;

  // Message schedule
  var w: array<u32, 64>;
  for (var i = 0u; i < 16u; i++) {
    w[i] = (*msg)[i];
  }
  for (var i = 16u; i < 64u; i++) {
    w[i] = gamma1(w[i-2u]) + w[i-7u] + gamma0(w[i-15u]) + w[i-16u];
  }

  // Compression
  var a = h[0]; var b = h[1]; var c = h[2]; var d = h[3];
  var e = h[4]; var f = h[5]; var g = h[6]; var hh = h[7];

  for (var i = 0u; i < 64u; i++) {
    let t1 = hh + sigma1(e) + ch(e, f, g) + K[i] + w[i];
    let t2 = sigma0(a) + maj(a, b, c);
    hh = g; g = f; f = e; e = d + t1;
    d = c; c = b; b = a; a = t1 + t2;
  }

  h[0] = h[0] + a; h[1] = h[1] + b; h[2] = h[2] + c; h[3] = h[3] + d;
  h[4] = h[4] + e; h[5] = h[5] + f; h[6] = h[6] + g; h[7] = h[7] + hh;

  return h;
}

// Process a single candidate and record match if found
fn process_candidate(name_idx: u32) {
  // Generate message for this room name
  var msg: array<u32, 16>;
  let valid = index_to_room_name(name_idx, params.name_length, &msg);

  if (!valid) {
    return;
  }

  // Compute SHA256("#roomname") - this gives us the key
  let key_hash = sha256_block(&msg);

  // Take first 16 bytes (4 words) as the key
  var key: array<u32, 4>;
  key[0] = key_hash[0];
  key[1] = key_hash[1];
  key[2] = key_hash[2];
  key[3] = key_hash[3];

  // Compute SHA256(key) to get channel hash
  let channel_hash = sha256_key(key);

  // Check if channel hash matches target
  if (channel_hash != params.target_channel_hash) {
    return;
  }

  // Channel hash matches - verify MAC if enabled
  if (params.verify_mac == 1u) {
    let computed_mac = hmac_sha256_mac(key, params.ciphertext_len_bits);
    if (computed_mac != params.target_mac) {
      return;
    }
  }

  // Found a match - record the index
  let match_idx = atomicAdd(&match_count, 1u);
  if (match_idx < 1024u) { // Limit stored matches
    match_indices[match_idx] = name_idx;
  }
}

// Each thread processes 32 candidates to amortize thread overhead
const CANDIDATES_PER_THREAD: u32 = 32u;

@compute @workgroup_size(256)
fn main(@builtin(global_invocation_id) global_id: vec3<u32>) {
  let base_idx = global_id.x * CANDIDATES_PER_THREAD;

  for (var i = 0u; i < CANDIDATES_PER_THREAD; i++) {
    let idx = base_idx + i;
    if (idx >= params.batch_size) {
      return;
    }
    let name_idx = params.batch_offset + idx;
    process_candidate(name_idx);
  }
}
`}async init(){if(!navigator.gpu)return console.warn("WebGPU not supported"),!1;try{const a=await navigator.gpu.requestAdapter();if(!a)return console.warn("No GPU adapter found"),!1;this.device=await a.requestDevice(),this.bindGroupLayout=this.device.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}}]}),this.paramsBuffer=this.device.createBuffer({size:32,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.matchCountBuffer=this.device.createBuffer({size:4,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST}),this.matchIndicesBuffer=this.device.createBuffer({size:1024*4,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC});for(let d=0;d<2;d++)this.matchCountReadBuffers[d]=this.device.createBuffer({size:4,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST}),this.matchIndicesReadBuffers[d]=this.device.createBuffer({size:1024*4,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST});const o=this.device.createShaderModule({code:this.shaderCode}),l=this.device.createPipelineLayout({bindGroupLayouts:[this.bindGroupLayout]});return this.pipeline=this.device.createComputePipeline({layout:l,compute:{module:o,entryPoint:"main"}}),!0}catch(a){return console.error("WebGPU initialization failed:",a),!1}}isAvailable(){return this.device!==null&&this.pipeline!==null}indexToRoomName(a,o){return Go(o,a)}countNamesForLength(a){return sl(a)}async runBatch(a,o,l,d,f,p){if(!this.device||!this.pipeline||!this.bindGroupLayout||!this.paramsBuffer||!this.matchCountBuffer||!this.matchIndicesBuffer||!this.matchCountReadBuffers[0]||!this.matchCountReadBuffers[1]||!this.matchIndicesReadBuffers[0]||!this.matchIndicesReadBuffers[1])throw new Error("GPU not initialized");const h=this.currentReadBufferIndex;this.currentReadBufferIndex=1-this.currentReadBufferIndex;const g=this.matchCountReadBuffers[h],m=this.matchIndicesReadBuffers[h],v=f&&p?1:0;let y,w=0,T=0;if(v){const M=new Uint8Array(f.length/2);for(let W=0;W<M.length;W++)M[W]=parseInt(f.substr(W*2,2),16);w=M.length*8;const z=Math.ceil(M.length/4)*4,H=new Uint8Array(z);H.set(M),y=new Uint32Array(z/4);for(let W=0;W<y.length;W++)y[W]=H[W*4]<<24|H[W*4+1]<<16|H[W*4+2]<<8|H[W*4+3];const j=parseInt(p.substr(0,2),16),J=parseInt(p.substr(2,2),16);T=j<<24|J<<16}else y=new Uint32Array([0]);const F=Math.max(y.length*4,4);(!this.ciphertextBuffer||this.ciphertextBufferSize<F)&&(this.ciphertextBuffer&&this.ciphertextBuffer.destroy(),this.ciphertextBuffer=this.device.createBuffer({size:F,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST}),this.ciphertextBufferSize=F,this.bindGroupDirty=!0);const k=new Uint32Array([a,l,o,d,T,y.length,w,v]);this.device.queue.writeBuffer(this.paramsBuffer,0,k),this.device.queue.writeBuffer(this.ciphertextBuffer,0,y),this.device.queue.writeBuffer(this.matchCountBuffer,0,id.ZERO_DATA),(this.bindGroupDirty||!this.bindGroup)&&(this.bindGroup=this.device.createBindGroup({layout:this.bindGroupLayout,entries:[{binding:0,resource:{buffer:this.paramsBuffer}},{binding:1,resource:{buffer:this.matchCountBuffer}},{binding:2,resource:{buffer:this.matchIndicesBuffer}},{binding:3,resource:{buffer:this.ciphertextBuffer}}]}),this.bindGroupDirty=!1);const E=this.device.createCommandEncoder(),D=E.beginComputePass();D.setPipeline(this.pipeline),D.setBindGroup(0,this.bindGroup),D.dispatchWorkgroups(Math.ceil(d/(256*32))),D.end(),E.copyBufferToBuffer(this.matchCountBuffer,0,g,0,4),E.copyBufferToBuffer(this.matchIndicesBuffer,0,m,0,1024*4),this.device.queue.submit([E.finish()]),await g.mapAsync(GPUMapMode.READ);const S=new Uint32Array(g.getMappedRange())[0];g.unmap();const N=[];if(S>0){await m.mapAsync(GPUMapMode.READ);const M=new Uint32Array(m.getMappedRange());for(let z=0;z<Math.min(S,1024);z++)N.push(M[z]);m.unmap()}return N}destroy(){var a,o,l,d,f,p,h,g;(a=this.paramsBuffer)==null||a.destroy(),(o=this.matchCountBuffer)==null||o.destroy(),(l=this.matchIndicesBuffer)==null||l.destroy(),(d=this.ciphertextBuffer)==null||d.destroy(),(f=this.matchCountReadBuffers[0])==null||f.destroy(),(p=this.matchCountReadBuffers[1])==null||p.destroy(),(h=this.matchIndicesReadBuffers[0])==null||h.destroy(),(g=this.matchIndicesReadBuffers[1])==null||g.destroy(),this.paramsBuffer=null,this.matchCountBuffer=null,this.matchIndicesBuffer=null,this.ciphertextBuffer=null,this.ciphertextBufferSize=0,this.matchCountReadBuffers=[null,null],this.matchIndicesReadBuffers=[null,null],this.currentReadBufferIndex=0,this.bindGroup=null,this.bindGroupDirty=!0,this.device&&(this.device.destroy(),this.device=null),this.pipeline=null,this.bindGroupLayout=null}}id.ZERO_DATA=new Uint32Array([0]);function mE(){return typeof navigator<"u"&&"gpu"in navigator}class Dg{runBatch(a,o,l,d,f,p){const h=[],g=a.toString(16).padStart(2,"0"),m=!!(f&&p);for(let v=0;v<d;v++){const y=l+v,w=Go(o,y);if(!w)continue;const T=d0("#"+w);f0(T)===g&&(m&&!Wx(f,p,T)||h.push(y))}return h}destroy(){}}const gE=/^[a-z0-9-]+$/,AE=/^[a-z0-9].*[a-z0-9]$|^[a-z0-9]$/,xE=/--/;function Rg(r){return!(!r||r.length===0||!gE.test(r)||r.length>1&&!AE.test(r)||xE.test(r))}class vE{constructor(){this.gpuInstance=null,this.cpuInstance=null,this.wordlist=[],this.abortFlag=!1,this.useTimestampFilter=!0,this.useUtf8Filter=!0,this.useSenderFilter=!0,this.validSeconds=c0,this.useCpu=!1}async loadWordlist(a){const o=await fetch(a);if(!o.ok)throw new Error(`Failed to load wordlist: ${o.status} ${o.statusText}`);const d=(await o.text()).split(`
`).map(f=>f.trim().toLowerCase()).filter(f=>f.length>0);this.wordlist=d.filter(Rg)}setWordlist(a){this.wordlist=a.map(o=>o.trim().toLowerCase()).filter(Rg)}abort(){this.abortFlag=!0}isGpuAvailable(){return mE()}async decodePacket(a){var l;const o=a.trim().replace(/\s+/g,"").replace(/^0x/i,"");if(!o||!/^[0-9a-fA-F]+$/.test(o))return null;try{const f=(l=(await Bg.MeshCorePacketDecoder.decodeWithVerification(o,{})).payload)==null?void 0:l.decoded;return!(f!=null&&f.channelHash)||!(f!=null&&f.ciphertext)||!(f!=null&&f.cipherMac)?null:{channelHash:f.channelHash,ciphertext:f.ciphertext,cipherMac:f.cipherMac,isGroupText:!0}}catch{return null}}async crack(a,o,l){this.abortFlag=!1,this.useTimestampFilter=(o==null?void 0:o.useTimestampFilter)??!0,this.useUtf8Filter=(o==null?void 0:o.useUtf8Filter)??!0,this.useSenderFilter=(o==null?void 0:o.useSenderFilter)??!0,this.validSeconds=(o==null?void 0:o.validSeconds)??c0,this.useCpu=(o==null?void 0:o.forceCpu)??!1;const d=(o==null?void 0:o.maxLength)??8,f=(o==null?void 0:o.startingLength)??1,p=(o==null?void 0:o.useDictionary)??!0,h=(o==null?void 0:o.startFromType)??"bruteforce",g=a.toLowerCase(),m=await this.decodePacket(g);if(!m)return{found:!1,error:"Invalid packet or not a GroupText packet"};const{channelHash:v,ciphertext:y,cipherMac:w}=m,T=parseInt(v,16);this.useCpu?this.cpuInstance||(this.cpuInstance=new Dg):this.gpuInstance||(this.gpuInstance=new id,await this.gpuInstance.init()||(this.useCpu=!0,this.cpuInstance=new Dg));const F=performance.now();let k=0,E=performance.now(),D=f,B=0,S=0,N=!1;if(o!=null&&o.startFrom){const Y=o.startFrom.toLowerCase();if(h==="dictionary"){const re=this.wordlist.indexOf(Y);re>=0&&(S=re+1)}else{N=!0;const re=fE(Y);re&&(D=Math.max(f,re.length),B=re.index+1,B>=sl(D)&&(D++,B=0))}}let M=0;p&&!N&&this.wordlist.length>0&&(M+=this.wordlist.length-S);for(let Y=D;Y<=d;Y++)M+=sl(Y);M-=B;const z=(Y,re,fe)=>{if(!l)return;const he=(performance.now()-F)/1e3,G=he>0?Math.round(k/he):0,pe=M-k,Z=G>0?pe/G:0;l({checked:k,total:M,percent:M>0?Math.min(100,k/M*100):0,rateKeysPerSec:G,etaSeconds:Z,elapsedSeconds:he,currentLength:re,currentPosition:fe,phase:Y})},H=Y=>{if(!Wx(y,w,Y))return{valid:!1};const re=Bg.ChannelCrypto.decryptGroupTextMessage(y,w,Y);return!re.success||!re.data?{valid:!1}:this.useTimestampFilter&&!hE(re.data.timestamp,this.validSeconds)?{valid:!1}:this.useUtf8Filter&&!pE(re.data.message)?{valid:!1}:this.useSenderFilter&&!re.data.sender?{valid:!1}:{valid:!0,message:re.data.sender?`${re.data.sender}: ${re.data.message}`:re.data.message}};if(!N&&S===0&&D===f&&B===0){z("public-key",0,u0);const Y=f0(Pc);if(v===Y){const re=H(Pc);if(re.valid)return{found:!0,roomName:u0,key:Pc,decryptedMessage:re.message}}}if(p&&!N&&this.wordlist.length>0)for(let Y=S;Y<this.wordlist.length;Y++){if(this.abortFlag)return{found:!1,aborted:!0,resumeFrom:this.wordlist[Y],resumeType:"dictionary"};const re=this.wordlist[Y],fe=d0("#"+re),ae=f0(fe);if(parseInt(ae,16)===T){const G=H(fe);if(G.valid)return{found:!0,roomName:re,key:fe,decryptedMessage:G.message,resumeFrom:re,resumeType:"dictionary"}}k++;const he=performance.now();he-E>=200&&(z("wordlist",re.length,re),E=he,await new Promise(G=>setTimeout(G,0)))}const j=this.useCpu?1024:32768,J=(o==null?void 0:o.gpuDispatchMs)??1e3;let W=j,U=!1;for(let Y=D;Y<=d;Y++){if(this.abortFlag)return{found:!1,aborted:!0,resumeFrom:Go(Y,0)||void 0,resumeType:"bruteforce"};const re=sl(Y);let fe=Y===D?B:0;for(;fe<re;){if(this.abortFlag)return{found:!1,aborted:!0,resumeFrom:Go(Y,fe)||void 0,resumeType:"bruteforce"};const ae=Math.min(W,re-fe),he=performance.now();let G;this.useCpu?G=this.cpuInstance.runBatch(T,Y,fe,ae,y,w):G=await this.gpuInstance.runBatch(T,Y,fe,ae,y,w);const pe=performance.now()-he;if(k+=ae,!this.useCpu&&!U&&ae>=j&&pe>0){const P=J/pe,V=Math.round(ae*P),K=Math.pow(2,Math.round(Math.log2(Math.max(j,V))));W=Math.max(j,K),U=!0}for(const P of G){const V=Go(Y,P);if(!V)continue;const K=d0("#"+V),$=H(K);if($.valid)return{found:!0,roomName:V,key:K,decryptedMessage:$.message,resumeFrom:V,resumeType:"bruteforce"}}fe+=ae;const Z=performance.now();if(Z-E>=200){const P=Go(Y,Math.min(fe,re-1))||"";z("bruteforce",Y,P),E=Z,await new Promise(V=>setTimeout(V,0))}}}return{found:!1,resumeFrom:Go(d,sl(d)-1)||void 0,resumeType:"bruteforce"}}destroy(){this.gpuInstance&&(this.gpuInstance.destroy(),this.gpuInstance=null),this.cpuInstance&&(this.cpuInstance.destroy(),this.cpuInstance=null)}}var Qf,Fg;function yE(){return Fg||(Fg=1,Qf={webm:"data:video/webm;base64,GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4EEQoWBAhhTgGcBAAAAAAAVkhFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsghV17AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU1LjMzLjEwMFdBjUxhdmY1NS4zMy4xMDBzpJBlrrXf3DCDVB8KcgbMpcr+RImIQJBgAAAAAAAWVK5rAQAAAAAAD++uAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDiDgQEj44OEAmJaAOABAAAAAAAABrCBsLqBkK4BAAAAAAAPq9eBAnPFgQKcgQAitZyDdW5khohBX1ZPUkJJU4OBAuEBAAAAAAAAEZ+BArWIQOdwAAAAAABiZIEgY6JPbwIeVgF2b3JiaXMAAAAAAoC7AAAAAAAAgLUBAAAAAAC4AQN2b3JiaXMtAAAAWGlwaC5PcmcgbGliVm9yYmlzIEkgMjAxMDExMDEgKFNjaGF1ZmVudWdnZXQpAQAAABUAAABlbmNvZGVyPUxhdmM1NS41Mi4xMDIBBXZvcmJpcyVCQ1YBAEAAACRzGCpGpXMWhBAaQlAZ4xxCzmvsGUJMEYIcMkxbyyVzkCGkoEKIWyiB0JBVAABAAACHQXgUhIpBCCGEJT1YkoMnPQghhIg5eBSEaUEIIYQQQgghhBBCCCGERTlokoMnQQgdhOMwOAyD5Tj4HIRFOVgQgydB6CCED0K4moOsOQghhCQ1SFCDBjnoHITCLCiKgsQwuBaEBDUojILkMMjUgwtCiJqDSTX4GoRnQXgWhGlBCCGEJEFIkIMGQcgYhEZBWJKDBjm4FITLQagahCo5CB+EIDRkFQCQAACgoiiKoigKEBqyCgDIAAAQQFEUx3EcyZEcybEcCwgNWQUAAAEACAAAoEiKpEiO5EiSJFmSJVmSJVmS5omqLMuyLMuyLMsyEBqyCgBIAABQUQxFcRQHCA1ZBQBkAAAIoDiKpViKpWiK54iOCISGrAIAgAAABAAAEDRDUzxHlETPVFXXtm3btm3btm3btm3btm1blmUZCA1ZBQBAAAAQ0mlmqQaIMAMZBkJDVgEACAAAgBGKMMSA0JBVAABAAACAGEoOogmtOd+c46BZDppKsTkdnEi1eZKbirk555xzzsnmnDHOOeecopxZDJoJrTnnnMSgWQqaCa0555wnsXnQmiqtOeeccc7pYJwRxjnnnCateZCajbU555wFrWmOmkuxOeecSLl5UptLtTnnnHPOOeecc84555zqxekcnBPOOeecqL25lpvQxTnnnE/G6d6cEM4555xzzjnnnHPOOeecIDRkFQAABABAEIaNYdwpCNLnaCBGEWIaMulB9+gwCRqDnELq0ehopJQ6CCWVcVJKJwgNWQUAAAIAQAghhRRSSCGFFFJIIYUUYoghhhhyyimnoIJKKqmooowyyyyzzDLLLLPMOuyssw47DDHEEEMrrcRSU2011lhr7jnnmoO0VlprrbVSSimllFIKQkNWAQAgAAAEQgYZZJBRSCGFFGKIKaeccgoqqIDQkFUAACAAgAAAAABP8hzRER3RER3RER3RER3R8RzPESVREiVREi3TMjXTU0VVdWXXlnVZt31b2IVd933d933d+HVhWJZlWZZlWZZlWZZlWZZlWZYgNGQVAAACAAAghBBCSCGFFFJIKcYYc8w56CSUEAgNWQUAAAIACAAAAHAUR3EcyZEcSbIkS9IkzdIsT/M0TxM9URRF0zRV0RVdUTdtUTZl0zVdUzZdVVZtV5ZtW7Z125dl2/d93/d93/d93/d93/d9XQdCQ1YBABIAADqSIymSIimS4ziOJElAaMgqAEAGAEAAAIriKI7jOJIkSZIlaZJneZaomZrpmZ4qqkBoyCoAABAAQAAAAAAAAIqmeIqpeIqoeI7oiJJomZaoqZoryqbsuq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq4LhIasAgAkAAB0JEdyJEdSJEVSJEdygNCQVQCADACAAAAcwzEkRXIsy9I0T/M0TxM90RM901NFV3SB0JBVAAAgAIAAAAAAAAAMybAUy9EcTRIl1VItVVMt1VJF1VNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVN0zRNEwgNWQkAkAEAkBBTLS3GmgmLJGLSaqugYwxS7KWxSCpntbfKMYUYtV4ah5RREHupJGOKQcwtpNApJq3WVEKFFKSYYyoVUg5SIDRkhQAQmgHgcBxAsixAsiwAAAAAAAAAkDQN0DwPsDQPAAAAAAAAACRNAyxPAzTPAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAA0DwP8DwR8EQRAAAAAAAAACzPAzTRAzxRBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAAsDwP8EQR0DwRAAAAAAAAACzPAzxRBDzRAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAEOAAABBgIRQasiIAiBMAcEgSJAmSBM0DSJYFTYOmwTQBkmVB06BpME0AAAAAAAAAAAAAJE2DpkHTIIoASdOgadA0iCIAAAAAAAAAAAAAkqZB06BpEEWApGnQNGgaRBEAAAAAAAAAAAAAzzQhihBFmCbAM02IIkQRpgkAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAGHAAAAgwoQwUGrIiAIgTAHA4imUBAIDjOJYFAACO41gWAABYliWKAABgWZooAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAYcAAACDChDBQashIAiAIAcCiKZQHHsSzgOJYFJMmyAJYF0DyApgFEEQAIAAAocAAACLBBU2JxgEJDVgIAUQAABsWxLE0TRZKkaZoniiRJ0zxPFGma53meacLzPM80IYqiaJoQRVE0TZimaaoqME1VFQAAUOAAABBgg6bE4gCFhqwEAEICAByKYlma5nmeJ4qmqZokSdM8TxRF0TRNU1VJkqZ5niiKommapqqyLE3zPFEURdNUVVWFpnmeKIqiaaqq6sLzPE8URdE0VdV14XmeJ4qiaJqq6roQRVE0TdNUTVV1XSCKpmmaqqqqrgtETxRNU1Vd13WB54miaaqqq7ouEE3TVFVVdV1ZBpimaaqq68oyQFVV1XVdV5YBqqqqruu6sgxQVdd1XVmWZQCu67qyLMsCAAAOHAAAAoygk4wqi7DRhAsPQKEhKwKAKAAAwBimFFPKMCYhpBAaxiSEFEImJaXSUqogpFJSKRWEVEoqJaOUUmopVRBSKamUCkIqJZVSAADYgQMA2IGFUGjISgAgDwCAMEYpxhhzTiKkFGPOOScRUoox55yTSjHmnHPOSSkZc8w556SUzjnnnHNSSuacc845KaVzzjnnnJRSSuecc05KKSWEzkEnpZTSOeecEwAAVOAAABBgo8jmBCNBhYasBABSAQAMjmNZmuZ5omialiRpmud5niiapiZJmuZ5nieKqsnzPE8URdE0VZXneZ4oiqJpqirXFUXTNE1VVV2yLIqmaZqq6rowTdNUVdd1XZimaaqq67oubFtVVdV1ZRm2raqq6rqyDFzXdWXZloEsu67s2rIAAPAEBwCgAhtWRzgpGgssNGQlAJABAEAYg5BCCCFlEEIKIYSUUggJAAAYcAAACDChDBQashIASAUAAIyx1lprrbXWQGettdZaa62AzFprrbXWWmuttdZaa6211lJrrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmstpZRSSimllFJKKaWUUkoppZRSSgUA+lU4APg/2LA6wknRWGChISsBgHAAAMAYpRhzDEIppVQIMeacdFRai7FCiDHnJKTUWmzFc85BKCGV1mIsnnMOQikpxVZjUSmEUlJKLbZYi0qho5JSSq3VWIwxqaTWWoutxmKMSSm01FqLMRYjbE2ptdhqq7EYY2sqLbQYY4zFCF9kbC2m2moNxggjWywt1VprMMYY3VuLpbaaizE++NpSLDHWXAAAd4MDAESCjTOsJJ0VjgYXGrISAAgJACAQUooxxhhzzjnnpFKMOeaccw5CCKFUijHGnHMOQgghlIwx5pxzEEIIIYRSSsaccxBCCCGEkFLqnHMQQgghhBBKKZ1zDkIIIYQQQimlgxBCCCGEEEoopaQUQgghhBBCCKmklEIIIYRSQighlZRSCCGEEEIpJaSUUgohhFJCCKGElFJKKYUQQgillJJSSimlEkoJJYQSUikppRRKCCGUUkpKKaVUSgmhhBJKKSWllFJKIYQQSikFAAAcOAAABBhBJxlVFmGjCRcegEJDVgIAZAAAkKKUUiktRYIipRikGEtGFXNQWoqocgxSzalSziDmJJaIMYSUk1Qy5hRCDELqHHVMKQYtlRhCxhik2HJLoXMOAAAAQQCAgJAAAAMEBTMAwOAA4XMQdAIERxsAgCBEZohEw0JweFAJEBFTAUBigkIuAFRYXKRdXECXAS7o4q4DIQQhCEEsDqCABByccMMTb3jCDU7QKSp1IAAAAAAADADwAACQXAAREdHMYWRobHB0eHyAhIiMkAgAAAAAABcAfAAAJCVAREQ0cxgZGhscHR4fICEiIyQBAIAAAgAAAAAggAAEBAQAAAAAAAIAAAAEBB9DtnUBAAAAAAAEPueBAKOFggAAgACjzoEAA4BwBwCdASqwAJAAAEcIhYWIhYSIAgIABhwJ7kPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99YAD+/6tQgKOFggADgAqjhYIAD4AOo4WCACSADqOZgQArADECAAEQEAAYABhYL/QACIBDmAYAAKOFggA6gA6jhYIAT4AOo5mBAFMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAGSADqOFggB6gA6jmYEAewAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAj4AOo5mBAKMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAKSADqOFggC6gA6jmYEAywAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAz4AOo4WCAOSADqOZgQDzADECAAEQEAAYABhYL/QACIBDmAYAAKOFggD6gA6jhYIBD4AOo5iBARsAEQIAARAQFGAAYWC/0AAiAQ5gGACjhYIBJIAOo4WCATqADqOZgQFDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggFPgA6jhYIBZIAOo5mBAWsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAXqADqOFggGPgA6jmYEBkwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIBpIAOo4WCAbqADqOZgQG7ADECAAEQEAAYABhYL/QACIBDmAYAAKOFggHPgA6jmYEB4wAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIB5IAOo4WCAfqADqOZgQILADECAAEQEAAYABhYL/QACIBDmAYAAKOFggIPgA6jhYICJIAOo5mBAjMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAjqADqOFggJPgA6jmYECWwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYICZIAOo4WCAnqADqOZgQKDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggKPgA6jhYICpIAOo5mBAqsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCArqADqOFggLPgA6jmIEC0wARAgABEBAUYABhYL/QACIBDmAYAKOFggLkgA6jhYIC+oAOo5mBAvsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAw+ADqOZgQMjADECAAEQEAAYABhYL/QACIBDmAYAAKOFggMkgA6jhYIDOoAOo5mBA0sAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA0+ADqOFggNkgA6jmYEDcwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIDeoAOo4WCA4+ADqOZgQObADECAAEQEAAYABhYL/QACIBDmAYAAKOFggOkgA6jhYIDuoAOo5mBA8MAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA8+ADqOFggPkgA6jhYID+oAOo4WCBA+ADhxTu2sBAAAAAAAAEbuPs4EDt4r3gQHxghEr8IEK",mp4:"data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"}),Qf}var $f,Ng;function _E(){if(Ng)return $f;Ng=1;const{webm:r,mp4:a}=yE(),o=()=>typeof navigator<"u"&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,l=()=>"wakeLock"in navigator;class d{constructor(){if(this.enabled=!1,l()){this._wakeLock=null;const p=()=>{this._wakeLock!==null&&document.visibilityState==="visible"&&this.enable()};document.addEventListener("visibilitychange",p),document.addEventListener("fullscreenchange",p)}else o()?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("title","No Sleep"),this.noSleepVideo.setAttribute("playsinline",""),this._addSourceToVideo(this.noSleepVideo,"webm",r),this._addSourceToVideo(this.noSleepVideo,"mp4",a),this.noSleepVideo.addEventListener("loadedmetadata",()=>{this.noSleepVideo.duration<=1?this.noSleepVideo.setAttribute("loop",""):this.noSleepVideo.addEventListener("timeupdate",()=>{this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())})}))}_addSourceToVideo(p,h,g){var m=document.createElement("source");m.src=g,m.type=`video/${h}`,p.appendChild(m)}get isEnabled(){return this.enabled}enable(){return l()?navigator.wakeLock.request("screen").then(p=>{this._wakeLock=p,this.enabled=!0,console.log("Wake Lock active."),this._wakeLock.addEventListener("release",()=>{console.log("Wake Lock released.")})}).catch(p=>{throw this.enabled=!1,console.error(`${p.name}, ${p.message}`),p}):o()?(this.disable(),console.warn(`
        NoSleep enabled for older iOS devices. This can interrupt
        active or long-running network requests from completing successfully.
        See https://github.com/richtr/NoSleep.js/issues/15 for more details.
      `),this.noSleepTimer=window.setInterval(()=>{document.hidden||(window.location.href=window.location.href.split("#")[0],window.setTimeout(window.stop,0))},15e3),this.enabled=!0,Promise.resolve()):this.noSleepVideo.play().then(h=>(this.enabled=!0,h)).catch(h=>{throw this.enabled=!1,h})}disable(){l()?(this._wakeLock&&this._wakeLock.release(),this._wakeLock=null):o()?this.noSleepTimer&&(console.warn(`
          NoSleep now disabled for older iOS devices.
        `),window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause(),this.enabled=!1}}return $f=d,$f}var wE=_E();const bE=Ys(wE);function CE(r){if(r.length<4)return null;try{const o=parseInt(r.slice(0,2),16)&3;let l=2;if(o===0||o===3){if(r.length<l+8)return null;l+=8}if(r.length<l+2)return null;const d=parseInt(r.slice(l,l+2),16);l+=2;const f=d*2;return r.length<l+f?null:(l+=f,r.slice(l))}catch{return null}}function EE({packets:r,channels:a,onChannelCreate:o,onRunningChange:l,visible:d=!1}){const[f,p]=R.useState(!1),[h,g]=R.useState(6),[m,v]=R.useState(!1),[y,w]=R.useState(!0),[T,F]=R.useState(!1),[k,E]=R.useState(null),[D,B]=R.useState(new Map),[S,N]=R.useState([]),[M,z]=R.useState(!1),[H,j]=R.useState(null),[J,W]=R.useState(null),[U,ne]=R.useState(0),Y=R.useRef(null),re=R.useRef(null),fe=R.useRef(!1),ae=R.useRef(!1),he=R.useRef(!1),G=R.useRef(new Map),pe=R.useRef(!1),Z=R.useRef(6),P=R.useRef(!0),V=R.useRef(!1),K=R.useRef(new Set),$=R.useRef(new Set);R.useEffect(()=>{const Be=new vE;Y.current=Be,j(Be.isGpuAvailable());const Ze=new bE;return re.current=Ze,()=>{Be.destroy(),Y.current=null,Ze.disable(),re.current=null}},[]),R.useEffect(()=>{!d||M||Ab(async()=>{const{ENGLISH_WORDLIST:Be}=await import("./wordlist-BtmChKSf.js");return{ENGLISH_WORDLIST:Be}},[]).then(({ENGLISH_WORDLIST:Be})=>{Y.current&&(Y.current.setWordlist(Be),z(!0))}).catch(Be=>{console.error("Failed to load wordlist:",Be),xt.error("Failed to load wordlist",{description:"Cracking will not be available"})})},[d,M]),R.useEffect(()=>{const Be=()=>{et.getUndecryptedPacketCount().then(({count:dt})=>W(dt)).catch(()=>W(null))};Be();const Ze=setInterval(Be,36e5);return()=>clearInterval(Ze)},[]);const ce=R.useMemo(()=>new Set(a.map(Be=>Be.key.toUpperCase())),[a]),de=r.filter(Be=>Be.payload_type==="GROUP_TEXT"&&!Be.decrypted);R.useEffect(()=>{let Be=0;B(Ze=>{const dt=new Map(Ze);let Mt=!1;for(const at of de)if(!dt.has(at.id)){const gt=CE(at.data);if(gt&&$.current.has(gt)){Be++;continue}gt&&$.current.add(gt),dt.set(at.id,{packet:at,attempts:0,lastAttemptLength:0,status:"pending"}),Mt=!0}return Mt?(G.current=dt,dt):Ze}),Be>0&&ne(Ze=>Ze+Be)},[de.length]),R.useEffect(()=>{G.current=D},[D]),R.useEffect(()=>{pe.current=m},[m]),R.useEffect(()=>{Z.current=h},[h]),R.useEffect(()=>{P.current=y},[y]),R.useEffect(()=>{V.current=T},[T]),R.useEffect(()=>{K.current=new Set(de.map(Be=>Be.id))},[de]),R.useEffect(()=>{l==null||l(f)},[f,l]);const Se=Array.from(D.values()).filter(Be=>Be.status==="pending").length,Ae=Array.from(D.values()).filter(Be=>Be.status==="cracked").length,Ue=Array.from(D.values()).filter(Be=>Be.status==="failed").length,Ye=R.useCallback(async()=>{if(he.current||!Y.current||!fe.current)return;const Be=G.current;let Ze=null,dt=null;for(const[qe,tt]of Be.entries())if(tt.status==="pending"){Ze=tt,dt=qe;break}if(!Ze&&pe.current){const qe=Array.from(Be.entries()).filter(([,tt])=>tt.status==="failed"&&tt.lastAttemptLength<10);qe.length>0&&(qe.sort((tt,nt)=>tt[1].lastAttemptLength-nt[1].lastAttemptLength),[dt,Ze]=qe[0])}if(!Ze||dt===null){fe.current&&setTimeout(()=>Ye(),1e3);return}if(!K.current.has(dt)){B(qe=>{const tt=new Map(qe);return tt.delete(dt),tt}),fe.current&&setTimeout(()=>Ye(),10);return}he.current=!0;const Mt=Z.current,at=Ze.lastAttemptLength>0,gt=at?Ze.lastAttemptLength+1:Mt;try{const qe=await Y.current.crack(Ze.packet.data,{maxLength:gt,useSenderFilter:!0,useTimestampFilter:!0,useUtf8Filter:!0,...V.current&&{gpuDispatchMs:1e4},...at&&{useDictionary:!1,startingLength:gt}},tt=>{E(tt)});if(ae.current){ae.current=!1,he.current=!1,E(null);return}if(qe.found&&qe.roomName&&qe.key){B(He=>{const Ct=new Map(He),Ce=Ct.get(dt);return Ce&&Ct.set(dt,{...Ce,status:"cracked",attempts:Ce.attempts+1,lastAttemptLength:gt}),Ct});const tt={roomName:qe.roomName,key:qe.key,packetId:dt,message:qe.decryptedMessage||"",crackedAt:Date.now()};N(He=>[...He,tt]);const nt=qe.key.toUpperCase();if(!ce.has(nt))try{const He="#"+qe.roomName;await o(He,qe.key),P.current&&await et.decryptHistoricalPackets({key_type:"channel",channel_name:He})}catch(He){console.error("Failed to create channel or decrypt historical:",He),xt.error("Failed to save cracked channel",{description:He instanceof Error?He.message:"Channel discovered but could not be saved"})}}else B(tt=>{const nt=new Map(tt),He=nt.get(dt);return He&&nt.set(dt,{...He,status:"failed",attempts:He.attempts+1,lastAttemptLength:gt}),nt})}catch(qe){console.error("Cracking error:",qe),B(tt=>{const nt=new Map(tt),He=nt.get(dt);return He&&nt.set(dt,{...He,status:"failed",attempts:He.attempts+1,lastAttemptLength:gt}),nt})}he.current=!1,E(null),fe.current&&setTimeout(()=>Ye(),100)},[ce,o]),bt=()=>{var Be;if(!H){xt.error("WebGPU not available",{description:"Cracking requires Chrome 113+ or Edge 113+ with WebGPU support."});return}p(!0),fe.current=!0,ae.current=!1,(Be=re.current)==null||Be.enable(),Ye()},ct=()=>{var Be,Ze;p(!1),fe.current=!1,ae.current=!0,(Be=Y.current)==null||Be.abort(),(Ze=re.current)==null||Ze.disable()};return b.jsxs("div",{className:"flex flex-col h-full p-3 gap-3 bg-background border-t border-border overflow-auto",children:[b.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("label",{className:"text-sm text-muted-foreground",children:"Max Length:"}),b.jsx("input",{type:"number",min:1,max:10,value:h,onChange:Be=>g(Math.min(10,Math.max(1,parseInt(Be.target.value)||6))),className:"w-14 px-2 py-1 text-sm bg-muted border border-border rounded"})]}),b.jsxs("label",{className:"flex items-center gap-2 text-sm text-muted-foreground cursor-pointer",children:[b.jsx("input",{type:"checkbox",checked:m,onChange:Be=>v(Be.target.checked),className:"rounded"}),"Retry failed at n+1"]}),b.jsxs("label",{className:"flex items-center gap-2 text-sm text-muted-foreground cursor-pointer",children:[b.jsx("input",{type:"checkbox",checked:y,onChange:Be=>w(Be.target.checked),className:"rounded"}),"Decrypt historical packets if key found"]}),y&&b.jsx("span",{className:"text-xs text-muted-foreground",children:J!==null&&J>0?`(${J.toLocaleString()} packets; messages will stream in as decrypted)`:"(messages will stream in as decrypted)"}),b.jsxs("label",{className:"flex items-center gap-2 text-sm text-muted-foreground cursor-pointer",children:[b.jsx("input",{type:"checkbox",checked:T,onChange:Be=>F(Be.target.checked),className:"rounded"}),"Turbo mode (experimental)"]})]}),b.jsx("button",{onClick:f?ct:bt,disabled:!M||H===!1,className:ut("w-48 px-4 py-1.5 rounded text-sm font-medium",f?"bg-destructive text-destructive-foreground hover:bg-destructive/90":"bg-primary text-primary-foreground hover:bg-primary/90","disabled:opacity-50 disabled:cursor-not-allowed"),children:f?"Stop Search":H===!1?"GPU Not Available":M?"Find Rooms":"Loading dictionary..."}),b.jsxs("div",{className:"flex gap-4 text-sm",children:[b.jsxs("span",{className:"text-muted-foreground",children:["Pending: ",b.jsx("span",{className:"text-foreground font-medium",children:Se})]}),b.jsxs("span",{className:"text-muted-foreground",children:["Cracked: ",b.jsx("span",{className:"text-green-500 font-medium",children:Ae})]}),b.jsxs("span",{className:"text-muted-foreground",children:["Failed: ",b.jsx("span",{className:"text-destructive font-medium",children:Ue})]}),U>0&&b.jsxs("span",{className:"text-muted-foreground",children:["Skipped (dup):"," ",b.jsx("span",{className:"text-muted-foreground font-medium",children:U})]})]}),k&&b.jsxs("div",{className:"space-y-1",children:[b.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[b.jsxs("span",{children:[k.phase==="wordlist"?"Dictionary":k.phase==="bruteforce"?"Bruteforce":"Public Key",k.phase==="bruteforce"&&` - Length ${k.currentLength}`,":"," ",k.currentPosition]}),b.jsxs("span",{children:[k.rateKeysPerSec>=1e9?`${(k.rateKeysPerSec/1e9).toFixed(2)} Gkeys/s`:`${(k.rateKeysPerSec/1e6).toFixed(1)} Mkeys/s`," "," ETA:"," ",k.etaSeconds<60?`${Math.round(k.etaSeconds)}s`:`${Math.round(k.etaSeconds/60)}m`]})]}),b.jsx("div",{className:"h-2 bg-muted rounded overflow-hidden",children:b.jsx("div",{className:"h-full bg-primary transition-all duration-200",style:{width:`${k.percent}%`}})})]}),H===!1&&b.jsx("div",{className:"text-sm text-destructive",children:"WebGPU not available. Cracking requires Chrome 113+ or Edge 113+."}),!M&&H!==!1&&b.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading wordlist..."}),S.length>0&&b.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0",children:[b.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Cracked Rooms:"}),b.jsx("div",{className:"space-y-1",children:S.map((Be,Ze)=>b.jsxs("div",{className:"text-sm bg-green-950/30 border border-green-900/50 rounded px-2 py-1",children:[b.jsxs("span",{className:"text-green-400 font-medium",children:["#",Be.roomName]}),b.jsxs("span",{className:"text-muted-foreground ml-2 text-xs",children:['"',Be.message.slice(0,50),Be.message.length>50?"...":"",'"']})]},Ze))})]}),b.jsx("hr",{className:"border-border"}),b.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:["For unknown-keyed GroupText packets, this will attempt to dictionary attack, then brute force payloads as they arrive, testing room names up to the specified length to discover active rooms on the local mesh (GroupText packets may not be hashtag messages; we have no way of knowing but try as if they are).",b.jsx("strong",{children:" Retry failed at n+1"})," will let the cracker return to the failed queue and pick up messages it couldn't crack, attempting them at one longer length.",b.jsx("strong",{children:" Decrypt historical"})," will run an async job on any room name it finds to see if any historically captured packets will decrypt with that key.",b.jsx("strong",{children:" Turbo mode"})," will push your GPU to the max (target dispatch time of 10s) and may allow accelerated cracking and/or system instability."]})]})}const kE=LA,SE=MA,qx=R.forwardRef(({className:r,...a},o)=>b.jsx(Vc,{className:ut("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...a,ref:o}));qx.displayName=Vc.displayName;const BE=y0("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Gx=R.forwardRef(({side:r="right",className:a,children:o,hideCloseButton:l=!1,...d},f)=>b.jsxs(SE,{children:[b.jsx(qx,{}),b.jsxs(Uc,{ref:f,className:ut(BE({side:r}),a),...d,children:[!l&&b.jsxs(IA,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[b.jsx(Vg,{className:"h-4 w-4"}),b.jsx("span",{className:"sr-only",children:"Close"})]}),o]})]}));Gx.displayName=Uc.displayName;const Kx=({className:r,...a})=>b.jsx("div",{className:ut("flex flex-col space-y-2 text-center sm:text-left",r),...a});Kx.displayName="SheetHeader";const Qx=R.forwardRef(({className:r,...a},o)=>b.jsx(Zc,{ref:o,className:ut("text-lg font-semibold text-foreground",r),...a}));Qx.displayName=Zc.displayName;const PE=R.forwardRef(({className:r,...a},o)=>b.jsx(Wc,{ref:o,className:ut("text-sm text-muted-foreground",r),...a}));PE.displayName=Wc.displayName;const Lg=500;function TE(){const r=R.useRef(null),a=R.useRef(null),o=R.useRef(new Set),[l,d]=R.useState(null),[f,p]=R.useState(null),[h,g]=R.useState(null),[m,v]=R.useState([]),[y,w]=R.useState([]),[T,F]=R.useState([]),[k,E]=R.useState(null),[D,B]=R.useState(!1),[S,N]=R.useState(!1),[M,z]=R.useState(!1),[H,j]=R.useState(0),[J,W]=R.useState(!1),[U,ne]=R.useState(!1),Y=(h==null?void 0:h.favorites)??[],re=R.useRef(null),fe=R.useRef(null);R.useEffect(()=>{fe.current=(f==null?void 0:f.name)??null},[f==null?void 0:f.name]);const ae=R.useCallback(te=>{const ge=fe.current;if(!ge)return!1;const ye=ge.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return new RegExp(`@\\[${ye}\\]`,"i").test(te)},[]),{messages:he,messagesLoading:G,loadingOlder:pe,hasOlderMessages:Z,setMessages:P,fetchMessages:V,fetchOlderMessages:K,addMessageIfNew:$,updateMessageAck:ce}=Ty(k),{unreadCounts:de,mentions:Se,lastMessageTimes:Ae,incrementUnread:Ue,markAllRead:Ye,trackNewMessage:bt}=ty(y,m,k,f==null?void 0:f.name),{repeaterLoggedIn:ct,activeContactIsRepeater:Be,handleTelemetryRequest:Ze,handleRepeaterCommand:dt}=Xv(k,m,P),Mt=R.useMemo(()=>({onHealth:te=>{const ge=re.current;re.current=te,d(te),ge!==null&&ge.radio_connected!==te.radio_connected&&(te.radio_connected?(xt.success("Radio connected",{description:te.serial_port?`Connected to ${te.serial_port}`:void 0}),et.getRadioConfig().then(p).catch(console.error)):xt.error("Radio disconnected",{description:"Check radio connection and power"}))},onError:te=>{xt.error(te.message,{description:te.details})},onSuccess:te=>{xt.success(te.message,{description:te.details})},onContacts:te=>v(te),onChannels:te=>w(te),onMessage:te=>{const ge=a.current,ye=ge&&(te.type==="CHAN"&&ge.type==="channel"||te.type==="PRIV"&&ge.type==="contact")?te.conversation_key===ge.id:!1;if(ye&&$(te),bt(te),!te.outgoing&&!ye){const Te=Hu(te);if(o.current.has(Te))return;if(o.current.add(Te),o.current.size>1e3){const Fe=Array.from(o.current);o.current=new Set(Fe.slice(-500))}let Qe=null;if(te.type==="CHAN"&&te.conversation_key?Qe=Rr("channel",te.conversation_key):te.type==="PRIV"&&te.conversation_key&&(Qe=Rr("contact",te.conversation_key)),Qe){const Fe=ae(te.text);Ue(Qe,Fe)}}},onContact:te=>{v(ge=>{const ye=ge.findIndex(Te=>Te.public_key===te.public_key);if(ye>=0){const Te=[...ge],Qe=ge[ye];return Te[ye]={...Qe,...te,name:te.name??Qe.name,last_path:te.last_path??Qe.last_path,lat:te.lat??Qe.lat,lon:te.lon??Qe.lon},Te}return[...ge,te]})},onRawPacket:te=>{F(ge=>{if(ge.some(Te=>Te.id===te.id))return ge;const ye=[...ge,te];return ye.length>Lg?ye.slice(-Lg):ye})},onMessageAcked:(te,ge,ye)=>{ce(te,ge,ye)}}),[$,bt,Ue,ce,ae]);Zv(Mt);const at=R.useCallback(async()=>{try{const te=await et.getRadioConfig();p(te)}catch(te){console.error("Failed to fetch config:",te)}},[]),gt=R.useCallback(async()=>{try{const te=await et.getSettings();g(te),Fp(te.last_message_times??{})}catch(te){console.error("Failed to fetch app settings:",te)}},[]),qe=R.useCallback(async()=>{try{const te=await et.getUndecryptedPacketCount();j(te.count)}catch(te){console.error("Failed to fetch undecrypted count:",te)}},[]);R.useEffect(()=>{at(),gt(),qe()},[at,gt,qe]);const tt=R.useRef(!1);R.useEffect(()=>{if(!h||tt.current)return;if(h.preferences_migrated){zp(),Lp(),tt.current=!0;return}const te=$y(),ge=ey(),ye=Jv();if(!(te.length>0||ge!=="recent"||Object.keys(ye).length>0)){tt.current=!0;return}tt.current=!0,(async()=>{try{const Fe=await et.migratePreferences({favorites:te,sort_order:ge,last_message_times:ye});Fe.migrated&&xt.success("Preferences migrated",{description:`Migrated ${te.length} favorites to server`}),g(Fe.settings),Fp(Fe.settings.last_message_times??{}),zp(),Lp()}catch(Fe){console.error("Failed to migrate preferences:",Fe)}})()},[h]);const nt=R.useCallback(()=>{const te=zw();if(!te)return null;if(te.type==="raw")return{type:"raw",id:"raw",name:"Raw Packet Feed"};if(te.type==="map")return{type:"map",id:"map",name:"Node Map",mapFocusKey:te.mapFocusKey};if(te.type==="channel"){const ge=y.find(ye=>ye.name===te.name||ye.name===`#${te.name}`);if(ge)return{type:"channel",id:ge.key,name:ge.name}}if(te.type==="contact"){const ge=m.find(ye=>Ei(ye.name,ye.public_key)===te.name);if(ge)return{type:"contact",id:ge.public_key,name:Ei(ge.name,ge.public_key)}}return null},[y,m]),He=R.useRef(!1);R.useEffect(()=>{if(He.current||k||y.length===0&&m.length===0)return;const te=nt();if(te){E(te),He.current=!0;return}const ge=y.find(ye=>ye.name==="Public");ge&&(E({type:"channel",id:ge.key,name:ge.name}),He.current=!0)},[y,m,k,nt]),R.useEffect(()=>{a.current=k,k&&Vw(k)},[k]);const Ct=R.useCallback(async te=>{k&&(k.type==="channel"?await et.sendChannelMessage(k.id,te):await et.sendDirectMessage(k.id,te),await V())},[k,V]),Ce=R.useCallback(async te=>{await et.updateRadioConfig(te),await at()},[at]),Et=R.useCallback(async te=>{await et.updateSettings(te),await gt()},[gt]),Dt=R.useCallback(async te=>{await et.setPrivateKey(te),await at()},[at]),Jt=R.useCallback(async()=>{await et.rebootRadio(),d(ge=>ge&&{...ge,radio_connected:!1}),(async()=>{for(let ge=0;ge<30;ge++){await new Promise(ye=>setTimeout(ye,1e3));try{const ye=await et.getHealth();if(d(ye),ye.radio_connected){at();return}}catch{}}})()},[at]),Ut=R.useCallback(async()=>{try{await et.sendAdvertisement(!0),xt.success("Advertisement sent")}catch(te){console.error("Failed to send advertisement:",te),xt.error("Failed to send advertisement",{description:te instanceof Error?te.message:"Check radio connection"})}},[]),Tn=R.useCallback(te=>{var ge;(ge=r.current)==null||ge.appendText(`@[${te}] `)},[]),Kt=R.useCallback(te=>{E(te),z(!1)},[]),Ft=R.useCallback(async(te,ge)=>{const Te=Ko(Y,te,ge)?Y.filter(Qe=>!(Qe.type===te&&Qe.id===ge)):[...Y,{type:te,id:ge}];g(Qe=>Qe&&{...Qe,favorites:Te});try{const Qe=await et.toggleFavorite(te,ge);g(Qe)}catch(Qe){console.error("Failed to toggle favorite:",Qe),g(Fe=>Fe&&{...Fe,favorites:Y}),xt.error("Failed to update favorite")}},[Y]),Qt=R.useCallback(async te=>{if(confirm("Delete this channel? Message history will be preserved."))try{await et.deleteChannel(te),w(ge=>ge.filter(ye=>ye.key!==te)),E(null),xt.success("Channel deleted")}catch(ge){console.error("Failed to delete channel:",ge),xt.error("Failed to delete channel",{description:ge instanceof Error?ge.message:void 0})}},[]),qn=R.useCallback(async te=>{if(confirm("Delete this contact? Message history will be preserved."))try{await et.deleteContact(te),v(ge=>ge.filter(ye=>ye.public_key!==te)),E(null),xt.success("Contact deleted")}catch(ge){console.error("Failed to delete contact:",ge),xt.error("Failed to delete contact",{description:ge instanceof Error?ge.message:void 0})}},[]),yn=R.useCallback(async(te,ge,ye)=>{const Te=await et.createContact(ge,te||void 0,ye),Qe=await et.getContacts();v(Qe),E({type:"contact",id:Te.public_key,name:Ei(Te.name,Te.public_key)})},[]),me=R.useCallback(async(te,ge,ye)=>{const Te=await et.createChannel(te,ge),Qe=await et.getChannels();w(Qe),E({type:"channel",id:Te.key,name:te}),ye&&(await et.decryptHistoricalPackets({key_type:"channel",channel_key:Te.key}),qe())},[qe]),be=R.useCallback(async(te,ge)=>{const ye=te.startsWith("#")?te:`#${te}`,Te=await et.createChannel(ye),Qe=await et.getChannels();w(Qe),E({type:"channel",id:Te.key,name:ye}),ge&&(await et.decryptHistoricalPackets({key_type:"channel",channel_name:ye}),qe())},[qe]),Re=R.useCallback(async te=>{const ge=(h==null?void 0:h.sidebar_sort_order)??"recent";g(ye=>ye&&{...ye,sidebar_sort_order:te});try{const ye=await et.updateSettings({sidebar_sort_order:te});g(ye)}catch(ye){console.error("Failed to update sort order:",ye),g(Te=>Te&&{...Te,sidebar_sort_order:ge}),xt.error("Failed to save sort preference")}},[h==null?void 0:h.sidebar_sort_order]),ot=b.jsx(K_,{contacts:m,channels:y,activeConversation:k,onSelectConversation:Kt,onNewMessage:()=>{B(!0),z(!1)},lastMessageTimes:Ae,unreadCounts:de,mentions:Se,showCracker:J,crackerRunning:U,onToggleCracker:()=>W(te=>!te),onMarkAllRead:Ye,favorites:Y,sortOrder:(h==null?void 0:h.sidebar_sort_order)??"recent",onSortOrderChange:Re});return b.jsxs("div",{className:"flex flex-col h-dvh",children:[b.jsx(Hy,{health:l,config:f,onSettingsClick:()=>N(!0),onMenuClick:()=>z(!0)}),b.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[b.jsx("div",{className:"hidden md:block",children:ot}),b.jsx(kE,{open:M,onOpenChange:z,children:b.jsxs(Gx,{side:"left",className:"w-[280px] p-0 flex flex-col",hideCloseButton:!0,children:[b.jsx(Kx,{className:"sr-only",children:b.jsx(Qx,{children:"Navigation"})}),b.jsx("div",{className:"flex-1 overflow-hidden",children:ot})]})}),b.jsx("div",{className:"flex-1 flex flex-col bg-background min-w-0",children:k?k.type==="map"?b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"flex justify-between items-center px-4 py-3 border-b border-border font-medium text-lg",children:"Node Map"}),b.jsx("div",{className:"flex-1 overflow-hidden",children:b.jsx(pb,{contacts:m,focusedKey:k.mapFocusKey})})]}):k.type==="raw"?b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"flex justify-between items-center px-4 py-3 border-b border-border font-medium text-lg",children:"Raw Packet Feed"}),b.jsx("div",{className:"flex-1 overflow-hidden",children:b.jsx(V2,{packets:T})})]}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-border font-medium text-lg gap-2",children:[b.jsxs("span",{className:"flex flex-wrap items-baseline gap-x-2 min-w-0 flex-1",children:[b.jsxs("span",{className:"flex-shrink-0",children:[k.type==="channel"&&!k.name.startsWith("#")&&k.name!=="Public"?"#":"",k.name]}),b.jsx("span",{className:"font-normal text-sm text-muted-foreground font-mono truncate cursor-pointer hover:text-primary",onClick:te=>{te.stopPropagation(),navigator.clipboard.writeText(k.id),xt.success(k.type==="channel"?"Room key copied!":"Contact key copied!")},title:"Click to copy",children:k.type==="channel"?k.id.toLowerCase():k.id}),k.type==="contact"&&(()=>{const te=m.find(ye=>ye.public_key===k.id);if(!te)return null;const ge=[];if(te.last_seen&&ge.push(`Last heard: ${Ks(te.last_seen)}`),te.last_path_len===-1?ge.push("flood"):te.last_path_len===0?ge.push("direct"):te.last_path_len>0&&ge.push(`${te.last_path_len} hop${te.last_path_len>1?"s":""}`),St(te.lat,te.lon)){const ye=f&&St(f.lat,f.lon)?Fr(f.lat,f.lon,te.lat,te.lon):null;ge.push(b.jsxs("span",{children:[b.jsxs("span",{className:"font-mono cursor-pointer hover:text-primary hover:underline",onClick:Te=>{Te.stopPropagation();const Qe=window.location.origin+window.location.pathname+jA(te.public_key);window.open(Qe,"_blank")},title:"View on map",children:[te.lat.toFixed(3),", ",te.lon.toFixed(3)]}),ye!==null&&` (${Qo(ye)})`]},"coords"))}return ge.length>0?b.jsxs("span",{className:"font-normal text-sm text-muted-foreground flex-shrink-0",children:["(",ge.map((ye,Te)=>b.jsxs("span",{children:[Te>0&&", ",ye]},Te)),")"]}):null})()]}),b.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(k.type==="channel"||k.type==="contact")&&b.jsx("button",{className:"p-1.5 rounded hover:bg-accent text-xl leading-none",onClick:()=>Ft(k.type,k.id),title:Ko(Y,k.type,k.id)?"Remove from favorites":"Add to favorites",children:Ko(Y,k.type,k.id)?b.jsx("span",{className:"text-yellow-500",children:""}):b.jsx("span",{className:"text-muted-foreground",children:""})}),!(k.type==="channel"&&k.name==="Public")&&b.jsx("button",{className:"p-1.5 rounded hover:bg-destructive/20 text-destructive text-xl leading-none",onClick:()=>{k.type==="channel"?Qt(k.id):qn(k.id)},title:"Delete",children:""})]})]}),b.jsx(Kw,{messages:he,contacts:m,loading:G,loadingOlder:pe,hasOlderMessages:Z,onSenderClick:k.type==="channel"?Tn:void 0,onLoadOlder:K,radioName:f==null?void 0:f.name,config:f}),b.jsx(Jw,{ref:r,onSend:Be?ct?dt:Ze:Ct,disabled:!(l!=null&&l.radio_connected),isRepeaterMode:Be&&!ct,conversationType:k.type,senderName:f==null?void 0:f.name,placeholder:l!=null&&l.radio_connected?Be?ct?"Send CLI command (requires admin login)...":`Enter password for ${k.name} (or . for none)...`:`Message ${k.name}...`:"Radio not connected"})]}):b.jsx("div",{className:"flex-1 flex items-center justify-center text-muted-foreground",children:"Select a conversation or start a new one"})})]}),b.jsx("div",{className:ut("border-t border-border bg-background transition-all duration-200 overflow-hidden",J?"h-[275px]":"h-0"),children:b.jsx(EE,{packets:T,channels:y,visible:J,onChannelCreate:async(te,ge)=>{const ye=await et.createChannel(te,ge),Te=await et.getChannels();w(Te),await et.decryptHistoricalPackets({key_type:"channel",channel_key:ye.key}),qe()},onRunningChange:ne})}),b.jsx(R2,{open:D,contacts:m,undecryptedCount:H,onClose:()=>B(!1),onSelectConversation:te=>{E(te),B(!1)},onCreateContact:yn,onCreateChannel:me,onCreateHashtagChannel:be}),b.jsx(O2,{open:S,config:f,health:l,appSettings:h,onClose:()=>N(!1),onSave:Ce,onSaveAppSettings:Et,onSetPrivateKey:Dt,onReboot:Jt,onAdvertise:Ut,onHealthRefresh:async()=>{const te=await et.getHealth();d(te)}}),b.jsx(Py,{position:"top-right"})]})}Hv.createRoot(document.getElementById("root")).render(b.jsx(R.StrictMode,{children:b.jsx(TE,{})}));
//# sourceMappingURL=index-DviEalHS.js.map
