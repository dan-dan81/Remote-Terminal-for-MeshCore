var Ey=Object.defineProperty;var ky=(n,s,i)=>s in n?Ey(n,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[s]=i;var $o=(n,s,i)=>ky(n,typeof s!="symbol"?s+"":s,i);function Sy(n,s){for(var i=0;i<s.length;i++){const l=s[i];if(typeof l!="string"&&!Array.isArray(l)){for(const u in l)if(u!=="default"&&!(u in n)){const c=Object.getOwnPropertyDescriptor(l,u);c&&Object.defineProperty(n,u,c.get?c:{enumerable:!0,get:()=>l[u]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))l(u);new MutationObserver(u=>{for(const c of u)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function i(u){const c={};return u.integrity&&(c.integrity=u.integrity),u.referrerPolicy&&(c.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?c.credentials="include":u.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(u){if(u.ep)return;u.ep=!0;const c=i(u);fetch(u.href,c)}})();var _l=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ls(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Cx(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var s=n.default;if(typeof s=="function"){var i=function l(){return this instanceof l?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};i.prototype=s.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(n).forEach(function(l){var u=Object.getOwnPropertyDescriptor(n,l);Object.defineProperty(i,l,u.get?u:{enumerable:!0,get:function(){return n[l]}})}),i}var Jf={exports:{}},tl={},e0={exports:{}},vt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yp;function By(){if(Yp)return vt;Yp=1;var n=Symbol.for("react.element"),s=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),h=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),v=Symbol.iterator;function C(D){return D===null||typeof D!="object"?null:(D=v&&D[v]||D["@@iterator"],typeof D=="function"?D:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,k={};function w(D,H,q){this.props=D,this.context=H,this.refs=k,this.updater=q||P}w.prototype.isReactComponent={},w.prototype.setState=function(D,H){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,H,"setState")},w.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function B(){}B.prototype=w.prototype;function b(D,H,q){this.props=D,this.context=H,this.refs=k,this.updater=q||P}var E=b.prototype=new B;E.constructor=b,M(E,w.prototype),E.isPureReactComponent=!0;var T=Array.isArray,F=Object.prototype.hasOwnProperty,I={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function O(D,H,q){var Q,ae={},ce=null,Ae=null;if(H!=null)for(Q in H.ref!==void 0&&(Ae=H.ref),H.key!==void 0&&(ce=""+H.key),H)F.call(H,Q)&&!j.hasOwnProperty(Q)&&(ae[Q]=H[Q]);var pe=arguments.length-2;if(pe===1)ae.children=q;else if(1<pe){for(var xe=Array(pe),Be=0;Be<pe;Be++)xe[Be]=arguments[Be+2];ae.children=xe}if(D&&D.defaultProps)for(Q in pe=D.defaultProps,pe)ae[Q]===void 0&&(ae[Q]=pe[Q]);return{$$typeof:n,type:D,key:ce,ref:Ae,props:ae,_owner:I.current}}function G(D,H){return{$$typeof:n,type:D.type,key:H,ref:D.ref,props:D.props,_owner:D._owner}}function U(D){return typeof D=="object"&&D!==null&&D.$$typeof===n}function K(D){var H={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(q){return H[q]})}var J=/\/+/g;function Y(D,H){return typeof D=="object"&&D!==null&&D.key!=null?K(""+D.key):H.toString(36)}function ie(D,H,q,Q,ae){var ce=typeof D;(ce==="undefined"||ce==="boolean")&&(D=null);var Ae=!1;if(D===null)Ae=!0;else switch(ce){case"string":case"number":Ae=!0;break;case"object":switch(D.$$typeof){case n:case s:Ae=!0}}if(Ae)return Ae=D,ae=ae(Ae),D=Q===""?"."+Y(Ae,0):Q,T(ae)?(q="",D!=null&&(q=D.replace(J,"$&/")+"/"),ie(ae,H,q,"",function(Be){return Be})):ae!=null&&(U(ae)&&(ae=G(ae,q+(!ae.key||Ae&&Ae.key===ae.key?"":(""+ae.key).replace(J,"$&/")+"/")+D)),H.push(ae)),1;if(Ae=0,Q=Q===""?".":Q+":",T(D))for(var pe=0;pe<D.length;pe++){ce=D[pe];var xe=Q+Y(ce,pe);Ae+=ie(ce,H,q,xe,ae)}else if(xe=C(D),typeof xe=="function")for(D=xe.call(D),pe=0;!(ce=D.next()).done;)ce=ce.value,xe=Q+Y(ce,pe++),Ae+=ie(ce,H,q,xe,ae);else if(ce==="object")throw H=String(D),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return Ae}function ge(D,H,q){if(D==null)return D;var Q=[],ae=0;return ie(D,Q,"","",function(ce){return H.call(q,ce,ae++)}),Q}function $(D){if(D._status===-1){var H=D._result;H=H(),H.then(function(q){(D._status===0||D._status===-1)&&(D._status=1,D._result=q)},function(q){(D._status===0||D._status===-1)&&(D._status=2,D._result=q)}),D._status===-1&&(D._status=0,D._result=H)}if(D._status===1)return D._result.default;throw D._result}var se={current:null},W={transition:null},te={ReactCurrentDispatcher:se,ReactCurrentBatchConfig:W,ReactCurrentOwner:I};function Z(){throw Error("act(...) is not supported in production builds of React.")}return vt.Children={map:ge,forEach:function(D,H,q){ge(D,function(){H.apply(this,arguments)},q)},count:function(D){var H=0;return ge(D,function(){H++}),H},toArray:function(D){return ge(D,function(H){return H})||[]},only:function(D){if(!U(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},vt.Component=w,vt.Fragment=i,vt.Profiler=u,vt.PureComponent=b,vt.StrictMode=l,vt.Suspense=g,vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,vt.act=Z,vt.cloneElement=function(D,H,q){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var Q=M({},D.props),ae=D.key,ce=D.ref,Ae=D._owner;if(H!=null){if(H.ref!==void 0&&(ce=H.ref,Ae=I.current),H.key!==void 0&&(ae=""+H.key),D.type&&D.type.defaultProps)var pe=D.type.defaultProps;for(xe in H)F.call(H,xe)&&!j.hasOwnProperty(xe)&&(Q[xe]=H[xe]===void 0&&pe!==void 0?pe[xe]:H[xe])}var xe=arguments.length-2;if(xe===1)Q.children=q;else if(1<xe){pe=Array(xe);for(var Be=0;Be<xe;Be++)pe[Be]=arguments[Be+2];Q.children=pe}return{$$typeof:n,type:D.type,key:ae,ref:ce,props:Q,_owner:Ae}},vt.createContext=function(D){return D={$$typeof:h,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:c,_context:D},D.Consumer=D},vt.createElement=O,vt.createFactory=function(D){var H=O.bind(null,D);return H.type=D,H},vt.createRef=function(){return{current:null}},vt.forwardRef=function(D){return{$$typeof:d,render:D}},vt.isValidElement=U,vt.lazy=function(D){return{$$typeof:x,_payload:{_status:-1,_result:D},_init:$}},vt.memo=function(D,H){return{$$typeof:m,type:D,compare:H===void 0?null:H}},vt.startTransition=function(D){var H=W.transition;W.transition={};try{D()}finally{W.transition=H}},vt.unstable_act=Z,vt.useCallback=function(D,H){return se.current.useCallback(D,H)},vt.useContext=function(D){return se.current.useContext(D)},vt.useDebugValue=function(){},vt.useDeferredValue=function(D){return se.current.useDeferredValue(D)},vt.useEffect=function(D,H){return se.current.useEffect(D,H)},vt.useId=function(){return se.current.useId()},vt.useImperativeHandle=function(D,H,q){return se.current.useImperativeHandle(D,H,q)},vt.useInsertionEffect=function(D,H){return se.current.useInsertionEffect(D,H)},vt.useLayoutEffect=function(D,H){return se.current.useLayoutEffect(D,H)},vt.useMemo=function(D,H){return se.current.useMemo(D,H)},vt.useReducer=function(D,H,q){return se.current.useReducer(D,H,q)},vt.useRef=function(D){return se.current.useRef(D)},vt.useState=function(D){return se.current.useState(D)},vt.useSyncExternalStore=function(D,H,q){return se.current.useSyncExternalStore(D,H,q)},vt.useTransition=function(){return se.current.useTransition()},vt.version="18.3.1",vt}var Xp;function sd(){return Xp||(Xp=1,e0.exports=By()),e0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jp;function Py(){if(Jp)return tl;Jp=1;var n=sd(),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,u=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function h(d,g,m){var x,v={},C=null,P=null;m!==void 0&&(C=""+m),g.key!==void 0&&(C=""+g.key),g.ref!==void 0&&(P=g.ref);for(x in g)l.call(g,x)&&!c.hasOwnProperty(x)&&(v[x]=g[x]);if(d&&d.defaultProps)for(x in g=d.defaultProps,g)v[x]===void 0&&(v[x]=g[x]);return{$$typeof:s,type:d,key:C,ref:P,props:v,_owner:u.current}}return tl.Fragment=i,tl.jsx=h,tl.jsxs=h,tl}var em;function Ty(){return em||(em=1,Jf.exports=Py()),Jf.exports}var _=Ty(),N=sd();const De=ls(N),z0=Sy({__proto__:null,default:De},[N]);var Zu={},t0={exports:{}},Yn={},n0={exports:{}},r0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tm;function Dy(){return tm||(tm=1,(function(n){function s(W,te){var Z=W.length;W.push(te);e:for(;0<Z;){var D=Z-1>>>1,H=W[D];if(0<u(H,te))W[D]=te,W[Z]=H,Z=D;else break e}}function i(W){return W.length===0?null:W[0]}function l(W){if(W.length===0)return null;var te=W[0],Z=W.pop();if(Z!==te){W[0]=Z;e:for(var D=0,H=W.length,q=H>>>1;D<q;){var Q=2*(D+1)-1,ae=W[Q],ce=Q+1,Ae=W[ce];if(0>u(ae,Z))ce<H&&0>u(Ae,ae)?(W[D]=Ae,W[ce]=Z,D=ce):(W[D]=ae,W[Q]=Z,D=Q);else if(ce<H&&0>u(Ae,Z))W[D]=Ae,W[ce]=Z,D=ce;else break e}}return te}function u(W,te){var Z=W.sortIndex-te.sortIndex;return Z!==0?Z:W.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;n.unstable_now=function(){return c.now()}}else{var h=Date,d=h.now();n.unstable_now=function(){return h.now()-d}}var g=[],m=[],x=1,v=null,C=3,P=!1,M=!1,k=!1,w=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(W){for(var te=i(m);te!==null;){if(te.callback===null)l(m);else if(te.startTime<=W)l(m),te.sortIndex=te.expirationTime,s(g,te);else break;te=i(m)}}function T(W){if(k=!1,E(W),!M)if(i(g)!==null)M=!0,$(F);else{var te=i(m);te!==null&&se(T,te.startTime-W)}}function F(W,te){M=!1,k&&(k=!1,B(O),O=-1),P=!0;var Z=C;try{for(E(te),v=i(g);v!==null&&(!(v.expirationTime>te)||W&&!K());){var D=v.callback;if(typeof D=="function"){v.callback=null,C=v.priorityLevel;var H=D(v.expirationTime<=te);te=n.unstable_now(),typeof H=="function"?v.callback=H:v===i(g)&&l(g),E(te)}else l(g);v=i(g)}if(v!==null)var q=!0;else{var Q=i(m);Q!==null&&se(T,Q.startTime-te),q=!1}return q}finally{v=null,C=Z,P=!1}}var I=!1,j=null,O=-1,G=5,U=-1;function K(){return!(n.unstable_now()-U<G)}function J(){if(j!==null){var W=n.unstable_now();U=W;var te=!0;try{te=j(!0,W)}finally{te?Y():(I=!1,j=null)}}else I=!1}var Y;if(typeof b=="function")Y=function(){b(J)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,ge=ie.port2;ie.port1.onmessage=J,Y=function(){ge.postMessage(null)}}else Y=function(){w(J,0)};function $(W){j=W,I||(I=!0,Y())}function se(W,te){O=w(function(){W(n.unstable_now())},te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_continueExecution=function(){M||P||(M=!0,$(F))},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return C},n.unstable_getFirstCallbackNode=function(){return i(g)},n.unstable_next=function(W){switch(C){case 1:case 2:case 3:var te=3;break;default:te=C}var Z=C;C=te;try{return W()}finally{C=Z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(W,te){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var Z=C;C=W;try{return te()}finally{C=Z}},n.unstable_scheduleCallback=function(W,te,Z){var D=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?D+Z:D):Z=D,W){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=Z+H,W={id:x++,callback:te,priorityLevel:W,startTime:Z,expirationTime:H,sortIndex:-1},Z>D?(W.sortIndex=Z,s(m,W),i(g)===null&&W===i(m)&&(k?(B(O),O=-1):k=!0,se(T,Z-D))):(W.sortIndex=H,s(g,W),M||P||(M=!0,$(F))),W},n.unstable_shouldYield=K,n.unstable_wrapCallback=function(W){var te=C;return function(){var Z=C;C=te;try{return W.apply(this,arguments)}finally{C=Z}}}})(r0)),r0}var nm;function Ry(){return nm||(nm=1,n0.exports=Dy()),n0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rm;function Fy(){if(rm)return Yn;rm=1;var n=sd(),s=Ry();function i(e){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=new Set,u={};function c(e,r){h(e,r),h(e+"Capture",r)}function h(e,r){for(u[e]=r,e=0;e<r.length;e++)l.add(r[e])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},v={};function C(e){return g.call(v,e)?!0:g.call(x,e)?!1:m.test(e)?v[e]=!0:(x[e]=!0,!1)}function P(e,r,a,p){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return p?!1:a!==null?!a.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function M(e,r,a,p){if(r===null||typeof r>"u"||P(e,r,a,p))return!0;if(p)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function k(e,r,a,p,y,S,z){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=p,this.attributeNamespace=y,this.mustUseProperty=a,this.propertyName=e,this.type=r,this.sanitizeURL=S,this.removeEmptyString=z}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){w[e]=new k(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var r=e[0];w[r]=new k(r,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){w[e]=new k(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){w[e]=new k(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){w[e]=new k(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){w[e]=new k(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){w[e]=new k(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){w[e]=new k(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){w[e]=new k(e,5,!1,e.toLowerCase(),null,!1,!1)});var B=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var r=e.replace(B,b);w[r]=new k(r,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var r=e.replace(B,b);w[r]=new k(r,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var r=e.replace(B,b);w[r]=new k(r,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){w[e]=new k(e,1,!1,e.toLowerCase(),null,!1,!1)}),w.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){w[e]=new k(e,1,!1,e.toLowerCase(),null,!0,!0)});function E(e,r,a,p){var y=w.hasOwnProperty(r)?w[r]:null;(y!==null?y.type!==0:p||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(M(r,a,y,p)&&(a=null),p||y===null?C(r)&&(a===null?e.removeAttribute(r):e.setAttribute(r,""+a)):y.mustUseProperty?e[y.propertyName]=a===null?y.type===3?!1:"":a:(r=y.attributeName,p=y.attributeNamespace,a===null?e.removeAttribute(r):(y=y.type,a=y===3||y===4&&a===!0?"":""+a,p?e.setAttributeNS(p,r,a):e.setAttribute(r,a))))}var T=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),I=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),K=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),ge=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),W=Symbol.iterator;function te(e){return e===null||typeof e!="object"?null:(e=W&&e[W]||e["@@iterator"],typeof e=="function"?e:null)}var Z=Object.assign,D;function H(e){if(D===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);D=r&&r[1]||""}return`
`+D+e}var q=!1;function Q(e,r){if(!e||q)return"";q=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(me){var p=me}Reflect.construct(e,[],r)}else{try{r.call()}catch(me){p=me}e.call(r.prototype)}else{try{throw Error()}catch(me){p=me}e()}}catch(me){if(me&&p&&typeof me.stack=="string"){for(var y=me.stack.split(`
`),S=p.stack.split(`
`),z=y.length-1,X=S.length-1;1<=z&&0<=X&&y[z]!==S[X];)X--;for(;1<=z&&0<=X;z--,X--)if(y[z]!==S[X]){if(z!==1||X!==1)do if(z--,X--,0>X||y[z]!==S[X]){var ne=`
`+y[z].replace(" at new "," at ");return e.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",e.displayName)),ne}while(1<=z&&0<=X);break}}}finally{q=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?H(e):""}function ae(e){switch(e.tag){case 5:return H(e.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return e=Q(e.type,!1),e;case 11:return e=Q(e.type.render,!1),e;case 1:return e=Q(e.type,!0),e;default:return""}}function ce(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case j:return"Fragment";case I:return"Portal";case G:return"Profiler";case O:return"StrictMode";case Y:return"Suspense";case ie:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case K:return(e.displayName||"Context")+".Consumer";case U:return(e._context.displayName||"Context")+".Provider";case J:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ge:return r=e.displayName||null,r!==null?r:ce(e.type)||"Memo";case $:r=e._payload,e=e._init;try{return ce(e(r))}catch{}}return null}function Ae(e){var r=e.type;switch(e.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=r.render,e=e.displayName||e.name||"",r.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(r);case 8:return r===O?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function pe(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function xe(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Be(e){var r=xe(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),p=""+e[r];if(!e.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var y=a.get,S=a.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return y.call(this)},set:function(z){p=""+z,S.call(this,z)}}),Object.defineProperty(e,r,{enumerable:a.enumerable}),{getValue:function(){return p},setValue:function(z){p=""+z},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function Oe(e){e._valueTracker||(e._valueTracker=Be(e))}function Xe(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var a=r.getValue(),p="";return e&&(p=xe(e)?e.checked?"true":"false":e.value),e=p,e!==a?(r.setValue(e),!0):!1}function Ee(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function je(e,r){var a=r.checked;return Z({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??e._wrapperState.initialChecked})}function at(e,r){var a=r.defaultValue==null?"":r.defaultValue,p=r.checked!=null?r.checked:r.defaultChecked;a=pe(r.value!=null?r.value:a),e._wrapperState={initialChecked:p,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function mt(e,r){r=r.checked,r!=null&&E(e,"checked",r,!1)}function ot(e,r){mt(e,r);var a=pe(r.value),p=r.type;if(a!=null)p==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if(p==="submit"||p==="reset"){e.removeAttribute("value");return}r.hasOwnProperty("value")?Ke(e,r.type,a):r.hasOwnProperty("defaultValue")&&Ke(e,r.type,pe(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(e.defaultChecked=!!r.defaultChecked)}function qe(e,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var p=r.type;if(!(p!=="submit"&&p!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+e._wrapperState.initialValue,a||r===e.value||(e.value=r),e.defaultValue=r}a=e.name,a!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,a!==""&&(e.name=a)}function Ke(e,r,a){(r!=="number"||Ee(e.ownerDocument)!==e)&&(a==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var Qe=Array.isArray;function rt(e,r,a,p){if(e=e.options,r){r={};for(var y=0;y<a.length;y++)r["$"+a[y]]=!0;for(a=0;a<e.length;a++)y=r.hasOwnProperty("$"+e[a].value),e[a].selected!==y&&(e[a].selected=y),y&&p&&(e[a].defaultSelected=!0)}else{for(a=""+pe(a),r=null,y=0;y<e.length;y++){if(e[y].value===a){e[y].selected=!0,p&&(e[y].defaultSelected=!0);return}r!==null||e[y].disabled||(r=e[y])}r!==null&&(r.selected=!0)}}function He(e,r){if(r.dangerouslySetInnerHTML!=null)throw Error(i(91));return Z({},r,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Et(e,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(i(92));if(Qe(a)){if(1<a.length)throw Error(i(93));a=a[0]}r=a}r==null&&(r=""),a=r}e._wrapperState={initialValue:pe(a)}}function zt(e,r){var a=pe(r.value),p=pe(r.defaultValue);a!=null&&(a=""+a,a!==e.value&&(e.value=a),r.defaultValue==null&&e.defaultValue!==a&&(e.defaultValue=a)),p!=null&&(e.defaultValue=""+p)}function Qt(e){var r=e.textContent;r===e._wrapperState.initialValue&&r!==""&&r!==null&&(e.value=r)}function Dt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gt(e,r){return e==null||e==="http://www.w3.org/1999/xhtml"?Dt(r):e==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Yt,$t=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,p,y){MSApp.execUnsafeLocalFunction(function(){return e(r,a,p,y)})}:e})(function(e,r){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=r;else{for(Yt=Yt||document.createElement("div"),Yt.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Yt.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;r.firstChild;)e.appendChild(r.firstChild)}});function Ht(e,r){if(r){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=r;return}}e.textContent=r}var Rt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vt=["Webkit","ms","Moz","O"];Object.keys(Rt).forEach(function(e){Vt.forEach(function(r){r=r+e.charAt(0).toUpperCase()+e.substring(1),Rt[r]=Rt[e]})});function Pe(e,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||Rt.hasOwnProperty(e)&&Rt[e]?(""+r).trim():r+"px"}function _e(e,r){e=e.style;for(var a in r)if(r.hasOwnProperty(a)){var p=a.indexOf("--")===0,y=Pe(a,r[a],p);a==="float"&&(a="cssFloat"),p?e.setProperty(a,y):e[a]=y}}var fe=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,r){if(r){if(fe[e]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(i(137,e));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(i(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(i(61))}if(r.style!=null&&typeof r.style!="object")throw Error(i(62))}}function we(e,r){if(e.indexOf("-")===-1)return typeof r.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ge=null;function re(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ye=null,Ce=null,Ne=null;function Je(e){if(e=yi(e)){if(typeof ye!="function")throw Error(i(280));var r=e.stateNode;r&&(r=Ls(r),ye(e.stateNode,e.type,r))}}function Fe(e){Ce?Ne?Ne.push(e):Ne=[e]:Ce=e}function ft(){if(Ce){var e=Ce,r=Ne;if(Ne=Ce=null,Je(e),r)for(e=0;e<r.length;e++)Je(r[e])}}function St(e,r){return e(r)}function xt(){}var an=!1;function dt(e,r,a){if(an)return e(r,a);an=!0;try{return St(e,r,a)}finally{an=!1,(Ce!==null||Ne!==null)&&(xt(),ft())}}function Pt(e,r){var a=e.stateNode;if(a===null)return null;var p=Ls(a);if(p===null)return null;a=p[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(e=e.type,p=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!p;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var vn=!1;if(d)try{var wt={};Object.defineProperty(wt,"passive",{get:function(){vn=!0}}),window.addEventListener("test",wt,wt),window.removeEventListener("test",wt,wt)}catch{vn=!1}function kt(e,r,a,p,y,S,z,X,ne){var me=Array.prototype.slice.call(arguments,3);try{r.apply(a,me)}catch(Se){this.onError(Se)}}var Mt=!1,Le=null,Br=!1,li=null,Dl={onError:function(e){Mt=!0,Le=e}};function Rl(e,r,a,p,y,S,z,X,ne){Mt=!1,Le=null,kt.apply(Dl,arguments)}function fa(e,r,a,p,y,S,z,X,ne){if(Rl.apply(this,arguments),Mt){if(Mt){var me=Le;Mt=!1,Le=null}else throw Error(i(198));Br||(Br=!0,li=me)}}function Wr(e){var r=e,a=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,(r.flags&4098)!==0&&(a=r.return),e=r.return;while(e)}return r.tag===3?a:null}function ui(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function ha(e){if(Wr(e)!==e)throw Error(i(188))}function Td(e){var r=e.alternate;if(!r){if(r=Wr(e),r===null)throw Error(i(188));return r!==e?null:e}for(var a=e,p=r;;){var y=a.return;if(y===null)break;var S=y.alternate;if(S===null){if(p=y.return,p!==null){a=p;continue}break}if(y.child===S.child){for(S=y.child;S;){if(S===a)return ha(y),e;if(S===p)return ha(y),r;S=S.sibling}throw Error(i(188))}if(a.return!==p.return)a=y,p=S;else{for(var z=!1,X=y.child;X;){if(X===a){z=!0,a=y,p=S;break}if(X===p){z=!0,p=y,a=S;break}X=X.sibling}if(!z){for(X=S.child;X;){if(X===a){z=!0,a=S,p=y;break}if(X===p){z=!0,p=S,a=y;break}X=X.sibling}if(!z)throw Error(i(189))}}if(a.alternate!==p)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?e:r}function Fl(e){return e=Td(e),e!==null?Nl(e):null}function Nl(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var r=Nl(e);if(r!==null)return r;e=e.sibling}return null}var Ll=s.unstable_scheduleCallback,pa=s.unstable_cancelCallback,Dd=s.unstable_shouldYield,ds=s.unstable_requestPaint,Xt=s.unstable_now,Rd=s.unstable_getCurrentPriorityLevel,ma=s.unstable_ImmediatePriority,Ml=s.unstable_UserBlockingPriority,fs=s.unstable_NormalPriority,ga=s.unstable_LowPriority,Mi=s.unstable_IdlePriority,bo=null,er=null;function Co(e){if(er&&typeof er.onCommitFiberRoot=="function")try{er.onCommitFiberRoot(bo,e,void 0,(e.current.flags&128)===128)}catch{}}var ct=Math.clz32?Math.clz32:Ii,Wt=Math.log,hs=Math.LN2;function Ii(e){return e>>>=0,e===0?32:31-(Wt(e)/hs|0)|0}var Pr=64,Oi=4194304;function lt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ut(e,r){var a=e.pendingLanes;if(a===0)return 0;var p=0,y=e.suspendedLanes,S=e.pingedLanes,z=a&268435455;if(z!==0){var X=z&~y;X!==0?p=lt(X):(S&=z,S!==0&&(p=lt(S)))}else z=a&~y,z!==0?p=lt(z):S!==0&&(p=lt(S));if(p===0)return 0;if(r!==0&&r!==p&&(r&y)===0&&(y=p&-p,S=r&-r,y>=S||y===16&&(S&4194240)!==0))return r;if((p&4)!==0&&(p|=a&16),r=e.entangledLanes,r!==0)for(e=e.entanglements,r&=p;0<r;)a=31-ct(r),y=1<<a,p|=e[a],r&=~y;return p}function xa(e,r){switch(e){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ps(e,r){for(var a=e.suspendedLanes,p=e.pingedLanes,y=e.expirationTimes,S=e.pendingLanes;0<S;){var z=31-ct(S),X=1<<z,ne=y[z];ne===-1?((X&a)===0||(X&p)!==0)&&(y[z]=xa(X,r)):ne<=r&&(e.expiredLanes|=X),S&=~X}}function Bn(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Il(){var e=Pr;return Pr<<=1,(Pr&4194240)===0&&(Pr=64),e}function ji(e){for(var r=[],a=0;31>a;a++)r.push(e);return r}function tr(e,r,a){e.pendingLanes|=r,r!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,r=31-ct(r),e[r]=a}function nn(e,r){var a=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;var p=e.eventTimes;for(e=e.expirationTimes;0<a;){var y=31-ct(a),S=1<<y;r[y]=0,p[y]=-1,e[y]=-1,a&=~S}}function Tr(e,r){var a=e.entangledLanes|=r;for(e=e.entanglements;a;){var p=31-ct(a),y=1<<p;y&r|e[p]&r&&(e[p]|=r),a&=~y}}var Ct=0;function zi(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var ms,ci,gs,xs,Eo,ko=!1,Hi=[],nr=null,Dr=null,mr=null,So=new Map,it=new Map,cn=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function va(e,r){switch(e){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":So.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":it.delete(r.pointerId)}}function di(e,r,a,p,y,S){return e===null||e.nativeEvent!==S?(e={blockedOn:r,domEventName:a,eventSystemFlags:p,nativeEvent:S,targetContainers:[y]},r!==null&&(r=yi(r),r!==null&&ci(r)),e):(e.eventSystemFlags|=p,r=e.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),e)}function Aa(e,r,a,p,y){switch(r){case"focusin":return nr=di(nr,e,r,a,p,y),!0;case"dragenter":return Dr=di(Dr,e,r,a,p,y),!0;case"mouseover":return mr=di(mr,e,r,a,p,y),!0;case"pointerover":var S=y.pointerId;return So.set(S,di(So.get(S)||null,e,r,a,p,y)),!0;case"gotpointercapture":return S=y.pointerId,it.set(S,di(it.get(S)||null,e,r,a,p,y)),!0}return!1}function vs(e){var r=Ai(e.target);if(r!==null){var a=Wr(r);if(a!==null){if(r=a.tag,r===13){if(r=ui(a),r!==null){e.blockedOn=r,Eo(e.priority,function(){gs(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function gr(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var a=_s(e.domEventName,e.eventSystemFlags,r[0],e.nativeEvent);if(a===null){a=e.nativeEvent;var p=new a.constructor(a.type,a);Ge=p,a.target.dispatchEvent(p),Ge=null}else return r=yi(a),r!==null&&ci(r),e.blockedOn=a,!1;r.shift()}return!0}function As(e,r,a){gr(e)&&a.delete(r)}function Bo(){ko=!1,nr!==null&&gr(nr)&&(nr=null),Dr!==null&&gr(Dr)&&(Dr=null),mr!==null&&gr(mr)&&(mr=null),So.forEach(As),it.forEach(As)}function Jt(e,r){e.blockedOn===r&&(e.blockedOn=null,ko||(ko=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Bo)))}function rr(e){function r(y){return Jt(y,e)}if(0<Hi.length){Jt(Hi[0],e);for(var a=1;a<Hi.length;a++){var p=Hi[a];p.blockedOn===e&&(p.blockedOn=null)}}for(nr!==null&&Jt(nr,e),Dr!==null&&Jt(Dr,e),mr!==null&&Jt(mr,e),So.forEach(r),it.forEach(r),a=0;a<cn.length;a++)p=cn[a],p.blockedOn===e&&(p.blockedOn=null);for(;0<cn.length&&(a=cn[0],a.blockedOn===null);)vs(a),a.blockedOn===null&&cn.shift()}var fi=T.ReactCurrentBatchConfig,Po=!0;function Fd(e,r,a,p){var y=Ct,S=fi.transition;fi.transition=null;try{Ct=1,To(e,r,a,p)}finally{Ct=y,fi.transition=S}}function Ol(e,r,a,p){var y=Ct,S=fi.transition;fi.transition=null;try{Ct=4,To(e,r,a,p)}finally{Ct=y,fi.transition=S}}function To(e,r,a,p){if(Po){var y=_s(e,r,a,p);if(y===null)t(e,r,p,ys,a),va(e,p);else if(Aa(y,e,r,a,p))p.stopPropagation();else if(va(e,p),r&4&&-1<It.indexOf(e)){for(;y!==null;){var S=yi(y);if(S!==null&&ms(S),S=_s(e,r,a,p),S===null&&t(e,r,p,ys,a),S===y)break;y=S}y!==null&&p.stopPropagation()}else t(e,r,p,null,a)}}var ys=null;function _s(e,r,a,p){if(ys=null,e=re(p),e=Ai(e),e!==null)if(r=Wr(e),r===null)e=null;else if(a=r.tag,a===13){if(e=ui(r),e!==null)return e;e=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null);return ys=e,null}function yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Rd()){case ma:return 1;case Ml:return 4;case fs:case ga:return 16;case Mi:return 536870912;default:return 16}default:return 16}}var qr=null,Mn=null,Gr=null;function ya(){if(Gr)return Gr;var e,r=Mn,a=r.length,p,y="value"in qr?qr.value:qr.textContent,S=y.length;for(e=0;e<a&&r[e]===y[e];e++);var z=a-e;for(p=1;p<=z&&r[a-p]===y[S-p];p++);return Gr=y.slice(e,1<p?1-p:void 0)}function ws(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function Vi(){return!0}function jl(){return!1}function Pn(e){function r(a,p,y,S,z){this._reactName=a,this._targetInst=y,this.type=p,this.nativeEvent=S,this.target=z,this.currentTarget=null;for(var X in e)e.hasOwnProperty(X)&&(a=e[X],this[X]=a?a(S):S[X]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Vi:jl,this.isPropagationStopped=jl,this}return Z(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Vi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Vi)},persist:function(){},isPersistent:Vi}),r}var Ui={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_a=Pn(Ui),hi=Z({},Ui,{view:0,detail:0}),Nd=Pn(hi),Zn,wa,Zi,ir=Z({},hi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zi&&(Zi&&e.type==="mousemove"?(Zn=e.screenX-Zi.screenX,wa=e.screenY-Zi.screenY):wa=Zn=0,Zi=e),Zn)},movementY:function(e){return"movementY"in e?e.movementY:wa}}),ba=Pn(ir),zl=Z({},ir,{dataTransfer:0}),Ca=Pn(zl),Ld=Z({},hi,{relatedTarget:0}),bs=Pn(Ld),Hl=Z({},Ui,{animationName:0,elapsedTime:0,pseudoElement:0}),Md=Pn(Hl),Id=Z({},Ui,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ea=Pn(Id),Od=Z({},Ui,{data:0}),ka=Pn(Od),Vl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jd(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=pi[e])?!!r[e]:!1}function mi(){return jd}var Wn=Z({},hi,{key:function(e){if(e.key){var r=Vl[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=ws(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Cs[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mi,charCode:function(e){return e.type==="keypress"?ws(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ws(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ul=Pn(Wn),Zl=Z({},ir,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wl=Pn(Zl),Sa=Z({},hi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mi}),Ba=Pn(Sa),zd=Z({},Ui,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hd=Pn(zd),ql=Z({},ir,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Vd=Pn(ql),or=[9,13,27,32],$r=d&&"CompositionEvent"in window,Do=null;d&&"documentMode"in document&&(Do=document.documentMode);var Rr=d&&"TextEvent"in window&&!Do,Gl=d&&(!$r||Do&&8<Do&&11>=Do),gi=" ",$l=!1;function Wi(e,r){switch(e){case"keyup":return or.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pa(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Fr=!1;function Ud(e,r){switch(e){case"compositionend":return Pa(r);case"keypress":return r.which!==32?null:($l=!0,gi);case"textInput":return e=r.data,e===gi&&$l?null:e;default:return null}}function Kr(e,r){if(Fr)return e==="compositionend"||!$r&&Wi(e,r)?(e=ya(),Gr=Mn=qr=null,Fr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Gl&&r.locale!=="ko"?null:r.data;default:return null}}var Es={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kl(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!Es[e.type]:r==="textarea"}function ks(e,r,a,p){Fe(p),r=f(r,"onChange"),0<r.length&&(a=new _a("onChange","change",null,a,p),e.push({event:a,listeners:r}))}var Ro=null,In=null;function Zd(e){Oa(e,0)}function Nr(e){var r=_i(e);if(Xe(r))return e}function Wd(e,r){if(e==="change")return r}var xr=!1;if(d){var qi;if(d){var Ss="oninput"in document;if(!Ss){var Bs=document.createElement("div");Bs.setAttribute("oninput","return;"),Ss=typeof Bs.oninput=="function"}qi=Ss}else qi=!1;xr=qi&&(!document.documentMode||9<document.documentMode)}function Fo(){Ro&&(Ro.detachEvent("onpropertychange",Ps),In=Ro=null)}function Ps(e){if(e.propertyName==="value"&&Nr(In)){var r=[];ks(r,In,e,re(e)),dt(Zd,r)}}function Ts(e,r,a){e==="focusin"?(Fo(),Ro=r,In=a,Ro.attachEvent("onpropertychange",Ps)):e==="focusout"&&Fo()}function Gi(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Nr(In)}function Ds(e,r){if(e==="click")return Nr(r)}function Ta(e,r){if(e==="input"||e==="change")return Nr(r)}function Ql(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var sr=typeof Object.is=="function"?Object.is:Ql;function Qr(e,r){if(sr(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var a=Object.keys(e),p=Object.keys(r);if(a.length!==p.length)return!1;for(p=0;p<a.length;p++){var y=a[p];if(!g.call(r,y)||!sr(e[y],r[y]))return!1}return!0}function Yl(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Da(e,r){var a=Yl(e);e=0;for(var p;a;){if(a.nodeType===3){if(p=e+a.textContent.length,e<=r&&p>=r)return{node:a,offset:r-e};e=p}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Yl(a)}}function Xl(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?Xl(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function Ra(){for(var e=window,r=Ee();r instanceof e.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)e=r.contentWindow;else break;r=Ee(e.document)}return r}function Fa(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}function vr(e){var r=Ra(),a=e.focusedElem,p=e.selectionRange;if(r!==a&&a&&a.ownerDocument&&Xl(a.ownerDocument.documentElement,a)){if(p!==null&&Fa(a)){if(r=p.start,e=p.end,e===void 0&&(e=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(e,a.value.length);else if(e=(r=a.ownerDocument||document)&&r.defaultView||window,e.getSelection){e=e.getSelection();var y=a.textContent.length,S=Math.min(p.start,y);p=p.end===void 0?S:Math.min(p.end,y),!e.extend&&S>p&&(y=p,p=S,S=y),y=Da(a,S);var z=Da(a,p);y&&z&&(e.rangeCount!==1||e.anchorNode!==y.node||e.anchorOffset!==y.offset||e.focusNode!==z.node||e.focusOffset!==z.offset)&&(r=r.createRange(),r.setStart(y.node,y.offset),e.removeAllRanges(),S>p?(e.addRange(r),e.extend(z.node,z.offset)):(r.setEnd(z.node,z.offset),e.addRange(r)))}}for(r=[],e=a;e=e.parentNode;)e.nodeType===1&&r.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)e=r[a],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Rs=d&&"documentMode"in document&&11>=document.documentMode,$i=null,Ki=null,No=null,Fs=!1;function Jl(e,r,a){var p=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Fs||$i==null||$i!==Ee(p)||(p=$i,"selectionStart"in p&&Fa(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),No&&Qr(No,p)||(No=p,p=f(Ki,"onSelect"),0<p.length&&(r=new _a("onSelect","select",null,r,a),e.push({event:r,listeners:p}),r.target=$i)))}function Yr(e,r){var a={};return a[e.toLowerCase()]=r.toLowerCase(),a["Webkit"+e]="webkit"+r,a["Moz"+e]="moz"+r,a}var Qi={animationend:Yr("Animation","AnimationEnd"),animationiteration:Yr("Animation","AnimationIteration"),animationstart:Yr("Animation","AnimationStart"),transitionend:Yr("Transition","TransitionEnd")},Xr={},Na={};d&&(Na=document.createElement("div").style,"AnimationEvent"in window||(delete Qi.animationend.animation,delete Qi.animationiteration.animation,delete Qi.animationstart.animation),"TransitionEvent"in window||delete Qi.transitionend.transition);function Lo(e){if(Xr[e])return Xr[e];if(!Qi[e])return e;var r=Qi[e],a;for(a in r)if(r.hasOwnProperty(a)&&a in Na)return Xr[e]=r[a];return e}var eu=Lo("animationend"),Ar=Lo("animationiteration"),La=Lo("animationstart"),Ma=Lo("transitionend"),Yi=new Map,tu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ar(e,r){Yi.set(e,r),c(r,[e])}for(var xi=0;xi<tu.length;xi++){var Ns=tu[xi],nu=Ns.toLowerCase(),qd=Ns[0].toUpperCase()+Ns.slice(1);ar(nu,"on"+qd)}ar(eu,"onAnimationEnd"),ar(Ar,"onAnimationIteration"),ar(La,"onAnimationStart"),ar("dblclick","onDoubleClick"),ar("focusin","onFocus"),ar("focusout","onBlur"),ar(Ma,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ru=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xi));function Ia(e,r,a){var p=e.type||"unknown-event";e.currentTarget=a,fa(p,r,void 0,e),e.currentTarget=null}function Oa(e,r){r=(r&4)!==0;for(var a=0;a<e.length;a++){var p=e[a],y=p.event;p=p.listeners;e:{var S=void 0;if(r)for(var z=p.length-1;0<=z;z--){var X=p[z],ne=X.instance,me=X.currentTarget;if(X=X.listener,ne!==S&&y.isPropagationStopped())break e;Ia(y,X,me),S=ne}else for(z=0;z<p.length;z++){if(X=p[z],ne=X.instance,me=X.currentTarget,X=X.listener,ne!==S&&y.isPropagationStopped())break e;Ia(y,X,me),S=ne}}}if(Br)throw e=li,Br=!1,li=null,e}function Ot(e,r){var a=r[no];a===void 0&&(a=r[no]=new Set);var p=e+"__bubble";a.has(p)||(iu(r,e,2,!1),a.add(p))}function ja(e,r,a){var p=0;r&&(p|=4),iu(a,e,p,r)}var Mo="_reactListening"+Math.random().toString(36).slice(2);function Ji(e){if(!e[Mo]){e[Mo]=!0,l.forEach(function(a){a!=="selectionchange"&&(ru.has(a)||ja(a,!1,e),ja(a,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[Mo]||(r[Mo]=!0,ja("selectionchange",!1,r))}}function iu(e,r,a,p){switch(yt(r)){case 1:var y=Fd;break;case 4:y=Ol;break;default:y=To}a=y.bind(null,r,a,e),y=void 0,!vn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),p?y!==void 0?e.addEventListener(r,a,{capture:!0,passive:y}):e.addEventListener(r,a,!0):y!==void 0?e.addEventListener(r,a,{passive:y}):e.addEventListener(r,a,!1)}function t(e,r,a,p,y){var S=p;if((r&1)===0&&(r&2)===0&&p!==null)e:for(;;){if(p===null)return;var z=p.tag;if(z===3||z===4){var X=p.stateNode.containerInfo;if(X===y||X.nodeType===8&&X.parentNode===y)break;if(z===4)for(z=p.return;z!==null;){var ne=z.tag;if((ne===3||ne===4)&&(ne=z.stateNode.containerInfo,ne===y||ne.nodeType===8&&ne.parentNode===y))return;z=z.return}for(;X!==null;){if(z=Ai(X),z===null)return;if(ne=z.tag,ne===5||ne===6){p=S=z;continue e}X=X.parentNode}}p=p.return}dt(function(){var me=S,Se=re(a),Te=[];e:{var ke=Yi.get(e);if(ke!==void 0){var Ie=_a,Ve=e;switch(e){case"keypress":if(ws(a)===0)break e;case"keydown":case"keyup":Ie=Ul;break;case"focusin":Ve="focus",Ie=bs;break;case"focusout":Ve="blur",Ie=bs;break;case"beforeblur":case"afterblur":Ie=bs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ie=ba;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ie=Ca;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ie=Ba;break;case eu:case Ar:case La:Ie=Md;break;case Ma:Ie=Hd;break;case"scroll":Ie=Nd;break;case"wheel":Ie=Vd;break;case"copy":case"cut":case"paste":Ie=Ea;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ie=Wl}var $e=(r&4)!==0,sn=!$e&&e==="scroll",ue=$e?ke!==null?ke+"Capture":null:ke;$e=[];for(var oe=me,de;oe!==null;){de=oe;var Re=de.stateNode;if(de.tag===5&&Re!==null&&(de=Re,ue!==null&&(Re=Pt(oe,ue),Re!=null&&$e.push(o(oe,Re,de)))),sn)break;oe=oe.return}0<$e.length&&(ke=new Ie(ke,Ve,null,a,Se),Te.push({event:ke,listeners:$e}))}}if((r&7)===0){e:{if(ke=e==="mouseover"||e==="pointerover",Ie=e==="mouseout"||e==="pointerout",ke&&a!==Ge&&(Ve=a.relatedTarget||a.fromElement)&&(Ai(Ve)||Ve[Ft]))break e;if((Ie||ke)&&(ke=Se.window===Se?Se:(ke=Se.ownerDocument)?ke.defaultView||ke.parentWindow:window,Ie?(Ve=a.relatedTarget||a.toElement,Ie=me,Ve=Ve?Ai(Ve):null,Ve!==null&&(sn=Wr(Ve),Ve!==sn||Ve.tag!==5&&Ve.tag!==6)&&(Ve=null)):(Ie=null,Ve=me),Ie!==Ve)){if($e=ba,Re="onMouseLeave",ue="onMouseEnter",oe="mouse",(e==="pointerout"||e==="pointerover")&&($e=Wl,Re="onPointerLeave",ue="onPointerEnter",oe="pointer"),sn=Ie==null?ke:_i(Ie),de=Ve==null?ke:_i(Ve),ke=new $e(Re,oe+"leave",Ie,a,Se),ke.target=sn,ke.relatedTarget=de,Re=null,Ai(Se)===me&&($e=new $e(ue,oe+"enter",Ve,a,Se),$e.target=de,$e.relatedTarget=sn,Re=$e),sn=Re,Ie&&Ve)t:{for($e=Ie,ue=Ve,oe=0,de=$e;de;de=A(de))oe++;for(de=0,Re=ue;Re;Re=A(Re))de++;for(;0<oe-de;)$e=A($e),oe--;for(;0<de-oe;)ue=A(ue),de--;for(;oe--;){if($e===ue||ue!==null&&$e===ue.alternate)break t;$e=A($e),ue=A(ue)}$e=null}else $e=null;Ie!==null&&R(Te,ke,Ie,$e,!1),Ve!==null&&sn!==null&&R(Te,sn,Ve,$e,!0)}}e:{if(ke=me?_i(me):window,Ie=ke.nodeName&&ke.nodeName.toLowerCase(),Ie==="select"||Ie==="input"&&ke.type==="file")var Ye=Wd;else if(Kl(ke))if(xr)Ye=Ta;else{Ye=Gi;var tt=Ts}else(Ie=ke.nodeName)&&Ie.toLowerCase()==="input"&&(ke.type==="checkbox"||ke.type==="radio")&&(Ye=Ds);if(Ye&&(Ye=Ye(e,me))){ks(Te,Ye,a,Se);break e}tt&&tt(e,ke,me),e==="focusout"&&(tt=ke._wrapperState)&&tt.controlled&&ke.type==="number"&&Ke(ke,"number",ke.value)}switch(tt=me?_i(me):window,e){case"focusin":(Kl(tt)||tt.contentEditable==="true")&&($i=tt,Ki=me,No=null);break;case"focusout":No=Ki=$i=null;break;case"mousedown":Fs=!0;break;case"contextmenu":case"mouseup":case"dragend":Fs=!1,Jl(Te,a,Se);break;case"selectionchange":if(Rs)break;case"keydown":case"keyup":Jl(Te,a,Se)}var nt;if($r)e:{switch(e){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else Fr?Wi(e,a)&&(st="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(st="onCompositionStart");st&&(Gl&&a.locale!=="ko"&&(Fr||st!=="onCompositionStart"?st==="onCompositionEnd"&&Fr&&(nt=ya()):(qr=Se,Mn="value"in qr?qr.value:qr.textContent,Fr=!0)),tt=f(me,st),0<tt.length&&(st=new ka(st,e,null,a,Se),Te.push({event:st,listeners:tt}),nt?st.data=nt:(nt=Pa(a),nt!==null&&(st.data=nt)))),(nt=Rr?Ud(e,a):Kr(e,a))&&(me=f(me,"onBeforeInput"),0<me.length&&(Se=new ka("onBeforeInput","beforeinput",null,a,Se),Te.push({event:Se,listeners:me}),Se.data=nt))}Oa(Te,r)})}function o(e,r,a){return{instance:e,listener:r,currentTarget:a}}function f(e,r){for(var a=r+"Capture",p=[];e!==null;){var y=e,S=y.stateNode;y.tag===5&&S!==null&&(y=S,S=Pt(e,a),S!=null&&p.unshift(o(e,S,y)),S=Pt(e,r),S!=null&&p.push(o(e,S,y))),e=e.return}return p}function A(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function R(e,r,a,p,y){for(var S=r._reactName,z=[];a!==null&&a!==p;){var X=a,ne=X.alternate,me=X.stateNode;if(ne!==null&&ne===p)break;X.tag===5&&me!==null&&(X=me,y?(ne=Pt(a,S),ne!=null&&z.unshift(o(a,ne,X))):y||(ne=Pt(a,S),ne!=null&&z.push(o(a,ne,X)))),a=a.return}z.length!==0&&e.push({event:r,listeners:z})}var V=/\r\n?/g,ee=/\u0000|\uFFFD/g;function le(e){return(typeof e=="string"?e:""+e).replace(V,`
`).replace(ee,"")}function he(e,r,a){if(r=le(r),le(e)!==r&&a)throw Error(i(425))}function be(){}var Me=null,et=null;function ht(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var dn=typeof setTimeout=="function"?setTimeout:void 0,ln=typeof clearTimeout=="function"?clearTimeout:void 0,On=typeof Promise=="function"?Promise:void 0,Tn=typeof queueMicrotask=="function"?queueMicrotask:typeof On<"u"?function(e){return On.resolve(null).then(e).catch(eo)}:dn;function eo(e){setTimeout(function(){throw e})}function za(e,r){var a=r,p=0;do{var y=a.nextSibling;if(e.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"){if(p===0){e.removeChild(y),rr(r);return}p--}else a!=="$"&&a!=="$?"&&a!=="$!"||p++;a=y}while(a);rr(r)}function Jr(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return e}function ou(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return e;r--}else a==="/$"&&r++}e=e.previousSibling}return null}var vi=Math.random().toString(36).slice(2),yr="__reactFiber$"+vi,to="__reactProps$"+vi,Ft="__reactContainer$"+vi,no="__reactEvents$"+vi,Gd="__reactListeners$"+vi,$d="__reactHandles$"+vi;function Ai(e){var r=e[yr];if(r)return r;for(var a=e.parentNode;a;){if(r=a[Ft]||a[yr]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(e=ou(e);e!==null;){if(a=e[yr])return a;e=ou(e)}return r}e=a,a=e.parentNode}return null}function yi(e){return e=e[yr]||e[Ft],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function _i(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(i(33))}function Ls(e){return e[to]||null}var Kd=[],Ms=-1;function ro(e){return{current:e}}function qt(e){0>Ms||(e.current=Kd[Ms],Kd[Ms]=null,Ms--)}function Zt(e,r){Ms++,Kd[Ms]=e.current,e.current=r}var io={},Dn=ro(io),qn=ro(!1),Io=io;function Is(e,r){var a=e.type.contextTypes;if(!a)return io;var p=e.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===r)return p.__reactInternalMemoizedMaskedChildContext;var y={},S;for(S in a)y[S]=r[S];return p&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=y),y}function Gn(e){return e=e.childContextTypes,e!=null}function su(){qt(qn),qt(Dn)}function Ah(e,r,a){if(Dn.current!==io)throw Error(i(168));Zt(Dn,r),Zt(qn,a)}function yh(e,r,a){var p=e.stateNode;if(r=r.childContextTypes,typeof p.getChildContext!="function")return a;p=p.getChildContext();for(var y in p)if(!(y in r))throw Error(i(108,Ae(e)||"Unknown",y));return Z({},a,p)}function au(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||io,Io=Dn.current,Zt(Dn,e),Zt(qn,qn.current),!0}function _h(e,r,a){var p=e.stateNode;if(!p)throw Error(i(169));a?(e=yh(e,r,Io),p.__reactInternalMemoizedMergedChildContext=e,qt(qn),qt(Dn),Zt(Dn,e)):qt(qn),Zt(qn,a)}var wi=null,lu=!1,Qd=!1;function wh(e){wi===null?wi=[e]:wi.push(e)}function ZA(e){lu=!0,wh(e)}function oo(){if(!Qd&&wi!==null){Qd=!0;var e=0,r=Ct;try{var a=wi;for(Ct=1;e<a.length;e++){var p=a[e];do p=p(!0);while(p!==null)}wi=null,lu=!1}catch(y){throw wi!==null&&(wi=wi.slice(e+1)),Ll(ma,oo),y}finally{Ct=r,Qd=!1}}return null}var Os=[],js=0,uu=null,cu=0,_r=[],wr=0,Oo=null,bi=1,Ci="";function jo(e,r){Os[js++]=cu,Os[js++]=uu,uu=e,cu=r}function bh(e,r,a){_r[wr++]=bi,_r[wr++]=Ci,_r[wr++]=Oo,Oo=e;var p=bi;e=Ci;var y=32-ct(p)-1;p&=~(1<<y),a+=1;var S=32-ct(r)+y;if(30<S){var z=y-y%5;S=(p&(1<<z)-1).toString(32),p>>=z,y-=z,bi=1<<32-ct(r)+y|a<<y|p,Ci=S+e}else bi=1<<S|a<<y|p,Ci=e}function Yd(e){e.return!==null&&(jo(e,1),bh(e,1,0))}function Xd(e){for(;e===uu;)uu=Os[--js],Os[js]=null,cu=Os[--js],Os[js]=null;for(;e===Oo;)Oo=_r[--wr],_r[wr]=null,Ci=_r[--wr],_r[wr]=null,bi=_r[--wr],_r[wr]=null}var lr=null,ur=null,Kt=!1,Lr=null;function Ch(e,r){var a=kr(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=e,r=e.deletions,r===null?(e.deletions=[a],e.flags|=16):r.push(a)}function Eh(e,r){switch(e.tag){case 5:var a=e.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(e.stateNode=r,lr=e,ur=Jr(r.firstChild),!0):!1;case 6:return r=e.pendingProps===""||r.nodeType!==3?null:r,r!==null?(e.stateNode=r,lr=e,ur=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=Oo!==null?{id:bi,overflow:Ci}:null,e.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=kr(18,null,null,0),a.stateNode=r,a.return=e,e.child=a,lr=e,ur=null,!0):!1;default:return!1}}function Jd(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ef(e){if(Kt){var r=ur;if(r){var a=r;if(!Eh(e,r)){if(Jd(e))throw Error(i(418));r=Jr(a.nextSibling);var p=lr;r&&Eh(e,r)?Ch(p,a):(e.flags=e.flags&-4097|2,Kt=!1,lr=e)}}else{if(Jd(e))throw Error(i(418));e.flags=e.flags&-4097|2,Kt=!1,lr=e}}}function kh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;lr=e}function du(e){if(e!==lr)return!1;if(!Kt)return kh(e),Kt=!0,!1;var r;if((r=e.tag!==3)&&!(r=e.tag!==5)&&(r=e.type,r=r!=="head"&&r!=="body"&&!ht(e.type,e.memoizedProps)),r&&(r=ur)){if(Jd(e))throw Sh(),Error(i(418));for(;r;)Ch(e,r),r=Jr(r.nextSibling)}if(kh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,r=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"){if(r===0){ur=Jr(e.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}e=e.nextSibling}ur=null}}else ur=lr?Jr(e.stateNode.nextSibling):null;return!0}function Sh(){for(var e=ur;e;)e=Jr(e.nextSibling)}function zs(){ur=lr=null,Kt=!1}function tf(e){Lr===null?Lr=[e]:Lr.push(e)}var WA=T.ReactCurrentBatchConfig;function Ha(e,r,a){if(e=a.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(i(309));var p=a.stateNode}if(!p)throw Error(i(147,e));var y=p,S=""+e;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===S?r.ref:(r=function(z){var X=y.refs;z===null?delete X[S]:X[S]=z},r._stringRef=S,r)}if(typeof e!="string")throw Error(i(284));if(!a._owner)throw Error(i(290,e))}return e}function fu(e,r){throw e=Object.prototype.toString.call(r),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}function Bh(e){var r=e._init;return r(e._payload)}function Ph(e){function r(ue,oe){if(e){var de=ue.deletions;de===null?(ue.deletions=[oe],ue.flags|=16):de.push(oe)}}function a(ue,oe){if(!e)return null;for(;oe!==null;)r(ue,oe),oe=oe.sibling;return null}function p(ue,oe){for(ue=new Map;oe!==null;)oe.key!==null?ue.set(oe.key,oe):ue.set(oe.index,oe),oe=oe.sibling;return ue}function y(ue,oe){return ue=po(ue,oe),ue.index=0,ue.sibling=null,ue}function S(ue,oe,de){return ue.index=de,e?(de=ue.alternate,de!==null?(de=de.index,de<oe?(ue.flags|=2,oe):de):(ue.flags|=2,oe)):(ue.flags|=1048576,oe)}function z(ue){return e&&ue.alternate===null&&(ue.flags|=2),ue}function X(ue,oe,de,Re){return oe===null||oe.tag!==6?(oe=Gf(de,ue.mode,Re),oe.return=ue,oe):(oe=y(oe,de),oe.return=ue,oe)}function ne(ue,oe,de,Re){var Ye=de.type;return Ye===j?Se(ue,oe,de.props.children,Re,de.key):oe!==null&&(oe.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===$&&Bh(Ye)===oe.type)?(Re=y(oe,de.props),Re.ref=Ha(ue,oe,de),Re.return=ue,Re):(Re=Mu(de.type,de.key,de.props,null,ue.mode,Re),Re.ref=Ha(ue,oe,de),Re.return=ue,Re)}function me(ue,oe,de,Re){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==de.containerInfo||oe.stateNode.implementation!==de.implementation?(oe=$f(de,ue.mode,Re),oe.return=ue,oe):(oe=y(oe,de.children||[]),oe.return=ue,oe)}function Se(ue,oe,de,Re,Ye){return oe===null||oe.tag!==7?(oe=Go(de,ue.mode,Re,Ye),oe.return=ue,oe):(oe=y(oe,de),oe.return=ue,oe)}function Te(ue,oe,de){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return oe=Gf(""+oe,ue.mode,de),oe.return=ue,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case F:return de=Mu(oe.type,oe.key,oe.props,null,ue.mode,de),de.ref=Ha(ue,null,oe),de.return=ue,de;case I:return oe=$f(oe,ue.mode,de),oe.return=ue,oe;case $:var Re=oe._init;return Te(ue,Re(oe._payload),de)}if(Qe(oe)||te(oe))return oe=Go(oe,ue.mode,de,null),oe.return=ue,oe;fu(ue,oe)}return null}function ke(ue,oe,de,Re){var Ye=oe!==null?oe.key:null;if(typeof de=="string"&&de!==""||typeof de=="number")return Ye!==null?null:X(ue,oe,""+de,Re);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case F:return de.key===Ye?ne(ue,oe,de,Re):null;case I:return de.key===Ye?me(ue,oe,de,Re):null;case $:return Ye=de._init,ke(ue,oe,Ye(de._payload),Re)}if(Qe(de)||te(de))return Ye!==null?null:Se(ue,oe,de,Re,null);fu(ue,de)}return null}function Ie(ue,oe,de,Re,Ye){if(typeof Re=="string"&&Re!==""||typeof Re=="number")return ue=ue.get(de)||null,X(oe,ue,""+Re,Ye);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case F:return ue=ue.get(Re.key===null?de:Re.key)||null,ne(oe,ue,Re,Ye);case I:return ue=ue.get(Re.key===null?de:Re.key)||null,me(oe,ue,Re,Ye);case $:var tt=Re._init;return Ie(ue,oe,de,tt(Re._payload),Ye)}if(Qe(Re)||te(Re))return ue=ue.get(de)||null,Se(oe,ue,Re,Ye,null);fu(oe,Re)}return null}function Ve(ue,oe,de,Re){for(var Ye=null,tt=null,nt=oe,st=oe=0,_n=null;nt!==null&&st<de.length;st++){nt.index>st?(_n=nt,nt=null):_n=nt.sibling;var Tt=ke(ue,nt,de[st],Re);if(Tt===null){nt===null&&(nt=_n);break}e&&nt&&Tt.alternate===null&&r(ue,nt),oe=S(Tt,oe,st),tt===null?Ye=Tt:tt.sibling=Tt,tt=Tt,nt=_n}if(st===de.length)return a(ue,nt),Kt&&jo(ue,st),Ye;if(nt===null){for(;st<de.length;st++)nt=Te(ue,de[st],Re),nt!==null&&(oe=S(nt,oe,st),tt===null?Ye=nt:tt.sibling=nt,tt=nt);return Kt&&jo(ue,st),Ye}for(nt=p(ue,nt);st<de.length;st++)_n=Ie(nt,ue,st,de[st],Re),_n!==null&&(e&&_n.alternate!==null&&nt.delete(_n.key===null?st:_n.key),oe=S(_n,oe,st),tt===null?Ye=_n:tt.sibling=_n,tt=_n);return e&&nt.forEach(function(mo){return r(ue,mo)}),Kt&&jo(ue,st),Ye}function $e(ue,oe,de,Re){var Ye=te(de);if(typeof Ye!="function")throw Error(i(150));if(de=Ye.call(de),de==null)throw Error(i(151));for(var tt=Ye=null,nt=oe,st=oe=0,_n=null,Tt=de.next();nt!==null&&!Tt.done;st++,Tt=de.next()){nt.index>st?(_n=nt,nt=null):_n=nt.sibling;var mo=ke(ue,nt,Tt.value,Re);if(mo===null){nt===null&&(nt=_n);break}e&&nt&&mo.alternate===null&&r(ue,nt),oe=S(mo,oe,st),tt===null?Ye=mo:tt.sibling=mo,tt=mo,nt=_n}if(Tt.done)return a(ue,nt),Kt&&jo(ue,st),Ye;if(nt===null){for(;!Tt.done;st++,Tt=de.next())Tt=Te(ue,Tt.value,Re),Tt!==null&&(oe=S(Tt,oe,st),tt===null?Ye=Tt:tt.sibling=Tt,tt=Tt);return Kt&&jo(ue,st),Ye}for(nt=p(ue,nt);!Tt.done;st++,Tt=de.next())Tt=Ie(nt,ue,st,Tt.value,Re),Tt!==null&&(e&&Tt.alternate!==null&&nt.delete(Tt.key===null?st:Tt.key),oe=S(Tt,oe,st),tt===null?Ye=Tt:tt.sibling=Tt,tt=Tt);return e&&nt.forEach(function(Cy){return r(ue,Cy)}),Kt&&jo(ue,st),Ye}function sn(ue,oe,de,Re){if(typeof de=="object"&&de!==null&&de.type===j&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case F:e:{for(var Ye=de.key,tt=oe;tt!==null;){if(tt.key===Ye){if(Ye=de.type,Ye===j){if(tt.tag===7){a(ue,tt.sibling),oe=y(tt,de.props.children),oe.return=ue,ue=oe;break e}}else if(tt.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===$&&Bh(Ye)===tt.type){a(ue,tt.sibling),oe=y(tt,de.props),oe.ref=Ha(ue,tt,de),oe.return=ue,ue=oe;break e}a(ue,tt);break}else r(ue,tt);tt=tt.sibling}de.type===j?(oe=Go(de.props.children,ue.mode,Re,de.key),oe.return=ue,ue=oe):(Re=Mu(de.type,de.key,de.props,null,ue.mode,Re),Re.ref=Ha(ue,oe,de),Re.return=ue,ue=Re)}return z(ue);case I:e:{for(tt=de.key;oe!==null;){if(oe.key===tt)if(oe.tag===4&&oe.stateNode.containerInfo===de.containerInfo&&oe.stateNode.implementation===de.implementation){a(ue,oe.sibling),oe=y(oe,de.children||[]),oe.return=ue,ue=oe;break e}else{a(ue,oe);break}else r(ue,oe);oe=oe.sibling}oe=$f(de,ue.mode,Re),oe.return=ue,ue=oe}return z(ue);case $:return tt=de._init,sn(ue,oe,tt(de._payload),Re)}if(Qe(de))return Ve(ue,oe,de,Re);if(te(de))return $e(ue,oe,de,Re);fu(ue,de)}return typeof de=="string"&&de!==""||typeof de=="number"?(de=""+de,oe!==null&&oe.tag===6?(a(ue,oe.sibling),oe=y(oe,de),oe.return=ue,ue=oe):(a(ue,oe),oe=Gf(de,ue.mode,Re),oe.return=ue,ue=oe),z(ue)):a(ue,oe)}return sn}var Hs=Ph(!0),Th=Ph(!1),hu=ro(null),pu=null,Vs=null,nf=null;function rf(){nf=Vs=pu=null}function of(e){var r=hu.current;qt(hu),e._currentValue=r}function sf(e,r,a){for(;e!==null;){var p=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,p!==null&&(p.childLanes|=r)):p!==null&&(p.childLanes&r)!==r&&(p.childLanes|=r),e===a)break;e=e.return}}function Us(e,r){pu=e,nf=Vs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&r)!==0&&($n=!0),e.firstContext=null)}function br(e){var r=e._currentValue;if(nf!==e)if(e={context:e,memoizedValue:r,next:null},Vs===null){if(pu===null)throw Error(i(308));Vs=e,pu.dependencies={lanes:0,firstContext:e}}else Vs=Vs.next=e;return r}var zo=null;function af(e){zo===null?zo=[e]:zo.push(e)}function Dh(e,r,a,p){var y=r.interleaved;return y===null?(a.next=a,af(r)):(a.next=y.next,y.next=a),r.interleaved=a,Ei(e,p)}function Ei(e,r){e.lanes|=r;var a=e.alternate;for(a!==null&&(a.lanes|=r),a=e,e=e.return;e!==null;)e.childLanes|=r,a=e.alternate,a!==null&&(a.childLanes|=r),a=e,e=e.return;return a.tag===3?a.stateNode:null}var so=!1;function lf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rh(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ki(e,r){return{eventTime:e,lane:r,tag:0,payload:null,callback:null,next:null}}function ao(e,r,a){var p=e.updateQueue;if(p===null)return null;if(p=p.shared,(Bt&2)!==0){var y=p.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),p.pending=r,Ei(e,a)}return y=p.interleaved,y===null?(r.next=r,af(p)):(r.next=y.next,y.next=r),p.interleaved=r,Ei(e,a)}function mu(e,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var p=r.lanes;p&=e.pendingLanes,a|=p,r.lanes=a,Tr(e,a)}}function Fh(e,r){var a=e.updateQueue,p=e.alternate;if(p!==null&&(p=p.updateQueue,a===p)){var y=null,S=null;if(a=a.firstBaseUpdate,a!==null){do{var z={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};S===null?y=S=z:S=S.next=z,a=a.next}while(a!==null);S===null?y=S=r:S=S.next=r}else y=S=r;a={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:S,shared:p.shared,effects:p.effects},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=r:e.next=r,a.lastBaseUpdate=r}function gu(e,r,a,p){var y=e.updateQueue;so=!1;var S=y.firstBaseUpdate,z=y.lastBaseUpdate,X=y.shared.pending;if(X!==null){y.shared.pending=null;var ne=X,me=ne.next;ne.next=null,z===null?S=me:z.next=me,z=ne;var Se=e.alternate;Se!==null&&(Se=Se.updateQueue,X=Se.lastBaseUpdate,X!==z&&(X===null?Se.firstBaseUpdate=me:X.next=me,Se.lastBaseUpdate=ne))}if(S!==null){var Te=y.baseState;z=0,Se=me=ne=null,X=S;do{var ke=X.lane,Ie=X.eventTime;if((p&ke)===ke){Se!==null&&(Se=Se.next={eventTime:Ie,lane:0,tag:X.tag,payload:X.payload,callback:X.callback,next:null});e:{var Ve=e,$e=X;switch(ke=r,Ie=a,$e.tag){case 1:if(Ve=$e.payload,typeof Ve=="function"){Te=Ve.call(Ie,Te,ke);break e}Te=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=$e.payload,ke=typeof Ve=="function"?Ve.call(Ie,Te,ke):Ve,ke==null)break e;Te=Z({},Te,ke);break e;case 2:so=!0}}X.callback!==null&&X.lane!==0&&(e.flags|=64,ke=y.effects,ke===null?y.effects=[X]:ke.push(X))}else Ie={eventTime:Ie,lane:ke,tag:X.tag,payload:X.payload,callback:X.callback,next:null},Se===null?(me=Se=Ie,ne=Te):Se=Se.next=Ie,z|=ke;if(X=X.next,X===null){if(X=y.shared.pending,X===null)break;ke=X,X=ke.next,ke.next=null,y.lastBaseUpdate=ke,y.shared.pending=null}}while(!0);if(Se===null&&(ne=Te),y.baseState=ne,y.firstBaseUpdate=me,y.lastBaseUpdate=Se,r=y.shared.interleaved,r!==null){y=r;do z|=y.lane,y=y.next;while(y!==r)}else S===null&&(y.shared.lanes=0);Uo|=z,e.lanes=z,e.memoizedState=Te}}function Nh(e,r,a){if(e=r.effects,r.effects=null,e!==null)for(r=0;r<e.length;r++){var p=e[r],y=p.callback;if(y!==null){if(p.callback=null,p=a,typeof y!="function")throw Error(i(191,y));y.call(p)}}}var Va={},ei=ro(Va),Ua=ro(Va),Za=ro(Va);function Ho(e){if(e===Va)throw Error(i(174));return e}function uf(e,r){switch(Zt(Za,r),Zt(Ua,e),Zt(ei,Va),e=r.nodeType,e){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Gt(null,"");break;default:e=e===8?r.parentNode:r,r=e.namespaceURI||null,e=e.tagName,r=Gt(r,e)}qt(ei),Zt(ei,r)}function Zs(){qt(ei),qt(Ua),qt(Za)}function Lh(e){Ho(Za.current);var r=Ho(ei.current),a=Gt(r,e.type);r!==a&&(Zt(Ua,e),Zt(ei,a))}function cf(e){Ua.current===e&&(qt(ei),qt(Ua))}var en=ro(0);function xu(e){for(var r=e;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var df=[];function ff(){for(var e=0;e<df.length;e++)df[e]._workInProgressVersionPrimary=null;df.length=0}var vu=T.ReactCurrentDispatcher,hf=T.ReactCurrentBatchConfig,Vo=0,tn=null,fn=null,An=null,Au=!1,Wa=!1,qa=0,qA=0;function Rn(){throw Error(i(321))}function pf(e,r){if(r===null)return!1;for(var a=0;a<r.length&&a<e.length;a++)if(!sr(e[a],r[a]))return!1;return!0}function mf(e,r,a,p,y,S){if(Vo=S,tn=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,vu.current=e===null||e.memoizedState===null?QA:YA,e=a(p,y),Wa){S=0;do{if(Wa=!1,qa=0,25<=S)throw Error(i(301));S+=1,An=fn=null,r.updateQueue=null,vu.current=XA,e=a(p,y)}while(Wa)}if(vu.current=wu,r=fn!==null&&fn.next!==null,Vo=0,An=fn=tn=null,Au=!1,r)throw Error(i(300));return e}function gf(){var e=qa!==0;return qa=0,e}function ti(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return An===null?tn.memoizedState=An=e:An=An.next=e,An}function Cr(){if(fn===null){var e=tn.alternate;e=e!==null?e.memoizedState:null}else e=fn.next;var r=An===null?tn.memoizedState:An.next;if(r!==null)An=r,fn=e;else{if(e===null)throw Error(i(310));fn=e,e={memoizedState:fn.memoizedState,baseState:fn.baseState,baseQueue:fn.baseQueue,queue:fn.queue,next:null},An===null?tn.memoizedState=An=e:An=An.next=e}return An}function Ga(e,r){return typeof r=="function"?r(e):r}function xf(e){var r=Cr(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=e;var p=fn,y=p.baseQueue,S=a.pending;if(S!==null){if(y!==null){var z=y.next;y.next=S.next,S.next=z}p.baseQueue=y=S,a.pending=null}if(y!==null){S=y.next,p=p.baseState;var X=z=null,ne=null,me=S;do{var Se=me.lane;if((Vo&Se)===Se)ne!==null&&(ne=ne.next={lane:0,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),p=me.hasEagerState?me.eagerState:e(p,me.action);else{var Te={lane:Se,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null};ne===null?(X=ne=Te,z=p):ne=ne.next=Te,tn.lanes|=Se,Uo|=Se}me=me.next}while(me!==null&&me!==S);ne===null?z=p:ne.next=X,sr(p,r.memoizedState)||($n=!0),r.memoizedState=p,r.baseState=z,r.baseQueue=ne,a.lastRenderedState=p}if(e=a.interleaved,e!==null){y=e;do S=y.lane,tn.lanes|=S,Uo|=S,y=y.next;while(y!==e)}else y===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function vf(e){var r=Cr(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=e;var p=a.dispatch,y=a.pending,S=r.memoizedState;if(y!==null){a.pending=null;var z=y=y.next;do S=e(S,z.action),z=z.next;while(z!==y);sr(S,r.memoizedState)||($n=!0),r.memoizedState=S,r.baseQueue===null&&(r.baseState=S),a.lastRenderedState=S}return[S,p]}function Mh(){}function Ih(e,r){var a=tn,p=Cr(),y=r(),S=!sr(p.memoizedState,y);if(S&&(p.memoizedState=y,$n=!0),p=p.queue,Af(zh.bind(null,a,p,e),[e]),p.getSnapshot!==r||S||An!==null&&An.memoizedState.tag&1){if(a.flags|=2048,$a(9,jh.bind(null,a,p,y,r),void 0,null),yn===null)throw Error(i(349));(Vo&30)!==0||Oh(a,r,y)}return y}function Oh(e,r,a){e.flags|=16384,e={getSnapshot:r,value:a},r=tn.updateQueue,r===null?(r={lastEffect:null,stores:null},tn.updateQueue=r,r.stores=[e]):(a=r.stores,a===null?r.stores=[e]:a.push(e))}function jh(e,r,a,p){r.value=a,r.getSnapshot=p,Hh(r)&&Vh(e)}function zh(e,r,a){return a(function(){Hh(r)&&Vh(e)})}function Hh(e){var r=e.getSnapshot;e=e.value;try{var a=r();return!sr(e,a)}catch{return!0}}function Vh(e){var r=Ei(e,1);r!==null&&jr(r,e,1,-1)}function Uh(e){var r=ti();return typeof e=="function"&&(e=e()),r.memoizedState=r.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:e},r.queue=e,e=e.dispatch=KA.bind(null,tn,e),[r.memoizedState,e]}function $a(e,r,a,p){return e={tag:e,create:r,destroy:a,deps:p,next:null},r=tn.updateQueue,r===null?(r={lastEffect:null,stores:null},tn.updateQueue=r,r.lastEffect=e.next=e):(a=r.lastEffect,a===null?r.lastEffect=e.next=e:(p=a.next,a.next=e,e.next=p,r.lastEffect=e)),e}function Zh(){return Cr().memoizedState}function yu(e,r,a,p){var y=ti();tn.flags|=e,y.memoizedState=$a(1|r,a,void 0,p===void 0?null:p)}function _u(e,r,a,p){var y=Cr();p=p===void 0?null:p;var S=void 0;if(fn!==null){var z=fn.memoizedState;if(S=z.destroy,p!==null&&pf(p,z.deps)){y.memoizedState=$a(r,a,S,p);return}}tn.flags|=e,y.memoizedState=$a(1|r,a,S,p)}function Wh(e,r){return yu(8390656,8,e,r)}function Af(e,r){return _u(2048,8,e,r)}function qh(e,r){return _u(4,2,e,r)}function Gh(e,r){return _u(4,4,e,r)}function $h(e,r){if(typeof r=="function")return e=e(),r(e),function(){r(null)};if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function Kh(e,r,a){return a=a!=null?a.concat([e]):null,_u(4,4,$h.bind(null,r,e),a)}function yf(){}function Qh(e,r){var a=Cr();r=r===void 0?null:r;var p=a.memoizedState;return p!==null&&r!==null&&pf(r,p[1])?p[0]:(a.memoizedState=[e,r],e)}function Yh(e,r){var a=Cr();r=r===void 0?null:r;var p=a.memoizedState;return p!==null&&r!==null&&pf(r,p[1])?p[0]:(e=e(),a.memoizedState=[e,r],e)}function Xh(e,r,a){return(Vo&21)===0?(e.baseState&&(e.baseState=!1,$n=!0),e.memoizedState=a):(sr(a,r)||(a=Il(),tn.lanes|=a,Uo|=a,e.baseState=!0),r)}function GA(e,r){var a=Ct;Ct=a!==0&&4>a?a:4,e(!0);var p=hf.transition;hf.transition={};try{e(!1),r()}finally{Ct=a,hf.transition=p}}function Jh(){return Cr().memoizedState}function $A(e,r,a){var p=fo(e);if(a={lane:p,action:a,hasEagerState:!1,eagerState:null,next:null},ep(e))tp(r,a);else if(a=Dh(e,r,a,p),a!==null){var y=zn();jr(a,e,p,y),np(a,r,p)}}function KA(e,r,a){var p=fo(e),y={lane:p,action:a,hasEagerState:!1,eagerState:null,next:null};if(ep(e))tp(r,y);else{var S=e.alternate;if(e.lanes===0&&(S===null||S.lanes===0)&&(S=r.lastRenderedReducer,S!==null))try{var z=r.lastRenderedState,X=S(z,a);if(y.hasEagerState=!0,y.eagerState=X,sr(X,z)){var ne=r.interleaved;ne===null?(y.next=y,af(r)):(y.next=ne.next,ne.next=y),r.interleaved=y;return}}catch{}finally{}a=Dh(e,r,y,p),a!==null&&(y=zn(),jr(a,e,p,y),np(a,r,p))}}function ep(e){var r=e.alternate;return e===tn||r!==null&&r===tn}function tp(e,r){Wa=Au=!0;var a=e.pending;a===null?r.next=r:(r.next=a.next,a.next=r),e.pending=r}function np(e,r,a){if((a&4194240)!==0){var p=r.lanes;p&=e.pendingLanes,a|=p,r.lanes=a,Tr(e,a)}}var wu={readContext:br,useCallback:Rn,useContext:Rn,useEffect:Rn,useImperativeHandle:Rn,useInsertionEffect:Rn,useLayoutEffect:Rn,useMemo:Rn,useReducer:Rn,useRef:Rn,useState:Rn,useDebugValue:Rn,useDeferredValue:Rn,useTransition:Rn,useMutableSource:Rn,useSyncExternalStore:Rn,useId:Rn,unstable_isNewReconciler:!1},QA={readContext:br,useCallback:function(e,r){return ti().memoizedState=[e,r===void 0?null:r],e},useContext:br,useEffect:Wh,useImperativeHandle:function(e,r,a){return a=a!=null?a.concat([e]):null,yu(4194308,4,$h.bind(null,r,e),a)},useLayoutEffect:function(e,r){return yu(4194308,4,e,r)},useInsertionEffect:function(e,r){return yu(4,2,e,r)},useMemo:function(e,r){var a=ti();return r=r===void 0?null:r,e=e(),a.memoizedState=[e,r],e},useReducer:function(e,r,a){var p=ti();return r=a!==void 0?a(r):r,p.memoizedState=p.baseState=r,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},p.queue=e,e=e.dispatch=$A.bind(null,tn,e),[p.memoizedState,e]},useRef:function(e){var r=ti();return e={current:e},r.memoizedState=e},useState:Uh,useDebugValue:yf,useDeferredValue:function(e){return ti().memoizedState=e},useTransition:function(){var e=Uh(!1),r=e[0];return e=GA.bind(null,e[1]),ti().memoizedState=e,[r,e]},useMutableSource:function(){},useSyncExternalStore:function(e,r,a){var p=tn,y=ti();if(Kt){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),yn===null)throw Error(i(349));(Vo&30)!==0||Oh(p,r,a)}y.memoizedState=a;var S={value:a,getSnapshot:r};return y.queue=S,Wh(zh.bind(null,p,S,e),[e]),p.flags|=2048,$a(9,jh.bind(null,p,S,a,r),void 0,null),a},useId:function(){var e=ti(),r=yn.identifierPrefix;if(Kt){var a=Ci,p=bi;a=(p&~(1<<32-ct(p)-1)).toString(32)+a,r=":"+r+"R"+a,a=qa++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=qA++,r=":"+r+"r"+a.toString(32)+":";return e.memoizedState=r},unstable_isNewReconciler:!1},YA={readContext:br,useCallback:Qh,useContext:br,useEffect:Af,useImperativeHandle:Kh,useInsertionEffect:qh,useLayoutEffect:Gh,useMemo:Yh,useReducer:xf,useRef:Zh,useState:function(){return xf(Ga)},useDebugValue:yf,useDeferredValue:function(e){var r=Cr();return Xh(r,fn.memoizedState,e)},useTransition:function(){var e=xf(Ga)[0],r=Cr().memoizedState;return[e,r]},useMutableSource:Mh,useSyncExternalStore:Ih,useId:Jh,unstable_isNewReconciler:!1},XA={readContext:br,useCallback:Qh,useContext:br,useEffect:Af,useImperativeHandle:Kh,useInsertionEffect:qh,useLayoutEffect:Gh,useMemo:Yh,useReducer:vf,useRef:Zh,useState:function(){return vf(Ga)},useDebugValue:yf,useDeferredValue:function(e){var r=Cr();return fn===null?r.memoizedState=e:Xh(r,fn.memoizedState,e)},useTransition:function(){var e=vf(Ga)[0],r=Cr().memoizedState;return[e,r]},useMutableSource:Mh,useSyncExternalStore:Ih,useId:Jh,unstable_isNewReconciler:!1};function Mr(e,r){if(e&&e.defaultProps){r=Z({},r),e=e.defaultProps;for(var a in e)r[a]===void 0&&(r[a]=e[a]);return r}return r}function _f(e,r,a,p){r=e.memoizedState,a=a(p,r),a=a==null?r:Z({},r,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var bu={isMounted:function(e){return(e=e._reactInternals)?Wr(e)===e:!1},enqueueSetState:function(e,r,a){e=e._reactInternals;var p=zn(),y=fo(e),S=ki(p,y);S.payload=r,a!=null&&(S.callback=a),r=ao(e,S,y),r!==null&&(jr(r,e,y,p),mu(r,e,y))},enqueueReplaceState:function(e,r,a){e=e._reactInternals;var p=zn(),y=fo(e),S=ki(p,y);S.tag=1,S.payload=r,a!=null&&(S.callback=a),r=ao(e,S,y),r!==null&&(jr(r,e,y,p),mu(r,e,y))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var a=zn(),p=fo(e),y=ki(a,p);y.tag=2,r!=null&&(y.callback=r),r=ao(e,y,p),r!==null&&(jr(r,e,p,a),mu(r,e,p))}};function rp(e,r,a,p,y,S,z){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(p,S,z):r.prototype&&r.prototype.isPureReactComponent?!Qr(a,p)||!Qr(y,S):!0}function ip(e,r,a){var p=!1,y=io,S=r.contextType;return typeof S=="object"&&S!==null?S=br(S):(y=Gn(r)?Io:Dn.current,p=r.contextTypes,S=(p=p!=null)?Is(e,y):io),r=new r(a,S),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=bu,e.stateNode=r,r._reactInternals=e,p&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=y,e.__reactInternalMemoizedMaskedChildContext=S),r}function op(e,r,a,p){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,p),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,p),r.state!==e&&bu.enqueueReplaceState(r,r.state,null)}function wf(e,r,a,p){var y=e.stateNode;y.props=a,y.state=e.memoizedState,y.refs={},lf(e);var S=r.contextType;typeof S=="object"&&S!==null?y.context=br(S):(S=Gn(r)?Io:Dn.current,y.context=Is(e,S)),y.state=e.memoizedState,S=r.getDerivedStateFromProps,typeof S=="function"&&(_f(e,r,S,a),y.state=e.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(r=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),r!==y.state&&bu.enqueueReplaceState(y,y.state,null),gu(e,a,y,p),y.state=e.memoizedState),typeof y.componentDidMount=="function"&&(e.flags|=4194308)}function Ws(e,r){try{var a="",p=r;do a+=ae(p),p=p.return;while(p);var y=a}catch(S){y=`
Error generating stack: `+S.message+`
`+S.stack}return{value:e,source:r,stack:y,digest:null}}function bf(e,r,a){return{value:e,source:null,stack:a??null,digest:r??null}}function Cf(e,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var JA=typeof WeakMap=="function"?WeakMap:Map;function sp(e,r,a){a=ki(-1,a),a.tag=3,a.payload={element:null};var p=r.value;return a.callback=function(){Tu||(Tu=!0,jf=p),Cf(e,r)},a}function ap(e,r,a){a=ki(-1,a),a.tag=3;var p=e.type.getDerivedStateFromError;if(typeof p=="function"){var y=r.value;a.payload=function(){return p(y)},a.callback=function(){Cf(e,r)}}var S=e.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(a.callback=function(){Cf(e,r),typeof p!="function"&&(uo===null?uo=new Set([this]):uo.add(this));var z=r.stack;this.componentDidCatch(r.value,{componentStack:z!==null?z:""})}),a}function lp(e,r,a){var p=e.pingCache;if(p===null){p=e.pingCache=new JA;var y=new Set;p.set(r,y)}else y=p.get(r),y===void 0&&(y=new Set,p.set(r,y));y.has(a)||(y.add(a),e=hy.bind(null,e,r,a),r.then(e,e))}function up(e){do{var r;if((r=e.tag===13)&&(r=e.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return e;e=e.return}while(e!==null);return null}function cp(e,r,a,p,y){return(e.mode&1)===0?(e===r?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=ki(-1,1),r.tag=2,ao(a,r,1))),a.lanes|=1),e):(e.flags|=65536,e.lanes=y,e)}var ey=T.ReactCurrentOwner,$n=!1;function jn(e,r,a,p){r.child=e===null?Th(r,null,a,p):Hs(r,e.child,a,p)}function dp(e,r,a,p,y){a=a.render;var S=r.ref;return Us(r,y),p=mf(e,r,a,p,S,y),a=gf(),e!==null&&!$n?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~y,Si(e,r,y)):(Kt&&a&&Yd(r),r.flags|=1,jn(e,r,p,y),r.child)}function fp(e,r,a,p,y){if(e===null){var S=a.type;return typeof S=="function"&&!qf(S)&&S.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=S,hp(e,r,S,p,y)):(e=Mu(a.type,null,p,r,r.mode,y),e.ref=r.ref,e.return=r,r.child=e)}if(S=e.child,(e.lanes&y)===0){var z=S.memoizedProps;if(a=a.compare,a=a!==null?a:Qr,a(z,p)&&e.ref===r.ref)return Si(e,r,y)}return r.flags|=1,e=po(S,p),e.ref=r.ref,e.return=r,r.child=e}function hp(e,r,a,p,y){if(e!==null){var S=e.memoizedProps;if(Qr(S,p)&&e.ref===r.ref)if($n=!1,r.pendingProps=p=S,(e.lanes&y)!==0)(e.flags&131072)!==0&&($n=!0);else return r.lanes=e.lanes,Si(e,r,y)}return Ef(e,r,a,p,y)}function pp(e,r,a){var p=r.pendingProps,y=p.children,S=e!==null?e.memoizedState:null;if(p.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Zt(Gs,cr),cr|=a;else{if((a&1073741824)===0)return e=S!==null?S.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:e,cachePool:null,transitions:null},r.updateQueue=null,Zt(Gs,cr),cr|=e,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=S!==null?S.baseLanes:a,Zt(Gs,cr),cr|=p}else S!==null?(p=S.baseLanes|a,r.memoizedState=null):p=a,Zt(Gs,cr),cr|=p;return jn(e,r,y,a),r.child}function mp(e,r){var a=r.ref;(e===null&&a!==null||e!==null&&e.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function Ef(e,r,a,p,y){var S=Gn(a)?Io:Dn.current;return S=Is(r,S),Us(r,y),a=mf(e,r,a,p,S,y),p=gf(),e!==null&&!$n?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~y,Si(e,r,y)):(Kt&&p&&Yd(r),r.flags|=1,jn(e,r,a,y),r.child)}function gp(e,r,a,p,y){if(Gn(a)){var S=!0;au(r)}else S=!1;if(Us(r,y),r.stateNode===null)Eu(e,r),ip(r,a,p),wf(r,a,p,y),p=!0;else if(e===null){var z=r.stateNode,X=r.memoizedProps;z.props=X;var ne=z.context,me=a.contextType;typeof me=="object"&&me!==null?me=br(me):(me=Gn(a)?Io:Dn.current,me=Is(r,me));var Se=a.getDerivedStateFromProps,Te=typeof Se=="function"||typeof z.getSnapshotBeforeUpdate=="function";Te||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(X!==p||ne!==me)&&op(r,z,p,me),so=!1;var ke=r.memoizedState;z.state=ke,gu(r,p,z,y),ne=r.memoizedState,X!==p||ke!==ne||qn.current||so?(typeof Se=="function"&&(_f(r,a,Se,p),ne=r.memoizedState),(X=so||rp(r,a,X,p,ke,ne,me))?(Te||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(r.flags|=4194308)):(typeof z.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=p,r.memoizedState=ne),z.props=p,z.state=ne,z.context=me,p=X):(typeof z.componentDidMount=="function"&&(r.flags|=4194308),p=!1)}else{z=r.stateNode,Rh(e,r),X=r.memoizedProps,me=r.type===r.elementType?X:Mr(r.type,X),z.props=me,Te=r.pendingProps,ke=z.context,ne=a.contextType,typeof ne=="object"&&ne!==null?ne=br(ne):(ne=Gn(a)?Io:Dn.current,ne=Is(r,ne));var Ie=a.getDerivedStateFromProps;(Se=typeof Ie=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(X!==Te||ke!==ne)&&op(r,z,p,ne),so=!1,ke=r.memoizedState,z.state=ke,gu(r,p,z,y);var Ve=r.memoizedState;X!==Te||ke!==Ve||qn.current||so?(typeof Ie=="function"&&(_f(r,a,Ie,p),Ve=r.memoizedState),(me=so||rp(r,a,me,p,ke,Ve,ne)||!1)?(Se||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(p,Ve,ne),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(p,Ve,ne)),typeof z.componentDidUpdate=="function"&&(r.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof z.componentDidUpdate!="function"||X===e.memoizedProps&&ke===e.memoizedState||(r.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||X===e.memoizedProps&&ke===e.memoizedState||(r.flags|=1024),r.memoizedProps=p,r.memoizedState=Ve),z.props=p,z.state=Ve,z.context=ne,p=me):(typeof z.componentDidUpdate!="function"||X===e.memoizedProps&&ke===e.memoizedState||(r.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||X===e.memoizedProps&&ke===e.memoizedState||(r.flags|=1024),p=!1)}return kf(e,r,a,p,S,y)}function kf(e,r,a,p,y,S){mp(e,r);var z=(r.flags&128)!==0;if(!p&&!z)return y&&_h(r,a,!1),Si(e,r,S);p=r.stateNode,ey.current=r;var X=z&&typeof a.getDerivedStateFromError!="function"?null:p.render();return r.flags|=1,e!==null&&z?(r.child=Hs(r,e.child,null,S),r.child=Hs(r,null,X,S)):jn(e,r,X,S),r.memoizedState=p.state,y&&_h(r,a,!0),r.child}function xp(e){var r=e.stateNode;r.pendingContext?Ah(e,r.pendingContext,r.pendingContext!==r.context):r.context&&Ah(e,r.context,!1),uf(e,r.containerInfo)}function vp(e,r,a,p,y){return zs(),tf(y),r.flags|=256,jn(e,r,a,p),r.child}var Sf={dehydrated:null,treeContext:null,retryLane:0};function Bf(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ap(e,r,a){var p=r.pendingProps,y=en.current,S=!1,z=(r.flags&128)!==0,X;if((X=z)||(X=e!==null&&e.memoizedState===null?!1:(y&2)!==0),X?(S=!0,r.flags&=-129):(e===null||e.memoizedState!==null)&&(y|=1),Zt(en,y&1),e===null)return ef(r),e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((r.mode&1)===0?r.lanes=1:e.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(z=p.children,e=p.fallback,S?(p=r.mode,S=r.child,z={mode:"hidden",children:z},(p&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=z):S=Iu(z,p,0,null),e=Go(e,p,a,null),S.return=r,e.return=r,S.sibling=e,r.child=S,r.child.memoizedState=Bf(a),r.memoizedState=Sf,e):Pf(r,z));if(y=e.memoizedState,y!==null&&(X=y.dehydrated,X!==null))return ty(e,r,z,p,X,y,a);if(S){S=p.fallback,z=r.mode,y=e.child,X=y.sibling;var ne={mode:"hidden",children:p.children};return(z&1)===0&&r.child!==y?(p=r.child,p.childLanes=0,p.pendingProps=ne,r.deletions=null):(p=po(y,ne),p.subtreeFlags=y.subtreeFlags&14680064),X!==null?S=po(X,S):(S=Go(S,z,a,null),S.flags|=2),S.return=r,p.return=r,p.sibling=S,r.child=p,p=S,S=r.child,z=e.child.memoizedState,z=z===null?Bf(a):{baseLanes:z.baseLanes|a,cachePool:null,transitions:z.transitions},S.memoizedState=z,S.childLanes=e.childLanes&~a,r.memoizedState=Sf,p}return S=e.child,e=S.sibling,p=po(S,{mode:"visible",children:p.children}),(r.mode&1)===0&&(p.lanes=a),p.return=r,p.sibling=null,e!==null&&(a=r.deletions,a===null?(r.deletions=[e],r.flags|=16):a.push(e)),r.child=p,r.memoizedState=null,p}function Pf(e,r){return r=Iu({mode:"visible",children:r},e.mode,0,null),r.return=e,e.child=r}function Cu(e,r,a,p){return p!==null&&tf(p),Hs(r,e.child,null,a),e=Pf(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function ty(e,r,a,p,y,S,z){if(a)return r.flags&256?(r.flags&=-257,p=bf(Error(i(422))),Cu(e,r,z,p)):r.memoizedState!==null?(r.child=e.child,r.flags|=128,null):(S=p.fallback,y=r.mode,p=Iu({mode:"visible",children:p.children},y,0,null),S=Go(S,y,z,null),S.flags|=2,p.return=r,S.return=r,p.sibling=S,r.child=p,(r.mode&1)!==0&&Hs(r,e.child,null,z),r.child.memoizedState=Bf(z),r.memoizedState=Sf,S);if((r.mode&1)===0)return Cu(e,r,z,null);if(y.data==="$!"){if(p=y.nextSibling&&y.nextSibling.dataset,p)var X=p.dgst;return p=X,S=Error(i(419)),p=bf(S,p,void 0),Cu(e,r,z,p)}if(X=(z&e.childLanes)!==0,$n||X){if(p=yn,p!==null){switch(z&-z){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(p.suspendedLanes|z))!==0?0:y,y!==0&&y!==S.retryLane&&(S.retryLane=y,Ei(e,y),jr(p,e,y,-1))}return Wf(),p=bf(Error(i(421))),Cu(e,r,z,p)}return y.data==="$?"?(r.flags|=128,r.child=e.child,r=py.bind(null,e),y._reactRetry=r,null):(e=S.treeContext,ur=Jr(y.nextSibling),lr=r,Kt=!0,Lr=null,e!==null&&(_r[wr++]=bi,_r[wr++]=Ci,_r[wr++]=Oo,bi=e.id,Ci=e.overflow,Oo=r),r=Pf(r,p.children),r.flags|=4096,r)}function yp(e,r,a){e.lanes|=r;var p=e.alternate;p!==null&&(p.lanes|=r),sf(e.return,r,a)}function Tf(e,r,a,p,y){var S=e.memoizedState;S===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:p,tail:a,tailMode:y}:(S.isBackwards=r,S.rendering=null,S.renderingStartTime=0,S.last=p,S.tail=a,S.tailMode=y)}function _p(e,r,a){var p=r.pendingProps,y=p.revealOrder,S=p.tail;if(jn(e,r,p.children,a),p=en.current,(p&2)!==0)p=p&1|2,r.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&yp(e,a,r);else if(e.tag===19)yp(e,a,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}p&=1}if(Zt(en,p),(r.mode&1)===0)r.memoizedState=null;else switch(y){case"forwards":for(a=r.child,y=null;a!==null;)e=a.alternate,e!==null&&xu(e)===null&&(y=a),a=a.sibling;a=y,a===null?(y=r.child,r.child=null):(y=a.sibling,a.sibling=null),Tf(r,!1,y,a,S);break;case"backwards":for(a=null,y=r.child,r.child=null;y!==null;){if(e=y.alternate,e!==null&&xu(e)===null){r.child=y;break}e=y.sibling,y.sibling=a,a=y,y=e}Tf(r,!0,a,null,S);break;case"together":Tf(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Eu(e,r){(r.mode&1)===0&&e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2)}function Si(e,r,a){if(e!==null&&(r.dependencies=e.dependencies),Uo|=r.lanes,(a&r.childLanes)===0)return null;if(e!==null&&r.child!==e.child)throw Error(i(153));if(r.child!==null){for(e=r.child,a=po(e,e.pendingProps),r.child=a,a.return=r;e.sibling!==null;)e=e.sibling,a=a.sibling=po(e,e.pendingProps),a.return=r;a.sibling=null}return r.child}function ny(e,r,a){switch(r.tag){case 3:xp(r),zs();break;case 5:Lh(r);break;case 1:Gn(r.type)&&au(r);break;case 4:uf(r,r.stateNode.containerInfo);break;case 10:var p=r.type._context,y=r.memoizedProps.value;Zt(hu,p._currentValue),p._currentValue=y;break;case 13:if(p=r.memoizedState,p!==null)return p.dehydrated!==null?(Zt(en,en.current&1),r.flags|=128,null):(a&r.child.childLanes)!==0?Ap(e,r,a):(Zt(en,en.current&1),e=Si(e,r,a),e!==null?e.sibling:null);Zt(en,en.current&1);break;case 19:if(p=(a&r.childLanes)!==0,(e.flags&128)!==0){if(p)return _p(e,r,a);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Zt(en,en.current),p)break;return null;case 22:case 23:return r.lanes=0,pp(e,r,a)}return Si(e,r,a)}var wp,Df,bp,Cp;wp=function(e,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Df=function(){},bp=function(e,r,a,p){var y=e.memoizedProps;if(y!==p){e=r.stateNode,Ho(ei.current);var S=null;switch(a){case"input":y=je(e,y),p=je(e,p),S=[];break;case"select":y=Z({},y,{value:void 0}),p=Z({},p,{value:void 0}),S=[];break;case"textarea":y=He(e,y),p=He(e,p),S=[];break;default:typeof y.onClick!="function"&&typeof p.onClick=="function"&&(e.onclick=be)}ve(a,p);var z;a=null;for(me in y)if(!p.hasOwnProperty(me)&&y.hasOwnProperty(me)&&y[me]!=null)if(me==="style"){var X=y[me];for(z in X)X.hasOwnProperty(z)&&(a||(a={}),a[z]="")}else me!=="dangerouslySetInnerHTML"&&me!=="children"&&me!=="suppressContentEditableWarning"&&me!=="suppressHydrationWarning"&&me!=="autoFocus"&&(u.hasOwnProperty(me)?S||(S=[]):(S=S||[]).push(me,null));for(me in p){var ne=p[me];if(X=y!=null?y[me]:void 0,p.hasOwnProperty(me)&&ne!==X&&(ne!=null||X!=null))if(me==="style")if(X){for(z in X)!X.hasOwnProperty(z)||ne&&ne.hasOwnProperty(z)||(a||(a={}),a[z]="");for(z in ne)ne.hasOwnProperty(z)&&X[z]!==ne[z]&&(a||(a={}),a[z]=ne[z])}else a||(S||(S=[]),S.push(me,a)),a=ne;else me==="dangerouslySetInnerHTML"?(ne=ne?ne.__html:void 0,X=X?X.__html:void 0,ne!=null&&X!==ne&&(S=S||[]).push(me,ne)):me==="children"?typeof ne!="string"&&typeof ne!="number"||(S=S||[]).push(me,""+ne):me!=="suppressContentEditableWarning"&&me!=="suppressHydrationWarning"&&(u.hasOwnProperty(me)?(ne!=null&&me==="onScroll"&&Ot("scroll",e),S||X===ne||(S=[])):(S=S||[]).push(me,ne))}a&&(S=S||[]).push("style",a);var me=S;(r.updateQueue=me)&&(r.flags|=4)}},Cp=function(e,r,a,p){a!==p&&(r.flags|=4)};function Ka(e,r){if(!Kt)switch(e.tailMode){case"hidden":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var p=null;a!==null;)a.alternate!==null&&(p=a),a=a.sibling;p===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:p.sibling=null}}function Fn(e){var r=e.alternate!==null&&e.alternate.child===e.child,a=0,p=0;if(r)for(var y=e.child;y!==null;)a|=y.lanes|y.childLanes,p|=y.subtreeFlags&14680064,p|=y.flags&14680064,y.return=e,y=y.sibling;else for(y=e.child;y!==null;)a|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=e,y=y.sibling;return e.subtreeFlags|=p,e.childLanes=a,r}function ry(e,r,a){var p=r.pendingProps;switch(Xd(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fn(r),null;case 1:return Gn(r.type)&&su(),Fn(r),null;case 3:return p=r.stateNode,Zs(),qt(qn),qt(Dn),ff(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(e===null||e.child===null)&&(du(r)?r.flags|=4:e===null||e.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Lr!==null&&(Vf(Lr),Lr=null))),Df(e,r),Fn(r),null;case 5:cf(r);var y=Ho(Za.current);if(a=r.type,e!==null&&r.stateNode!=null)bp(e,r,a,p,y),e.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!p){if(r.stateNode===null)throw Error(i(166));return Fn(r),null}if(e=Ho(ei.current),du(r)){p=r.stateNode,a=r.type;var S=r.memoizedProps;switch(p[yr]=r,p[to]=S,e=(r.mode&1)!==0,a){case"dialog":Ot("cancel",p),Ot("close",p);break;case"iframe":case"object":case"embed":Ot("load",p);break;case"video":case"audio":for(y=0;y<Xi.length;y++)Ot(Xi[y],p);break;case"source":Ot("error",p);break;case"img":case"image":case"link":Ot("error",p),Ot("load",p);break;case"details":Ot("toggle",p);break;case"input":at(p,S),Ot("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!S.multiple},Ot("invalid",p);break;case"textarea":Et(p,S),Ot("invalid",p)}ve(a,S),y=null;for(var z in S)if(S.hasOwnProperty(z)){var X=S[z];z==="children"?typeof X=="string"?p.textContent!==X&&(S.suppressHydrationWarning!==!0&&he(p.textContent,X,e),y=["children",X]):typeof X=="number"&&p.textContent!==""+X&&(S.suppressHydrationWarning!==!0&&he(p.textContent,X,e),y=["children",""+X]):u.hasOwnProperty(z)&&X!=null&&z==="onScroll"&&Ot("scroll",p)}switch(a){case"input":Oe(p),qe(p,S,!0);break;case"textarea":Oe(p),Qt(p);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(p.onclick=be)}p=y,r.updateQueue=p,p!==null&&(r.flags|=4)}else{z=y.nodeType===9?y:y.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Dt(a)),e==="http://www.w3.org/1999/xhtml"?a==="script"?(e=z.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof p.is=="string"?e=z.createElement(a,{is:p.is}):(e=z.createElement(a),a==="select"&&(z=e,p.multiple?z.multiple=!0:p.size&&(z.size=p.size))):e=z.createElementNS(e,a),e[yr]=r,e[to]=p,wp(e,r,!1,!1),r.stateNode=e;e:{switch(z=we(a,p),a){case"dialog":Ot("cancel",e),Ot("close",e),y=p;break;case"iframe":case"object":case"embed":Ot("load",e),y=p;break;case"video":case"audio":for(y=0;y<Xi.length;y++)Ot(Xi[y],e);y=p;break;case"source":Ot("error",e),y=p;break;case"img":case"image":case"link":Ot("error",e),Ot("load",e),y=p;break;case"details":Ot("toggle",e),y=p;break;case"input":at(e,p),y=je(e,p),Ot("invalid",e);break;case"option":y=p;break;case"select":e._wrapperState={wasMultiple:!!p.multiple},y=Z({},p,{value:void 0}),Ot("invalid",e);break;case"textarea":Et(e,p),y=He(e,p),Ot("invalid",e);break;default:y=p}ve(a,y),X=y;for(S in X)if(X.hasOwnProperty(S)){var ne=X[S];S==="style"?_e(e,ne):S==="dangerouslySetInnerHTML"?(ne=ne?ne.__html:void 0,ne!=null&&$t(e,ne)):S==="children"?typeof ne=="string"?(a!=="textarea"||ne!=="")&&Ht(e,ne):typeof ne=="number"&&Ht(e,""+ne):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(u.hasOwnProperty(S)?ne!=null&&S==="onScroll"&&Ot("scroll",e):ne!=null&&E(e,S,ne,z))}switch(a){case"input":Oe(e),qe(e,p,!1);break;case"textarea":Oe(e),Qt(e);break;case"option":p.value!=null&&e.setAttribute("value",""+pe(p.value));break;case"select":e.multiple=!!p.multiple,S=p.value,S!=null?rt(e,!!p.multiple,S,!1):p.defaultValue!=null&&rt(e,!!p.multiple,p.defaultValue,!0);break;default:typeof y.onClick=="function"&&(e.onclick=be)}switch(a){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Fn(r),null;case 6:if(e&&r.stateNode!=null)Cp(e,r,e.memoizedProps,p);else{if(typeof p!="string"&&r.stateNode===null)throw Error(i(166));if(a=Ho(Za.current),Ho(ei.current),du(r)){if(p=r.stateNode,a=r.memoizedProps,p[yr]=r,(S=p.nodeValue!==a)&&(e=lr,e!==null))switch(e.tag){case 3:he(p.nodeValue,a,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&he(p.nodeValue,a,(e.mode&1)!==0)}S&&(r.flags|=4)}else p=(a.nodeType===9?a:a.ownerDocument).createTextNode(p),p[yr]=r,r.stateNode=p}return Fn(r),null;case 13:if(qt(en),p=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Kt&&ur!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Sh(),zs(),r.flags|=98560,S=!1;else if(S=du(r),p!==null&&p.dehydrated!==null){if(e===null){if(!S)throw Error(i(318));if(S=r.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(i(317));S[yr]=r}else zs(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Fn(r),S=!1}else Lr!==null&&(Vf(Lr),Lr=null),S=!0;if(!S)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=a,r):(p=p!==null,p!==(e!==null&&e.memoizedState!==null)&&p&&(r.child.flags|=8192,(r.mode&1)!==0&&(e===null||(en.current&1)!==0?hn===0&&(hn=3):Wf())),r.updateQueue!==null&&(r.flags|=4),Fn(r),null);case 4:return Zs(),Df(e,r),e===null&&Ji(r.stateNode.containerInfo),Fn(r),null;case 10:return of(r.type._context),Fn(r),null;case 17:return Gn(r.type)&&su(),Fn(r),null;case 19:if(qt(en),S=r.memoizedState,S===null)return Fn(r),null;if(p=(r.flags&128)!==0,z=S.rendering,z===null)if(p)Ka(S,!1);else{if(hn!==0||e!==null&&(e.flags&128)!==0)for(e=r.child;e!==null;){if(z=xu(e),z!==null){for(r.flags|=128,Ka(S,!1),p=z.updateQueue,p!==null&&(r.updateQueue=p,r.flags|=4),r.subtreeFlags=0,p=a,a=r.child;a!==null;)S=a,e=p,S.flags&=14680066,z=S.alternate,z===null?(S.childLanes=0,S.lanes=e,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=z.childLanes,S.lanes=z.lanes,S.child=z.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=z.memoizedProps,S.memoizedState=z.memoizedState,S.updateQueue=z.updateQueue,S.type=z.type,e=z.dependencies,S.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return Zt(en,en.current&1|2),r.child}e=e.sibling}S.tail!==null&&Xt()>$s&&(r.flags|=128,p=!0,Ka(S,!1),r.lanes=4194304)}else{if(!p)if(e=xu(z),e!==null){if(r.flags|=128,p=!0,a=e.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),Ka(S,!0),S.tail===null&&S.tailMode==="hidden"&&!z.alternate&&!Kt)return Fn(r),null}else 2*Xt()-S.renderingStartTime>$s&&a!==1073741824&&(r.flags|=128,p=!0,Ka(S,!1),r.lanes=4194304);S.isBackwards?(z.sibling=r.child,r.child=z):(a=S.last,a!==null?a.sibling=z:r.child=z,S.last=z)}return S.tail!==null?(r=S.tail,S.rendering=r,S.tail=r.sibling,S.renderingStartTime=Xt(),r.sibling=null,a=en.current,Zt(en,p?a&1|2:a&1),r):(Fn(r),null);case 22:case 23:return Zf(),p=r.memoizedState!==null,e!==null&&e.memoizedState!==null!==p&&(r.flags|=8192),p&&(r.mode&1)!==0?(cr&1073741824)!==0&&(Fn(r),r.subtreeFlags&6&&(r.flags|=8192)):Fn(r),null;case 24:return null;case 25:return null}throw Error(i(156,r.tag))}function iy(e,r){switch(Xd(r),r.tag){case 1:return Gn(r.type)&&su(),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return Zs(),qt(qn),qt(Dn),ff(),e=r.flags,(e&65536)!==0&&(e&128)===0?(r.flags=e&-65537|128,r):null;case 5:return cf(r),null;case 13:if(qt(en),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(i(340));zs()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return qt(en),null;case 4:return Zs(),null;case 10:return of(r.type._context),null;case 22:case 23:return Zf(),null;case 24:return null;default:return null}}var ku=!1,Nn=!1,oy=typeof WeakSet=="function"?WeakSet:Set,ze=null;function qs(e,r){var a=e.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(p){rn(e,r,p)}else a.current=null}function Rf(e,r,a){try{a()}catch(p){rn(e,r,p)}}var Ep=!1;function sy(e,r){if(Me=Po,e=Ra(),Fa(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var p=a.getSelection&&a.getSelection();if(p&&p.rangeCount!==0){a=p.anchorNode;var y=p.anchorOffset,S=p.focusNode;p=p.focusOffset;try{a.nodeType,S.nodeType}catch{a=null;break e}var z=0,X=-1,ne=-1,me=0,Se=0,Te=e,ke=null;t:for(;;){for(var Ie;Te!==a||y!==0&&Te.nodeType!==3||(X=z+y),Te!==S||p!==0&&Te.nodeType!==3||(ne=z+p),Te.nodeType===3&&(z+=Te.nodeValue.length),(Ie=Te.firstChild)!==null;)ke=Te,Te=Ie;for(;;){if(Te===e)break t;if(ke===a&&++me===y&&(X=z),ke===S&&++Se===p&&(ne=z),(Ie=Te.nextSibling)!==null)break;Te=ke,ke=Te.parentNode}Te=Ie}a=X===-1||ne===-1?null:{start:X,end:ne}}else a=null}a=a||{start:0,end:0}}else a=null;for(et={focusedElem:e,selectionRange:a},Po=!1,ze=r;ze!==null;)if(r=ze,e=r.child,(r.subtreeFlags&1028)!==0&&e!==null)e.return=r,ze=e;else for(;ze!==null;){r=ze;try{var Ve=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(Ve!==null){var $e=Ve.memoizedProps,sn=Ve.memoizedState,ue=r.stateNode,oe=ue.getSnapshotBeforeUpdate(r.elementType===r.type?$e:Mr(r.type,$e),sn);ue.__reactInternalSnapshotBeforeUpdate=oe}break;case 3:var de=r.stateNode.containerInfo;de.nodeType===1?de.textContent="":de.nodeType===9&&de.documentElement&&de.removeChild(de.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(Re){rn(r,r.return,Re)}if(e=r.sibling,e!==null){e.return=r.return,ze=e;break}ze=r.return}return Ve=Ep,Ep=!1,Ve}function Qa(e,r,a){var p=r.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var y=p=p.next;do{if((y.tag&e)===e){var S=y.destroy;y.destroy=void 0,S!==void 0&&Rf(r,a,S)}y=y.next}while(y!==p)}}function Su(e,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var p=a.create;a.destroy=p()}a=a.next}while(a!==r)}}function Ff(e){var r=e.ref;if(r!==null){var a=e.stateNode;switch(e.tag){case 5:e=a;break;default:e=a}typeof r=="function"?r(e):r.current=e}}function kp(e){var r=e.alternate;r!==null&&(e.alternate=null,kp(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&(delete r[yr],delete r[to],delete r[no],delete r[Gd],delete r[$d])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Sp(e){return e.tag===5||e.tag===3||e.tag===4}function Bp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Sp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Nf(e,r,a){var p=e.tag;if(p===5||p===6)e=e.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(e,r):a.insertBefore(e,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(e,a)):(r=a,r.appendChild(e)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=be));else if(p!==4&&(e=e.child,e!==null))for(Nf(e,r,a),e=e.sibling;e!==null;)Nf(e,r,a),e=e.sibling}function Lf(e,r,a){var p=e.tag;if(p===5||p===6)e=e.stateNode,r?a.insertBefore(e,r):a.appendChild(e);else if(p!==4&&(e=e.child,e!==null))for(Lf(e,r,a),e=e.sibling;e!==null;)Lf(e,r,a),e=e.sibling}var Cn=null,Ir=!1;function lo(e,r,a){for(a=a.child;a!==null;)Pp(e,r,a),a=a.sibling}function Pp(e,r,a){if(er&&typeof er.onCommitFiberUnmount=="function")try{er.onCommitFiberUnmount(bo,a)}catch{}switch(a.tag){case 5:Nn||qs(a,r);case 6:var p=Cn,y=Ir;Cn=null,lo(e,r,a),Cn=p,Ir=y,Cn!==null&&(Ir?(e=Cn,a=a.stateNode,e.nodeType===8?e.parentNode.removeChild(a):e.removeChild(a)):Cn.removeChild(a.stateNode));break;case 18:Cn!==null&&(Ir?(e=Cn,a=a.stateNode,e.nodeType===8?za(e.parentNode,a):e.nodeType===1&&za(e,a),rr(e)):za(Cn,a.stateNode));break;case 4:p=Cn,y=Ir,Cn=a.stateNode.containerInfo,Ir=!0,lo(e,r,a),Cn=p,Ir=y;break;case 0:case 11:case 14:case 15:if(!Nn&&(p=a.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){y=p=p.next;do{var S=y,z=S.destroy;S=S.tag,z!==void 0&&((S&2)!==0||(S&4)!==0)&&Rf(a,r,z),y=y.next}while(y!==p)}lo(e,r,a);break;case 1:if(!Nn&&(qs(a,r),p=a.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=a.memoizedProps,p.state=a.memoizedState,p.componentWillUnmount()}catch(X){rn(a,r,X)}lo(e,r,a);break;case 21:lo(e,r,a);break;case 22:a.mode&1?(Nn=(p=Nn)||a.memoizedState!==null,lo(e,r,a),Nn=p):lo(e,r,a);break;default:lo(e,r,a)}}function Tp(e){var r=e.updateQueue;if(r!==null){e.updateQueue=null;var a=e.stateNode;a===null&&(a=e.stateNode=new oy),r.forEach(function(p){var y=my.bind(null,e,p);a.has(p)||(a.add(p),p.then(y,y))})}}function Or(e,r){var a=r.deletions;if(a!==null)for(var p=0;p<a.length;p++){var y=a[p];try{var S=e,z=r,X=z;e:for(;X!==null;){switch(X.tag){case 5:Cn=X.stateNode,Ir=!1;break e;case 3:Cn=X.stateNode.containerInfo,Ir=!0;break e;case 4:Cn=X.stateNode.containerInfo,Ir=!0;break e}X=X.return}if(Cn===null)throw Error(i(160));Pp(S,z,y),Cn=null,Ir=!1;var ne=y.alternate;ne!==null&&(ne.return=null),y.return=null}catch(me){rn(y,r,me)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Dp(r,e),r=r.sibling}function Dp(e,r){var a=e.alternate,p=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Or(r,e),ni(e),p&4){try{Qa(3,e,e.return),Su(3,e)}catch($e){rn(e,e.return,$e)}try{Qa(5,e,e.return)}catch($e){rn(e,e.return,$e)}}break;case 1:Or(r,e),ni(e),p&512&&a!==null&&qs(a,a.return);break;case 5:if(Or(r,e),ni(e),p&512&&a!==null&&qs(a,a.return),e.flags&32){var y=e.stateNode;try{Ht(y,"")}catch($e){rn(e,e.return,$e)}}if(p&4&&(y=e.stateNode,y!=null)){var S=e.memoizedProps,z=a!==null?a.memoizedProps:S,X=e.type,ne=e.updateQueue;if(e.updateQueue=null,ne!==null)try{X==="input"&&S.type==="radio"&&S.name!=null&&mt(y,S),we(X,z);var me=we(X,S);for(z=0;z<ne.length;z+=2){var Se=ne[z],Te=ne[z+1];Se==="style"?_e(y,Te):Se==="dangerouslySetInnerHTML"?$t(y,Te):Se==="children"?Ht(y,Te):E(y,Se,Te,me)}switch(X){case"input":ot(y,S);break;case"textarea":zt(y,S);break;case"select":var ke=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!S.multiple;var Ie=S.value;Ie!=null?rt(y,!!S.multiple,Ie,!1):ke!==!!S.multiple&&(S.defaultValue!=null?rt(y,!!S.multiple,S.defaultValue,!0):rt(y,!!S.multiple,S.multiple?[]:"",!1))}y[to]=S}catch($e){rn(e,e.return,$e)}}break;case 6:if(Or(r,e),ni(e),p&4){if(e.stateNode===null)throw Error(i(162));y=e.stateNode,S=e.memoizedProps;try{y.nodeValue=S}catch($e){rn(e,e.return,$e)}}break;case 3:if(Or(r,e),ni(e),p&4&&a!==null&&a.memoizedState.isDehydrated)try{rr(r.containerInfo)}catch($e){rn(e,e.return,$e)}break;case 4:Or(r,e),ni(e);break;case 13:Or(r,e),ni(e),y=e.child,y.flags&8192&&(S=y.memoizedState!==null,y.stateNode.isHidden=S,!S||y.alternate!==null&&y.alternate.memoizedState!==null||(Of=Xt())),p&4&&Tp(e);break;case 22:if(Se=a!==null&&a.memoizedState!==null,e.mode&1?(Nn=(me=Nn)||Se,Or(r,e),Nn=me):Or(r,e),ni(e),p&8192){if(me=e.memoizedState!==null,(e.stateNode.isHidden=me)&&!Se&&(e.mode&1)!==0)for(ze=e,Se=e.child;Se!==null;){for(Te=ze=Se;ze!==null;){switch(ke=ze,Ie=ke.child,ke.tag){case 0:case 11:case 14:case 15:Qa(4,ke,ke.return);break;case 1:qs(ke,ke.return);var Ve=ke.stateNode;if(typeof Ve.componentWillUnmount=="function"){p=ke,a=ke.return;try{r=p,Ve.props=r.memoizedProps,Ve.state=r.memoizedState,Ve.componentWillUnmount()}catch($e){rn(p,a,$e)}}break;case 5:qs(ke,ke.return);break;case 22:if(ke.memoizedState!==null){Np(Te);continue}}Ie!==null?(Ie.return=ke,ze=Ie):Np(Te)}Se=Se.sibling}e:for(Se=null,Te=e;;){if(Te.tag===5){if(Se===null){Se=Te;try{y=Te.stateNode,me?(S=y.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(X=Te.stateNode,ne=Te.memoizedProps.style,z=ne!=null&&ne.hasOwnProperty("display")?ne.display:null,X.style.display=Pe("display",z))}catch($e){rn(e,e.return,$e)}}}else if(Te.tag===6){if(Se===null)try{Te.stateNode.nodeValue=me?"":Te.memoizedProps}catch($e){rn(e,e.return,$e)}}else if((Te.tag!==22&&Te.tag!==23||Te.memoizedState===null||Te===e)&&Te.child!==null){Te.child.return=Te,Te=Te.child;continue}if(Te===e)break e;for(;Te.sibling===null;){if(Te.return===null||Te.return===e)break e;Se===Te&&(Se=null),Te=Te.return}Se===Te&&(Se=null),Te.sibling.return=Te.return,Te=Te.sibling}}break;case 19:Or(r,e),ni(e),p&4&&Tp(e);break;case 21:break;default:Or(r,e),ni(e)}}function ni(e){var r=e.flags;if(r&2){try{e:{for(var a=e.return;a!==null;){if(Sp(a)){var p=a;break e}a=a.return}throw Error(i(160))}switch(p.tag){case 5:var y=p.stateNode;p.flags&32&&(Ht(y,""),p.flags&=-33);var S=Bp(e);Lf(e,S,y);break;case 3:case 4:var z=p.stateNode.containerInfo,X=Bp(e);Nf(e,X,z);break;default:throw Error(i(161))}}catch(ne){rn(e,e.return,ne)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function ay(e,r,a){ze=e,Rp(e)}function Rp(e,r,a){for(var p=(e.mode&1)!==0;ze!==null;){var y=ze,S=y.child;if(y.tag===22&&p){var z=y.memoizedState!==null||ku;if(!z){var X=y.alternate,ne=X!==null&&X.memoizedState!==null||Nn;X=ku;var me=Nn;if(ku=z,(Nn=ne)&&!me)for(ze=y;ze!==null;)z=ze,ne=z.child,z.tag===22&&z.memoizedState!==null?Lp(y):ne!==null?(ne.return=z,ze=ne):Lp(y);for(;S!==null;)ze=S,Rp(S),S=S.sibling;ze=y,ku=X,Nn=me}Fp(e)}else(y.subtreeFlags&8772)!==0&&S!==null?(S.return=y,ze=S):Fp(e)}}function Fp(e){for(;ze!==null;){var r=ze;if((r.flags&8772)!==0){var a=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Nn||Su(5,r);break;case 1:var p=r.stateNode;if(r.flags&4&&!Nn)if(a===null)p.componentDidMount();else{var y=r.elementType===r.type?a.memoizedProps:Mr(r.type,a.memoizedProps);p.componentDidUpdate(y,a.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var S=r.updateQueue;S!==null&&Nh(r,S,p);break;case 3:var z=r.updateQueue;if(z!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}Nh(r,z,a)}break;case 5:var X=r.stateNode;if(a===null&&r.flags&4){a=X;var ne=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":ne.autoFocus&&a.focus();break;case"img":ne.src&&(a.src=ne.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var me=r.alternate;if(me!==null){var Se=me.memoizedState;if(Se!==null){var Te=Se.dehydrated;Te!==null&&rr(Te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}Nn||r.flags&512&&Ff(r)}catch(ke){rn(r,r.return,ke)}}if(r===e){ze=null;break}if(a=r.sibling,a!==null){a.return=r.return,ze=a;break}ze=r.return}}function Np(e){for(;ze!==null;){var r=ze;if(r===e){ze=null;break}var a=r.sibling;if(a!==null){a.return=r.return,ze=a;break}ze=r.return}}function Lp(e){for(;ze!==null;){var r=ze;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{Su(4,r)}catch(ne){rn(r,a,ne)}break;case 1:var p=r.stateNode;if(typeof p.componentDidMount=="function"){var y=r.return;try{p.componentDidMount()}catch(ne){rn(r,y,ne)}}var S=r.return;try{Ff(r)}catch(ne){rn(r,S,ne)}break;case 5:var z=r.return;try{Ff(r)}catch(ne){rn(r,z,ne)}}}catch(ne){rn(r,r.return,ne)}if(r===e){ze=null;break}var X=r.sibling;if(X!==null){X.return=r.return,ze=X;break}ze=r.return}}var ly=Math.ceil,Bu=T.ReactCurrentDispatcher,Mf=T.ReactCurrentOwner,Er=T.ReactCurrentBatchConfig,Bt=0,yn=null,un=null,En=0,cr=0,Gs=ro(0),hn=0,Ya=null,Uo=0,Pu=0,If=0,Xa=null,Kn=null,Of=0,$s=1/0,Bi=null,Tu=!1,jf=null,uo=null,Du=!1,co=null,Ru=0,Ja=0,zf=null,Fu=-1,Nu=0;function zn(){return(Bt&6)!==0?Xt():Fu!==-1?Fu:Fu=Xt()}function fo(e){return(e.mode&1)===0?1:(Bt&2)!==0&&En!==0?En&-En:WA.transition!==null?(Nu===0&&(Nu=Il()),Nu):(e=Ct,e!==0||(e=window.event,e=e===void 0?16:yt(e.type)),e)}function jr(e,r,a,p){if(50<Ja)throw Ja=0,zf=null,Error(i(185));tr(e,a,p),((Bt&2)===0||e!==yn)&&(e===yn&&((Bt&2)===0&&(Pu|=a),hn===4&&ho(e,En)),Qn(e,p),a===1&&Bt===0&&(r.mode&1)===0&&($s=Xt()+500,lu&&oo()))}function Qn(e,r){var a=e.callbackNode;ps(e,r);var p=Ut(e,e===yn?En:0);if(p===0)a!==null&&pa(a),e.callbackNode=null,e.callbackPriority=0;else if(r=p&-p,e.callbackPriority!==r){if(a!=null&&pa(a),r===1)e.tag===0?ZA(Ip.bind(null,e)):wh(Ip.bind(null,e)),Tn(function(){(Bt&6)===0&&oo()}),a=null;else{switch(zi(p)){case 1:a=ma;break;case 4:a=Ml;break;case 16:a=fs;break;case 536870912:a=Mi;break;default:a=fs}a=Wp(a,Mp.bind(null,e))}e.callbackPriority=r,e.callbackNode=a}}function Mp(e,r){if(Fu=-1,Nu=0,(Bt&6)!==0)throw Error(i(327));var a=e.callbackNode;if(Ks()&&e.callbackNode!==a)return null;var p=Ut(e,e===yn?En:0);if(p===0)return null;if((p&30)!==0||(p&e.expiredLanes)!==0||r)r=Lu(e,p);else{r=p;var y=Bt;Bt|=2;var S=jp();(yn!==e||En!==r)&&(Bi=null,$s=Xt()+500,Wo(e,r));do try{dy();break}catch(X){Op(e,X)}while(!0);rf(),Bu.current=S,Bt=y,un!==null?r=0:(yn=null,En=0,r=hn)}if(r!==0){if(r===2&&(y=Bn(e),y!==0&&(p=y,r=Hf(e,y))),r===1)throw a=Ya,Wo(e,0),ho(e,p),Qn(e,Xt()),a;if(r===6)ho(e,p);else{if(y=e.current.alternate,(p&30)===0&&!uy(y)&&(r=Lu(e,p),r===2&&(S=Bn(e),S!==0&&(p=S,r=Hf(e,S))),r===1))throw a=Ya,Wo(e,0),ho(e,p),Qn(e,Xt()),a;switch(e.finishedWork=y,e.finishedLanes=p,r){case 0:case 1:throw Error(i(345));case 2:qo(e,Kn,Bi);break;case 3:if(ho(e,p),(p&130023424)===p&&(r=Of+500-Xt(),10<r)){if(Ut(e,0)!==0)break;if(y=e.suspendedLanes,(y&p)!==p){zn(),e.pingedLanes|=e.suspendedLanes&y;break}e.timeoutHandle=dn(qo.bind(null,e,Kn,Bi),r);break}qo(e,Kn,Bi);break;case 4:if(ho(e,p),(p&4194240)===p)break;for(r=e.eventTimes,y=-1;0<p;){var z=31-ct(p);S=1<<z,z=r[z],z>y&&(y=z),p&=~S}if(p=y,p=Xt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*ly(p/1960))-p,10<p){e.timeoutHandle=dn(qo.bind(null,e,Kn,Bi),p);break}qo(e,Kn,Bi);break;case 5:qo(e,Kn,Bi);break;default:throw Error(i(329))}}}return Qn(e,Xt()),e.callbackNode===a?Mp.bind(null,e):null}function Hf(e,r){var a=Xa;return e.current.memoizedState.isDehydrated&&(Wo(e,r).flags|=256),e=Lu(e,r),e!==2&&(r=Kn,Kn=a,r!==null&&Vf(r)),e}function Vf(e){Kn===null?Kn=e:Kn.push.apply(Kn,e)}function uy(e){for(var r=e;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var p=0;p<a.length;p++){var y=a[p],S=y.getSnapshot;y=y.value;try{if(!sr(S(),y))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ho(e,r){for(r&=~If,r&=~Pu,e.suspendedLanes|=r,e.pingedLanes&=~r,e=e.expirationTimes;0<r;){var a=31-ct(r),p=1<<a;e[a]=-1,r&=~p}}function Ip(e){if((Bt&6)!==0)throw Error(i(327));Ks();var r=Ut(e,0);if((r&1)===0)return Qn(e,Xt()),null;var a=Lu(e,r);if(e.tag!==0&&a===2){var p=Bn(e);p!==0&&(r=p,a=Hf(e,p))}if(a===1)throw a=Ya,Wo(e,0),ho(e,r),Qn(e,Xt()),a;if(a===6)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=r,qo(e,Kn,Bi),Qn(e,Xt()),null}function Uf(e,r){var a=Bt;Bt|=1;try{return e(r)}finally{Bt=a,Bt===0&&($s=Xt()+500,lu&&oo())}}function Zo(e){co!==null&&co.tag===0&&(Bt&6)===0&&Ks();var r=Bt;Bt|=1;var a=Er.transition,p=Ct;try{if(Er.transition=null,Ct=1,e)return e()}finally{Ct=p,Er.transition=a,Bt=r,(Bt&6)===0&&oo()}}function Zf(){cr=Gs.current,qt(Gs)}function Wo(e,r){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(a!==-1&&(e.timeoutHandle=-1,ln(a)),un!==null)for(a=un.return;a!==null;){var p=a;switch(Xd(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&su();break;case 3:Zs(),qt(qn),qt(Dn),ff();break;case 5:cf(p);break;case 4:Zs();break;case 13:qt(en);break;case 19:qt(en);break;case 10:of(p.type._context);break;case 22:case 23:Zf()}a=a.return}if(yn=e,un=e=po(e.current,null),En=cr=r,hn=0,Ya=null,If=Pu=Uo=0,Kn=Xa=null,zo!==null){for(r=0;r<zo.length;r++)if(a=zo[r],p=a.interleaved,p!==null){a.interleaved=null;var y=p.next,S=a.pending;if(S!==null){var z=S.next;S.next=y,p.next=z}a.pending=p}zo=null}return e}function Op(e,r){do{var a=un;try{if(rf(),vu.current=wu,Au){for(var p=tn.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}Au=!1}if(Vo=0,An=fn=tn=null,Wa=!1,qa=0,Mf.current=null,a===null||a.return===null){hn=1,Ya=r,un=null;break}e:{var S=e,z=a.return,X=a,ne=r;if(r=En,X.flags|=32768,ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var me=ne,Se=X,Te=Se.tag;if((Se.mode&1)===0&&(Te===0||Te===11||Te===15)){var ke=Se.alternate;ke?(Se.updateQueue=ke.updateQueue,Se.memoizedState=ke.memoizedState,Se.lanes=ke.lanes):(Se.updateQueue=null,Se.memoizedState=null)}var Ie=up(z);if(Ie!==null){Ie.flags&=-257,cp(Ie,z,X,S,r),Ie.mode&1&&lp(S,me,r),r=Ie,ne=me;var Ve=r.updateQueue;if(Ve===null){var $e=new Set;$e.add(ne),r.updateQueue=$e}else Ve.add(ne);break e}else{if((r&1)===0){lp(S,me,r),Wf();break e}ne=Error(i(426))}}else if(Kt&&X.mode&1){var sn=up(z);if(sn!==null){(sn.flags&65536)===0&&(sn.flags|=256),cp(sn,z,X,S,r),tf(Ws(ne,X));break e}}S=ne=Ws(ne,X),hn!==4&&(hn=2),Xa===null?Xa=[S]:Xa.push(S),S=z;do{switch(S.tag){case 3:S.flags|=65536,r&=-r,S.lanes|=r;var ue=sp(S,ne,r);Fh(S,ue);break e;case 1:X=ne;var oe=S.type,de=S.stateNode;if((S.flags&128)===0&&(typeof oe.getDerivedStateFromError=="function"||de!==null&&typeof de.componentDidCatch=="function"&&(uo===null||!uo.has(de)))){S.flags|=65536,r&=-r,S.lanes|=r;var Re=ap(S,X,r);Fh(S,Re);break e}}S=S.return}while(S!==null)}Hp(a)}catch(Ye){r=Ye,un===a&&a!==null&&(un=a=a.return);continue}break}while(!0)}function jp(){var e=Bu.current;return Bu.current=wu,e===null?wu:e}function Wf(){(hn===0||hn===3||hn===2)&&(hn=4),yn===null||(Uo&268435455)===0&&(Pu&268435455)===0||ho(yn,En)}function Lu(e,r){var a=Bt;Bt|=2;var p=jp();(yn!==e||En!==r)&&(Bi=null,Wo(e,r));do try{cy();break}catch(y){Op(e,y)}while(!0);if(rf(),Bt=a,Bu.current=p,un!==null)throw Error(i(261));return yn=null,En=0,hn}function cy(){for(;un!==null;)zp(un)}function dy(){for(;un!==null&&!Dd();)zp(un)}function zp(e){var r=Zp(e.alternate,e,cr);e.memoizedProps=e.pendingProps,r===null?Hp(e):un=r,Mf.current=null}function Hp(e){var r=e;do{var a=r.alternate;if(e=r.return,(r.flags&32768)===0){if(a=ry(a,r,cr),a!==null){un=a;return}}else{if(a=iy(a,r),a!==null){a.flags&=32767,un=a;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{hn=6,un=null;return}}if(r=r.sibling,r!==null){un=r;return}un=r=e}while(r!==null);hn===0&&(hn=5)}function qo(e,r,a){var p=Ct,y=Er.transition;try{Er.transition=null,Ct=1,fy(e,r,a,p)}finally{Er.transition=y,Ct=p}return null}function fy(e,r,a,p){do Ks();while(co!==null);if((Bt&6)!==0)throw Error(i(327));a=e.finishedWork;var y=e.finishedLanes;if(a===null)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var S=a.lanes|a.childLanes;if(nn(e,S),e===yn&&(un=yn=null,En=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Du||(Du=!0,Wp(fs,function(){return Ks(),null})),S=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||S){S=Er.transition,Er.transition=null;var z=Ct;Ct=1;var X=Bt;Bt|=4,Mf.current=null,sy(e,a),Dp(a,e),vr(et),Po=!!Me,et=Me=null,e.current=a,ay(a),ds(),Bt=X,Ct=z,Er.transition=S}else e.current=a;if(Du&&(Du=!1,co=e,Ru=y),S=e.pendingLanes,S===0&&(uo=null),Co(a.stateNode),Qn(e,Xt()),r!==null)for(p=e.onRecoverableError,a=0;a<r.length;a++)y=r[a],p(y.value,{componentStack:y.stack,digest:y.digest});if(Tu)throw Tu=!1,e=jf,jf=null,e;return(Ru&1)!==0&&e.tag!==0&&Ks(),S=e.pendingLanes,(S&1)!==0?e===zf?Ja++:(Ja=0,zf=e):Ja=0,oo(),null}function Ks(){if(co!==null){var e=zi(Ru),r=Er.transition,a=Ct;try{if(Er.transition=null,Ct=16>e?16:e,co===null)var p=!1;else{if(e=co,co=null,Ru=0,(Bt&6)!==0)throw Error(i(331));var y=Bt;for(Bt|=4,ze=e.current;ze!==null;){var S=ze,z=S.child;if((ze.flags&16)!==0){var X=S.deletions;if(X!==null){for(var ne=0;ne<X.length;ne++){var me=X[ne];for(ze=me;ze!==null;){var Se=ze;switch(Se.tag){case 0:case 11:case 15:Qa(8,Se,S)}var Te=Se.child;if(Te!==null)Te.return=Se,ze=Te;else for(;ze!==null;){Se=ze;var ke=Se.sibling,Ie=Se.return;if(kp(Se),Se===me){ze=null;break}if(ke!==null){ke.return=Ie,ze=ke;break}ze=Ie}}}var Ve=S.alternate;if(Ve!==null){var $e=Ve.child;if($e!==null){Ve.child=null;do{var sn=$e.sibling;$e.sibling=null,$e=sn}while($e!==null)}}ze=S}}if((S.subtreeFlags&2064)!==0&&z!==null)z.return=S,ze=z;else e:for(;ze!==null;){if(S=ze,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:Qa(9,S,S.return)}var ue=S.sibling;if(ue!==null){ue.return=S.return,ze=ue;break e}ze=S.return}}var oe=e.current;for(ze=oe;ze!==null;){z=ze;var de=z.child;if((z.subtreeFlags&2064)!==0&&de!==null)de.return=z,ze=de;else e:for(z=oe;ze!==null;){if(X=ze,(X.flags&2048)!==0)try{switch(X.tag){case 0:case 11:case 15:Su(9,X)}}catch(Ye){rn(X,X.return,Ye)}if(X===z){ze=null;break e}var Re=X.sibling;if(Re!==null){Re.return=X.return,ze=Re;break e}ze=X.return}}if(Bt=y,oo(),er&&typeof er.onPostCommitFiberRoot=="function")try{er.onPostCommitFiberRoot(bo,e)}catch{}p=!0}return p}finally{Ct=a,Er.transition=r}}return!1}function Vp(e,r,a){r=Ws(a,r),r=sp(e,r,1),e=ao(e,r,1),r=zn(),e!==null&&(tr(e,1,r),Qn(e,r))}function rn(e,r,a){if(e.tag===3)Vp(e,e,a);else for(;r!==null;){if(r.tag===3){Vp(r,e,a);break}else if(r.tag===1){var p=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(uo===null||!uo.has(p))){e=Ws(a,e),e=ap(r,e,1),r=ao(r,e,1),e=zn(),r!==null&&(tr(r,1,e),Qn(r,e));break}}r=r.return}}function hy(e,r,a){var p=e.pingCache;p!==null&&p.delete(r),r=zn(),e.pingedLanes|=e.suspendedLanes&a,yn===e&&(En&a)===a&&(hn===4||hn===3&&(En&130023424)===En&&500>Xt()-Of?Wo(e,0):If|=a),Qn(e,r)}function Up(e,r){r===0&&((e.mode&1)===0?r=1:(r=Oi,Oi<<=1,(Oi&130023424)===0&&(Oi=4194304)));var a=zn();e=Ei(e,r),e!==null&&(tr(e,r,a),Qn(e,a))}function py(e){var r=e.memoizedState,a=0;r!==null&&(a=r.retryLane),Up(e,a)}function my(e,r){var a=0;switch(e.tag){case 13:var p=e.stateNode,y=e.memoizedState;y!==null&&(a=y.retryLane);break;case 19:p=e.stateNode;break;default:throw Error(i(314))}p!==null&&p.delete(r),Up(e,a)}var Zp;Zp=function(e,r,a){if(e!==null)if(e.memoizedProps!==r.pendingProps||qn.current)$n=!0;else{if((e.lanes&a)===0&&(r.flags&128)===0)return $n=!1,ny(e,r,a);$n=(e.flags&131072)!==0}else $n=!1,Kt&&(r.flags&1048576)!==0&&bh(r,cu,r.index);switch(r.lanes=0,r.tag){case 2:var p=r.type;Eu(e,r),e=r.pendingProps;var y=Is(r,Dn.current);Us(r,a),y=mf(null,r,p,e,y,a);var S=gf();return r.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Gn(p)?(S=!0,au(r)):S=!1,r.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,lf(r),y.updater=bu,r.stateNode=y,y._reactInternals=r,wf(r,p,e,a),r=kf(null,r,p,!0,S,a)):(r.tag=0,Kt&&S&&Yd(r),jn(null,r,y,a),r=r.child),r;case 16:p=r.elementType;e:{switch(Eu(e,r),e=r.pendingProps,y=p._init,p=y(p._payload),r.type=p,y=r.tag=xy(p),e=Mr(p,e),y){case 0:r=Ef(null,r,p,e,a);break e;case 1:r=gp(null,r,p,e,a);break e;case 11:r=dp(null,r,p,e,a);break e;case 14:r=fp(null,r,p,Mr(p.type,e),a);break e}throw Error(i(306,p,""))}return r;case 0:return p=r.type,y=r.pendingProps,y=r.elementType===p?y:Mr(p,y),Ef(e,r,p,y,a);case 1:return p=r.type,y=r.pendingProps,y=r.elementType===p?y:Mr(p,y),gp(e,r,p,y,a);case 3:e:{if(xp(r),e===null)throw Error(i(387));p=r.pendingProps,S=r.memoizedState,y=S.element,Rh(e,r),gu(r,p,null,a);var z=r.memoizedState;if(p=z.element,S.isDehydrated)if(S={element:p,isDehydrated:!1,cache:z.cache,pendingSuspenseBoundaries:z.pendingSuspenseBoundaries,transitions:z.transitions},r.updateQueue.baseState=S,r.memoizedState=S,r.flags&256){y=Ws(Error(i(423)),r),r=vp(e,r,p,a,y);break e}else if(p!==y){y=Ws(Error(i(424)),r),r=vp(e,r,p,a,y);break e}else for(ur=Jr(r.stateNode.containerInfo.firstChild),lr=r,Kt=!0,Lr=null,a=Th(r,null,p,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(zs(),p===y){r=Si(e,r,a);break e}jn(e,r,p,a)}r=r.child}return r;case 5:return Lh(r),e===null&&ef(r),p=r.type,y=r.pendingProps,S=e!==null?e.memoizedProps:null,z=y.children,ht(p,y)?z=null:S!==null&&ht(p,S)&&(r.flags|=32),mp(e,r),jn(e,r,z,a),r.child;case 6:return e===null&&ef(r),null;case 13:return Ap(e,r,a);case 4:return uf(r,r.stateNode.containerInfo),p=r.pendingProps,e===null?r.child=Hs(r,null,p,a):jn(e,r,p,a),r.child;case 11:return p=r.type,y=r.pendingProps,y=r.elementType===p?y:Mr(p,y),dp(e,r,p,y,a);case 7:return jn(e,r,r.pendingProps,a),r.child;case 8:return jn(e,r,r.pendingProps.children,a),r.child;case 12:return jn(e,r,r.pendingProps.children,a),r.child;case 10:e:{if(p=r.type._context,y=r.pendingProps,S=r.memoizedProps,z=y.value,Zt(hu,p._currentValue),p._currentValue=z,S!==null)if(sr(S.value,z)){if(S.children===y.children&&!qn.current){r=Si(e,r,a);break e}}else for(S=r.child,S!==null&&(S.return=r);S!==null;){var X=S.dependencies;if(X!==null){z=S.child;for(var ne=X.firstContext;ne!==null;){if(ne.context===p){if(S.tag===1){ne=ki(-1,a&-a),ne.tag=2;var me=S.updateQueue;if(me!==null){me=me.shared;var Se=me.pending;Se===null?ne.next=ne:(ne.next=Se.next,Se.next=ne),me.pending=ne}}S.lanes|=a,ne=S.alternate,ne!==null&&(ne.lanes|=a),sf(S.return,a,r),X.lanes|=a;break}ne=ne.next}}else if(S.tag===10)z=S.type===r.type?null:S.child;else if(S.tag===18){if(z=S.return,z===null)throw Error(i(341));z.lanes|=a,X=z.alternate,X!==null&&(X.lanes|=a),sf(z,a,r),z=S.sibling}else z=S.child;if(z!==null)z.return=S;else for(z=S;z!==null;){if(z===r){z=null;break}if(S=z.sibling,S!==null){S.return=z.return,z=S;break}z=z.return}S=z}jn(e,r,y.children,a),r=r.child}return r;case 9:return y=r.type,p=r.pendingProps.children,Us(r,a),y=br(y),p=p(y),r.flags|=1,jn(e,r,p,a),r.child;case 14:return p=r.type,y=Mr(p,r.pendingProps),y=Mr(p.type,y),fp(e,r,p,y,a);case 15:return hp(e,r,r.type,r.pendingProps,a);case 17:return p=r.type,y=r.pendingProps,y=r.elementType===p?y:Mr(p,y),Eu(e,r),r.tag=1,Gn(p)?(e=!0,au(r)):e=!1,Us(r,a),ip(r,p,y),wf(r,p,y,a),kf(null,r,p,!0,e,a);case 19:return _p(e,r,a);case 22:return pp(e,r,a)}throw Error(i(156,r.tag))};function Wp(e,r){return Ll(e,r)}function gy(e,r,a,p){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kr(e,r,a,p){return new gy(e,r,a,p)}function qf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xy(e){if(typeof e=="function")return qf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===J)return 11;if(e===ge)return 14}return 2}function po(e,r){var a=e.alternate;return a===null?(a=kr(e.tag,r,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=r,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&14680064,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,r=e.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function Mu(e,r,a,p,y,S){var z=2;if(p=e,typeof e=="function")qf(e)&&(z=1);else if(typeof e=="string")z=5;else e:switch(e){case j:return Go(a.children,y,S,r);case O:z=8,y|=8;break;case G:return e=kr(12,a,r,y|2),e.elementType=G,e.lanes=S,e;case Y:return e=kr(13,a,r,y),e.elementType=Y,e.lanes=S,e;case ie:return e=kr(19,a,r,y),e.elementType=ie,e.lanes=S,e;case se:return Iu(a,y,S,r);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case U:z=10;break e;case K:z=9;break e;case J:z=11;break e;case ge:z=14;break e;case $:z=16,p=null;break e}throw Error(i(130,e==null?e:typeof e,""))}return r=kr(z,a,r,y),r.elementType=e,r.type=p,r.lanes=S,r}function Go(e,r,a,p){return e=kr(7,e,p,r),e.lanes=a,e}function Iu(e,r,a,p){return e=kr(22,e,p,r),e.elementType=se,e.lanes=a,e.stateNode={isHidden:!1},e}function Gf(e,r,a){return e=kr(6,e,null,r),e.lanes=a,e}function $f(e,r,a){return r=kr(4,e.children!==null?e.children:[],e.key,r),r.lanes=a,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}function vy(e,r,a,p,y){this.tag=r,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ji(0),this.expirationTimes=ji(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ji(0),this.identifierPrefix=p,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Kf(e,r,a,p,y,S,z,X,ne){return e=new vy(e,r,a,X,ne),r===1?(r=1,S===!0&&(r|=8)):r=0,S=kr(3,null,null,r),e.current=S,S.stateNode=e,S.memoizedState={element:p,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},lf(S),e}function Ay(e,r,a){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:I,key:p==null?null:""+p,children:e,containerInfo:r,implementation:a}}function qp(e){if(!e)return io;e=e._reactInternals;e:{if(Wr(e)!==e||e.tag!==1)throw Error(i(170));var r=e;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Gn(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(i(171))}if(e.tag===1){var a=e.type;if(Gn(a))return yh(e,a,r)}return r}function Gp(e,r,a,p,y,S,z,X,ne){return e=Kf(a,p,!0,e,y,S,z,X,ne),e.context=qp(null),a=e.current,p=zn(),y=fo(a),S=ki(p,y),S.callback=r??null,ao(a,S,y),e.current.lanes=y,tr(e,y,p),Qn(e,p),e}function Ou(e,r,a,p){var y=r.current,S=zn(),z=fo(y);return a=qp(a),r.context===null?r.context=a:r.pendingContext=a,r=ki(S,z),r.payload={element:e},p=p===void 0?null:p,p!==null&&(r.callback=p),e=ao(y,r,z),e!==null&&(jr(e,y,z,S),mu(e,y,z)),z}function ju(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function $p(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<r?a:r}}function Qf(e,r){$p(e,r),(e=e.alternate)&&$p(e,r)}function yy(){return null}var Kp=typeof reportError=="function"?reportError:function(e){console.error(e)};function Yf(e){this._internalRoot=e}zu.prototype.render=Yf.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(i(409));Ou(e,r,null,null)},zu.prototype.unmount=Yf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;Zo(function(){Ou(null,e,null,null)}),r[Ft]=null}};function zu(e){this._internalRoot=e}zu.prototype.unstable_scheduleHydration=function(e){if(e){var r=xs();e={blockedOn:null,target:e,priority:r};for(var a=0;a<cn.length&&r!==0&&r<cn[a].priority;a++);cn.splice(a,0,e),a===0&&vs(e)}};function Xf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Hu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Qp(){}function _y(e,r,a,p,y){if(y){if(typeof p=="function"){var S=p;p=function(){var me=ju(z);S.call(me)}}var z=Gp(r,p,e,0,null,!1,!1,"",Qp);return e._reactRootContainer=z,e[Ft]=z.current,Ji(e.nodeType===8?e.parentNode:e),Zo(),z}for(;y=e.lastChild;)e.removeChild(y);if(typeof p=="function"){var X=p;p=function(){var me=ju(ne);X.call(me)}}var ne=Kf(e,0,!1,null,null,!1,!1,"",Qp);return e._reactRootContainer=ne,e[Ft]=ne.current,Ji(e.nodeType===8?e.parentNode:e),Zo(function(){Ou(r,ne,a,p)}),ne}function Vu(e,r,a,p,y){var S=a._reactRootContainer;if(S){var z=S;if(typeof y=="function"){var X=y;y=function(){var ne=ju(z);X.call(ne)}}Ou(r,z,e,y)}else z=_y(a,r,e,y,p);return ju(z)}ms=function(e){switch(e.tag){case 3:var r=e.stateNode;if(r.current.memoizedState.isDehydrated){var a=lt(r.pendingLanes);a!==0&&(Tr(r,a|1),Qn(r,Xt()),(Bt&6)===0&&($s=Xt()+500,oo()))}break;case 13:Zo(function(){var p=Ei(e,1);if(p!==null){var y=zn();jr(p,e,1,y)}}),Qf(e,1)}},ci=function(e){if(e.tag===13){var r=Ei(e,134217728);if(r!==null){var a=zn();jr(r,e,134217728,a)}Qf(e,134217728)}},gs=function(e){if(e.tag===13){var r=fo(e),a=Ei(e,r);if(a!==null){var p=zn();jr(a,e,r,p)}Qf(e,r)}},xs=function(){return Ct},Eo=function(e,r){var a=Ct;try{return Ct=e,r()}finally{Ct=a}},ye=function(e,r,a){switch(r){case"input":if(ot(e,a),r=a.name,a.type==="radio"&&r!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var p=a[r];if(p!==e&&p.form===e.form){var y=Ls(p);if(!y)throw Error(i(90));Xe(p),ot(p,y)}}}break;case"textarea":zt(e,a);break;case"select":r=a.value,r!=null&&rt(e,!!a.multiple,r,!1)}},St=Uf,xt=Zo;var wy={usingClientEntryPoint:!1,Events:[yi,_i,Ls,Fe,ft,Uf]},el={findFiberByHostInstance:Ai,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},by={bundleType:el.bundleType,version:el.version,rendererPackageName:el.rendererPackageName,rendererConfig:el.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Fl(e),e===null?null:e.stateNode},findFiberByHostInstance:el.findFiberByHostInstance||yy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uu.isDisabled&&Uu.supportsFiber)try{bo=Uu.inject(by),er=Uu}catch{}}return Yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wy,Yn.createPortal=function(e,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xf(r))throw Error(i(200));return Ay(e,r,null,a)},Yn.createRoot=function(e,r){if(!Xf(e))throw Error(i(299));var a=!1,p="",y=Kp;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onRecoverableError!==void 0&&(y=r.onRecoverableError)),r=Kf(e,1,!1,null,null,a,!1,p,y),e[Ft]=r.current,Ji(e.nodeType===8?e.parentNode:e),new Yf(r)},Yn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=Fl(r),e=e===null?null:e.stateNode,e},Yn.flushSync=function(e){return Zo(e)},Yn.hydrate=function(e,r,a){if(!Hu(r))throw Error(i(200));return Vu(null,e,r,!0,a)},Yn.hydrateRoot=function(e,r,a){if(!Xf(e))throw Error(i(405));var p=a!=null&&a.hydratedSources||null,y=!1,S="",z=Kp;if(a!=null&&(a.unstable_strictMode===!0&&(y=!0),a.identifierPrefix!==void 0&&(S=a.identifierPrefix),a.onRecoverableError!==void 0&&(z=a.onRecoverableError)),r=Gp(r,null,e,1,a??null,y,!1,S,z),e[Ft]=r.current,Ji(e),p)for(e=0;e<p.length;e++)a=p[e],y=a._getVersion,y=y(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,y]:r.mutableSourceEagerHydrationData.push(a,y);return new zu(r)},Yn.render=function(e,r,a){if(!Hu(r))throw Error(i(200));return Vu(null,e,r,!1,a)},Yn.unmountComponentAtNode=function(e){if(!Hu(e))throw Error(i(40));return e._reactRootContainer?(Zo(function(){Vu(null,null,e,!1,function(){e._reactRootContainer=null,e[Ft]=null})}),!0):!1},Yn.unstable_batchedUpdates=Uf,Yn.unstable_renderSubtreeIntoContainer=function(e,r,a,p){if(!Hu(a))throw Error(i(200));if(e==null||e._reactInternals===void 0)throw Error(i(38));return Vu(e,r,a,!1,p)},Yn.version="18.3.1-next-f1338f8080-20240426",Yn}var im;function Ex(){if(im)return t0.exports;im=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(s){console.error(s)}}return n(),t0.exports=Fy(),t0.exports}var om;function Ny(){if(om)return Zu;om=1;var n=Ex();return Zu.createRoot=n.createRoot,Zu.hydrateRoot=n.hydrateRoot,Zu}var Ly=Ny();const My="/api",H0=100;async function Nt(n,s){const i=await fetch(`${My}${n}`,{...s,headers:{"Content-Type":"application/json",...s==null?void 0:s.headers}});if(!i.ok){const l=await i.text();let u=l||i.statusText;try{const c=JSON.parse(l);c.detail&&(u=c.detail)}catch{}throw new Error(u)}return i.json()}function Iy(n){return n instanceof DOMException&&n.name==="AbortError"?!0:n instanceof Error&&n.name==="AbortError"}const ut={getHealth:()=>Nt("/health"),getRadioConfig:()=>Nt("/radio/config"),updateRadioConfig:n=>Nt("/radio/config",{method:"PATCH",body:JSON.stringify(n)}),setPrivateKey:n=>Nt("/radio/private-key",{method:"PUT",body:JSON.stringify({private_key:n})}),sendAdvertisement:(n=!0)=>Nt(`/radio/advertise?flood=${n}`,{method:"POST"}),rebootRadio:()=>Nt("/radio/reboot",{method:"POST"}),reconnectRadio:()=>Nt("/radio/reconnect",{method:"POST"}),getContacts:(n=100,s=0)=>Nt(`/contacts?limit=${n}&offset=${s}`),deleteContact:n=>Nt(`/contacts/${n}`,{method:"DELETE"}),createContact:(n,s,i)=>Nt("/contacts",{method:"POST",body:JSON.stringify({public_key:n,name:s,try_historical:i})}),markContactRead:n=>Nt(`/contacts/${n}/mark-read`,{method:"POST"}),requestTelemetry:(n,s)=>Nt(`/contacts/${n}/telemetry`,{method:"POST",body:JSON.stringify({password:s})}),sendRepeaterCommand:(n,s)=>Nt(`/contacts/${n}/command`,{method:"POST",body:JSON.stringify({command:s})}),getChannels:()=>Nt("/channels"),createChannel:(n,s)=>Nt("/channels",{method:"POST",body:JSON.stringify({name:n,key:s})}),deleteChannel:n=>Nt(`/channels/${n}`,{method:"DELETE"}),markChannelRead:n=>Nt(`/channels/${n}/mark-read`,{method:"POST"}),getMessages:(n,s)=>{const i=new URLSearchParams;n!=null&&n.limit&&i.set("limit",n.limit.toString()),n!=null&&n.offset&&i.set("offset",n.offset.toString()),n!=null&&n.type&&i.set("type",n.type),n!=null&&n.conversation_key&&i.set("conversation_key",n.conversation_key);const l=i.toString();return Nt(`/messages${l?`?${l}`:""}`,{signal:s})},getMessagesBulk:(n,s=H0)=>Nt(`/messages/bulk?limit_per_conversation=${s}`,{method:"POST",body:JSON.stringify(n)}),sendDirectMessage:(n,s)=>Nt("/messages/direct",{method:"POST",body:JSON.stringify({destination:n,text:s})}),sendChannelMessage:(n,s)=>Nt("/messages/channel",{method:"POST",body:JSON.stringify({channel_key:n,text:s})}),getUndecryptedPacketCount:()=>Nt("/packets/undecrypted/count"),decryptHistoricalPackets:n=>Nt("/packets/decrypt/historical",{method:"POST",body:JSON.stringify(n)}),runMaintenance:n=>Nt("/packets/maintenance",{method:"POST",body:JSON.stringify({prune_undecrypted_days:n})}),markAllRead:()=>Nt("/read-state/mark-all-read",{method:"POST"}),getSettings:()=>Nt("/settings"),updateSettings:n=>Nt("/settings",{method:"PATCH",body:JSON.stringify(n)}),toggleFavorite:(n,s)=>Nt("/settings/favorites/toggle",{method:"POST",body:JSON.stringify({type:n,id:s})}),updateLastMessageTime:(n,s)=>Nt("/settings/last-message-time",{method:"POST",body:JSON.stringify({state_key:n,timestamp:s})}),migratePreferences:n=>Nt("/settings/migrate",{method:"POST",body:JSON.stringify(n)})};function Oy(n){const s=N.useRef(null),i=N.useRef(null),[l,u]=N.useState(!1),c=N.useRef(n);N.useEffect(()=>{c.current=n},[n]);const h=N.useCallback(()=>{const d=window.location.protocol==="https:"?"wss:":"ws:",m=window.location.port==="5173"?"ws://localhost:8000/api/ws":`${d}//${window.location.host}/api/ws`,x=new WebSocket(m);x.onopen=()=>{console.log("WebSocket connected"),u(!0)},x.onclose=()=>{console.log("WebSocket disconnected"),u(!1),s.current=null,i.current=window.setTimeout(()=>{console.log("Attempting WebSocket reconnect..."),h()},3e3)},x.onerror=v=>{console.error("WebSocket error:",v)},x.onmessage=v=>{var C,P,M,k,w,B,b,E,T;try{const F=JSON.parse(v.data),I=c.current;switch(F.type){case"health":(C=I.onHealth)==null||C.call(I,F.data);break;case"contacts":(P=I.onContacts)==null||P.call(I,F.data);break;case"channels":(M=I.onChannels)==null||M.call(I,F.data);break;case"message":(k=I.onMessage)==null||k.call(I,F.data);break;case"contact":(w=I.onContact)==null||w.call(I,F.data);break;case"raw_packet":(B=I.onRawPacket)==null||B.call(I,F.data);break;case"message_acked":{const j=F.data;(b=I.onMessageAcked)==null||b.call(I,j.message_id,j.ack_count,j.paths);break}case"error":(E=I.onError)==null||E.call(I,F.data);break;case"success":(T=I.onSuccess)==null||T.call(I,F.data);break;case"pong":break;default:console.log("Unknown WebSocket message type:",F.type)}}catch(F){console.error("Failed to parse WebSocket message:",F)}},s.current=x},[]);return N.useEffect(()=>{h();const d=setInterval(()=>{var g;((g=s.current)==null?void 0:g.readyState)===WebSocket.OPEN&&s.current.send("ping")},3e4);return()=>{clearInterval(d),i.current&&clearTimeout(i.current),s.current&&s.current.close()}},[h]),{connected:l}}const ad=2,jy=300*1e3;function sm(n){const s=Math.floor(n/3600),i=Math.floor(n%3600/60),l=Math.floor(n%60);return`${s}h${i}m${l}s`}function zy(n){return n<=5?"":n<=10?"":n<=25?"":n<=50?"":""}function Hy(n,s){const l=Math.floor(Date.now()/1e3)-n.startTime,u=s.uptime_seconds-n.uptime,c=s.airtime_seconds-n.txAirtime,h=s.rx_airtime_seconds-n.rxAirtime,d=s.sent_flood-n.sentFlood,g=s.sent_direct-n.sentDirect,m=s.recv_flood-n.recvFlood,x=s.recv_direct-n.recvDirect,v=u>0?c/u*100:0,C=u>0?h/u*100:0,P=d+g,M=m+x,k=P>0?v*(d/P):0,w=P>0?v*(g/P):0,B=M>0?C*(m/M):0,b=M>0?C*(x/M):0,E=zy(v),T=Math.max(0,100-v-C);return["Airtime/Duty Cycle Statistics",`Duration: ${sm(l)} (uptime delta: ${sm(u)})`,"",`${E} TX Airtime: ${v.toFixed(3)}% (${P.toLocaleString()} pkts)`,`  Flood: ${k.toFixed(3)}% (${d.toLocaleString()} pkts)`,`  Direct: ${w.toFixed(3)}% (${g.toLocaleString()} pkts)`,"",`RX Airtime: ${C.toFixed(3)}% (${M.toLocaleString()} pkts)`,`  Flood: ${B.toFixed(3)}% (${m.toLocaleString()} pkts)`,`  Direct: ${b.toFixed(3)}% (${x.toLocaleString()} pkts)`,"",`Idle: ${T.toFixed(3)}%`].join(`
`)}function Qs(n,s,i){const l=Math.floor(Date.now()/1e3);return{id:-Date.now(),type:"PRIV",conversation_key:n,text:s,sender_timestamp:l,received_at:l,paths:null,txt_type:0,signature:null,outgoing:i,acked:1}}function Vy(n){const s=N.useRef(null),i=N.useRef(null),l=N.useCallback(()=>{i.current!==null&&(clearInterval(i.current),i.current=null),s.current=null},[]),u=N.useCallback(async()=>{const h=s.current;if(!h)return;let d=null,g=null;for(let m=0;m<2;m++)try{d=await ut.requestTelemetry(h.conversationId,"");break}catch(x){g=x instanceof Error?x:new Error("Unknown error"),m===0&&await new Promise(v=>setTimeout(v,2e3))}if(d){const m=Qs(h.conversationId,Hy(h,d),!1);n(x=>[...x,m])}else{const m=Qs(h.conversationId,`Duty cycle poll failed after retry: ${(g==null?void 0:g.message)??"Unknown error"}`,!1);n(x=>[...x,m])}},[n]),c=N.useCallback(async(h,d)=>{const g=h.trim().toLowerCase();if(g==="dutycycle_start"){l();let m=null,x=null;for(let P=0;P<2;P++)try{m=await ut.requestTelemetry(d,"");break}catch(M){x=M instanceof Error?M:new Error("Unknown error"),P===0&&await new Promise(k=>setTimeout(k,2e3))}if(!m){const P=Qs(d,`Failed to start duty cycle tracking after retry: ${(x==null?void 0:x.message)??"Unknown error"}`,!1);return n(M=>[...M,P]),!0}const v=Math.floor(Date.now()/1e3);s.current={startTime:v,uptime:m.uptime_seconds,txAirtime:m.airtime_seconds,rxAirtime:m.rx_airtime_seconds,sentFlood:m.sent_flood,sentDirect:m.sent_direct,recvFlood:m.recv_flood,recvDirect:m.recv_direct,conversationId:d};const C=Qs(d,`Airtime/duty cycle statistics gathering begins at ${v}. Logs will follow every 5 minutes. To stop, run dutycycle_stop or navigate away from this conversation.`,!1);return n(P=>[...P,C]),i.current=window.setInterval(u,jy),!0}if(g==="dutycycle_stop"){if(s.current&&s.current.conversationId===d){await u(),l();const m=Qs(d,"Airtime/duty cycle statistics gathering stopped.",!1);n(x=>[...x,m])}else{const m=Qs(d,"Duty cycle tracking is not active.",!1);n(x=>[...x,m])}return!0}return!1},[n,l,u]);return N.useEffect(()=>()=>{i.current!==null&&clearInterval(i.current)},[]),{handleAirtimeCommand:c,stopTracking:l}}function oc(n){if(n<60)return`${n}s`;const s=Math.floor(n/86400),i=Math.floor(n%86400/3600),l=Math.floor(n%3600/60);return s>0?i>0&&l>0?`${s}d${i}h${l}m`:i>0?`${s}d${i}h`:l>0?`${s}d${l}m`:`${s}d`:i>0?l>0?`${i}h${l}m`:`${i}h`:`${l}m`}function Uy(n){return["Telemetry",`Battery Voltage: ${n.battery_volts.toFixed(3)}V`,`Uptime: ${oc(n.uptime_seconds)}`,...n.clock_output?[`Clock: ${n.clock_output}`]:[],`TX Airtime: ${oc(n.airtime_seconds)}`,`RX Airtime: ${oc(n.rx_airtime_seconds)}`,"",`Noise Floor: ${n.noise_floor_dbm} dBm`,`Last RSSI: ${n.last_rssi_dbm} dBm`,`Last SNR: ${n.last_snr_db.toFixed(1)} dB`,"",`Packets: ${n.packets_received.toLocaleString()} rx / ${n.packets_sent.toLocaleString()} tx`,`Flood: ${n.recv_flood.toLocaleString()} rx / ${n.sent_flood.toLocaleString()} tx`,`Direct: ${n.recv_direct.toLocaleString()} rx / ${n.sent_direct.toLocaleString()} tx`,`Duplicates: ${n.flood_dups.toLocaleString()} flood / ${n.direct_dups.toLocaleString()} direct`,"",`TX Queue: ${n.tx_queue_len}`,`Debug Flags: ${n.full_events}`].join(`
`)}function Zy(n){if(n.length===0)return`Neighbors
No neighbors reported`;const s=[...n].sort((l,u)=>u.snr-l.snr),i=[`Neighbors (${s.length})`];for(const l of s){const u=l.name||l.pubkey_prefix,c=l.snr>=0?`+${l.snr.toFixed(1)}`:l.snr.toFixed(1);i.push(`${u}, ${c} dB [${oc(l.last_heard_seconds)} ago]`)}return i.join(`
`)}function Wy(n){if(n.length===0)return`ACL
No ACL entries`;const s=[`ACL (${n.length})`];for(const i of n){const l=i.name||i.pubkey_prefix;s.push(`${l}: ${i.permission_name}`)}return s.join(`
`)}function Ko(n,s,i,l=0){const u=Math.floor(Date.now()/1e3);return{id:-Date.now()-l,type:"PRIV",conversation_key:n,text:s,sender_timestamp:u,received_at:u,paths:null,txt_type:0,signature:null,outgoing:i,acked:1}}function qy(n,s,i){const[l,u]=N.useState(!1),{handleAirtimeCommand:c,stopTracking:h}=Vy(i);N.useEffect(()=>{u(!1),h()},[n==null?void 0:n.id,h]);const d=N.useMemo(()=>{if(!n||n.type!=="contact")return!1;const x=s.find(v=>v.public_key===n.id);return(x==null?void 0:x.type)===ad},[n,s]),g=N.useCallback(async x=>{if(!(!n||n.type!=="contact")&&d)try{const v=await ut.requestTelemetry(n.id,x),C=Ko(n.id,Uy(v),!1,0),P=Ko(n.id,Zy(v.neighbors),!1,1),M=Ko(n.id,Wy(v.acl),!1,2);i(k=>[...k,C,P,M]),u(!0)}catch(v){const C=Ko(n.id,`Telemetry request failed: ${v instanceof Error?v.message:"Unknown error"}`,!1,0);i(P=>[...P,C])}},[n,d,i]),m=N.useCallback(async x=>{if(!n||n.type!=="contact"||!d||!l||await c(x,n.id))return;const C=Ko(n.id,`> ${x}`,!0,0);i(P=>[...P,C]);try{const P=await ut.sendRepeaterCommand(n.id,x),M=Ko(n.id,P.response,!1,1);P.sender_timestamp&&(M.sender_timestamp=P.sender_timestamp),i(k=>[...k,M])}catch(P){const M=Ko(n.id,`Command failed: ${P instanceof Error?P.message:"Unknown error"}`,!1,1);i(k=>[...k,M])}},[n,d,l,i,c]);return{repeaterLoggedIn:l,activeContactIsRepeater:d,handleTelemetryRequest:g,handleRepeaterCommand:m}}const kx="remoteterm-lastMessageTime",Sx="remoteterm-sortOrder";let Qc={};function am(n){Qc={...n}}function lm(){return{...Qc}}function i0(n,s){return Qc[n]=s,{...Qc}}function Hr(n,s){return`${n}-${s}`}function Gy(){try{const n=localStorage.getItem(kx);return n?JSON.parse(n):{}}catch{return{}}}function $y(){try{return localStorage.getItem(Sx)==="alpha"?"alpha":"recent"}catch{return"recent"}}function um(){try{localStorage.removeItem(kx),localStorage.removeItem(Sx)}catch{}}function cm(n,s){if(!s)return!1;const i=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return new RegExp(`@\\[${i}\\]`,"i").test(n)}function Ky(n,s,i,l=null){const[u,c]=N.useState({}),[h,d]=N.useState({}),[g,m]=N.useState(lm),x=N.useRef(l);N.useEffect(()=>{x.current=l},[l]);const v=N.useRef(new Set),C=N.useRef(new Set);N.useEffect(()=>{const B=n.filter(T=>!v.current.has(T.key)),b=s.filter(T=>T.public_key&&!C.current.has(T.public_key));if(B.length===0&&b.length===0)return;B.forEach(T=>v.current.add(T.key)),b.forEach(T=>C.current.add(T.public_key)),(async()=>{const T=[...B.map(F=>({type:"CHAN",conversation_key:F.key})),...b.map(F=>({type:"PRIV",conversation_key:F.public_key}))];if(T.length!==0)try{const I={};for(let U=0;U<T.length;U+=200){const K=T.slice(U,U+200),J=await ut.getMessagesBulk(K,H0);Object.assign(I,J)}const j={},O={},G={};for(const U of B){const K=I[`CHAN:${U.key}`]||[];if(K.length>0){const J=Hr("channel",U.key),Y=U.last_read_at||0,ie=K.filter($=>!$.outgoing&&$.received_at>Y);ie.length>0&&(j[J]=ie.length,ie.some($=>cm($.text,x.current))&&(O[J]=!0));const ge=Math.max(...K.map($=>$.received_at));G[J]=ge,i0(J,ge)}}for(const U of b){const K=I[`PRIV:${U.public_key}`]||[];if(K.length>0){const J=Hr("contact",U.public_key),Y=U.last_read_at||0,ie=K.filter($=>!$.outgoing&&$.received_at>Y);ie.length>0&&(j[J]=ie.length,ie.some($=>cm($.text,x.current))&&(O[J]=!0));const ge=Math.max(...K.map($=>$.received_at));G[J]=ge,i0(J,ge)}}Object.keys(j).length>0&&c(U=>({...U,...j})),Object.keys(O).length>0&&d(U=>({...U,...O})),m(lm())}catch(F){console.error("Failed to fetch messages bulk:",F)}})()},[n,s]),N.useEffect(()=>{if(i&&i.type!=="raw"&&i.type!=="map"){const B=Hr(i.type,i.id);c(b=>{if(b[B]){const E={...b};return delete E[B],E}return b}),d(b=>{if(b[B]){const E={...b};return delete E[B],E}return b}),i.type==="channel"?ut.markChannelRead(i.id).catch(b=>{console.error("Failed to mark channel as read on server:",b)}):i.type==="contact"&&ut.markContactRead(i.id).catch(b=>{console.error("Failed to mark contact as read on server:",b)})}},[i]);const P=N.useCallback((B,b)=>{c(E=>({...E,[B]:(E[B]||0)+1})),b&&d(E=>({...E,[B]:!0}))},[]),M=N.useCallback(()=>{c({}),d({}),ut.markAllRead().catch(B=>{console.error("Failed to mark all as read on server:",B)})},[]),k=N.useCallback(B=>{if(B.type==="raw"||B.type==="map")return;const b=Hr(B.type,B.id);c(E=>{if(E[b]){const T={...E};return delete T[b],T}return E}),d(E=>{if(E[b]){const T={...E};return delete T[b],T}return E}),B.type==="channel"?ut.markChannelRead(B.id).catch(E=>{console.error("Failed to mark channel as read on server:",E)}):B.type==="contact"&&ut.markContactRead(B.id).catch(E=>{console.error("Failed to mark contact as read on server:",E)})},[]),w=N.useCallback(B=>{let b=null;if(B.type==="CHAN"&&B.conversation_key?b=Hr("channel",B.conversation_key):B.type==="PRIV"&&B.conversation_key&&(b=Hr("contact",B.conversation_key)),b){const E=B.received_at||Math.floor(Date.now()/1e3),T=i0(b,E);m(T)}},[]);return{unreadCounts:u,mentions:h,lastMessageTimes:g,incrementUnread:P,markAllRead:M,markConversationRead:k,trackNewMessage:w}}var V0=Ex();const Bx=ls(V0);function Qy(n){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",s.appendChild(i),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n))}const Yy=n=>{switch(n){case"success":return e_;case"info":return n_;case"warning":return t_;case"error":return r_;default:return null}},Xy=Array(12).fill(0),Jy=({visible:n,className:s})=>De.createElement("div",{className:["sonner-loading-wrapper",s].filter(Boolean).join(" "),"data-visible":n},De.createElement("div",{className:"sonner-spinner"},Xy.map((i,l)=>De.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${l}`})))),e_=De.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},De.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),t_=De.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},De.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),n_=De.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},De.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),r_=De.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},De.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),i_=De.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},De.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),De.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),o_=()=>{const[n,s]=De.useState(document.hidden);return De.useEffect(()=>{const i=()=>{s(document.hidden)};return document.addEventListener("visibilitychange",i),()=>window.removeEventListener("visibilitychange",i)},[]),n};let w0=1;class s_{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{const i=this.subscribers.indexOf(s);this.subscribers.splice(i,1)}),this.publish=s=>{this.subscribers.forEach(i=>i(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var i;const{message:l,...u}=s,c=typeof(s==null?void 0:s.id)=="number"||((i=s.id)==null?void 0:i.length)>0?s.id:w0++,h=this.toasts.find(g=>g.id===c),d=s.dismissible===void 0?!0:s.dismissible;return this.dismissedToasts.has(c)&&this.dismissedToasts.delete(c),h?this.toasts=this.toasts.map(g=>g.id===c?(this.publish({...g,...s,id:c,title:l}),{...g,...s,id:c,dismissible:d,title:l}):g):this.addToast({title:l,...u,dismissible:d,id:c}),c},this.dismiss=s=>(s?(this.dismissedToasts.add(s),requestAnimationFrame(()=>this.subscribers.forEach(i=>i({id:s,dismiss:!0})))):this.toasts.forEach(i=>{this.subscribers.forEach(l=>l({id:i.id,dismiss:!0}))}),s),this.message=(s,i)=>this.create({...i,message:s}),this.error=(s,i)=>this.create({...i,message:s,type:"error"}),this.success=(s,i)=>this.create({...i,type:"success",message:s}),this.info=(s,i)=>this.create({...i,type:"info",message:s}),this.warning=(s,i)=>this.create({...i,type:"warning",message:s}),this.loading=(s,i)=>this.create({...i,type:"loading",message:s}),this.promise=(s,i)=>{if(!i)return;let l;i.loading!==void 0&&(l=this.create({...i,promise:s,type:"loading",message:i.loading,description:typeof i.description!="function"?i.description:void 0}));const u=Promise.resolve(s instanceof Function?s():s);let c=l!==void 0,h;const d=u.then(async m=>{if(h=["resolve",m],De.isValidElement(m))c=!1,this.create({id:l,type:"default",message:m});else if(l_(m)&&!m.ok){c=!1;const v=typeof i.error=="function"?await i.error(`HTTP error! status: ${m.status}`):i.error,C=typeof i.description=="function"?await i.description(`HTTP error! status: ${m.status}`):i.description,M=typeof v=="object"&&!De.isValidElement(v)?v:{message:v};this.create({id:l,type:"error",description:C,...M})}else if(m instanceof Error){c=!1;const v=typeof i.error=="function"?await i.error(m):i.error,C=typeof i.description=="function"?await i.description(m):i.description,M=typeof v=="object"&&!De.isValidElement(v)?v:{message:v};this.create({id:l,type:"error",description:C,...M})}else if(i.success!==void 0){c=!1;const v=typeof i.success=="function"?await i.success(m):i.success,C=typeof i.description=="function"?await i.description(m):i.description,M=typeof v=="object"&&!De.isValidElement(v)?v:{message:v};this.create({id:l,type:"success",description:C,...M})}}).catch(async m=>{if(h=["reject",m],i.error!==void 0){c=!1;const x=typeof i.error=="function"?await i.error(m):i.error,v=typeof i.description=="function"?await i.description(m):i.description,P=typeof x=="object"&&!De.isValidElement(x)?x:{message:x};this.create({id:l,type:"error",description:v,...P})}}).finally(()=>{c&&(this.dismiss(l),l=void 0),i.finally==null||i.finally.call(i)}),g=()=>new Promise((m,x)=>d.then(()=>h[0]==="reject"?x(h[1]):m(h[1])).catch(x));return typeof l!="string"&&typeof l!="number"?{unwrap:g}:Object.assign(l,{unwrap:g})},this.custom=(s,i)=>{const l=(i==null?void 0:i.id)||w0++;return this.create({jsx:s(l),id:l,...i}),l},this.getActiveToasts=()=>this.toasts.filter(s=>!this.dismissedToasts.has(s.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Jn=new s_,a_=(n,s)=>{const i=(s==null?void 0:s.id)||w0++;return Jn.addToast({title:n,...s,id:i}),i},l_=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",u_=a_,c_=()=>Jn.toasts,d_=()=>Jn.getActiveToasts(),At=Object.assign(u_,{success:Jn.success,info:Jn.info,warning:Jn.warning,error:Jn.error,custom:Jn.custom,message:Jn.message,promise:Jn.promise,dismiss:Jn.dismiss,loading:Jn.loading},{getHistory:c_,getToasts:d_});Qy("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Wu(n){return n.label!==void 0}const f_=3,h_="24px",p_="16px",dm=4e3,m_=356,g_=14,x_=45,v_=200;function ri(...n){return n.filter(Boolean).join(" ")}function A_(n){const[s,i]=n.split("-"),l=[];return s&&l.push(s),i&&l.push(i),l}const y_=n=>{var s,i,l,u,c,h,d,g,m;const{invert:x,toast:v,unstyled:C,interacting:P,setHeights:M,visibleToasts:k,heights:w,index:B,toasts:b,expanded:E,removeToast:T,defaultRichColors:F,closeButton:I,style:j,cancelButtonStyle:O,actionButtonStyle:G,className:U="",descriptionClassName:K="",duration:J,position:Y,gap:ie,expandByDefault:ge,classNames:$,icons:se,closeButtonAriaLabel:W="Close toast"}=n,[te,Z]=De.useState(null),[D,H]=De.useState(null),[q,Q]=De.useState(!1),[ae,ce]=De.useState(!1),[Ae,pe]=De.useState(!1),[xe,Be]=De.useState(!1),[Oe,Xe]=De.useState(!1),[Ee,je]=De.useState(0),[at,mt]=De.useState(0),ot=De.useRef(v.duration||J||dm),qe=De.useRef(null),Ke=De.useRef(null),Qe=B===0,rt=B+1<=k,He=v.type,Et=v.dismissible!==!1,zt=v.className||"",Qt=v.descriptionClassName||"",Dt=De.useMemo(()=>w.findIndex(Fe=>Fe.toastId===v.id)||0,[w,v.id]),Gt=De.useMemo(()=>{var Fe;return(Fe=v.closeButton)!=null?Fe:I},[v.closeButton,I]),Yt=De.useMemo(()=>v.duration||J||dm,[v.duration,J]),$t=De.useRef(0),Ht=De.useRef(0),Rt=De.useRef(0),Vt=De.useRef(null),[Pe,_e]=Y.split("-"),fe=De.useMemo(()=>w.reduce((Fe,ft,St)=>St>=Dt?Fe:Fe+ft.height,0),[w,Dt]),ve=o_(),we=v.invert||x,Ge=He==="loading";Ht.current=De.useMemo(()=>Dt*ie+fe,[Dt,fe]),De.useEffect(()=>{ot.current=Yt},[Yt]),De.useEffect(()=>{Q(!0)},[]),De.useEffect(()=>{const Fe=Ke.current;if(Fe){const ft=Fe.getBoundingClientRect().height;return mt(ft),M(St=>[{toastId:v.id,height:ft,position:v.position},...St]),()=>M(St=>St.filter(xt=>xt.toastId!==v.id))}},[M,v.id]),De.useLayoutEffect(()=>{if(!q)return;const Fe=Ke.current,ft=Fe.style.height;Fe.style.height="auto";const St=Fe.getBoundingClientRect().height;Fe.style.height=ft,mt(St),M(xt=>xt.find(dt=>dt.toastId===v.id)?xt.map(dt=>dt.toastId===v.id?{...dt,height:St}:dt):[{toastId:v.id,height:St,position:v.position},...xt])},[q,v.title,v.description,M,v.id,v.jsx,v.action,v.cancel]);const re=De.useCallback(()=>{ce(!0),je(Ht.current),M(Fe=>Fe.filter(ft=>ft.toastId!==v.id)),setTimeout(()=>{T(v)},v_)},[v,T,M,Ht]);De.useEffect(()=>{if(v.promise&&He==="loading"||v.duration===1/0||v.type==="loading")return;let Fe;return E||P||ve?(()=>{if(Rt.current<$t.current){const xt=new Date().getTime()-$t.current;ot.current=ot.current-xt}Rt.current=new Date().getTime()})():(()=>{ot.current!==1/0&&($t.current=new Date().getTime(),Fe=setTimeout(()=>{v.onAutoClose==null||v.onAutoClose.call(v,v),re()},ot.current))})(),()=>clearTimeout(Fe)},[E,P,v,He,ve,re]),De.useEffect(()=>{v.delete&&(re(),v.onDismiss==null||v.onDismiss.call(v,v))},[re,v.delete]);function ye(){var Fe;if(se!=null&&se.loading){var ft;return De.createElement("div",{className:ri($==null?void 0:$.loader,v==null||(ft=v.classNames)==null?void 0:ft.loader,"sonner-loader"),"data-visible":He==="loading"},se.loading)}return De.createElement(Jy,{className:ri($==null?void 0:$.loader,v==null||(Fe=v.classNames)==null?void 0:Fe.loader),visible:He==="loading"})}const Ce=v.icon||(se==null?void 0:se[He])||Yy(He);var Ne,Je;return De.createElement("li",{tabIndex:0,ref:Ke,className:ri(U,zt,$==null?void 0:$.toast,v==null||(s=v.classNames)==null?void 0:s.toast,$==null?void 0:$.default,$==null?void 0:$[He],v==null||(i=v.classNames)==null?void 0:i[He]),"data-sonner-toast":"","data-rich-colors":(Ne=v.richColors)!=null?Ne:F,"data-styled":!(v.jsx||v.unstyled||C),"data-mounted":q,"data-promise":!!v.promise,"data-swiped":Oe,"data-removed":ae,"data-visible":rt,"data-y-position":Pe,"data-x-position":_e,"data-index":B,"data-front":Qe,"data-swiping":Ae,"data-dismissible":Et,"data-type":He,"data-invert":we,"data-swipe-out":xe,"data-swipe-direction":D,"data-expanded":!!(E||ge&&q),"data-testid":v.testId,style:{"--index":B,"--toasts-before":B,"--z-index":b.length-B,"--offset":`${ae?Ee:Ht.current}px`,"--initial-height":ge?"auto":`${at}px`,...j,...v.style},onDragEnd:()=>{pe(!1),Z(null),Vt.current=null},onPointerDown:Fe=>{Fe.button!==2&&(Ge||!Et||(qe.current=new Date,je(Ht.current),Fe.target.setPointerCapture(Fe.pointerId),Fe.target.tagName!=="BUTTON"&&(pe(!0),Vt.current={x:Fe.clientX,y:Fe.clientY})))},onPointerUp:()=>{var Fe,ft,St;if(xe||!Et)return;Vt.current=null;const xt=Number(((Fe=Ke.current)==null?void 0:Fe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),an=Number(((ft=Ke.current)==null?void 0:ft.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),dt=new Date().getTime()-((St=qe.current)==null?void 0:St.getTime()),Pt=te==="x"?xt:an,vn=Math.abs(Pt)/dt;if(Math.abs(Pt)>=x_||vn>.11){je(Ht.current),v.onDismiss==null||v.onDismiss.call(v,v),H(te==="x"?xt>0?"right":"left":an>0?"down":"up"),re(),Be(!0);return}else{var wt,kt;(wt=Ke.current)==null||wt.style.setProperty("--swipe-amount-x","0px"),(kt=Ke.current)==null||kt.style.setProperty("--swipe-amount-y","0px")}Xe(!1),pe(!1),Z(null)},onPointerMove:Fe=>{var ft,St,xt;if(!Vt.current||!Et||((ft=window.getSelection())==null?void 0:ft.toString().length)>0)return;const dt=Fe.clientY-Vt.current.y,Pt=Fe.clientX-Vt.current.x;var vn;const wt=(vn=n.swipeDirections)!=null?vn:A_(Y);!te&&(Math.abs(Pt)>1||Math.abs(dt)>1)&&Z(Math.abs(Pt)>Math.abs(dt)?"x":"y");let kt={x:0,y:0};const Mt=Le=>1/(1.5+Math.abs(Le)/20);if(te==="y"){if(wt.includes("top")||wt.includes("bottom"))if(wt.includes("top")&&dt<0||wt.includes("bottom")&&dt>0)kt.y=dt;else{const Le=dt*Mt(dt);kt.y=Math.abs(Le)<Math.abs(dt)?Le:dt}}else if(te==="x"&&(wt.includes("left")||wt.includes("right")))if(wt.includes("left")&&Pt<0||wt.includes("right")&&Pt>0)kt.x=Pt;else{const Le=Pt*Mt(Pt);kt.x=Math.abs(Le)<Math.abs(Pt)?Le:Pt}(Math.abs(kt.x)>0||Math.abs(kt.y)>0)&&Xe(!0),(St=Ke.current)==null||St.style.setProperty("--swipe-amount-x",`${kt.x}px`),(xt=Ke.current)==null||xt.style.setProperty("--swipe-amount-y",`${kt.y}px`)}},Gt&&!v.jsx&&He!=="loading"?De.createElement("button",{"aria-label":W,"data-disabled":Ge,"data-close-button":!0,onClick:Ge||!Et?()=>{}:()=>{re(),v.onDismiss==null||v.onDismiss.call(v,v)},className:ri($==null?void 0:$.closeButton,v==null||(l=v.classNames)==null?void 0:l.closeButton)},(Je=se==null?void 0:se.close)!=null?Je:i_):null,(He||v.icon||v.promise)&&v.icon!==null&&((se==null?void 0:se[He])!==null||v.icon)?De.createElement("div",{"data-icon":"",className:ri($==null?void 0:$.icon,v==null||(u=v.classNames)==null?void 0:u.icon)},v.promise||v.type==="loading"&&!v.icon?v.icon||ye():null,v.type!=="loading"?Ce:null):null,De.createElement("div",{"data-content":"",className:ri($==null?void 0:$.content,v==null||(c=v.classNames)==null?void 0:c.content)},De.createElement("div",{"data-title":"",className:ri($==null?void 0:$.title,v==null||(h=v.classNames)==null?void 0:h.title)},v.jsx?v.jsx:typeof v.title=="function"?v.title():v.title),v.description?De.createElement("div",{"data-description":"",className:ri(K,Qt,$==null?void 0:$.description,v==null||(d=v.classNames)==null?void 0:d.description)},typeof v.description=="function"?v.description():v.description):null),De.isValidElement(v.cancel)?v.cancel:v.cancel&&Wu(v.cancel)?De.createElement("button",{"data-button":!0,"data-cancel":!0,style:v.cancelButtonStyle||O,onClick:Fe=>{Wu(v.cancel)&&Et&&(v.cancel.onClick==null||v.cancel.onClick.call(v.cancel,Fe),re())},className:ri($==null?void 0:$.cancelButton,v==null||(g=v.classNames)==null?void 0:g.cancelButton)},v.cancel.label):null,De.isValidElement(v.action)?v.action:v.action&&Wu(v.action)?De.createElement("button",{"data-button":!0,"data-action":!0,style:v.actionButtonStyle||G,onClick:Fe=>{Wu(v.action)&&(v.action.onClick==null||v.action.onClick.call(v.action,Fe),!Fe.defaultPrevented&&re())},className:ri($==null?void 0:$.actionButton,v==null||(m=v.classNames)==null?void 0:m.actionButton)},v.action.label):null)};function fm(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function __(n,s){const i={};return[n,s].forEach((l,u)=>{const c=u===1,h=c?"--mobile-offset":"--offset",d=c?p_:h_;function g(m){["top","right","bottom","left"].forEach(x=>{i[`${h}-${x}`]=typeof m=="number"?`${m}px`:m})}typeof l=="number"||typeof l=="string"?g(l):typeof l=="object"?["top","right","bottom","left"].forEach(m=>{l[m]===void 0?i[`${h}-${m}`]=d:i[`${h}-${m}`]=typeof l[m]=="number"?`${l[m]}px`:l[m]}):g(d)}),i}const w_=De.forwardRef(function(s,i){const{id:l,invert:u,position:c="bottom-right",hotkey:h=["altKey","KeyT"],expand:d,closeButton:g,className:m,offset:x,mobileOffset:v,theme:C="light",richColors:P,duration:M,style:k,visibleToasts:w=f_,toastOptions:B,dir:b=fm(),gap:E=g_,icons:T,containerAriaLabel:F="Notifications"}=s,[I,j]=De.useState([]),O=De.useMemo(()=>l?I.filter(q=>q.toasterId===l):I.filter(q=>!q.toasterId),[I,l]),G=De.useMemo(()=>Array.from(new Set([c].concat(O.filter(q=>q.position).map(q=>q.position)))),[O,c]),[U,K]=De.useState([]),[J,Y]=De.useState(!1),[ie,ge]=De.useState(!1),[$,se]=De.useState(C!=="system"?C:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),W=De.useRef(null),te=h.join("+").replace(/Key/g,"").replace(/Digit/g,""),Z=De.useRef(null),D=De.useRef(!1),H=De.useCallback(q=>{j(Q=>{var ae;return(ae=Q.find(ce=>ce.id===q.id))!=null&&ae.delete||Jn.dismiss(q.id),Q.filter(({id:ce})=>ce!==q.id)})},[]);return De.useEffect(()=>Jn.subscribe(q=>{if(q.dismiss){requestAnimationFrame(()=>{j(Q=>Q.map(ae=>ae.id===q.id?{...ae,delete:!0}:ae))});return}setTimeout(()=>{Bx.flushSync(()=>{j(Q=>{const ae=Q.findIndex(ce=>ce.id===q.id);return ae!==-1?[...Q.slice(0,ae),{...Q[ae],...q},...Q.slice(ae+1)]:[q,...Q]})})})}),[I]),De.useEffect(()=>{if(C!=="system"){se(C);return}if(C==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?se("dark"):se("light")),typeof window>"u")return;const q=window.matchMedia("(prefers-color-scheme: dark)");try{q.addEventListener("change",({matches:Q})=>{se(Q?"dark":"light")})}catch{q.addListener(({matches:ae})=>{try{se(ae?"dark":"light")}catch(ce){console.error(ce)}})}},[C]),De.useEffect(()=>{I.length<=1&&Y(!1)},[I]),De.useEffect(()=>{const q=Q=>{var ae;if(h.every(pe=>Q[pe]||Q.code===pe)){var Ae;Y(!0),(Ae=W.current)==null||Ae.focus()}Q.code==="Escape"&&(document.activeElement===W.current||(ae=W.current)!=null&&ae.contains(document.activeElement))&&Y(!1)};return document.addEventListener("keydown",q),()=>document.removeEventListener("keydown",q)},[h]),De.useEffect(()=>{if(W.current)return()=>{Z.current&&(Z.current.focus({preventScroll:!0}),Z.current=null,D.current=!1)}},[W.current]),De.createElement("section",{ref:i,"aria-label":`${F} ${te}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},G.map((q,Q)=>{var ae;const[ce,Ae]=q.split("-");return O.length?De.createElement("ol",{key:q,dir:b==="auto"?fm():b,tabIndex:-1,ref:W,className:m,"data-sonner-toaster":!0,"data-sonner-theme":$,"data-y-position":ce,"data-x-position":Ae,style:{"--front-toast-height":`${((ae=U[0])==null?void 0:ae.height)||0}px`,"--width":`${m_}px`,"--gap":`${E}px`,...k,...__(x,v)},onBlur:pe=>{D.current&&!pe.currentTarget.contains(pe.relatedTarget)&&(D.current=!1,Z.current&&(Z.current.focus({preventScroll:!0}),Z.current=null))},onFocus:pe=>{pe.target instanceof HTMLElement&&pe.target.dataset.dismissible==="false"||D.current||(D.current=!0,Z.current=pe.relatedTarget)},onMouseEnter:()=>Y(!0),onMouseMove:()=>Y(!0),onMouseLeave:()=>{ie||Y(!1)},onDragEnd:()=>Y(!1),onPointerDown:pe=>{pe.target instanceof HTMLElement&&pe.target.dataset.dismissible==="false"||ge(!0)},onPointerUp:()=>ge(!1)},O.filter(pe=>!pe.position&&Q===0||pe.position===q).map((pe,xe)=>{var Be,Oe;return De.createElement(y_,{key:pe.id,icons:T,index:xe,toast:pe,defaultRichColors:P,duration:(Be=B==null?void 0:B.duration)!=null?Be:M,className:B==null?void 0:B.className,descriptionClassName:B==null?void 0:B.descriptionClassName,invert:u,visibleToasts:w,closeButton:(Oe=B==null?void 0:B.closeButton)!=null?Oe:g,interacting:ie,position:q,style:B==null?void 0:B.style,unstyled:B==null?void 0:B.unstyled,classNames:B==null?void 0:B.classNames,cancelButtonStyle:B==null?void 0:B.cancelButtonStyle,actionButtonStyle:B==null?void 0:B.actionButtonStyle,closeButtonAriaLabel:B==null?void 0:B.closeButtonAriaLabel,removeToast:H,toasts:O.filter(Xe=>Xe.position==pe.position),heights:U.filter(Xe=>Xe.position==pe.position),setHeights:K,expandByDefault:d,gap:E,expanded:J,swipeDirections:s.swipeDirections})})):null}))}),b_=({...n})=>_.jsx(w_,{theme:"dark",className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-card group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground",error:"group-[.toaster]:bg-[#2a1a1a] group-[.toaster]:text-[#e8a0a0] group-[.toaster]:border-[#4a2a2a] [&_[data-description]]:text-[#b08080]"}},...n}),qu=200;function sc(n){return`${n.type}-${n.conversation_key}-${n.text}-${n.sender_timestamp}`}function C_(n){const[s,i]=N.useState([]),[l,u]=N.useState(!1),[c,h]=N.useState(!1),[d,g]=N.useState(!1),m=N.useRef(new Set),x=N.useRef(null),v=N.useRef(null),C=N.useCallback(async(w=!1,B)=>{if(!n||n.type==="raw"){i([]),g(!1);return}const b=n.id;w&&(u(!0),i([]));try{const E=await ut.getMessages({type:n.type==="channel"?"CHAN":"PRIV",conversation_key:n.id,limit:qu},B);if(v.current!==b)return;i(E),m.current.clear();for(const T of E)m.current.add(sc(T));g(E.length>=qu)}catch(E){if(Iy(E))return;console.error("Failed to fetch messages:",E),At.error("Failed to load messages",{description:E instanceof Error?E.message:"Check your connection"})}finally{w&&u(!1)}},[n]),P=N.useCallback(async()=>{if(!(!n||n.type==="raw"||c||!d)){h(!0);try{const w=await ut.getMessages({type:n.type==="channel"?"CHAN":"PRIV",conversation_key:n.id,limit:qu,offset:s.length});if(w.length>0){i(B=>[...B,...w]);for(const B of w)m.current.add(sc(B))}g(w.length>=qu)}catch(w){console.error("Failed to fetch older messages:",w),At.error("Failed to load older messages",{description:w instanceof Error?w.message:"Check your connection"})}finally{h(!1)}}},[n,c,d,s.length]);N.useEffect(()=>{if(x.current&&x.current.abort(),v.current=(n==null?void 0:n.id)??null,!n||n.type==="raw"){i([]),g(!1);return}const w=new AbortController;return x.current=w,C(!0,w.signal),()=>{w.abort()}},[n==null?void 0:n.id,n==null?void 0:n.type]);const M=N.useCallback(w=>{const B=sc(w);if(m.current.has(B))return console.debug("Duplicate message content ignored:",B.slice(0,50)),!1;if(m.current.add(B),m.current.size>1e3){const b=Array.from(m.current);m.current=new Set(b.slice(-500))}return i(b=>b.some(E=>E.id===w.id)?b:[...b,w]),!0},[]),k=N.useCallback((w,B,b)=>{i(E=>{const T=E.findIndex(F=>F.id===w);if(T>=0){const F=[...E];return F[T]={...E[T],acked:B,...b!==void 0&&{paths:b}},F}return E})},[]);return{messages:s,messagesLoading:l,loadingOlder:c,hasOlderMessages:d,setMessages:i,fetchMessages:C,fetchOlderMessages:P,addMessageIfNew:M,updateMessageAck:k}}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),k_=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,i,l)=>l?l.toUpperCase():i.toLowerCase()),hm=n=>{const s=k_(n);return s.charAt(0).toUpperCase()+s.slice(1)},Px=(...n)=>n.filter((s,i,l)=>!!s&&s.trim()!==""&&l.indexOf(s)===i).join(" ").trim(),S_=n=>{for(const s in n)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var B_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=N.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:u="",children:c,iconNode:h,...d},g)=>N.createElement("svg",{ref:g,...B_,width:s,height:s,stroke:n,strokeWidth:l?Number(i)*24/Number(s):i,className:Px("lucide",u),...!c&&!S_(d)&&{"aria-hidden":"true"},...d},[...h.map(([m,x])=>N.createElement(m,x)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=(n,s)=>{const i=N.forwardRef(({className:l,...u},c)=>N.createElement(P_,{ref:c,iconNode:s,className:Px(`lucide-${E_(hm(n))}`,`lucide-${n}`,l),...u}));return i.displayName=hm(n),i};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],D_=U0("check",T_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],F_=U0("menu",R_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Tx=U0("x",N_);function L_({health:n,config:s,onSettingsClick:i,onMenuClick:l}){const u=(n==null?void 0:n.radio_connected)??!1,[c,h]=N.useState(!1),d=async()=>{h(!0);try{const g=await ut.reconnectRadio();g.connected&&At.success("Reconnected",{description:g.message})}catch(g){At.error("Reconnection failed",{description:g instanceof Error?g.message:"Check radio connection and power"})}finally{h(!1)}};return _.jsxs("div",{className:"flex items-center gap-4 px-4 py-2 bg-[#252525] border-b border-[#333] text-xs",children:[l&&_.jsx("button",{onClick:l,className:"md:hidden p-1 bg-transparent border-none text-[#e0e0e0] cursor-pointer","aria-label":"Open menu",children:_.jsx(F_,{className:"h-5 w-5"})}),_.jsx("h1",{className:"text-base font-semibold mr-auto",children:"RemoteTerm"}),_.jsxs("div",{className:"flex items-center gap-1 text-[#888]",children:[_.jsx("div",{className:`w-2 h-2 rounded-full ${u?"bg-[#4caf50]":"bg-[#666]"}`}),_.jsx("span",{className:"hidden lg:inline text-[#e0e0e0]",children:u?"Connected":"Disconnected"})]}),s&&_.jsxs("div",{className:"hidden lg:flex items-center gap-2 text-[#888]",children:[_.jsx("span",{className:"text-[#e0e0e0]",children:s.name||"Unnamed"}),_.jsx("span",{className:"font-mono text-[#888] cursor-pointer hover:text-[#4a9eff]",onClick:()=>{navigator.clipboard.writeText(s.public_key),At.success("Public key copied!")},title:"Click to copy public key",children:s.public_key.toLowerCase()})]}),!u&&_.jsx("button",{onClick:d,disabled:c,className:"px-3 py-1 bg-[#4a3000] border border-[#6b4500] text-[#ffa500] rounded text-xs cursor-pointer hover:bg-[#5a3a00] disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Reconnecting...":"Reconnect"}),_.jsxs("button",{onClick:i,className:"px-3 py-1 bg-[#333] border border-[#444] text-[#e0e0e0] rounded text-xs cursor-pointer hover:bg-[#444]",children:[_.jsx("span",{role:"img","aria-label":"Settings",children:""})," ","Radio & Config"]})]})}const M_=12;function I_(n){return n.slice(0,M_)}function Ni(n,s){return n||I_(s)}const ia=2,O_={text:"",background:"#444444",textColor:"#ffffff"};function j_(n){let s=0;for(let i=0;i<n.length;i++){const l=n.charCodeAt(i);s=(s<<5)-s+l,s=s&s}return Math.abs(s)}const z_=/[\u{1F1E0}-\u{1F1FF}]{2}|[\u{1F300}-\u{1F9FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]|[\u{1F600}-\u{1F64F}]|[\u{1F680}-\u{1F6FF}]/u;function H_(n,s){if(!n)return s.slice(0,2).toUpperCase();const i=n.match(z_);if(i)return i[0];const l=n.match(/[a-zA-Z]/g);if(!l||l.length===0)return s.slice(0,2).toUpperCase();const u=n.indexOf(" ");if(u!==-1){const c=l[0],h=n.slice(u+1).match(/[a-zA-Z]/);if(h)return(c+h[0]).toUpperCase()}return l[0].toUpperCase()}function V_(n){const s=j_(n),i=s%360,l=50+(s>>8)%30,u=35+(s>>16)%20,c=`hsl(${i}, ${l}%, ${u}%)`,h=u<45?"#ffffff":"#000000";return{background:c,text:h}}function U_(n,s,i){if(i===ia)return O_;const l=H_(n,s),u=V_(s);return{text:l,background:u.background,textColor:u.text}}function b0({name:n,publicKey:s,size:i=28,contactType:l}){const u=U_(n,s,l);return _.jsx("div",{className:"flex items-center justify-center rounded-full font-semibold flex-shrink-0 select-none",style:{backgroundColor:u.background,color:u.textColor,width:i,height:i,fontSize:i*.45},children:u.text})}const Dx="remoteterm-favorites";function rs(n,s,i){return n.some(l=>l.type===s&&l.id===i)}function Z_(){try{const n=localStorage.getItem(Dx);return n?JSON.parse(n):[]}catch{return[]}}function pm(){try{localStorage.removeItem(Dx)}catch{}}function Rx(n){var s,i,l="";if(typeof n=="string"||typeof n=="number")l+=n;else if(typeof n=="object")if(Array.isArray(n)){var u=n.length;for(s=0;s<u;s++)n[s]&&(i=Rx(n[s]))&&(l&&(l+=" "),l+=i)}else for(i in n)n[i]&&(l&&(l+=" "),l+=i);return l}function Fx(){for(var n,s,i=0,l="",u=arguments.length;i<u;i++)(n=arguments[i])&&(s=Rx(n))&&(l&&(l+=" "),l+=s);return l}const W_=(n,s)=>{const i=new Array(n.length+s.length);for(let l=0;l<n.length;l++)i[l]=n[l];for(let l=0;l<s.length;l++)i[n.length+l]=s[l];return i},q_=(n,s)=>({classGroupId:n,validator:s}),Nx=(n=new Map,s=null,i)=>({nextPart:n,validators:s,classGroupId:i}),Yc="-",mm=[],G_="arbitrary..",$_=n=>{const s=Q_(n),{conflictingClassGroups:i,conflictingClassGroupModifiers:l}=n;return{getClassGroupId:h=>{if(h.startsWith("[")&&h.endsWith("]"))return K_(h);const d=h.split(Yc),g=d[0]===""&&d.length>1?1:0;return Lx(d,g,s)},getConflictingClassGroupIds:(h,d)=>{if(d){const g=l[h],m=i[h];return g?m?W_(m,g):g:m||mm}return i[h]||mm}}},Lx=(n,s,i)=>{if(n.length-s===0)return i.classGroupId;const u=n[s],c=i.nextPart.get(u);if(c){const m=Lx(n,s+1,c);if(m)return m}const h=i.validators;if(h===null)return;const d=s===0?n.join(Yc):n.slice(s).join(Yc),g=h.length;for(let m=0;m<g;m++){const x=h[m];if(x.validator(d))return x.classGroupId}},K_=n=>n.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const s=n.slice(1,-1),i=s.indexOf(":"),l=s.slice(0,i);return l?G_+l:void 0})(),Q_=n=>{const{theme:s,classGroups:i}=n;return Y_(i,s)},Y_=(n,s)=>{const i=Nx();for(const l in n){const u=n[l];Z0(u,i,l,s)}return i},Z0=(n,s,i,l)=>{const u=n.length;for(let c=0;c<u;c++){const h=n[c];X_(h,s,i,l)}},X_=(n,s,i,l)=>{if(typeof n=="string"){J_(n,s,i);return}if(typeof n=="function"){e1(n,s,i,l);return}t1(n,s,i,l)},J_=(n,s,i)=>{const l=n===""?s:Mx(s,n);l.classGroupId=i},e1=(n,s,i,l)=>{if(n1(n)){Z0(n(l),s,i,l);return}s.validators===null&&(s.validators=[]),s.validators.push(q_(i,n))},t1=(n,s,i,l)=>{const u=Object.entries(n),c=u.length;for(let h=0;h<c;h++){const[d,g]=u[h];Z0(g,Mx(s,d),i,l)}},Mx=(n,s)=>{let i=n;const l=s.split(Yc),u=l.length;for(let c=0;c<u;c++){const h=l[c];let d=i.nextPart.get(h);d||(d=Nx(),i.nextPart.set(h,d)),i=d}return i},n1=n=>"isThemeGetter"in n&&n.isThemeGetter===!0,r1=n=>{if(n<1)return{get:()=>{},set:()=>{}};let s=0,i=Object.create(null),l=Object.create(null);const u=(c,h)=>{i[c]=h,s++,s>n&&(s=0,l=i,i=Object.create(null))};return{get(c){let h=i[c];if(h!==void 0)return h;if((h=l[c])!==void 0)return u(c,h),h},set(c,h){c in i?i[c]=h:u(c,h)}}},C0="!",gm=":",i1=[],xm=(n,s,i,l,u)=>({modifiers:n,hasImportantModifier:s,baseClassName:i,maybePostfixModifierPosition:l,isExternal:u}),o1=n=>{const{prefix:s,experimentalParseClassName:i}=n;let l=u=>{const c=[];let h=0,d=0,g=0,m;const x=u.length;for(let k=0;k<x;k++){const w=u[k];if(h===0&&d===0){if(w===gm){c.push(u.slice(g,k)),g=k+1;continue}if(w==="/"){m=k;continue}}w==="["?h++:w==="]"?h--:w==="("?d++:w===")"&&d--}const v=c.length===0?u:u.slice(g);let C=v,P=!1;v.endsWith(C0)?(C=v.slice(0,-1),P=!0):v.startsWith(C0)&&(C=v.slice(1),P=!0);const M=m&&m>g?m-g:void 0;return xm(c,P,C,M)};if(s){const u=s+gm,c=l;l=h=>h.startsWith(u)?c(h.slice(u.length)):xm(i1,!1,h,void 0,!0)}if(i){const u=l;l=c=>i({className:c,parseClassName:u})}return l},s1=n=>{const s=new Map;return n.orderSensitiveModifiers.forEach((i,l)=>{s.set(i,1e6+l)}),i=>{const l=[];let u=[];for(let c=0;c<i.length;c++){const h=i[c],d=h[0]==="[",g=s.has(h);d||g?(u.length>0&&(u.sort(),l.push(...u),u=[]),l.push(h)):u.push(h)}return u.length>0&&(u.sort(),l.push(...u)),l}},a1=n=>({cache:r1(n.cacheSize),parseClassName:o1(n),sortModifiers:s1(n),...$_(n)}),l1=/\s+/,u1=(n,s)=>{const{parseClassName:i,getClassGroupId:l,getConflictingClassGroupIds:u,sortModifiers:c}=s,h=[],d=n.trim().split(l1);let g="";for(let m=d.length-1;m>=0;m-=1){const x=d[m],{isExternal:v,modifiers:C,hasImportantModifier:P,baseClassName:M,maybePostfixModifierPosition:k}=i(x);if(v){g=x+(g.length>0?" "+g:g);continue}let w=!!k,B=l(w?M.substring(0,k):M);if(!B){if(!w){g=x+(g.length>0?" "+g:g);continue}if(B=l(M),!B){g=x+(g.length>0?" "+g:g);continue}w=!1}const b=C.length===0?"":C.length===1?C[0]:c(C).join(":"),E=P?b+C0:b,T=E+B;if(h.indexOf(T)>-1)continue;h.push(T);const F=u(B,w);for(let I=0;I<F.length;++I){const j=F[I];h.push(E+j)}g=x+(g.length>0?" "+g:g)}return g},c1=(...n)=>{let s=0,i,l,u="";for(;s<n.length;)(i=n[s++])&&(l=Ix(i))&&(u&&(u+=" "),u+=l);return u},Ix=n=>{if(typeof n=="string")return n;let s,i="";for(let l=0;l<n.length;l++)n[l]&&(s=Ix(n[l]))&&(i&&(i+=" "),i+=s);return i},d1=(n,...s)=>{let i,l,u,c;const h=g=>{const m=s.reduce((x,v)=>v(x),n());return i=a1(m),l=i.cache.get,u=i.cache.set,c=d,d(g)},d=g=>{const m=l(g);if(m)return m;const x=u1(g,i);return u(g,x),x};return c=h,(...g)=>c(c1(...g))},f1=[],pn=n=>{const s=i=>i[n]||f1;return s.isThemeGetter=!0,s},Ox=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,jx=/^\((?:(\w[\w-]*):)?(.+)\)$/i,h1=/^\d+\/\d+$/,p1=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,m1=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,g1=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,x1=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,v1=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ys=n=>h1.test(n),gt=n=>!!n&&!Number.isNaN(Number(n)),go=n=>!!n&&Number.isInteger(Number(n)),o0=n=>n.endsWith("%")&&gt(n.slice(0,-1)),Pi=n=>p1.test(n),A1=()=>!0,y1=n=>m1.test(n)&&!g1.test(n),zx=()=>!1,_1=n=>x1.test(n),w1=n=>v1.test(n),b1=n=>!Ue(n)&&!Ze(n),C1=n=>ua(n,Ux,zx),Ue=n=>Ox.test(n),Qo=n=>ua(n,Zx,y1),s0=n=>ua(n,P1,gt),vm=n=>ua(n,Hx,zx),E1=n=>ua(n,Vx,w1),Gu=n=>ua(n,Wx,_1),Ze=n=>jx.test(n),nl=n=>ca(n,Zx),k1=n=>ca(n,T1),Am=n=>ca(n,Hx),S1=n=>ca(n,Ux),B1=n=>ca(n,Vx),$u=n=>ca(n,Wx,!0),ua=(n,s,i)=>{const l=Ox.exec(n);return l?l[1]?s(l[1]):i(l[2]):!1},ca=(n,s,i=!1)=>{const l=jx.exec(n);return l?l[1]?s(l[1]):i:!1},Hx=n=>n==="position"||n==="percentage",Vx=n=>n==="image"||n==="url",Ux=n=>n==="length"||n==="size"||n==="bg-size",Zx=n=>n==="length",P1=n=>n==="number",T1=n=>n==="family-name",Wx=n=>n==="shadow",D1=()=>{const n=pn("color"),s=pn("font"),i=pn("text"),l=pn("font-weight"),u=pn("tracking"),c=pn("leading"),h=pn("breakpoint"),d=pn("container"),g=pn("spacing"),m=pn("radius"),x=pn("shadow"),v=pn("inset-shadow"),C=pn("text-shadow"),P=pn("drop-shadow"),M=pn("blur"),k=pn("perspective"),w=pn("aspect"),B=pn("ease"),b=pn("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],T=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],F=()=>[...T(),Ze,Ue],I=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto","contain","none"],O=()=>[Ze,Ue,g],G=()=>[Ys,"full","auto",...O()],U=()=>[go,"none","subgrid",Ze,Ue],K=()=>["auto",{span:["full",go,Ze,Ue]},go,Ze,Ue],J=()=>[go,"auto",Ze,Ue],Y=()=>["auto","min","max","fr",Ze,Ue],ie=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ge=()=>["start","end","center","stretch","center-safe","end-safe"],$=()=>["auto",...O()],se=()=>[Ys,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...O()],W=()=>[n,Ze,Ue],te=()=>[...T(),Am,vm,{position:[Ze,Ue]}],Z=()=>["no-repeat",{repeat:["","x","y","space","round"]}],D=()=>["auto","cover","contain",S1,C1,{size:[Ze,Ue]}],H=()=>[o0,nl,Qo],q=()=>["","none","full",m,Ze,Ue],Q=()=>["",gt,nl,Qo],ae=()=>["solid","dashed","dotted","double"],ce=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ae=()=>[gt,o0,Am,vm],pe=()=>["","none",M,Ze,Ue],xe=()=>["none",gt,Ze,Ue],Be=()=>["none",gt,Ze,Ue],Oe=()=>[gt,Ze,Ue],Xe=()=>[Ys,"full",...O()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Pi],breakpoint:[Pi],color:[A1],container:[Pi],"drop-shadow":[Pi],ease:["in","out","in-out"],font:[b1],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Pi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Pi],shadow:[Pi],spacing:["px",gt],text:[Pi],"text-shadow":[Pi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ys,Ue,Ze,w]}],container:["container"],columns:[{columns:[gt,Ue,Ze,d]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:F()}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:G()}],"inset-x":[{"inset-x":G()}],"inset-y":[{"inset-y":G()}],start:[{start:G()}],end:[{end:G()}],top:[{top:G()}],right:[{right:G()}],bottom:[{bottom:G()}],left:[{left:G()}],visibility:["visible","invisible","collapse"],z:[{z:[go,"auto",Ze,Ue]}],basis:[{basis:[Ys,"full","auto",d,...O()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[gt,Ys,"auto","initial","none",Ue]}],grow:[{grow:["",gt,Ze,Ue]}],shrink:[{shrink:["",gt,Ze,Ue]}],order:[{order:[go,"first","last","none",Ze,Ue]}],"grid-cols":[{"grid-cols":U()}],"col-start-end":[{col:K()}],"col-start":[{"col-start":J()}],"col-end":[{"col-end":J()}],"grid-rows":[{"grid-rows":U()}],"row-start-end":[{row:K()}],"row-start":[{"row-start":J()}],"row-end":[{"row-end":J()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Y()}],"auto-rows":[{"auto-rows":Y()}],gap:[{gap:O()}],"gap-x":[{"gap-x":O()}],"gap-y":[{"gap-y":O()}],"justify-content":[{justify:[...ie(),"normal"]}],"justify-items":[{"justify-items":[...ge(),"normal"]}],"justify-self":[{"justify-self":["auto",...ge()]}],"align-content":[{content:["normal",...ie()]}],"align-items":[{items:[...ge(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ge(),{baseline:["","last"]}]}],"place-content":[{"place-content":ie()}],"place-items":[{"place-items":[...ge(),"baseline"]}],"place-self":[{"place-self":["auto",...ge()]}],p:[{p:O()}],px:[{px:O()}],py:[{py:O()}],ps:[{ps:O()}],pe:[{pe:O()}],pt:[{pt:O()}],pr:[{pr:O()}],pb:[{pb:O()}],pl:[{pl:O()}],m:[{m:$()}],mx:[{mx:$()}],my:[{my:$()}],ms:[{ms:$()}],me:[{me:$()}],mt:[{mt:$()}],mr:[{mr:$()}],mb:[{mb:$()}],ml:[{ml:$()}],"space-x":[{"space-x":O()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":O()}],"space-y-reverse":["space-y-reverse"],size:[{size:se()}],w:[{w:[d,"screen",...se()]}],"min-w":[{"min-w":[d,"screen","none",...se()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[h]},...se()]}],h:[{h:["screen","lh",...se()]}],"min-h":[{"min-h":["screen","lh","none",...se()]}],"max-h":[{"max-h":["screen","lh",...se()]}],"font-size":[{text:["base",i,nl,Qo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[l,Ze,s0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",o0,Ue]}],"font-family":[{font:[k1,Ue,s]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[u,Ze,Ue]}],"line-clamp":[{"line-clamp":[gt,"none",Ze,s0]}],leading:[{leading:[c,...O()]}],"list-image":[{"list-image":["none",Ze,Ue]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ze,Ue]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:W()}],"text-color":[{text:W()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ae(),"wavy"]}],"text-decoration-thickness":[{decoration:[gt,"from-font","auto",Ze,Qo]}],"text-decoration-color":[{decoration:W()}],"underline-offset":[{"underline-offset":[gt,"auto",Ze,Ue]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ze,Ue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ze,Ue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:te()}],"bg-repeat":[{bg:Z()}],"bg-size":[{bg:D()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},go,Ze,Ue],radial:["",Ze,Ue],conic:[go,Ze,Ue]},B1,E1]}],"bg-color":[{bg:W()}],"gradient-from-pos":[{from:H()}],"gradient-via-pos":[{via:H()}],"gradient-to-pos":[{to:H()}],"gradient-from":[{from:W()}],"gradient-via":[{via:W()}],"gradient-to":[{to:W()}],rounded:[{rounded:q()}],"rounded-s":[{"rounded-s":q()}],"rounded-e":[{"rounded-e":q()}],"rounded-t":[{"rounded-t":q()}],"rounded-r":[{"rounded-r":q()}],"rounded-b":[{"rounded-b":q()}],"rounded-l":[{"rounded-l":q()}],"rounded-ss":[{"rounded-ss":q()}],"rounded-se":[{"rounded-se":q()}],"rounded-ee":[{"rounded-ee":q()}],"rounded-es":[{"rounded-es":q()}],"rounded-tl":[{"rounded-tl":q()}],"rounded-tr":[{"rounded-tr":q()}],"rounded-br":[{"rounded-br":q()}],"rounded-bl":[{"rounded-bl":q()}],"border-w":[{border:Q()}],"border-w-x":[{"border-x":Q()}],"border-w-y":[{"border-y":Q()}],"border-w-s":[{"border-s":Q()}],"border-w-e":[{"border-e":Q()}],"border-w-t":[{"border-t":Q()}],"border-w-r":[{"border-r":Q()}],"border-w-b":[{"border-b":Q()}],"border-w-l":[{"border-l":Q()}],"divide-x":[{"divide-x":Q()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Q()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ae(),"hidden","none"]}],"divide-style":[{divide:[...ae(),"hidden","none"]}],"border-color":[{border:W()}],"border-color-x":[{"border-x":W()}],"border-color-y":[{"border-y":W()}],"border-color-s":[{"border-s":W()}],"border-color-e":[{"border-e":W()}],"border-color-t":[{"border-t":W()}],"border-color-r":[{"border-r":W()}],"border-color-b":[{"border-b":W()}],"border-color-l":[{"border-l":W()}],"divide-color":[{divide:W()}],"outline-style":[{outline:[...ae(),"none","hidden"]}],"outline-offset":[{"outline-offset":[gt,Ze,Ue]}],"outline-w":[{outline:["",gt,nl,Qo]}],"outline-color":[{outline:W()}],shadow:[{shadow:["","none",x,$u,Gu]}],"shadow-color":[{shadow:W()}],"inset-shadow":[{"inset-shadow":["none",v,$u,Gu]}],"inset-shadow-color":[{"inset-shadow":W()}],"ring-w":[{ring:Q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:W()}],"ring-offset-w":[{"ring-offset":[gt,Qo]}],"ring-offset-color":[{"ring-offset":W()}],"inset-ring-w":[{"inset-ring":Q()}],"inset-ring-color":[{"inset-ring":W()}],"text-shadow":[{"text-shadow":["none",C,$u,Gu]}],"text-shadow-color":[{"text-shadow":W()}],opacity:[{opacity:[gt,Ze,Ue]}],"mix-blend":[{"mix-blend":[...ce(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ce()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[gt]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ae()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ae()}],"mask-image-linear-from-color":[{"mask-linear-from":W()}],"mask-image-linear-to-color":[{"mask-linear-to":W()}],"mask-image-t-from-pos":[{"mask-t-from":Ae()}],"mask-image-t-to-pos":[{"mask-t-to":Ae()}],"mask-image-t-from-color":[{"mask-t-from":W()}],"mask-image-t-to-color":[{"mask-t-to":W()}],"mask-image-r-from-pos":[{"mask-r-from":Ae()}],"mask-image-r-to-pos":[{"mask-r-to":Ae()}],"mask-image-r-from-color":[{"mask-r-from":W()}],"mask-image-r-to-color":[{"mask-r-to":W()}],"mask-image-b-from-pos":[{"mask-b-from":Ae()}],"mask-image-b-to-pos":[{"mask-b-to":Ae()}],"mask-image-b-from-color":[{"mask-b-from":W()}],"mask-image-b-to-color":[{"mask-b-to":W()}],"mask-image-l-from-pos":[{"mask-l-from":Ae()}],"mask-image-l-to-pos":[{"mask-l-to":Ae()}],"mask-image-l-from-color":[{"mask-l-from":W()}],"mask-image-l-to-color":[{"mask-l-to":W()}],"mask-image-x-from-pos":[{"mask-x-from":Ae()}],"mask-image-x-to-pos":[{"mask-x-to":Ae()}],"mask-image-x-from-color":[{"mask-x-from":W()}],"mask-image-x-to-color":[{"mask-x-to":W()}],"mask-image-y-from-pos":[{"mask-y-from":Ae()}],"mask-image-y-to-pos":[{"mask-y-to":Ae()}],"mask-image-y-from-color":[{"mask-y-from":W()}],"mask-image-y-to-color":[{"mask-y-to":W()}],"mask-image-radial":[{"mask-radial":[Ze,Ue]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ae()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ae()}],"mask-image-radial-from-color":[{"mask-radial-from":W()}],"mask-image-radial-to-color":[{"mask-radial-to":W()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":T()}],"mask-image-conic-pos":[{"mask-conic":[gt]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ae()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ae()}],"mask-image-conic-from-color":[{"mask-conic-from":W()}],"mask-image-conic-to-color":[{"mask-conic-to":W()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:te()}],"mask-repeat":[{mask:Z()}],"mask-size":[{mask:D()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ze,Ue]}],filter:[{filter:["","none",Ze,Ue]}],blur:[{blur:pe()}],brightness:[{brightness:[gt,Ze,Ue]}],contrast:[{contrast:[gt,Ze,Ue]}],"drop-shadow":[{"drop-shadow":["","none",P,$u,Gu]}],"drop-shadow-color":[{"drop-shadow":W()}],grayscale:[{grayscale:["",gt,Ze,Ue]}],"hue-rotate":[{"hue-rotate":[gt,Ze,Ue]}],invert:[{invert:["",gt,Ze,Ue]}],saturate:[{saturate:[gt,Ze,Ue]}],sepia:[{sepia:["",gt,Ze,Ue]}],"backdrop-filter":[{"backdrop-filter":["","none",Ze,Ue]}],"backdrop-blur":[{"backdrop-blur":pe()}],"backdrop-brightness":[{"backdrop-brightness":[gt,Ze,Ue]}],"backdrop-contrast":[{"backdrop-contrast":[gt,Ze,Ue]}],"backdrop-grayscale":[{"backdrop-grayscale":["",gt,Ze,Ue]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[gt,Ze,Ue]}],"backdrop-invert":[{"backdrop-invert":["",gt,Ze,Ue]}],"backdrop-opacity":[{"backdrop-opacity":[gt,Ze,Ue]}],"backdrop-saturate":[{"backdrop-saturate":[gt,Ze,Ue]}],"backdrop-sepia":[{"backdrop-sepia":["",gt,Ze,Ue]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":O()}],"border-spacing-x":[{"border-spacing-x":O()}],"border-spacing-y":[{"border-spacing-y":O()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ze,Ue]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[gt,"initial",Ze,Ue]}],ease:[{ease:["linear","initial",B,Ze,Ue]}],delay:[{delay:[gt,Ze,Ue]}],animate:[{animate:["none",b,Ze,Ue]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[k,Ze,Ue]}],"perspective-origin":[{"perspective-origin":F()}],rotate:[{rotate:xe()}],"rotate-x":[{"rotate-x":xe()}],"rotate-y":[{"rotate-y":xe()}],"rotate-z":[{"rotate-z":xe()}],scale:[{scale:Be()}],"scale-x":[{"scale-x":Be()}],"scale-y":[{"scale-y":Be()}],"scale-z":[{"scale-z":Be()}],"scale-3d":["scale-3d"],skew:[{skew:Oe()}],"skew-x":[{"skew-x":Oe()}],"skew-y":[{"skew-y":Oe()}],transform:[{transform:[Ze,Ue,"","none","gpu","cpu"]}],"transform-origin":[{origin:F()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Xe()}],"translate-x":[{"translate-x":Xe()}],"translate-y":[{"translate-y":Xe()}],"translate-z":[{"translate-z":Xe()}],"translate-none":["translate-none"],accent:[{accent:W()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:W()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ze,Ue]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ze,Ue]}],fill:[{fill:["none",...W()]}],"stroke-w":[{stroke:[gt,nl,Qo,s0]}],stroke:[{stroke:["none",...W()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},R1=d1(D1);function pt(...n){return R1(Fx(n))}const on=N.forwardRef(({className:n,type:s,...i},l)=>_.jsx("input",{type:s,className:pt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:l,...i}));on.displayName="Input";function ym(n,s){if(typeof n=="function")return n(s);n!=null&&(n.current=s)}function Sl(...n){return s=>{let i=!1;const l=n.map(u=>{const c=ym(u,s);return!i&&typeof c=="function"&&(i=!0),c});if(i)return()=>{for(let u=0;u<l.length;u++){const c=l[u];typeof c=="function"?c():ym(n[u],null)}}}}function Sr(...n){return N.useCallback(Sl(...n),n)}var F1=Symbol.for("react.lazy"),Xc=z0[" use ".trim().toString()];function N1(n){return typeof n=="object"&&n!==null&&"then"in n}function qx(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===F1&&"_payload"in n&&N1(n._payload)}function W0(n){const s=M1(n),i=N.forwardRef((l,u)=>{let{children:c,...h}=l;qx(c)&&typeof Xc=="function"&&(c=Xc(c._payload));const d=N.Children.toArray(c),g=d.find(O1);if(g){const m=g.props.children,x=d.map(v=>v===g?N.Children.count(m)>1?N.Children.only(null):N.isValidElement(m)?m.props.children:null:v);return _.jsx(s,{...h,ref:u,children:N.isValidElement(m)?N.cloneElement(m,void 0,x):null})}return _.jsx(s,{...h,ref:u,children:c})});return i.displayName=`${n}.Slot`,i}var L1=W0("Slot");function M1(n){const s=N.forwardRef((i,l)=>{let{children:u,...c}=i;if(qx(u)&&typeof Xc=="function"&&(u=Xc(u._payload)),N.isValidElement(u)){const h=z1(u),d=j1(c,u.props);return u.type!==N.Fragment&&(d.ref=l?Sl(l,h):h),N.cloneElement(u,d)}return N.Children.count(u)>1?N.Children.only(null):null});return s.displayName=`${n}.SlotClone`,s}var I1=Symbol("radix.slottable");function O1(n){return N.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===I1}function j1(n,s){const i={...s};for(const l in s){const u=n[l],c=s[l];/^on[A-Z]/.test(l)?u&&c?i[l]=(...d)=>{const g=c(...d);return u(...d),g}:u&&(i[l]=u):l==="style"?i[l]={...u,...c}:l==="className"&&(i[l]=[u,c].filter(Boolean).join(" "))}return{...n,...i}}function z1(n){var l,u;let s=(l=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:l.get,i=s&&"isReactWarning"in s&&s.isReactWarning;return i?n.ref:(s=(u=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:u.get,i=s&&"isReactWarning"in s&&s.isReactWarning,i?n.props.ref:n.props.ref||n.ref)}const _m=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,wm=Fx,q0=(n,s)=>i=>{var l;if((s==null?void 0:s.variants)==null)return wm(n,i==null?void 0:i.class,i==null?void 0:i.className);const{variants:u,defaultVariants:c}=s,h=Object.keys(u).map(m=>{const x=i==null?void 0:i[m],v=c==null?void 0:c[m];if(x===null)return null;const C=_m(x)||_m(v);return u[m][C]}),d=i&&Object.entries(i).reduce((m,x)=>{let[v,C]=x;return C===void 0||(m[v]=C),m},{}),g=s==null||(l=s.compoundVariants)===null||l===void 0?void 0:l.reduce((m,x)=>{let{class:v,className:C,...P}=x;return Object.entries(P).every(M=>{let[k,w]=M;return Array.isArray(w)?w.includes({...c,...d}[k]):{...c,...d}[k]===w})?[...m,v,C]:m},[]);return wm(n,h,g,i==null?void 0:i.class,i==null?void 0:i.className)},H1=q0("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),mn=N.forwardRef(({className:n,variant:s,size:i,asChild:l=!1,...u},c)=>{const h=l?L1:"button";return _.jsx(h,{className:pt(H1({variant:s,size:i,className:n})),ref:c,...u})});mn.displayName="Button";function Ku(n){return n>=H0?`${n}+`:`${n}`}function V1({contacts:n,channels:s,activeConversation:i,onSelectConversation:l,onNewMessage:u,lastMessageTimes:c,unreadCounts:h,mentions:d,showCracker:g,crackerRunning:m,onToggleCracker:x,onMarkAllRead:v,favorites:C,sortOrder:P="recent",onSortOrderChange:M}){const k=P,[w,B]=N.useState(""),b=()=>{const Z=k==="alpha"?"recent":"alpha";M==null||M(Z)},E=Z=>{B(""),l(Z)},T=(Z,D)=>(i==null?void 0:i.type)===Z&&(i==null?void 0:i.id)===D,F=(Z,D)=>{const H=Hr(Z,D);return h[H]||0},I=(Z,D)=>{const H=Hr(Z,D);return d[H]||!1},j=(Z,D)=>{const H=Hr(Z,D);return c[H]||0},O=s.reduce((Z,D)=>(Z.some(H=>H.name===D.name)||Z.push(D),Z),[]),G=n.filter(Z=>Z.public_key&&Z.public_key.length>0).sort((Z,D)=>Z.name&&!D.name?-1:!Z.name&&D.name?1:(Z.name||"").localeCompare(D.name||"")).reduce((Z,D)=>(Z.some(H=>H.public_key===D.public_key)||Z.push(D),Z),[]),U=[...O].sort((Z,D)=>{if(Z.name==="Public")return-1;if(D.name==="Public")return 1;if(k==="recent"){const H=j("channel",Z.key),q=j("channel",D.key);if(H&&q)return q-H;if(H&&!q)return-1;if(!H&&q)return 1}return Z.name.localeCompare(D.name)}),K=[...G].sort((Z,D)=>{const H=Z.type===ia,q=D.type===ia;if(H&&!q)return 1;if(!H&&q)return-1;if(H&&q)return(Z.name||Z.public_key).localeCompare(D.name||D.public_key);if(k==="recent"){const Q=j("contact",Z.public_key),ae=j("contact",D.public_key);if(Q&&ae)return ae-Q;if(Q&&!ae)return-1;if(!Q&&ae)return 1}return(Z.name||Z.public_key).localeCompare(D.name||D.public_key)}),J=w.toLowerCase().trim(),Y=J?U.filter(Z=>Z.name.toLowerCase().includes(J)||Z.key.toLowerCase().includes(J)):U,ie=J?K.filter(Z=>{var D;return((D=Z.name)==null?void 0:D.toLowerCase().includes(J))||Z.public_key.toLowerCase().includes(J)}):K,ge=Y.filter(Z=>rs(C,"channel",Z.key)),$=ie.filter(Z=>rs(C,"contact",Z.public_key)),se=Y.filter(Z=>!rs(C,"channel",Z.key)),W=ie.filter(Z=>!rs(C,"contact",Z.public_key)),te=[...ge.map(Z=>({type:"channel",channel:Z})),...$.map(Z=>({type:"contact",contact:Z}))].sort((Z,D)=>{const H=Z.type==="channel"?j("channel",Z.channel.key):j("contact",Z.contact.public_key),q=D.type==="channel"?j("channel",D.channel.key):j("contact",D.contact.public_key);if(H&&q)return q-H;if(H&&!q)return-1;if(!H&&q)return 1;const Q=Z.type==="channel"?Z.channel.name:Z.contact.name||Z.contact.public_key,ae=D.type==="channel"?D.channel.name:D.contact.name||D.contact.public_key;return Q.localeCompare(ae)});return _.jsxs("div",{className:"sidebar w-60 h-full min-h-0 bg-card border-r border-border flex flex-col",children:[_.jsxs("div",{className:"flex justify-between items-center px-3 py-3 border-b border-border",children:[_.jsx("h2",{className:"text-xs uppercase text-muted-foreground font-medium",children:"Conversations"}),_.jsx(mn,{variant:"ghost",size:"sm",onClick:u,title:"New Message",className:"h-6 w-6 p-0 text-muted-foreground hover:text-foreground",children:"+"})]}),_.jsxs("div",{className:"relative px-3 py-2 border-b border-border",children:[_.jsx(on,{type:"text",placeholder:"Search...",value:w,onChange:Z=>B(Z.target.value),className:"h-8 text-sm pr-8"}),w&&_.jsx("button",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground text-lg leading-none",onClick:()=>B(""),title:"Clear search",children:""})]}),_.jsxs("div",{className:"flex-1 overflow-y-auto",children:[!J&&_.jsxs("div",{className:pt("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",T("raw","raw")&&"bg-accent border-l-primary"),onClick:()=>E({type:"raw",id:"raw",name:"Raw Packet Feed"}),children:[_.jsx("span",{className:"text-muted-foreground text-xs",children:""}),_.jsx("span",{className:"flex-1 truncate",children:"Packet Feed"})]}),!J&&_.jsxs("div",{className:pt("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",T("map","map")&&"bg-accent border-l-primary"),onClick:()=>E({type:"map",id:"map",name:"Node Map"}),children:[_.jsx("span",{className:"text-muted-foreground text-xs",children:""}),_.jsx("span",{className:"flex-1 truncate",children:"Node Map"})]}),!J&&_.jsxs("div",{className:pt("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",T("visualizer","visualizer")&&"bg-accent border-l-primary"),onClick:()=>E({type:"visualizer",id:"visualizer",name:"Mesh Visualizer"}),children:[_.jsx("span",{className:"text-muted-foreground text-xs",children:""}),_.jsx("span",{className:"flex-1 truncate",children:"Mesh Visualizer"})]}),!J&&_.jsxs("div",{className:pt("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",g&&"bg-accent border-l-primary"),onClick:x,children:[_.jsx("span",{className:"text-muted-foreground text-xs",children:""}),_.jsxs("span",{className:"flex-1 truncate",children:[g?"Hide":"Show"," Room Finder",_.jsxs("span",{className:pt("ml-1 text-xs",m?"text-green-500":"text-muted-foreground"),children:["(",m?"running":"stopped",")"]})]})]}),!J&&Object.keys(h).length>0&&_.jsxs("div",{className:"px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",onClick:v,children:[_.jsx("span",{className:"text-muted-foreground text-xs",children:""}),_.jsx("span",{className:"flex-1 truncate text-muted-foreground",children:"Mark all as read"})]}),te.length>0&&_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"flex justify-between items-center px-3 py-2 pt-3",children:_.jsx("span",{className:"text-[11px] uppercase text-muted-foreground",children:"Favorites"})}),te.map(Z=>{if(Z.type==="channel"){const D=Z.channel,H=F("channel",D.key),q=I("channel",D.key);return _.jsxs("div",{className:pt("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",T("channel",D.key)&&"bg-accent border-l-primary",H>0&&"[&_.name]:font-bold [&_.name]:text-foreground"),onClick:()=>E({type:"channel",id:D.key,name:D.name}),children:[_.jsx("span",{className:"name flex-1 truncate",children:D.name}),H>0&&_.jsx("span",{className:pt("text-[10px] font-semibold px-1.5 py-0.5 rounded-full min-w-[18px] text-center",q?"bg-destructive text-destructive-foreground":"bg-primary text-primary-foreground"),children:Ku(H)})]},`fav-chan-${D.key}`)}else{const D=Z.contact,H=F("contact",D.public_key),q=I("contact",D.public_key);return _.jsxs("div",{className:pt("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",T("contact",D.public_key)&&"bg-accent border-l-primary",H>0&&"[&_.name]:font-bold [&_.name]:text-foreground"),onClick:()=>E({type:"contact",id:D.public_key,name:Ni(D.name,D.public_key)}),children:[_.jsx(b0,{name:D.name,publicKey:D.public_key,size:24,contactType:D.type}),_.jsx("span",{className:"name flex-1 truncate",children:Ni(D.name,D.public_key)}),H>0&&_.jsx("span",{className:pt("text-[10px] font-semibold px-1.5 py-0.5 rounded-full min-w-[18px] text-center",q?"bg-destructive text-destructive-foreground":"bg-primary text-primary-foreground"),children:Ku(H)})]},`fav-contact-${D.public_key}`)}})]}),se.length>0&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"flex justify-between items-center px-3 py-2 pt-3",children:[_.jsx("span",{className:"text-[11px] uppercase text-muted-foreground",children:"Channels"}),_.jsx("button",{className:"bg-transparent border border-border text-muted-foreground px-1.5 py-0.5 text-[10px] rounded hover:bg-accent hover:text-foreground",onClick:b,title:k==="alpha"?"Sort by recent":"Sort alphabetically",children:k==="alpha"?"A-Z":""})]}),se.map(Z=>{const D=F("channel",Z.key),H=I("channel",Z.key);return _.jsxs("div",{className:pt("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",T("channel",Z.key)&&"bg-accent border-l-primary",D>0&&"[&_.name]:font-bold [&_.name]:text-foreground"),onClick:()=>E({type:"channel",id:Z.key,name:Z.name}),children:[_.jsx("span",{className:"name flex-1 truncate",children:Z.name}),D>0&&_.jsx("span",{className:pt("text-[10px] font-semibold px-1.5 py-0.5 rounded-full min-w-[18px] text-center",H?"bg-destructive text-destructive-foreground":"bg-primary text-primary-foreground"),children:Ku(D)})]},`chan-${Z.key}`)})]}),W.length>0&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"flex justify-between items-center px-3 py-2 pt-3",children:[_.jsx("span",{className:"text-[11px] uppercase text-muted-foreground",children:"Contacts"}),se.length===0&&_.jsx("button",{className:"bg-transparent border border-border text-muted-foreground px-1.5 py-0.5 text-[10px] rounded hover:bg-accent hover:text-foreground",onClick:b,title:k==="alpha"?"Sort by recent":"Sort alphabetically",children:k==="alpha"?"A-Z":""})]}),W.map(Z=>{const D=F("contact",Z.public_key),H=I("contact",Z.public_key);return _.jsxs("div",{className:pt("px-3 py-2.5 cursor-pointer flex items-center gap-2 border-l-2 border-transparent hover:bg-accent",T("contact",Z.public_key)&&"bg-accent border-l-primary",D>0&&"[&_.name]:font-bold [&_.name]:text-foreground"),onClick:()=>E({type:"contact",id:Z.public_key,name:Ni(Z.name,Z.public_key)}),children:[_.jsx(b0,{name:Z.name,publicKey:Z.public_key,size:24,contactType:Z.type}),_.jsx("span",{className:"name flex-1 truncate",children:Ni(Z.name,Z.public_key)}),D>0&&_.jsx("span",{className:pt("text-[10px] font-semibold px-1.5 py-0.5 rounded-full min-w-[18px] text-center",H?"bg-destructive text-destructive-foreground":"bg-primary text-primary-foreground"),children:Ku(D)})]},Z.public_key)})]}),W.length===0&&se.length===0&&te.length===0&&_.jsx("div",{className:"p-5 text-center text-muted-foreground",children:J?"No matches found":"No conversations yet"})]})]})}function bm(n){const s=n.indexOf(": ");if(s>0&&s<50){const i=n.substring(0,s);if(!i.includes(":"))return{sender:i,content:n.substring(s+2)}}return{sender:null,content:n}}function oa(n){const s=new Date(n*1e3),i=new Date,l=s.toDateString()===i.toDateString(),u=s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return l?u:`${s.toLocaleDateString([],{month:"short",day:"numeric"})} ${u}`}function U1(n){if(!n||n.length===0)return[];const s=n.toUpperCase(),i=[];for(let l=0;l<s.length;l+=2)l+1<s.length&&i.push(s.slice(l,l+2));return i}function Z1(n,s,i=!0){const l=n.toUpperCase();return s.filter(u=>i&&u.type!==ad?!1:u.public_key.toUpperCase().startsWith(l))}function Vr(n,s,i,l){if(n===null||s===null||i===null||l===null)return null;const u=6371,c=Qu(i-n),h=Qu(l-s),d=Math.sin(c/2)*Math.sin(c/2)+Math.cos(Qu(n))*Math.cos(Qu(i))*Math.sin(h/2)*Math.sin(h/2),g=2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d));return u*g}function Qu(n){return n*Math.PI/180}function Lt(n,s){return!(n===null||s===null||n===0&&s===0)}function is(n){return n<1?`${Math.round(n*1e3)}m`:`${n.toFixed(1)}km`}function W1(n,s,i){return s===null||i===null?n:[...n].sort((l,u)=>{const c=Vr(s,i,l.lat,l.lon),h=Vr(s,i,u.lat,u.lon);return c===null&&h===null?0:c===null?1:h===null?-1:c-h})}function q1(n){return!n||n.length===0?0:Math.floor(n.length/2)}function G1(n){if(!n||n.length===0)return{display:"",allDirect:!0,hasMultiple:!1};const s=n.map(h=>q1(h.path)).sort((h,d)=>h-d),i=s.every(h=>h===0),l=n.length>1;return{display:s.map(h=>h===0?"d":h.toString()).join("/"),allDirect:i,hasMultiple:l}}function $1(n,s,i,l){var k;const u=U1(n),c=s.publicKeyOrPrefix.toUpperCase().slice(0,2),h={name:s.name,prefix:c,lat:s.lat,lon:s.lon},d=((k=l==null?void 0:l.public_key)==null?void 0:k.toUpperCase().slice(0,2))||"??",g={name:(l==null?void 0:l.name)||"Unknown",prefix:d,lat:(l==null?void 0:l.lat)??null,lon:(l==null?void 0:l.lon)??null,publicKey:(l==null?void 0:l.public_key)??null},m=[];let x=s.lat,v=s.lon,C=!Lt(s.lat,s.lon);for(const w of u){const B=Z1(w,i,!0),b=W1(B,x,v);let E=null;const T=b.length===1&&Lt(b[0].lat,b[0].lon);!C&&T&&(E=Vr(x,v,b[0].lat,b[0].lon)),m.push({prefix:w,matches:b,distanceFromPrev:E}),b.length===0?(C=!0,x=null,v=null):b.length>1?(C=!0,Lt(b[0].lat,b[0].lon)?(x=b[0].lat,v=b[0].lon):(x=null,v=null)):Lt(b[0].lat,b[0].lon)?(C=!1,x=b[0].lat,v=b[0].lon):(C=!0,x=null,v=null)}const P=K1(h,m,g),M=!Lt(h.lat,h.lon)||!Lt(g.lat,g.lon)||m.some(w=>w.matches.length!==1||!Lt(w.matches[0].lat,w.matches[0].lon));return{sender:h,hops:m,receiver:g,totalDistances:P,hasGaps:M}}function K1(n,s,i){if(s.length===0){if(!Lt(n.lat,n.lon)||!Lt(i.lat,i.lon))return null;const m=Vr(n.lat,n.lon,i.lat,i.lon);return m!==null?[m]:null}let l=n.lat,u=n.lon,c=0;if(!Lt(l,u)){for(let m=0;m<s.length;m++){const x=s[m];if(x.matches.length===1&&Lt(x.matches[0].lat,x.matches[0].lon)){l=x.matches[0].lat,u=x.matches[0].lon,c=m+1;break}}if(!Lt(l,u))return null}let h=0,d=!1,g=-1;for(let m=c;m<s.length;m++){const x=s[m];if(x.matches.length!==1||!Lt(x.matches[0].lat,x.matches[0].lon)){l=null,u=null;continue}if(l!==null&&u!==null){const v=Vr(l,u,x.matches[0].lat,x.matches[0].lon);v!==null&&(h+=v,d=!0)}l=x.matches[0].lat,u=x.matches[0].lon,g=m}if(g===s.length-1&&l!==null&&u!==null&&Lt(i.lat,i.lon)){const m=Vr(l,u,i.lat,i.lon);m!==null&&(h+=m,d=!0)}return d?[h]:null}function xn(n,s,{checkForDefaultPrevented:i=!0}={}){return function(u){if(n==null||n(u),i===!1||!u.defaultPrevented)return s==null?void 0:s(u)}}function Q1(n,s){const i=N.createContext(s),l=c=>{const{children:h,...d}=c,g=N.useMemo(()=>d,Object.values(d));return _.jsx(i.Provider,{value:g,children:h})};l.displayName=n+"Provider";function u(c){const h=N.useContext(i);if(h)return h;if(s!==void 0)return s;throw new Error(`\`${c}\` must be used within \`${n}\``)}return[l,u]}function Bl(n,s=[]){let i=[];function l(c,h){const d=N.createContext(h),g=i.length;i=[...i,h];const m=v=>{var B;const{scope:C,children:P,...M}=v,k=((B=C==null?void 0:C[n])==null?void 0:B[g])||d,w=N.useMemo(()=>M,Object.values(M));return _.jsx(k.Provider,{value:w,children:P})};m.displayName=c+"Provider";function x(v,C){var k;const P=((k=C==null?void 0:C[n])==null?void 0:k[g])||d,M=N.useContext(P);if(M)return M;if(h!==void 0)return h;throw new Error(`\`${v}\` must be used within \`${c}\``)}return[m,x]}const u=()=>{const c=i.map(h=>N.createContext(h));return function(d){const g=(d==null?void 0:d[n])||c;return N.useMemo(()=>({[`__scope${n}`]:{...d,[n]:g}}),[d,g])}};return u.scopeName=n,[l,Y1(u,...s)]}function Y1(...n){const s=n[0];if(n.length===1)return s;const i=()=>{const l=n.map(u=>({useScope:u(),scopeName:u.scopeName}));return function(c){const h=l.reduce((d,{useScope:g,scopeName:m})=>{const v=g(c)[`__scope${m}`];return{...d,...v}},{});return N.useMemo(()=>({[`__scope${s.scopeName}`]:h}),[h])}};return i.scopeName=s.scopeName,i}var sa=globalThis!=null&&globalThis.document?N.useLayoutEffect:()=>{},X1=z0[" useId ".trim().toString()]||(()=>{}),J1=0;function wl(n){const[s,i]=N.useState(X1());return sa(()=>{i(l=>l??String(J1++))},[n]),s?`radix-${s}`:""}var ew=z0[" useInsertionEffect ".trim().toString()]||sa;function ld({prop:n,defaultProp:s,onChange:i=()=>{},caller:l}){const[u,c,h]=tw({defaultProp:s,onChange:i}),d=n!==void 0,g=d?n:u;{const x=N.useRef(n!==void 0);N.useEffect(()=>{const v=x.current;v!==d&&console.warn(`${l} is changing from ${v?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),x.current=d},[d,l])}const m=N.useCallback(x=>{var v;if(d){const C=nw(x)?x(n):x;C!==n&&((v=h.current)==null||v.call(h,C))}else c(x)},[d,n,c,h]);return[g,m]}function tw({defaultProp:n,onChange:s}){const[i,l]=N.useState(n),u=N.useRef(i),c=N.useRef(s);return ew(()=>{c.current=s},[s]),N.useEffect(()=>{var h;u.current!==i&&((h=c.current)==null||h.call(c,i),u.current=i)},[i,u]),[i,l,c]}function nw(n){return typeof n=="function"}function rw(n){const s=iw(n),i=N.forwardRef((l,u)=>{const{children:c,...h}=l,d=N.Children.toArray(c),g=d.find(sw);if(g){const m=g.props.children,x=d.map(v=>v===g?N.Children.count(m)>1?N.Children.only(null):N.isValidElement(m)?m.props.children:null:v);return _.jsx(s,{...h,ref:u,children:N.isValidElement(m)?N.cloneElement(m,void 0,x):null})}return _.jsx(s,{...h,ref:u,children:c})});return i.displayName=`${n}.Slot`,i}function iw(n){const s=N.forwardRef((i,l)=>{const{children:u,...c}=i;if(N.isValidElement(u)){const h=lw(u),d=aw(c,u.props);return u.type!==N.Fragment&&(d.ref=l?Sl(l,h):h),N.cloneElement(u,d)}return N.Children.count(u)>1?N.Children.only(null):null});return s.displayName=`${n}.SlotClone`,s}var ow=Symbol("radix.slottable");function sw(n){return N.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===ow}function aw(n,s){const i={...s};for(const l in s){const u=n[l],c=s[l];/^on[A-Z]/.test(l)?u&&c?i[l]=(...d)=>{const g=c(...d);return u(...d),g}:u&&(i[l]=u):l==="style"?i[l]={...u,...c}:l==="className"&&(i[l]=[u,c].filter(Boolean).join(" "))}return{...n,...i}}function lw(n){var l,u;let s=(l=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:l.get,i=s&&"isReactWarning"in s&&s.isReactWarning;return i?n.ref:(s=(u=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:u.get,i=s&&"isReactWarning"in s&&s.isReactWarning,i?n.props.ref:n.props.ref||n.ref)}var uw=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],wn=uw.reduce((n,s)=>{const i=rw(`Primitive.${s}`),l=N.forwardRef((u,c)=>{const{asChild:h,...d}=u,g=h?i:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),_.jsx(g,{...d,ref:c})});return l.displayName=`Primitive.${s}`,{...n,[s]:l}},{});function cw(n,s){n&&V0.flushSync(()=>n.dispatchEvent(s))}function aa(n){const s=N.useRef(n);return N.useEffect(()=>{s.current=n}),N.useMemo(()=>(...i)=>{var l;return(l=s.current)==null?void 0:l.call(s,...i)},[])}function dw(n,s=globalThis==null?void 0:globalThis.document){const i=aa(n);N.useEffect(()=>{const l=u=>{u.key==="Escape"&&i(u)};return s.addEventListener("keydown",l,{capture:!0}),()=>s.removeEventListener("keydown",l,{capture:!0})},[i,s])}var fw="DismissableLayer",E0="dismissableLayer.update",hw="dismissableLayer.pointerDownOutside",pw="dismissableLayer.focusOutside",Cm,Gx=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$x=N.forwardRef((n,s)=>{const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:c,onInteractOutside:h,onDismiss:d,...g}=n,m=N.useContext(Gx),[x,v]=N.useState(null),C=(x==null?void 0:x.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,P]=N.useState({}),M=Sr(s,j=>v(j)),k=Array.from(m.layers),[w]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),B=k.indexOf(w),b=x?k.indexOf(x):-1,E=m.layersWithOutsidePointerEventsDisabled.size>0,T=b>=B,F=xw(j=>{const O=j.target,G=[...m.branches].some(U=>U.contains(O));!T||G||(u==null||u(j),h==null||h(j),j.defaultPrevented||d==null||d())},C),I=vw(j=>{const O=j.target;[...m.branches].some(U=>U.contains(O))||(c==null||c(j),h==null||h(j),j.defaultPrevented||d==null||d())},C);return dw(j=>{b===m.layers.size-1&&(l==null||l(j),!j.defaultPrevented&&d&&(j.preventDefault(),d()))},C),N.useEffect(()=>{if(x)return i&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(Cm=C.body.style.pointerEvents,C.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(x)),m.layers.add(x),Em(),()=>{i&&m.layersWithOutsidePointerEventsDisabled.size===1&&(C.body.style.pointerEvents=Cm)}},[x,C,i,m]),N.useEffect(()=>()=>{x&&(m.layers.delete(x),m.layersWithOutsidePointerEventsDisabled.delete(x),Em())},[x,m]),N.useEffect(()=>{const j=()=>P({});return document.addEventListener(E0,j),()=>document.removeEventListener(E0,j)},[]),_.jsx(wn.div,{...g,ref:M,style:{pointerEvents:E?T?"auto":"none":void 0,...n.style},onFocusCapture:xn(n.onFocusCapture,I.onFocusCapture),onBlurCapture:xn(n.onBlurCapture,I.onBlurCapture),onPointerDownCapture:xn(n.onPointerDownCapture,F.onPointerDownCapture)})});$x.displayName=fw;var mw="DismissableLayerBranch",gw=N.forwardRef((n,s)=>{const i=N.useContext(Gx),l=N.useRef(null),u=Sr(s,l);return N.useEffect(()=>{const c=l.current;if(c)return i.branches.add(c),()=>{i.branches.delete(c)}},[i.branches]),_.jsx(wn.div,{...n,ref:u})});gw.displayName=mw;function xw(n,s=globalThis==null?void 0:globalThis.document){const i=aa(n),l=N.useRef(!1),u=N.useRef(()=>{});return N.useEffect(()=>{const c=d=>{if(d.target&&!l.current){let g=function(){Kx(hw,i,m,{discrete:!0})};const m={originalEvent:d};d.pointerType==="touch"?(s.removeEventListener("click",u.current),u.current=g,s.addEventListener("click",u.current,{once:!0})):g()}else s.removeEventListener("click",u.current);l.current=!1},h=window.setTimeout(()=>{s.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(h),s.removeEventListener("pointerdown",c),s.removeEventListener("click",u.current)}},[s,i]),{onPointerDownCapture:()=>l.current=!0}}function vw(n,s=globalThis==null?void 0:globalThis.document){const i=aa(n),l=N.useRef(!1);return N.useEffect(()=>{const u=c=>{c.target&&!l.current&&Kx(pw,i,{originalEvent:c},{discrete:!1})};return s.addEventListener("focusin",u),()=>s.removeEventListener("focusin",u)},[s,i]),{onFocusCapture:()=>l.current=!0,onBlurCapture:()=>l.current=!1}}function Em(){const n=new CustomEvent(E0);document.dispatchEvent(n)}function Kx(n,s,i,{discrete:l}){const u=i.originalEvent.target,c=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:i});s&&u.addEventListener(n,s,{once:!0}),l?cw(u,c):u.dispatchEvent(c)}var a0="focusScope.autoFocusOnMount",l0="focusScope.autoFocusOnUnmount",km={bubbles:!1,cancelable:!0},Aw="FocusScope",Qx=N.forwardRef((n,s)=>{const{loop:i=!1,trapped:l=!1,onMountAutoFocus:u,onUnmountAutoFocus:c,...h}=n,[d,g]=N.useState(null),m=aa(u),x=aa(c),v=N.useRef(null),C=Sr(s,k=>g(k)),P=N.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;N.useEffect(()=>{if(l){let k=function(E){if(P.paused||!d)return;const T=E.target;d.contains(T)?v.current=T:xo(v.current,{select:!0})},w=function(E){if(P.paused||!d)return;const T=E.relatedTarget;T!==null&&(d.contains(T)||xo(v.current,{select:!0}))},B=function(E){if(document.activeElement===document.body)for(const F of E)F.removedNodes.length>0&&xo(d)};document.addEventListener("focusin",k),document.addEventListener("focusout",w);const b=new MutationObserver(B);return d&&b.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",k),document.removeEventListener("focusout",w),b.disconnect()}}},[l,d,P.paused]),N.useEffect(()=>{if(d){Bm.add(P);const k=document.activeElement;if(!d.contains(k)){const B=new CustomEvent(a0,km);d.addEventListener(a0,m),d.dispatchEvent(B),B.defaultPrevented||(yw(Ew(Yx(d)),{select:!0}),document.activeElement===k&&xo(d))}return()=>{d.removeEventListener(a0,m),setTimeout(()=>{const B=new CustomEvent(l0,km);d.addEventListener(l0,x),d.dispatchEvent(B),B.defaultPrevented||xo(k??document.body,{select:!0}),d.removeEventListener(l0,x),Bm.remove(P)},0)}}},[d,m,x,P]);const M=N.useCallback(k=>{if(!i&&!l||P.paused)return;const w=k.key==="Tab"&&!k.altKey&&!k.ctrlKey&&!k.metaKey,B=document.activeElement;if(w&&B){const b=k.currentTarget,[E,T]=_w(b);E&&T?!k.shiftKey&&B===T?(k.preventDefault(),i&&xo(E,{select:!0})):k.shiftKey&&B===E&&(k.preventDefault(),i&&xo(T,{select:!0})):B===b&&k.preventDefault()}},[i,l,P.paused]);return _.jsx(wn.div,{tabIndex:-1,...h,ref:C,onKeyDown:M})});Qx.displayName=Aw;function yw(n,{select:s=!1}={}){const i=document.activeElement;for(const l of n)if(xo(l,{select:s}),document.activeElement!==i)return}function _w(n){const s=Yx(n),i=Sm(s,n),l=Sm(s.reverse(),n);return[i,l]}function Yx(n){const s=[],i=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:l=>{const u=l.tagName==="INPUT"&&l.type==="hidden";return l.disabled||l.hidden||u?NodeFilter.FILTER_SKIP:l.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)s.push(i.currentNode);return s}function Sm(n,s){for(const i of n)if(!ww(i,{upTo:s}))return i}function ww(n,{upTo:s}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(s!==void 0&&n===s)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function bw(n){return n instanceof HTMLInputElement&&"select"in n}function xo(n,{select:s=!1}={}){if(n&&n.focus){const i=document.activeElement;n.focus({preventScroll:!0}),n!==i&&bw(n)&&s&&n.select()}}var Bm=Cw();function Cw(){let n=[];return{add(s){const i=n[0];s!==i&&(i==null||i.pause()),n=Pm(n,s),n.unshift(s)},remove(s){var i;n=Pm(n,s),(i=n[0])==null||i.resume()}}}function Pm(n,s){const i=[...n],l=i.indexOf(s);return l!==-1&&i.splice(l,1),i}function Ew(n){return n.filter(s=>s.tagName!=="A")}var kw="Portal",Xx=N.forwardRef((n,s)=>{var d;const{container:i,...l}=n,[u,c]=N.useState(!1);sa(()=>c(!0),[]);const h=i||u&&((d=globalThis==null?void 0:globalThis.document)==null?void 0:d.body);return h?Bx.createPortal(_.jsx(wn.div,{...l,ref:s}),h):null});Xx.displayName=kw;function Sw(n,s){return N.useReducer((i,l)=>s[i][l]??i,n)}var da=n=>{const{present:s,children:i}=n,l=Bw(s),u=typeof i=="function"?i({present:l.isPresent}):N.Children.only(i),c=Sr(l.ref,Pw(u));return typeof i=="function"||l.isPresent?N.cloneElement(u,{ref:c}):null};da.displayName="Presence";function Bw(n){const[s,i]=N.useState(),l=N.useRef(null),u=N.useRef(n),c=N.useRef("none"),h=n?"mounted":"unmounted",[d,g]=Sw(h,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const m=Yu(l.current);c.current=d==="mounted"?m:"none"},[d]),sa(()=>{const m=l.current,x=u.current;if(x!==n){const C=c.current,P=Yu(m);n?g("MOUNT"):P==="none"||(m==null?void 0:m.display)==="none"?g("UNMOUNT"):g(x&&C!==P?"ANIMATION_OUT":"UNMOUNT"),u.current=n}},[n,g]),sa(()=>{if(s){let m;const x=s.ownerDocument.defaultView??window,v=P=>{const k=Yu(l.current).includes(CSS.escape(P.animationName));if(P.target===s&&k&&(g("ANIMATION_END"),!u.current)){const w=s.style.animationFillMode;s.style.animationFillMode="forwards",m=x.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=w)})}},C=P=>{P.target===s&&(c.current=Yu(l.current))};return s.addEventListener("animationstart",C),s.addEventListener("animationcancel",v),s.addEventListener("animationend",v),()=>{x.clearTimeout(m),s.removeEventListener("animationstart",C),s.removeEventListener("animationcancel",v),s.removeEventListener("animationend",v)}}else g("ANIMATION_END")},[s,g]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:N.useCallback(m=>{l.current=m?getComputedStyle(m):null,i(m)},[])}}function Yu(n){return(n==null?void 0:n.animationName)||"none"}function Pw(n){var l,u;let s=(l=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:l.get,i=s&&"isReactWarning"in s&&s.isReactWarning;return i?n.ref:(s=(u=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:u.get,i=s&&"isReactWarning"in s&&s.isReactWarning,i?n.props.ref:n.props.ref||n.ref)}var u0=0;function Tw(){N.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??Tm()),document.body.insertAdjacentElement("beforeend",n[1]??Tm()),u0++,()=>{u0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),u0--}},[])}function Tm(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var si=function(){return si=Object.assign||function(s){for(var i,l=1,u=arguments.length;l<u;l++){i=arguments[l];for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(s[c]=i[c])}return s},si.apply(this,arguments)};function Jx(n,s){var i={};for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&s.indexOf(l)<0&&(i[l]=n[l]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,l=Object.getOwnPropertySymbols(n);u<l.length;u++)s.indexOf(l[u])<0&&Object.prototype.propertyIsEnumerable.call(n,l[u])&&(i[l[u]]=n[l[u]]);return i}function Dw(n,s,i){if(i||arguments.length===2)for(var l=0,u=s.length,c;l<u;l++)(c||!(l in s))&&(c||(c=Array.prototype.slice.call(s,0,l)),c[l]=s[l]);return n.concat(c||Array.prototype.slice.call(s))}var ac="right-scroll-bar-position",lc="width-before-scroll-bar",Rw="with-scroll-bars-hidden",Fw="--removed-body-scroll-bar-size";function c0(n,s){return typeof n=="function"?n(s):n&&(n.current=s),n}function Nw(n,s){var i=N.useState(function(){return{value:n,callback:s,facade:{get current(){return i.value},set current(l){var u=i.value;u!==l&&(i.value=l,i.callback(l,u))}}}})[0];return i.callback=s,i.facade}var Lw=typeof window<"u"?N.useLayoutEffect:N.useEffect,Dm=new WeakMap;function Mw(n,s){var i=Nw(null,function(l){return n.forEach(function(u){return c0(u,l)})});return Lw(function(){var l=Dm.get(i);if(l){var u=new Set(l),c=new Set(n),h=i.current;u.forEach(function(d){c.has(d)||c0(d,null)}),c.forEach(function(d){u.has(d)||c0(d,h)})}Dm.set(i,n)},[n]),i}function Iw(n){return n}function Ow(n,s){s===void 0&&(s=Iw);var i=[],l=!1,u={read:function(){if(l)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return i.length?i[i.length-1]:n},useMedium:function(c){var h=s(c,l);return i.push(h),function(){i=i.filter(function(d){return d!==h})}},assignSyncMedium:function(c){for(l=!0;i.length;){var h=i;i=[],h.forEach(c)}i={push:function(d){return c(d)},filter:function(){return i}}},assignMedium:function(c){l=!0;var h=[];if(i.length){var d=i;i=[],d.forEach(c),h=i}var g=function(){var x=h;h=[],x.forEach(c)},m=function(){return Promise.resolve().then(g)};m(),i={push:function(x){h.push(x),m()},filter:function(x){return h=h.filter(x),i}}}};return u}function jw(n){n===void 0&&(n={});var s=Ow(null);return s.options=si({async:!0,ssr:!1},n),s}var ev=function(n){var s=n.sideCar,i=Jx(n,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var l=s.read();if(!l)throw new Error("Sidecar medium not found");return N.createElement(l,si({},i))};ev.isSideCarExport=!0;function zw(n,s){return n.useMedium(s),ev}var tv=jw(),d0=function(){},ud=N.forwardRef(function(n,s){var i=N.useRef(null),l=N.useState({onScrollCapture:d0,onWheelCapture:d0,onTouchMoveCapture:d0}),u=l[0],c=l[1],h=n.forwardProps,d=n.children,g=n.className,m=n.removeScrollBar,x=n.enabled,v=n.shards,C=n.sideCar,P=n.noRelative,M=n.noIsolation,k=n.inert,w=n.allowPinchZoom,B=n.as,b=B===void 0?"div":B,E=n.gapMode,T=Jx(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),F=C,I=Mw([i,s]),j=si(si({},T),u);return N.createElement(N.Fragment,null,x&&N.createElement(F,{sideCar:tv,removeScrollBar:m,shards:v,noRelative:P,noIsolation:M,inert:k,setCallbacks:c,allowPinchZoom:!!w,lockRef:i,gapMode:E}),h?N.cloneElement(N.Children.only(d),si(si({},j),{ref:I})):N.createElement(b,si({},j,{className:g,ref:I}),d))});ud.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ud.classNames={fullWidth:lc,zeroRight:ac};var Hw=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Vw(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var s=Hw();return s&&n.setAttribute("nonce",s),n}function Uw(n,s){n.styleSheet?n.styleSheet.cssText=s:n.appendChild(document.createTextNode(s))}function Zw(n){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(n)}var Ww=function(){var n=0,s=null;return{add:function(i){n==0&&(s=Vw())&&(Uw(s,i),Zw(s)),n++},remove:function(){n--,!n&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},qw=function(){var n=Ww();return function(s,i){N.useEffect(function(){return n.add(s),function(){n.remove()}},[s&&i])}},nv=function(){var n=qw(),s=function(i){var l=i.styles,u=i.dynamic;return n(l,u),null};return s},Gw={left:0,top:0,right:0,gap:0},f0=function(n){return parseInt(n||"",10)||0},$w=function(n){var s=window.getComputedStyle(document.body),i=s[n==="padding"?"paddingLeft":"marginLeft"],l=s[n==="padding"?"paddingTop":"marginTop"],u=s[n==="padding"?"paddingRight":"marginRight"];return[f0(i),f0(l),f0(u)]},Kw=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return Gw;var s=$w(n),i=document.documentElement.clientWidth,l=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,l-i+s[2]-s[0])}},Qw=nv(),na="data-scroll-locked",Yw=function(n,s,i,l){var u=n.left,c=n.top,h=n.right,d=n.gap;return i===void 0&&(i="margin"),`
  .`.concat(Rw,` {
   overflow: hidden `).concat(l,`;
   padding-right: `).concat(d,"px ").concat(l,`;
  }
  body[`).concat(na,`] {
    overflow: hidden `).concat(l,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(l,";"),i==="margin"&&`
    padding-left: `.concat(u,`px;
    padding-top: `).concat(c,`px;
    padding-right: `).concat(h,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(l,`;
    `),i==="padding"&&"padding-right: ".concat(d,"px ").concat(l,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ac,` {
    right: `).concat(d,"px ").concat(l,`;
  }
  
  .`).concat(lc,` {
    margin-right: `).concat(d,"px ").concat(l,`;
  }
  
  .`).concat(ac," .").concat(ac,` {
    right: 0 `).concat(l,`;
  }
  
  .`).concat(lc," .").concat(lc,` {
    margin-right: 0 `).concat(l,`;
  }
  
  body[`).concat(na,`] {
    `).concat(Fw,": ").concat(d,`px;
  }
`)},Rm=function(){var n=parseInt(document.body.getAttribute(na)||"0",10);return isFinite(n)?n:0},Xw=function(){N.useEffect(function(){return document.body.setAttribute(na,(Rm()+1).toString()),function(){var n=Rm()-1;n<=0?document.body.removeAttribute(na):document.body.setAttribute(na,n.toString())}},[])},Jw=function(n){var s=n.noRelative,i=n.noImportant,l=n.gapMode,u=l===void 0?"margin":l;Xw();var c=N.useMemo(function(){return Kw(u)},[u]);return N.createElement(Qw,{styles:Yw(c,!s,u,i?"":"!important")})},k0=!1;if(typeof window<"u")try{var Xu=Object.defineProperty({},"passive",{get:function(){return k0=!0,!0}});window.addEventListener("test",Xu,Xu),window.removeEventListener("test",Xu,Xu)}catch{k0=!1}var Xs=k0?{passive:!1}:!1,eb=function(n){return n.tagName==="TEXTAREA"},rv=function(n,s){if(!(n instanceof Element))return!1;var i=window.getComputedStyle(n);return i[s]!=="hidden"&&!(i.overflowY===i.overflowX&&!eb(n)&&i[s]==="visible")},tb=function(n){return rv(n,"overflowY")},nb=function(n){return rv(n,"overflowX")},Fm=function(n,s){var i=s.ownerDocument,l=s;do{typeof ShadowRoot<"u"&&l instanceof ShadowRoot&&(l=l.host);var u=iv(n,l);if(u){var c=ov(n,l),h=c[1],d=c[2];if(h>d)return!0}l=l.parentNode}while(l&&l!==i.body);return!1},rb=function(n){var s=n.scrollTop,i=n.scrollHeight,l=n.clientHeight;return[s,i,l]},ib=function(n){var s=n.scrollLeft,i=n.scrollWidth,l=n.clientWidth;return[s,i,l]},iv=function(n,s){return n==="v"?tb(s):nb(s)},ov=function(n,s){return n==="v"?rb(s):ib(s)},ob=function(n,s){return n==="h"&&s==="rtl"?-1:1},sb=function(n,s,i,l,u){var c=ob(n,window.getComputedStyle(s).direction),h=c*l,d=i.target,g=s.contains(d),m=!1,x=h>0,v=0,C=0;do{if(!d)break;var P=ov(n,d),M=P[0],k=P[1],w=P[2],B=k-w-c*M;(M||B)&&iv(n,d)&&(v+=B,C+=M);var b=d.parentNode;d=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!g&&d!==document.body||g&&(s.contains(d)||s===d));return(x&&Math.abs(v)<1||!x&&Math.abs(C)<1)&&(m=!0),m},Ju=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},Nm=function(n){return[n.deltaX,n.deltaY]},Lm=function(n){return n&&"current"in n?n.current:n},ab=function(n,s){return n[0]===s[0]&&n[1]===s[1]},lb=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},ub=0,Js=[];function cb(n){var s=N.useRef([]),i=N.useRef([0,0]),l=N.useRef(),u=N.useState(ub++)[0],c=N.useState(nv)[0],h=N.useRef(n);N.useEffect(function(){h.current=n},[n]),N.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(u));var k=Dw([n.lockRef.current],(n.shards||[]).map(Lm),!0).filter(Boolean);return k.forEach(function(w){return w.classList.add("allow-interactivity-".concat(u))}),function(){document.body.classList.remove("block-interactivity-".concat(u)),k.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(u))})}}},[n.inert,n.lockRef.current,n.shards]);var d=N.useCallback(function(k,w){if("touches"in k&&k.touches.length===2||k.type==="wheel"&&k.ctrlKey)return!h.current.allowPinchZoom;var B=Ju(k),b=i.current,E="deltaX"in k?k.deltaX:b[0]-B[0],T="deltaY"in k?k.deltaY:b[1]-B[1],F,I=k.target,j=Math.abs(E)>Math.abs(T)?"h":"v";if("touches"in k&&j==="h"&&I.type==="range")return!1;var O=window.getSelection(),G=O&&O.anchorNode,U=G?G===I||G.contains(I):!1;if(U)return!1;var K=Fm(j,I);if(!K)return!0;if(K?F=j:(F=j==="v"?"h":"v",K=Fm(j,I)),!K)return!1;if(!l.current&&"changedTouches"in k&&(E||T)&&(l.current=F),!F)return!0;var J=l.current||F;return sb(J,w,k,J==="h"?E:T)},[]),g=N.useCallback(function(k){var w=k;if(!(!Js.length||Js[Js.length-1]!==c)){var B="deltaY"in w?Nm(w):Ju(w),b=s.current.filter(function(F){return F.name===w.type&&(F.target===w.target||w.target===F.shadowParent)&&ab(F.delta,B)})[0];if(b&&b.should){w.cancelable&&w.preventDefault();return}if(!b){var E=(h.current.shards||[]).map(Lm).filter(Boolean).filter(function(F){return F.contains(w.target)}),T=E.length>0?d(w,E[0]):!h.current.noIsolation;T&&w.cancelable&&w.preventDefault()}}},[]),m=N.useCallback(function(k,w,B,b){var E={name:k,delta:w,target:B,should:b,shadowParent:db(B)};s.current.push(E),setTimeout(function(){s.current=s.current.filter(function(T){return T!==E})},1)},[]),x=N.useCallback(function(k){i.current=Ju(k),l.current=void 0},[]),v=N.useCallback(function(k){m(k.type,Nm(k),k.target,d(k,n.lockRef.current))},[]),C=N.useCallback(function(k){m(k.type,Ju(k),k.target,d(k,n.lockRef.current))},[]);N.useEffect(function(){return Js.push(c),n.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:C}),document.addEventListener("wheel",g,Xs),document.addEventListener("touchmove",g,Xs),document.addEventListener("touchstart",x,Xs),function(){Js=Js.filter(function(k){return k!==c}),document.removeEventListener("wheel",g,Xs),document.removeEventListener("touchmove",g,Xs),document.removeEventListener("touchstart",x,Xs)}},[]);var P=n.removeScrollBar,M=n.inert;return N.createElement(N.Fragment,null,M?N.createElement(c,{styles:lb(u)}):null,P?N.createElement(Jw,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function db(n){for(var s=null;n!==null;)n instanceof ShadowRoot&&(s=n.host,n=n.host),n=n.parentNode;return s}const fb=zw(tv,cb);var sv=N.forwardRef(function(n,s){return N.createElement(ud,si({},n,{ref:s,sideCar:fb}))});sv.classNames=ud.classNames;var hb=function(n){if(typeof document>"u")return null;var s=Array.isArray(n)?n[0]:n;return s.ownerDocument.body},ea=new WeakMap,ec=new WeakMap,tc={},h0=0,av=function(n){return n&&(n.host||av(n.parentNode))},pb=function(n,s){return s.map(function(i){if(n.contains(i))return i;var l=av(i);return l&&n.contains(l)?l:(console.error("aria-hidden",i,"in not contained inside",n,". Doing nothing"),null)}).filter(function(i){return!!i})},mb=function(n,s,i,l){var u=pb(s,Array.isArray(n)?n:[n]);tc[i]||(tc[i]=new WeakMap);var c=tc[i],h=[],d=new Set,g=new Set(u),m=function(v){!v||d.has(v)||(d.add(v),m(v.parentNode))};u.forEach(m);var x=function(v){!v||g.has(v)||Array.prototype.forEach.call(v.children,function(C){if(d.has(C))x(C);else try{var P=C.getAttribute(l),M=P!==null&&P!=="false",k=(ea.get(C)||0)+1,w=(c.get(C)||0)+1;ea.set(C,k),c.set(C,w),h.push(C),k===1&&M&&ec.set(C,!0),w===1&&C.setAttribute(i,"true"),M||C.setAttribute(l,"true")}catch(B){console.error("aria-hidden: cannot operate on ",C,B)}})};return x(s),d.clear(),h0++,function(){h.forEach(function(v){var C=ea.get(v)-1,P=c.get(v)-1;ea.set(v,C),c.set(v,P),C||(ec.has(v)||v.removeAttribute(l),ec.delete(v)),P||v.removeAttribute(i)}),h0--,h0||(ea=new WeakMap,ea=new WeakMap,ec=new WeakMap,tc={})}},gb=function(n,s,i){i===void 0&&(i="data-aria-hidden");var l=Array.from(Array.isArray(n)?n:[n]),u=hb(n);return u?(l.push.apply(l,Array.from(u.querySelectorAll("[aria-live], script"))),mb(l,u,i,"aria-hidden")):function(){return null}};function xb(n){const s=vb(n),i=N.forwardRef((l,u)=>{const{children:c,...h}=l,d=N.Children.toArray(c),g=d.find(yb);if(g){const m=g.props.children,x=d.map(v=>v===g?N.Children.count(m)>1?N.Children.only(null):N.isValidElement(m)?m.props.children:null:v);return _.jsx(s,{...h,ref:u,children:N.isValidElement(m)?N.cloneElement(m,void 0,x):null})}return _.jsx(s,{...h,ref:u,children:c})});return i.displayName=`${n}.Slot`,i}function vb(n){const s=N.forwardRef((i,l)=>{const{children:u,...c}=i;if(N.isValidElement(u)){const h=wb(u),d=_b(c,u.props);return u.type!==N.Fragment&&(d.ref=l?Sl(l,h):h),N.cloneElement(u,d)}return N.Children.count(u)>1?N.Children.only(null):null});return s.displayName=`${n}.SlotClone`,s}var Ab=Symbol("radix.slottable");function yb(n){return N.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===Ab}function _b(n,s){const i={...s};for(const l in s){const u=n[l],c=s[l];/^on[A-Z]/.test(l)?u&&c?i[l]=(...d)=>{const g=c(...d);return u(...d),g}:u&&(i[l]=u):l==="style"?i[l]={...u,...c}:l==="className"&&(i[l]=[u,c].filter(Boolean).join(" "))}return{...n,...i}}function wb(n){var l,u;let s=(l=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:l.get,i=s&&"isReactWarning"in s&&s.isReactWarning;return i?n.ref:(s=(u=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:u.get,i=s&&"isReactWarning"in s&&s.isReactWarning,i?n.props.ref:n.props.ref||n.ref)}var cd="Dialog",[lv]=Bl(cd),[bb,Zr]=lv(cd),uv=n=>{const{__scopeDialog:s,children:i,open:l,defaultOpen:u,onOpenChange:c,modal:h=!0}=n,d=N.useRef(null),g=N.useRef(null),[m,x]=ld({prop:l,defaultProp:u??!1,onChange:c,caller:cd});return _.jsx(bb,{scope:s,triggerRef:d,contentRef:g,contentId:wl(),titleId:wl(),descriptionId:wl(),open:m,onOpenChange:x,onOpenToggle:N.useCallback(()=>x(v=>!v),[x]),modal:h,children:i})};uv.displayName=cd;var cv="DialogTrigger",Cb=N.forwardRef((n,s)=>{const{__scopeDialog:i,...l}=n,u=Zr(cv,i),c=Sr(s,u.triggerRef);return _.jsx(wn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":u.open,"aria-controls":u.contentId,"data-state":K0(u.open),...l,ref:c,onClick:xn(n.onClick,u.onOpenToggle)})});Cb.displayName=cv;var G0="DialogPortal",[Eb,dv]=lv(G0,{forceMount:void 0}),fv=n=>{const{__scopeDialog:s,forceMount:i,children:l,container:u}=n,c=Zr(G0,s);return _.jsx(Eb,{scope:s,forceMount:i,children:N.Children.map(l,h=>_.jsx(da,{present:i||c.open,children:_.jsx(Xx,{asChild:!0,container:u,children:h})}))})};fv.displayName=G0;var Jc="DialogOverlay",hv=N.forwardRef((n,s)=>{const i=dv(Jc,n.__scopeDialog),{forceMount:l=i.forceMount,...u}=n,c=Zr(Jc,n.__scopeDialog);return c.modal?_.jsx(da,{present:l||c.open,children:_.jsx(Sb,{...u,ref:s})}):null});hv.displayName=Jc;var kb=xb("DialogOverlay.RemoveScroll"),Sb=N.forwardRef((n,s)=>{const{__scopeDialog:i,...l}=n,u=Zr(Jc,i);return _.jsx(sv,{as:kb,allowPinchZoom:!0,shards:[u.contentRef],children:_.jsx(wn.div,{"data-state":K0(u.open),...l,ref:s,style:{pointerEvents:"auto",...l.style}})})}),os="DialogContent",pv=N.forwardRef((n,s)=>{const i=dv(os,n.__scopeDialog),{forceMount:l=i.forceMount,...u}=n,c=Zr(os,n.__scopeDialog);return _.jsx(da,{present:l||c.open,children:c.modal?_.jsx(Bb,{...u,ref:s}):_.jsx(Pb,{...u,ref:s})})});pv.displayName=os;var Bb=N.forwardRef((n,s)=>{const i=Zr(os,n.__scopeDialog),l=N.useRef(null),u=Sr(s,i.contentRef,l);return N.useEffect(()=>{const c=l.current;if(c)return gb(c)},[]),_.jsx(mv,{...n,ref:u,trapFocus:i.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:xn(n.onCloseAutoFocus,c=>{var h;c.preventDefault(),(h=i.triggerRef.current)==null||h.focus()}),onPointerDownOutside:xn(n.onPointerDownOutside,c=>{const h=c.detail.originalEvent,d=h.button===0&&h.ctrlKey===!0;(h.button===2||d)&&c.preventDefault()}),onFocusOutside:xn(n.onFocusOutside,c=>c.preventDefault())})}),Pb=N.forwardRef((n,s)=>{const i=Zr(os,n.__scopeDialog),l=N.useRef(!1),u=N.useRef(!1);return _.jsx(mv,{...n,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{var h,d;(h=n.onCloseAutoFocus)==null||h.call(n,c),c.defaultPrevented||(l.current||(d=i.triggerRef.current)==null||d.focus(),c.preventDefault()),l.current=!1,u.current=!1},onInteractOutside:c=>{var g,m;(g=n.onInteractOutside)==null||g.call(n,c),c.defaultPrevented||(l.current=!0,c.detail.originalEvent.type==="pointerdown"&&(u.current=!0));const h=c.target;((m=i.triggerRef.current)==null?void 0:m.contains(h))&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&u.current&&c.preventDefault()}})}),mv=N.forwardRef((n,s)=>{const{__scopeDialog:i,trapFocus:l,onOpenAutoFocus:u,onCloseAutoFocus:c,...h}=n,d=Zr(os,i),g=N.useRef(null),m=Sr(s,g);return Tw(),_.jsxs(_.Fragment,{children:[_.jsx(Qx,{asChild:!0,loop:!0,trapped:l,onMountAutoFocus:u,onUnmountAutoFocus:c,children:_.jsx($x,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":K0(d.open),...h,ref:m,onDismiss:()=>d.onOpenChange(!1)})}),_.jsxs(_.Fragment,{children:[_.jsx(Tb,{titleId:d.titleId}),_.jsx(Rb,{contentRef:g,descriptionId:d.descriptionId})]})]})}),$0="DialogTitle",gv=N.forwardRef((n,s)=>{const{__scopeDialog:i,...l}=n,u=Zr($0,i);return _.jsx(wn.h2,{id:u.titleId,...l,ref:s})});gv.displayName=$0;var xv="DialogDescription",vv=N.forwardRef((n,s)=>{const{__scopeDialog:i,...l}=n,u=Zr(xv,i);return _.jsx(wn.p,{id:u.descriptionId,...l,ref:s})});vv.displayName=xv;var Av="DialogClose",yv=N.forwardRef((n,s)=>{const{__scopeDialog:i,...l}=n,u=Zr(Av,i);return _.jsx(wn.button,{type:"button",...l,ref:s,onClick:xn(n.onClick,()=>u.onOpenChange(!1))})});yv.displayName=Av;function K0(n){return n?"open":"closed"}var _v="DialogTitleWarning",[NS,wv]=Q1(_v,{contentName:os,titleName:$0,docsSlug:"dialog"}),Tb=({titleId:n})=>{const s=wv(_v),i=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return N.useEffect(()=>{n&&(document.getElementById(n)||console.error(i))},[i,n]),null},Db="DialogDescriptionWarning",Rb=({contentRef:n,descriptionId:s})=>{const l=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${wv(Db).contentName}}.`;return N.useEffect(()=>{var c;const u=(c=n.current)==null?void 0:c.getAttribute("aria-describedby");s&&u&&(document.getElementById(s)||console.warn(l))},[l,n,s]),null},bv=uv,Cv=fv,dd=hv,fd=pv,hd=gv,pd=vv,Ev=yv;const Q0=bv,Fb=Cv,kv=N.forwardRef(({className:n,...s},i)=>_.jsx(dd,{ref:i,className:pt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...s}));kv.displayName=dd.displayName;const md=N.forwardRef(({className:n,children:s,...i},l)=>_.jsxs(Fb,{children:[_.jsx(kv,{}),_.jsxs(fd,{ref:l,className:pt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...i,children:[s,_.jsxs(Ev,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[_.jsx(Tx,{className:"h-4 w-4"}),_.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));md.displayName=fd.displayName;const gd=({className:n,...s})=>_.jsx("div",{className:pt("flex flex-col space-y-1.5 text-center sm:text-left",n),...s});gd.displayName="DialogHeader";const Y0=({className:n,...s})=>_.jsx("div",{className:pt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...s});Y0.displayName="DialogFooter";const xd=N.forwardRef(({className:n,...s},i)=>_.jsx(hd,{ref:i,className:pt("text-lg font-semibold leading-none tracking-tight",n),...s}));xd.displayName=hd.displayName;const vd=N.forwardRef(({className:n,...s},i)=>_.jsx(pd,{ref:i,className:pt("text-sm text-muted-foreground",n),...s}));vd.displayName=pd.displayName;function Nb(){const n=window.location.hash.slice(1);if(!n)return null;if(n==="raw")return{type:"raw",name:"raw"};if(n==="map")return{type:"map",name:"map"};if(n==="visualizer")return{type:"visualizer",name:"visualizer"};if(n.startsWith("map/focus/")){const u=n.slice(10);return u?{type:"map",name:"map",mapFocusKey:decodeURIComponent(u)}:{type:"map",name:"map"}}const s=n.indexOf("/");if(s===-1)return null;const i=n.slice(0,s),l=decodeURIComponent(n.slice(s+1));return(i==="channel"||i==="contact")&&l?{type:i,name:l}:null}function Sv(n){return`#map/focus/${encodeURIComponent(n)}`}function Lb(n){if(!n)return"";if(n.type==="raw")return"#raw";if(n.type==="map")return"#map";if(n.type==="visualizer")return"#visualizer";const s=n.type==="channel"&&n.name.startsWith("#")?n.name.slice(1):n.name;return`#${n.type}/${encodeURIComponent(s)}`}function Mb(n){const s=Lb(n);s!==window.location.hash&&window.history.replaceState(null,"",s||window.location.pathname)}function Ib({open:n,onClose:s,paths:i,senderInfo:l,contacts:u,config:c}){const h=i.map(g=>({...g,resolved:$1(g.path,l,u,c)})),d=i.length===1;return _.jsx(Q0,{open:n,onOpenChange:g=>!g&&s(),children:_.jsxs(md,{className:"max-w-md max-h-[80vh] flex flex-col",children:[_.jsxs(gd,{children:[_.jsxs(xd,{children:["Message Path",!d&&`s (${i.length})`]}),_.jsx(vd,{children:d?_.jsxs(_.Fragment,{children:["This shows ",_.jsx("em",{children:"one route"})," that this message traveled through the mesh network. Routers may be incorrectly identified due to prefix collisions between heard and non-heard router advertisements."]}):_.jsxs(_.Fragment,{children:["This message was received via ",_.jsxs("strong",{children:[i.length," different routes"]}),". Routers may be incorrectly identified due to prefix collisions."]})})]}),_.jsxs("div",{className:"flex-1 overflow-y-auto py-2 space-y-4",children:[h.map((g,m)=>_.jsxs("div",{children:[!d&&_.jsxs("div",{className:"text-xs text-muted-foreground font-medium mb-2 pb-1 border-b border-border",children:["Path ",m+1,"  received ",oa(g.received_at)]}),_.jsx(Ob,{resolved:g.resolved,senderInfo:l,hideStraightLine:!d})]},m)),!d&&h.length>0&&(()=>{const g=h[0].resolved;return Lt(g.sender.lat,g.sender.lon)&&Lt(g.receiver.lat,g.receiver.lon)?_.jsxs("div",{className:"pt-3 mt-1 border-t border-border",children:[_.jsx("span",{className:"text-sm text-muted-foreground",children:"Straight-line distance: "}),_.jsx("span",{className:"text-sm font-medium",children:is(Vr(g.sender.lat,g.sender.lon,g.receiver.lat,g.receiver.lon))})]}):null})()]}),_.jsx(Y0,{children:_.jsx(mn,{onClick:s,children:"Close"})})]})})}function Ob({resolved:n,senderInfo:s,hideStraightLine:i}){const l=u=>{if(u===0)return Lt(n.sender.lat,n.sender.lon)?{lat:n.sender.lat,lon:n.sender.lon}:null;const c=n.hops[u-1];return c.matches.length>1||c.matches.length===0?null:Lt(c.matches[0].lat,c.matches[0].lon)?{lat:c.matches[0].lat,lon:c.matches[0].lon}:null};return _.jsxs("div",{className:"space-y-0",children:[_.jsx(Mm,{label:"Sender",name:n.sender.name,prefix:n.sender.prefix,distance:null,isFirst:!0,lat:n.sender.lat,lon:n.sender.lon,publicKey:s.publicKeyOrPrefix}),n.hops.map((u,c)=>_.jsx(jb,{hop:u,hopNumber:c+1,prevLocation:l(c)},c)),_.jsx(Mm,{label:"Receiver (me)",name:n.receiver.name,prefix:n.receiver.prefix,distance:zb(n),isLast:!0,lat:n.receiver.lat,lon:n.receiver.lon,publicKey:n.receiver.publicKey??void 0}),n.totalDistances&&n.totalDistances.length>0&&_.jsxs("div",{className:"pt-3 mt-3 border-t border-border",children:[_.jsxs("span",{className:"text-sm text-muted-foreground",children:["Presumed unambiguous distance covered:"," "]}),_.jsxs("span",{className:"text-sm font-medium",children:[n.hasGaps?">":"",is(n.totalDistances[0])]})]}),!i&&Lt(n.sender.lat,n.sender.lon)&&Lt(n.receiver.lat,n.receiver.lon)&&_.jsxs("div",{className:n.totalDistances&&n.totalDistances.length>0?"pt-1":"pt-3 mt-3 border-t border-border",children:[_.jsx("span",{className:"text-sm text-muted-foreground",children:"Straight-line distance: "}),_.jsx("span",{className:"text-sm font-medium",children:is(Vr(n.sender.lat,n.sender.lon,n.receiver.lat,n.receiver.lon))})]})]})}function Mm({label:n,name:s,prefix:i,distance:l,isFirst:u,isLast:c,lat:h,lon:d,publicKey:g}){const m=Lt(h??null,d??null)&&g;return _.jsxs("div",{className:"flex gap-3",children:[_.jsxs("div",{className:"flex flex-col items-center w-4 flex-shrink-0",children:[!u&&_.jsx("div",{className:"w-0.5 h-3 bg-border"}),_.jsx("div",{className:"w-3 h-3 rounded-full bg-primary flex-shrink-0"}),!c&&_.jsx("div",{className:"w-0.5 flex-1 bg-border"})]}),_.jsxs("div",{className:"pb-3 flex-1 min-w-0",children:[_.jsx("div",{className:"text-xs text-muted-foreground font-medium",children:n}),_.jsxs("div",{className:"font-medium truncate",children:[s," ",_.jsxs("span",{className:"text-muted-foreground font-mono text-sm",children:["(",i,")"]}),l!==null&&_.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["- ",is(l)]}),m&&_.jsx(S0,{lat:h,lon:d,publicKey:g})]})]})]})}function jb({hop:n,hopNumber:s,prevLocation:i}){const l=n.matches.length>1,u=n.matches.length===0,c=h=>!i||i.lat===null||i.lon===null||!Lt(h.lat,h.lon)?null:Vr(i.lat,i.lon,h.lat,h.lon);return _.jsxs("div",{className:"flex gap-3",children:[_.jsxs("div",{className:"flex flex-col items-center w-4 flex-shrink-0",children:[_.jsx("div",{className:"w-0.5 h-3 bg-border"}),_.jsx("div",{className:"w-3 h-3 rounded-full bg-muted-foreground flex-shrink-0"}),_.jsx("div",{className:"w-0.5 flex-1 bg-border"})]}),_.jsxs("div",{className:"pb-3 flex-1 min-w-0",children:[_.jsxs("div",{className:"text-xs text-muted-foreground font-medium",children:["Hop ",s,l&&_.jsx("span",{className:"text-yellow-500 ml-1",children:"(ambiguous)"})]}),u?_.jsxs("div",{className:"font-medium text-muted-foreground/70",children:["<UNKNOWN ",_.jsx("span",{className:"font-mono text-sm",children:n.prefix}),">"]}):l?_.jsx("div",{children:n.matches.map(h=>{const d=c(h),g=Lt(h.lat,h.lon);return _.jsxs("div",{className:"font-medium truncate",children:[h.name||h.public_key.slice(0,12)," ",_.jsxs("span",{className:"text-muted-foreground font-mono text-sm",children:["(",h.public_key.slice(0,2).toUpperCase(),")"]}),d!==null&&_.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["- ",is(d)]}),g&&_.jsx(S0,{lat:h.lat,lon:h.lon,publicKey:h.public_key})]},h.public_key)})}):_.jsxs("div",{className:"font-medium truncate",children:[n.matches[0].name||n.matches[0].public_key.slice(0,12)," ",_.jsxs("span",{className:"text-muted-foreground font-mono text-sm",children:["(",n.prefix,")"]}),n.distanceFromPrev!==null&&_.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["- ",is(n.distanceFromPrev)]}),Lt(n.matches[0].lat,n.matches[0].lon)&&_.jsx(S0,{lat:n.matches[0].lat,lon:n.matches[0].lon,publicKey:n.matches[0].public_key})]})]})]})}function S0({lat:n,lon:s,publicKey:i}){const l=u=>{u.preventDefault(),u.stopPropagation();const c=window.location.origin+window.location.pathname+Sv(i);window.open(c,"_blank")};return _.jsxs("span",{className:"text-xs text-muted-foreground/70 font-mono cursor-pointer hover:text-primary hover:underline ml-1",onClick:l,title:"View on map",children:["(",n.toFixed(4),", ",s.toFixed(4),")"]})}function zb(n){let s=null,i=null;if(n.hops.length>0){const l=n.hops[n.hops.length-1];l.matches.length===1&&Lt(l.matches[0].lat,l.matches[0].lon)&&(s=l.matches[0].lat,i=l.matches[0].lon)}else Lt(n.sender.lat,n.sender.lon)&&(s=n.sender.lat,i=n.sender.lon);return s===null||i===null||!Lt(n.receiver.lat,n.receiver.lon)?null:Vr(s,i,n.receiver.lat,n.receiver.lon)}function Hb(n,s){if(!s)return n;const i=/@\[([^\]]+)\]/g,l=[];let u=0,c,h=0;for(;(c=i.exec(n))!==null;){c.index>u&&l.push(n.slice(u,c.index));const d=c[1],g=d===s;l.push(_.jsxs("span",{className:pt("rounded px-0.5",g?"bg-primary/30 text-primary font-medium":"bg-muted-foreground/20"),children:["@[",d,"]"]},h++)),u=c.index+c[0].length}return u<n.length&&l.push(n.slice(u)),l.length>0?l:n}function Im({paths:n,onClick:s,variant:i}){const u=`(${G1(n).display})`,c=i==="header"?"font-normal text-muted-foreground/70 ml-1 text-[11px] cursor-pointer hover:text-primary hover:underline":"text-[10px] text-muted-foreground/50 ml-1 cursor-pointer hover:text-primary hover:underline";return _.jsx("span",{className:c,onClick:h=>{h.stopPropagation(),s()},title:"View message path",children:u})}function Vb({messages:n,contacts:s,loading:i,loadingOlder:l=!1,hasOlderMessages:u=!1,onSenderClick:c,onLoadOlder:h,radioName:d,config:g}){const m=N.useRef(null),x=N.useRef(0),v=N.useRef(!0),[C,P]=N.useState(!1),[M,k]=N.useState(null),w=N.useRef({scrollTop:0,scrollHeight:0,clientHeight:0,wasNearTop:!1,wasNearBottom:!0});N.useLayoutEffect(()=>{if(!m.current)return;const O=m.current,G=n.length-x.current;if(v.current&&n.length>0)O.scrollTop=O.scrollHeight,v.current=!1;else if(G>0&&x.current>0){const U=O.scrollHeight-w.current.scrollHeight;w.current.wasNearTop&&U>0?O.scrollTop=w.current.scrollTop+U:w.current.wasNearBottom&&(O.scrollTop=O.scrollHeight)}x.current=n.length},[n]),N.useEffect(()=>{n.length===0&&(v.current=!0,x.current=0,w.current={scrollTop:0,scrollHeight:0,clientHeight:0,wasNearTop:!1,wasNearBottom:!0})},[n.length]);const B=N.useCallback(()=>{if(!m.current)return;const{scrollTop:O,scrollHeight:G,clientHeight:U}=m.current,K=G-O-U;w.current={scrollTop:O,scrollHeight:G,clientHeight:U,wasNearTop:O<150,wasNearBottom:K<100},P(K>100),!(!h||l||!u)&&O<100&&h()},[h,l,u]),b=N.useCallback(()=>{m.current&&(m.current.scrollTop=m.current.scrollHeight)},[]),E=O=>O&&s.find(G=>G.public_key===O)||null,T=O=>s.find(G=>G.name===O)||null,F=(O,G,U)=>{if(O.type==="PRIV"&&G)return{name:G.name||G.public_key.slice(0,12),publicKeyOrPrefix:G.public_key,lat:G.lat,lon:G.lon};if(U){const K=T(U);if(K)return{name:U,publicKeyOrPrefix:K.public_key,lat:K.lat,lon:K.lon}}return{name:U||"Unknown",publicKeyOrPrefix:O.conversation_key||"",lat:null,lon:null}};if(i)return _.jsx("div",{className:"flex-1 overflow-y-auto p-5 text-center text-muted-foreground",children:"Loading messages..."});if(n.length===0)return _.jsx("div",{className:"flex-1 overflow-y-auto p-5 text-center text-muted-foreground",children:"No messages yet"});const I=[...n].sort((O,G)=>O.received_at-G.received_at),j=(O,G)=>O.outgoing?"__outgoing__":O.type==="PRIV"&&O.conversation_key?O.conversation_key:G||"__unknown__";return _.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[_.jsxs("div",{className:"h-full overflow-y-auto p-4 flex flex-col gap-0.5",ref:m,onScroll:B,children:[l&&_.jsx("div",{className:"text-center py-2 text-muted-foreground text-sm",children:"Loading older messages..."}),!l&&u&&_.jsx("div",{className:"text-center py-2 text-muted-foreground text-xs",children:"Scroll up for older messages"}),I.map((O,G)=>{var q;const U=O.type==="PRIV"?E(O.conversation_key):null,K=(U==null?void 0:U.type)===ad,{sender:J,content:Y}=K?{sender:null,content:O.text}:bm(O.text),ie=O.outgoing?"You":(U==null?void 0:U.name)||J||((q=O.conversation_key)==null?void 0:q.slice(0,8))||"Unknown",ge=!O.outgoing&&c&&ie!=="Unknown",$=j(O,J),se=I[G-1],W=se?j(se,bm(se.text).sender):null,te=!O.outgoing&&$!==W,Z=G===0;let D=null,H="";if(!O.outgoing){if(O.type==="PRIV"&&O.conversation_key)D=(U==null?void 0:U.name)||null,H=O.conversation_key;else if(J){const Q=T(J);D=J,H=(Q==null?void 0:Q.public_key)||`name:${J}`}}return _.jsxs("div",{className:pt("flex items-start max-w-[85%]",O.outgoing&&"flex-row-reverse self-end",te&&!Z&&"mt-3"),children:[!O.outgoing&&_.jsx("div",{className:"w-10 flex-shrink-0 flex items-start pt-0.5",children:te&&H&&_.jsx(b0,{name:D,publicKey:H,size:32})}),_.jsxs("div",{className:pt("py-1.5 px-3 rounded-lg min-w-0",O.outgoing?"bg-[#1e3a29]":"bg-muted"),children:[te&&_.jsxs("div",{className:"text-[13px] font-semibold text-muted-foreground mb-0.5",children:[ge?_.jsx("span",{className:"cursor-pointer hover:text-primary hover:underline",onClick:()=>c(ie),title:`Mention ${ie}`,children:ie}):ie,_.jsx("span",{className:"font-normal text-muted-foreground/70 ml-2 text-[11px]",children:oa(O.sender_timestamp||O.received_at)}),!O.outgoing&&O.paths&&O.paths.length>0&&_.jsx(Im,{paths:O.paths,variant:"header",onClick:()=>k({paths:O.paths,senderInfo:F(O,U,J)})})]}),_.jsxs("div",{className:"break-words whitespace-pre-wrap",children:[Y.split(`
`).map((Q,ae,ce)=>_.jsxs("span",{children:[Hb(Q,d),ae<ce.length-1&&_.jsx("br",{})]},ae)),!te&&_.jsxs(_.Fragment,{children:[_.jsx("span",{className:"text-[10px] text-muted-foreground/50 ml-2",children:oa(O.sender_timestamp||O.received_at)}),!O.outgoing&&O.paths&&O.paths.length>0&&_.jsx(Im,{paths:O.paths,variant:"inline",onClick:()=>k({paths:O.paths,senderInfo:F(O,U,J)})})]}),O.outgoing&&(O.acked>0?` ${O.acked>1?O.acked:""}`:" ?")]})]})]},O.id)})]}),C&&_.jsx("button",{onClick:b,className:"absolute bottom-4 right-4 w-10 h-10 rounded-full bg-muted hover:bg-accent border border-border flex items-center justify-center shadow-lg transition-opacity",title:"Scroll to bottom",children:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-muted-foreground",children:_.jsx("polyline",{points:"6 9 12 15 18 9"})})}),M&&_.jsx(Ib,{open:!0,onClose:()=>k(null),paths:M.paths,senderInfo:M.senderInfo,contacts:s,config:g??null})]})}const Om=156,Ub=140,Zb=156,Wb=120,qb=8,Gb=N.forwardRef(function({onSend:s,disabled:i,placeholder:l,isRepeaterMode:u,conversationType:c,senderName:h},d){const[g,m]=N.useState(""),[x,v]=N.useState(!1),C=N.useRef(null);N.useImperativeHandle(d,()=>({appendText:F=>{var I;m(j=>j+F),(I=C.current)==null||I.focus()}}));const P=N.useMemo(()=>{if(c==="contact")return{warningAt:Ub,dangerAt:Om,hardLimit:Om};if(c==="channel"){const F=(h==null?void 0:h.length)??10,I=Math.max(1,Zb-F-2);return{warningAt:Wb,dangerAt:Math.max(1,I-qb),hardLimit:I}}return null},[c,h]),{limitState:M,warningMessage:k}=N.useMemo(()=>{if(!P)return{limitState:"normal",warningMessage:null};const F=g.length;return F>=P.hardLimit?{limitState:"error",warningMessage:"likely truncated by radio"}:F>=P.dangerAt?{limitState:"danger",warningMessage:"may impact multi-repeater hop delivery"}:F>=P.warningAt?{limitState:"warning",warningMessage:"may impact multi-repeater hop delivery"}:{limitState:"normal",warningMessage:null}},[g.length,P]),w=P?P.hardLimit-g.length:0,B=N.useCallback(async F=>{F.preventDefault();const I=g.trim();if(u){if(x||i)return;v(!0);try{await s(I),m("")}catch(j){console.error("Failed to request telemetry:",j),At.error("Failed to request telemetry",{description:j instanceof Error?j.message:"Check radio connection"});return}finally{v(!1)}setTimeout(()=>{var j;return(j=C.current)==null?void 0:j.focus()},0)}else{if(!I||x||i)return;v(!0);try{await s(I),m("")}catch(j){console.error("Failed to send message:",j),At.error("Failed to send message",{description:j instanceof Error?j.message:"Check radio connection"});return}finally{v(!1)}setTimeout(()=>{var j;return(j=C.current)==null?void 0:j.focus()},0)}},[g,x,i,s,u]),b=N.useCallback(F=>{F.key==="Enter"&&!F.shiftKey&&(F.preventDefault(),B(F))},[B]),E=u?!0:g.trim().length>0,T=!u&&P!==null;return _.jsxs("form",{className:"px-4 py-3 border-t border-border flex flex-col gap-1",onSubmit:B,children:[_.jsxs("div",{className:"flex gap-2",children:[_.jsx(on,{ref:C,type:u?"password":"text",autoComplete:u?"off":void 0,value:g,onChange:F=>m(F.target.value),onKeyDown:b,placeholder:l||(u?"Enter password for admin login...":"Type a message..."),disabled:i||x,className:"flex-1 min-w-0"}),_.jsx(mn,{type:"submit",disabled:i||x||!E,className:"flex-shrink-0",children:x?u?"Logging in...":"Sending...":u?g.trim()?"Log in with password":"Log in as guest/use repeater ACLs":"Send"})]}),T&&_.jsxs("div",{className:"flex items-center justify-end gap-2 text-xs",children:[_.jsxs("span",{className:pt("tabular-nums",M==="error"||M==="danger"?"text-red-500 font-medium":M==="warning"?"text-yellow-500":"text-muted-foreground"),children:[g.length,"/",P.hardLimit,w<0&&` (${w})`]}),k&&_.jsxs("span",{className:pt(M==="error"?"text-red-500":"text-yellow-500"),children:[" ",k]})]})]})});function jm(n){const s=$b(n),i=N.forwardRef((l,u)=>{const{children:c,...h}=l,d=N.Children.toArray(c),g=d.find(Qb);if(g){const m=g.props.children,x=d.map(v=>v===g?N.Children.count(m)>1?N.Children.only(null):N.isValidElement(m)?m.props.children:null:v);return _.jsx(s,{...h,ref:u,children:N.isValidElement(m)?N.cloneElement(m,void 0,x):null})}return _.jsx(s,{...h,ref:u,children:c})});return i.displayName=`${n}.Slot`,i}function $b(n){const s=N.forwardRef((i,l)=>{const{children:u,...c}=i;if(N.isValidElement(u)){const h=Xb(u),d=Yb(c,u.props);return u.type!==N.Fragment&&(d.ref=l?Sl(l,h):h),N.cloneElement(u,d)}return N.Children.count(u)>1?N.Children.only(null):null});return s.displayName=`${n}.SlotClone`,s}var Kb=Symbol("radix.slottable");function Qb(n){return N.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===Kb}function Yb(n,s){const i={...s};for(const l in s){const u=n[l],c=s[l];/^on[A-Z]/.test(l)?u&&c?i[l]=(...d)=>{const g=c(...d);return u(...d),g}:u&&(i[l]=u):l==="style"?i[l]={...u,...c}:l==="className"&&(i[l]=[u,c].filter(Boolean).join(" "))}return{...n,...i}}function Xb(n){var l,u;let s=(l=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:l.get,i=s&&"isReactWarning"in s&&s.isReactWarning;return i?n.ref:(s=(u=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:u.get,i=s&&"isReactWarning"in s&&s.isReactWarning,i?n.props.ref:n.props.ref||n.ref)}function Jb(n){const s=n+"CollectionProvider",[i,l]=Bl(s),[u,c]=i(s,{collectionRef:{current:null},itemMap:new Map}),h=k=>{const{scope:w,children:B}=k,b=De.useRef(null),E=De.useRef(new Map).current;return _.jsx(u,{scope:w,itemMap:E,collectionRef:b,children:B})};h.displayName=s;const d=n+"CollectionSlot",g=jm(d),m=De.forwardRef((k,w)=>{const{scope:B,children:b}=k,E=c(d,B),T=Sr(w,E.collectionRef);return _.jsx(g,{ref:T,children:b})});m.displayName=d;const x=n+"CollectionItemSlot",v="data-radix-collection-item",C=jm(x),P=De.forwardRef((k,w)=>{const{scope:B,children:b,...E}=k,T=De.useRef(null),F=Sr(w,T),I=c(x,B);return De.useEffect(()=>(I.itemMap.set(T,{ref:T,...E}),()=>void I.itemMap.delete(T))),_.jsx(C,{[v]:"",ref:F,children:b})});P.displayName=x;function M(k){const w=c(n+"CollectionConsumer",k);return De.useCallback(()=>{const b=w.collectionRef.current;if(!b)return[];const E=Array.from(b.querySelectorAll(`[${v}]`));return Array.from(w.itemMap.values()).sort((I,j)=>E.indexOf(I.ref.current)-E.indexOf(j.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:h,Slot:m,ItemSlot:P},M,l]}var e2=N.createContext(void 0);function Bv(n){const s=N.useContext(e2);return n||s||"ltr"}var p0="rovingFocusGroup.onEntryFocus",t2={bubbles:!1,cancelable:!0},Pl="RovingFocusGroup",[B0,Pv,n2]=Jb(Pl),[r2,Tv]=Bl(Pl,[n2]),[i2,o2]=r2(Pl),Dv=N.forwardRef((n,s)=>_.jsx(B0.Provider,{scope:n.__scopeRovingFocusGroup,children:_.jsx(B0.Slot,{scope:n.__scopeRovingFocusGroup,children:_.jsx(s2,{...n,ref:s})})}));Dv.displayName=Pl;var s2=N.forwardRef((n,s)=>{const{__scopeRovingFocusGroup:i,orientation:l,loop:u=!1,dir:c,currentTabStopId:h,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:g,onEntryFocus:m,preventScrollOnEntryFocus:x=!1,...v}=n,C=N.useRef(null),P=Sr(s,C),M=Bv(c),[k,w]=ld({prop:h,defaultProp:d??null,onChange:g,caller:Pl}),[B,b]=N.useState(!1),E=aa(m),T=Pv(i),F=N.useRef(!1),[I,j]=N.useState(0);return N.useEffect(()=>{const O=C.current;if(O)return O.addEventListener(p0,E),()=>O.removeEventListener(p0,E)},[E]),_.jsx(i2,{scope:i,orientation:l,dir:M,loop:u,currentTabStopId:k,onItemFocus:N.useCallback(O=>w(O),[w]),onItemShiftTab:N.useCallback(()=>b(!0),[]),onFocusableItemAdd:N.useCallback(()=>j(O=>O+1),[]),onFocusableItemRemove:N.useCallback(()=>j(O=>O-1),[]),children:_.jsx(wn.div,{tabIndex:B||I===0?-1:0,"data-orientation":l,...v,ref:P,style:{outline:"none",...n.style},onMouseDown:xn(n.onMouseDown,()=>{F.current=!0}),onFocus:xn(n.onFocus,O=>{const G=!F.current;if(O.target===O.currentTarget&&G&&!B){const U=new CustomEvent(p0,t2);if(O.currentTarget.dispatchEvent(U),!U.defaultPrevented){const K=T().filter($=>$.focusable),J=K.find($=>$.active),Y=K.find($=>$.id===k),ge=[J,Y,...K].filter(Boolean).map($=>$.ref.current);Nv(ge,x)}}F.current=!1}),onBlur:xn(n.onBlur,()=>b(!1))})})}),Rv="RovingFocusGroupItem",Fv=N.forwardRef((n,s)=>{const{__scopeRovingFocusGroup:i,focusable:l=!0,active:u=!1,tabStopId:c,children:h,...d}=n,g=wl(),m=c||g,x=o2(Rv,i),v=x.currentTabStopId===m,C=Pv(i),{onFocusableItemAdd:P,onFocusableItemRemove:M,currentTabStopId:k}=x;return N.useEffect(()=>{if(l)return P(),()=>M()},[l,P,M]),_.jsx(B0.ItemSlot,{scope:i,id:m,focusable:l,active:u,children:_.jsx(wn.span,{tabIndex:v?0:-1,"data-orientation":x.orientation,...d,ref:s,onMouseDown:xn(n.onMouseDown,w=>{l?x.onItemFocus(m):w.preventDefault()}),onFocus:xn(n.onFocus,()=>x.onItemFocus(m)),onKeyDown:xn(n.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){x.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const B=u2(w,x.orientation,x.dir);if(B!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let E=C().filter(T=>T.focusable).map(T=>T.ref.current);if(B==="last")E.reverse();else if(B==="prev"||B==="next"){B==="prev"&&E.reverse();const T=E.indexOf(w.currentTarget);E=x.loop?c2(E,T+1):E.slice(T+1)}setTimeout(()=>Nv(E))}}),children:typeof h=="function"?h({isCurrentTabStop:v,hasTabStop:k!=null}):h})})});Fv.displayName=Rv;var a2={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function l2(n,s){return s!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function u2(n,s,i){const l=l2(n.key,i);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(l))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(l)))return a2[l]}function Nv(n,s=!1){const i=document.activeElement;for(const l of n)if(l===i||(l.focus({preventScroll:s}),document.activeElement!==i))return}function c2(n,s){return n.map((i,l)=>n[(s+l)%n.length])}var d2=Dv,f2=Fv,Ad="Tabs",[h2]=Bl(Ad,[Tv]),Lv=Tv(),[p2,X0]=h2(Ad),Mv=N.forwardRef((n,s)=>{const{__scopeTabs:i,value:l,onValueChange:u,defaultValue:c,orientation:h="horizontal",dir:d,activationMode:g="automatic",...m}=n,x=Bv(d),[v,C]=ld({prop:l,onChange:u,defaultProp:c??"",caller:Ad});return _.jsx(p2,{scope:i,baseId:wl(),value:v,onValueChange:C,orientation:h,dir:x,activationMode:g,children:_.jsx(wn.div,{dir:x,"data-orientation":h,...m,ref:s})})});Mv.displayName=Ad;var Iv="TabsList",Ov=N.forwardRef((n,s)=>{const{__scopeTabs:i,loop:l=!0,...u}=n,c=X0(Iv,i),h=Lv(i);return _.jsx(d2,{asChild:!0,...h,orientation:c.orientation,dir:c.dir,loop:l,children:_.jsx(wn.div,{role:"tablist","aria-orientation":c.orientation,...u,ref:s})})});Ov.displayName=Iv;var jv="TabsTrigger",zv=N.forwardRef((n,s)=>{const{__scopeTabs:i,value:l,disabled:u=!1,...c}=n,h=X0(jv,i),d=Lv(i),g=Uv(h.baseId,l),m=Zv(h.baseId,l),x=l===h.value;return _.jsx(f2,{asChild:!0,...d,focusable:!u,active:x,children:_.jsx(wn.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":m,"data-state":x?"active":"inactive","data-disabled":u?"":void 0,disabled:u,id:g,...c,ref:s,onMouseDown:xn(n.onMouseDown,v=>{!u&&v.button===0&&v.ctrlKey===!1?h.onValueChange(l):v.preventDefault()}),onKeyDown:xn(n.onKeyDown,v=>{[" ","Enter"].includes(v.key)&&h.onValueChange(l)}),onFocus:xn(n.onFocus,()=>{const v=h.activationMode!=="manual";!x&&!u&&v&&h.onValueChange(l)})})})});zv.displayName=jv;var Hv="TabsContent",Vv=N.forwardRef((n,s)=>{const{__scopeTabs:i,value:l,forceMount:u,children:c,...h}=n,d=X0(Hv,i),g=Uv(d.baseId,l),m=Zv(d.baseId,l),x=l===d.value,v=N.useRef(x);return N.useEffect(()=>{const C=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(C)},[]),_.jsx(da,{present:u||x,children:({present:C})=>_.jsx(wn.div,{"data-state":x?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":g,hidden:!C,id:m,tabIndex:0,...h,ref:s,style:{...n.style,animationDuration:v.current?"0s":void 0},children:C&&c})})});Vv.displayName=Hv;function Uv(n,s){return`${n}-trigger-${s}`}function Zv(n,s){return`${n}-content-${s}`}var m2=Mv,Wv=Ov,qv=zv,Gv=Vv;const J0=m2,yd=N.forwardRef(({className:n,...s},i)=>_.jsx(Wv,{ref:i,className:pt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...s}));yd.displayName=Wv.displayName;const dr=N.forwardRef(({className:n,...s},i)=>_.jsx(qv,{ref:i,className:pt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...s}));dr.displayName=qv.displayName;const fr=N.forwardRef(({className:n,...s},i)=>_.jsx(Gv,{ref:i,className:pt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...s}));fr.displayName=Gv.displayName;var g2=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],x2=g2.reduce((n,s)=>{const i=W0(`Primitive.${s}`),l=N.forwardRef((u,c)=>{const{asChild:h,...d}=u,g=h?i:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),_.jsx(g,{...d,ref:c})});return l.displayName=`Primitive.${s}`,{...n,[s]:l}},{}),v2="Label",$v=N.forwardRef((n,s)=>_.jsx(x2.label,{...n,ref:s,onMouseDown:i=>{var u;i.target.closest("button, input, select, textarea")||((u=n.onMouseDown)==null||u.call(n,i),!i.defaultPrevented&&i.detail>1&&i.preventDefault())}}));$v.displayName=v2;var Kv=$v;const A2=q0("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),jt=N.forwardRef(({className:n,...s},i)=>_.jsx(Kv,{ref:i,className:pt(A2(),n),...s}));jt.displayName=Kv.displayName;function y2(n){const s=N.useRef({value:n,previous:n});return N.useMemo(()=>(s.current.value!==n&&(s.current.previous=s.current.value,s.current.value=n),s.current.previous),[n])}function _2(n){const[s,i]=N.useState(void 0);return sa(()=>{if(n){i({width:n.offsetWidth,height:n.offsetHeight});const l=new ResizeObserver(u=>{if(!Array.isArray(u)||!u.length)return;const c=u[0];let h,d;if("borderBoxSize"in c){const g=c.borderBoxSize,m=Array.isArray(g)?g[0]:g;h=m.inlineSize,d=m.blockSize}else h=n.offsetWidth,d=n.offsetHeight;i({width:h,height:d})});return l.observe(n,{box:"border-box"}),()=>l.unobserve(n)}else i(void 0)},[n]),s}var _d="Checkbox",[w2]=Bl(_d),[b2,eh]=w2(_d);function C2(n){const{__scopeCheckbox:s,checked:i,children:l,defaultChecked:u,disabled:c,form:h,name:d,onCheckedChange:g,required:m,value:x="on",internal_do_not_use_render:v}=n,[C,P]=ld({prop:i,defaultProp:u??!1,onChange:g,caller:_d}),[M,k]=N.useState(null),[w,B]=N.useState(null),b=N.useRef(!1),E=M?!!h||!!M.closest("form"):!0,T={checked:C,disabled:c,setChecked:P,control:M,setControl:k,name:d,form:h,value:x,hasConsumerStoppedPropagationRef:b,required:m,defaultChecked:yo(u)?!1:u,isFormControl:E,bubbleInput:w,setBubbleInput:B};return _.jsx(b2,{scope:s,...T,children:E2(v)?v(T):l})}var Qv="CheckboxTrigger",Yv=N.forwardRef(({__scopeCheckbox:n,onKeyDown:s,onClick:i,...l},u)=>{const{control:c,value:h,disabled:d,checked:g,required:m,setControl:x,setChecked:v,hasConsumerStoppedPropagationRef:C,isFormControl:P,bubbleInput:M}=eh(Qv,n),k=Sr(u,x),w=N.useRef(g);return N.useEffect(()=>{const B=c==null?void 0:c.form;if(B){const b=()=>v(w.current);return B.addEventListener("reset",b),()=>B.removeEventListener("reset",b)}},[c,v]),_.jsx(wn.button,{type:"button",role:"checkbox","aria-checked":yo(g)?"mixed":g,"aria-required":m,"data-state":nA(g),"data-disabled":d?"":void 0,disabled:d,value:h,...l,ref:k,onKeyDown:xn(s,B=>{B.key==="Enter"&&B.preventDefault()}),onClick:xn(i,B=>{v(b=>yo(b)?!0:!b),M&&P&&(C.current=B.isPropagationStopped(),C.current||B.stopPropagation())})})});Yv.displayName=Qv;var th=N.forwardRef((n,s)=>{const{__scopeCheckbox:i,name:l,checked:u,defaultChecked:c,required:h,disabled:d,value:g,onCheckedChange:m,form:x,...v}=n;return _.jsx(C2,{__scopeCheckbox:i,checked:u,defaultChecked:c,disabled:d,required:h,onCheckedChange:m,name:l,form:x,value:g,internal_do_not_use_render:({isFormControl:C})=>_.jsxs(_.Fragment,{children:[_.jsx(Yv,{...v,ref:s,__scopeCheckbox:i}),C&&_.jsx(tA,{__scopeCheckbox:i})]})})});th.displayName=_d;var Xv="CheckboxIndicator",Jv=N.forwardRef((n,s)=>{const{__scopeCheckbox:i,forceMount:l,...u}=n,c=eh(Xv,i);return _.jsx(da,{present:l||yo(c.checked)||c.checked===!0,children:_.jsx(wn.span,{"data-state":nA(c.checked),"data-disabled":c.disabled?"":void 0,...u,ref:s,style:{pointerEvents:"none",...n.style}})})});Jv.displayName=Xv;var eA="CheckboxBubbleInput",tA=N.forwardRef(({__scopeCheckbox:n,...s},i)=>{const{control:l,hasConsumerStoppedPropagationRef:u,checked:c,defaultChecked:h,required:d,disabled:g,name:m,value:x,form:v,bubbleInput:C,setBubbleInput:P}=eh(eA,n),M=Sr(i,P),k=y2(c),w=_2(l);N.useEffect(()=>{const b=C;if(!b)return;const E=window.HTMLInputElement.prototype,F=Object.getOwnPropertyDescriptor(E,"checked").set,I=!u.current;if(k!==c&&F){const j=new Event("click",{bubbles:I});b.indeterminate=yo(c),F.call(b,yo(c)?!1:c),b.dispatchEvent(j)}},[C,k,c,u]);const B=N.useRef(yo(c)?!1:c);return _.jsx(wn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:h??B.current,required:d,disabled:g,name:m,value:x,form:v,...s,tabIndex:-1,ref:M,style:{...s.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});tA.displayName=eA;function E2(n){return typeof n=="function"}function yo(n){return n==="indeterminate"}function nA(n){return yo(n)?"indeterminate":n?"checked":"unchecked"}const Fi=N.forwardRef(({className:n,...s},i)=>_.jsx(th,{ref:i,className:pt("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...s,children:_.jsx(Jv,{className:pt("flex items-center justify-center text-current"),children:_.jsx(D_,{className:"h-4 w-4"})})}));Fi.displayName=th.displayName;function k2({open:n,contacts:s,undecryptedCount:i,onClose:l,onSelectConversation:u,onCreateContact:c,onCreateChannel:h,onCreateHashtagChannel:d}){const[g,m]=N.useState("existing"),[x,v]=N.useState(""),[C,P]=N.useState(""),[M,k]=N.useState(""),[w,B]=N.useState(!1),[b,E]=N.useState(!1),[T,F]=N.useState(""),[I,j]=N.useState(!1),O=N.useRef(null),G=async()=>{F(""),j(!0);try{if(g==="new-contact"){if(!x.trim()||!C.trim()){F("Name and public key are required");return}await c(x.trim(),C.trim(),w)}else if(g==="new-room"){if(!x.trim()||!M.trim()){F("Room name and key are required");return}await h(x.trim(),M.trim(),w)}else if(g==="hashtag"){const Y=x.trim(),ie=U(Y);if(ie){F(ie);return}const ge=b?Y:Y.toLowerCase();await d(`#${ge}`,w)}l()}catch(Y){F(Y instanceof Error?Y.message:"Failed to create")}finally{j(!1)}},U=Y=>Y?/^[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*$/.test(Y)?null:"Use letters, numbers, and single dashes (no leading/trailing dashes)":"Channel name is required",K=async()=>{var ge;F("");const Y=x.trim(),ie=U(Y);if(ie){F(ie);return}j(!0);try{const $=b?Y:Y.toLowerCase();await d(`#${$}`,w),v(""),(ge=O.current)==null||ge.focus()}catch($){F($ instanceof Error?$.message:"Failed to create")}finally{j(!1)}},J=g!=="existing"&&i>0;return _.jsx(Q0,{open:n,onOpenChange:Y=>!Y&&l(),children:_.jsxs(md,{className:"sm:max-w-[500px]",children:[_.jsxs(gd,{children:[_.jsx(xd,{children:"New Conversation"}),_.jsxs(vd,{className:"sr-only",children:[g==="existing"&&"Select an existing contact to start a conversation",g==="new-contact"&&"Add a new contact by entering their name and public key",g==="new-room"&&"Create a private room with a shared encryption key",g==="hashtag"&&"Join a public hashtag channel"]})]}),_.jsxs(J0,{value:g,onValueChange:Y=>m(Y),className:"w-full",children:[_.jsxs(yd,{className:"grid w-full grid-cols-4",children:[_.jsx(dr,{value:"existing",children:"Existing"}),_.jsx(dr,{value:"new-contact",children:"Contact"}),_.jsx(dr,{value:"new-room",children:"Room"}),_.jsx(dr,{value:"hashtag",children:"Hashtag"})]}),_.jsx(fr,{value:"existing",className:"mt-4",children:_.jsx("div",{className:"max-h-[300px] overflow-y-auto rounded-md border",children:s.length===0?_.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No contacts available"}):s.map(Y=>_.jsx("div",{className:"cursor-pointer px-4 py-2 hover:bg-accent",onClick:()=>{u({type:"contact",id:Y.public_key,name:Ni(Y.name,Y.public_key)}),l()},children:Ni(Y.name,Y.public_key)},Y.public_key))})}),_.jsxs(fr,{value:"new-contact",className:"mt-4 space-y-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx(jt,{htmlFor:"contact-name",children:"Name"}),_.jsx(on,{id:"contact-name",value:x,onChange:Y=>v(Y.target.value),placeholder:"Contact name"})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(jt,{htmlFor:"contact-key",children:"Public Key"}),_.jsx(on,{id:"contact-key",value:C,onChange:Y=>P(Y.target.value),placeholder:"64-character hex public key"})]})]}),_.jsxs(fr,{value:"new-room",className:"mt-4 space-y-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx(jt,{htmlFor:"room-name",children:"Room Name"}),_.jsx(on,{id:"room-name",value:x,onChange:Y=>v(Y.target.value),placeholder:"Room name"})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(jt,{htmlFor:"room-key",children:"Room Key"}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx(on,{id:"room-key",value:M,onChange:Y=>k(Y.target.value),placeholder:"Pre-shared key (hex)",className:"flex-1"}),_.jsx(mn,{type:"button",variant:"outline",size:"icon",onClick:()=>{const Y=new Uint8Array(16);crypto.getRandomValues(Y);const ie=Array.from(Y).map(ge=>ge.toString(16).padStart(2,"0")).join("");k(ie)},title:"Generate random key",children:""})]})]})]}),_.jsxs(fr,{value:"hashtag",className:"mt-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx(jt,{htmlFor:"hashtag-name",children:"Hashtag Channel"}),_.jsxs("div",{className:"flex items-center gap-1",children:[_.jsx("span",{className:"text-sm text-muted-foreground",children:"#"}),_.jsx(on,{ref:O,id:"hashtag-name",value:x,onChange:Y=>v(Y.target.value),placeholder:"channel-name",className:"flex-1"})]})]}),_.jsxs("div",{className:"mt-3 space-y-1",children:[_.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[_.jsx("input",{type:"checkbox",checked:b,onChange:Y=>E(Y.target.checked),className:"w-4 h-4 rounded border-input accent-primary"}),_.jsx("span",{className:"text-sm",children:"Permit capitals in room key derivation"})]}),_.jsx("p",{className:"text-xs text-muted-foreground pl-7",children:"Not recommended; most companions normalize to lowercase"})]})]})]}),J&&_.jsxs("div",{className:"space-y-1",children:[_.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[_.jsxs(jt,{htmlFor:"try-historical",className:"text-sm text-muted-foreground cursor-pointer",children:["Try decrypting ",i.toLocaleString()," stored packet",i!==1?"s":""]}),_.jsx(Fi,{id:"try-historical",checked:w,onCheckedChange:Y=>B(Y===!0)})]}),w&&_.jsx("p",{className:"text-xs text-muted-foreground text-right",children:"Messages will stream in as they decrypt in the background"})]}),T&&_.jsx("div",{className:"text-sm text-destructive",children:T}),_.jsxs(Y0,{children:[_.jsx(mn,{variant:"outline",onClick:l,children:"Cancel"}),g==="hashtag"&&_.jsx(mn,{variant:"secondary",onClick:K,disabled:I,children:I?"Creating...":"Create & Add Another"}),g!=="existing"&&_.jsx(mn,{onClick:G,disabled:I,children:I?"Creating...":"Create"})]})]})})}var Xn={},zm;function S2(){if(zm)return Xn;zm=1;var n=Xn&&Xn.__assign||function(){return n=Object.assign||function(F){for(var I,j=1,O=arguments.length;j<O;j++){I=arguments[j];for(var G in I)Object.prototype.hasOwnProperty.call(I,G)&&(F[G]=I[G])}return F},n.apply(this,arguments)},s=Xn&&Xn.__createBinding||(Object.create?(function(F,I,j,O){O===void 0&&(O=j);var G=Object.getOwnPropertyDescriptor(I,j);(!G||("get"in G?!I.__esModule:G.writable||G.configurable))&&(G={enumerable:!0,get:function(){return I[j]}}),Object.defineProperty(F,O,G)}):(function(F,I,j,O){O===void 0&&(O=j),F[O]=I[j]})),i=Xn&&Xn.__setModuleDefault||(Object.create?(function(F,I){Object.defineProperty(F,"default",{enumerable:!0,value:I})}):function(F,I){F.default=I}),l=Xn&&Xn.__importStar||function(F){if(F&&F.__esModule)return F;var I={};if(F!=null)for(var j in F)j!=="default"&&Object.prototype.hasOwnProperty.call(F,j)&&s(I,F,j);return i(I,F),I},u=Xn&&Xn.__rest||function(F,I){var j={};for(var O in F)Object.prototype.hasOwnProperty.call(F,O)&&I.indexOf(O)<0&&(j[O]=F[O]);if(F!=null&&typeof Object.getOwnPropertySymbols=="function")for(var G=0,O=Object.getOwnPropertySymbols(F);G<O.length;G++)I.indexOf(O[G])<0&&Object.prototype.propertyIsEnumerable.call(F,O[G])&&(j[O[G]]=F[O[G]]);return j};Object.defineProperty(Xn,"__esModule",{value:!0});var c=l(sd()),h=89,d=90,g=77,m=57,x=219,v=222,C=192,P=100,M=3e3,k=typeof window<"u"&&"navigator"in window&&/Win/i.test(navigator.platform),w=typeof window<"u"&&"navigator"in window&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),B="npm__react-simple-code-editor__textarea",b=`
/**
 * Reset the text fill color so that placeholder is visible
 */
.`.concat(B,`:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .`).concat(B,` {
    color: transparent !important;
  }

  .`).concat(B,`::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
`),E=c.forwardRef(function(I,j){var O=I.autoFocus,G=I.disabled,U=I.form,K=I.highlight,J=I.ignoreTabKey,Y=J===void 0?!1:J,ie=I.insertSpaces,ge=ie===void 0?!0:ie,$=I.maxLength,se=I.minLength,W=I.name,te=I.onBlur,Z=I.onClick,D=I.onFocus,H=I.onKeyDown,q=I.onKeyUp,Q=I.onValueChange,ae=I.padding,ce=ae===void 0?0:ae,Ae=I.placeholder,pe=I.preClassName,xe=I.readOnly,Be=I.required,Oe=I.style,Xe=I.tabSize,Ee=Xe===void 0?2:Xe,je=I.textareaClassName,at=I.textareaId,mt=I.value,ot=u(I,["autoFocus","disabled","form","highlight","ignoreTabKey","insertSpaces","maxLength","minLength","name","onBlur","onClick","onFocus","onKeyDown","onKeyUp","onValueChange","padding","placeholder","preClassName","readOnly","required","style","tabSize","textareaClassName","textareaId","value"]),qe=c.useRef({stack:[],offset:-1}),Ke=c.useRef(null),Qe=c.useState(!0),rt=Qe[0],He=Qe[1],Et={paddingTop:typeof ce=="object"?ce.top:ce,paddingRight:typeof ce=="object"?ce.right:ce,paddingBottom:typeof ce=="object"?ce.bottom:ce,paddingLeft:typeof ce=="object"?ce.left:ce},zt=K(mt),Qt=function(_e,fe){return _e.substring(0,fe).split(`
`)},Dt=c.useCallback(function(_e,fe){var ve,we,Ge;fe===void 0&&(fe=!1);var re=qe.current,ye=re.stack,Ce=re.offset;if(ye.length&&Ce>-1){qe.current.stack=ye.slice(0,Ce+1);var Ne=qe.current.stack.length;if(Ne>P){var Je=Ne-P;qe.current.stack=ye.slice(Je,Ne),qe.current.offset=Math.max(qe.current.offset-Je,0)}}var Fe=Date.now();if(fe){var ft=qe.current.stack[qe.current.offset];if(ft&&Fe-ft.timestamp<M){var St=/[^a-z0-9]([a-z0-9]+)$/i,xt=(ve=Qt(ft.value,ft.selectionStart).pop())===null||ve===void 0?void 0:ve.match(St),an=(we=Qt(_e.value,_e.selectionStart).pop())===null||we===void 0?void 0:we.match(St);if(xt!=null&&xt[1]&&(!((Ge=an==null?void 0:an[1])===null||Ge===void 0)&&Ge.startsWith(xt[1]))){qe.current.stack[qe.current.offset]=n(n({},_e),{timestamp:Fe});return}}}qe.current.stack.push(n(n({},_e),{timestamp:Fe})),qe.current.offset++},[]),Gt=c.useCallback(function(){var _e=Ke.current;if(_e){var fe=_e.value,ve=_e.selectionStart,we=_e.selectionEnd;Dt({value:fe,selectionStart:ve,selectionEnd:we})}},[Dt]),Yt=function(_e){var fe=Ke.current;fe&&(fe.value=_e.value,fe.selectionStart=_e.selectionStart,fe.selectionEnd=_e.selectionEnd,Q==null||Q(_e.value))},$t=function(_e){var fe=Ke.current,ve=qe.current.stack[qe.current.offset];ve&&fe&&(qe.current.stack[qe.current.offset]=n(n({},ve),{selectionStart:fe.selectionStart,selectionEnd:fe.selectionEnd})),Dt(_e),Yt(_e)},Ht=function(){var _e=qe.current,fe=_e.stack,ve=_e.offset,we=fe[ve-1];we&&(Yt(we),qe.current.offset=Math.max(ve-1,0))},Rt=function(){var _e=qe.current,fe=_e.stack,ve=_e.offset,we=fe[ve+1];we&&(Yt(we),qe.current.offset=Math.min(ve+1,fe.length-1))},Vt=function(_e){if(!(H&&(H(_e),_e.defaultPrevented))){_e.key==="Escape"&&_e.currentTarget.blur();var fe=_e.currentTarget,ve=fe.value,we=fe.selectionStart,Ge=fe.selectionEnd,re=(ge?" ":"	").repeat(Ee);if(_e.key==="Tab"&&!Y&&rt)if(_e.preventDefault(),_e.shiftKey){var ye=Qt(ve,we),Ce=ye.length-1,Ne=Qt(ve,Ge).length-1,Je=ve.split(`
`).map(function(Mt,Le){return Le>=Ce&&Le<=Ne&&Mt.startsWith(re)?Mt.substring(re.length):Mt}).join(`
`);if(ve!==Je){var Fe=ye[Ce];$t({value:Je,selectionStart:Fe!=null&&Fe.startsWith(re)?we-re.length:we,selectionEnd:Ge-(ve.length-Je.length)})}}else if(we!==Ge){var ye=Qt(ve,we),ft=ye.length-1,St=Qt(ve,Ge).length-1,Fe=ye[ft];$t({value:ve.split(`
`).map(function(Br,li){return li>=ft&&li<=St?re+Br:Br}).join(`
`),selectionStart:Fe&&/\S/.test(Fe)?we+re.length:we,selectionEnd:Ge+re.length*(St-ft+1)})}else{var xt=we+re.length;$t({value:ve.substring(0,we)+re+ve.substring(Ge),selectionStart:xt,selectionEnd:xt})}else if(_e.key==="Backspace"){var an=we!==Ge,dt=ve.substring(0,we);if(dt.endsWith(re)&&!an){_e.preventDefault();var xt=we-re.length;$t({value:ve.substring(0,we-re.length)+ve.substring(Ge),selectionStart:xt,selectionEnd:xt})}}else if(_e.key==="Enter"){if(we===Ge){var Pt=Qt(ve,we).pop(),vn=Pt==null?void 0:Pt.match(/^\s+/);if(vn!=null&&vn[0]){_e.preventDefault();var wt=`
`+vn[0],xt=we+wt.length;$t({value:ve.substring(0,we)+wt+ve.substring(Ge),selectionStart:xt,selectionEnd:xt})}}}else if(_e.keyCode===m||_e.keyCode===x||_e.keyCode===v||_e.keyCode===C){var kt=void 0;_e.keyCode===m&&_e.shiftKey?kt=["(",")"]:_e.keyCode===x?_e.shiftKey?kt=["{","}"]:kt=["[","]"]:_e.keyCode===v?_e.shiftKey?kt=['"','"']:kt=["'","'"]:_e.keyCode===C&&!_e.shiftKey&&(kt=["`","`"]),we!==Ge&&kt&&(_e.preventDefault(),$t({value:ve.substring(0,we)+kt[0]+ve.substring(we,Ge)+kt[1]+ve.substring(Ge),selectionStart:we,selectionEnd:Ge+2}))}else(w?_e.metaKey&&_e.keyCode===d:_e.ctrlKey&&_e.keyCode===d)&&!_e.shiftKey&&!_e.altKey?(_e.preventDefault(),Ht()):(w?_e.metaKey&&_e.keyCode===d&&_e.shiftKey:k?_e.ctrlKey&&_e.keyCode===h:_e.ctrlKey&&_e.keyCode===d&&_e.shiftKey)&&!_e.altKey?(_e.preventDefault(),Rt()):_e.keyCode===g&&_e.ctrlKey&&(!w||_e.shiftKey)&&(_e.preventDefault(),He(function(Mt){return!Mt}))}},Pe=function(_e){var fe=_e.currentTarget,ve=fe.value,we=fe.selectionStart,Ge=fe.selectionEnd;Dt({value:ve,selectionStart:we,selectionEnd:Ge},!0),Q(ve)};return c.useEffect(function(){Gt()},[Gt]),c.useImperativeHandle(j,function(){return{get session(){return{history:qe.current}},set session(_e){qe.current=_e.history}}},[]),c.createElement("div",n({},ot,{style:n(n({},T.container),Oe)}),c.createElement("pre",n({className:pe,"aria-hidden":"true",style:n(n(n({},T.editor),T.highlight),Et)},typeof zt=="string"?{dangerouslySetInnerHTML:{__html:zt+"<br />"}}:{children:zt})),c.createElement("textarea",{ref:function(_e){return Ke.current=_e},style:n(n(n({},T.editor),T.textarea),Et),className:B+(je?" ".concat(je):""),id:at,value:mt,onChange:Pe,onKeyDown:Vt,onClick:Z,onKeyUp:q,onFocus:D,onBlur:te,disabled:G,form:U,maxLength:$,minLength:se,name:W,placeholder:Ae,readOnly:xe,required:Be,autoFocus:O,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),c.createElement("style",{dangerouslySetInnerHTML:{__html:b}}))}),T={container:{position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word"}};return Xn.default=E,Xn}var B2=S2();const P2=ls(B2);var m0={exports:{}},Hm;function T2(){return Hm||(Hm=1,(function(n){var s=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var i=(function(l){var u=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,c=0,h={},d={manual:l.Prism&&l.Prism.manual,disableWorkerMessageHandler:l.Prism&&l.Prism.disableWorkerMessageHandler,util:{encode:function b(E){return E instanceof g?new g(E.type,b(E.content),E.alias):Array.isArray(E)?E.map(b):E.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(b){return Object.prototype.toString.call(b).slice(8,-1)},objId:function(b){return b.__id||Object.defineProperty(b,"__id",{value:++c}),b.__id},clone:function b(E,T){T=T||{};var F,I;switch(d.util.type(E)){case"Object":if(I=d.util.objId(E),T[I])return T[I];F={},T[I]=F;for(var j in E)E.hasOwnProperty(j)&&(F[j]=b(E[j],T));return F;case"Array":return I=d.util.objId(E),T[I]?T[I]:(F=[],T[I]=F,E.forEach(function(O,G){F[G]=b(O,T)}),F);default:return E}},getLanguage:function(b){for(;b;){var E=u.exec(b.className);if(E)return E[1].toLowerCase();b=b.parentElement}return"none"},setLanguage:function(b,E){b.className=b.className.replace(RegExp(u,"gi"),""),b.classList.add("language-"+E)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(F){var b=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(F.stack)||[])[1];if(b){var E=document.getElementsByTagName("script");for(var T in E)if(E[T].src==b)return E[T]}return null}},isActive:function(b,E,T){for(var F="no-"+E;b;){var I=b.classList;if(I.contains(E))return!0;if(I.contains(F))return!1;b=b.parentElement}return!!T}},languages:{plain:h,plaintext:h,text:h,txt:h,extend:function(b,E){var T=d.util.clone(d.languages[b]);for(var F in E)T[F]=E[F];return T},insertBefore:function(b,E,T,F){F=F||d.languages;var I=F[b],j={};for(var O in I)if(I.hasOwnProperty(O)){if(O==E)for(var G in T)T.hasOwnProperty(G)&&(j[G]=T[G]);T.hasOwnProperty(O)||(j[O]=I[O])}var U=F[b];return F[b]=j,d.languages.DFS(d.languages,function(K,J){J===U&&K!=b&&(this[K]=j)}),j},DFS:function b(E,T,F,I){I=I||{};var j=d.util.objId;for(var O in E)if(E.hasOwnProperty(O)){T.call(E,O,E[O],F||O);var G=E[O],U=d.util.type(G);U==="Object"&&!I[j(G)]?(I[j(G)]=!0,b(G,T,null,I)):U==="Array"&&!I[j(G)]&&(I[j(G)]=!0,b(G,T,O,I))}}},plugins:{},highlightAll:function(b,E){d.highlightAllUnder(document,b,E)},highlightAllUnder:function(b,E,T){var F={callback:T,container:b,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};d.hooks.run("before-highlightall",F),F.elements=Array.prototype.slice.apply(F.container.querySelectorAll(F.selector)),d.hooks.run("before-all-elements-highlight",F);for(var I=0,j;j=F.elements[I++];)d.highlightElement(j,E===!0,F.callback)},highlightElement:function(b,E,T){var F=d.util.getLanguage(b),I=d.languages[F];d.util.setLanguage(b,F);var j=b.parentElement;j&&j.nodeName.toLowerCase()==="pre"&&d.util.setLanguage(j,F);var O=b.textContent,G={element:b,language:F,grammar:I,code:O};function U(J){G.highlightedCode=J,d.hooks.run("before-insert",G),G.element.innerHTML=G.highlightedCode,d.hooks.run("after-highlight",G),d.hooks.run("complete",G),T&&T.call(G.element)}if(d.hooks.run("before-sanity-check",G),j=G.element.parentElement,j&&j.nodeName.toLowerCase()==="pre"&&!j.hasAttribute("tabindex")&&j.setAttribute("tabindex","0"),!G.code){d.hooks.run("complete",G),T&&T.call(G.element);return}if(d.hooks.run("before-highlight",G),!G.grammar){U(d.util.encode(G.code));return}if(E&&l.Worker){var K=new Worker(d.filename);K.onmessage=function(J){U(J.data)},K.postMessage(JSON.stringify({language:G.language,code:G.code,immediateClose:!0}))}else U(d.highlight(G.code,G.grammar,G.language))},highlight:function(b,E,T){var F={code:b,grammar:E,language:T};if(d.hooks.run("before-tokenize",F),!F.grammar)throw new Error('The language "'+F.language+'" has no grammar.');return F.tokens=d.tokenize(F.code,F.grammar),d.hooks.run("after-tokenize",F),g.stringify(d.util.encode(F.tokens),F.language)},tokenize:function(b,E){var T=E.rest;if(T){for(var F in T)E[F]=T[F];delete E.rest}var I=new v;return C(I,I.head,b),x(b,I,E,I.head,0),M(I)},hooks:{all:{},add:function(b,E){var T=d.hooks.all;T[b]=T[b]||[],T[b].push(E)},run:function(b,E){var T=d.hooks.all[b];if(!(!T||!T.length))for(var F=0,I;I=T[F++];)I(E)}},Token:g};l.Prism=d;function g(b,E,T,F){this.type=b,this.content=E,this.alias=T,this.length=(F||"").length|0}g.stringify=function b(E,T){if(typeof E=="string")return E;if(Array.isArray(E)){var F="";return E.forEach(function(U){F+=b(U,T)}),F}var I={type:E.type,content:b(E.content,T),tag:"span",classes:["token",E.type],attributes:{},language:T},j=E.alias;j&&(Array.isArray(j)?Array.prototype.push.apply(I.classes,j):I.classes.push(j)),d.hooks.run("wrap",I);var O="";for(var G in I.attributes)O+=" "+G+'="'+(I.attributes[G]||"").replace(/"/g,"&quot;")+'"';return"<"+I.tag+' class="'+I.classes.join(" ")+'"'+O+">"+I.content+"</"+I.tag+">"};function m(b,E,T,F){b.lastIndex=E;var I=b.exec(T);if(I&&F&&I[1]){var j=I[1].length;I.index+=j,I[0]=I[0].slice(j)}return I}function x(b,E,T,F,I,j){for(var O in T)if(!(!T.hasOwnProperty(O)||!T[O])){var G=T[O];G=Array.isArray(G)?G:[G];for(var U=0;U<G.length;++U){if(j&&j.cause==O+","+U)return;var K=G[U],J=K.inside,Y=!!K.lookbehind,ie=!!K.greedy,ge=K.alias;if(ie&&!K.pattern.global){var $=K.pattern.toString().match(/[imsuy]*$/)[0];K.pattern=RegExp(K.pattern.source,$+"g")}for(var se=K.pattern||K,W=F.next,te=I;W!==E.tail&&!(j&&te>=j.reach);te+=W.value.length,W=W.next){var Z=W.value;if(E.length>b.length)return;if(!(Z instanceof g)){var D=1,H;if(ie){if(H=m(se,te,b,Y),!H||H.index>=b.length)break;var ce=H.index,q=H.index+H[0].length,Q=te;for(Q+=W.value.length;ce>=Q;)W=W.next,Q+=W.value.length;if(Q-=W.value.length,te=Q,W.value instanceof g)continue;for(var ae=W;ae!==E.tail&&(Q<q||typeof ae.value=="string");ae=ae.next)D++,Q+=ae.value.length;D--,Z=b.slice(te,Q),H.index-=te}else if(H=m(se,0,Z,Y),!H)continue;var ce=H.index,Ae=H[0],pe=Z.slice(0,ce),xe=Z.slice(ce+Ae.length),Be=te+Z.length;j&&Be>j.reach&&(j.reach=Be);var Oe=W.prev;pe&&(Oe=C(E,Oe,pe),te+=pe.length),P(E,Oe,D);var Xe=new g(O,J?d.tokenize(Ae,J):Ae,ge,Ae);if(W=C(E,Oe,Xe),xe&&C(E,W,xe),D>1){var Ee={cause:O+","+U,reach:Be};x(b,E,T,W.prev,te,Ee),j&&Ee.reach>j.reach&&(j.reach=Ee.reach)}}}}}}function v(){var b={value:null,prev:null,next:null},E={value:null,prev:b,next:null};b.next=E,this.head=b,this.tail=E,this.length=0}function C(b,E,T){var F=E.next,I={value:T,prev:E,next:F};return E.next=I,F.prev=I,b.length++,I}function P(b,E,T){for(var F=E.next,I=0;I<T&&F!==b.tail;I++)F=F.next;E.next=F,F.prev=E,b.length-=I}function M(b){for(var E=[],T=b.head.next;T!==b.tail;)E.push(T.value),T=T.next;return E}if(!l.document)return l.addEventListener&&(d.disableWorkerMessageHandler||l.addEventListener("message",function(b){var E=JSON.parse(b.data),T=E.language,F=E.code,I=E.immediateClose;l.postMessage(d.highlight(F,d.languages[T],T)),I&&l.close()},!1)),d;var k=d.util.currentScript();k&&(d.filename=k.src,k.hasAttribute("data-manual")&&(d.manual=!0));function w(){d.manual||d.highlightAll()}if(!d.manual){var B=document.readyState;B==="loading"||B==="interactive"&&k&&k.defer?document.addEventListener("DOMContentLoaded",w):window.requestAnimationFrame?window.requestAnimationFrame(w):window.setTimeout(w,16)}return d})(s);n.exports&&(n.exports=i),typeof _l<"u"&&(_l.Prism=i),i.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},i.languages.markup.tag.inside["attr-value"].inside.entity=i.languages.markup.entity,i.languages.markup.doctype.inside["internal-subset"].inside=i.languages.markup,i.hooks.add("wrap",function(l){l.type==="entity"&&(l.attributes.title=l.content.replace(/&amp;/,"&"))}),Object.defineProperty(i.languages.markup.tag,"addInlined",{value:function(u,c){var h={};h["language-"+c]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:i.languages[c]},h.cdata=/^<!\[CDATA\[|\]\]>$/i;var d={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:h}};d["language-"+c]={pattern:/[\s\S]+/,inside:i.languages[c]};var g={};g[u]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return u}),"i"),lookbehind:!0,greedy:!0,inside:d},i.languages.insertBefore("markup","cdata",g)}}),Object.defineProperty(i.languages.markup.tag,"addAttribute",{value:function(l,u){i.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+l+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[u,"language-"+u],inside:i.languages[u]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),i.languages.html=i.languages.markup,i.languages.mathml=i.languages.markup,i.languages.svg=i.languages.markup,i.languages.xml=i.languages.extend("markup",{}),i.languages.ssml=i.languages.xml,i.languages.atom=i.languages.xml,i.languages.rss=i.languages.xml,(function(l){var u=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;l.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+u.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+u.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+u.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+u.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:u,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},l.languages.css.atrule.inside.rest=l.languages.css;var c=l.languages.markup;c&&(c.tag.addInlined("style","css"),c.tag.addAttribute("style","css"))})(i),i.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},i.languages.javascript=i.languages.extend("clike",{"class-name":[i.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),i.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,i.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:i.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:i.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:i.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:i.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:i.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),i.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:i.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),i.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),i.languages.markup&&(i.languages.markup.tag.addInlined("script","javascript"),i.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),i.languages.js=i.languages.javascript,(function(){if(typeof i>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var l="Loading",u=function(k,w){return" Error "+k+" while fetching file: "+w},c=" Error: File does not exist or is empty",h={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},d="data-src-status",g="loading",m="loaded",x="failed",v="pre[data-src]:not(["+d+'="'+m+'"]):not(['+d+'="'+g+'"])';function C(k,w,B){var b=new XMLHttpRequest;b.open("GET",k,!0),b.onreadystatechange=function(){b.readyState==4&&(b.status<400&&b.responseText?w(b.responseText):b.status>=400?B(u(b.status,b.statusText)):B(c))},b.send(null)}function P(k){var w=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(k||"");if(w){var B=Number(w[1]),b=w[2],E=w[3];return b?E?[B,Number(E)]:[B,void 0]:[B,B]}}i.hooks.add("before-highlightall",function(k){k.selector+=", "+v}),i.hooks.add("before-sanity-check",function(k){var w=k.element;if(w.matches(v)){k.code="",w.setAttribute(d,g);var B=w.appendChild(document.createElement("CODE"));B.textContent=l;var b=w.getAttribute("data-src"),E=k.language;if(E==="none"){var T=(/\.(\w+)$/.exec(b)||[,"none"])[1];E=h[T]||T}i.util.setLanguage(B,E),i.util.setLanguage(w,E);var F=i.plugins.autoloader;F&&F.loadLanguages(E),C(b,function(I){w.setAttribute(d,m);var j=P(w.getAttribute("data-range"));if(j){var O=I.split(/\r\n?|\n/g),G=j[0],U=j[1]==null?O.length:j[1];G<0&&(G+=O.length),G=Math.max(0,Math.min(G-1,O.length)),U<0&&(U+=O.length),U=Math.max(0,Math.min(U,O.length)),I=O.slice(G,U).join(`
`),w.hasAttribute("data-start")||w.setAttribute("data-start",String(G+1))}B.textContent=I,i.highlightElement(B)},function(I){w.setAttribute(d,x),B.textContent=I})}}),i.plugins.fileHighlight={highlight:function(w){for(var B=(w||document).querySelectorAll(v),b=0,E;E=B[b++];)i.highlightElement(E)}};var M=!1;i.fileHighlight=function(){M||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),M=!0),i.plugins.fileHighlight.highlight.apply(this,arguments)}})()})(m0)),m0.exports}var Vm=T2(),Um={},Zm;function D2(){return Zm||(Zm=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),Um}D2();var R2=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],F2=R2.reduce((n,s)=>{const i=W0(`Primitive.${s}`),l=N.forwardRef((u,c)=>{const{asChild:h,...d}=u,g=h?i:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),_.jsx(g,{...d,ref:c})});return l.displayName=`Primitive.${s}`,{...n,[s]:l}},{}),N2="Separator",Wm="horizontal",L2=["horizontal","vertical"],rA=N.forwardRef((n,s)=>{const{decorative:i,orientation:l=Wm,...u}=n,c=M2(l)?l:Wm,d=i?{role:"none"}:{"aria-orientation":c==="vertical"?c:void 0,role:"separator"};return _.jsx(F2.div,{"data-orientation":c,...d,...u,ref:s})});rA.displayName=N2;function M2(n){return L2.includes(n)}var iA=rA;const vo=N.forwardRef(({className:n,orientation:s="horizontal",decorative:i=!0,...l},u)=>_.jsx(iA,{ref:u,decorative:i,orientation:s,className:pt("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",n),...l}));vo.displayName=iA.displayName;const g0=[{name:"USA/Canada",freq:910.525,bw:62.5,sf:7,cr:5},{name:"Australia",freq:915.8,bw:250,sf:10,cr:5},{name:"Australia (narrow)",freq:916.575,bw:62.5,sf:7,cr:8},{name:"Australia SA, WA",freq:923.125,bw:62.5,sf:8,cr:8},{name:"Australia QLD",freq:923.125,bw:62.5,sf:8,cr:5},{name:"New Zealand",freq:917.375,bw:250,sf:11,cr:5},{name:"New Zealand (narrow)",freq:917.375,bw:62.5,sf:7,cr:5},{name:"EU/UK/Switzerland Long Range",freq:869.525,bw:250,sf:11,cr:5},{name:"EU/UK/Switzerland Medium Range",freq:869.525,bw:250,sf:10,cr:5},{name:"EU/UK/Switzerland Narrow",freq:869.618,bw:62.5,sf:8,cr:8},{name:"Czech Republic (Narrow)",freq:869.432,bw:62.5,sf:7,cr:5},{name:"EU 433MHz Long Range",freq:433.65,bw:250,sf:11,cr:5},{name:"Portugal 433MHz",freq:433.375,bw:62.5,sf:9,cr:6},{name:"Portugal 868MHz",freq:869.618,bw:62.5,sf:7,cr:6},{name:"Vietnam",freq:920.25,bw:250,sf:11,cr:5}];function I2({open:n,config:s,health:i,appSettings:l,onClose:u,onSave:c,onSaveAppSettings:h,onSetPrivateKey:d,onReboot:g,onAdvertise:m,onHealthRefresh:x,onRefreshAppSettings:v}){const[C,P]=N.useState("radio"),[M,k]=N.useState(""),[w,B]=N.useState(""),[b,E]=N.useState(""),[T,F]=N.useState(""),[I,j]=N.useState(""),[O,G]=N.useState(""),[U,K]=N.useState(""),[J,Y]=N.useState(""),[ie,ge]=N.useState(""),[$,se]=N.useState(""),[W,te]=N.useState(!1),[Z,D]=N.useState(!1),[H,q]=N.useState(!1),[Q,ae]=N.useState(!1),[ce,Ae]=N.useState(""),[pe,xe]=N.useState("14"),[Be,Oe]=N.useState(!1),[Xe,Ee]=N.useState(!1),[je,at]=N.useState("0"),mt=`def bot(
    sender_name: str | None,
    sender_key: str | None,
    message_text: str,
    is_dm: bool,
    channel_key: str | None,
    channel_name: str | None,
    sender_timestamp: int | None,
    path: str | None,
) -> str | list[str] | None:
    """
    Process incoming messages and optionally return a reply.

    Args:
        sender_name: Display name of sender (may be None)
        sender_key: 64-char hex public key (None for channel msgs)
        message_text: The message content
        is_dm: True for direct messages, False for channel
        channel_key: 32-char hex key for channels, None for DMs
        channel_name: Channel name with hash (e.g. "#bot"), None for DMs
        sender_timestamp: Sender's timestamp (unix seconds, may be None)
        path: Hex-encoded routing path (may be None)

    Returns:
        None for no reply, a string for a single reply,
        or a list of strings to send multiple messages in order
    """
    # Example: Only respond in #bot channel to "!pling" command
    if channel_name == "#bot" and "!pling" in message_text.lower():
        return "[BOT] Plong!"
    return None`,[ot,qe]=N.useState(!1),[Ke,Qe]=N.useState(mt);N.useEffect(()=>{s&&(k(s.name),B(String(s.lat)),E(String(s.lon)),F(String(s.tx_power)),j(String(s.radio.freq)),G(String(s.radio.bw)),K(String(s.radio.sf)),Y(String(s.radio.cr)))},[s]),N.useEffect(()=>{l&&(se(String(l.max_radio_contacts)),Ee(l.auto_decrypt_dm_on_advert),at(String(l.advert_interval)),qe(l.bot_enabled),l.bot_code&&Qe(l.bot_code))},[l]),N.useEffect(()=>{n&&v()},[n,v]);const rt=N.useMemo(()=>{const Pe=parseFloat(I),_e=parseFloat(O),fe=parseInt(U,10),ve=parseInt(J,10);for(const we of g0)if(we.freq===Pe&&we.bw===_e&&we.sf===fe&&we.cr===ve)return we.name;return"custom"},[I,O,U,J]),He=Pe=>{if(Pe==="custom")return;const _e=g0.find(fe=>fe.name===Pe);_e&&(j(String(_e.freq)),G(String(_e.bw)),K(String(_e.sf)),Y(String(_e.cr)))},Et=()=>{if(!navigator.geolocation){At.error("Geolocation not supported",{description:"Your browser does not support geolocation"});return}ae(!0),navigator.geolocation.getCurrentPosition(Pe=>{B(Pe.coords.latitude.toFixed(6)),E(Pe.coords.longitude.toFixed(6)),ae(!1),At.success("Location updated")},Pe=>{ae(!1),At.error("Failed to get location",{description:Pe.message})},{enableHighAccuracy:!0,timeout:1e4})},zt=async()=>{Ae(""),te(!0);try{const Pe={lat:parseFloat(w),lon:parseFloat(b),tx_power:parseInt(T,10),radio:{freq:parseFloat(I),bw:parseFloat(O),sf:parseInt(U,10),cr:parseInt(J,10)}};await c(Pe),At.success("Radio config saved, rebooting..."),te(!1),D(!0),await g(),u()}catch(Pe){Ae(Pe instanceof Error?Pe.message:"Failed to save"),te(!1)}finally{D(!1)}},Qt=async()=>{Ae(""),te(!0);try{await c({name:M});const _e=parseInt(je,10);!isNaN(_e)&&_e!==(l==null?void 0:l.advert_interval)&&await h({advert_interval:_e}),At.success("Identity settings saved")}catch(Pe){Ae(Pe instanceof Error?Pe.message:"Failed to save")}finally{te(!1)}},Dt=async()=>{Ae(""),te(!0);try{const Pe=parseInt($,10);!isNaN(Pe)&&Pe!==(l==null?void 0:l.max_radio_contacts)&&await h({max_radio_contacts:Pe}),At.success("Serial settings saved")}catch(Pe){Ae(Pe instanceof Error?Pe.message:"Failed to save")}finally{te(!1)}},Gt=async()=>{if(!ie.trim()){Ae("Private key is required");return}Ae(""),te(!0);try{await d(ie.trim()),ge(""),At.success("Private key set, rebooting..."),te(!1),D(!0),await g(),u()}catch(Pe){Ae(Pe instanceof Error?Pe.message:"Failed to set private key"),te(!1)}finally{D(!1)}},Yt=async()=>{if(confirm("Are you sure you want to reboot the radio? The connection will drop temporarily.")){Ae(""),D(!0);try{await g(),u()}catch(Pe){Ae(Pe instanceof Error?Pe.message:"Failed to reboot radio")}finally{D(!1)}}},$t=async()=>{q(!0);try{await m()}finally{q(!1)}},Ht=async()=>{const Pe=parseInt(pe,10);if(isNaN(Pe)||Pe<1){At.error("Invalid retention days",{description:"Retention days must be at least 1"});return}Oe(!0);try{const _e=await ut.runMaintenance(Pe);At.success("Database cleanup complete",{description:`Deleted ${_e.packets_deleted} old packet${_e.packets_deleted===1?"":"s"}`}),await x()}catch(_e){console.error("Failed to run maintenance:",_e),At.error("Database cleanup failed",{description:_e instanceof Error?_e.message:"Unknown error"})}finally{Oe(!1)}},Rt=async()=>{te(!0),Ae("");try{await h({auto_decrypt_dm_on_advert:Xe}),At.success("Database settings saved")}catch(Pe){console.error("Failed to save database settings:",Pe),Ae(Pe instanceof Error?Pe.message:"Failed to save"),At.error("Failed to save settings")}finally{te(!1)}},Vt=async()=>{te(!0),Ae("");try{await h({bot_enabled:ot,bot_code:Ke}),At.success("Bot settings saved")}catch(Pe){console.error("Failed to save bot settings:",Pe),Ae(Pe instanceof Error?Pe.message:"Failed to save"),At.error("Failed to save settings")}finally{te(!1)}};return _.jsx(Q0,{open:n,onOpenChange:Pe=>!Pe&&u(),children:_.jsxs(md,{className:"sm:max-w-[50vw] sm:min-w-[500px] max-h-[90vh] overflow-y-auto",children:[_.jsxs(gd,{children:[_.jsx(xd,{children:"Radio & Settings"}),_.jsxs(vd,{className:"sr-only",children:[C==="radio"&&"Configure radio frequency, power, and location settings",C==="identity"&&"Manage radio name, public key, private key, and advertising settings",C==="serial"&&"View serial port connection and configure contact sync",C==="database"&&"View database statistics and clean up old packets",C==="advertise"&&"Send a flood advertisement to announce your presence",C==="bot"&&"Configure automatic message bot with Python code"]})]}),s?_.jsxs(J0,{value:C,onValueChange:Pe=>P(Pe),className:"w-full",children:[_.jsxs(yd,{className:"grid w-full grid-cols-6",children:[_.jsx(dr,{value:"radio",children:"Radio"}),_.jsx(dr,{value:"identity",children:"Identity"}),_.jsx(dr,{value:"serial",children:"Serial"}),_.jsx(dr,{value:"database",children:"Database"}),_.jsx(dr,{value:"advertise",children:"Advertise"}),_.jsx(dr,{value:"bot",children:"Bot"})]}),_.jsxs(fr,{value:"radio",className:"space-y-4 mt-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx(jt,{htmlFor:"preset",children:"Preset"}),_.jsxs("select",{id:"preset",value:rt,onChange:Pe=>He(Pe.target.value),className:"w-full h-10 px-3 rounded-md border border-input bg-background text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:[_.jsx("option",{value:"custom",children:"Custom"}),g0.map(Pe=>_.jsx("option",{value:Pe.name,children:Pe.name},Pe.name))]})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx(jt,{htmlFor:"freq",children:"Frequency (MHz)"}),_.jsx(on,{id:"freq",type:"number",step:"any",value:I,onChange:Pe=>j(Pe.target.value)})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(jt,{htmlFor:"bw",children:"Bandwidth (kHz)"}),_.jsx(on,{id:"bw",type:"number",step:"any",value:O,onChange:Pe=>G(Pe.target.value)})]})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx(jt,{htmlFor:"sf",children:"Spreading Factor"}),_.jsx(on,{id:"sf",type:"number",min:"7",max:"12",value:U,onChange:Pe=>K(Pe.target.value)})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(jt,{htmlFor:"cr",children:"Coding Rate"}),_.jsx(on,{id:"cr",type:"number",min:"5",max:"8",value:J,onChange:Pe=>Y(Pe.target.value)})]})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx(jt,{htmlFor:"tx-power",children:"TX Power (dBm)"}),_.jsx(on,{id:"tx-power",type:"number",value:T,onChange:Pe=>F(Pe.target.value)})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(jt,{htmlFor:"max-tx",children:"Max TX Power"}),_.jsx(on,{id:"max-tx",type:"number",value:s.max_tx_power,disabled:!0})]})]}),_.jsx(vo,{}),_.jsxs("div",{className:"space-y-2",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx(jt,{children:"Location"}),_.jsx(mn,{type:"button",variant:"outline",size:"sm",onClick:Et,disabled:Q,children:Q?"Getting...":" Use My Location"})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx(jt,{htmlFor:"lat",className:"text-xs text-muted-foreground",children:"Latitude"}),_.jsx(on,{id:"lat",type:"number",step:"any",value:w,onChange:Pe=>B(Pe.target.value)})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(jt,{htmlFor:"lon",className:"text-xs text-muted-foreground",children:"Longitude"}),_.jsx(on,{id:"lon",type:"number",step:"any",value:b,onChange:Pe=>E(Pe.target.value)})]})]})]}),ce&&_.jsx("div",{className:"text-sm text-destructive",children:ce}),_.jsx(mn,{onClick:zt,disabled:W||Z,className:"w-full",children:W||Z?"Saving & Rebooting...":"Save Radio Config & Reboot"})]}),_.jsxs(fr,{value:"identity",className:"space-y-4 mt-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx(jt,{htmlFor:"public-key",children:"Public Key"}),_.jsx(on,{id:"public-key",value:s.public_key,disabled:!0,className:"font-mono text-xs"})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(jt,{htmlFor:"name",children:"Radio Name"}),_.jsx(on,{id:"name",value:M,onChange:Pe=>k(Pe.target.value)})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(jt,{htmlFor:"advert-interval",children:"Periodic Advertising Interval"}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(on,{id:"advert-interval",type:"number",min:"0",value:je,onChange:Pe=>at(Pe.target.value),className:"w-28"}),_.jsx("span",{className:"text-sm text-muted-foreground",children:"seconds (0 = off)"})]}),_.jsx("p",{className:"text-xs text-muted-foreground",children:"How often to automatically advertise presence. Set to 0 to disable. Recommended: 86400 (24 hours) or higher."})]}),_.jsx(mn,{onClick:Qt,disabled:W,className:"w-full",children:W?"Saving...":"Save Identity Settings"}),_.jsx(vo,{}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(jt,{htmlFor:"private-key",children:"Set Private Key (write-only)"}),_.jsx(on,{id:"private-key",type:"password",autoComplete:"off",value:ie,onChange:Pe=>ge(Pe.target.value),placeholder:"64-character hex private key"}),_.jsx(mn,{onClick:Gt,disabled:W||Z||!ie.trim(),className:"w-full",children:W||Z?"Setting & Rebooting...":"Set Private Key & Reboot"})]}),ce&&_.jsx("div",{className:"text-sm text-destructive",children:ce})]}),_.jsxs(fr,{value:"serial",className:"space-y-4 mt-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx(jt,{children:"Serial Port"}),i!=null&&i.serial_port?_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),_.jsx("code",{className:"px-2 py-1 bg-muted rounded text-foreground text-sm",children:i.serial_port})]}):_.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[_.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500"}),_.jsx("span",{children:"Not connected"})]})]}),_.jsx(vo,{}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(jt,{htmlFor:"max-contacts",children:"Max Contacts on Radio"}),_.jsx(on,{id:"max-contacts",type:"number",min:"1",max:"1000",value:$,onChange:Pe=>se(Pe.target.value)}),_.jsx("p",{className:"text-xs text-muted-foreground",children:"Recent non-repeater contacts loaded to radio for DM auto-ACK (1-1000)"})]}),_.jsx(mn,{onClick:Dt,disabled:W,className:"w-full",children:W?"Saving...":"Save Settings"}),_.jsx(vo,{}),_.jsx(mn,{variant:"outline",onClick:Yt,disabled:Z||W,className:"w-full border-red-500/50 text-red-400 hover:bg-red-500/10",children:Z?"Rebooting...":"Reboot Radio"}),ce&&_.jsx("div",{className:"text-sm text-destructive",children:ce})]}),_.jsxs(fr,{value:"database",className:"space-y-4 mt-4",children:[_.jsxs("div",{className:"space-y-3",children:[_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("span",{className:"text-sm text-muted-foreground",children:"Database size"}),_.jsxs("span",{className:"font-medium",children:[(i==null?void 0:i.database_size_mb)??"?"," MB"]})]}),i!=null&&i.oldest_undecrypted_timestamp?_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("span",{className:"text-sm text-muted-foreground",children:"Oldest undecrypted packet"}),_.jsxs("span",{className:"font-medium",children:[oa(i.oldest_undecrypted_timestamp),_.jsxs("span",{className:"text-muted-foreground ml-1",children:["(",Math.floor((Date.now()/1e3-i.oldest_undecrypted_timestamp)/86400)," ","days old)"]})]})]}):_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("span",{className:"text-sm text-muted-foreground",children:"Oldest undecrypted packet"}),_.jsx("span",{className:"text-muted-foreground",children:"None"})]})]}),_.jsx(vo,{}),_.jsxs("div",{className:"space-y-3",children:[_.jsx(jt,{children:"Cleanup Old Packets"}),_.jsx("p",{className:"text-xs text-muted-foreground",children:"Delete undecrypted packets older than the specified days. This helps manage storage for packets that couldn't be decrypted (unknown channel keys)."}),_.jsxs("div",{className:"flex gap-2 items-end",children:[_.jsxs("div",{className:"space-y-1",children:[_.jsx(jt,{htmlFor:"retention-days",className:"text-xs",children:"Days to retain"}),_.jsx(on,{id:"retention-days",type:"number",min:"1",max:"365",value:pe,onChange:Pe=>xe(Pe.target.value),className:"w-24"})]}),_.jsx(mn,{variant:"outline",onClick:Ht,disabled:Be,children:Be?"Cleaning...":"Cleanup"})]})]}),_.jsx(vo,{}),_.jsxs("div",{className:"space-y-3",children:[_.jsx(jt,{children:"DM Decryption"}),_.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[_.jsx("input",{type:"checkbox",checked:Xe,onChange:Pe=>Ee(Pe.target.checked),className:"w-4 h-4 rounded border-input accent-primary"}),_.jsx("span",{className:"text-sm",children:"Auto-decrypt historical DMs when new contact advertises"})]}),_.jsx("p",{className:"text-xs text-muted-foreground",children:"When enabled, the server will automatically try to decrypt stored DM packets when a new contact sends an advertisement. This may cause brief delays on large packet backlogs."})]}),ce&&_.jsx("div",{className:"text-sm text-destructive",children:ce}),_.jsx(mn,{onClick:Rt,disabled:W,className:"w-full",children:W?"Saving...":"Save Settings"})]}),_.jsx(fr,{value:"advertise",className:"space-y-4 mt-4",children:_.jsxs("div",{className:"text-center py-8",children:[_.jsx("p",{className:"text-muted-foreground mb-6",children:"Send a flood advertisement to announce your presence on the mesh network."}),_.jsx(mn,{size:"lg",onClick:$t,disabled:H||!(i!=null&&i.radio_connected),className:"bg-green-600 hover:bg-green-700 text-white px-12 py-6 text-lg",children:H?"Sending...":"Send Advertisement"}),!(i!=null&&i.radio_connected)&&_.jsx("p",{className:"text-sm text-destructive mt-4",children:"Radio not connected"})]})}),_.jsxs(fr,{value:"bot",className:"space-y-4 mt-4",children:[_.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-md",children:_.jsxs("p",{className:"text-sm text-red-500",children:[_.jsx("strong",{children:"Experimental:"})," This is an alpha feature and introduces automated message sending to your radio; unexpected behavior may occur. Use with caution, and please report any bugs!"]})}),_.jsx("div",{className:"p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-md",children:_.jsxs("p",{className:"text-sm text-yellow-500",children:[_.jsx("strong",{children:"Security Warning:"})," This feature executes arbitrary Python code on the server. Only enable if you understand the security implications."]})}),_.jsx("div",{className:"space-y-3",children:_.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[_.jsx("input",{type:"checkbox",checked:ot,onChange:Pe=>qe(Pe.target.checked),className:"w-4 h-4 rounded border-input accent-primary"}),_.jsx("span",{className:"text-sm font-medium",children:"Enable Message Bot"})]})}),_.jsx(vo,{}),_.jsxs("div",{className:"space-y-2",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx(jt,{htmlFor:"bot-code",children:"Bot Code (Python)"}),_.jsx(mn,{type:"button",variant:"outline",size:"sm",onClick:()=>Qe(mt),disabled:!ot,children:"Reset to Example"})]}),_.jsxs("p",{className:"text-xs text-muted-foreground",children:["Define a ",_.jsx("code",{className:"bg-muted px-1 rounded",children:"bot()"})," function that receives message data and optionally returns a reply string."]}),_.jsx("div",{className:`rounded-md border border-input bg-[#2d2d2d] overflow-auto h-64 ${ot?"":"opacity-50 pointer-events-none"}`,children:_.jsx(P2,{value:Ke,onValueChange:Qe,highlight:Pe=>Vm.highlight(Pe,Vm.languages.python,"python"),padding:12,style:{fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace",fontSize:13,minHeight:"100%"},textareaId:"bot-code",disabled:!ot})})]}),_.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[_.jsxs("p",{children:[_.jsx("strong",{children:"Available:"})," Standard Python libraries and any modules installed in the server environment."]}),_.jsxs("p",{children:[_.jsx("strong",{children:"Limits:"})," 10 second timeout, max 3 concurrent executions."]}),_.jsxs("p",{children:[_.jsx("strong",{children:"Note:"})," Bot only responds to incoming messages, not your own. For channel messages, ",_.jsx("code",{children:"sender_key"})," is ",_.jsx("code",{children:"None"}),"."]})]}),ce&&_.jsx("div",{className:"text-sm text-destructive",children:ce}),_.jsx(mn,{onClick:Vt,disabled:W,className:"w-full",children:W?"Saving...":"Save Bot Settings"})]})]}):_.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"Loading configuration..."})]})})}var Ti={},rl={},kn={},qm;function pr(){if(qm)return kn;qm=1,Object.defineProperty(kn,"__esModule",{value:!0}),kn.RequestType=kn.AdvertFlags=kn.DeviceRole=kn.PayloadVersion=kn.ControlSubType=kn.PayloadType=kn.RouteType=void 0;var n;(function(d){d[d.TransportFlood=0]="TransportFlood",d[d.Flood=1]="Flood",d[d.Direct=2]="Direct",d[d.TransportDirect=3]="TransportDirect"})(n||(kn.RouteType=n={}));var s;(function(d){d[d.Request=0]="Request",d[d.Response=1]="Response",d[d.TextMessage=2]="TextMessage",d[d.Ack=3]="Ack",d[d.Advert=4]="Advert",d[d.GroupText=5]="GroupText",d[d.GroupData=6]="GroupData",d[d.AnonRequest=7]="AnonRequest",d[d.Path=8]="Path",d[d.Trace=9]="Trace",d[d.Multipart=10]="Multipart",d[d.Control=11]="Control",d[d.RawCustom=15]="RawCustom"})(s||(kn.PayloadType=s={}));var i;(function(d){d[d.NodeDiscoverReq=128]="NodeDiscoverReq",d[d.NodeDiscoverResp=144]="NodeDiscoverResp"})(i||(kn.ControlSubType=i={}));var l;(function(d){d[d.Version1=0]="Version1",d[d.Version2=1]="Version2",d[d.Version3=2]="Version3",d[d.Version4=3]="Version4"})(l||(kn.PayloadVersion=l={}));var u;(function(d){d[d.Unknown=0]="Unknown",d[d.ChatNode=1]="ChatNode",d[d.Repeater=2]="Repeater",d[d.RoomServer=3]="RoomServer",d[d.Sensor=4]="Sensor"})(u||(kn.DeviceRole=u={}));var c;(function(d){d[d.HasLocation=16]="HasLocation",d[d.HasFeature1=32]="HasFeature1",d[d.HasFeature2=64]="HasFeature2",d[d.HasName=128]="HasName"})(c||(kn.AdvertFlags=c={}));var h;return(function(d){d[d.GetStats=1]="GetStats",d[d.Keepalive=2]="Keepalive",d[d.GetTelemetryData=3]="GetTelemetryData",d[d.GetMinMaxAvgData=4]="GetMinMaxAvgData",d[d.GetAccessList=5]="GetAccessList"})(h||(kn.RequestType=h={})),kn}var Yo={},Gm;function Sn(){if(Gm)return Yo;Gm=1,Object.defineProperty(Yo,"__esModule",{value:!0}),Yo.byteToHex=n,Yo.bytesToHex=s,Yo.numberToHex=i,Yo.hexToBytes=l;function n(u){return u.toString(16).padStart(2,"0").toUpperCase()}function s(u){return Array.from(u).map(n).join("")}function i(u,c=8){return(u>>>0).toString(16).padStart(c,"0").toUpperCase()}function l(u){const c=u.replace(/\s/g,"").toUpperCase();if(!/^[0-9A-F]*$/.test(c))throw new Error("Invalid hex string: invalid characters at position 0");if(c.length%2!==0)throw new Error("Invalid hex string: odd length");const h=new Uint8Array(c.length/2);for(let d=0;d<c.length;d+=2)h[d/2]=parseInt(c.substr(d,2),16);return h}return Yo}var Di={},$m;function bl(){if($m)return Di;$m=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.getRouteTypeName=s,Di.getPayloadTypeName=i,Di.getPayloadVersionName=l,Di.getDeviceRoleName=u,Di.getRequestTypeName=c,Di.getControlSubTypeName=h;const n=pr();function s(d){switch(d){case n.RouteType.Flood:return"Flood";case n.RouteType.Direct:return"Direct";case n.RouteType.TransportFlood:return"TransportFlood";case n.RouteType.TransportDirect:return"TransportDirect";default:return`Unknown (${d})`}}function i(d){switch(d){case n.PayloadType.RawCustom:return"RawCustom";case n.PayloadType.Trace:return"Trace";case n.PayloadType.Advert:return"Advert";case n.PayloadType.GroupText:return"GroupText";case n.PayloadType.GroupData:return"GroupData";case n.PayloadType.Request:return"Request";case n.PayloadType.Response:return"Response";case n.PayloadType.TextMessage:return"TextMessage";case n.PayloadType.AnonRequest:return"AnonRequest";case n.PayloadType.Ack:return"Ack";case n.PayloadType.Path:return"Path";case n.PayloadType.Multipart:return"Multipart";case n.PayloadType.Control:return"Control";default:return`Unknown (0x${d.toString(16)})`}}function l(d){switch(d){case n.PayloadVersion.Version1:return"Version 1";case n.PayloadVersion.Version2:return"Version 2";case n.PayloadVersion.Version3:return"Version 3";case n.PayloadVersion.Version4:return"Version 4";default:return`Unknown (${d})`}}function u(d){switch(d){case n.DeviceRole.Unknown:return"Unknown";case n.DeviceRole.ChatNode:return"Chat Node";case n.DeviceRole.Repeater:return"Repeater";case n.DeviceRole.RoomServer:return"Room Server";case n.DeviceRole.Sensor:return"Sensor";default:return`Unknown (${d})`}}function c(d){switch(d){case n.RequestType.GetStats:return"Get Stats";case n.RequestType.Keepalive:return"Keepalive (deprecated)";case n.RequestType.GetTelemetryData:return"Get Telemetry Data";case n.RequestType.GetMinMaxAvgData:return"Get Min/Max/Avg Data";case n.RequestType.GetAccessList:return"Get Access List";default:return`Unknown (${d})`}}function h(d){switch(d){case n.ControlSubType.NodeDiscoverReq:return"Node Discover Request";case n.ControlSubType.NodeDiscoverResp:return"Node Discover Response";default:return`Unknown (0x${d.toString(16)})`}}return Di}var il={},ol={},uc={exports:{}};function P0(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var cc={exports:{}};const O2={},j2=Object.freeze(Object.defineProperty({__proto__:null,default:O2},Symbol.toStringTag,{value:"Module"})),ed=Cx(j2);var z2=cc.exports,Km;function _t(){return Km||(Km=1,(function(n,s){(function(i,l){n.exports=l()})(z2,function(){var i=i||(function(l,u){var c;if(typeof window<"u"&&window.crypto&&(c=window.crypto),typeof self<"u"&&self.crypto&&(c=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(c=globalThis.crypto),!c&&typeof window<"u"&&window.msCrypto&&(c=window.msCrypto),!c&&typeof _l<"u"&&_l.crypto&&(c=_l.crypto),!c&&typeof P0=="function")try{c=ed}catch{}var h=function(){if(c){if(typeof c.getRandomValues=="function")try{return c.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof c.randomBytes=="function")try{return c.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},d=Object.create||(function(){function b(){}return function(E){var T;return b.prototype=E,T=new b,b.prototype=null,T}})(),g={},m=g.lib={},x=m.Base=(function(){return{extend:function(b){var E=d(this);return b&&E.mixIn(b),(!E.hasOwnProperty("init")||this.init===E.init)&&(E.init=function(){E.$super.init.apply(this,arguments)}),E.init.prototype=E,E.$super=this,E},create:function(){var b=this.extend();return b.init.apply(b,arguments),b},init:function(){},mixIn:function(b){for(var E in b)b.hasOwnProperty(E)&&(this[E]=b[E]);b.hasOwnProperty("toString")&&(this.toString=b.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),v=m.WordArray=x.extend({init:function(b,E){b=this.words=b||[],E!=u?this.sigBytes=E:this.sigBytes=b.length*4},toString:function(b){return(b||P).stringify(this)},concat:function(b){var E=this.words,T=b.words,F=this.sigBytes,I=b.sigBytes;if(this.clamp(),F%4)for(var j=0;j<I;j++){var O=T[j>>>2]>>>24-j%4*8&255;E[F+j>>>2]|=O<<24-(F+j)%4*8}else for(var G=0;G<I;G+=4)E[F+G>>>2]=T[G>>>2];return this.sigBytes+=I,this},clamp:function(){var b=this.words,E=this.sigBytes;b[E>>>2]&=4294967295<<32-E%4*8,b.length=l.ceil(E/4)},clone:function(){var b=x.clone.call(this);return b.words=this.words.slice(0),b},random:function(b){for(var E=[],T=0;T<b;T+=4)E.push(h());return new v.init(E,b)}}),C=g.enc={},P=C.Hex={stringify:function(b){for(var E=b.words,T=b.sigBytes,F=[],I=0;I<T;I++){var j=E[I>>>2]>>>24-I%4*8&255;F.push((j>>>4).toString(16)),F.push((j&15).toString(16))}return F.join("")},parse:function(b){for(var E=b.length,T=[],F=0;F<E;F+=2)T[F>>>3]|=parseInt(b.substr(F,2),16)<<24-F%8*4;return new v.init(T,E/2)}},M=C.Latin1={stringify:function(b){for(var E=b.words,T=b.sigBytes,F=[],I=0;I<T;I++){var j=E[I>>>2]>>>24-I%4*8&255;F.push(String.fromCharCode(j))}return F.join("")},parse:function(b){for(var E=b.length,T=[],F=0;F<E;F++)T[F>>>2]|=(b.charCodeAt(F)&255)<<24-F%4*8;return new v.init(T,E)}},k=C.Utf8={stringify:function(b){try{return decodeURIComponent(escape(M.stringify(b)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(b){return M.parse(unescape(encodeURIComponent(b)))}},w=m.BufferedBlockAlgorithm=x.extend({reset:function(){this._data=new v.init,this._nDataBytes=0},_append:function(b){typeof b=="string"&&(b=k.parse(b)),this._data.concat(b),this._nDataBytes+=b.sigBytes},_process:function(b){var E,T=this._data,F=T.words,I=T.sigBytes,j=this.blockSize,O=j*4,G=I/O;b?G=l.ceil(G):G=l.max((G|0)-this._minBufferSize,0);var U=G*j,K=l.min(U*4,I);if(U){for(var J=0;J<U;J+=j)this._doProcessBlock(F,J);E=F.splice(0,U),T.sigBytes-=K}return new v.init(E,K)},clone:function(){var b=x.clone.call(this);return b._data=this._data.clone(),b},_minBufferSize:0});m.Hasher=w.extend({cfg:x.extend(),init:function(b){this.cfg=this.cfg.extend(b),this.reset()},reset:function(){w.reset.call(this),this._doReset()},update:function(b){return this._append(b),this._process(),this},finalize:function(b){b&&this._append(b);var E=this._doFinalize();return E},blockSize:16,_createHelper:function(b){return function(E,T){return new b.init(T).finalize(E)}},_createHmacHelper:function(b){return function(E,T){return new B.HMAC.init(b,T).finalize(E)}}});var B=g.algo={};return g})(Math);return i})})(cc)),cc.exports}var dc={exports:{}},H2=dc.exports,Qm;function wd(){return Qm||(Qm=1,(function(n,s){(function(i,l){n.exports=l(_t())})(H2,function(i){return(function(l){var u=i,c=u.lib,h=c.Base,d=c.WordArray,g=u.x64={};g.Word=h.extend({init:function(m,x){this.high=m,this.low=x}}),g.WordArray=h.extend({init:function(m,x){m=this.words=m||[],x!=l?this.sigBytes=x:this.sigBytes=m.length*8},toX32:function(){for(var m=this.words,x=m.length,v=[],C=0;C<x;C++){var P=m[C];v.push(P.high),v.push(P.low)}return d.create(v,this.sigBytes)},clone:function(){for(var m=h.clone.call(this),x=m.words=this.words.slice(0),v=x.length,C=0;C<v;C++)x[C]=x[C].clone();return m}})})(),i})})(dc)),dc.exports}var fc={exports:{}},V2=fc.exports,Ym;function U2(){return Ym||(Ym=1,(function(n,s){(function(i,l){n.exports=l(_t())})(V2,function(i){return(function(){if(typeof ArrayBuffer=="function"){var l=i,u=l.lib,c=u.WordArray,h=c.init,d=c.init=function(g){if(g instanceof ArrayBuffer&&(g=new Uint8Array(g)),(g instanceof Int8Array||typeof Uint8ClampedArray<"u"&&g instanceof Uint8ClampedArray||g instanceof Int16Array||g instanceof Uint16Array||g instanceof Int32Array||g instanceof Uint32Array||g instanceof Float32Array||g instanceof Float64Array)&&(g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength)),g instanceof Uint8Array){for(var m=g.byteLength,x=[],v=0;v<m;v++)x[v>>>2]|=g[v]<<24-v%4*8;h.call(this,x,m)}else h.apply(this,arguments)};d.prototype=c}})(),i.lib.WordArray})})(fc)),fc.exports}var hc={exports:{}},Z2=hc.exports,Xm;function W2(){return Xm||(Xm=1,(function(n,s){(function(i,l){n.exports=l(_t())})(Z2,function(i){return(function(){var l=i,u=l.lib,c=u.WordArray,h=l.enc;h.Utf16=h.Utf16BE={stringify:function(g){for(var m=g.words,x=g.sigBytes,v=[],C=0;C<x;C+=2){var P=m[C>>>2]>>>16-C%4*8&65535;v.push(String.fromCharCode(P))}return v.join("")},parse:function(g){for(var m=g.length,x=[],v=0;v<m;v++)x[v>>>1]|=g.charCodeAt(v)<<16-v%2*16;return c.create(x,m*2)}},h.Utf16LE={stringify:function(g){for(var m=g.words,x=g.sigBytes,v=[],C=0;C<x;C+=2){var P=d(m[C>>>2]>>>16-C%4*8&65535);v.push(String.fromCharCode(P))}return v.join("")},parse:function(g){for(var m=g.length,x=[],v=0;v<m;v++)x[v>>>1]|=d(g.charCodeAt(v)<<16-v%2*16);return c.create(x,m*2)}};function d(g){return g<<8&4278255360|g>>>8&16711935}})(),i.enc.Utf16})})(hc)),hc.exports}var pc={exports:{}},q2=pc.exports,Jm;function us(){return Jm||(Jm=1,(function(n,s){(function(i,l){n.exports=l(_t())})(q2,function(i){return(function(){var l=i,u=l.lib,c=u.WordArray,h=l.enc;h.Base64={stringify:function(g){var m=g.words,x=g.sigBytes,v=this._map;g.clamp();for(var C=[],P=0;P<x;P+=3)for(var M=m[P>>>2]>>>24-P%4*8&255,k=m[P+1>>>2]>>>24-(P+1)%4*8&255,w=m[P+2>>>2]>>>24-(P+2)%4*8&255,B=M<<16|k<<8|w,b=0;b<4&&P+b*.75<x;b++)C.push(v.charAt(B>>>6*(3-b)&63));var E=v.charAt(64);if(E)for(;C.length%4;)C.push(E);return C.join("")},parse:function(g){var m=g.length,x=this._map,v=this._reverseMap;if(!v){v=this._reverseMap=[];for(var C=0;C<x.length;C++)v[x.charCodeAt(C)]=C}var P=x.charAt(64);if(P){var M=g.indexOf(P);M!==-1&&(m=M)}return d(g,m,v)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function d(g,m,x){for(var v=[],C=0,P=0;P<m;P++)if(P%4){var M=x[g.charCodeAt(P-1)]<<P%4*2,k=x[g.charCodeAt(P)]>>>6-P%4*2,w=M|k;v[C>>>2]|=w<<24-C%4*8,C++}return c.create(v,C)}})(),i.enc.Base64})})(pc)),pc.exports}var mc={exports:{}},G2=mc.exports,eg;function $2(){return eg||(eg=1,(function(n,s){(function(i,l){n.exports=l(_t())})(G2,function(i){return(function(){var l=i,u=l.lib,c=u.WordArray,h=l.enc;h.Base64url={stringify:function(g,m){m===void 0&&(m=!0);var x=g.words,v=g.sigBytes,C=m?this._safe_map:this._map;g.clamp();for(var P=[],M=0;M<v;M+=3)for(var k=x[M>>>2]>>>24-M%4*8&255,w=x[M+1>>>2]>>>24-(M+1)%4*8&255,B=x[M+2>>>2]>>>24-(M+2)%4*8&255,b=k<<16|w<<8|B,E=0;E<4&&M+E*.75<v;E++)P.push(C.charAt(b>>>6*(3-E)&63));var T=C.charAt(64);if(T)for(;P.length%4;)P.push(T);return P.join("")},parse:function(g,m){m===void 0&&(m=!0);var x=g.length,v=m?this._safe_map:this._map,C=this._reverseMap;if(!C){C=this._reverseMap=[];for(var P=0;P<v.length;P++)C[v.charCodeAt(P)]=P}var M=v.charAt(64);if(M){var k=g.indexOf(M);k!==-1&&(x=k)}return d(g,x,C)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function d(g,m,x){for(var v=[],C=0,P=0;P<m;P++)if(P%4){var M=x[g.charCodeAt(P-1)]<<P%4*2,k=x[g.charCodeAt(P)]>>>6-P%4*2,w=M|k;v[C>>>2]|=w<<24-C%4*8,C++}return c.create(v,C)}})(),i.enc.Base64url})})(mc)),mc.exports}var gc={exports:{}},K2=gc.exports,tg;function cs(){return tg||(tg=1,(function(n,s){(function(i,l){n.exports=l(_t())})(K2,function(i){return(function(l){var u=i,c=u.lib,h=c.WordArray,d=c.Hasher,g=u.algo,m=[];(function(){for(var k=0;k<64;k++)m[k]=l.abs(l.sin(k+1))*4294967296|0})();var x=g.MD5=d.extend({_doReset:function(){this._hash=new h.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(k,w){for(var B=0;B<16;B++){var b=w+B,E=k[b];k[b]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360}var T=this._hash.words,F=k[w+0],I=k[w+1],j=k[w+2],O=k[w+3],G=k[w+4],U=k[w+5],K=k[w+6],J=k[w+7],Y=k[w+8],ie=k[w+9],ge=k[w+10],$=k[w+11],se=k[w+12],W=k[w+13],te=k[w+14],Z=k[w+15],D=T[0],H=T[1],q=T[2],Q=T[3];D=v(D,H,q,Q,F,7,m[0]),Q=v(Q,D,H,q,I,12,m[1]),q=v(q,Q,D,H,j,17,m[2]),H=v(H,q,Q,D,O,22,m[3]),D=v(D,H,q,Q,G,7,m[4]),Q=v(Q,D,H,q,U,12,m[5]),q=v(q,Q,D,H,K,17,m[6]),H=v(H,q,Q,D,J,22,m[7]),D=v(D,H,q,Q,Y,7,m[8]),Q=v(Q,D,H,q,ie,12,m[9]),q=v(q,Q,D,H,ge,17,m[10]),H=v(H,q,Q,D,$,22,m[11]),D=v(D,H,q,Q,se,7,m[12]),Q=v(Q,D,H,q,W,12,m[13]),q=v(q,Q,D,H,te,17,m[14]),H=v(H,q,Q,D,Z,22,m[15]),D=C(D,H,q,Q,I,5,m[16]),Q=C(Q,D,H,q,K,9,m[17]),q=C(q,Q,D,H,$,14,m[18]),H=C(H,q,Q,D,F,20,m[19]),D=C(D,H,q,Q,U,5,m[20]),Q=C(Q,D,H,q,ge,9,m[21]),q=C(q,Q,D,H,Z,14,m[22]),H=C(H,q,Q,D,G,20,m[23]),D=C(D,H,q,Q,ie,5,m[24]),Q=C(Q,D,H,q,te,9,m[25]),q=C(q,Q,D,H,O,14,m[26]),H=C(H,q,Q,D,Y,20,m[27]),D=C(D,H,q,Q,W,5,m[28]),Q=C(Q,D,H,q,j,9,m[29]),q=C(q,Q,D,H,J,14,m[30]),H=C(H,q,Q,D,se,20,m[31]),D=P(D,H,q,Q,U,4,m[32]),Q=P(Q,D,H,q,Y,11,m[33]),q=P(q,Q,D,H,$,16,m[34]),H=P(H,q,Q,D,te,23,m[35]),D=P(D,H,q,Q,I,4,m[36]),Q=P(Q,D,H,q,G,11,m[37]),q=P(q,Q,D,H,J,16,m[38]),H=P(H,q,Q,D,ge,23,m[39]),D=P(D,H,q,Q,W,4,m[40]),Q=P(Q,D,H,q,F,11,m[41]),q=P(q,Q,D,H,O,16,m[42]),H=P(H,q,Q,D,K,23,m[43]),D=P(D,H,q,Q,ie,4,m[44]),Q=P(Q,D,H,q,se,11,m[45]),q=P(q,Q,D,H,Z,16,m[46]),H=P(H,q,Q,D,j,23,m[47]),D=M(D,H,q,Q,F,6,m[48]),Q=M(Q,D,H,q,J,10,m[49]),q=M(q,Q,D,H,te,15,m[50]),H=M(H,q,Q,D,U,21,m[51]),D=M(D,H,q,Q,se,6,m[52]),Q=M(Q,D,H,q,O,10,m[53]),q=M(q,Q,D,H,ge,15,m[54]),H=M(H,q,Q,D,I,21,m[55]),D=M(D,H,q,Q,Y,6,m[56]),Q=M(Q,D,H,q,Z,10,m[57]),q=M(q,Q,D,H,K,15,m[58]),H=M(H,q,Q,D,W,21,m[59]),D=M(D,H,q,Q,G,6,m[60]),Q=M(Q,D,H,q,$,10,m[61]),q=M(q,Q,D,H,j,15,m[62]),H=M(H,q,Q,D,ie,21,m[63]),T[0]=T[0]+D|0,T[1]=T[1]+H|0,T[2]=T[2]+q|0,T[3]=T[3]+Q|0},_doFinalize:function(){var k=this._data,w=k.words,B=this._nDataBytes*8,b=k.sigBytes*8;w[b>>>5]|=128<<24-b%32;var E=l.floor(B/4294967296),T=B;w[(b+64>>>9<<4)+15]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,w[(b+64>>>9<<4)+14]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,k.sigBytes=(w.length+1)*4,this._process();for(var F=this._hash,I=F.words,j=0;j<4;j++){var O=I[j];I[j]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360}return F},clone:function(){var k=d.clone.call(this);return k._hash=this._hash.clone(),k}});function v(k,w,B,b,E,T,F){var I=k+(w&B|~w&b)+E+F;return(I<<T|I>>>32-T)+w}function C(k,w,B,b,E,T,F){var I=k+(w&b|B&~b)+E+F;return(I<<T|I>>>32-T)+w}function P(k,w,B,b,E,T,F){var I=k+(w^B^b)+E+F;return(I<<T|I>>>32-T)+w}function M(k,w,B,b,E,T,F){var I=k+(B^(w|~b))+E+F;return(I<<T|I>>>32-T)+w}u.MD5=d._createHelper(x),u.HmacMD5=d._createHmacHelper(x)})(Math),i.MD5})})(gc)),gc.exports}var xc={exports:{}},Q2=xc.exports,ng;function oA(){return ng||(ng=1,(function(n,s){(function(i,l){n.exports=l(_t())})(Q2,function(i){return(function(){var l=i,u=l.lib,c=u.WordArray,h=u.Hasher,d=l.algo,g=[],m=d.SHA1=h.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(x,v){for(var C=this._hash.words,P=C[0],M=C[1],k=C[2],w=C[3],B=C[4],b=0;b<80;b++){if(b<16)g[b]=x[v+b]|0;else{var E=g[b-3]^g[b-8]^g[b-14]^g[b-16];g[b]=E<<1|E>>>31}var T=(P<<5|P>>>27)+B+g[b];b<20?T+=(M&k|~M&w)+1518500249:b<40?T+=(M^k^w)+1859775393:b<60?T+=(M&k|M&w|k&w)-1894007588:T+=(M^k^w)-899497514,B=w,w=k,k=M<<30|M>>>2,M=P,P=T}C[0]=C[0]+P|0,C[1]=C[1]+M|0,C[2]=C[2]+k|0,C[3]=C[3]+w|0,C[4]=C[4]+B|0},_doFinalize:function(){var x=this._data,v=x.words,C=this._nDataBytes*8,P=x.sigBytes*8;return v[P>>>5]|=128<<24-P%32,v[(P+64>>>9<<4)+14]=Math.floor(C/4294967296),v[(P+64>>>9<<4)+15]=C,x.sigBytes=v.length*4,this._process(),this._hash},clone:function(){var x=h.clone.call(this);return x._hash=this._hash.clone(),x}});l.SHA1=h._createHelper(m),l.HmacSHA1=h._createHmacHelper(m)})(),i.SHA1})})(xc)),xc.exports}var vc={exports:{}},Y2=vc.exports,rg;function Tl(){return rg||(rg=1,(function(n,s){(function(i,l){n.exports=l(_t())})(Y2,function(i){return(function(l){var u=i,c=u.lib,h=c.WordArray,d=c.Hasher,g=u.algo,m=[],x=[];(function(){function P(B){for(var b=l.sqrt(B),E=2;E<=b;E++)if(!(B%E))return!1;return!0}function M(B){return(B-(B|0))*4294967296|0}for(var k=2,w=0;w<64;)P(k)&&(w<8&&(m[w]=M(l.pow(k,1/2))),x[w]=M(l.pow(k,1/3)),w++),k++})();var v=[],C=g.SHA256=d.extend({_doReset:function(){this._hash=new h.init(m.slice(0))},_doProcessBlock:function(P,M){for(var k=this._hash.words,w=k[0],B=k[1],b=k[2],E=k[3],T=k[4],F=k[5],I=k[6],j=k[7],O=0;O<64;O++){if(O<16)v[O]=P[M+O]|0;else{var G=v[O-15],U=(G<<25|G>>>7)^(G<<14|G>>>18)^G>>>3,K=v[O-2],J=(K<<15|K>>>17)^(K<<13|K>>>19)^K>>>10;v[O]=U+v[O-7]+J+v[O-16]}var Y=T&F^~T&I,ie=w&B^w&b^B&b,ge=(w<<30|w>>>2)^(w<<19|w>>>13)^(w<<10|w>>>22),$=(T<<26|T>>>6)^(T<<21|T>>>11)^(T<<7|T>>>25),se=j+$+Y+x[O]+v[O],W=ge+ie;j=I,I=F,F=T,T=E+se|0,E=b,b=B,B=w,w=se+W|0}k[0]=k[0]+w|0,k[1]=k[1]+B|0,k[2]=k[2]+b|0,k[3]=k[3]+E|0,k[4]=k[4]+T|0,k[5]=k[5]+F|0,k[6]=k[6]+I|0,k[7]=k[7]+j|0},_doFinalize:function(){var P=this._data,M=P.words,k=this._nDataBytes*8,w=P.sigBytes*8;return M[w>>>5]|=128<<24-w%32,M[(w+64>>>9<<4)+14]=l.floor(k/4294967296),M[(w+64>>>9<<4)+15]=k,P.sigBytes=M.length*4,this._process(),this._hash},clone:function(){var P=d.clone.call(this);return P._hash=this._hash.clone(),P}});u.SHA256=d._createHelper(C),u.HmacSHA256=d._createHmacHelper(C)})(Math),i.SHA256})})(vc)),vc.exports}var Ac={exports:{}},X2=Ac.exports,ig;function J2(){return ig||(ig=1,(function(n,s){(function(i,l,u){n.exports=l(_t(),Tl())})(X2,function(i){return(function(){var l=i,u=l.lib,c=u.WordArray,h=l.algo,d=h.SHA256,g=h.SHA224=d.extend({_doReset:function(){this._hash=new c.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var m=d._doFinalize.call(this);return m.sigBytes-=4,m}});l.SHA224=d._createHelper(g),l.HmacSHA224=d._createHmacHelper(g)})(),i.SHA224})})(Ac)),Ac.exports}var yc={exports:{}},eC=yc.exports,og;function sA(){return og||(og=1,(function(n,s){(function(i,l,u){n.exports=l(_t(),wd())})(eC,function(i){return(function(){var l=i,u=l.lib,c=u.Hasher,h=l.x64,d=h.Word,g=h.WordArray,m=l.algo;function x(){return d.create.apply(d,arguments)}var v=[x(1116352408,3609767458),x(1899447441,602891725),x(3049323471,3964484399),x(3921009573,2173295548),x(961987163,4081628472),x(1508970993,3053834265),x(2453635748,2937671579),x(2870763221,3664609560),x(3624381080,2734883394),x(310598401,1164996542),x(607225278,1323610764),x(1426881987,3590304994),x(1925078388,4068182383),x(2162078206,991336113),x(2614888103,633803317),x(3248222580,3479774868),x(3835390401,2666613458),x(4022224774,944711139),x(264347078,2341262773),x(604807628,2007800933),x(770255983,1495990901),x(1249150122,1856431235),x(1555081692,3175218132),x(1996064986,2198950837),x(2554220882,3999719339),x(2821834349,766784016),x(2952996808,2566594879),x(3210313671,3203337956),x(3336571891,1034457026),x(3584528711,2466948901),x(113926993,3758326383),x(338241895,168717936),x(666307205,1188179964),x(773529912,1546045734),x(1294757372,1522805485),x(1396182291,2643833823),x(1695183700,2343527390),x(1986661051,1014477480),x(2177026350,1206759142),x(2456956037,344077627),x(2730485921,1290863460),x(2820302411,3158454273),x(3259730800,3505952657),x(3345764771,106217008),x(3516065817,3606008344),x(3600352804,1432725776),x(4094571909,1467031594),x(275423344,851169720),x(430227734,3100823752),x(506948616,1363258195),x(659060556,3750685593),x(883997877,3785050280),x(958139571,3318307427),x(1322822218,3812723403),x(1537002063,2003034995),x(1747873779,3602036899),x(1955562222,1575990012),x(2024104815,1125592928),x(2227730452,2716904306),x(2361852424,442776044),x(2428436474,593698344),x(2756734187,3733110249),x(3204031479,2999351573),x(3329325298,3815920427),x(3391569614,3928383900),x(3515267271,566280711),x(3940187606,3454069534),x(4118630271,4000239992),x(116418474,1914138554),x(174292421,2731055270),x(289380356,3203993006),x(460393269,320620315),x(685471733,587496836),x(852142971,1086792851),x(1017036298,365543100),x(1126000580,2618297676),x(1288033470,3409855158),x(1501505948,4234509866),x(1607167915,987167468),x(1816402316,1246189591)],C=[];(function(){for(var M=0;M<80;M++)C[M]=x()})();var P=m.SHA512=c.extend({_doReset:function(){this._hash=new g.init([new d.init(1779033703,4089235720),new d.init(3144134277,2227873595),new d.init(1013904242,4271175723),new d.init(2773480762,1595750129),new d.init(1359893119,2917565137),new d.init(2600822924,725511199),new d.init(528734635,4215389547),new d.init(1541459225,327033209)])},_doProcessBlock:function(M,k){for(var w=this._hash.words,B=w[0],b=w[1],E=w[2],T=w[3],F=w[4],I=w[5],j=w[6],O=w[7],G=B.high,U=B.low,K=b.high,J=b.low,Y=E.high,ie=E.low,ge=T.high,$=T.low,se=F.high,W=F.low,te=I.high,Z=I.low,D=j.high,H=j.low,q=O.high,Q=O.low,ae=G,ce=U,Ae=K,pe=J,xe=Y,Be=ie,Oe=ge,Xe=$,Ee=se,je=W,at=te,mt=Z,ot=D,qe=H,Ke=q,Qe=Q,rt=0;rt<80;rt++){var He,Et,zt=C[rt];if(rt<16)Et=zt.high=M[k+rt*2]|0,He=zt.low=M[k+rt*2+1]|0;else{var Qt=C[rt-15],Dt=Qt.high,Gt=Qt.low,Yt=(Dt>>>1|Gt<<31)^(Dt>>>8|Gt<<24)^Dt>>>7,$t=(Gt>>>1|Dt<<31)^(Gt>>>8|Dt<<24)^(Gt>>>7|Dt<<25),Ht=C[rt-2],Rt=Ht.high,Vt=Ht.low,Pe=(Rt>>>19|Vt<<13)^(Rt<<3|Vt>>>29)^Rt>>>6,_e=(Vt>>>19|Rt<<13)^(Vt<<3|Rt>>>29)^(Vt>>>6|Rt<<26),fe=C[rt-7],ve=fe.high,we=fe.low,Ge=C[rt-16],re=Ge.high,ye=Ge.low;He=$t+we,Et=Yt+ve+(He>>>0<$t>>>0?1:0),He=He+_e,Et=Et+Pe+(He>>>0<_e>>>0?1:0),He=He+ye,Et=Et+re+(He>>>0<ye>>>0?1:0),zt.high=Et,zt.low=He}var Ce=Ee&at^~Ee&ot,Ne=je&mt^~je&qe,Je=ae&Ae^ae&xe^Ae&xe,Fe=ce&pe^ce&Be^pe&Be,ft=(ae>>>28|ce<<4)^(ae<<30|ce>>>2)^(ae<<25|ce>>>7),St=(ce>>>28|ae<<4)^(ce<<30|ae>>>2)^(ce<<25|ae>>>7),xt=(Ee>>>14|je<<18)^(Ee>>>18|je<<14)^(Ee<<23|je>>>9),an=(je>>>14|Ee<<18)^(je>>>18|Ee<<14)^(je<<23|Ee>>>9),dt=v[rt],Pt=dt.high,vn=dt.low,wt=Qe+an,kt=Ke+xt+(wt>>>0<Qe>>>0?1:0),wt=wt+Ne,kt=kt+Ce+(wt>>>0<Ne>>>0?1:0),wt=wt+vn,kt=kt+Pt+(wt>>>0<vn>>>0?1:0),wt=wt+He,kt=kt+Et+(wt>>>0<He>>>0?1:0),Mt=St+Fe,Le=ft+Je+(Mt>>>0<St>>>0?1:0);Ke=ot,Qe=qe,ot=at,qe=mt,at=Ee,mt=je,je=Xe+wt|0,Ee=Oe+kt+(je>>>0<Xe>>>0?1:0)|0,Oe=xe,Xe=Be,xe=Ae,Be=pe,Ae=ae,pe=ce,ce=wt+Mt|0,ae=kt+Le+(ce>>>0<wt>>>0?1:0)|0}U=B.low=U+ce,B.high=G+ae+(U>>>0<ce>>>0?1:0),J=b.low=J+pe,b.high=K+Ae+(J>>>0<pe>>>0?1:0),ie=E.low=ie+Be,E.high=Y+xe+(ie>>>0<Be>>>0?1:0),$=T.low=$+Xe,T.high=ge+Oe+($>>>0<Xe>>>0?1:0),W=F.low=W+je,F.high=se+Ee+(W>>>0<je>>>0?1:0),Z=I.low=Z+mt,I.high=te+at+(Z>>>0<mt>>>0?1:0),H=j.low=H+qe,j.high=D+ot+(H>>>0<qe>>>0?1:0),Q=O.low=Q+Qe,O.high=q+Ke+(Q>>>0<Qe>>>0?1:0)},_doFinalize:function(){var M=this._data,k=M.words,w=this._nDataBytes*8,B=M.sigBytes*8;k[B>>>5]|=128<<24-B%32,k[(B+128>>>10<<5)+30]=Math.floor(w/4294967296),k[(B+128>>>10<<5)+31]=w,M.sigBytes=k.length*4,this._process();var b=this._hash.toX32();return b},clone:function(){var M=c.clone.call(this);return M._hash=this._hash.clone(),M},blockSize:1024/32});l.SHA512=c._createHelper(P),l.HmacSHA512=c._createHmacHelper(P)})(),i.SHA512})})(yc)),yc.exports}var _c={exports:{}},tC=_c.exports,sg;function nC(){return sg||(sg=1,(function(n,s){(function(i,l,u){n.exports=l(_t(),wd(),sA())})(tC,function(i){return(function(){var l=i,u=l.x64,c=u.Word,h=u.WordArray,d=l.algo,g=d.SHA512,m=d.SHA384=g.extend({_doReset:function(){this._hash=new h.init([new c.init(3418070365,3238371032),new c.init(1654270250,914150663),new c.init(2438529370,812702999),new c.init(355462360,4144912697),new c.init(1731405415,4290775857),new c.init(2394180231,1750603025),new c.init(3675008525,1694076839),new c.init(1203062813,3204075428)])},_doFinalize:function(){var x=g._doFinalize.call(this);return x.sigBytes-=16,x}});l.SHA384=g._createHelper(m),l.HmacSHA384=g._createHmacHelper(m)})(),i.SHA384})})(_c)),_c.exports}var wc={exports:{}},rC=wc.exports,ag;function iC(){return ag||(ag=1,(function(n,s){(function(i,l,u){n.exports=l(_t(),wd())})(rC,function(i){return(function(l){var u=i,c=u.lib,h=c.WordArray,d=c.Hasher,g=u.x64,m=g.Word,x=u.algo,v=[],C=[],P=[];(function(){for(var w=1,B=0,b=0;b<24;b++){v[w+5*B]=(b+1)*(b+2)/2%64;var E=B%5,T=(2*w+3*B)%5;w=E,B=T}for(var w=0;w<5;w++)for(var B=0;B<5;B++)C[w+5*B]=B+(2*w+3*B)%5*5;for(var F=1,I=0;I<24;I++){for(var j=0,O=0,G=0;G<7;G++){if(F&1){var U=(1<<G)-1;U<32?O^=1<<U:j^=1<<U-32}F&128?F=F<<1^113:F<<=1}P[I]=m.create(j,O)}})();var M=[];(function(){for(var w=0;w<25;w++)M[w]=m.create()})();var k=x.SHA3=d.extend({cfg:d.cfg.extend({outputLength:512}),_doReset:function(){for(var w=this._state=[],B=0;B<25;B++)w[B]=new m.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(w,B){for(var b=this._state,E=this.blockSize/2,T=0;T<E;T++){var F=w[B+2*T],I=w[B+2*T+1];F=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360,I=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360;var j=b[T];j.high^=I,j.low^=F}for(var O=0;O<24;O++){for(var G=0;G<5;G++){for(var U=0,K=0,J=0;J<5;J++){var j=b[G+5*J];U^=j.high,K^=j.low}var Y=M[G];Y.high=U,Y.low=K}for(var G=0;G<5;G++)for(var ie=M[(G+4)%5],ge=M[(G+1)%5],$=ge.high,se=ge.low,U=ie.high^($<<1|se>>>31),K=ie.low^(se<<1|$>>>31),J=0;J<5;J++){var j=b[G+5*J];j.high^=U,j.low^=K}for(var W=1;W<25;W++){var U,K,j=b[W],te=j.high,Z=j.low,D=v[W];D<32?(U=te<<D|Z>>>32-D,K=Z<<D|te>>>32-D):(U=Z<<D-32|te>>>64-D,K=te<<D-32|Z>>>64-D);var H=M[C[W]];H.high=U,H.low=K}var q=M[0],Q=b[0];q.high=Q.high,q.low=Q.low;for(var G=0;G<5;G++)for(var J=0;J<5;J++){var W=G+5*J,j=b[W],ae=M[W],ce=M[(G+1)%5+5*J],Ae=M[(G+2)%5+5*J];j.high=ae.high^~ce.high&Ae.high,j.low=ae.low^~ce.low&Ae.low}var j=b[0],pe=P[O];j.high^=pe.high,j.low^=pe.low}},_doFinalize:function(){var w=this._data,B=w.words;this._nDataBytes*8;var b=w.sigBytes*8,E=this.blockSize*32;B[b>>>5]|=1<<24-b%32,B[(l.ceil((b+1)/E)*E>>>5)-1]|=128,w.sigBytes=B.length*4,this._process();for(var T=this._state,F=this.cfg.outputLength/8,I=F/8,j=[],O=0;O<I;O++){var G=T[O],U=G.high,K=G.low;U=(U<<8|U>>>24)&16711935|(U<<24|U>>>8)&4278255360,K=(K<<8|K>>>24)&16711935|(K<<24|K>>>8)&4278255360,j.push(K),j.push(U)}return new h.init(j,F)},clone:function(){for(var w=d.clone.call(this),B=w._state=this._state.slice(0),b=0;b<25;b++)B[b]=B[b].clone();return w}});u.SHA3=d._createHelper(k),u.HmacSHA3=d._createHmacHelper(k)})(Math),i.SHA3})})(wc)),wc.exports}var bc={exports:{}},oC=bc.exports,lg;function sC(){return lg||(lg=1,(function(n,s){(function(i,l){n.exports=l(_t())})(oC,function(i){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return(function(l){var u=i,c=u.lib,h=c.WordArray,d=c.Hasher,g=u.algo,m=h.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),x=h.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),v=h.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),C=h.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),P=h.create([0,1518500249,1859775393,2400959708,2840853838]),M=h.create([1352829926,1548603684,1836072691,2053994217,0]),k=g.RIPEMD160=d.extend({_doReset:function(){this._hash=h.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(I,j){for(var O=0;O<16;O++){var G=j+O,U=I[G];I[G]=(U<<8|U>>>24)&16711935|(U<<24|U>>>8)&4278255360}var K=this._hash.words,J=P.words,Y=M.words,ie=m.words,ge=x.words,$=v.words,se=C.words,W,te,Z,D,H,q,Q,ae,ce,Ae;q=W=K[0],Q=te=K[1],ae=Z=K[2],ce=D=K[3],Ae=H=K[4];for(var pe,O=0;O<80;O+=1)pe=W+I[j+ie[O]]|0,O<16?pe+=w(te,Z,D)+J[0]:O<32?pe+=B(te,Z,D)+J[1]:O<48?pe+=b(te,Z,D)+J[2]:O<64?pe+=E(te,Z,D)+J[3]:pe+=T(te,Z,D)+J[4],pe=pe|0,pe=F(pe,$[O]),pe=pe+H|0,W=H,H=D,D=F(Z,10),Z=te,te=pe,pe=q+I[j+ge[O]]|0,O<16?pe+=T(Q,ae,ce)+Y[0]:O<32?pe+=E(Q,ae,ce)+Y[1]:O<48?pe+=b(Q,ae,ce)+Y[2]:O<64?pe+=B(Q,ae,ce)+Y[3]:pe+=w(Q,ae,ce)+Y[4],pe=pe|0,pe=F(pe,se[O]),pe=pe+Ae|0,q=Ae,Ae=ce,ce=F(ae,10),ae=Q,Q=pe;pe=K[1]+Z+ce|0,K[1]=K[2]+D+Ae|0,K[2]=K[3]+H+q|0,K[3]=K[4]+W+Q|0,K[4]=K[0]+te+ae|0,K[0]=pe},_doFinalize:function(){var I=this._data,j=I.words,O=this._nDataBytes*8,G=I.sigBytes*8;j[G>>>5]|=128<<24-G%32,j[(G+64>>>9<<4)+14]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360,I.sigBytes=(j.length+1)*4,this._process();for(var U=this._hash,K=U.words,J=0;J<5;J++){var Y=K[J];K[J]=(Y<<8|Y>>>24)&16711935|(Y<<24|Y>>>8)&4278255360}return U},clone:function(){var I=d.clone.call(this);return I._hash=this._hash.clone(),I}});function w(I,j,O){return I^j^O}function B(I,j,O){return I&j|~I&O}function b(I,j,O){return(I|~j)^O}function E(I,j,O){return I&O|j&~O}function T(I,j,O){return I^(j|~O)}function F(I,j){return I<<j|I>>>32-j}u.RIPEMD160=d._createHelper(k),u.HmacRIPEMD160=d._createHmacHelper(k)})(),i.RIPEMD160})})(bc)),bc.exports}var Cc={exports:{}},aC=Cc.exports,ug;function bd(){return ug||(ug=1,(function(n,s){(function(i,l){n.exports=l(_t())})(aC,function(i){(function(){var l=i,u=l.lib,c=u.Base,h=l.enc,d=h.Utf8,g=l.algo;g.HMAC=c.extend({init:function(m,x){m=this._hasher=new m.init,typeof x=="string"&&(x=d.parse(x));var v=m.blockSize,C=v*4;x.sigBytes>C&&(x=m.finalize(x)),x.clamp();for(var P=this._oKey=x.clone(),M=this._iKey=x.clone(),k=P.words,w=M.words,B=0;B<v;B++)k[B]^=1549556828,w[B]^=909522486;P.sigBytes=M.sigBytes=C,this.reset()},reset:function(){var m=this._hasher;m.reset(),m.update(this._iKey)},update:function(m){return this._hasher.update(m),this},finalize:function(m){var x=this._hasher,v=x.finalize(m);x.reset();var C=x.finalize(this._oKey.clone().concat(v));return C}})})()})})(Cc)),Cc.exports}var Ec={exports:{}},lC=Ec.exports,cg;function uC(){return cg||(cg=1,(function(n,s){(function(i,l,u){n.exports=l(_t(),Tl(),bd())})(lC,function(i){return(function(){var l=i,u=l.lib,c=u.Base,h=u.WordArray,d=l.algo,g=d.SHA256,m=d.HMAC,x=d.PBKDF2=c.extend({cfg:c.extend({keySize:128/32,hasher:g,iterations:25e4}),init:function(v){this.cfg=this.cfg.extend(v)},compute:function(v,C){for(var P=this.cfg,M=m.create(P.hasher,v),k=h.create(),w=h.create([1]),B=k.words,b=w.words,E=P.keySize,T=P.iterations;B.length<E;){var F=M.update(C).finalize(w);M.reset();for(var I=F.words,j=I.length,O=F,G=1;G<T;G++){O=M.finalize(O),M.reset();for(var U=O.words,K=0;K<j;K++)I[K]^=U[K]}k.concat(F),b[0]++}return k.sigBytes=E*4,k}});l.PBKDF2=function(v,C,P){return x.create(P).compute(v,C)}})(),i.PBKDF2})})(Ec)),Ec.exports}var kc={exports:{}},cC=kc.exports,dg;function wo(){return dg||(dg=1,(function(n,s){(function(i,l,u){n.exports=l(_t(),oA(),bd())})(cC,function(i){return(function(){var l=i,u=l.lib,c=u.Base,h=u.WordArray,d=l.algo,g=d.MD5,m=d.EvpKDF=c.extend({cfg:c.extend({keySize:128/32,hasher:g,iterations:1}),init:function(x){this.cfg=this.cfg.extend(x)},compute:function(x,v){for(var C,P=this.cfg,M=P.hasher.create(),k=h.create(),w=k.words,B=P.keySize,b=P.iterations;w.length<B;){C&&M.update(C),C=M.update(x).finalize(v),M.reset();for(var E=1;E<b;E++)C=M.finalize(C),M.reset();k.concat(C)}return k.sigBytes=B*4,k}});l.EvpKDF=function(x,v,C){return m.create(C).compute(x,v)}})(),i.EvpKDF})})(kc)),kc.exports}var Sc={exports:{}},dC=Sc.exports,fg;function bn(){return fg||(fg=1,(function(n,s){(function(i,l,u){n.exports=l(_t(),wo())})(dC,function(i){i.lib.Cipher||(function(l){var u=i,c=u.lib,h=c.Base,d=c.WordArray,g=c.BufferedBlockAlgorithm,m=u.enc;m.Utf8;var x=m.Base64,v=u.algo,C=v.EvpKDF,P=c.Cipher=g.extend({cfg:h.extend(),createEncryptor:function(U,K){return this.create(this._ENC_XFORM_MODE,U,K)},createDecryptor:function(U,K){return this.create(this._DEC_XFORM_MODE,U,K)},init:function(U,K,J){this.cfg=this.cfg.extend(J),this._xformMode=U,this._key=K,this.reset()},reset:function(){g.reset.call(this),this._doReset()},process:function(U){return this._append(U),this._process()},finalize:function(U){U&&this._append(U);var K=this._doFinalize();return K},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:(function(){function U(K){return typeof K=="string"?G:I}return function(K){return{encrypt:function(J,Y,ie){return U(Y).encrypt(K,J,Y,ie)},decrypt:function(J,Y,ie){return U(Y).decrypt(K,J,Y,ie)}}}})()});c.StreamCipher=P.extend({_doFinalize:function(){var U=this._process(!0);return U},blockSize:1});var M=u.mode={},k=c.BlockCipherMode=h.extend({createEncryptor:function(U,K){return this.Encryptor.create(U,K)},createDecryptor:function(U,K){return this.Decryptor.create(U,K)},init:function(U,K){this._cipher=U,this._iv=K}}),w=M.CBC=(function(){var U=k.extend();U.Encryptor=U.extend({processBlock:function(J,Y){var ie=this._cipher,ge=ie.blockSize;K.call(this,J,Y,ge),ie.encryptBlock(J,Y),this._prevBlock=J.slice(Y,Y+ge)}}),U.Decryptor=U.extend({processBlock:function(J,Y){var ie=this._cipher,ge=ie.blockSize,$=J.slice(Y,Y+ge);ie.decryptBlock(J,Y),K.call(this,J,Y,ge),this._prevBlock=$}});function K(J,Y,ie){var ge,$=this._iv;$?(ge=$,this._iv=l):ge=this._prevBlock;for(var se=0;se<ie;se++)J[Y+se]^=ge[se]}return U})(),B=u.pad={},b=B.Pkcs7={pad:function(U,K){for(var J=K*4,Y=J-U.sigBytes%J,ie=Y<<24|Y<<16|Y<<8|Y,ge=[],$=0;$<Y;$+=4)ge.push(ie);var se=d.create(ge,Y);U.concat(se)},unpad:function(U){var K=U.words[U.sigBytes-1>>>2]&255;U.sigBytes-=K}};c.BlockCipher=P.extend({cfg:P.cfg.extend({mode:w,padding:b}),reset:function(){var U;P.reset.call(this);var K=this.cfg,J=K.iv,Y=K.mode;this._xformMode==this._ENC_XFORM_MODE?U=Y.createEncryptor:(U=Y.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==U?this._mode.init(this,J&&J.words):(this._mode=U.call(Y,this,J&&J.words),this._mode.__creator=U)},_doProcessBlock:function(U,K){this._mode.processBlock(U,K)},_doFinalize:function(){var U,K=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(K.pad(this._data,this.blockSize),U=this._process(!0)):(U=this._process(!0),K.unpad(U)),U},blockSize:128/32});var E=c.CipherParams=h.extend({init:function(U){this.mixIn(U)},toString:function(U){return(U||this.formatter).stringify(this)}}),T=u.format={},F=T.OpenSSL={stringify:function(U){var K,J=U.ciphertext,Y=U.salt;return Y?K=d.create([1398893684,1701076831]).concat(Y).concat(J):K=J,K.toString(x)},parse:function(U){var K,J=x.parse(U),Y=J.words;return Y[0]==1398893684&&Y[1]==1701076831&&(K=d.create(Y.slice(2,4)),Y.splice(0,4),J.sigBytes-=16),E.create({ciphertext:J,salt:K})}},I=c.SerializableCipher=h.extend({cfg:h.extend({format:F}),encrypt:function(U,K,J,Y){Y=this.cfg.extend(Y);var ie=U.createEncryptor(J,Y),ge=ie.finalize(K),$=ie.cfg;return E.create({ciphertext:ge,key:J,iv:$.iv,algorithm:U,mode:$.mode,padding:$.padding,blockSize:U.blockSize,formatter:Y.format})},decrypt:function(U,K,J,Y){Y=this.cfg.extend(Y),K=this._parse(K,Y.format);var ie=U.createDecryptor(J,Y).finalize(K.ciphertext);return ie},_parse:function(U,K){return typeof U=="string"?K.parse(U,this):U}}),j=u.kdf={},O=j.OpenSSL={execute:function(U,K,J,Y,ie){if(Y||(Y=d.random(64/8)),ie)var ge=C.create({keySize:K+J,hasher:ie}).compute(U,Y);else var ge=C.create({keySize:K+J}).compute(U,Y);var $=d.create(ge.words.slice(K),J*4);return ge.sigBytes=K*4,E.create({key:ge,iv:$,salt:Y})}},G=c.PasswordBasedCipher=I.extend({cfg:I.cfg.extend({kdf:O}),encrypt:function(U,K,J,Y){Y=this.cfg.extend(Y);var ie=Y.kdf.execute(J,U.keySize,U.ivSize,Y.salt,Y.hasher);Y.iv=ie.iv;var ge=I.encrypt.call(this,U,K,ie.key,Y);return ge.mixIn(ie),ge},decrypt:function(U,K,J,Y){Y=this.cfg.extend(Y),K=this._parse(K,Y.format);var ie=Y.kdf.execute(J,U.keySize,U.ivSize,K.salt,Y.hasher);Y.iv=ie.iv;var ge=I.decrypt.call(this,U,K,ie.key,Y);return ge}})})()})})(Sc)),Sc.exports}var Bc={exports:{}},fC=Bc.exports,hg;function hC(){return hg||(hg=1,(function(n,s){(function(i,l,u){n.exports=l(_t(),bn())})(fC,function(i){return i.mode.CFB=(function(){var l=i.lib.BlockCipherMode.extend();l.Encryptor=l.extend({processBlock:function(c,h){var d=this._cipher,g=d.blockSize;u.call(this,c,h,g,d),this._prevBlock=c.slice(h,h+g)}}),l.Decryptor=l.extend({processBlock:function(c,h){var d=this._cipher,g=d.blockSize,m=c.slice(h,h+g);u.call(this,c,h,g,d),this._prevBlock=m}});function u(c,h,d,g){var m,x=this._iv;x?(m=x.slice(0),this._iv=void 0):m=this._prevBlock,g.encryptBlock(m,0);for(var v=0;v<d;v++)c[h+v]^=m[v]}return l})(),i.mode.CFB})})(Bc)),Bc.exports}var Pc={exports:{}},pC=Pc.exports,pg;function mC(){return pg||(pg=1,(function(n,s){(function(i,l,u){n.exports=l(_t(),bn())})(pC,function(i){return i.mode.CTR=(function(){var l=i.lib.BlockCipherMode.extend(),u=l.Encryptor=l.extend({processBlock:function(c,h){var d=this._cipher,g=d.blockSize,m=this._iv,x=this._counter;m&&(x=this._counter=m.slice(0),this._iv=void 0);var v=x.slice(0);d.encryptBlock(v,0),x[g-1]=x[g-1]+1|0;for(var C=0;C<g;C++)c[h+C]^=v[C]}});return l.Decryptor=u,l})(),i.mode.CTR})})(Pc)),Pc.exports}var Tc={exports:{}},gC=Tc.exports,mg;function xC(){return mg||(mg=1,(function(n,s){(function(i,l,u){n.exports=l(_t(),bn())})(gC,function(i){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return i.mode.CTRGladman=(function(){var l=i.lib.BlockCipherMode.extend();function u(d){if((d>>24&255)===255){var g=d>>16&255,m=d>>8&255,x=d&255;g===255?(g=0,m===255?(m=0,x===255?x=0:++x):++m):++g,d=0,d+=g<<16,d+=m<<8,d+=x}else d+=1<<24;return d}function c(d){return(d[0]=u(d[0]))===0&&(d[1]=u(d[1])),d}var h=l.Encryptor=l.extend({processBlock:function(d,g){var m=this._cipher,x=m.blockSize,v=this._iv,C=this._counter;v&&(C=this._counter=v.slice(0),this._iv=void 0),c(C);var P=C.slice(0);m.encryptBlock(P,0);for(var M=0;M<x;M++)d[g+M]^=P[M]}});return l.Decryptor=h,l})(),i.mode.CTRGladman})})(Tc)),Tc.exports}var Dc={exports:{}},vC=Dc.exports,gg;function AC(){return gg||(gg=1,(function(n,s){(function(i,l,u){n.exports=l(_t(),bn())})(vC,function(i){return i.mode.OFB=(function(){var l=i.lib.BlockCipherMode.extend(),u=l.Encryptor=l.extend({processBlock:function(c,h){var d=this._cipher,g=d.blockSize,m=this._iv,x=this._keystream;m&&(x=this._keystream=m.slice(0),this._iv=void 0),d.encryptBlock(x,0);for(var v=0;v<g;v++)c[h+v]^=x[v]}});return l.Decryptor=u,l})(),i.mode.OFB})})(Dc)),Dc.exports}var Rc={exports:{}},yC=Rc.exports,xg;function _C(){return xg||(xg=1,(function(n,s){(function(i,l,u){n.exports=l(_t(),bn())})(yC,function(i){return i.mode.ECB=(function(){var l=i.lib.BlockCipherMode.extend();return l.Encryptor=l.extend({processBlock:function(u,c){this._cipher.encryptBlock(u,c)}}),l.Decryptor=l.extend({processBlock:function(u,c){this._cipher.decryptBlock(u,c)}}),l})(),i.mode.ECB})})(Rc)),Rc.exports}var Fc={exports:{}},wC=Fc.exports,vg;function bC(){return vg||(vg=1,(function(n,s){(function(i,l,u){n.exports=l(_t(),bn())})(wC,function(i){return i.pad.AnsiX923={pad:function(l,u){var c=l.sigBytes,h=u*4,d=h-c%h,g=c+d-1;l.clamp(),l.words[g>>>2]|=d<<24-g%4*8,l.sigBytes+=d},unpad:function(l){var u=l.words[l.sigBytes-1>>>2]&255;l.sigBytes-=u}},i.pad.Ansix923})})(Fc)),Fc.exports}var Nc={exports:{}},CC=Nc.exports,Ag;function EC(){return Ag||(Ag=1,(function(n,s){(function(i,l,u){n.exports=l(_t(),bn())})(CC,function(i){return i.pad.Iso10126={pad:function(l,u){var c=u*4,h=c-l.sigBytes%c;l.concat(i.lib.WordArray.random(h-1)).concat(i.lib.WordArray.create([h<<24],1))},unpad:function(l){var u=l.words[l.sigBytes-1>>>2]&255;l.sigBytes-=u}},i.pad.Iso10126})})(Nc)),Nc.exports}var Lc={exports:{}},kC=Lc.exports,yg;function SC(){return yg||(yg=1,(function(n,s){(function(i,l,u){n.exports=l(_t(),bn())})(kC,function(i){return i.pad.Iso97971={pad:function(l,u){l.concat(i.lib.WordArray.create([2147483648],1)),i.pad.ZeroPadding.pad(l,u)},unpad:function(l){i.pad.ZeroPadding.unpad(l),l.sigBytes--}},i.pad.Iso97971})})(Lc)),Lc.exports}var Mc={exports:{}},BC=Mc.exports,_g;function PC(){return _g||(_g=1,(function(n,s){(function(i,l,u){n.exports=l(_t(),bn())})(BC,function(i){return i.pad.ZeroPadding={pad:function(l,u){var c=u*4;l.clamp(),l.sigBytes+=c-(l.sigBytes%c||c)},unpad:function(l){for(var u=l.words,c=l.sigBytes-1,c=l.sigBytes-1;c>=0;c--)if(u[c>>>2]>>>24-c%4*8&255){l.sigBytes=c+1;break}}},i.pad.ZeroPadding})})(Mc)),Mc.exports}var Ic={exports:{}},TC=Ic.exports,wg;function DC(){return wg||(wg=1,(function(n,s){(function(i,l,u){n.exports=l(_t(),bn())})(TC,function(i){return i.pad.NoPadding={pad:function(){},unpad:function(){}},i.pad.NoPadding})})(Ic)),Ic.exports}var Oc={exports:{}},RC=Oc.exports,bg;function FC(){return bg||(bg=1,(function(n,s){(function(i,l,u){n.exports=l(_t(),bn())})(RC,function(i){return(function(l){var u=i,c=u.lib,h=c.CipherParams,d=u.enc,g=d.Hex,m=u.format;m.Hex={stringify:function(x){return x.ciphertext.toString(g)},parse:function(x){var v=g.parse(x);return h.create({ciphertext:v})}}})(),i.format.Hex})})(Oc)),Oc.exports}var jc={exports:{}},NC=jc.exports,Cg;function LC(){return Cg||(Cg=1,(function(n,s){(function(i,l,u){n.exports=l(_t(),us(),cs(),wo(),bn())})(NC,function(i){return(function(){var l=i,u=l.lib,c=u.BlockCipher,h=l.algo,d=[],g=[],m=[],x=[],v=[],C=[],P=[],M=[],k=[],w=[];(function(){for(var E=[],T=0;T<256;T++)T<128?E[T]=T<<1:E[T]=T<<1^283;for(var F=0,I=0,T=0;T<256;T++){var j=I^I<<1^I<<2^I<<3^I<<4;j=j>>>8^j&255^99,d[F]=j,g[j]=F;var O=E[F],G=E[O],U=E[G],K=E[j]*257^j*16843008;m[F]=K<<24|K>>>8,x[F]=K<<16|K>>>16,v[F]=K<<8|K>>>24,C[F]=K;var K=U*16843009^G*65537^O*257^F*16843008;P[j]=K<<24|K>>>8,M[j]=K<<16|K>>>16,k[j]=K<<8|K>>>24,w[j]=K,F?(F=O^E[E[E[U^O]]],I^=E[E[I]]):F=I=1}})();var B=[0,1,2,4,8,16,32,64,128,27,54],b=h.AES=c.extend({_doReset:function(){var E;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var T=this._keyPriorReset=this._key,F=T.words,I=T.sigBytes/4,j=this._nRounds=I+6,O=(j+1)*4,G=this._keySchedule=[],U=0;U<O;U++)U<I?G[U]=F[U]:(E=G[U-1],U%I?I>6&&U%I==4&&(E=d[E>>>24]<<24|d[E>>>16&255]<<16|d[E>>>8&255]<<8|d[E&255]):(E=E<<8|E>>>24,E=d[E>>>24]<<24|d[E>>>16&255]<<16|d[E>>>8&255]<<8|d[E&255],E^=B[U/I|0]<<24),G[U]=G[U-I]^E);for(var K=this._invKeySchedule=[],J=0;J<O;J++){var U=O-J;if(J%4)var E=G[U];else var E=G[U-4];J<4||U<=4?K[J]=E:K[J]=P[d[E>>>24]]^M[d[E>>>16&255]]^k[d[E>>>8&255]]^w[d[E&255]]}}},encryptBlock:function(E,T){this._doCryptBlock(E,T,this._keySchedule,m,x,v,C,d)},decryptBlock:function(E,T){var F=E[T+1];E[T+1]=E[T+3],E[T+3]=F,this._doCryptBlock(E,T,this._invKeySchedule,P,M,k,w,g);var F=E[T+1];E[T+1]=E[T+3],E[T+3]=F},_doCryptBlock:function(E,T,F,I,j,O,G,U){for(var K=this._nRounds,J=E[T]^F[0],Y=E[T+1]^F[1],ie=E[T+2]^F[2],ge=E[T+3]^F[3],$=4,se=1;se<K;se++){var W=I[J>>>24]^j[Y>>>16&255]^O[ie>>>8&255]^G[ge&255]^F[$++],te=I[Y>>>24]^j[ie>>>16&255]^O[ge>>>8&255]^G[J&255]^F[$++],Z=I[ie>>>24]^j[ge>>>16&255]^O[J>>>8&255]^G[Y&255]^F[$++],D=I[ge>>>24]^j[J>>>16&255]^O[Y>>>8&255]^G[ie&255]^F[$++];J=W,Y=te,ie=Z,ge=D}var W=(U[J>>>24]<<24|U[Y>>>16&255]<<16|U[ie>>>8&255]<<8|U[ge&255])^F[$++],te=(U[Y>>>24]<<24|U[ie>>>16&255]<<16|U[ge>>>8&255]<<8|U[J&255])^F[$++],Z=(U[ie>>>24]<<24|U[ge>>>16&255]<<16|U[J>>>8&255]<<8|U[Y&255])^F[$++],D=(U[ge>>>24]<<24|U[J>>>16&255]<<16|U[Y>>>8&255]<<8|U[ie&255])^F[$++];E[T]=W,E[T+1]=te,E[T+2]=Z,E[T+3]=D},keySize:256/32});l.AES=c._createHelper(b)})(),i.AES})})(jc)),jc.exports}var zc={exports:{}},MC=zc.exports,Eg;function IC(){return Eg||(Eg=1,(function(n,s){(function(i,l,u){n.exports=l(_t(),us(),cs(),wo(),bn())})(MC,function(i){return(function(){var l=i,u=l.lib,c=u.WordArray,h=u.BlockCipher,d=l.algo,g=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],m=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],x=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],v=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],C=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],P=d.DES=h.extend({_doReset:function(){for(var B=this._key,b=B.words,E=[],T=0;T<56;T++){var F=g[T]-1;E[T]=b[F>>>5]>>>31-F%32&1}for(var I=this._subKeys=[],j=0;j<16;j++){for(var O=I[j]=[],G=x[j],T=0;T<24;T++)O[T/6|0]|=E[(m[T]-1+G)%28]<<31-T%6,O[4+(T/6|0)]|=E[28+(m[T+24]-1+G)%28]<<31-T%6;O[0]=O[0]<<1|O[0]>>>31;for(var T=1;T<7;T++)O[T]=O[T]>>>(T-1)*4+3;O[7]=O[7]<<5|O[7]>>>27}for(var U=this._invSubKeys=[],T=0;T<16;T++)U[T]=I[15-T]},encryptBlock:function(B,b){this._doCryptBlock(B,b,this._subKeys)},decryptBlock:function(B,b){this._doCryptBlock(B,b,this._invSubKeys)},_doCryptBlock:function(B,b,E){this._lBlock=B[b],this._rBlock=B[b+1],M.call(this,4,252645135),M.call(this,16,65535),k.call(this,2,858993459),k.call(this,8,16711935),M.call(this,1,1431655765);for(var T=0;T<16;T++){for(var F=E[T],I=this._lBlock,j=this._rBlock,O=0,G=0;G<8;G++)O|=v[G][((j^F[G])&C[G])>>>0];this._lBlock=j,this._rBlock=I^O}var U=this._lBlock;this._lBlock=this._rBlock,this._rBlock=U,M.call(this,1,1431655765),k.call(this,8,16711935),k.call(this,2,858993459),M.call(this,16,65535),M.call(this,4,252645135),B[b]=this._lBlock,B[b+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function M(B,b){var E=(this._lBlock>>>B^this._rBlock)&b;this._rBlock^=E,this._lBlock^=E<<B}function k(B,b){var E=(this._rBlock>>>B^this._lBlock)&b;this._lBlock^=E,this._rBlock^=E<<B}l.DES=h._createHelper(P);var w=d.TripleDES=h.extend({_doReset:function(){var B=this._key,b=B.words;if(b.length!==2&&b.length!==4&&b.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var E=b.slice(0,2),T=b.length<4?b.slice(0,2):b.slice(2,4),F=b.length<6?b.slice(0,2):b.slice(4,6);this._des1=P.createEncryptor(c.create(E)),this._des2=P.createEncryptor(c.create(T)),this._des3=P.createEncryptor(c.create(F))},encryptBlock:function(B,b){this._des1.encryptBlock(B,b),this._des2.decryptBlock(B,b),this._des3.encryptBlock(B,b)},decryptBlock:function(B,b){this._des3.decryptBlock(B,b),this._des2.encryptBlock(B,b),this._des1.decryptBlock(B,b)},keySize:192/32,ivSize:64/32,blockSize:64/32});l.TripleDES=h._createHelper(w)})(),i.TripleDES})})(zc)),zc.exports}var Hc={exports:{}},OC=Hc.exports,kg;function jC(){return kg||(kg=1,(function(n,s){(function(i,l,u){n.exports=l(_t(),us(),cs(),wo(),bn())})(OC,function(i){return(function(){var l=i,u=l.lib,c=u.StreamCipher,h=l.algo,d=h.RC4=c.extend({_doReset:function(){for(var x=this._key,v=x.words,C=x.sigBytes,P=this._S=[],M=0;M<256;M++)P[M]=M;for(var M=0,k=0;M<256;M++){var w=M%C,B=v[w>>>2]>>>24-w%4*8&255;k=(k+P[M]+B)%256;var b=P[M];P[M]=P[k],P[k]=b}this._i=this._j=0},_doProcessBlock:function(x,v){x[v]^=g.call(this)},keySize:256/32,ivSize:0});function g(){for(var x=this._S,v=this._i,C=this._j,P=0,M=0;M<4;M++){v=(v+1)%256,C=(C+x[v])%256;var k=x[v];x[v]=x[C],x[C]=k,P|=x[(x[v]+x[C])%256]<<24-M*8}return this._i=v,this._j=C,P}l.RC4=c._createHelper(d);var m=h.RC4Drop=d.extend({cfg:d.cfg.extend({drop:192}),_doReset:function(){d._doReset.call(this);for(var x=this.cfg.drop;x>0;x--)g.call(this)}});l.RC4Drop=c._createHelper(m)})(),i.RC4})})(Hc)),Hc.exports}var Vc={exports:{}},zC=Vc.exports,Sg;function HC(){return Sg||(Sg=1,(function(n,s){(function(i,l,u){n.exports=l(_t(),us(),cs(),wo(),bn())})(zC,function(i){return(function(){var l=i,u=l.lib,c=u.StreamCipher,h=l.algo,d=[],g=[],m=[],x=h.Rabbit=c.extend({_doReset:function(){for(var C=this._key.words,P=this.cfg.iv,M=0;M<4;M++)C[M]=(C[M]<<8|C[M]>>>24)&16711935|(C[M]<<24|C[M]>>>8)&4278255360;var k=this._X=[C[0],C[3]<<16|C[2]>>>16,C[1],C[0]<<16|C[3]>>>16,C[2],C[1]<<16|C[0]>>>16,C[3],C[2]<<16|C[1]>>>16],w=this._C=[C[2]<<16|C[2]>>>16,C[0]&4294901760|C[1]&65535,C[3]<<16|C[3]>>>16,C[1]&4294901760|C[2]&65535,C[0]<<16|C[0]>>>16,C[2]&4294901760|C[3]&65535,C[1]<<16|C[1]>>>16,C[3]&4294901760|C[0]&65535];this._b=0;for(var M=0;M<4;M++)v.call(this);for(var M=0;M<8;M++)w[M]^=k[M+4&7];if(P){var B=P.words,b=B[0],E=B[1],T=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,F=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,I=T>>>16|F&4294901760,j=F<<16|T&65535;w[0]^=T,w[1]^=I,w[2]^=F,w[3]^=j,w[4]^=T,w[5]^=I,w[6]^=F,w[7]^=j;for(var M=0;M<4;M++)v.call(this)}},_doProcessBlock:function(C,P){var M=this._X;v.call(this),d[0]=M[0]^M[5]>>>16^M[3]<<16,d[1]=M[2]^M[7]>>>16^M[5]<<16,d[2]=M[4]^M[1]>>>16^M[7]<<16,d[3]=M[6]^M[3]>>>16^M[1]<<16;for(var k=0;k<4;k++)d[k]=(d[k]<<8|d[k]>>>24)&16711935|(d[k]<<24|d[k]>>>8)&4278255360,C[P+k]^=d[k]},blockSize:128/32,ivSize:64/32});function v(){for(var C=this._X,P=this._C,M=0;M<8;M++)g[M]=P[M];P[0]=P[0]+1295307597+this._b|0,P[1]=P[1]+3545052371+(P[0]>>>0<g[0]>>>0?1:0)|0,P[2]=P[2]+886263092+(P[1]>>>0<g[1]>>>0?1:0)|0,P[3]=P[3]+1295307597+(P[2]>>>0<g[2]>>>0?1:0)|0,P[4]=P[4]+3545052371+(P[3]>>>0<g[3]>>>0?1:0)|0,P[5]=P[5]+886263092+(P[4]>>>0<g[4]>>>0?1:0)|0,P[6]=P[6]+1295307597+(P[5]>>>0<g[5]>>>0?1:0)|0,P[7]=P[7]+3545052371+(P[6]>>>0<g[6]>>>0?1:0)|0,this._b=P[7]>>>0<g[7]>>>0?1:0;for(var M=0;M<8;M++){var k=C[M]+P[M],w=k&65535,B=k>>>16,b=((w*w>>>17)+w*B>>>15)+B*B,E=((k&4294901760)*k|0)+((k&65535)*k|0);m[M]=b^E}C[0]=m[0]+(m[7]<<16|m[7]>>>16)+(m[6]<<16|m[6]>>>16)|0,C[1]=m[1]+(m[0]<<8|m[0]>>>24)+m[7]|0,C[2]=m[2]+(m[1]<<16|m[1]>>>16)+(m[0]<<16|m[0]>>>16)|0,C[3]=m[3]+(m[2]<<8|m[2]>>>24)+m[1]|0,C[4]=m[4]+(m[3]<<16|m[3]>>>16)+(m[2]<<16|m[2]>>>16)|0,C[5]=m[5]+(m[4]<<8|m[4]>>>24)+m[3]|0,C[6]=m[6]+(m[5]<<16|m[5]>>>16)+(m[4]<<16|m[4]>>>16)|0,C[7]=m[7]+(m[6]<<8|m[6]>>>24)+m[5]|0}l.Rabbit=c._createHelper(x)})(),i.Rabbit})})(Vc)),Vc.exports}var Uc={exports:{}},VC=Uc.exports,Bg;function UC(){return Bg||(Bg=1,(function(n,s){(function(i,l,u){n.exports=l(_t(),us(),cs(),wo(),bn())})(VC,function(i){return(function(){var l=i,u=l.lib,c=u.StreamCipher,h=l.algo,d=[],g=[],m=[],x=h.RabbitLegacy=c.extend({_doReset:function(){var C=this._key.words,P=this.cfg.iv,M=this._X=[C[0],C[3]<<16|C[2]>>>16,C[1],C[0]<<16|C[3]>>>16,C[2],C[1]<<16|C[0]>>>16,C[3],C[2]<<16|C[1]>>>16],k=this._C=[C[2]<<16|C[2]>>>16,C[0]&4294901760|C[1]&65535,C[3]<<16|C[3]>>>16,C[1]&4294901760|C[2]&65535,C[0]<<16|C[0]>>>16,C[2]&4294901760|C[3]&65535,C[1]<<16|C[1]>>>16,C[3]&4294901760|C[0]&65535];this._b=0;for(var w=0;w<4;w++)v.call(this);for(var w=0;w<8;w++)k[w]^=M[w+4&7];if(P){var B=P.words,b=B[0],E=B[1],T=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,F=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,I=T>>>16|F&4294901760,j=F<<16|T&65535;k[0]^=T,k[1]^=I,k[2]^=F,k[3]^=j,k[4]^=T,k[5]^=I,k[6]^=F,k[7]^=j;for(var w=0;w<4;w++)v.call(this)}},_doProcessBlock:function(C,P){var M=this._X;v.call(this),d[0]=M[0]^M[5]>>>16^M[3]<<16,d[1]=M[2]^M[7]>>>16^M[5]<<16,d[2]=M[4]^M[1]>>>16^M[7]<<16,d[3]=M[6]^M[3]>>>16^M[1]<<16;for(var k=0;k<4;k++)d[k]=(d[k]<<8|d[k]>>>24)&16711935|(d[k]<<24|d[k]>>>8)&4278255360,C[P+k]^=d[k]},blockSize:128/32,ivSize:64/32});function v(){for(var C=this._X,P=this._C,M=0;M<8;M++)g[M]=P[M];P[0]=P[0]+1295307597+this._b|0,P[1]=P[1]+3545052371+(P[0]>>>0<g[0]>>>0?1:0)|0,P[2]=P[2]+886263092+(P[1]>>>0<g[1]>>>0?1:0)|0,P[3]=P[3]+1295307597+(P[2]>>>0<g[2]>>>0?1:0)|0,P[4]=P[4]+3545052371+(P[3]>>>0<g[3]>>>0?1:0)|0,P[5]=P[5]+886263092+(P[4]>>>0<g[4]>>>0?1:0)|0,P[6]=P[6]+1295307597+(P[5]>>>0<g[5]>>>0?1:0)|0,P[7]=P[7]+3545052371+(P[6]>>>0<g[6]>>>0?1:0)|0,this._b=P[7]>>>0<g[7]>>>0?1:0;for(var M=0;M<8;M++){var k=C[M]+P[M],w=k&65535,B=k>>>16,b=((w*w>>>17)+w*B>>>15)+B*B,E=((k&4294901760)*k|0)+((k&65535)*k|0);m[M]=b^E}C[0]=m[0]+(m[7]<<16|m[7]>>>16)+(m[6]<<16|m[6]>>>16)|0,C[1]=m[1]+(m[0]<<8|m[0]>>>24)+m[7]|0,C[2]=m[2]+(m[1]<<16|m[1]>>>16)+(m[0]<<16|m[0]>>>16)|0,C[3]=m[3]+(m[2]<<8|m[2]>>>24)+m[1]|0,C[4]=m[4]+(m[3]<<16|m[3]>>>16)+(m[2]<<16|m[2]>>>16)|0,C[5]=m[5]+(m[4]<<8|m[4]>>>24)+m[3]|0,C[6]=m[6]+(m[5]<<16|m[5]>>>16)+(m[4]<<16|m[4]>>>16)|0,C[7]=m[7]+(m[6]<<8|m[6]>>>24)+m[5]|0}l.RabbitLegacy=c._createHelper(x)})(),i.RabbitLegacy})})(Uc)),Uc.exports}var Zc={exports:{}},ZC=Zc.exports,Pg;function WC(){return Pg||(Pg=1,(function(n,s){(function(i,l,u){n.exports=l(_t(),us(),cs(),wo(),bn())})(ZC,function(i){return(function(){var l=i,u=l.lib,c=u.BlockCipher,h=l.algo;const d=16,g=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],m=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var x={pbox:[],sbox:[]};function v(w,B){let b=B>>24&255,E=B>>16&255,T=B>>8&255,F=B&255,I=w.sbox[0][b]+w.sbox[1][E];return I=I^w.sbox[2][T],I=I+w.sbox[3][F],I}function C(w,B,b){let E=B,T=b,F;for(let I=0;I<d;++I)E=E^w.pbox[I],T=v(w,E)^T,F=E,E=T,T=F;return F=E,E=T,T=F,T=T^w.pbox[d],E=E^w.pbox[d+1],{left:E,right:T}}function P(w,B,b){let E=B,T=b,F;for(let I=d+1;I>1;--I)E=E^w.pbox[I],T=v(w,E)^T,F=E,E=T,T=F;return F=E,E=T,T=F,T=T^w.pbox[1],E=E^w.pbox[0],{left:E,right:T}}function M(w,B,b){for(let j=0;j<4;j++){w.sbox[j]=[];for(let O=0;O<256;O++)w.sbox[j][O]=m[j][O]}let E=0;for(let j=0;j<d+2;j++)w.pbox[j]=g[j]^B[E],E++,E>=b&&(E=0);let T=0,F=0,I=0;for(let j=0;j<d+2;j+=2)I=C(w,T,F),T=I.left,F=I.right,w.pbox[j]=T,w.pbox[j+1]=F;for(let j=0;j<4;j++)for(let O=0;O<256;O+=2)I=C(w,T,F),T=I.left,F=I.right,w.sbox[j][O]=T,w.sbox[j][O+1]=F;return!0}var k=h.Blowfish=c.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var w=this._keyPriorReset=this._key,B=w.words,b=w.sigBytes/4;M(x,B,b)}},encryptBlock:function(w,B){var b=C(x,w[B],w[B+1]);w[B]=b.left,w[B+1]=b.right},decryptBlock:function(w,B){var b=P(x,w[B],w[B+1]);w[B]=b.left,w[B+1]=b.right},blockSize:64/32,keySize:128/32,ivSize:64/32});l.Blowfish=c._createHelper(k)})(),i.Blowfish})})(Zc)),Zc.exports}var qC=uc.exports,Tg;function aA(){return Tg||(Tg=1,(function(n,s){(function(i,l,u){n.exports=l(_t(),wd(),U2(),W2(),us(),$2(),cs(),oA(),Tl(),J2(),sA(),nC(),iC(),sC(),bd(),uC(),wo(),bn(),hC(),mC(),xC(),AC(),_C(),bC(),EC(),SC(),PC(),DC(),FC(),LC(),IC(),jC(),HC(),UC(),WC())})(qC,function(i){return i})})(uc)),uc.exports}var Dg;function nh(){if(Dg)return ol;Dg=1,Object.defineProperty(ol,"__esModule",{value:!0}),ol.ChannelCrypto=void 0;const n=aA(),s=Sn();class i{static decryptGroupTextMessage(u,c,h){try{const d=(0,s.hexToBytes)(h),g=(0,s.hexToBytes)(c),m=new Uint8Array(32);m.set(d,0);const x=(0,n.HmacSHA256)(n.enc.Hex.parse(u),n.enc.Hex.parse((0,s.bytesToHex)(m))),C=(0,s.hexToBytes)(x.toString(n.enc.Hex)).slice(0,2);if(C[0]!==g[0]||C[1]!==g[1])return{success:!1,error:"MAC verification failed"};const P=n.enc.Hex.parse(h),M=n.enc.Hex.parse(u),k=n.AES.decrypt(n.lib.CipherParams.create({ciphertext:M}),P,{mode:n.mode.ECB,padding:n.pad.NoPadding}),w=(0,s.hexToBytes)(k.toString(n.enc.Hex));if(!w||w.length<5)return{success:!1,error:"Decrypted content too short"};const B=w[0]|w[1]<<8|w[2]<<16|w[3]<<24,b=w[4],E=w.slice(5);let F=new TextDecoder("utf-8").decode(E);const I=F.indexOf("\0");I>=0&&(F=F.substring(0,I));const j=F.indexOf(": ");let O,G;if(j>0&&j<50){const U=F.substring(0,j);/[:\[\]]/.test(U)?G=F:(O=U,G=F.substring(j+2))}else G=F;return{success:!0,data:{timestamp:B,flags:b,sender:O,message:G}}}catch(d){return{success:!1,error:d instanceof Error?d.message:"Decryption failed"}}}static calculateChannelHash(u){const c=(0,n.SHA256)(n.enc.Hex.parse(u));return(0,s.hexToBytes)(c.toString(n.enc.Hex))[0].toString(16).padStart(2,"0")}}return ol.ChannelCrypto=i,ol}var Rg;function lA(){if(Rg)return il;Rg=1,Object.defineProperty(il,"__esModule",{value:!0}),il.MeshCoreKeyStore=void 0;const n=nh();class s{constructor(l){this.nodeKeys=new Map,this.channelHashToKeys=new Map,l!=null&&l.channelSecrets&&this.addChannelSecrets(l.channelSecrets),l!=null&&l.nodeKeys&&Object.entries(l.nodeKeys).forEach(([u,c])=>{this.addNodeKey(u,c)})}addNodeKey(l,u){const c=l.toUpperCase();this.nodeKeys.set(c,u)}hasChannelKey(l){const u=l.toLowerCase();return this.channelHashToKeys.has(u)}hasNodeKey(l){const u=l.toUpperCase();return this.nodeKeys.has(u)}getChannelKeys(l){const u=l.toLowerCase();return this.channelHashToKeys.get(u)||[]}getNodeKey(l){const u=l.toUpperCase();return this.nodeKeys.get(u)}addChannelSecrets(l){for(const u of l){const c=n.ChannelCrypto.calculateChannelHash(u).toLowerCase();this.channelHashToKeys.has(c)||this.channelHashToKeys.set(c,[]),this.channelHashToKeys.get(c).push(u)}}}return il.MeshCoreKeyStore=s,il}var sl={},zr={};/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const uA={p:0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,n:0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3edn,h:8n,a:0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffecn,d:0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3n,Gx:0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51an,Gy:0x6666666666666666666666666666666666666666666666666666666666666658n},{p:Ln,n:Wc,Gx:Fg,Gy:Ng,a:x0,d:v0}=uA,GC=8n,ai=32,Cl=64,hr=(n="")=>{throw new Error(n)},$C=n=>typeof n=="bigint",cA=n=>typeof n=="string",KC=n=>n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array",ss=(n,s)=>!KC(n)||typeof s=="number"&&s>0&&n.length!==s?hr("Uint8Array expected"):n,Cd=n=>new Uint8Array(n),rh=n=>Uint8Array.from(n),dA=(n,s)=>n.toString(16).padStart(s,"0"),ih=n=>Array.from(ss(n)).map(s=>dA(s,2)).join(""),Ri={_0:48,_9:57,A:65,F:70,a:97,f:102},Lg=n=>{if(n>=Ri._0&&n<=Ri._9)return n-Ri._0;if(n>=Ri.A&&n<=Ri.F)return n-(Ri.A-10);if(n>=Ri.a&&n<=Ri.f)return n-(Ri.a-10)},oh=n=>{const s="hex invalid";if(!cA(n))return hr(s);const i=n.length,l=i/2;if(i%2)return hr(s);const u=Cd(l);for(let c=0,h=0;c<l;c++,h+=2){const d=Lg(n.charCodeAt(h)),g=Lg(n.charCodeAt(h+1));if(d===void 0||g===void 0)return hr(s);u[c]=d*16+g}return u},_o=(n,s)=>ss(cA(n)?oh(n):rh(ss(n)),s),fA=()=>globalThis==null?void 0:globalThis.crypto,QC=()=>{var n;return((n=fA())==null?void 0:n.subtle)??hr("crypto.subtle must be defined")},El=(...n)=>{const s=Cd(n.reduce((l,u)=>l+ss(u).length,0));let i=0;return n.forEach(l=>{s.set(l,i),i+=l.length}),s},hA=(n=ai)=>fA().getRandomValues(Cd(n)),td=BigInt,ts=(n,s,i,l="bad number: out of range")=>$C(n)&&s<=n&&n<i?n:hr(l),We=(n,s=Ln)=>{const i=n%s;return i>=0n?i:s+i},pA=n=>We(n,Wc),mA=(n,s)=>{(n===0n||s<=0n)&&hr("no inverse n="+n+" mod="+s);let i=We(n,s),l=s,u=0n,c=1n;for(;i!==0n;){const h=l/i,d=l%i,g=u-c*h;l=i,i=d,u=c,c=g}return l===1n?We(u,s):hr("no inverse")},YC=n=>{const s=fh[n];return typeof s!="function"&&hr("hashes."+n+" not set"),s},Mg=n=>n instanceof Ur?n:hr("Point expected"),T0=2n**256n,oi=class oi{constructor(s,i,l,u){$o(this,"ex");$o(this,"ey");$o(this,"ez");$o(this,"et");const c=T0;this.ex=ts(s,0n,c),this.ey=ts(i,0n,c),this.ez=ts(l,1n,c),this.et=ts(u,0n,c),Object.freeze(this)}static fromAffine(s){return new oi(s.x,s.y,1n,We(s.x*s.y))}static fromBytes(s,i=!1){const l=v0,u=rh(ss(s,ai)),c=s[31];u[31]=c&-129;const h=sh(u);ts(h,0n,i?T0:Ln);const g=We(h*h),m=We(g-1n),x=We(l*g+1n);let{isValid:v,value:C}=JC(m,x);v||hr("bad point: y not sqrt");const P=(C&1n)===1n,M=(c&128)!==0;return!i&&C===0n&&M&&hr("bad point: x==0, isLastByteOdd"),M!==P&&(C=We(-C)),new oi(C,h,1n,We(C*h))}assertValidity(){const s=x0,i=v0,l=this;if(l.is0())throw new Error("bad point: ZERO");const{ex:u,ey:c,ez:h,et:d}=l,g=We(u*u),m=We(c*c),x=We(h*h),v=We(x*x),C=We(g*s),P=We(x*We(C+m)),M=We(v+We(i*We(g*m)));if(P!==M)throw new Error("bad point: equation left != right (1)");const k=We(u*c),w=We(h*d);if(k!==w)throw new Error("bad point: equation left != right (2)");return this}equals(s){const{ex:i,ey:l,ez:u}=this,{ex:c,ey:h,ez:d}=Mg(s),g=We(i*d),m=We(c*u),x=We(l*d),v=We(h*u);return g===m&&x===v}is0(){return this.equals(ta)}negate(){return new oi(We(-this.ex),this.ey,this.ez,We(-this.et))}double(){const{ex:s,ey:i,ez:l}=this,u=x0,c=We(s*s),h=We(i*i),d=We(2n*We(l*l)),g=We(u*c),m=s+i,x=We(We(m*m)-c-h),v=g+h,C=v-d,P=g-h,M=We(x*C),k=We(v*P),w=We(x*P),B=We(C*v);return new oi(M,k,B,w)}add(s){const{ex:i,ey:l,ez:u,et:c}=this,{ex:h,ey:d,ez:g,et:m}=Mg(s),x=x0,v=v0,C=We(i*h),P=We(l*d),M=We(c*v*m),k=We(u*g),w=We((i+l)*(h+d)-C-P),B=We(k-M),b=We(k+M),E=We(P-x*C),T=We(w*B),F=We(b*E),I=We(w*E),j=We(B*b);return new oi(T,F,j,I)}multiply(s,i=!0){if(!i&&(s===0n||this.is0()))return ta;if(ts(s,1n,Wc),s===1n)return this;if(this.equals(Li))return uE(s).p;let l=ta,u=Li;for(let c=this;s>0n;c=c.double(),s>>=1n)s&1n?l=l.add(c):i&&(u=u.add(c));return l}toAffine(){const{ex:s,ey:i,ez:l}=this;if(this.equals(ta))return{x:0n,y:1n};const u=mA(l,Ln);return We(l*u)!==1n&&hr("invalid inverse"),{x:We(s*u),y:We(i*u)}}toBytes(){const{x:s,y:i}=this.assertValidity().toAffine(),l=gA(i);return l[31]|=s&1n?128:0,l}toHex(){return ih(this.toBytes())}clearCofactor(){return this.multiply(td(GC),!1)}isSmallOrder(){return this.clearCofactor().is0()}isTorsionFree(){let s=this.multiply(Wc/2n,!1).double();return Wc%2n&&(s=s.add(this)),s.is0()}static fromHex(s,i){return oi.fromBytes(_o(s),i)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}toRawBytes(){return this.toBytes()}};$o(oi,"BASE"),$o(oi,"ZERO");let Ur=oi;const Li=new Ur(Fg,Ng,1n,We(Fg*Ng)),ta=new Ur(0n,1n,1n,0n);Ur.BASE=Li;Ur.ZERO=ta;const gA=n=>oh(dA(ts(n,0n,T0),Cl)).reverse(),sh=n=>td("0x"+ih(rh(ss(n)).reverse())),ii=(n,s)=>{let i=n;for(;s-- >0n;)i*=i,i%=Ln;return i},XC=n=>{const i=n*n%Ln*n%Ln,l=ii(i,2n)*i%Ln,u=ii(l,1n)*n%Ln,c=ii(u,5n)*u%Ln,h=ii(c,10n)*c%Ln,d=ii(h,20n)*h%Ln,g=ii(d,40n)*d%Ln,m=ii(g,80n)*g%Ln,x=ii(m,80n)*g%Ln,v=ii(x,10n)*c%Ln;return{pow_p_5_8:ii(v,2n)*n%Ln,b2:i}},Ig=0x2b8324804fc1df0b2b4d00993dfbd7a72f431806ad2fe478c4ee1b274a0ea0b0n,JC=(n,s)=>{const i=We(s*s*s),l=We(i*i*s),u=XC(n*l).pow_p_5_8;let c=We(n*i*u);const h=We(s*c*c),d=c,g=We(c*Ig),m=h===n,x=h===We(-n),v=h===We(-n*Ig);return m&&(c=d),(x||v)&&(c=g),(We(c)&1n)===1n&&(c=We(-c)),{isValid:m||x,value:c}},nd=n=>pA(sh(n)),ah=(...n)=>fh.sha512Async(...n),lh=(...n)=>YC("sha512Sync")(...n),xA=n=>{const s=n.slice(0,ai);s[0]&=248,s[31]&=127,s[31]|=64;const i=n.slice(ai,Cl),l=nd(s),u=Li.multiply(l),c=u.toBytes();return{head:s,prefix:i,scalar:l,point:u,pointBytes:c}},uh=n=>ah(_o(n,ai)).then(xA),ch=n=>xA(lh(_o(n,ai))),eE=n=>uh(n).then(s=>s.pointBytes),tE=n=>ch(n).pointBytes,vA=n=>ah(n.hashable).then(n.finish),AA=n=>n.finish(lh(n.hashable)),yA=(n,s,i)=>{const{pointBytes:l,scalar:u}=n,c=nd(s),h=Li.multiply(c).toBytes();return{hashable:El(h,l,i),finish:m=>{const x=pA(c+nd(m)*u);return ss(El(h,gA(x)),Cl)}}},nE=async(n,s)=>{const i=_o(n),l=await uh(s),u=await ah(l.prefix,i);return vA(yA(l,u,i))},rE=(n,s)=>{const i=_o(n),l=ch(s),u=lh(l.prefix,i);return AA(yA(l,u,i))},dh={zip215:!0},_A=(n,s,i,l=dh)=>{n=_o(n,Cl),s=_o(s),i=_o(i,ai);const{zip215:u}=l;let c,h,d,g,m=Uint8Array.of();try{c=Ur.fromHex(i,u),h=Ur.fromHex(n.slice(0,ai),u),d=sh(n.slice(ai,Cl)),g=Li.multiply(d,!1),m=El(h.toBytes(),c.toBytes(),s)}catch{}return{hashable:m,finish:v=>{if(g==null||!u&&c.isSmallOrder())return!1;const C=nd(v);return h.add(c.multiply(C,!1)).add(g.negate()).clearCofactor().is0()}}},iE=async(n,s,i,l=dh)=>vA(_A(n,s,i,l)),oE=(n,s,i,l=dh)=>AA(_A(n,s,i,l)),fh={sha512Async:async(...n)=>{const s=QC(),i=El(...n);return Cd(await s.digest("SHA-512",i.buffer))},sha512Sync:void 0,bytesToHex:ih,hexToBytes:oh,concatBytes:El,mod:We,invert:mA,randomBytes:hA},sE={getExtendedPublicKeyAsync:uh,getExtendedPublicKey:ch,randomPrivateKey:()=>hA(ai),precompute:(n=8,s=Li)=>(s.multiply(3n),s)},rd=8,aE=256,wA=Math.ceil(aE/rd)+1,D0=2**(rd-1),lE=()=>{const n=[];let s=Li,i=s;for(let l=0;l<wA;l++){i=s,n.push(i);for(let u=1;u<D0;u++)i=i.add(s),n.push(i);s=i.double()}return n};let Og;const jg=(n,s)=>{const i=s.negate();return n?i:s},uE=n=>{const s=Og||(Og=lE());let i=ta,l=Li;const u=2**rd,c=u,h=td(u-1),d=td(rd);for(let g=0;g<wA;g++){let m=Number(n&h);n>>=d,m>D0&&(m-=c,n+=1n);const x=g*D0,v=x,C=x+Math.abs(m)-1,P=g%2!==0,M=m<0;m===0?l=l.add(jg(P,s[v])):i=i.add(jg(M,s[C]))}return{p:i,f:l}},cE=Object.freeze(Object.defineProperty({__proto__:null,CURVE:uA,ExtendedPoint:Ur,Point:Ur,etc:fh,getPublicKey:tE,getPublicKeyAsync:eE,sign:rE,signAsync:nE,utils:sE,verify:oE,verifyAsync:iE},Symbol.toStringTag,{value:"Module"})),dE=Cx(cE);var Xo={},A0={exports:{}},zg;function fE(){return zg||(zg=1,(function(n,s){var i=(()=>{var u;var l=typeof document<"u"?(u=document.currentScript)==null?void 0:u.src:void 0;return(async function(c={}){var _e;var h,d=c,g=typeof window=="object",m=typeof WorkerGlobalScope<"u",x=typeof process=="object"&&((_e=process.versions)==null?void 0:_e.node)&&process.type!="renderer";typeof __filename<"u"?l=__filename:m&&(l=self.location.href);var v="";function C(fe){return d.locateFile?d.locateFile(fe,v):v+fe}var P,M;if(x){var k=ed;v=__dirname+"/",M=fe=>{fe=E(fe)?new URL(fe):fe;var ve=k.readFileSync(fe);return ve},P=async(fe,ve=!0)=>{fe=E(fe)?new URL(fe):fe;var we=k.readFileSync(fe,ve?void 0:"utf8");return we},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2)}else if(g||m){try{v=new URL(".",l).href}catch{}m&&(M=fe=>{var ve=new XMLHttpRequest;return ve.open("GET",fe,!1),ve.responseType="arraybuffer",ve.send(null),new Uint8Array(ve.response)}),P=async fe=>{if(E(fe))return new Promise((we,Ge)=>{var re=new XMLHttpRequest;re.open("GET",fe,!0),re.responseType="arraybuffer",re.onload=()=>{if(re.status==200||re.status==0&&re.response){we(re.response);return}Ge(re.status)},re.onerror=Ge,re.send(null)});var ve=await fetch(fe,{credentials:"same-origin"});if(ve.ok)return ve.arrayBuffer();throw new Error(ve.status+" : "+ve.url)}}console.log.bind(console);var w=console.error.bind(console),B,b=!1,E=fe=>fe.startsWith("file://"),T,F,I,j,O,G=!1;function U(){var fe=I.buffer;d.HEAP8=j=new Int8Array(fe),d.HEAPU8=O=new Uint8Array(fe),d.HEAP32=new Int32Array(fe),d.HEAPU32=new Uint32Array(fe),new BigInt64Array(fe),new BigUint64Array(fe)}function K(){if(d.preRun)for(typeof d.preRun=="function"&&(d.preRun=[d.preRun]);d.preRun.length;)Oe(d.preRun.shift());Ae(Be)}function J(){G=!0,Rt.b()}function Y(){if(d.postRun)for(typeof d.postRun=="function"&&(d.postRun=[d.postRun]);d.postRun.length;)xe(d.postRun.shift());Ae(pe)}var ie=0,ge=null;function $(fe){var ve;ie++,(ve=d.monitorRunDependencies)==null||ve.call(d,ie)}function se(fe){var we;if(ie--,(we=d.monitorRunDependencies)==null||we.call(d,ie),ie==0&&ge){var ve=ge;ge=null,ve()}}function W(fe){var we;(we=d.onAbort)==null||we.call(d,fe),fe="Aborted("+fe+")",w(fe),b=!0,fe+=". Build with -sASSERTIONS for more info.";var ve=new WebAssembly.RuntimeError(fe);throw F==null||F(ve),ve}var te;function Z(){return C("orlp-ed25519.wasm")}function D(fe){if(fe==te&&B)return new Uint8Array(B);if(M)return M(fe);throw"both async and sync fetching of the wasm failed"}async function H(fe){if(!B)try{var ve=await P(fe);return new Uint8Array(ve)}catch{}return D(fe)}async function q(fe,ve){try{var we=await H(fe),Ge=await WebAssembly.instantiate(we,ve);return Ge}catch(re){w(`failed to asynchronously prepare wasm: ${re}`),W(re)}}async function Q(fe,ve,we){if(!fe&&typeof WebAssembly.instantiateStreaming=="function"&&!E(ve)&&!x)try{var Ge=fetch(ve,{credentials:"same-origin"}),re=await WebAssembly.instantiateStreaming(Ge,we);return re}catch(ye){w(`wasm streaming compile failed: ${ye}`),w("falling back to ArrayBuffer instantiation")}return q(ve,we)}function ae(){return{a:Ht}}async function ce(){function fe(ye,Ce){return Rt=ye.exports,I=Rt.a,U(),$t(Rt),se(),Rt}$();function ve(ye){return fe(ye.instance)}var we=ae();if(d.instantiateWasm)return new Promise((ye,Ce)=>{d.instantiateWasm(we,(Ne,Je)=>{ye(fe(Ne))})});te??(te=Z());var Ge=await Q(B,te,we),re=ve(Ge);return re}var Ae=fe=>{for(;fe.length>0;)fe.shift()(d)},pe=[],xe=fe=>pe.push(fe),Be=[],Oe=fe=>Be.push(fe),Xe=fe=>Dt(fe),Ee=()=>Yt(),je=fe=>{var ve=d["_"+fe];return ve},at=(fe,ve)=>{j.set(fe,ve)},mt=fe=>{for(var ve=0,we=0;we<fe.length;++we){var Ge=fe.charCodeAt(we);Ge<=127?ve++:Ge<=2047?ve+=2:Ge>=55296&&Ge<=57343?(ve+=4,++we):ve+=3}return ve},ot=(fe,ve,we,Ge)=>{if(!(Ge>0))return 0;for(var re=we,ye=we+Ge-1,Ce=0;Ce<fe.length;++Ce){var Ne=fe.codePointAt(Ce);if(Ne<=127){if(we>=ye)break;ve[we++]=Ne}else if(Ne<=2047){if(we+1>=ye)break;ve[we++]=192|Ne>>6,ve[we++]=128|Ne&63}else if(Ne<=65535){if(we+2>=ye)break;ve[we++]=224|Ne>>12,ve[we++]=128|Ne>>6&63,ve[we++]=128|Ne&63}else{if(we+3>=ye)break;ve[we++]=240|Ne>>18,ve[we++]=128|Ne>>12&63,ve[we++]=128|Ne>>6&63,ve[we++]=128|Ne&63,Ce++}}return ve[we]=0,we-re},qe=(fe,ve,we)=>ot(fe,O,ve,we),Ke=fe=>Gt(fe),Qe=fe=>{var ve=mt(fe)+1,we=Ke(ve);return qe(fe,we,ve),we},rt=typeof TextDecoder<"u"?new TextDecoder:void 0,He=(fe,ve=0,we=NaN)=>{for(var Ge=ve+we,re=ve;fe[re]&&!(re>=Ge);)++re;if(re-ve>16&&fe.buffer&&rt)return rt.decode(fe.subarray(ve,re));for(var ye="";ve<re;){var Ce=fe[ve++];if(!(Ce&128)){ye+=String.fromCharCode(Ce);continue}var Ne=fe[ve++]&63;if((Ce&224)==192){ye+=String.fromCharCode((Ce&31)<<6|Ne);continue}var Je=fe[ve++]&63;if((Ce&240)==224?Ce=(Ce&15)<<12|Ne<<6|Je:Ce=(Ce&7)<<18|Ne<<12|Je<<6|fe[ve++]&63,Ce<65536)ye+=String.fromCharCode(Ce);else{var Fe=Ce-65536;ye+=String.fromCharCode(55296|Fe>>10,56320|Fe&1023)}}return ye},Et=(fe,ve)=>fe?He(O,fe,ve):"",zt=(fe,ve,we,Ge,re)=>{var ye={string:dt=>{var Pt=0;return dt!=null&&dt!==0&&(Pt=Qe(dt)),Pt},array:dt=>{var Pt=Ke(dt.length);return at(dt,Pt),Pt}};function Ce(dt){return ve==="string"?Et(dt):ve==="boolean"?!!dt:dt}var Ne=je(fe),Je=[],Fe=0;if(Ge)for(var ft=0;ft<Ge.length;ft++){var St=ye[we[ft]];St?(Fe===0&&(Fe=Ee()),Je[ft]=St(Ge[ft])):Je[ft]=Ge[ft]}var xt=Ne(...Je);function an(dt){return Fe!==0&&Xe(Fe),Ce(dt)}return xt=an(xt),xt},Qt=(fe,ve,we,Ge)=>{var re=!we||we.every(Ce=>Ce==="number"||Ce==="boolean"),ye=ve!=="string";return ye&&re&&!Ge?je(fe):(...Ce)=>zt(fe,ve,we,Ce)};d.noExitRuntime&&d.noExitRuntime,d.print&&d.print,d.printErr&&(w=d.printErr),d.wasmBinary&&(B=d.wasmBinary),d.arguments&&d.arguments,d.thisProgram&&d.thisProgram,d.ccall=zt,d.cwrap=Qt;var Dt,Gt,Yt;function $t(fe){d._orlp_derive_public_key=fe.c,d._orlp_validate_keypair=fe.d,d._orlp_sign=fe.e,d._orlp_verify=fe.f,Dt=fe.g,Gt=fe.h,Yt=fe.i}var Ht={},Rt=await ce();function Vt(){if(ie>0){ge=Vt;return}if(K(),ie>0){ge=Vt;return}function fe(){var ve;d.calledRun=!0,!b&&(J(),T==null||T(d),(ve=d.onRuntimeInitialized)==null||ve.call(d),Y())}d.setStatus?(d.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>d.setStatus(""),1),fe()},1)):fe()}function Pe(){if(d.preInit)for(typeof d.preInit=="function"&&(d.preInit=[d.preInit]);d.preInit.length>0;)d.preInit.shift()()}return Pe(),Vt(),G?h=d:h=new Promise((fe,ve)=>{T=fe,F=ve}),h})})();n.exports=i,n.exports.default=i})(A0)),A0.exports}var Hg;function hh(){if(Hg)return Xo;Hg=1,Object.defineProperty(Xo,"__esModule",{value:!0}),Xo.derivePublicKey=l,Xo.validateKeyPair=u,Xo.sign=c,Xo.verify=h;const n=Sn(),s=fE();async function i(){return await s()}async function l(d){const g=await i(),m=(0,n.hexToBytes)(d);if(m.length!==64)throw new Error(`Invalid private key length: expected 64 bytes, got ${m.length}`);const x=1024,v=1088;if(g.HEAPU8.set(m,x),g.ccall("orlp_derive_public_key","number",["number","number"],[v,x])!==0)throw new Error("orlp key derivation failed: invalid private key");const P=new Uint8Array(32);return P.set(g.HEAPU8.subarray(v,v+32)),(0,n.bytesToHex)(P)}async function u(d,g){try{const m=await i(),x=(0,n.hexToBytes)(d),v=(0,n.hexToBytes)(g);if(x.length!==64||v.length!==32)return!1;const C=2048,P=2112;return m.HEAPU8.set(x,C),m.HEAPU8.set(v,P),m.ccall("orlp_validate_keypair","number",["number","number"],[P,C])===1}catch{return!1}}async function c(d,g,m){const x=await i(),v=(0,n.hexToBytes)(d),C=(0,n.hexToBytes)(g),P=(0,n.hexToBytes)(m);if(C.length!==64)throw new Error(`Invalid private key length: expected 64 bytes, got ${C.length}`);if(P.length!==32)throw new Error(`Invalid public key length: expected 32 bytes, got ${P.length}`);const M=1e5,k=2e5,w=3e5,B=4e5;x.HEAPU8.set(v,M),x.HEAPU8.set(C,k),x.HEAPU8.set(P,w),x.ccall("orlp_sign","void",["number","number","number","number","number"],[B,M,v.length,w,k]);const b=new Uint8Array(64);return b.set(x.HEAPU8.subarray(B,B+64)),(0,n.bytesToHex)(b)}async function h(d,g,m){try{const x=await i(),v=(0,n.hexToBytes)(d),C=(0,n.hexToBytes)(g),P=(0,n.hexToBytes)(m);if(v.length!==64||P.length!==32)return!1;const M=5e5,k=6e5,w=7e5;return x.HEAPU8.set(v,k),x.HEAPU8.set(C,M),x.HEAPU8.set(P,w),x.ccall("orlp_verify","number",["number","number","number","number"],[k,M,C.length,w])===1}catch{return!1}}return Xo}var Vg;function bA(){if(Vg)return zr;Vg=1;var n=zr&&zr.__createBinding||(Object.create?(function(m,x,v,C){C===void 0&&(C=v);var P=Object.getOwnPropertyDescriptor(x,v);(!P||("get"in P?!x.__esModule:P.writable||P.configurable))&&(P={enumerable:!0,get:function(){return x[v]}}),Object.defineProperty(m,C,P)}):(function(m,x,v,C){C===void 0&&(C=v),m[C]=x[v]})),s=zr&&zr.__setModuleDefault||(Object.create?(function(m,x){Object.defineProperty(m,"default",{enumerable:!0,value:x})}):function(m,x){m.default=x}),i=zr&&zr.__importStar||(function(){var m=function(x){return m=Object.getOwnPropertyNames||function(v){var C=[];for(var P in v)Object.prototype.hasOwnProperty.call(v,P)&&(C[C.length]=P);return C},m(x)};return function(x){if(x&&x.__esModule)return x;var v={};if(x!=null)for(var C=m(x),P=0;P<C.length;P++)C[P]!=="default"&&n(v,x,C[P]);return s(v,x),v}})();Object.defineProperty(zr,"__esModule",{value:!0}),zr.Ed25519SignatureVerifier=void 0;const l=i(dE),u=Sn(),c=hh();async function h(m){if(typeof globalThis<"u"&&globalThis.crypto&&globalThis.crypto.subtle){const x=await globalThis.crypto.subtle.digest("SHA-512",m);return new Uint8Array(x)}if(typeof P0<"u")try{const{createHash:x}=ed;return x("sha512").update(m).digest()}catch{}throw new Error("No SHA-512 implementation available")}function d(m){if(typeof P0<"u")try{const{createHash:x}=ed;return x("sha512").update(m).digest()}catch{}try{const x=aA(),v=x.lib.WordArray.create(m),C=x.SHA512(v),P=new Uint8Array(64);for(let M=0;M<16;M++){const k=C.words[M]||0;P[M*4]=k>>>24&255,P[M*4+1]=k>>>16&255,P[M*4+2]=k>>>8&255,P[M*4+3]=k&255}return P}catch{throw new Error("No SHA-512 implementation available for synchronous operation")}}l.etc.sha512Async=h;try{l.etc.sha512Sync=d}catch(m){console.debug("Could not set up synchronous SHA-512:",m)}class g{static async verifyAdvertisementSignature(x,v,C,P){try{const M=(0,u.hexToBytes)(x),k=(0,u.hexToBytes)(v),w=(0,u.hexToBytes)(P),B=this.constructAdvertSignedMessage(x,C,w);return await l.verify(k,B,M)}catch(M){return console.error("Ed25519 signature verification failed:",M),!1}}static constructAdvertSignedMessage(x,v,C){const P=(0,u.hexToBytes)(x),M=new Uint8Array(4);M[0]=v&255,M[1]=v>>8&255,M[2]=v>>16&255,M[3]=v>>24&255;const k=new Uint8Array(36+C.length);return k.set(P,0),k.set(M,32),k.set(C,36),k}static getSignedMessageDescription(x,v,C){return`Public Key: ${x} + Timestamp: ${v} (${new Date(v*1e3).toISOString()}) + App Data: ${C}`}static getSignedMessageHex(x,v,C){const P=(0,u.hexToBytes)(C),M=this.constructAdvertSignedMessage(x,v,P);return(0,u.bytesToHex)(M)}static async derivePublicKey(x){try{const v=(0,u.hexToBytes)(x);if(v.length!==64)throw new Error(`Invalid private key length: expected 64 bytes, got ${v.length}`);return await(0,c.derivePublicKey)(x)}catch(v){throw new Error(`Failed to derive public key: ${v instanceof Error?v.message:"Unknown error"}`)}}static derivePublicKeySync(x){try{const v=(0,u.hexToBytes)(x);throw v.length!==64?new Error(`Invalid private key length: expected 64 bytes, got ${v.length}`):new Error("Synchronous key derivation not supported with WASM. Use derivePublicKey() instead.")}catch(v){throw new Error(`Failed to derive public key: ${v instanceof Error?v.message:"Unknown error"}`)}}static async validateKeyPair(x,v){try{return await(0,c.validateKeyPair)(x,v)}catch{return!1}}}return zr.Ed25519SignatureVerifier=g,zr}var Ug;function hE(){if(Ug)return sl;Ug=1,Object.defineProperty(sl,"__esModule",{value:!0}),sl.AdvertPayloadDecoder=void 0;const n=pr(),s=Sn(),i=bl(),l=bA();class u{static decode(h,d){try{if(h.length<101){const B={type:n.PayloadType.Advert,version:n.PayloadVersion.Version1,isValid:!1,errors:["Advertisement payload too short"],publicKey:"",timestamp:0,signature:"",appData:{flags:0,deviceRole:n.DeviceRole.ChatNode,hasLocation:!1,hasName:!1}};return d!=null&&d.includeSegments&&(B.segments=[{name:"Invalid Advert Data",description:"Advert payload too short (minimum 101 bytes required)",startByte:d.segmentOffset||0,endByte:(d.segmentOffset||0)+h.length-1,value:(0,s.bytesToHex)(h)}]),B}const g=[],m=(d==null?void 0:d.segmentOffset)||0;let x=0;const v=(0,s.bytesToHex)(h.subarray(x,x+32));d!=null&&d.includeSegments&&g.push({name:"Public Key",description:"Ed25519 public key",startByte:m+x,endByte:m+x+31,value:v}),x+=32;const C=this.readUint32LE(h,x);if(d!=null&&d.includeSegments){const B=new Date(C*1e3);g.push({name:"Timestamp",description:`${C} (${B.toISOString().slice(0,19)}Z)`,startByte:m+x,endByte:m+x+3,value:(0,s.bytesToHex)(h.subarray(x,x+4))})}x+=4;const P=(0,s.bytesToHex)(h.subarray(x,x+64));d!=null&&d.includeSegments&&g.push({name:"Signature",description:"Ed25519 signature",startByte:m+x,endByte:m+x+63,value:P}),x+=64;const M=h[x];if(d!=null&&d.includeSegments){const B=M.toString(2).padStart(8,"0"),b=this.parseDeviceRole(M),T=` | Bits 0-3 (Role): ${(0,i.getDeviceRoleName)(b)} | Bit 4 (Location): ${M&n.AdvertFlags.HasLocation?"Yes":"No"} | Bit 7 (Name): ${M&n.AdvertFlags.HasName?"Yes":"No"}`;g.push({name:"App Flags",description:`Binary: ${B}${T}`,startByte:m+x,endByte:m+x,value:M.toString(16).padStart(2,"0").toUpperCase()})}x+=1;const k={type:n.PayloadType.Advert,version:n.PayloadVersion.Version1,isValid:!0,publicKey:v,timestamp:C,signature:P,appData:{flags:M,deviceRole:this.parseDeviceRole(M),hasLocation:!!(M&n.AdvertFlags.HasLocation),hasName:!!(M&n.AdvertFlags.HasName)}};let w=x;if(M&n.AdvertFlags.HasLocation&&h.length>=w+8){const B=this.readInt32LE(h,w)/1e6,b=this.readInt32LE(h,w+4)/1e6;k.appData.location={latitude:Math.round(B*1e6)/1e6,longitude:Math.round(b*1e6)/1e6},d!=null&&d.includeSegments&&(g.push({name:"Latitude",description:`${B} (${B})`,startByte:m+w,endByte:m+w+3,value:(0,s.bytesToHex)(h.subarray(w,w+4))}),g.push({name:"Longitude",description:`${b} (${b})`,startByte:m+w+4,endByte:m+w+7,value:(0,s.bytesToHex)(h.subarray(w+4,w+8))})),w+=8}if(M&n.AdvertFlags.HasFeature1&&(w+=2),M&n.AdvertFlags.HasFeature2&&(w+=2),M&n.AdvertFlags.HasName&&h.length>w){const B=h.subarray(w),b=new TextDecoder("utf-8").decode(B).replace(/\0.*$/,"");k.appData.name=this.sanitizeControlCharacters(b)||b,d!=null&&d.includeSegments&&g.push({name:"Node Name",description:`Node name: "${k.appData.name}"`,startByte:m+w,endByte:m+h.length-1,value:(0,s.bytesToHex)(B)})}return d!=null&&d.includeSegments&&(k.segments=g),k}catch(g){return{type:n.PayloadType.Advert,version:n.PayloadVersion.Version1,isValid:!1,errors:[g instanceof Error?g.message:"Failed to decode advertisement payload"],publicKey:"",timestamp:0,signature:"",appData:{flags:0,deviceRole:n.DeviceRole.ChatNode,hasLocation:!1,hasName:!1}}}}static async decodeWithVerification(h,d){const g=this.decode(h,d);if(!g||!g.isValid)return g;try{const x=h.subarray(100),v=(0,s.bytesToHex)(x),C=await l.Ed25519SignatureVerifier.verifyAdvertisementSignature(g.publicKey,g.signature,g.timestamp,v);g.signatureValid=C,C||(g.signatureError="Ed25519 signature verification failed",g.isValid=!1,g.errors||(g.errors=[]),g.errors.push("Invalid Ed25519 signature"))}catch(m){g.signatureValid=!1,g.signatureError=m instanceof Error?m.message:"Signature verification error",g.isValid=!1,g.errors||(g.errors=[]),g.errors.push("Signature verification failed: "+(m instanceof Error?m.message:"Unknown error"))}return g}static parseDeviceRole(h){switch(h&15){case 1:return n.DeviceRole.ChatNode;case 2:return n.DeviceRole.Repeater;case 3:return n.DeviceRole.RoomServer;case 4:return n.DeviceRole.Sensor;default:return n.DeviceRole.ChatNode}}static readUint32LE(h,d){return h[d]|h[d+1]<<8|h[d+2]<<16|h[d+3]<<24}static readInt32LE(h,d){const g=this.readUint32LE(h,d);return g>2147483647?g-4294967296:g}static sanitizeControlCharacters(h){return h&&h.trim().replace(/[\x00-\x1F\x7F]/g,"")||null}}return sl.AdvertPayloadDecoder=u,sl}var al={},Zg;function pE(){if(Zg)return al;Zg=1,Object.defineProperty(al,"__esModule",{value:!0}),al.TracePayloadDecoder=void 0;const n=pr(),s=Sn();class i{static decode(u,c,h){try{if(u.length<9){const b={type:n.PayloadType.Trace,version:n.PayloadVersion.Version1,isValid:!1,errors:["Trace payload too short (need at least tag(4) + auth(4) + flags(1))"],traceTag:"00000000",authCode:0,flags:0,pathHashes:[]};return h!=null&&h.includeSegments&&(b.segments=[{name:"Invalid Trace Data",description:"Trace payload too short (minimum 9 bytes required)",startByte:h.segmentOffset||0,endByte:(h.segmentOffset||0)+u.length-1,value:(0,s.bytesToHex)(u)}]),b}let d=0;const g=[],m=(h==null?void 0:h.segmentOffset)||0,x=this.readUint32LE(u,d),v=(0,s.numberToHex)(x,8);h!=null&&h.includeSegments&&g.push({name:"Trace Tag",description:`Unique identifier for this trace: 0x${x.toString(16).padStart(8,"0")}`,startByte:m+d,endByte:m+d+3,value:(0,s.bytesToHex)(u.slice(d,d+4))}),d+=4;const C=this.readUint32LE(u,d);h!=null&&h.includeSegments&&g.push({name:"Auth Code",description:`Authentication/verification code: ${C}`,startByte:m+d,endByte:m+d+3,value:(0,s.bytesToHex)(u.slice(d,d+4))}),d+=4;const P=u[d];h!=null&&h.includeSegments&&g.push({name:"Flags",description:`Application-defined control flags: 0x${P.toString(16).padStart(2,"0")} (${P.toString(2).padStart(8,"0")}b)`,startByte:m+d,endByte:m+d,value:P.toString(16).padStart(2,"0").toUpperCase()}),d+=1;const M=[],k=d;for(;d<u.length;)M.push((0,s.byteToHex)(u[d])),d++;if(h!=null&&h.includeSegments&&M.length>0){const b=M.join(" ");g.push({name:"Path Hashes",description:`Node hashes in trace path: ${b}`,startByte:m+k,endByte:m+u.length-1,value:(0,s.bytesToHex)(u.slice(k))})}let w;c&&c.length>0&&(w=c.map(b=>{const E=parseInt(b,16);return(E>127?E-256:E)/4}));const B={type:n.PayloadType.Trace,version:n.PayloadVersion.Version1,isValid:!0,traceTag:v,authCode:C,flags:P,pathHashes:M,snrValues:w};return h!=null&&h.includeSegments&&(B.segments=g),B}catch(d){return{type:n.PayloadType.Trace,version:n.PayloadVersion.Version1,isValid:!1,errors:[d instanceof Error?d.message:"Failed to decode trace payload"],traceTag:"00000000",authCode:0,flags:0,pathHashes:[]}}}static readUint32LE(u,c){return u[c]|u[c+1]<<8|u[c+2]<<16|u[c+3]<<24}}return al.TracePayloadDecoder=i,al}var ll={},Wg;function mE(){if(Wg)return ll;Wg=1,Object.defineProperty(ll,"__esModule",{value:!0}),ll.GroupTextPayloadDecoder=void 0;const n=pr(),s=nh(),i=Sn();class l{static decode(c,h){try{if(c.length<3){const M={type:n.PayloadType.GroupText,version:n.PayloadVersion.Version1,isValid:!1,errors:["GroupText payload too short (need at least channel_hash(1) + MAC(2))"],channelHash:"",cipherMac:"",ciphertext:"",ciphertextLength:0};return h!=null&&h.includeSegments&&(M.segments=[{name:"Invalid GroupText Data",description:"GroupText payload too short (minimum 3 bytes required)",startByte:h.segmentOffset||0,endByte:(h.segmentOffset||0)+c.length-1,value:(0,i.bytesToHex)(c)}]),M}const d=[],g=(h==null?void 0:h.segmentOffset)||0;let m=0;const x=(0,i.byteToHex)(c[m]);h!=null&&h.includeSegments&&d.push({name:"Channel Hash",description:"First byte of SHA256 of channel's shared key",startByte:g+m,endByte:g+m,value:x}),m+=1;const v=(0,i.bytesToHex)(c.subarray(m,m+2));h!=null&&h.includeSegments&&d.push({name:"Cipher MAC",description:"MAC for encrypted data",startByte:g+m,endByte:g+m+1,value:v}),m+=2;const C=(0,i.bytesToHex)(c.subarray(m));h!=null&&h.includeSegments&&c.length>m&&d.push({name:"Ciphertext",description:"Encrypted message content (timestamp + flags + message)",startByte:g+m,endByte:g+c.length-1,value:C});const P={type:n.PayloadType.GroupText,version:n.PayloadVersion.Version1,isValid:!0,channelHash:x,cipherMac:v,ciphertext:C,ciphertextLength:c.length-3};if(h!=null&&h.keyStore&&h.keyStore.hasChannelKey(x)){const M=h.keyStore.getChannelKeys(x);for(const k of M){const w=s.ChannelCrypto.decryptGroupTextMessage(C,v,k);if(w.success&&w.data){P.decrypted={timestamp:w.data.timestamp,flags:w.data.flags,sender:w.data.sender,message:w.data.message};break}}}return h!=null&&h.includeSegments&&(P.segments=d),P}catch(d){return{type:n.PayloadType.GroupText,version:n.PayloadVersion.Version1,isValid:!1,errors:[d instanceof Error?d.message:"Failed to decode GroupText payload"],channelHash:"",cipherMac:"",ciphertext:"",ciphertextLength:0}}}}return ll.GroupTextPayloadDecoder=l,ll}var ul={},qg;function gE(){if(qg)return ul;qg=1,Object.defineProperty(ul,"__esModule",{value:!0}),ul.RequestPayloadDecoder=void 0;const n=pr(),s=Sn();class i{static decode(u,c){try{if(u.length<4){const M={type:n.PayloadType.Request,version:n.PayloadVersion.Version1,isValid:!1,errors:["Request payload too short (minimum 4 bytes: dest hash + source hash + MAC)"],timestamp:0,requestType:n.RequestType.GetStats,requestData:"",destinationHash:"",sourceHash:"",cipherMac:"",ciphertext:""};return c!=null&&c.includeSegments&&(M.segments=[{name:"Invalid Request Data",description:"Request payload too short (minimum 4 bytes required: 1 for dest hash + 1 for source hash + 2 for MAC)",startByte:c.segmentOffset||0,endByte:(c.segmentOffset||0)+u.length-1,value:(0,s.bytesToHex)(u)}]),M}const h=[],d=(c==null?void 0:c.segmentOffset)||0;let g=0;const m=(0,s.bytesToHex)(u.subarray(g,g+1));c!=null&&c.includeSegments&&h.push({name:"Destination Hash",description:`First byte of destination node public key: 0x${m}`,startByte:d+g,endByte:d+g,value:m}),g+=1;const x=(0,s.bytesToHex)(u.subarray(g,g+1));c!=null&&c.includeSegments&&h.push({name:"Source Hash",description:`First byte of source node public key: 0x${x}`,startByte:d+g,endByte:d+g,value:x}),g+=1;const v=(0,s.bytesToHex)(u.subarray(g,g+2));c!=null&&c.includeSegments&&h.push({name:"Cipher MAC",description:"MAC for encrypted data verification (2 bytes)",startByte:d+g,endByte:d+g+1,value:v}),g+=2;const C=(0,s.bytesToHex)(u.subarray(g));c!=null&&c.includeSegments&&u.length>g&&h.push({name:"Ciphertext",description:`Encrypted message data (${u.length-g} bytes). Contains encrypted plaintext with this structure:
 Timestamp (4 bytes) - send time as unix timestamp
 Request Type (1 byte) - type of request (GetStats, GetTelemetryData, etc.)
 Request Data (remaining bytes) - additional request-specific data`,startByte:d+g,endByte:d+u.length-1,value:C});const P={type:n.PayloadType.Request,version:n.PayloadVersion.Version1,isValid:!0,timestamp:0,requestType:n.RequestType.GetStats,requestData:"",destinationHash:m,sourceHash:x,cipherMac:v,ciphertext:C};return c!=null&&c.includeSegments&&(P.segments=h),P}catch(h){return{type:n.PayloadType.Request,version:n.PayloadVersion.Version1,isValid:!1,errors:[h instanceof Error?h.message:"Failed to decode request payload"],timestamp:0,requestType:n.RequestType.GetStats,requestData:"",destinationHash:"",sourceHash:"",cipherMac:"",ciphertext:""}}}}return ul.RequestPayloadDecoder=i,ul}var cl={},Gg;function xE(){if(Gg)return cl;Gg=1,Object.defineProperty(cl,"__esModule",{value:!0}),cl.ResponsePayloadDecoder=void 0;const n=pr(),s=Sn();class i{static decode(u,c){try{if(u.length<4){const M={type:n.PayloadType.Response,version:n.PayloadVersion.Version1,isValid:!1,errors:["Response payload too short (minimum 4 bytes: dest + source + MAC)"],destinationHash:"",sourceHash:"",cipherMac:"",ciphertext:"",ciphertextLength:0};return c!=null&&c.includeSegments&&(M.segments=[{name:"Invalid Response Data",description:"Response payload too short (minimum 4 bytes required)",startByte:c.segmentOffset||0,endByte:(c.segmentOffset||0)+u.length-1,value:(0,s.bytesToHex)(u)}]),M}const h=[],d=(c==null?void 0:c.segmentOffset)||0;let g=0;const m=(0,s.byteToHex)(u[g]);c!=null&&c.includeSegments&&h.push({name:"Destination Hash",description:"First byte of destination node public key",startByte:d+g,endByte:d+g,value:m}),g+=1;const x=(0,s.byteToHex)(u[g]);c!=null&&c.includeSegments&&h.push({name:"Source Hash",description:"First byte of source node public key",startByte:d+g,endByte:d+g,value:x}),g+=1;const v=(0,s.bytesToHex)(u.subarray(g,g+2));c!=null&&c.includeSegments&&h.push({name:"Cipher MAC",description:"MAC for encrypted data in next field",startByte:d+g,endByte:d+g+1,value:v}),g+=2;const C=(0,s.bytesToHex)(u.subarray(g));c!=null&&c.includeSegments&&u.length>g&&h.push({name:"Ciphertext",description:"Encrypted response data (tag + content)",startByte:d+g,endByte:d+u.length-1,value:C});const P={type:n.PayloadType.Response,version:n.PayloadVersion.Version1,isValid:!0,destinationHash:m,sourceHash:x,cipherMac:v,ciphertext:C,ciphertextLength:u.length-4};return c!=null&&c.includeSegments&&(P.segments=h),P}catch(h){return{type:n.PayloadType.Response,version:n.PayloadVersion.Version1,isValid:!1,errors:[h instanceof Error?h.message:"Failed to decode response payload"],destinationHash:"",sourceHash:"",cipherMac:"",ciphertext:"",ciphertextLength:0}}}}return cl.ResponsePayloadDecoder=i,cl}var dl={},$g;function vE(){if($g)return dl;$g=1,Object.defineProperty(dl,"__esModule",{value:!0}),dl.AnonRequestPayloadDecoder=void 0;const n=pr(),s=Sn();class i{static decode(u,c){try{if(u.length<35){const M={type:n.PayloadType.AnonRequest,version:n.PayloadVersion.Version1,isValid:!1,errors:["AnonRequest payload too short (minimum 35 bytes: dest + public key + MAC)"],destinationHash:"",senderPublicKey:"",cipherMac:"",ciphertext:"",ciphertextLength:0};return c!=null&&c.includeSegments&&(M.segments=[{name:"Invalid AnonRequest Data",description:"AnonRequest payload too short (minimum 35 bytes required: 1 for dest hash + 32 for public key + 2 for MAC)",startByte:c.segmentOffset||0,endByte:(c.segmentOffset||0)+u.length-1,value:(0,s.bytesToHex)(u)}]),M}const h=[],d=(c==null?void 0:c.segmentOffset)||0;let g=0;const m=(0,s.byteToHex)(u[0]);c!=null&&c.includeSegments&&h.push({name:"Destination Hash",description:`First byte of destination node public key: 0x${m}`,startByte:d+g,endByte:d+g,value:m}),g+=1;const x=(0,s.bytesToHex)(u.subarray(1,33));c!=null&&c.includeSegments&&h.push({name:"Sender Public Key",description:"Ed25519 public key of the sender (32 bytes)",startByte:d+g,endByte:d+g+31,value:x}),g+=32;const v=(0,s.bytesToHex)(u.subarray(33,35));c!=null&&c.includeSegments&&h.push({name:"Cipher MAC",description:"MAC for encrypted data verification (2 bytes)",startByte:d+g,endByte:d+g+1,value:v}),g+=2;const C=(0,s.bytesToHex)(u.subarray(35));c!=null&&c.includeSegments&&u.length>35&&h.push({name:"Ciphertext",description:`Encrypted message data (${u.length-35} bytes). Contains encrypted plaintext with this structure:
 Timestamp (4 bytes) - send time as unix timestamp
 Sync Timestamp (4 bytes) - room server only, sender's "sync messages SINCE x" timestamp  
 Password (remaining bytes) - password for repeater/room`,startByte:d+g,endByte:d+u.length-1,value:C});const P={type:n.PayloadType.AnonRequest,version:n.PayloadVersion.Version1,isValid:!0,destinationHash:m,senderPublicKey:x,cipherMac:v,ciphertext:C,ciphertextLength:u.length-35};return c!=null&&c.includeSegments&&(P.segments=h),P}catch(h){return{type:n.PayloadType.AnonRequest,version:n.PayloadVersion.Version1,isValid:!1,errors:[h instanceof Error?h.message:"Failed to decode AnonRequest payload"],destinationHash:"",senderPublicKey:"",cipherMac:"",ciphertext:"",ciphertextLength:0}}}}return dl.AnonRequestPayloadDecoder=i,dl}var fl={},Kg;function AE(){if(Kg)return fl;Kg=1,Object.defineProperty(fl,"__esModule",{value:!0}),fl.AckPayloadDecoder=void 0;const n=pr(),s=Sn();class i{static decode(u,c){try{if(u.length<4){const x={type:n.PayloadType.Ack,version:n.PayloadVersion.Version1,isValid:!1,errors:["Ack payload too short (minimum 4 bytes for checksum)"],checksum:""};return c!=null&&c.includeSegments&&(x.segments=[{name:"Invalid Ack Data",description:"Ack payload too short (minimum 4 bytes required for checksum)",startByte:c.segmentOffset||0,endByte:(c.segmentOffset||0)+u.length-1,value:(0,s.bytesToHex)(u)}]),x}const h=[],d=(c==null?void 0:c.segmentOffset)||0,g=(0,s.bytesToHex)(u.subarray(0,4));c!=null&&c.includeSegments&&h.push({name:"Checksum",description:`CRC checksum of message timestamp, text, and sender pubkey: 0x${g}`,startByte:d,endByte:d+3,value:g}),c!=null&&c.includeSegments&&u.length>4&&h.push({name:"Additional Data",description:"Extra data in Ack payload",startByte:d+4,endByte:d+u.length-1,value:(0,s.bytesToHex)(u.subarray(4))});const m={type:n.PayloadType.Ack,version:n.PayloadVersion.Version1,isValid:!0,checksum:g};return c!=null&&c.includeSegments&&(m.segments=h),m}catch(h){return{type:n.PayloadType.Ack,version:n.PayloadVersion.Version1,isValid:!1,errors:[h instanceof Error?h.message:"Failed to decode Ack payload"],checksum:""}}}}return fl.AckPayloadDecoder=i,fl}var hl={},Qg;function yE(){if(Qg)return hl;Qg=1,Object.defineProperty(hl,"__esModule",{value:!0}),hl.PathPayloadDecoder=void 0;const n=pr(),s=Sn();class i{static decode(u){try{if(u.length<2)return{type:n.PayloadType.Path,version:n.PayloadVersion.Version1,isValid:!1,errors:["Path payload too short (minimum 2 bytes: path length + extra type)"],pathLength:0,pathHashes:[],extraType:0,extraData:""};const c=u[0];if(u.length<1+c+1)return{type:n.PayloadType.Path,version:n.PayloadVersion.Version1,isValid:!1,errors:[`Path payload too short (need ${1+c+1} bytes for path length + path + extra type)`],pathLength:c,pathHashes:[],extraType:0,extraData:""};const h=[];for(let m=0;m<c;m++)h.push((0,s.byteToHex)(u[1+m]));const d=u[1+c];let g="";return u.length>1+c+1&&(g=(0,s.bytesToHex)(u.subarray(1+c+1))),{type:n.PayloadType.Path,version:n.PayloadVersion.Version1,isValid:!0,pathLength:c,pathHashes:h,extraType:d,extraData:g}}catch(c){return{type:n.PayloadType.Path,version:n.PayloadVersion.Version1,isValid:!1,errors:[c instanceof Error?c.message:"Failed to decode Path payload"],pathLength:0,pathHashes:[],extraType:0,extraData:""}}}}return hl.PathPayloadDecoder=i,hl}var pl={},Yg;function _E(){if(Yg)return pl;Yg=1,Object.defineProperty(pl,"__esModule",{value:!0}),pl.TextMessagePayloadDecoder=void 0;const n=pr(),s=Sn();class i{static decode(u,c){try{if(u.length<4){const M={type:n.PayloadType.TextMessage,version:n.PayloadVersion.Version1,isValid:!1,errors:["TextMessage payload too short (minimum 4 bytes: dest + source + MAC)"],destinationHash:"",sourceHash:"",cipherMac:"",ciphertext:"",ciphertextLength:0};return c!=null&&c.includeSegments&&(M.segments=[{name:"Invalid TextMessage Data",description:"TextMessage payload too short (minimum 4 bytes required)",startByte:c.segmentOffset||0,endByte:(c.segmentOffset||0)+u.length-1,value:(0,s.bytesToHex)(u)}]),M}const h=[],d=(c==null?void 0:c.segmentOffset)||0;let g=0;const m=(0,s.byteToHex)(u[g]);c!=null&&c.includeSegments&&h.push({name:"Destination Hash",description:"First byte of destination node public key",startByte:d+g,endByte:d+g,value:m}),g+=1;const x=(0,s.byteToHex)(u[g]);c!=null&&c.includeSegments&&h.push({name:"Source Hash",description:"First byte of source node public key",startByte:d+g,endByte:d+g,value:x}),g+=1;const v=(0,s.bytesToHex)(u.subarray(g,g+2));c!=null&&c.includeSegments&&h.push({name:"Cipher MAC",description:"MAC for encrypted data in next field",startByte:d+g,endByte:d+g+1,value:v}),g+=2;const C=(0,s.bytesToHex)(u.subarray(g));c!=null&&c.includeSegments&&u.length>g&&h.push({name:"Ciphertext",description:"Encrypted message data (timestamp + message text)",startByte:d+g,endByte:d+u.length-1,value:C});const P={type:n.PayloadType.TextMessage,version:n.PayloadVersion.Version1,isValid:!0,destinationHash:m,sourceHash:x,cipherMac:v,ciphertext:C,ciphertextLength:u.length-4};return c!=null&&c.includeSegments&&(P.segments=h),P}catch(h){return{type:n.PayloadType.TextMessage,version:n.PayloadVersion.Version1,isValid:!1,errors:[h instanceof Error?h.message:"Failed to decode TextMessage payload"],destinationHash:"",sourceHash:"",cipherMac:"",ciphertext:"",ciphertextLength:0}}}}return pl.TextMessagePayloadDecoder=i,pl}var ml={},Xg;function wE(){if(Xg)return ml;Xg=1,Object.defineProperty(ml,"__esModule",{value:!0}),ml.ControlPayloadDecoder=void 0;const n=pr(),s=Sn(),i=bl();class l{static decode(c,h){try{if(c.length<1)return this.createErrorPayload("Control payload too short (minimum 1 byte required)",c,h);const g=c[0]&240;switch(g){case n.ControlSubType.NodeDiscoverReq:return this.decodeDiscoverReq(c,h);case n.ControlSubType.NodeDiscoverResp:return this.decodeDiscoverResp(c,h);default:return this.createErrorPayload(`Unknown control sub-type: 0x${g.toString(16).padStart(2,"0")}`,c,h)}}catch(d){return this.createErrorPayload(d instanceof Error?d.message:"Failed to decode control payload",c,h)}}static decodeDiscoverReq(c,h){const d=[],g=(h==null?void 0:h.segmentOffset)??0;if(c.length<6){const B={type:n.PayloadType.Control,version:n.PayloadVersion.Version1,isValid:!1,errors:["DISCOVER_REQ payload too short (minimum 6 bytes required)"],subType:n.ControlSubType.NodeDiscoverReq,rawFlags:c[0],prefixOnly:!1,typeFilter:0,typeFilterNames:[],tag:0,since:0};return h!=null&&h.includeSegments&&(B.segments=[{name:"Invalid DISCOVER_REQ Data",description:"DISCOVER_REQ payload too short (minimum 6 bytes required)",startByte:g,endByte:g+c.length-1,value:(0,s.bytesToHex)(c)}]),B}let m=0;const x=c[m],v=(x&1)!==0;h!=null&&h.includeSegments&&d.push({name:"Flags",description:`Sub-type: DISCOVER_REQ (0x8) | Prefix Only: ${v}`,startByte:g+m,endByte:g+m,value:x.toString(16).padStart(2,"0").toUpperCase()}),m+=1;const C=c[m],P=this.parseTypeFilter(C);h!=null&&h.includeSegments&&d.push({name:"Type Filter",description:`Filter mask: 0b${C.toString(2).padStart(8,"0")} | Types: ${P.length>0?P.join(", "):"None"}`,startByte:g+m,endByte:g+m,value:C.toString(16).padStart(2,"0").toUpperCase()}),m+=1;const M=this.readUint32LE(c,m);h!=null&&h.includeSegments&&d.push({name:"Tag",description:`Random tag for response matching: 0x${M.toString(16).padStart(8,"0")}`,startByte:g+m,endByte:g+m+3,value:(0,s.bytesToHex)(c.slice(m,m+4))}),m+=4;let k=0;if(c.length>=m+4&&(k=this.readUint32LE(c,m),h!=null&&h.includeSegments)){const B=k>0?new Date(k*1e3).toISOString().slice(0,19)+"Z":"N/A";d.push({name:"Since",description:`Filter timestamp: ${k} (${B})`,startByte:g+m,endByte:g+m+3,value:(0,s.bytesToHex)(c.slice(m,m+4))})}const w={type:n.PayloadType.Control,version:n.PayloadVersion.Version1,isValid:!0,subType:n.ControlSubType.NodeDiscoverReq,rawFlags:x,prefixOnly:v,typeFilter:C,typeFilterNames:P,tag:M,since:k};return h!=null&&h.includeSegments&&(w.segments=d),w}static decodeDiscoverResp(c,h){const d=[],g=(h==null?void 0:h.segmentOffset)??0;if(c.length<14){const I={type:n.PayloadType.Control,version:n.PayloadVersion.Version1,isValid:!1,errors:["DISCOVER_RESP payload too short (minimum 14 bytes required)"],subType:n.ControlSubType.NodeDiscoverResp,rawFlags:c.length>0?c[0]:0,nodeType:n.DeviceRole.Unknown,nodeTypeName:"Unknown",snr:0,tag:0,publicKey:"",publicKeyLength:0};return h!=null&&h.includeSegments&&(I.segments=[{name:"Invalid DISCOVER_RESP Data",description:"DISCOVER_RESP payload too short (minimum 14 bytes required)",startByte:g,endByte:g+c.length-1,value:(0,s.bytesToHex)(c)}]),I}let m=0;const x=c[m],v=x&15,C=(0,i.getDeviceRoleName)(v);h!=null&&h.includeSegments&&d.push({name:"Flags",description:`Sub-type: DISCOVER_RESP (0x9) | Node Type: ${C}`,startByte:g+m,endByte:g+m,value:x.toString(16).padStart(2,"0").toUpperCase()}),m+=1;const P=c[m],M=P>127?P-256:P,k=M/4;h!=null&&h.includeSegments&&d.push({name:"SNR",description:`Inbound SNR: ${k.toFixed(2)} dB (raw: ${P}, signed: ${M})`,startByte:g+m,endByte:g+m,value:P.toString(16).padStart(2,"0").toUpperCase()}),m+=1;const w=this.readUint32LE(c,m);h!=null&&h.includeSegments&&d.push({name:"Tag",description:`Reflected tag from request: 0x${w.toString(16).padStart(8,"0")}`,startByte:g+m,endByte:g+m+3,value:(0,s.bytesToHex)(c.slice(m,m+4))}),m+=4;const b=c.length-m,E=c.slice(m,m+b),T=(0,s.bytesToHex)(E);if(h!=null&&h.includeSegments){const I=b===32?"Full Public Key":"Public Key Prefix";d.push({name:I,description:`${I} (${b} bytes)`,startByte:g+m,endByte:g+m+b-1,value:T})}const F={type:n.PayloadType.Control,version:n.PayloadVersion.Version1,isValid:!0,subType:n.ControlSubType.NodeDiscoverResp,rawFlags:x,nodeType:v,nodeTypeName:C,snr:k,tag:w,publicKey:T,publicKeyLength:b};return h!=null&&h.includeSegments&&(F.segments=d),F}static parseTypeFilter(c){const h=[];return c&1<<n.DeviceRole.ChatNode&&h.push("Chat"),c&1<<n.DeviceRole.Repeater&&h.push("Repeater"),c&1<<n.DeviceRole.RoomServer&&h.push("Room"),c&1<<n.DeviceRole.Sensor&&h.push("Sensor"),h}static createErrorPayload(c,h,d){const g={type:n.PayloadType.Control,version:n.PayloadVersion.Version1,isValid:!1,errors:[c],subType:n.ControlSubType.NodeDiscoverReq,rawFlags:h.length>0?h[0]:0,prefixOnly:!1,typeFilter:0,typeFilterNames:[],tag:0,since:0};return d!=null&&d.includeSegments&&(g.segments=[{name:"Invalid Control Data",description:c,startByte:d.segmentOffset??0,endByte:(d.segmentOffset??0)+h.length-1,value:(0,s.bytesToHex)(h)}]),g}static readUint32LE(c,h){return(c[h]|c[h+1]<<8|c[h+2]<<16|c[h+3]<<24)>>>0}}return ml.ControlPayloadDecoder=l,ml}var Jg;function ex(){if(Jg)return rl;Jg=1,Object.defineProperty(rl,"__esModule",{value:!0}),rl.MeshCorePacketDecoder=void 0;const n=pr(),s=Sn(),i=bl(),l=lA(),u=hE(),c=pE(),h=mE(),d=gE(),g=xE(),m=vE(),x=AE(),v=yE(),C=_E(),P=wE();class M{static decode(w,B){return this.parseInternal(w,!1,B).packet}static async decodeWithVerification(w,B){return(await this.parseInternalAsync(w,!1,B)).packet}static analyzeStructure(w,B){return this.parseInternal(w,!0,B).structure}static async analyzeStructureWithVerification(w,B){return(await this.parseInternalAsync(w,!0,B)).structure}static parseInternal(w,B,b){const E=(0,s.hexToBytes)(w),T=[];if(E.length<2){const F={messageHash:"",routeType:n.RouteType.Flood,payloadType:n.PayloadType.RawCustom,payloadVersion:n.PayloadVersion.Version1,pathLength:0,path:null,payload:{raw:"",decoded:null},totalBytes:E.length,isValid:!1,errors:["Packet too short (minimum 2 bytes required)"]},I={segments:[],totalBytes:E.length,rawHex:w.toUpperCase(),messageHash:"",payload:{segments:[],hex:"",startByte:0,type:"Unknown"}};return{packet:F,structure:I}}try{let F=0;const I=E[0],j=I&3,O=I>>2&15,G=I>>6&3;B&&T.push({name:"Header",description:"Header byte breakdown",startByte:0,endByte:0,value:`0x${I.toString(16).padStart(2,"0")}`,headerBreakdown:{fullBinary:I.toString(2).padStart(8,"0"),fields:[{bits:"0-1",field:"Route Type",value:(0,i.getRouteTypeName)(j),binary:(I&3).toString(2).padStart(2,"0")},{bits:"2-5",field:"Payload Type",value:(0,i.getPayloadTypeName)(O),binary:(I>>2&15).toString(2).padStart(4,"0")},{bits:"6-7",field:"Version",value:G.toString(),binary:(I>>6&3).toString(2).padStart(2,"0")}]}}),F=1;let U;if(j===n.RouteType.TransportFlood||j===n.RouteType.TransportDirect){if(E.length<F+4)throw new Error("Packet too short for transport codes");const D=E[F]|E[F+1]<<8,H=E[F+2]|E[F+3]<<8;if(U=[D,H],B){const q=E[F]|E[F+1]<<8|E[F+2]<<16|E[F+3]<<24;T.push({name:"Transport Code",description:"Used for Direct/Response routing",startByte:F,endByte:F+3,value:`0x${q.toString(16).padStart(8,"0")}`})}F+=4}if(E.length<F+1)throw new Error("Packet too short for path length");const K=E[F];if(B){let D=`Path contains ${K} bytes`;j===n.RouteType.Direct||j===n.RouteType.TransportDirect?D=`For "Direct" packets, this contains routing instructions. ${K} bytes of routing instructions (decreases as packet travels)`:(j===n.RouteType.Flood||j===n.RouteType.TransportFlood)&&(D=`${K} bytes showing route taken (increases as packet floods)`),T.push({name:"Path Length",description:D,startByte:F,endByte:F,value:`0x${K.toString(16).padStart(2,"0")}`})}if(F+=1,E.length<F+K)throw new Error("Packet too short for path data");const J=E.subarray(F,F+K),Y=K>0?Array.from(J).map(s.byteToHex):null;if(B&&K>0)if(O===n.PayloadType.Trace){const D=[];for(let H=0;H<K;H++){const q=E[F+H],ae=(q>127?q-256:q)/4;D.push(`${ae.toFixed(2)}dB (0x${q.toString(16).padStart(2,"0")})`)}T.push({name:"Path SNR Data",description:`SNR values collected during trace: ${D.join(", ")}`,startByte:F,endByte:F+K-1,value:(0,s.bytesToHex)(E.slice(F,F+K))})}else{let D="Routing path information";j===n.RouteType.Direct||j===n.RouteType.TransportDirect?D="Routing instructions (bytes are stripped at each hop as packet travels to destination)":(j===n.RouteType.Flood||j===n.RouteType.TransportFlood)&&(D="Historical route taken (bytes are added as packet floods through network)"),T.push({name:"Path Data",description:D,startByte:F,endByte:F+K-1,value:(0,s.bytesToHex)(E.slice(F,F+K))})}F+=K;const ie=E.subarray(F),ge=(0,s.bytesToHex)(ie);B&&E.length>F&&T.push({name:"Payload",description:`${(0,i.getPayloadTypeName)(O)} payload data`,startByte:F,endByte:E.length-1,value:(0,s.bytesToHex)(E.slice(F))});let $=null;const se=[];if(O===n.PayloadType.Advert){const D=u.AdvertPayloadDecoder.decode(ie,{includeSegments:B,segmentOffset:0});$=D,D!=null&&D.segments&&(se.push(...D.segments),delete D.segments)}else if(O===n.PayloadType.Trace){const D=c.TracePayloadDecoder.decode(ie,Y,{includeSegments:B,segmentOffset:0});$=D,D!=null&&D.segments&&(se.push(...D.segments),delete D.segments)}else if(O===n.PayloadType.GroupText){const D=h.GroupTextPayloadDecoder.decode(ie,{...b,includeSegments:B,segmentOffset:0});$=D,D!=null&&D.segments&&(se.push(...D.segments),delete D.segments)}else if(O===n.PayloadType.Request){const D=d.RequestPayloadDecoder.decode(ie,{includeSegments:B,segmentOffset:0});$=D,D!=null&&D.segments&&(se.push(...D.segments),delete D.segments)}else if(O===n.PayloadType.Response){const D=g.ResponsePayloadDecoder.decode(ie,{includeSegments:B,segmentOffset:0});$=D,D!=null&&D.segments&&(se.push(...D.segments),delete D.segments)}else if(O===n.PayloadType.AnonRequest){const D=m.AnonRequestPayloadDecoder.decode(ie,{includeSegments:B,segmentOffset:0});$=D,D!=null&&D.segments&&(se.push(...D.segments),delete D.segments)}else if(O===n.PayloadType.Ack){const D=x.AckPayloadDecoder.decode(ie,{includeSegments:B,segmentOffset:0});$=D,D!=null&&D.segments&&(se.push(...D.segments),delete D.segments)}else if(O===n.PayloadType.Path)$=v.PathPayloadDecoder.decode(ie);else if(O===n.PayloadType.TextMessage){const D=C.TextMessagePayloadDecoder.decode(ie,{includeSegments:B,segmentOffset:0});$=D,D!=null&&D.segments&&(se.push(...D.segments),delete D.segments)}else if(O===n.PayloadType.Control){const D=P.ControlPayloadDecoder.decode(ie,{includeSegments:B,segmentOffset:0});$=D,D!=null&&D.segments&&(se.push(...D.segments),delete D.segments)}B&&se.length===0&&E.length>F&&se.push({name:`${(0,i.getPayloadTypeName)(O)} Payload`,description:`Raw ${(0,i.getPayloadTypeName)(O)} payload data (${ie.length} bytes)`,startByte:0,endByte:ie.length-1,value:(0,s.bytesToHex)(ie)});const W=this.calculateMessageHash(E,j,O,G),te={messageHash:W,routeType:j,payloadType:O,payloadVersion:G,transportCodes:U,pathLength:K,path:Y,payload:{raw:ge,decoded:$},totalBytes:E.length,isValid:!0},Z={segments:T,totalBytes:E.length,rawHex:w.toUpperCase(),messageHash:W,payload:{segments:se,hex:ge,startByte:F,type:(0,i.getPayloadTypeName)(O)}};return{packet:te,structure:Z}}catch(F){const I={messageHash:"",routeType:n.RouteType.Flood,payloadType:n.PayloadType.RawCustom,payloadVersion:n.PayloadVersion.Version1,pathLength:0,path:null,payload:{raw:"",decoded:null},totalBytes:E.length,isValid:!1,errors:[F instanceof Error?F.message:"Unknown decoding error"]},j={segments:[],totalBytes:E.length,rawHex:w.toUpperCase(),messageHash:"",payload:{segments:[],hex:"",startByte:0,type:"Unknown"}};return{packet:I,structure:j}}}static async parseInternalAsync(w,B,b){const E=this.parseInternal(w,B,b);if(E.packet.payloadType===n.PayloadType.Advert&&E.packet.payload.decoded)try{const T=E.packet.payload.decoded,F=await u.AdvertPayloadDecoder.decodeWithVerification((0,s.hexToBytes)(E.packet.payload.raw),{includeSegments:B,segmentOffset:0});F&&(E.packet.payload.decoded=F,F.isValid||(E.packet.isValid=!1,E.packet.errors=F.errors||["Invalid advertisement signature"]),B&&F.segments&&(E.structure.payload.segments=F.segments,delete F.segments))}catch(T){console.error("Signature verification failed:",T)}return E}static validate(w){const B=(0,s.hexToBytes)(w),b=[];if(B.length<2)return b.push("Packet too short (minimum 2 bytes required)"),{isValid:!1,errors:b};try{let E=1;const F=B[0]&3;if((F===n.RouteType.TransportFlood||F===n.RouteType.TransportDirect)&&(B.length<E+4&&b.push("Packet too short for transport codes"),E+=4),B.length<E+1)b.push("Packet too short for path length");else{const I=B[E];E+=1,B.length<E+I&&b.push("Packet too short for path data"),E+=I}E>=B.length&&b.push("No payload data found")}catch(E){b.push(E instanceof Error?E.message:"Validation error")}return{isValid:b.length===0,errors:b.length>0?b:void 0}}static calculateMessageHash(w,B,b,E){if(b===n.PayloadType.Trace&&w.length>=13){let G=1;if((B===n.RouteType.TransportFlood||B===n.RouteType.TransportDirect)&&(G+=4),w.length>G){const U=w[G];G+=1+U}if(w.length>=G+4){const U=w[G]|w[G+1]<<8|w[G+2]<<16|w[G+3]<<24;return(0,s.numberToHex)(U,8)}}const T=b<<2|E<<6;let F=1;if((B===n.RouteType.TransportFlood||B===n.RouteType.TransportDirect)&&(F+=4),w.length>F){const G=w[F];F+=1+G}const I=w.slice(F),j=[T,...Array.from(I)];let O=0;for(let G=0;G<j.length;G++)O=(O<<5)-O+j[G]&4294967295;return(0,s.numberToHex)(O,8)}static createKeyStore(w){return new l.MeshCoreKeyStore(w)}}return rl.MeshCorePacketDecoder=M,rl}var Jo={},tx;function nx(){if(tx)return Jo;tx=1,Object.defineProperty(Jo,"__esModule",{value:!0}),Jo.createAuthToken=u,Jo.verifyAuthToken=c,Jo.parseAuthToken=h,Jo.decodeAuthTokenPayload=d;const n=hh(),s=Sn();function i(g){let m="";if(typeof Buffer<"u")m=Buffer.from(g).toString("base64");else{const x=String.fromCharCode(...Array.from(g));m=btoa(x)}return m.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function l(g){let m=g.replace(/-/g,"+").replace(/_/g,"/");for(;m.length%4;)m+="=";if(typeof Buffer<"u")return new Uint8Array(Buffer.from(m,"base64"));{const x=atob(m),v=new Uint8Array(x.length);for(let C=0;C<x.length;C++)v[C]=x.charCodeAt(C);return v}}async function u(g,m,x){const v={alg:"Ed25519",typ:"JWT"};g.publicKey?g.publicKey=g.publicKey.toUpperCase():g.publicKey=x.toUpperCase(),g.iat||(g.iat=Math.floor(Date.now()/1e3));const C=JSON.stringify(v),P=JSON.stringify(g),M=new TextEncoder().encode(C),k=new TextEncoder().encode(P),w=i(M),B=i(k),b=`${w}.${B}`,E=new TextEncoder().encode(b),T=(0,s.bytesToHex)(E),F=await(0,n.sign)(T,m,g.publicKey);return`${w}.${B}.${F}`}async function c(g,m){try{const x=g.split(".");if(x.length!==3)return null;const[v,C,P]=x,M=l(v),k=l(C),w=new TextDecoder().decode(M),B=new TextDecoder().decode(k),b=JSON.parse(w),E=JSON.parse(B);if(b.alg!=="Ed25519"||b.typ!=="JWT"||!E.publicKey||!E.iat||m&&E.publicKey.toUpperCase()!==m.toUpperCase()||E.exp&&Math.floor(Date.now()/1e3)>E.exp)return null;const T=`${v}.${C}`,F=new TextEncoder().encode(T),I=(0,s.bytesToHex)(F);return await(0,n.verify)(P,I,E.publicKey)?E:null}catch{return null}}function h(g){try{const m=g.split(".");return m.length!==3?null:{header:m[0],payload:m[1],signature:m[2]}}catch{return null}}function d(g){try{const m=g.split(".");if(m.length!==3)return null;const x=l(m[1]),v=new TextDecoder().decode(x);return JSON.parse(v)}catch{return null}}return Jo}var rx;function bE(){return rx||(rx=1,(function(n){var s=Ti&&Ti.__createBinding||(Object.create?(function(B,b,E,T){T===void 0&&(T=E);var F=Object.getOwnPropertyDescriptor(b,E);(!F||("get"in F?!b.__esModule:F.writable||F.configurable))&&(F={enumerable:!0,get:function(){return b[E]}}),Object.defineProperty(B,T,F)}):(function(B,b,E,T){T===void 0&&(T=E),B[T]=b[E]})),i=Ti&&Ti.__setModuleDefault||(Object.create?(function(B,b){Object.defineProperty(B,"default",{enumerable:!0,value:b})}):function(B,b){B.default=b}),l=Ti&&Ti.__importStar||(function(){var B=function(b){return B=Object.getOwnPropertyNames||function(E){var T=[];for(var F in E)Object.prototype.hasOwnProperty.call(E,F)&&(T[T.length]=F);return T},B(b)};return function(b){if(b&&b.__esModule)return b;var E={};if(b!=null)for(var T=B(b),F=0;F<T.length;F++)T[F]!=="default"&&s(E,b,T[F]);return i(E,b),E}})();Object.defineProperty(n,"__esModule",{value:!0}),n.Utils=n.decodeAuthTokenPayload=n.parseAuthToken=n.verifyAuthToken=n.createAuthToken=n.getControlSubTypeName=n.getRequestTypeName=n.getDeviceRoleName=n.getPayloadVersionName=n.getPayloadTypeName=n.getRouteTypeName=n.numberToHex=n.byteToHex=n.bytesToHex=n.hexToBytes=n.Ed25519SignatureVerifier=n.ChannelCrypto=n.MeshCoreKeyStore=n.ControlSubType=n.RequestType=n.AdvertFlags=n.DeviceRole=n.PayloadVersion=n.PayloadType=n.RouteType=n.MeshCoreDecoder=n.MeshCorePacketDecoder=void 0;var u=ex();Object.defineProperty(n,"MeshCorePacketDecoder",{enumerable:!0,get:function(){return u.MeshCorePacketDecoder}});var c=ex();Object.defineProperty(n,"MeshCoreDecoder",{enumerable:!0,get:function(){return c.MeshCorePacketDecoder}});var h=pr();Object.defineProperty(n,"RouteType",{enumerable:!0,get:function(){return h.RouteType}}),Object.defineProperty(n,"PayloadType",{enumerable:!0,get:function(){return h.PayloadType}}),Object.defineProperty(n,"PayloadVersion",{enumerable:!0,get:function(){return h.PayloadVersion}}),Object.defineProperty(n,"DeviceRole",{enumerable:!0,get:function(){return h.DeviceRole}}),Object.defineProperty(n,"AdvertFlags",{enumerable:!0,get:function(){return h.AdvertFlags}}),Object.defineProperty(n,"RequestType",{enumerable:!0,get:function(){return h.RequestType}}),Object.defineProperty(n,"ControlSubType",{enumerable:!0,get:function(){return h.ControlSubType}});var d=lA();Object.defineProperty(n,"MeshCoreKeyStore",{enumerable:!0,get:function(){return d.MeshCoreKeyStore}});var g=nh();Object.defineProperty(n,"ChannelCrypto",{enumerable:!0,get:function(){return g.ChannelCrypto}});var m=bA();Object.defineProperty(n,"Ed25519SignatureVerifier",{enumerable:!0,get:function(){return m.Ed25519SignatureVerifier}});var x=Sn();Object.defineProperty(n,"hexToBytes",{enumerable:!0,get:function(){return x.hexToBytes}}),Object.defineProperty(n,"bytesToHex",{enumerable:!0,get:function(){return x.bytesToHex}}),Object.defineProperty(n,"byteToHex",{enumerable:!0,get:function(){return x.byteToHex}}),Object.defineProperty(n,"numberToHex",{enumerable:!0,get:function(){return x.numberToHex}});var v=bl();Object.defineProperty(n,"getRouteTypeName",{enumerable:!0,get:function(){return v.getRouteTypeName}}),Object.defineProperty(n,"getPayloadTypeName",{enumerable:!0,get:function(){return v.getPayloadTypeName}}),Object.defineProperty(n,"getPayloadVersionName",{enumerable:!0,get:function(){return v.getPayloadVersionName}}),Object.defineProperty(n,"getDeviceRoleName",{enumerable:!0,get:function(){return v.getDeviceRoleName}}),Object.defineProperty(n,"getRequestTypeName",{enumerable:!0,get:function(){return v.getRequestTypeName}}),Object.defineProperty(n,"getControlSubTypeName",{enumerable:!0,get:function(){return v.getControlSubTypeName}});var C=nx();Object.defineProperty(n,"createAuthToken",{enumerable:!0,get:function(){return C.createAuthToken}}),Object.defineProperty(n,"verifyAuthToken",{enumerable:!0,get:function(){return C.verifyAuthToken}}),Object.defineProperty(n,"parseAuthToken",{enumerable:!0,get:function(){return C.parseAuthToken}}),Object.defineProperty(n,"decodeAuthTokenPayload",{enumerable:!0,get:function(){return C.decodeAuthTokenPayload}});const P=l(bl()),M=l(Sn()),k=l(nx()),w=hh();n.Utils={...P,...M,...k,derivePublicKey:w.derivePublicKey,validateKeyPair:w.validateKeyPair,sign:w.sign,verify:w.verify}})(Ti)),Ti}var bt=bE();function CE(n){return new Date(n*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}function EE(n){const s=[];return n.snr!==null&&n.snr!==void 0&&s.push(`SNR: ${n.snr.toFixed(1)} dB`),n.rssi!==null&&n.rssi!==void 0&&s.push(`RSSI: ${n.rssi} dBm`),s.join(" | ")}function kE(n,s){var i;try{const l=bt.MeshCoreDecoder.decode(n);if(!l.isValid)return{summary:"Invalid packet",routeType:"Unknown"};const u=bt.Utils.getRouteTypeName(l.routeType),c=bt.Utils.getPayloadTypeName(l.payloadType),h=l.path&&l.path.length>0?` via ${l.path.join("-")}`:"";let d=c,g;switch(l.payloadType){case bt.PayloadType.TextMessage:{const m=l.payload.decoded;m!=null&&m.sourceHash&&(m!=null&&m.destinationHash)?d=`DM from ${m.sourceHash} to ${m.destinationHash}${h}`:d=`DM${h}`;break}case bt.PayloadType.GroupText:{const m=l.payload.decoded;s!=null&&s.channel_name?s.sender?d=`GT from ${s.sender} in ${s.channel_name}${h}`:d=`GT in ${s.channel_name}${h}`:m!=null&&m.channelHash?d=`GT ch:${m.channelHash}${h}`:d=`GroupText${h}`;break}case bt.PayloadType.Advert:{const m=l.payload.decoded;if((i=m==null?void 0:m.appData)!=null&&i.name){const x=m.appData.deviceRole!==void 0?bt.Utils.getDeviceRoleName(m.appData.deviceRole):"";d=`Advert: ${m.appData.name}${x?` (${x})`:""}${h}`}else m!=null&&m.publicKey?d=`Advert: ${m.publicKey.slice(0,8)}...${h}`:d=`Advert${h}`;break}case bt.PayloadType.Ack:{d=`ACK${h}`;break}case bt.PayloadType.Request:{d=`Request${h}`;break}case bt.PayloadType.Response:{d=`Response${h}`;break}case bt.PayloadType.Trace:{d=`Trace${h}`;break}case bt.PayloadType.Path:{d=`Path${h}`;break}default:d=`${c}${h}`}return{summary:d,routeType:u,details:g}}catch{return{summary:"Decode error",routeType:"Unknown"}}}function SE(n){switch(n){case"Flood":return"bg-blue-500/20 text-blue-400";case"Direct":return"bg-green-500/20 text-green-400";case"Transport Flood":return"bg-purple-500/20 text-purple-400";case"Transport Direct":return"bg-orange-500/20 text-orange-400";default:return"bg-gray-500/20 text-gray-400"}}function BE(n){switch(n){case"Flood":return"F";case"Direct":return"D";case"Transport Flood":return"TF";case"Transport Direct":return"TD";default:return"?"}}function R0({packets:n}){const s=N.useRef(null),i=N.useMemo(()=>n.map(u=>({packet:u,decoded:kE(u.data,u.decrypted_info)})),[n]);if(N.useEffect(()=>{s.current&&(s.current.scrollTop=s.current.scrollHeight)},[n]),n.length===0)return _.jsx("div",{className:"h-full overflow-y-auto p-5 text-center text-muted-foreground",children:"No packets received yet. Packets will appear here in real-time."});const l=[...i].sort((u,c)=>u.packet.timestamp-c.packet.timestamp);return _.jsx("div",{className:"h-full overflow-y-auto p-4 flex flex-col gap-3",ref:s,children:l.map(({packet:u,decoded:c})=>_.jsxs("div",{className:"py-2 px-3 bg-muted rounded",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:`text-[10px] font-mono px-1.5 py-0.5 rounded ${SE(c.routeType)}`,title:c.routeType,children:BE(c.routeType)}),!u.decrypted&&_.jsx("span",{title:"Encrypted",children:""}),_.jsx("span",{className:u.decrypted?"text-primary":"text-foreground",children:c.summary}),_.jsx("span",{className:"text-muted-foreground ml-auto text-sm",children:CE(u.timestamp)})]}),(u.snr!==null||u.rssi!==null)&&_.jsx("div",{className:"text-[11px] text-muted-foreground mt-0.5",children:EE(u)}),_.jsx("div",{className:"font-mono text-[10px] break-all text-muted-foreground/70 mt-1 p-1 bg-background/50 rounded",children:u.data.toUpperCase()})]},u.id))})}function CA(n,s){const i=N.useRef(s);N.useEffect(function(){s!==i.current&&n.attributionControl!=null&&(i.current!=null&&n.attributionControl.removeAttribution(i.current),s!=null&&n.attributionControl.addAttribution(s)),i.current=s},[n,s])}function PE(n,s,i){s.center!==i.center&&n.setLatLng(s.center),s.radius!=null&&s.radius!==i.radius&&n.setRadius(s.radius)}const TE=1;function DE(n){return Object.freeze({__version:TE,map:n})}function RE(n,s){return Object.freeze({...n,...s})}const EA=N.createContext(null),kA=EA.Provider;function Ed(){const n=N.useContext(EA);if(n==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}function FE(n){function s(i,l){const{instance:u,context:c}=n(i).current;return N.useImperativeHandle(l,()=>u),i.children==null?null:De.createElement(kA,{value:c},i.children)}return N.forwardRef(s)}function NE(n){function s(i,l){const[u,c]=N.useState(!1),{instance:h}=n(i,c).current;N.useImperativeHandle(l,()=>h),N.useEffect(function(){u&&h.update()},[h,u,i.children]);const d=h._contentNode;return d?V0.createPortal(i.children,d):null}return N.forwardRef(s)}function LE(n){function s(i,l){const{instance:u}=n(i).current;return N.useImperativeHandle(l,()=>u),null}return N.forwardRef(s)}function ph(n,s){const i=N.useRef();N.useEffect(function(){return s!=null&&n.instance.on(s),i.current=s,function(){i.current!=null&&n.instance.off(i.current),i.current=null}},[n,s])}function kd(n,s){const i=n.pane??s.pane;return i?{...n,pane:i}:n}function ME(n,s){return function(l,u){const c=Ed(),h=n(kd(l,c),c);return CA(c.map,l.attribution),ph(h.current,l.eventHandlers),s(h.current,c,l,u),h}}var xl={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var IE=xl.exports,ix;function OE(){return ix||(ix=1,(function(n,s){(function(i,l){l(s)})(IE,(function(i){var l="1.9.4";function u(t){var o,f,A,R;for(f=1,A=arguments.length;f<A;f++){R=arguments[f];for(o in R)t[o]=R[o]}return t}var c=Object.create||(function(){function t(){}return function(o){return t.prototype=o,new t}})();function h(t,o){var f=Array.prototype.slice;if(t.bind)return t.bind.apply(t,f.call(arguments,1));var A=f.call(arguments,2);return function(){return t.apply(o,A.length?A.concat(f.call(arguments)):arguments)}}var d=0;function g(t){return"_leaflet_id"in t||(t._leaflet_id=++d),t._leaflet_id}function m(t,o,f){var A,R,V,ee;return ee=function(){A=!1,R&&(V.apply(f,R),R=!1)},V=function(){A?R=arguments:(t.apply(f,arguments),setTimeout(ee,o),A=!0)},V}function x(t,o,f){var A=o[1],R=o[0],V=A-R;return t===A&&f?t:((t-R)%V+V)%V+R}function v(){return!1}function C(t,o){if(o===!1)return t;var f=Math.pow(10,o===void 0?6:o);return Math.round(t*f)/f}function P(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function M(t){return P(t).split(/\s+/)}function k(t,o){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?c(t.options):{});for(var f in o)t.options[f]=o[f];return t.options}function w(t,o,f){var A=[];for(var R in t)A.push(encodeURIComponent(f?R.toUpperCase():R)+"="+encodeURIComponent(t[R]));return(!o||o.indexOf("?")===-1?"?":"&")+A.join("&")}var B=/\{ *([\w_ -]+) *\}/g;function b(t,o){return t.replace(B,function(f,A){var R=o[A];if(R===void 0)throw new Error("No value provided for variable "+f);return typeof R=="function"&&(R=R(o)),R})}var E=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function T(t,o){for(var f=0;f<t.length;f++)if(t[f]===o)return f;return-1}var F="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function I(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var j=0;function O(t){var o=+new Date,f=Math.max(0,16-(o-j));return j=o+f,window.setTimeout(t,f)}var G=window.requestAnimationFrame||I("RequestAnimationFrame")||O,U=window.cancelAnimationFrame||I("CancelAnimationFrame")||I("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function K(t,o,f){if(f&&G===O)t.call(o);else return G.call(window,h(t,o))}function J(t){t&&U.call(window,t)}var Y={__proto__:null,extend:u,create:c,bind:h,get lastId(){return d},stamp:g,throttle:m,wrapNum:x,falseFn:v,formatNum:C,trim:P,splitWords:M,setOptions:k,getParamString:w,template:b,isArray:E,indexOf:T,emptyImageUrl:F,requestFn:G,cancelFn:U,requestAnimFrame:K,cancelAnimFrame:J};function ie(){}ie.extend=function(t){var o=function(){k(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},f=o.__super__=this.prototype,A=c(f);A.constructor=o,o.prototype=A;for(var R in this)Object.prototype.hasOwnProperty.call(this,R)&&R!=="prototype"&&R!=="__super__"&&(o[R]=this[R]);return t.statics&&u(o,t.statics),t.includes&&(ge(t.includes),u.apply(null,[A].concat(t.includes))),u(A,t),delete A.statics,delete A.includes,A.options&&(A.options=f.options?c(f.options):{},u(A.options,t.options)),A._initHooks=[],A.callInitHooks=function(){if(!this._initHooksCalled){f.callInitHooks&&f.callInitHooks.call(this),this._initHooksCalled=!0;for(var V=0,ee=A._initHooks.length;V<ee;V++)A._initHooks[V].call(this)}},o},ie.include=function(t){var o=this.prototype.options;return u(this.prototype,t),t.options&&(this.prototype.options=o,this.mergeOptions(t.options)),this},ie.mergeOptions=function(t){return u(this.prototype.options,t),this},ie.addInitHook=function(t){var o=Array.prototype.slice.call(arguments,1),f=typeof t=="function"?t:function(){this[t].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(f),this};function ge(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=E(t)?t:[t];for(var o=0;o<t.length;o++)t[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var $={on:function(t,o,f){if(typeof t=="object")for(var A in t)this._on(A,t[A],o);else{t=M(t);for(var R=0,V=t.length;R<V;R++)this._on(t[R],o,f)}return this},off:function(t,o,f){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var A in t)this._off(A,t[A],o);else{t=M(t);for(var R=arguments.length===1,V=0,ee=t.length;V<ee;V++)R?this._off(t[V]):this._off(t[V],o,f)}return this},_on:function(t,o,f,A){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(t,o,f)===!1){f===this&&(f=void 0);var R={fn:o,ctx:f};A&&(R.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(R)}},_off:function(t,o,f){var A,R,V;if(this._events&&(A=this._events[t],!!A)){if(arguments.length===1){if(this._firingCount)for(R=0,V=A.length;R<V;R++)A[R].fn=v;delete this._events[t];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var ee=this._listens(t,o,f);if(ee!==!1){var le=A[ee];this._firingCount&&(le.fn=v,this._events[t]=A=A.slice()),A.splice(ee,1)}}},fire:function(t,o,f){if(!this.listens(t,f))return this;var A=u({},o,{type:t,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var R=this._events[t];if(R){this._firingCount=this._firingCount+1||1;for(var V=0,ee=R.length;V<ee;V++){var le=R[V],he=le.fn;le.once&&this.off(t,he,le.ctx),he.call(le.ctx||this,A)}this._firingCount--}}return f&&this._propagateEvent(A),this},listens:function(t,o,f,A){typeof t!="string"&&console.warn('"string" type argument expected');var R=o;typeof o!="function"&&(A=!!o,R=void 0,f=void 0);var V=this._events&&this._events[t];if(V&&V.length&&this._listens(t,R,f)!==!1)return!0;if(A){for(var ee in this._eventParents)if(this._eventParents[ee].listens(t,o,f,A))return!0}return!1},_listens:function(t,o,f){if(!this._events)return!1;var A=this._events[t]||[];if(!o)return!!A.length;f===this&&(f=void 0);for(var R=0,V=A.length;R<V;R++)if(A[R].fn===o&&A[R].ctx===f)return R;return!1},once:function(t,o,f){if(typeof t=="object")for(var A in t)this._on(A,t[A],o,!0);else{t=M(t);for(var R=0,V=t.length;R<V;R++)this._on(t[R],o,f,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[g(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[g(t)],this},_propagateEvent:function(t){for(var o in this._eventParents)this._eventParents[o].fire(t.type,u({layer:t.target,propagatedFrom:t.target},t),!0)}};$.addEventListener=$.on,$.removeEventListener=$.clearAllEventListeners=$.off,$.addOneTimeEventListener=$.once,$.fireEvent=$.fire,$.hasEventListeners=$.listens;var se=ie.extend($);function W(t,o,f){this.x=f?Math.round(t):t,this.y=f?Math.round(o):o}var te=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};W.prototype={clone:function(){return new W(this.x,this.y)},add:function(t){return this.clone()._add(Z(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(Z(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new W(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new W(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=te(this.x),this.y=te(this.y),this},distanceTo:function(t){t=Z(t);var o=t.x-this.x,f=t.y-this.y;return Math.sqrt(o*o+f*f)},equals:function(t){return t=Z(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=Z(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+C(this.x)+", "+C(this.y)+")"}};function Z(t,o,f){return t instanceof W?t:E(t)?new W(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new W(t.x,t.y):new W(t,o,f)}function D(t,o){if(t)for(var f=o?[t,o]:t,A=0,R=f.length;A<R;A++)this.extend(f[A])}D.prototype={extend:function(t){var o,f;if(!t)return this;if(t instanceof W||typeof t[0]=="number"||"x"in t)o=f=Z(t);else if(t=H(t),o=t.min,f=t.max,!o||!f)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=f.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(f.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(f.y,this.max.y)),this},getCenter:function(t){return Z((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return Z(this.min.x,this.max.y)},getTopRight:function(){return Z(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var o,f;return typeof t[0]=="number"||t instanceof W?t=Z(t):t=H(t),t instanceof D?(o=t.min,f=t.max):o=f=t,o.x>=this.min.x&&f.x<=this.max.x&&o.y>=this.min.y&&f.y<=this.max.y},intersects:function(t){t=H(t);var o=this.min,f=this.max,A=t.min,R=t.max,V=R.x>=o.x&&A.x<=f.x,ee=R.y>=o.y&&A.y<=f.y;return V&&ee},overlaps:function(t){t=H(t);var o=this.min,f=this.max,A=t.min,R=t.max,V=R.x>o.x&&A.x<f.x,ee=R.y>o.y&&A.y<f.y;return V&&ee},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var o=this.min,f=this.max,A=Math.abs(o.x-f.x)*t,R=Math.abs(o.y-f.y)*t;return H(Z(o.x-A,o.y-R),Z(f.x+A,f.y+R))},equals:function(t){return t?(t=H(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function H(t,o){return!t||t instanceof D?t:new D(t,o)}function q(t,o){if(t)for(var f=o?[t,o]:t,A=0,R=f.length;A<R;A++)this.extend(f[A])}q.prototype={extend:function(t){var o=this._southWest,f=this._northEast,A,R;if(t instanceof ae)A=t,R=t;else if(t instanceof q){if(A=t._southWest,R=t._northEast,!A||!R)return this}else return t?this.extend(ce(t)||Q(t)):this;return!o&&!f?(this._southWest=new ae(A.lat,A.lng),this._northEast=new ae(R.lat,R.lng)):(o.lat=Math.min(A.lat,o.lat),o.lng=Math.min(A.lng,o.lng),f.lat=Math.max(R.lat,f.lat),f.lng=Math.max(R.lng,f.lng)),this},pad:function(t){var o=this._southWest,f=this._northEast,A=Math.abs(o.lat-f.lat)*t,R=Math.abs(o.lng-f.lng)*t;return new q(new ae(o.lat-A,o.lng-R),new ae(f.lat+A,f.lng+R))},getCenter:function(){return new ae((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ae(this.getNorth(),this.getWest())},getSouthEast:function(){return new ae(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof ae||"lat"in t?t=ce(t):t=Q(t);var o=this._southWest,f=this._northEast,A,R;return t instanceof q?(A=t.getSouthWest(),R=t.getNorthEast()):A=R=t,A.lat>=o.lat&&R.lat<=f.lat&&A.lng>=o.lng&&R.lng<=f.lng},intersects:function(t){t=Q(t);var o=this._southWest,f=this._northEast,A=t.getSouthWest(),R=t.getNorthEast(),V=R.lat>=o.lat&&A.lat<=f.lat,ee=R.lng>=o.lng&&A.lng<=f.lng;return V&&ee},overlaps:function(t){t=Q(t);var o=this._southWest,f=this._northEast,A=t.getSouthWest(),R=t.getNorthEast(),V=R.lat>o.lat&&A.lat<f.lat,ee=R.lng>o.lng&&A.lng<f.lng;return V&&ee},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,o){return t?(t=Q(t),this._southWest.equals(t.getSouthWest(),o)&&this._northEast.equals(t.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Q(t,o){return t instanceof q?t:new q(t,o)}function ae(t,o,f){if(isNaN(t)||isNaN(o))throw new Error("Invalid LatLng object: ("+t+", "+o+")");this.lat=+t,this.lng=+o,f!==void 0&&(this.alt=+f)}ae.prototype={equals:function(t,o){if(!t)return!1;t=ce(t);var f=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return f<=(o===void 0?1e-9:o)},toString:function(t){return"LatLng("+C(this.lat,t)+", "+C(this.lng,t)+")"},distanceTo:function(t){return pe.distance(this,ce(t))},wrap:function(){return pe.wrapLatLng(this)},toBounds:function(t){var o=180*t/40075017,f=o/Math.cos(Math.PI/180*this.lat);return Q([this.lat-o,this.lng-f],[this.lat+o,this.lng+f])},clone:function(){return new ae(this.lat,this.lng,this.alt)}};function ce(t,o,f){return t instanceof ae?t:E(t)&&typeof t[0]!="object"?t.length===3?new ae(t[0],t[1],t[2]):t.length===2?new ae(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new ae(t.lat,"lng"in t?t.lng:t.lon,t.alt):o===void 0?null:new ae(t,o,f)}var Ae={latLngToPoint:function(t,o){var f=this.projection.project(t),A=this.scale(o);return this.transformation._transform(f,A)},pointToLatLng:function(t,o){var f=this.scale(o),A=this.transformation.untransform(t,f);return this.projection.unproject(A)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var o=this.projection.bounds,f=this.scale(t),A=this.transformation.transform(o.min,f),R=this.transformation.transform(o.max,f);return new D(A,R)},infinite:!1,wrapLatLng:function(t){var o=this.wrapLng?x(t.lng,this.wrapLng,!0):t.lng,f=this.wrapLat?x(t.lat,this.wrapLat,!0):t.lat,A=t.alt;return new ae(f,o,A)},wrapLatLngBounds:function(t){var o=t.getCenter(),f=this.wrapLatLng(o),A=o.lat-f.lat,R=o.lng-f.lng;if(A===0&&R===0)return t;var V=t.getSouthWest(),ee=t.getNorthEast(),le=new ae(V.lat-A,V.lng-R),he=new ae(ee.lat-A,ee.lng-R);return new q(le,he)}},pe=u({},Ae,{wrapLng:[-180,180],R:6371e3,distance:function(t,o){var f=Math.PI/180,A=t.lat*f,R=o.lat*f,V=Math.sin((o.lat-t.lat)*f/2),ee=Math.sin((o.lng-t.lng)*f/2),le=V*V+Math.cos(A)*Math.cos(R)*ee*ee,he=2*Math.atan2(Math.sqrt(le),Math.sqrt(1-le));return this.R*he}}),xe=6378137,Be={R:xe,MAX_LATITUDE:85.0511287798,project:function(t){var o=Math.PI/180,f=this.MAX_LATITUDE,A=Math.max(Math.min(f,t.lat),-f),R=Math.sin(A*o);return new W(this.R*t.lng*o,this.R*Math.log((1+R)/(1-R))/2)},unproject:function(t){var o=180/Math.PI;return new ae((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*o,t.x*o/this.R)},bounds:(function(){var t=xe*Math.PI;return new D([-t,-t],[t,t])})()};function Oe(t,o,f,A){if(E(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=o,this._c=f,this._d=A}Oe.prototype={transform:function(t,o){return this._transform(t.clone(),o)},_transform:function(t,o){return o=o||1,t.x=o*(this._a*t.x+this._b),t.y=o*(this._c*t.y+this._d),t},untransform:function(t,o){return o=o||1,new W((t.x/o-this._b)/this._a,(t.y/o-this._d)/this._c)}};function Xe(t,o,f,A){return new Oe(t,o,f,A)}var Ee=u({},pe,{code:"EPSG:3857",projection:Be,transformation:(function(){var t=.5/(Math.PI*Be.R);return Xe(t,.5,-t,.5)})()}),je=u({},Ee,{code:"EPSG:900913"});function at(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function mt(t,o){var f="",A,R,V,ee,le,he;for(A=0,V=t.length;A<V;A++){for(le=t[A],R=0,ee=le.length;R<ee;R++)he=le[R],f+=(R?"L":"M")+he.x+" "+he.y;f+=o?Le.svg?"z":"x":""}return f||"M0 0"}var ot=document.documentElement.style,qe="ActiveXObject"in window,Ke=qe&&!document.addEventListener,Qe="msLaunchUri"in navigator&&!("documentMode"in document),rt=Mt("webkit"),He=Mt("android"),Et=Mt("android 2")||Mt("android 3"),zt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Qt=He&&Mt("Google")&&zt<537&&!("AudioNode"in window),Dt=!!window.opera,Gt=!Qe&&Mt("chrome"),Yt=Mt("gecko")&&!rt&&!Dt&&!qe,$t=!Gt&&Mt("safari"),Ht=Mt("phantom"),Rt="OTransition"in ot,Vt=navigator.platform.indexOf("Win")===0,Pe=qe&&"transition"in ot,_e="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Et,fe="MozPerspective"in ot,ve=!window.L_DISABLE_3D&&(Pe||_e||fe)&&!Rt&&!Ht,we=typeof orientation<"u"||Mt("mobile"),Ge=we&&rt,re=we&&_e,ye=!window.PointerEvent&&window.MSPointerEvent,Ce=!!(window.PointerEvent||ye),Ne="ontouchstart"in window||!!window.TouchEvent,Je=!window.L_NO_TOUCH&&(Ne||Ce),Fe=we&&Dt,ft=we&&Yt,St=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,xt=(function(){var t=!1;try{var o=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",v,o),window.removeEventListener("testPassiveEventSupport",v,o)}catch{}return t})(),an=(function(){return!!document.createElement("canvas").getContext})(),dt=!!(document.createElementNS&&at("svg").createSVGRect),Pt=!!dt&&(function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),vn=!dt&&(function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var o=t.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}})(),wt=navigator.platform.indexOf("Mac")===0,kt=navigator.platform.indexOf("Linux")===0;function Mt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Le={ie:qe,ielt9:Ke,edge:Qe,webkit:rt,android:He,android23:Et,androidStock:Qt,opera:Dt,chrome:Gt,gecko:Yt,safari:$t,phantom:Ht,opera12:Rt,win:Vt,ie3d:Pe,webkit3d:_e,gecko3d:fe,any3d:ve,mobile:we,mobileWebkit:Ge,mobileWebkit3d:re,msPointer:ye,pointer:Ce,touch:Je,touchNative:Ne,mobileOpera:Fe,mobileGecko:ft,retina:St,passiveEvents:xt,canvas:an,svg:dt,vml:vn,inlineSvg:Pt,mac:wt,linux:kt},Br=Le.msPointer?"MSPointerDown":"pointerdown",li=Le.msPointer?"MSPointerMove":"pointermove",Dl=Le.msPointer?"MSPointerUp":"pointerup",Rl=Le.msPointer?"MSPointerCancel":"pointercancel",fa={touchstart:Br,touchmove:li,touchend:Dl,touchcancel:Rl},Wr={touchstart:Xt,touchmove:ds,touchend:ds,touchcancel:ds},ui={},ha=!1;function Td(t,o,f){return o==="touchstart"&&Dd(),Wr[o]?(f=Wr[o].bind(this,f),t.addEventListener(fa[o],f,!1),f):(console.warn("wrong event specified:",o),v)}function Fl(t,o,f){if(!fa[o]){console.warn("wrong event specified:",o);return}t.removeEventListener(fa[o],f,!1)}function Nl(t){ui[t.pointerId]=t}function Ll(t){ui[t.pointerId]&&(ui[t.pointerId]=t)}function pa(t){delete ui[t.pointerId]}function Dd(){ha||(document.addEventListener(Br,Nl,!0),document.addEventListener(li,Ll,!0),document.addEventListener(Dl,pa,!0),document.addEventListener(Rl,pa,!0),ha=!0)}function ds(t,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var f in ui)o.touches.push(ui[f]);o.changedTouches=[o],t(o)}}function Xt(t,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&Jt(o),ds(t,o)}function Rd(t){var o={},f,A;for(A in t)f=t[A],o[A]=f&&f.bind?f.bind(t):f;return t=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var ma=200;function Ml(t,o){t.addEventListener("dblclick",o);var f=0,A;function R(V){if(V.detail!==1){A=V.detail;return}if(!(V.pointerType==="mouse"||V.sourceCapabilities&&!V.sourceCapabilities.firesTouchEvents)){var ee=fi(V);if(!(ee.some(function(he){return he instanceof HTMLLabelElement&&he.attributes.for})&&!ee.some(function(he){return he instanceof HTMLInputElement||he instanceof HTMLSelectElement}))){var le=Date.now();le-f<=ma?(A++,A===2&&o(Rd(V))):A=1,f=le}}}return t.addEventListener("click",R),{dblclick:o,simDblclick:R}}function fs(t,o){t.removeEventListener("dblclick",o.dblclick),t.removeEventListener("click",o.simDblclick)}var ga=ji(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Mi=ji(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),bo=Mi==="webkitTransition"||Mi==="OTransition"?Mi+"End":"transitionend";function er(t){return typeof t=="string"?document.getElementById(t):t}function Co(t,o){var f=t.style[o]||t.currentStyle&&t.currentStyle[o];if((!f||f==="auto")&&document.defaultView){var A=document.defaultView.getComputedStyle(t,null);f=A?A[o]:null}return f==="auto"?null:f}function ct(t,o,f){var A=document.createElement(t);return A.className=o||"",f&&f.appendChild(A),A}function Wt(t){var o=t.parentNode;o&&o.removeChild(t)}function hs(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Ii(t){var o=t.parentNode;o&&o.lastChild!==t&&o.appendChild(t)}function Pr(t){var o=t.parentNode;o&&o.firstChild!==t&&o.insertBefore(t,o.firstChild)}function Oi(t,o){if(t.classList!==void 0)return t.classList.contains(o);var f=ps(t);return f.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(f)}function lt(t,o){if(t.classList!==void 0)for(var f=M(o),A=0,R=f.length;A<R;A++)t.classList.add(f[A]);else if(!Oi(t,o)){var V=ps(t);xa(t,(V?V+" ":"")+o)}}function Ut(t,o){t.classList!==void 0?t.classList.remove(o):xa(t,P((" "+ps(t)+" ").replace(" "+o+" "," ")))}function xa(t,o){t.className.baseVal===void 0?t.className=o:t.className.baseVal=o}function ps(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Bn(t,o){"opacity"in t.style?t.style.opacity=o:"filter"in t.style&&Il(t,o)}function Il(t,o){var f=!1,A="DXImageTransform.Microsoft.Alpha";try{f=t.filters.item(A)}catch{if(o===1)return}o=Math.round(o*100),f?(f.Enabled=o!==100,f.Opacity=o):t.style.filter+=" progid:"+A+"(opacity="+o+")"}function ji(t){for(var o=document.documentElement.style,f=0;f<t.length;f++)if(t[f]in o)return t[f];return!1}function tr(t,o,f){var A=o||new W(0,0);t.style[ga]=(Le.ie3d?"translate("+A.x+"px,"+A.y+"px)":"translate3d("+A.x+"px,"+A.y+"px,0)")+(f?" scale("+f+")":"")}function nn(t,o){t._leaflet_pos=o,Le.any3d?tr(t,o):(t.style.left=o.x+"px",t.style.top=o.y+"px")}function Tr(t){return t._leaflet_pos||new W(0,0)}var Ct,zi,ms;if("onselectstart"in document)Ct=function(){it(window,"selectstart",Jt)},zi=function(){It(window,"selectstart",Jt)};else{var ci=ji(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ct=function(){if(ci){var t=document.documentElement.style;ms=t[ci],t[ci]="none"}},zi=function(){ci&&(document.documentElement.style[ci]=ms,ms=void 0)}}function gs(){it(window,"dragstart",Jt)}function xs(){It(window,"dragstart",Jt)}var Eo,ko;function Hi(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(nr(),Eo=t,ko=t.style.outlineStyle,t.style.outlineStyle="none",it(window,"keydown",nr))}function nr(){Eo&&(Eo.style.outlineStyle=ko,Eo=void 0,ko=void 0,It(window,"keydown",nr))}function Dr(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function mr(t){var o=t.getBoundingClientRect();return{x:o.width/t.offsetWidth||1,y:o.height/t.offsetHeight||1,boundingClientRect:o}}var So={__proto__:null,TRANSFORM:ga,TRANSITION:Mi,TRANSITION_END:bo,get:er,getStyle:Co,create:ct,remove:Wt,empty:hs,toFront:Ii,toBack:Pr,hasClass:Oi,addClass:lt,removeClass:Ut,setClass:xa,getClass:ps,setOpacity:Bn,testProp:ji,setTransform:tr,setPosition:nn,getPosition:Tr,get disableTextSelection(){return Ct},get enableTextSelection(){return zi},disableImageDrag:gs,enableImageDrag:xs,preventOutline:Hi,restoreOutline:nr,getSizedParentNode:Dr,getScale:mr};function it(t,o,f,A){if(o&&typeof o=="object")for(var R in o)Aa(t,R,o[R],f);else{o=M(o);for(var V=0,ee=o.length;V<ee;V++)Aa(t,o[V],f,A)}return this}var cn="_leaflet_events";function It(t,o,f,A){if(arguments.length===1)va(t),delete t[cn];else if(o&&typeof o=="object")for(var R in o)vs(t,R,o[R],f);else if(o=M(o),arguments.length===2)va(t,function(le){return T(o,le)!==-1});else for(var V=0,ee=o.length;V<ee;V++)vs(t,o[V],f,A);return this}function va(t,o){for(var f in t[cn]){var A=f.split(/\d/)[0];(!o||o(A))&&vs(t,A,null,null,f)}}var di={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Aa(t,o,f,A){var R=o+g(f)+(A?"_"+g(A):"");if(t[cn]&&t[cn][R])return this;var V=function(le){return f.call(A||t,le||window.event)},ee=V;!Le.touchNative&&Le.pointer&&o.indexOf("touch")===0?V=Td(t,o,V):Le.touch&&o==="dblclick"?V=Ml(t,V):"addEventListener"in t?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?t.addEventListener(di[o]||o,V,Le.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(V=function(le){le=le||window.event,To(t,le)&&ee(le)},t.addEventListener(di[o],V,!1)):t.addEventListener(o,ee,!1):t.attachEvent("on"+o,V),t[cn]=t[cn]||{},t[cn][R]=V}function vs(t,o,f,A,R){R=R||o+g(f)+(A?"_"+g(A):"");var V=t[cn]&&t[cn][R];if(!V)return this;!Le.touchNative&&Le.pointer&&o.indexOf("touch")===0?Fl(t,o,V):Le.touch&&o==="dblclick"?fs(t,V):"removeEventListener"in t?t.removeEventListener(di[o]||o,V,!1):t.detachEvent("on"+o,V),t[cn][R]=null}function gr(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function As(t){return Aa(t,"wheel",gr),this}function Bo(t){return it(t,"mousedown touchstart dblclick contextmenu",gr),t._leaflet_disable_click=!0,this}function Jt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function rr(t){return Jt(t),gr(t),this}function fi(t){if(t.composedPath)return t.composedPath();for(var o=[],f=t.target;f;)o.push(f),f=f.parentNode;return o}function Po(t,o){if(!o)return new W(t.clientX,t.clientY);var f=mr(o),A=f.boundingClientRect;return new W((t.clientX-A.left)/f.x-o.clientLeft,(t.clientY-A.top)/f.y-o.clientTop)}var Fd=Le.linux&&Le.chrome?window.devicePixelRatio:Le.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ol(t){return Le.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Fd:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function To(t,o){var f=o.relatedTarget;if(!f)return!0;try{for(;f&&f!==t;)f=f.parentNode}catch{return!1}return f!==t}var ys={__proto__:null,on:it,off:It,stopPropagation:gr,disableScrollPropagation:As,disableClickPropagation:Bo,preventDefault:Jt,stop:rr,getPropagationPath:fi,getMousePosition:Po,getWheelDelta:Ol,isExternalTarget:To,addListener:it,removeListener:It},_s=se.extend({run:function(t,o,f,A){this.stop(),this._el=t,this._inProgress=!0,this._duration=f||.25,this._easeOutPower=1/Math.max(A||.5,.2),this._startPos=Tr(t),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=K(this._animate,this),this._step()},_step:function(t){var o=+new Date-this._startTime,f=this._duration*1e3;o<f?this._runFrame(this._easeOut(o/f),t):(this._runFrame(1),this._complete())},_runFrame:function(t,o){var f=this._startPos.add(this._offset.multiplyBy(t));o&&f._round(),nn(this._el,f),this.fire("step")},_complete:function(){J(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),yt=se.extend({options:{crs:Ee,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,o){o=k(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=h(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(ce(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Mi&&Le.any3d&&!Le.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),it(this._proxy,bo,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,o,f){if(o=o===void 0?this._zoom:this._limitZoom(o),t=this._limitCenter(ce(t),o,this.options.maxBounds),f=f||{},this._stop(),this._loaded&&!f.reset&&f!==!0){f.animate!==void 0&&(f.zoom=u({animate:f.animate},f.zoom),f.pan=u({animate:f.animate,duration:f.duration},f.pan));var A=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,o,f.zoom):this._tryAnimatedPan(t,f.pan);if(A)return clearTimeout(this._sizeTimer),this}return this._resetView(t,o,f.pan&&f.pan.noMoveStart),this},setZoom:function(t,o){return this._loaded?this.setView(this.getCenter(),t,{zoom:o}):(this._zoom=t,this)},zoomIn:function(t,o){return t=t||(Le.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,o)},zoomOut:function(t,o){return t=t||(Le.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,o)},setZoomAround:function(t,o,f){var A=this.getZoomScale(o),R=this.getSize().divideBy(2),V=t instanceof W?t:this.latLngToContainerPoint(t),ee=V.subtract(R).multiplyBy(1-1/A),le=this.containerPointToLatLng(R.add(ee));return this.setView(le,o,{zoom:f})},_getBoundsCenterZoom:function(t,o){o=o||{},t=t.getBounds?t.getBounds():Q(t);var f=Z(o.paddingTopLeft||o.padding||[0,0]),A=Z(o.paddingBottomRight||o.padding||[0,0]),R=this.getBoundsZoom(t,!1,f.add(A));if(R=typeof o.maxZoom=="number"?Math.min(o.maxZoom,R):R,R===1/0)return{center:t.getCenter(),zoom:R};var V=A.subtract(f).divideBy(2),ee=this.project(t.getSouthWest(),R),le=this.project(t.getNorthEast(),R),he=this.unproject(ee.add(le).divideBy(2).add(V),R);return{center:he,zoom:R}},fitBounds:function(t,o){if(t=Q(t),!t.isValid())throw new Error("Bounds are not valid.");var f=this._getBoundsCenterZoom(t,o);return this.setView(f.center,f.zoom,o)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,o){return this.setView(t,this._zoom,{pan:o})},panBy:function(t,o){if(t=Z(t).round(),o=o||{},!t.x&&!t.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new _s,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){lt(this._mapPane,"leaflet-pan-anim");var f=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,f,o.duration||.25,o.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,o,f){if(f=f||{},f.animate===!1||!Le.any3d)return this.setView(t,o,f);this._stop();var A=this.project(this.getCenter()),R=this.project(t),V=this.getSize(),ee=this._zoom;t=ce(t),o=o===void 0?ee:o;var le=Math.max(V.x,V.y),he=le*this.getZoomScale(ee,o),be=R.distanceTo(A)||1,Me=1.42,et=Me*Me;function ht(Ft){var no=Ft?-1:1,Gd=Ft?he:le,$d=he*he-le*le+no*et*et*be*be,Ai=2*Gd*et*be,yi=$d/Ai,_i=Math.sqrt(yi*yi+1)-yi,Ls=_i<1e-9?-18:Math.log(_i);return Ls}function dn(Ft){return(Math.exp(Ft)-Math.exp(-Ft))/2}function ln(Ft){return(Math.exp(Ft)+Math.exp(-Ft))/2}function On(Ft){return dn(Ft)/ln(Ft)}var Tn=ht(0);function eo(Ft){return le*(ln(Tn)/ln(Tn+Me*Ft))}function za(Ft){return le*(ln(Tn)*On(Tn+Me*Ft)-dn(Tn))/et}function Jr(Ft){return 1-Math.pow(1-Ft,1.5)}var ou=Date.now(),vi=(ht(1)-Tn)/Me,yr=f.duration?1e3*f.duration:1e3*vi*.8;function to(){var Ft=(Date.now()-ou)/yr,no=Jr(Ft)*vi;Ft<=1?(this._flyToFrame=K(to,this),this._move(this.unproject(A.add(R.subtract(A).multiplyBy(za(no)/be)),ee),this.getScaleZoom(le/eo(no),ee),{flyTo:!0})):this._move(t,o)._moveEnd(!0)}return this._moveStart(!0,f.noMoveStart),to.call(this),this},flyToBounds:function(t,o){var f=this._getBoundsCenterZoom(t,o);return this.flyTo(f.center,f.zoom,o)},setMaxBounds:function(t){return t=Q(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var o=this.options.minZoom;return this.options.minZoom=t,this._loaded&&o!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var o=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&o!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,o){this._enforcingBounds=!0;var f=this.getCenter(),A=this._limitCenter(f,this._zoom,Q(t));return f.equals(A)||this.panTo(A,o),this._enforcingBounds=!1,this},panInside:function(t,o){o=o||{};var f=Z(o.paddingTopLeft||o.padding||[0,0]),A=Z(o.paddingBottomRight||o.padding||[0,0]),R=this.project(this.getCenter()),V=this.project(t),ee=this.getPixelBounds(),le=H([ee.min.add(f),ee.max.subtract(A)]),he=le.getSize();if(!le.contains(V)){this._enforcingBounds=!0;var be=V.subtract(le.getCenter()),Me=le.extend(V).getSize().subtract(he);R.x+=be.x<0?-Me.x:Me.x,R.y+=be.y<0?-Me.y:Me.y,this.panTo(this.unproject(R),o),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=u({animate:!1,pan:!0},t===!0?{animate:!0}:t);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var f=this.getSize(),A=o.divideBy(2).round(),R=f.divideBy(2).round(),V=A.subtract(R);return!V.x&&!V.y?this:(t.animate&&t.pan?this.panBy(V):(t.pan&&this._rawPanBy(V),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(h(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:f}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=u({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=h(this._handleGeolocationResponse,this),f=h(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,f,t):navigator.geolocation.getCurrentPosition(o,f,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var o=t.code,f=t.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+f+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var o=t.coords.latitude,f=t.coords.longitude,A=new ae(o,f),R=A.toBounds(t.coords.accuracy*2),V=this._locateOptions;if(V.setView){var ee=this.getBoundsZoom(R);this.setView(A,V.maxZoom?Math.min(ee,V.maxZoom):ee)}var le={latlng:A,bounds:R,timestamp:t.timestamp};for(var he in t.coords)typeof t.coords[he]=="number"&&(le[he]=t.coords[he]);this.fire("locationfound",le)}},addHandler:function(t,o){if(!o)return this;var f=this[t]=new o(this);return this._handlers.push(f),this.options[t]&&f.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Wt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(J(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)Wt(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,o){var f="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),A=ct("div",f,o||this._mapPane);return t&&(this._panes[t]=A),A},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),o=this.unproject(t.getBottomLeft()),f=this.unproject(t.getTopRight());return new q(o,f)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,o,f){t=Q(t),f=Z(f||[0,0]);var A=this.getZoom()||0,R=this.getMinZoom(),V=this.getMaxZoom(),ee=t.getNorthWest(),le=t.getSouthEast(),he=this.getSize().subtract(f),be=H(this.project(le,A),this.project(ee,A)).getSize(),Me=Le.any3d?this.options.zoomSnap:1,et=he.x/be.x,ht=he.y/be.y,dn=o?Math.max(et,ht):Math.min(et,ht);return A=this.getScaleZoom(dn,A),Me&&(A=Math.round(A/(Me/100))*(Me/100),A=o?Math.ceil(A/Me)*Me:Math.floor(A/Me)*Me),Math.max(R,Math.min(V,A))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new W(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,o){var f=this._getTopLeftPoint(t,o);return new D(f,f.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,o){var f=this.options.crs;return o=o===void 0?this._zoom:o,f.scale(t)/f.scale(o)},getScaleZoom:function(t,o){var f=this.options.crs;o=o===void 0?this._zoom:o;var A=f.zoom(t*f.scale(o));return isNaN(A)?1/0:A},project:function(t,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(ce(t),o)},unproject:function(t,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(Z(t),o)},layerPointToLatLng:function(t){var o=Z(t).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(t){var o=this.project(ce(t))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(ce(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(Q(t))},distance:function(t,o){return this.options.crs.distance(ce(t),ce(o))},containerPointToLayerPoint:function(t){return Z(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return Z(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var o=this.containerPointToLayerPoint(Z(t));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ce(t)))},mouseEventToContainerPoint:function(t){return Po(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var o=this._container=er(t);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");it(o,"scroll",this._onScroll,this),this._containerId=g(o)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&Le.any3d,lt(t,"leaflet-container"+(Le.touch?" leaflet-touch":"")+(Le.retina?" leaflet-retina":"")+(Le.ielt9?" leaflet-oldie":"")+(Le.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=Co(t,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),nn(this._mapPane,new W(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(lt(t.markerPane,"leaflet-zoom-hide"),lt(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,o,f){nn(this._mapPane,new W(0,0));var A=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var R=this._zoom!==o;this._moveStart(R,f)._move(t,o)._moveEnd(R),this.fire("viewreset"),A&&this.fire("load")},_moveStart:function(t,o){return t&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(t,o,f,A){o===void 0&&(o=this._zoom);var R=this._zoom!==o;return this._zoom=o,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),A?f&&f.pinch&&this.fire("zoom",f):((R||f&&f.pinch)&&this.fire("zoom",f),this.fire("move",f)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return J(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){nn(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[g(this._container)]=this;var o=t?It:it;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),Le.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){J(this._resizeRequest),this._resizeRequest=K(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,o){for(var f=[],A,R=o==="mouseout"||o==="mouseover",V=t.target||t.srcElement,ee=!1;V;){if(A=this._targets[g(V)],A&&(o==="click"||o==="preclick")&&this._draggableMoved(A)){ee=!0;break}if(A&&A.listens(o,!0)&&(R&&!To(V,t)||(f.push(A),R))||V===this._container)break;V=V.parentNode}return!f.length&&!ee&&!R&&this.listens(o,!0)&&(f=[this]),f},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var o=t.target||t.srcElement;if(!(!this._loaded||o._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(o))){var f=t.type;f==="mousedown"&&Hi(o),this._fireDOMEvent(t,f)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,o,f){if(t.type==="click"){var A=u({},t);A.type="preclick",this._fireDOMEvent(A,A.type,f)}var R=this._findEventTargets(t,o);if(f){for(var V=[],ee=0;ee<f.length;ee++)f[ee].listens(o,!0)&&V.push(f[ee]);R=V.concat(R)}if(R.length){o==="contextmenu"&&Jt(t);var le=R[0],he={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var be=le.getLatLng&&(!le._radius||le._radius<=10);he.containerPoint=be?this.latLngToContainerPoint(le.getLatLng()):this.mouseEventToContainerPoint(t),he.layerPoint=this.containerPointToLayerPoint(he.containerPoint),he.latlng=be?le.getLatLng():this.layerPointToLatLng(he.layerPoint)}for(ee=0;ee<R.length;ee++)if(R[ee].fire(o,he,!0),he.originalEvent._stopped||R[ee].options.bubblingMouseEvents===!1&&T(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,o=this._handlers.length;t<o;t++)this._handlers[t].disable()},whenReady:function(t,o){return this._loaded?t.call(o||this,{target:this}):this.on("load",t,o),this},_getMapPanePos:function(){return Tr(this._mapPane)||new W(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,o){var f=t&&o!==void 0?this._getNewPixelOrigin(t,o):this.getPixelOrigin();return f.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,o){var f=this.getSize()._divideBy(2);return this.project(t,o)._subtract(f)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,o,f){var A=this._getNewPixelOrigin(f,o);return this.project(t,o)._subtract(A)},_latLngBoundsToNewLayerBounds:function(t,o,f){var A=this._getNewPixelOrigin(f,o);return H([this.project(t.getSouthWest(),o)._subtract(A),this.project(t.getNorthWest(),o)._subtract(A),this.project(t.getSouthEast(),o)._subtract(A),this.project(t.getNorthEast(),o)._subtract(A)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,o,f){if(!f)return t;var A=this.project(t,o),R=this.getSize().divideBy(2),V=new D(A.subtract(R),A.add(R)),ee=this._getBoundsOffset(V,f,o);return Math.abs(ee.x)<=1&&Math.abs(ee.y)<=1?t:this.unproject(A.add(ee),o)},_limitOffset:function(t,o){if(!o)return t;var f=this.getPixelBounds(),A=new D(f.min.add(t),f.max.add(t));return t.add(this._getBoundsOffset(A,o))},_getBoundsOffset:function(t,o,f){var A=H(this.project(o.getNorthEast(),f),this.project(o.getSouthWest(),f)),R=A.min.subtract(t.min),V=A.max.subtract(t.max),ee=this._rebound(R.x,-V.x),le=this._rebound(R.y,-V.y);return new W(ee,le)},_rebound:function(t,o){return t+o>0?Math.round(t-o)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(o))},_limitZoom:function(t){var o=this.getMinZoom(),f=this.getMaxZoom(),A=Le.any3d?this.options.zoomSnap:1;return A&&(t=Math.round(t/A)*A),Math.max(o,Math.min(f,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ut(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,o){var f=this._getCenterOffset(t)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(f)?!1:(this.panBy(f,o),!0)},_createAnimProxy:function(){var t=this._proxy=ct("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(o){var f=ga,A=this._proxy.style[f];tr(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),A===this._proxy.style[f]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Wt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),o=this.getZoom();tr(this._proxy,this.project(t,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,o,f){if(this._animatingZoom)return!0;if(f=f||{},!this._zoomAnimated||f.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var A=this.getZoomScale(o),R=this._getCenterOffset(t)._divideBy(1-1/A);return f.animate!==!0&&!this.getSize().contains(R)?!1:(K(function(){this._moveStart(!0,f.noMoveStart||!1)._animateZoom(t,o,!0)},this),!0)},_animateZoom:function(t,o,f,A){this._mapPane&&(f&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=o,lt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:o,noUpdate:A}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(h(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ut(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function qr(t,o){return new yt(t,o)}var Mn=ie.extend({options:{position:"topright"},initialize:function(t){k(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var o=this._map;return o&&o.removeControl(this),this.options.position=t,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var o=this._container=this.onAdd(t),f=this.getPosition(),A=t._controlCorners[f];return lt(o,"leaflet-control"),f.indexOf("bottom")!==-1?A.insertBefore(o,A.firstChild):A.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Wt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Gr=function(t){return new Mn(t)};yt.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},o="leaflet-",f=this._controlContainer=ct("div",o+"control-container",this._container);function A(R,V){var ee=o+R+" "+o+V;t[R+V]=ct("div",ee,f)}A("top","left"),A("top","right"),A("bottom","left"),A("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Wt(this._controlCorners[t]);Wt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ya=Mn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,o,f,A){return f<A?-1:A<f?1:0}},initialize:function(t,o,f){k(this,f),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var A in t)this._addLayer(t[A],A);for(A in o)this._addLayer(o[A],A,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Mn.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,o){return this._addLayer(t,o),this._map?this._update():this},addOverlay:function(t,o){return this._addLayer(t,o,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var o=this._getLayer(g(t));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){lt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(lt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):Ut(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ut(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",o=this._container=ct("div",t),f=this.options.collapsed;o.setAttribute("aria-haspopup",!0),Bo(o),As(o);var A=this._section=ct("section",t+"-list");f&&(this._map.on("click",this.collapse,this),it(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var R=this._layersLink=ct("a",t+"-toggle",o);R.href="#",R.title="Layers",R.setAttribute("role","button"),it(R,{keydown:function(V){V.keyCode===13&&this._expandSafely()},click:function(V){Jt(V),this._expandSafely()}},this),f||this.expand(),this._baseLayersList=ct("div",t+"-base",A),this._separator=ct("div",t+"-separator",A),this._overlaysList=ct("div",t+"-overlays",A),o.appendChild(A)},_getLayer:function(t){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&g(this._layers[o].layer)===t)return this._layers[o]},_addLayer:function(t,o,f){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:o,overlay:f}),this.options.sortLayers&&this._layers.sort(h(function(A,R){return this.options.sortFunction(A.layer,R.layer,A.name,R.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;hs(this._baseLayersList),hs(this._overlaysList),this._layerControlInputs=[];var t,o,f,A,R=0;for(f=0;f<this._layers.length;f++)A=this._layers[f],this._addItem(A),o=o||A.overlay,t=t||!A.overlay,R+=A.overlay?0:1;return this.options.hideSingleBase&&(t=t&&R>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=o&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var o=this._getLayer(g(t.target)),f=o.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;f&&this._map.fire(f,o)},_createRadioElement:function(t,o){var f='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(o?' checked="checked"':"")+"/>",A=document.createElement("div");return A.innerHTML=f,A.firstChild},_addItem:function(t){var o=document.createElement("label"),f=this._map.hasLayer(t.layer),A;t.overlay?(A=document.createElement("input"),A.type="checkbox",A.className="leaflet-control-layers-selector",A.defaultChecked=f):A=this._createRadioElement("leaflet-base-layers_"+g(this),f),this._layerControlInputs.push(A),A.layerId=g(t.layer),it(A,"click",this._onInputClick,this);var R=document.createElement("span");R.innerHTML=" "+t.name;var V=document.createElement("span");o.appendChild(V),V.appendChild(A),V.appendChild(R);var ee=t.overlay?this._overlaysList:this._baseLayersList;return ee.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,o,f,A=[],R=[];this._handlingClick=!0;for(var V=t.length-1;V>=0;V--)o=t[V],f=this._getLayer(o.layerId).layer,o.checked?A.push(f):o.checked||R.push(f);for(V=0;V<R.length;V++)this._map.hasLayer(R[V])&&this._map.removeLayer(R[V]);for(V=0;V<A.length;V++)this._map.hasLayer(A[V])||this._map.addLayer(A[V]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,o,f,A=this._map.getZoom(),R=t.length-1;R>=0;R--)o=t[R],f=this._getLayer(o.layerId).layer,o.disabled=f.options.minZoom!==void 0&&A<f.options.minZoom||f.options.maxZoom!==void 0&&A>f.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,it(t,"click",Jt),this.expand();var o=this;setTimeout(function(){It(t,"click",Jt),o._preventClick=!1})}}),ws=function(t,o,f){return new ya(t,o,f)},Vi=Mn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var o="leaflet-control-zoom",f=ct("div",o+" leaflet-bar"),A=this.options;return this._zoomInButton=this._createButton(A.zoomInText,A.zoomInTitle,o+"-in",f,this._zoomIn),this._zoomOutButton=this._createButton(A.zoomOutText,A.zoomOutTitle,o+"-out",f,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),f},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,o,f,A,R){var V=ct("a",f,A);return V.innerHTML=t,V.href="#",V.title=o,V.setAttribute("role","button"),V.setAttribute("aria-label",o),Bo(V),it(V,"click",rr),it(V,"click",R,this),it(V,"click",this._refocusOnMap,this),V},_updateDisabled:function(){var t=this._map,o="leaflet-disabled";Ut(this._zoomInButton,o),Ut(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(lt(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(lt(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});yt.mergeOptions({zoomControl:!0}),yt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Vi,this.addControl(this.zoomControl))});var jl=function(t){return new Vi(t)},Pn=Mn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var o="leaflet-control-scale",f=ct("div",o),A=this.options;return this._addScales(A,o+"-line",f),t.on(A.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),f},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,o,f){t.metric&&(this._mScale=ct("div",o,f)),t.imperial&&(this._iScale=ct("div",o,f))},_update:function(){var t=this._map,o=t.getSize().y/2,f=t.distance(t.containerPointToLatLng([0,o]),t.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(f)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var o=this._getRoundNum(t),f=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,f,o/t)},_updateImperial:function(t){var o=t*3.2808399,f,A,R;o>5280?(f=o/5280,A=this._getRoundNum(f),this._updateScale(this._iScale,A+" mi",A/f)):(R=this._getRoundNum(o),this._updateScale(this._iScale,R+" ft",R/o))},_updateScale:function(t,o,f){t.style.width=Math.round(this.options.maxWidth*f)+"px",t.innerHTML=o},_getRoundNum:function(t){var o=Math.pow(10,(Math.floor(t)+"").length-1),f=t/o;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:1,o*f}}),Ui=function(t){return new Pn(t)},_a='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',hi=Mn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Le.inlineSvg?_a+" ":"")+"Leaflet</a>"},initialize:function(t){k(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=ct("div","leaflet-control-attribution"),Bo(this._container);for(var o in t._layers)t._layers[o].getAttribution&&this.addAttribution(t._layers[o].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var o in this._attributions)this._attributions[o]&&t.push(o);var f=[];this.options.prefix&&f.push(this.options.prefix),t.length&&f.push(t.join(", ")),this._container.innerHTML=f.join(' <span aria-hidden="true">|</span> ')}}});yt.mergeOptions({attributionControl:!0}),yt.addInitHook(function(){this.options.attributionControl&&new hi().addTo(this)});var Nd=function(t){return new hi(t)};Mn.Layers=ya,Mn.Zoom=Vi,Mn.Scale=Pn,Mn.Attribution=hi,Gr.layers=ws,Gr.zoom=jl,Gr.scale=Ui,Gr.attribution=Nd;var Zn=ie.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Zn.addTo=function(t,o){return t.addHandler(o,this),this};var wa={Events:$},Zi=Le.touch?"touchstart mousedown":"mousedown",ir=se.extend({options:{clickTolerance:3},initialize:function(t,o,f,A){k(this,A),this._element=t,this._dragStartTarget=o||t,this._preventOutline=f},enable:function(){this._enabled||(it(this._dragStartTarget,Zi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ir._dragging===this&&this.finishDrag(!0),It(this._dragStartTarget,Zi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!Oi(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){ir._dragging===this&&this.finishDrag();return}if(!(ir._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(ir._dragging=this,this._preventOutline&&Hi(this._element),gs(),Ct(),!this._moving)){this.fire("down");var o=t.touches?t.touches[0]:t,f=Dr(this._element);this._startPoint=new W(o.clientX,o.clientY),this._startPos=Tr(this._element),this._parentScale=mr(f);var A=t.type==="mousedown";it(document,A?"mousemove":"touchmove",this._onMove,this),it(document,A?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var o=t.touches&&t.touches.length===1?t.touches[0]:t,f=new W(o.clientX,o.clientY)._subtract(this._startPoint);!f.x&&!f.y||Math.abs(f.x)+Math.abs(f.y)<this.options.clickTolerance||(f.x/=this._parentScale.x,f.y/=this._parentScale.y,Jt(t),this._moved||(this.fire("dragstart"),this._moved=!0,lt(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),lt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),nn(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){Ut(document.body,"leaflet-dragging"),this._lastTarget&&(Ut(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),It(document,"mousemove touchmove",this._onMove,this),It(document,"mouseup touchend touchcancel",this._onUp,this),xs(),zi();var o=this._moved&&this._moving;this._moving=!1,ir._dragging=!1,o&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function ba(t,o,f){var A,R=[1,4,2,8],V,ee,le,he,be,Me,et,ht;for(V=0,Me=t.length;V<Me;V++)t[V]._code=pi(t[V],o);for(le=0;le<4;le++){for(et=R[le],A=[],V=0,Me=t.length,ee=Me-1;V<Me;ee=V++)he=t[V],be=t[ee],he._code&et?be._code&et||(ht=Cs(be,he,et,o,f),ht._code=pi(ht,o),A.push(ht)):(be._code&et&&(ht=Cs(be,he,et,o,f),ht._code=pi(ht,o),A.push(ht)),A.push(he));t=A}return t}function zl(t,o){var f,A,R,V,ee,le,he,be,Me;if(!t||t.length===0)throw new Error("latlngs not passed");Wn(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var et=ce([0,0]),ht=Q(t),dn=ht.getNorthWest().distanceTo(ht.getSouthWest())*ht.getNorthEast().distanceTo(ht.getNorthWest());dn<1700&&(et=Ca(t));var ln=t.length,On=[];for(f=0;f<ln;f++){var Tn=ce(t[f]);On.push(o.project(ce([Tn.lat-et.lat,Tn.lng-et.lng])))}for(le=he=be=0,f=0,A=ln-1;f<ln;A=f++)R=On[f],V=On[A],ee=R.y*V.x-V.y*R.x,he+=(R.x+V.x)*ee,be+=(R.y+V.y)*ee,le+=ee*3;le===0?Me=On[0]:Me=[he/le,be/le];var eo=o.unproject(Z(Me));return ce([eo.lat+et.lat,eo.lng+et.lng])}function Ca(t){for(var o=0,f=0,A=0,R=0;R<t.length;R++){var V=ce(t[R]);o+=V.lat,f+=V.lng,A++}return ce([o/A,f/A])}var Ld={__proto__:null,clipPolygon:ba,polygonCenter:zl,centroid:Ca};function bs(t,o){if(!o||!t.length)return t.slice();var f=o*o;return t=Od(t,f),t=Id(t,f),t}function Hl(t,o,f){return Math.sqrt(mi(t,o,f,!0))}function Md(t,o,f){return mi(t,o,f)}function Id(t,o){var f=t.length,A=typeof Uint8Array<"u"?Uint8Array:Array,R=new A(f);R[0]=R[f-1]=1,Ea(t,R,o,0,f-1);var V,ee=[];for(V=0;V<f;V++)R[V]&&ee.push(t[V]);return ee}function Ea(t,o,f,A,R){var V=0,ee,le,he;for(le=A+1;le<=R-1;le++)he=mi(t[le],t[A],t[R],!0),he>V&&(ee=le,V=he);V>f&&(o[ee]=1,Ea(t,o,f,A,ee),Ea(t,o,f,ee,R))}function Od(t,o){for(var f=[t[0]],A=1,R=0,V=t.length;A<V;A++)jd(t[A],t[R])>o&&(f.push(t[A]),R=A);return R<V-1&&f.push(t[V-1]),f}var ka;function Vl(t,o,f,A,R){var V=A?ka:pi(t,f),ee=pi(o,f),le,he,be;for(ka=ee;;){if(!(V|ee))return[t,o];if(V&ee)return!1;le=V||ee,he=Cs(t,o,le,f,R),be=pi(he,f),le===V?(t=he,V=be):(o=he,ee=be)}}function Cs(t,o,f,A,R){var V=o.x-t.x,ee=o.y-t.y,le=A.min,he=A.max,be,Me;return f&8?(be=t.x+V*(he.y-t.y)/ee,Me=he.y):f&4?(be=t.x+V*(le.y-t.y)/ee,Me=le.y):f&2?(be=he.x,Me=t.y+ee*(he.x-t.x)/V):f&1&&(be=le.x,Me=t.y+ee*(le.x-t.x)/V),new W(be,Me,R)}function pi(t,o){var f=0;return t.x<o.min.x?f|=1:t.x>o.max.x&&(f|=2),t.y<o.min.y?f|=4:t.y>o.max.y&&(f|=8),f}function jd(t,o){var f=o.x-t.x,A=o.y-t.y;return f*f+A*A}function mi(t,o,f,A){var R=o.x,V=o.y,ee=f.x-R,le=f.y-V,he=ee*ee+le*le,be;return he>0&&(be=((t.x-R)*ee+(t.y-V)*le)/he,be>1?(R=f.x,V=f.y):be>0&&(R+=ee*be,V+=le*be)),ee=t.x-R,le=t.y-V,A?ee*ee+le*le:new W(R,V)}function Wn(t){return!E(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Ul(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Wn(t)}function Zl(t,o){var f,A,R,V,ee,le,he,be;if(!t||t.length===0)throw new Error("latlngs not passed");Wn(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var Me=ce([0,0]),et=Q(t),ht=et.getNorthWest().distanceTo(et.getSouthWest())*et.getNorthEast().distanceTo(et.getNorthWest());ht<1700&&(Me=Ca(t));var dn=t.length,ln=[];for(f=0;f<dn;f++){var On=ce(t[f]);ln.push(o.project(ce([On.lat-Me.lat,On.lng-Me.lng])))}for(f=0,A=0;f<dn-1;f++)A+=ln[f].distanceTo(ln[f+1])/2;if(A===0)be=ln[0];else for(f=0,V=0;f<dn-1;f++)if(ee=ln[f],le=ln[f+1],R=ee.distanceTo(le),V+=R,V>A){he=(V-A)/R,be=[le.x-he*(le.x-ee.x),le.y-he*(le.y-ee.y)];break}var Tn=o.unproject(Z(be));return ce([Tn.lat+Me.lat,Tn.lng+Me.lng])}var Wl={__proto__:null,simplify:bs,pointToSegmentDistance:Hl,closestPointOnSegment:Md,clipSegment:Vl,_getEdgeIntersection:Cs,_getBitCode:pi,_sqClosestPointOnSegment:mi,isFlat:Wn,_flat:Ul,polylineCenter:Zl},Sa={project:function(t){return new W(t.lng,t.lat)},unproject:function(t){return new ae(t.y,t.x)},bounds:new D([-180,-90],[180,90])},Ba={R:6378137,R_MINOR:6356752314245179e-9,bounds:new D([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var o=Math.PI/180,f=this.R,A=t.lat*o,R=this.R_MINOR/f,V=Math.sqrt(1-R*R),ee=V*Math.sin(A),le=Math.tan(Math.PI/4-A/2)/Math.pow((1-ee)/(1+ee),V/2);return A=-f*Math.log(Math.max(le,1e-10)),new W(t.lng*o*f,A)},unproject:function(t){for(var o=180/Math.PI,f=this.R,A=this.R_MINOR/f,R=Math.sqrt(1-A*A),V=Math.exp(-t.y/f),ee=Math.PI/2-2*Math.atan(V),le=0,he=.1,be;le<15&&Math.abs(he)>1e-7;le++)be=R*Math.sin(ee),be=Math.pow((1-be)/(1+be),R/2),he=Math.PI/2-2*Math.atan(V*be)-ee,ee+=he;return new ae(ee*o,t.x*o/f)}},zd={__proto__:null,LonLat:Sa,Mercator:Ba,SphericalMercator:Be},Hd=u({},pe,{code:"EPSG:3395",projection:Ba,transformation:(function(){var t=.5/(Math.PI*Ba.R);return Xe(t,.5,-t,.5)})()}),ql=u({},pe,{code:"EPSG:4326",projection:Sa,transformation:Xe(1/180,1,-1/180,.5)}),Vd=u({},Ae,{projection:Sa,transformation:Xe(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,o){var f=o.lng-t.lng,A=o.lat-t.lat;return Math.sqrt(f*f+A*A)},infinite:!0});Ae.Earth=pe,Ae.EPSG3395=Hd,Ae.EPSG3857=Ee,Ae.EPSG900913=je,Ae.EPSG4326=ql,Ae.Simple=Vd;var or=se.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[g(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[g(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var o=t.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var f=this.getEvents();o.on(f,this),this.once("remove",function(){o.off(f,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});yt.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var o=g(t);return this._layers[o]?this:(this._layers[o]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var o=g(t);return this._layers[o]?(this._loaded&&t.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return g(t)in this._layers},eachLayer:function(t,o){for(var f in this._layers)t.call(o,this._layers[f]);return this},_addLayers:function(t){t=t?E(t)?t:[t]:[];for(var o=0,f=t.length;o<f;o++)this.addLayer(t[o])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[g(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var o=g(t);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,o=-1/0,f=this._getZoomSpan();for(var A in this._zoomBoundLayers){var R=this._zoomBoundLayers[A].options;t=R.minZoom===void 0?t:Math.min(t,R.minZoom),o=R.maxZoom===void 0?o:Math.max(o,R.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=t===1/0?void 0:t,f!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var $r=or.extend({initialize:function(t,o){k(this,o),this._layers={};var f,A;if(t)for(f=0,A=t.length;f<A;f++)this.addLayer(t[f])},addLayer:function(t){var o=this.getLayerId(t);return this._layers[o]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var o=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(t){var o=typeof t=="number"?t:this.getLayerId(t);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var o=Array.prototype.slice.call(arguments,1),f,A;for(f in this._layers)A=this._layers[f],A[t]&&A[t].apply(A,o);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,o){for(var f in this._layers)t.call(o,this._layers[f]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return g(t)}}),Do=function(t,o){return new $r(t,o)},Rr=$r.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),$r.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),$r.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new q;for(var o in this._layers){var f=this._layers[o];t.extend(f.getBounds?f.getBounds():f.getLatLng())}return t}}),Gl=function(t,o){return new Rr(t,o)},gi=ie.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){k(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,o){var f=this._getIconUrl(t);if(!f){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var A=this._createImg(f,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(A,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(A.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),A},_setIconStyles:function(t,o){var f=this.options,A=f[o+"Size"];typeof A=="number"&&(A=[A,A]);var R=Z(A),V=Z(o==="shadow"&&f.shadowAnchor||f.iconAnchor||R&&R.divideBy(2,!0));t.className="leaflet-marker-"+o+" "+(f.className||""),V&&(t.style.marginLeft=-V.x+"px",t.style.marginTop=-V.y+"px"),R&&(t.style.width=R.x+"px",t.style.height=R.y+"px")},_createImg:function(t,o){return o=o||document.createElement("img"),o.src=t,o},_getIconUrl:function(t){return Le.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function $l(t){return new gi(t)}var Wi=gi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Wi.imagePath!="string"&&(Wi.imagePath=this._detectIconPath()),(this.options.imagePath||Wi.imagePath)+gi.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var o=function(f,A,R){var V=A.exec(f);return V&&V[R]};return t=o(t,/^url\((['"])?(.+)\1\)$/,2),t&&o(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=ct("div","leaflet-default-icon-path",document.body),o=Co(t,"background-image")||Co(t,"backgroundImage");if(document.body.removeChild(t),o=this._stripUrl(o),o)return o;var f=document.querySelector('link[href$="leaflet.css"]');return f?f.href.substring(0,f.href.length-11-1):""}}),Pa=Zn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new ir(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),lt(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ut(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var o=this._marker,f=o._map,A=this._marker.options.autoPanSpeed,R=this._marker.options.autoPanPadding,V=Tr(o._icon),ee=f.getPixelBounds(),le=f.getPixelOrigin(),he=H(ee.min._subtract(le).add(R),ee.max._subtract(le).subtract(R));if(!he.contains(V)){var be=Z((Math.max(he.max.x,V.x)-he.max.x)/(ee.max.x-he.max.x)-(Math.min(he.min.x,V.x)-he.min.x)/(ee.min.x-he.min.x),(Math.max(he.max.y,V.y)-he.max.y)/(ee.max.y-he.max.y)-(Math.min(he.min.y,V.y)-he.min.y)/(ee.min.y-he.min.y)).multiplyBy(A);f.panBy(be,{animate:!1}),this._draggable._newPos._add(be),this._draggable._startPos._add(be),nn(o._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=K(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(J(this._panRequest),this._panRequest=K(this._adjustPan.bind(this,t)))},_onDrag:function(t){var o=this._marker,f=o._shadow,A=Tr(o._icon),R=o._map.layerPointToLatLng(A);f&&nn(f,A),o._latlng=R,t.latlng=R,t.oldLatLng=this._oldLatLng,o.fire("move",t).fire("drag",t)},_onDragEnd:function(t){J(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Fr=or.extend({options:{icon:new Wi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,o){k(this,o),this._latlng=ce(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var o=this._latlng;return this._latlng=ce(t),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),f=t.icon.createIcon(this._icon),A=!1;f!==this._icon&&(this._icon&&this._removeIcon(),A=!0,t.title&&(f.title=t.title),f.tagName==="IMG"&&(f.alt=t.alt||"")),lt(f,o),t.keyboard&&(f.tabIndex="0",f.setAttribute("role","button")),this._icon=f,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&it(f,"focus",this._panOnFocus,this);var R=t.icon.createShadow(this._shadow),V=!1;R!==this._shadow&&(this._removeShadow(),V=!0),R&&(lt(R,o),R.alt=""),this._shadow=R,t.opacity<1&&this._updateOpacity(),A&&this.getPane().appendChild(this._icon),this._initInteraction(),R&&V&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&It(this._icon,"focus",this._panOnFocus,this),Wt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Wt(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&nn(this._icon,t),this._shadow&&nn(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(lt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Pa)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Pa(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Bn(this._icon,t),this._shadow&&Bn(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var o=this.options.icon.options,f=o.iconSize?Z(o.iconSize):Z(0,0),A=o.iconAnchor?Z(o.iconAnchor):Z(0,0);t.panInside(this._latlng,{paddingTopLeft:A,paddingBottomRight:f.subtract(A)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ud(t,o){return new Fr(t,o)}var Kr=or.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return k(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Es=Kr.extend({options:{fill:!0,radius:10},initialize:function(t,o){k(this,o),this._latlng=ce(t),this._radius=this.options.radius},setLatLng:function(t){var o=this._latlng;return this._latlng=ce(t),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var o=t&&t.radius||this._radius;return Kr.prototype.setStyle.call(this,t),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,o=this._radiusY||t,f=this._clickTolerance(),A=[t+f,o+f];this._pxBounds=new D(this._point.subtract(A),this._point.add(A))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Kl(t,o){return new Es(t,o)}var ks=Es.extend({initialize:function(t,o,f){if(typeof o=="number"&&(o=u({},f,{radius:o})),k(this,o),this._latlng=ce(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new q(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Kr.prototype.setStyle,_project:function(){var t=this._latlng.lng,o=this._latlng.lat,f=this._map,A=f.options.crs;if(A.distance===pe.distance){var R=Math.PI/180,V=this._mRadius/pe.R/R,ee=f.project([o+V,t]),le=f.project([o-V,t]),he=ee.add(le).divideBy(2),be=f.unproject(he).lat,Me=Math.acos((Math.cos(V*R)-Math.sin(o*R)*Math.sin(be*R))/(Math.cos(o*R)*Math.cos(be*R)))/R;(isNaN(Me)||Me===0)&&(Me=V/Math.cos(Math.PI/180*o)),this._point=he.subtract(f.getPixelOrigin()),this._radius=isNaN(Me)?0:he.x-f.project([be,t-Me]).x,this._radiusY=he.y-ee.y}else{var et=A.unproject(A.project(this._latlng).subtract([this._mRadius,0]));this._point=f.latLngToLayerPoint(this._latlng),this._radius=this._point.x-f.latLngToLayerPoint(et).x}this._updateBounds()}});function Ro(t,o,f){return new ks(t,o,f)}var In=Kr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,o){k(this,o),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var o=1/0,f=null,A=mi,R,V,ee=0,le=this._parts.length;ee<le;ee++)for(var he=this._parts[ee],be=1,Me=he.length;be<Me;be++){R=he[be-1],V=he[be];var et=A(t,R,V,!0);et<o&&(o=et,f=A(t,R,V))}return f&&(f.distance=Math.sqrt(o)),f},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Zl(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,o){return o=o||this._defaultShape(),t=ce(t),o.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new q,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Wn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var o=[],f=Wn(t),A=0,R=t.length;A<R;A++)f?(o[A]=ce(t[A]),this._bounds.extend(o[A])):o[A]=this._convertLatLngs(t[A]);return o},_project:function(){var t=new D;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),o=new W(t,t);this._rawPxBounds&&(this._pxBounds=new D([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(t,o,f){var A=t[0]instanceof ae,R=t.length,V,ee;if(A){for(ee=[],V=0;V<R;V++)ee[V]=this._map.latLngToLayerPoint(t[V]),f.extend(ee[V]);o.push(ee)}else for(V=0;V<R;V++)this._projectLatlngs(t[V],o,f)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,f,A,R,V,ee,le,he;for(f=0,R=0,V=this._rings.length;f<V;f++)for(he=this._rings[f],A=0,ee=he.length;A<ee-1;A++)le=Vl(he[A],he[A+1],t,A,!0),le&&(o[R]=o[R]||[],o[R].push(le[0]),(le[1]!==he[A+1]||A===ee-2)&&(o[R].push(le[1]),R++))}},_simplifyPoints:function(){for(var t=this._parts,o=this.options.smoothFactor,f=0,A=t.length;f<A;f++)t[f]=bs(t[f],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,o){var f,A,R,V,ee,le,he=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(f=0,V=this._parts.length;f<V;f++)for(le=this._parts[f],A=0,ee=le.length,R=ee-1;A<ee;R=A++)if(!(!o&&A===0)&&Hl(t,le[R],le[A])<=he)return!0;return!1}});function Zd(t,o){return new In(t,o)}In._flat=Ul;var Nr=In.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return zl(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var o=In.prototype._convertLatLngs.call(this,t),f=o.length;return f>=2&&o[0]instanceof ae&&o[0].equals(o[f-1])&&o.pop(),o},_setLatLngs:function(t){In.prototype._setLatLngs.call(this,t),Wn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Wn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,o=this.options.weight,f=new W(o,o);if(t=new D(t.min.subtract(f),t.max.add(f)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var A=0,R=this._rings.length,V;A<R;A++)V=ba(this._rings[A],t,!0),V.length&&this._parts.push(V)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var o=!1,f,A,R,V,ee,le,he,be;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(V=0,he=this._parts.length;V<he;V++)for(f=this._parts[V],ee=0,be=f.length,le=be-1;ee<be;le=ee++)A=f[ee],R=f[le],A.y>t.y!=R.y>t.y&&t.x<(R.x-A.x)*(t.y-A.y)/(R.y-A.y)+A.x&&(o=!o);return o||In.prototype._containsPoint.call(this,t,!0)}});function Wd(t,o){return new Nr(t,o)}var xr=Rr.extend({initialize:function(t,o){k(this,o),this._layers={},t&&this.addData(t)},addData:function(t){var o=E(t)?t:t.features,f,A,R;if(o){for(f=0,A=o.length;f<A;f++)R=o[f],(R.geometries||R.geometry||R.features||R.coordinates)&&this.addData(R);return this}var V=this.options;if(V.filter&&!V.filter(t))return this;var ee=qi(t,V);return ee?(ee.feature=Ds(t),ee.defaultOptions=ee.options,this.resetStyle(ee),V.onEachFeature&&V.onEachFeature(t,ee),this.addLayer(ee)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=u({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(o){this._setLayerStyle(o,t)},this)},_setLayerStyle:function(t,o){t.setStyle&&(typeof o=="function"&&(o=o(t.feature)),t.setStyle(o))}});function qi(t,o){var f=t.type==="Feature"?t.geometry:t,A=f?f.coordinates:null,R=[],V=o&&o.pointToLayer,ee=o&&o.coordsToLatLng||Bs,le,he,be,Me;if(!A&&!f)return null;switch(f.type){case"Point":return le=ee(A),Ss(V,t,le,o);case"MultiPoint":for(be=0,Me=A.length;be<Me;be++)le=ee(A[be]),R.push(Ss(V,t,le,o));return new Rr(R);case"LineString":case"MultiLineString":return he=Fo(A,f.type==="LineString"?0:1,ee),new In(he,o);case"Polygon":case"MultiPolygon":return he=Fo(A,f.type==="Polygon"?1:2,ee),new Nr(he,o);case"GeometryCollection":for(be=0,Me=f.geometries.length;be<Me;be++){var et=qi({geometry:f.geometries[be],type:"Feature",properties:t.properties},o);et&&R.push(et)}return new Rr(R);case"FeatureCollection":for(be=0,Me=f.features.length;be<Me;be++){var ht=qi(f.features[be],o);ht&&R.push(ht)}return new Rr(R);default:throw new Error("Invalid GeoJSON object.")}}function Ss(t,o,f,A){return t?t(o,f):new Fr(f,A&&A.markersInheritOptions&&A)}function Bs(t){return new ae(t[1],t[0],t[2])}function Fo(t,o,f){for(var A=[],R=0,V=t.length,ee;R<V;R++)ee=o?Fo(t[R],o-1,f):(f||Bs)(t[R]),A.push(ee);return A}function Ps(t,o){return t=ce(t),t.alt!==void 0?[C(t.lng,o),C(t.lat,o),C(t.alt,o)]:[C(t.lng,o),C(t.lat,o)]}function Ts(t,o,f,A){for(var R=[],V=0,ee=t.length;V<ee;V++)R.push(o?Ts(t[V],Wn(t[V])?0:o-1,f,A):Ps(t[V],A));return!o&&f&&R.length>0&&R.push(R[0].slice()),R}function Gi(t,o){return t.feature?u({},t.feature,{geometry:o}):Ds(o)}function Ds(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Ta={toGeoJSON:function(t){return Gi(this,{type:"Point",coordinates:Ps(this.getLatLng(),t)})}};Fr.include(Ta),ks.include(Ta),Es.include(Ta),In.include({toGeoJSON:function(t){var o=!Wn(this._latlngs),f=Ts(this._latlngs,o?1:0,!1,t);return Gi(this,{type:(o?"Multi":"")+"LineString",coordinates:f})}}),Nr.include({toGeoJSON:function(t){var o=!Wn(this._latlngs),f=o&&!Wn(this._latlngs[0]),A=Ts(this._latlngs,f?2:o?1:0,!0,t);return o||(A=[A]),Gi(this,{type:(f?"Multi":"")+"Polygon",coordinates:A})}}),$r.include({toMultiPoint:function(t){var o=[];return this.eachLayer(function(f){o.push(f.toGeoJSON(t).geometry.coordinates)}),Gi(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(t){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(t);var f=o==="GeometryCollection",A=[];return this.eachLayer(function(R){if(R.toGeoJSON){var V=R.toGeoJSON(t);if(f)A.push(V.geometry);else{var ee=Ds(V);ee.type==="FeatureCollection"?A.push.apply(A,ee.features):A.push(ee)}}}),f?Gi(this,{geometries:A,type:"GeometryCollection"}):{type:"FeatureCollection",features:A}}});function Ql(t,o){return new xr(t,o)}var sr=Ql,Qr=or.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,o,f){this._url=t,this._bounds=Q(o),k(this,f)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(lt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Wt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Ii(this._image),this},bringToBack:function(){return this._map&&Pr(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=Q(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",o=this._image=t?this._url:ct("img");if(lt(o,"leaflet-image-layer"),this._zoomAnimated&&lt(o,"leaflet-zoom-animated"),this.options.className&&lt(o,this.options.className),o.onselectstart=v,o.onmousemove=v,o.onload=h(this.fire,this,"load"),o.onerror=h(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(t){var o=this._map.getZoomScale(t.zoom),f=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;tr(this._image,f,o)},_reset:function(){var t=this._image,o=new D(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),f=o.getSize();nn(t,o.min),t.style.width=f.x+"px",t.style.height=f.y+"px"},_updateOpacity:function(){Bn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Yl=function(t,o,f){return new Qr(t,o,f)},Da=Qr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",o=this._image=t?this._url:ct("video");if(lt(o,"leaflet-image-layer"),this._zoomAnimated&&lt(o,"leaflet-zoom-animated"),this.options.className&&lt(o,this.options.className),o.onselectstart=v,o.onmousemove=v,o.onloadeddata=h(this.fire,this,"load"),t){for(var f=o.getElementsByTagName("source"),A=[],R=0;R<f.length;R++)A.push(f[R].src);this._url=f.length>0?A:[o.src];return}E(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var V=0;V<this._url.length;V++){var ee=ct("source");ee.src=this._url[V],o.appendChild(ee)}}});function Xl(t,o,f){return new Da(t,o,f)}var Ra=Qr.extend({_initImage:function(){var t=this._image=this._url;lt(t,"leaflet-image-layer"),this._zoomAnimated&&lt(t,"leaflet-zoom-animated"),this.options.className&&lt(t,this.options.className),t.onselectstart=v,t.onmousemove=v}});function Fa(t,o,f){return new Ra(t,o,f)}var vr=or.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,o){t&&(t instanceof ae||E(t))?(this._latlng=ce(t),k(this,o)):(k(this,t),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Bn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Bn(this._container,1),this.bringToFront(),this.options.interactive&&(lt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Bn(this._container,0),this._removeTimeout=setTimeout(h(Wt,void 0,this._container),200)):Wt(this._container),this.options.interactive&&(Ut(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=ce(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ii(this._container),this},bringToBack:function(){return this._map&&Pr(this._container),this},_prepareOpen:function(t){var o=this._source;if(!o._map)return!1;if(o instanceof Rr){o=null;var f=this._source._layers;for(var A in f)if(f[A]._map){o=f[A];break}if(!o)return!1;this._source=o}if(!t)if(o.getCenter)t=o.getCenter();else if(o.getLatLng)t=o.getLatLng();else if(o.getBounds)t=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")t.innerHTML=o;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),o=Z(this.options.offset),f=this._getAnchor();this._zoomAnimated?nn(this._container,t.add(f)):o=o.add(t).add(f);var A=this._containerBottom=-o.y,R=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=A+"px",this._container.style.left=R+"px"}},_getAnchor:function(){return[0,0]}});yt.include({_initOverlay:function(t,o,f,A){var R=o;return R instanceof t||(R=new t(A).setContent(o)),f&&R.setLatLng(f),R}}),or.include({_initOverlay:function(t,o,f,A){var R=f;return R instanceof t?(k(R,A),R._source=this):(R=o&&!A?o:new t(A,this),R.setContent(f)),R}});var Rs=vr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,vr.prototype.openOn.call(this,t)},onAdd:function(t){vr.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Kr||this._source.on("preclick",gr))},onRemove:function(t){vr.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Kr||this._source.off("preclick",gr))},getEvents:function(){var t=vr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",o=this._container=ct("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),f=this._wrapper=ct("div",t+"-content-wrapper",o);if(this._contentNode=ct("div",t+"-content",f),Bo(o),As(this._contentNode),it(o,"contextmenu",gr),this._tipContainer=ct("div",t+"-tip-container",o),this._tip=ct("div",t+"-tip",this._tipContainer),this.options.closeButton){var A=this._closeButton=ct("a",t+"-close-button",o);A.setAttribute("role","button"),A.setAttribute("aria-label","Close popup"),A.href="#close",A.innerHTML='<span aria-hidden="true">&#215;</span>',it(A,"click",function(R){Jt(R),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,o=t.style;o.width="",o.whiteSpace="nowrap";var f=t.offsetWidth;f=Math.min(f,this.options.maxWidth),f=Math.max(f,this.options.minWidth),o.width=f+1+"px",o.whiteSpace="",o.height="";var A=t.offsetHeight,R=this.options.maxHeight,V="leaflet-popup-scrolled";R&&A>R?(o.height=R+"px",lt(t,V)):Ut(t,V),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),f=this._getAnchor();nn(this._container,o.add(f))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,o=parseInt(Co(this._container,"marginBottom"),10)||0,f=this._container.offsetHeight+o,A=this._containerWidth,R=new W(this._containerLeft,-f-this._containerBottom);R._add(Tr(this._container));var V=t.layerPointToContainerPoint(R),ee=Z(this.options.autoPanPadding),le=Z(this.options.autoPanPaddingTopLeft||ee),he=Z(this.options.autoPanPaddingBottomRight||ee),be=t.getSize(),Me=0,et=0;V.x+A+he.x>be.x&&(Me=V.x+A-be.x+he.x),V.x-Me-le.x<0&&(Me=V.x-le.x),V.y+f+he.y>be.y&&(et=V.y+f-be.y+he.y),V.y-et-le.y<0&&(et=V.y-le.y),(Me||et)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([Me,et]))}},_getAnchor:function(){return Z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),$i=function(t,o){return new Rs(t,o)};yt.mergeOptions({closePopupOnClick:!0}),yt.include({openPopup:function(t,o,f){return this._initOverlay(Rs,t,o,f).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),or.include({bindPopup:function(t,o){return this._popup=this._initOverlay(Rs,this._popup,t,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Rr||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){rr(t);var o=t.layer||t.target;if(this._popup._source===o&&!(o instanceof Kr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=o,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Ki=vr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){vr.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){vr.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=vr.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",o=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ct("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+g(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var o,f,A=this._map,R=this._container,V=A.latLngToContainerPoint(A.getCenter()),ee=A.layerPointToContainerPoint(t),le=this.options.direction,he=R.offsetWidth,be=R.offsetHeight,Me=Z(this.options.offset),et=this._getAnchor();le==="top"?(o=he/2,f=be):le==="bottom"?(o=he/2,f=0):le==="center"?(o=he/2,f=be/2):le==="right"?(o=0,f=be/2):le==="left"?(o=he,f=be/2):ee.x<V.x?(le="right",o=0,f=be/2):(le="left",o=he+(Me.x+et.x)*2,f=be/2),t=t.subtract(Z(o,f,!0)).add(Me).add(et),Ut(R,"leaflet-tooltip-right"),Ut(R,"leaflet-tooltip-left"),Ut(R,"leaflet-tooltip-top"),Ut(R,"leaflet-tooltip-bottom"),lt(R,"leaflet-tooltip-"+le),nn(R,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Bn(this._container,t)},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(o)},_getAnchor:function(){return Z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),No=function(t,o){return new Ki(t,o)};yt.include({openTooltip:function(t,o,f){return this._initOverlay(Ki,t,o,f).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),or.include({bindTooltip:function(t,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ki,this._tooltip,t,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var o=t?"off":"on",f={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?f.add=this._openTooltip:(f.mouseover=this._openTooltip,f.mouseout=this.closeTooltip,f.click=this._openTooltip,this._map?this._addFocusListeners():f.add=this._addFocusListeners),this._tooltip.options.sticky&&(f.mousemove=this._moveTooltip),this[o](f),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Rr||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var o=typeof t.getElement=="function"&&t.getElement();o&&(it(o,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),it(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var o=typeof t.getElement=="function"&&t.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var o=t.latlng,f,A;this._tooltip.options.sticky&&t.originalEvent&&(f=this._map.mouseEventToContainerPoint(t.originalEvent),A=this._map.containerPointToLayerPoint(f),o=this._map.layerPointToLatLng(A)),this._tooltip.setLatLng(o)}});var Fs=gi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var o=t&&t.tagName==="DIV"?t:document.createElement("div"),f=this.options;if(f.html instanceof Element?(hs(o),o.appendChild(f.html)):o.innerHTML=f.html!==!1?f.html:"",f.bgPos){var A=Z(f.bgPos);o.style.backgroundPosition=-A.x+"px "+-A.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function Jl(t){return new Fs(t)}gi.Default=Wi;var Yr=or.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Le.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){k(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Wt(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ii(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Pr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof W?t:new W(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var o=this.getPane().children,f=-t(-1/0,1/0),A=0,R=o.length,V;A<R;A++)V=o[A].style.zIndex,o[A]!==this._container&&V&&(f=t(f,+V));isFinite(f)&&(this.options.zIndex=f+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Le.ielt9){Bn(this._container,this.options.opacity);var t=+new Date,o=!1,f=!1;for(var A in this._tiles){var R=this._tiles[A];if(!(!R.current||!R.loaded)){var V=Math.min(1,(t-R.loaded)/200);Bn(R.el,V),V<1?o=!0:(R.active?f=!0:this._onOpaqueTile(R),R.active=!0)}}f&&!this._noPrune&&this._pruneTiles(),o&&(J(this._fadeFrame),this._fadeFrame=K(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=ct("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,o=this.options.maxZoom;if(t!==void 0){for(var f in this._levels)f=Number(f),this._levels[f].el.children.length||f===t?(this._levels[f].el.style.zIndex=o-Math.abs(t-f),this._onUpdateLevel(f)):(Wt(this._levels[f].el),this._removeTilesAtZoom(f),this._onRemoveLevel(f),delete this._levels[f]);var A=this._levels[t],R=this._map;return A||(A=this._levels[t]={},A.el=ct("div","leaflet-tile-container leaflet-zoom-animated",this._container),A.el.style.zIndex=o,A.origin=R.project(R.unproject(R.getPixelOrigin()),t).round(),A.zoom=t,this._setZoomTransform(A,R.getCenter(),R.getZoom()),v(A.el.offsetWidth),this._onCreateLevel(A)),this._level=A,A}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var t,o,f=this._map.getZoom();if(f>this.options.maxZoom||f<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)o=this._tiles[t],o.retain=o.current;for(t in this._tiles)if(o=this._tiles[t],o.current&&!o.active){var A=o.coords;this._retainParent(A.x,A.y,A.z,A.z-5)||this._retainChildren(A.x,A.y,A.z,A.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var o in this._tiles)this._tiles[o].coords.z===t&&this._removeTile(o)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Wt(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,o,f,A){var R=Math.floor(t/2),V=Math.floor(o/2),ee=f-1,le=new W(+R,+V);le.z=+ee;var he=this._tileCoordsToKey(le),be=this._tiles[he];return be&&be.active?(be.retain=!0,!0):(be&&be.loaded&&(be.retain=!0),ee>A?this._retainParent(R,V,ee,A):!1)},_retainChildren:function(t,o,f,A){for(var R=2*t;R<2*t+2;R++)for(var V=2*o;V<2*o+2;V++){var ee=new W(R,V);ee.z=f+1;var le=this._tileCoordsToKey(ee),he=this._tiles[le];if(he&&he.active){he.retain=!0;continue}else he&&he.loaded&&(he.retain=!0);f+1<A&&this._retainChildren(R,V,f+1,A)}},_resetView:function(t){var o=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var o=this.options;return o.minNativeZoom!==void 0&&t<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<t?o.maxNativeZoom:t},_setView:function(t,o,f,A){var R=Math.round(o);this.options.maxZoom!==void 0&&R>this.options.maxZoom||this.options.minZoom!==void 0&&R<this.options.minZoom?R=void 0:R=this._clampZoom(R);var V=this.options.updateWhenZooming&&R!==this._tileZoom;(!A||V)&&(this._tileZoom=R,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),R!==void 0&&this._update(t),f||this._pruneTiles(),this._noPrune=!!f),this._setZoomTransforms(t,o)},_setZoomTransforms:function(t,o){for(var f in this._levels)this._setZoomTransform(this._levels[f],t,o)},_setZoomTransform:function(t,o,f){var A=this._map.getZoomScale(f,t.zoom),R=t.origin.multiplyBy(A).subtract(this._map._getNewPixelOrigin(o,f)).round();Le.any3d?tr(t.el,R,A):nn(t.el,R)},_resetGrid:function(){var t=this._map,o=t.options.crs,f=this._tileSize=this.getTileSize(),A=this._tileZoom,R=this._map.getPixelWorldBounds(this._tileZoom);R&&(this._globalTileRange=this._pxBoundsToTileRange(R)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,o.wrapLng[0]],A).x/f.x),Math.ceil(t.project([0,o.wrapLng[1]],A).x/f.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([o.wrapLat[0],0],A).y/f.x),Math.ceil(t.project([o.wrapLat[1],0],A).y/f.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var o=this._map,f=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),A=o.getZoomScale(f,this._tileZoom),R=o.project(t,this._tileZoom).floor(),V=o.getSize().divideBy(A*2);return new D(R.subtract(V),R.add(V))},_update:function(t){var o=this._map;if(o){var f=this._clampZoom(o.getZoom());if(t===void 0&&(t=o.getCenter()),this._tileZoom!==void 0){var A=this._getTiledPixelBounds(t),R=this._pxBoundsToTileRange(A),V=R.getCenter(),ee=[],le=this.options.keepBuffer,he=new D(R.getBottomLeft().subtract([le,-le]),R.getTopRight().add([le,-le]));if(!(isFinite(R.min.x)&&isFinite(R.min.y)&&isFinite(R.max.x)&&isFinite(R.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var be in this._tiles){var Me=this._tiles[be].coords;(Me.z!==this._tileZoom||!he.contains(new W(Me.x,Me.y)))&&(this._tiles[be].current=!1)}if(Math.abs(f-this._tileZoom)>1){this._setView(t,f);return}for(var et=R.min.y;et<=R.max.y;et++)for(var ht=R.min.x;ht<=R.max.x;ht++){var dn=new W(ht,et);if(dn.z=this._tileZoom,!!this._isValidTile(dn)){var ln=this._tiles[this._tileCoordsToKey(dn)];ln?ln.current=!0:ee.push(dn)}}if(ee.sort(function(Tn,eo){return Tn.distanceTo(V)-eo.distanceTo(V)}),ee.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var On=document.createDocumentFragment();for(ht=0;ht<ee.length;ht++)this._addTile(ee[ht],On);this._level.el.appendChild(On)}}}},_isValidTile:function(t){var o=this._map.options.crs;if(!o.infinite){var f=this._globalTileRange;if(!o.wrapLng&&(t.x<f.min.x||t.x>f.max.x)||!o.wrapLat&&(t.y<f.min.y||t.y>f.max.y))return!1}if(!this.options.bounds)return!0;var A=this._tileCoordsToBounds(t);return Q(this.options.bounds).overlaps(A)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var o=this._map,f=this.getTileSize(),A=t.scaleBy(f),R=A.add(f),V=o.unproject(A,t.z),ee=o.unproject(R,t.z);return[V,ee]},_tileCoordsToBounds:function(t){var o=this._tileCoordsToNwSe(t),f=new q(o[0],o[1]);return this.options.noWrap||(f=this._map.wrapLatLngBounds(f)),f},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var o=t.split(":"),f=new W(+o[0],+o[1]);return f.z=+o[2],f},_removeTile:function(t){var o=this._tiles[t];o&&(Wt(o.el),delete this._tiles[t],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){lt(t,"leaflet-tile");var o=this.getTileSize();t.style.width=o.x+"px",t.style.height=o.y+"px",t.onselectstart=v,t.onmousemove=v,Le.ielt9&&this.options.opacity<1&&Bn(t,this.options.opacity)},_addTile:function(t,o){var f=this._getTilePos(t),A=this._tileCoordsToKey(t),R=this.createTile(this._wrapCoords(t),h(this._tileReady,this,t));this._initTile(R),this.createTile.length<2&&K(h(this._tileReady,this,t,null,R)),nn(R,f),this._tiles[A]={el:R,coords:t,current:!0},o.appendChild(R),this.fire("tileloadstart",{tile:R,coords:t})},_tileReady:function(t,o,f){o&&this.fire("tileerror",{error:o,tile:f,coords:t});var A=this._tileCoordsToKey(t);f=this._tiles[A],f&&(f.loaded=+new Date,this._map._fadeAnimated?(Bn(f.el,0),J(this._fadeFrame),this._fadeFrame=K(this._updateOpacity,this)):(f.active=!0,this._pruneTiles()),o||(lt(f.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:f.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Le.ielt9||!this._map._fadeAnimated?K(this._pruneTiles,this):setTimeout(h(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var o=new W(this._wrapX?x(t.x,this._wrapX):t.x,this._wrapY?x(t.y,this._wrapY):t.y);return o.z=t.z,o},_pxBoundsToTileRange:function(t){var o=this.getTileSize();return new D(t.min.unscaleBy(o).floor(),t.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Qi(t){return new Yr(t)}var Xr=Yr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,o){this._url=t,o=k(this,o),o.detectRetina&&Le.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,o){return this._url===t&&o===void 0&&(o=!0),this._url=t,o||this.redraw(),this},createTile:function(t,o){var f=document.createElement("img");return it(f,"load",h(this._tileOnLoad,this,o,f)),it(f,"error",h(this._tileOnError,this,o,f)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(f.referrerPolicy=this.options.referrerPolicy),f.alt="",f.src=this.getTileUrl(t),f},getTileUrl:function(t){var o={r:Le.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var f=this._globalTileRange.max.y-t.y;this.options.tms&&(o.y=f),o["-y"]=f}return b(this._url,u(o,this.options))},_tileOnLoad:function(t,o){Le.ielt9?setTimeout(h(t,this,null,o),0):t(null,o)},_tileOnError:function(t,o,f){var A=this.options.errorTileUrl;A&&o.getAttribute("src")!==A&&(o.src=A),t(f,o)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,o=this.options.maxZoom,f=this.options.zoomReverse,A=this.options.zoomOffset;return f&&(t=o-t),t+A},_getSubdomain:function(t){var o=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var t,o;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(o=this._tiles[t].el,o.onload=v,o.onerror=v,!o.complete)){o.src=F;var f=this._tiles[t].coords;Wt(o),delete this._tiles[t],this.fire("tileabort",{tile:o,coords:f})}},_removeTile:function(t){var o=this._tiles[t];if(o)return o.el.setAttribute("src",F),Yr.prototype._removeTile.call(this,t)},_tileReady:function(t,o,f){if(!(!this._map||f&&f.getAttribute("src")===F))return Yr.prototype._tileReady.call(this,t,o,f)}});function Na(t,o){return new Xr(t,o)}var Lo=Xr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,o){this._url=t;var f=u({},this.defaultWmsParams);for(var A in o)A in this.options||(f[A]=o[A]);o=k(this,o);var R=o.detectRetina&&Le.retina?2:1,V=this.getTileSize();f.width=V.x*R,f.height=V.y*R,this.wmsParams=f},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,Xr.prototype.onAdd.call(this,t)},getTileUrl:function(t){var o=this._tileCoordsToNwSe(t),f=this._crs,A=H(f.project(o[0]),f.project(o[1])),R=A.min,V=A.max,ee=(this._wmsVersion>=1.3&&this._crs===ql?[R.y,R.x,V.y,V.x]:[R.x,R.y,V.x,V.y]).join(","),le=Xr.prototype.getTileUrl.call(this,t);return le+w(this.wmsParams,le,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ee},setParams:function(t,o){return u(this.wmsParams,t),o||this.redraw(),this}});function eu(t,o){return new Lo(t,o)}Xr.WMS=Lo,Na.wms=eu;var Ar=or.extend({options:{padding:.1},initialize:function(t){k(this,t),g(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),lt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,o){var f=this._map.getZoomScale(o,this._zoom),A=this._map.getSize().multiplyBy(.5+this.options.padding),R=this._map.project(this._center,o),V=A.multiplyBy(-f).add(R).subtract(this._map._getNewPixelOrigin(t,o));Le.any3d?tr(this._container,V,f):nn(this._container,V)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,o=this._map.getSize(),f=this._map.containerPointToLayerPoint(o.multiplyBy(-t)).round();this._bounds=new D(f,f.add(o.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),La=Ar.extend({options:{tolerance:0},getEvents:function(){var t=Ar.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ar.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");it(t,"mousemove",this._onMouseMove,this),it(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),it(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){J(this._redrawRequest),delete this._ctx,Wt(this._container),It(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var o in this._layers)t=this._layers[o],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ar.prototype._update.call(this);var t=this._bounds,o=this._container,f=t.getSize(),A=Le.retina?2:1;nn(o,t.min),o.width=A*f.x,o.height=A*f.y,o.style.width=f.x+"px",o.style.height=f.y+"px",Le.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Ar.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[g(t)]=t;var o=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var o=t._order,f=o.next,A=o.prev;f?f.prev=A:this._drawLast=A,A?A.next=f:this._drawFirst=f,delete t._order,delete this._layers[g(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var o=t.options.dashArray.split(/[, ]+/),f=[],A,R;for(R=0;R<o.length;R++){if(A=Number(o[R]),isNaN(A))return;f.push(A)}t.options._dashArray=f}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||K(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var o=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new D,this._redrawBounds.extend(t._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(t._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var o=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,o=this._redrawBounds;if(this._ctx.save(),o){var f=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,f.x,f.y),this._ctx.clip()}this._drawing=!0;for(var A=this._drawFirst;A;A=A.next)t=A.layer,(!o||t._pxBounds&&t._pxBounds.intersects(o))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,o){if(this._drawing){var f,A,R,V,ee=t._parts,le=ee.length,he=this._ctx;if(le){for(he.beginPath(),f=0;f<le;f++){for(A=0,R=ee[f].length;A<R;A++)V=ee[f][A],he[A?"lineTo":"moveTo"](V.x,V.y);o&&he.closePath()}this._fillStroke(he,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var o=t._point,f=this._ctx,A=Math.max(Math.round(t._radius),1),R=(Math.max(Math.round(t._radiusY),1)||A)/A;R!==1&&(f.save(),f.scale(1,R)),f.beginPath(),f.arc(o.x,o.y/R,A,0,Math.PI*2,!1),R!==1&&f.restore(),this._fillStroke(f,t)}},_fillStroke:function(t,o){var f=o.options;f.fill&&(t.globalAlpha=f.fillOpacity,t.fillStyle=f.fillColor||f.color,t.fill(f.fillRule||"evenodd")),f.stroke&&f.weight!==0&&(t.setLineDash&&t.setLineDash(o.options&&o.options._dashArray||[]),t.globalAlpha=f.opacity,t.lineWidth=f.weight,t.strokeStyle=f.color,t.lineCap=f.lineCap,t.lineJoin=f.lineJoin,t.stroke())},_onClick:function(t){for(var o=this._map.mouseEventToLayerPoint(t),f,A,R=this._drawFirst;R;R=R.next)f=R.layer,f.options.interactive&&f._containsPoint(o)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(f))&&(A=f);this._fireEvent(A?[A]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,o)}},_handleMouseOut:function(t){var o=this._hoveredLayer;o&&(Ut(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,o){if(!this._mouseHoverThrottled){for(var f,A,R=this._drawFirst;R;R=R.next)f=R.layer,f.options.interactive&&f._containsPoint(o)&&(A=f);A!==this._hoveredLayer&&(this._handleMouseOut(t),A&&(lt(this._container,"leaflet-interactive"),this._fireEvent([A],t,"mouseover"),this._hoveredLayer=A)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(h(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,o,f){this._map._fireDOMEvent(o,f||o.type,t)},_bringToFront:function(t){var o=t._order;if(o){var f=o.next,A=o.prev;if(f)f.prev=A;else return;A?A.next=f:f&&(this._drawFirst=f),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(t)}},_bringToBack:function(t){var o=t._order;if(o){var f=o.next,A=o.prev;if(A)A.next=f;else return;f?f.prev=A:A&&(this._drawLast=A),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(t)}}});function Ma(t){return Le.canvas?new La(t):null}var Yi=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),tu={_initContainer:function(){this._container=ct("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ar.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var o=t._container=Yi("shape");lt(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",t._path=Yi("path"),o.appendChild(t._path),this._updateStyle(t),this._layers[g(t)]=t},_addPath:function(t){var o=t._container;this._container.appendChild(o),t.options.interactive&&t.addInteractiveTarget(o)},_removePath:function(t){var o=t._container;Wt(o),t.removeInteractiveTarget(o),delete this._layers[g(t)]},_updateStyle:function(t){var o=t._stroke,f=t._fill,A=t.options,R=t._container;R.stroked=!!A.stroke,R.filled=!!A.fill,A.stroke?(o||(o=t._stroke=Yi("stroke")),R.appendChild(o),o.weight=A.weight+"px",o.color=A.color,o.opacity=A.opacity,A.dashArray?o.dashStyle=E(A.dashArray)?A.dashArray.join(" "):A.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=A.lineCap.replace("butt","flat"),o.joinstyle=A.lineJoin):o&&(R.removeChild(o),t._stroke=null),A.fill?(f||(f=t._fill=Yi("fill")),R.appendChild(f),f.color=A.fillColor||A.color,f.opacity=A.fillOpacity):f&&(R.removeChild(f),t._fill=null)},_updateCircle:function(t){var o=t._point.round(),f=Math.round(t._radius),A=Math.round(t._radiusY||f);this._setPath(t,t._empty()?"M0 0":"AL "+o.x+","+o.y+" "+f+","+A+" 0,"+65535*360)},_setPath:function(t,o){t._path.v=o},_bringToFront:function(t){Ii(t._container)},_bringToBack:function(t){Pr(t._container)}},ar=Le.vml?Yi:at,xi=Ar.extend({_initContainer:function(){this._container=ar("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ar("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Wt(this._container),It(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ar.prototype._update.call(this);var t=this._bounds,o=t.getSize(),f=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,f.setAttribute("width",o.x),f.setAttribute("height",o.y)),nn(f,t.min),f.setAttribute("viewBox",[t.min.x,t.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(t){var o=t._path=ar("path");t.options.className&&lt(o,t.options.className),t.options.interactive&&lt(o,"leaflet-interactive"),this._updateStyle(t),this._layers[g(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Wt(t._path),t.removeInteractiveTarget(t._path),delete this._layers[g(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var o=t._path,f=t.options;o&&(f.stroke?(o.setAttribute("stroke",f.color),o.setAttribute("stroke-opacity",f.opacity),o.setAttribute("stroke-width",f.weight),o.setAttribute("stroke-linecap",f.lineCap),o.setAttribute("stroke-linejoin",f.lineJoin),f.dashArray?o.setAttribute("stroke-dasharray",f.dashArray):o.removeAttribute("stroke-dasharray"),f.dashOffset?o.setAttribute("stroke-dashoffset",f.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),f.fill?(o.setAttribute("fill",f.fillColor||f.color),o.setAttribute("fill-opacity",f.fillOpacity),o.setAttribute("fill-rule",f.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(t,o){this._setPath(t,mt(t._parts,o))},_updateCircle:function(t){var o=t._point,f=Math.max(Math.round(t._radius),1),A=Math.max(Math.round(t._radiusY),1)||f,R="a"+f+","+A+" 0 1,0 ",V=t._empty()?"M0 0":"M"+(o.x-f)+","+o.y+R+f*2+",0 "+R+-f*2+",0 ";this._setPath(t,V)},_setPath:function(t,o){t._path.setAttribute("d",o)},_bringToFront:function(t){Ii(t._path)},_bringToBack:function(t){Pr(t._path)}});Le.vml&&xi.include(tu);function Ns(t){return Le.svg||Le.vml?new xi(t):null}yt.include({getRenderer:function(t){var o=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var o=this._paneRenderers[t];return o===void 0&&(o=this._createRenderer({pane:t}),this._paneRenderers[t]=o),o},_createRenderer:function(t){return this.options.preferCanvas&&Ma(t)||Ns(t)}});var nu=Nr.extend({initialize:function(t,o){Nr.prototype.initialize.call(this,this._boundsToLatLngs(t),o)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=Q(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function qd(t,o){return new nu(t,o)}xi.create=ar,xi.pointsToPath=mt,xr.geometryToLayer=qi,xr.coordsToLatLng=Bs,xr.coordsToLatLngs=Fo,xr.latLngToCoords=Ps,xr.latLngsToCoords=Ts,xr.getFeature=Gi,xr.asFeature=Ds,yt.mergeOptions({boxZoom:!0});var Xi=Zn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){it(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){It(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Wt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ct(),gs(),this._startPoint=this._map.mouseEventToContainerPoint(t),it(document,{contextmenu:rr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ct("div","leaflet-zoom-box",this._container),lt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var o=new D(this._point,this._startPoint),f=o.getSize();nn(this._box,o.min),this._box.style.width=f.x+"px",this._box.style.height=f.y+"px"},_finish:function(){this._moved&&(Wt(this._box),Ut(this._container,"leaflet-crosshair")),zi(),xs(),It(document,{contextmenu:rr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(h(this._resetState,this),0);var o=new q(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});yt.addInitHook("addHandler","boxZoom",Xi),yt.mergeOptions({doubleClickZoom:!0});var ru=Zn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var o=this._map,f=o.getZoom(),A=o.options.zoomDelta,R=t.originalEvent.shiftKey?f-A:f+A;o.options.doubleClickZoom==="center"?o.setZoom(R):o.setZoomAround(t.containerPoint,R)}});yt.addInitHook("addHandler","doubleClickZoom",ru),yt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ia=Zn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new ir(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}lt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ut(this._map._container,"leaflet-grab"),Ut(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=Q(this._map.options.maxBounds);this._offsetLimit=H(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var o=this._lastTime=+new Date,f=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(f),this._times.push(o),this._prunePositions(o)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,o){return t-(t-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;t.x<o.min.x&&(t.x=this._viscousLimit(t.x,o.min.x)),t.y<o.min.y&&(t.y=this._viscousLimit(t.y,o.min.y)),t.x>o.max.x&&(t.x=this._viscousLimit(t.x,o.max.x)),t.y>o.max.y&&(t.y=this._viscousLimit(t.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,o=Math.round(t/2),f=this._initialWorldOffset,A=this._draggable._newPos.x,R=(A-o+f)%t+o-f,V=(A+o+f)%t-o-f,ee=Math.abs(R+f)<Math.abs(V+f)?R:V;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ee},_onDragEnd:function(t){var o=this._map,f=o.options,A=!f.inertia||t.noInertia||this._times.length<2;if(o.fire("dragend",t),A)o.fire("moveend");else{this._prunePositions(+new Date);var R=this._lastPos.subtract(this._positions[0]),V=(this._lastTime-this._times[0])/1e3,ee=f.easeLinearity,le=R.multiplyBy(ee/V),he=le.distanceTo([0,0]),be=Math.min(f.inertiaMaxSpeed,he),Me=le.multiplyBy(be/he),et=be/(f.inertiaDeceleration*ee),ht=Me.multiplyBy(-et/2).round();!ht.x&&!ht.y?o.fire("moveend"):(ht=o._limitOffset(ht,o.options.maxBounds),K(function(){o.panBy(ht,{duration:et,easeLinearity:ee,noMoveStart:!0,animate:!0})}))}}});yt.addInitHook("addHandler","dragging",Ia),yt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Oa=Zn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),it(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),It(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,o=document.documentElement,f=t.scrollTop||o.scrollTop,A=t.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(A,f)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var o=this._panKeys={},f=this.keyCodes,A,R;for(A=0,R=f.left.length;A<R;A++)o[f.left[A]]=[-1*t,0];for(A=0,R=f.right.length;A<R;A++)o[f.right[A]]=[t,0];for(A=0,R=f.down.length;A<R;A++)o[f.down[A]]=[0,t];for(A=0,R=f.up.length;A<R;A++)o[f.up[A]]=[0,-1*t]},_setZoomDelta:function(t){var o=this._zoomKeys={},f=this.keyCodes,A,R;for(A=0,R=f.zoomIn.length;A<R;A++)o[f.zoomIn[A]]=t;for(A=0,R=f.zoomOut.length;A<R;A++)o[f.zoomOut[A]]=-t},_addHooks:function(){it(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){It(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var o=t.keyCode,f=this._map,A;if(o in this._panKeys){if(!f._panAnim||!f._panAnim._inProgress)if(A=this._panKeys[o],t.shiftKey&&(A=Z(A).multiplyBy(3)),f.options.maxBounds&&(A=f._limitOffset(Z(A),f.options.maxBounds)),f.options.worldCopyJump){var R=f.wrapLatLng(f.unproject(f.project(f.getCenter()).add(A)));f.panTo(R)}else f.panBy(A)}else if(o in this._zoomKeys)f.setZoom(f.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&f._popup&&f._popup.options.closeOnEscapeKey)f.closePopup();else return;rr(t)}}});yt.addInitHook("addHandler","keyboard",Oa),yt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ot=Zn.extend({addHooks:function(){it(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){It(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var o=Ol(t),f=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var A=Math.max(f-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(h(this._performZoom,this),A),rr(t)},_performZoom:function(){var t=this._map,o=t.getZoom(),f=this._map.options.zoomSnap||0;t._stop();var A=this._delta/(this._map.options.wheelPxPerZoomLevel*4),R=4*Math.log(2/(1+Math.exp(-Math.abs(A))))/Math.LN2,V=f?Math.ceil(R/f)*f:R,ee=t._limitZoom(o+(this._delta>0?V:-V))-o;this._delta=0,this._startTime=null,ee&&(t.options.scrollWheelZoom==="center"?t.setZoom(o+ee):t.setZoomAround(this._lastMousePos,o+ee))}});yt.addInitHook("addHandler","scrollWheelZoom",Ot);var ja=600;yt.mergeOptions({tapHold:Le.touchNative&&Le.safari&&Le.mobile,tapTolerance:15});var Mo=Zn.extend({addHooks:function(){it(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){It(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var o=t.touches[0];this._startPos=this._newPos=new W(o.clientX,o.clientY),this._holdTimeout=setTimeout(h(function(){this._cancel(),this._isTapValid()&&(it(document,"touchend",Jt),it(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),ja),it(document,"touchend touchcancel contextmenu",this._cancel,this),it(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){It(document,"touchend",Jt),It(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),It(document,"touchend touchcancel contextmenu",this._cancel,this),It(document,"touchmove",this._onMove,this)},_onMove:function(t){var o=t.touches[0];this._newPos=new W(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,o){var f=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});f._simulated=!0,o.target.dispatchEvent(f)}});yt.addInitHook("addHandler","tapHold",Mo),yt.mergeOptions({touchZoom:Le.touch,bounceAtZoomLimits:!0});var Ji=Zn.extend({addHooks:function(){lt(this._map._container,"leaflet-touch-zoom"),it(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ut(this._map._container,"leaflet-touch-zoom"),It(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var o=this._map;if(!(!t.touches||t.touches.length!==2||o._animatingZoom||this._zooming)){var f=o.mouseEventToContainerPoint(t.touches[0]),A=o.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(f.add(A)._divideBy(2))),this._startDist=f.distanceTo(A),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),it(document,"touchmove",this._onTouchMove,this),it(document,"touchend touchcancel",this._onTouchEnd,this),Jt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var o=this._map,f=o.mouseEventToContainerPoint(t.touches[0]),A=o.mouseEventToContainerPoint(t.touches[1]),R=f.distanceTo(A)/this._startDist;if(this._zoom=o.getScaleZoom(R,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&R<1||this._zoom>o.getMaxZoom()&&R>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,R===1)return}else{var V=f._add(A)._divideBy(2)._subtract(this._centerPoint);if(R===1&&V.x===0&&V.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(V),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),J(this._animRequest);var ee=h(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=K(ee,this,!0),Jt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,J(this._animRequest),It(document,"touchmove",this._onTouchMove,this),It(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});yt.addInitHook("addHandler","touchZoom",Ji),yt.BoxZoom=Xi,yt.DoubleClickZoom=ru,yt.Drag=Ia,yt.Keyboard=Oa,yt.ScrollWheelZoom=Ot,yt.TapHold=Mo,yt.TouchZoom=Ji,i.Bounds=D,i.Browser=Le,i.CRS=Ae,i.Canvas=La,i.Circle=ks,i.CircleMarker=Es,i.Class=ie,i.Control=Mn,i.DivIcon=Fs,i.DivOverlay=vr,i.DomEvent=ys,i.DomUtil=So,i.Draggable=ir,i.Evented=se,i.FeatureGroup=Rr,i.GeoJSON=xr,i.GridLayer=Yr,i.Handler=Zn,i.Icon=gi,i.ImageOverlay=Qr,i.LatLng=ae,i.LatLngBounds=q,i.Layer=or,i.LayerGroup=$r,i.LineUtil=Wl,i.Map=yt,i.Marker=Fr,i.Mixin=wa,i.Path=Kr,i.Point=W,i.PolyUtil=Ld,i.Polygon=Nr,i.Polyline=In,i.Popup=Rs,i.PosAnimation=_s,i.Projection=zd,i.Rectangle=nu,i.Renderer=Ar,i.SVG=xi,i.SVGOverlay=Ra,i.TileLayer=Xr,i.Tooltip=Ki,i.Transformation=Oe,i.Util=Y,i.VideoOverlay=Da,i.bind=h,i.bounds=H,i.canvas=Ma,i.circle=Ro,i.circleMarker=Kl,i.control=Gr,i.divIcon=Jl,i.extend=u,i.featureGroup=Gl,i.geoJSON=Ql,i.geoJson=sr,i.gridLayer=Qi,i.icon=$l,i.imageOverlay=Yl,i.latLng=ce,i.latLngBounds=Q,i.layerGroup=Do,i.map=qr,i.marker=Ud,i.point=Z,i.polygon=Wd,i.polyline=Zd,i.popup=$i,i.rectangle=qd,i.setOptions=k,i.stamp=g,i.svg=Ns,i.svgOverlay=Fa,i.tileLayer=Na,i.tooltip=No,i.transformation=Xe,i.version=l,i.videoOverlay=Xl;var iu=window.L;i.noConflict=function(){return window.L=iu,this},window.L=i}))})(xl,xl.exports)),xl.exports}var Sd=OE();function mh(n,s,i){return Object.freeze({instance:n,context:s,container:i})}function gh(n,s){return s==null?function(l,u){const c=N.useRef();return c.current||(c.current=n(l,u)),c}:function(l,u){const c=N.useRef();c.current||(c.current=n(l,u));const h=N.useRef(l),{instance:d}=c.current;return N.useEffect(function(){h.current!==l&&(s(d,l,h.current),h.current=l)},[d,l,u]),c}}function SA(n,s){N.useEffect(function(){return(s.layerContainer??s.map).addLayer(n.instance),function(){var c;(c=s.layerContainer)==null||c.removeLayer(n.instance),s.map.removeLayer(n.instance)}},[s,n])}function jE(n){return function(i){const l=Ed(),u=n(kd(i,l),l);return CA(l.map,i.attribution),ph(u.current,i.eventHandlers),SA(u.current,l),u}}function zE(n,s){const i=N.useRef();N.useEffect(function(){if(s.pathOptions!==i.current){const u=s.pathOptions??{};n.instance.setStyle(u),i.current=u}},[n,s])}function HE(n){return function(i){const l=Ed(),u=n(kd(i,l),l);return ph(u.current,i.eventHandlers),SA(u.current,l),zE(u.current,i),u}}function VE(n,s){const i=gh(n),l=ME(i,s);return NE(l)}function UE(n,s){const i=gh(n,s),l=HE(i);return FE(l)}function ZE(n,s){const i=gh(n,s),l=jE(i);return LE(l)}function WE(n,s,i){const{opacity:l,zIndex:u}=s;l!=null&&l!==i.opacity&&n.setOpacity(l),u!=null&&u!==i.zIndex&&n.setZIndex(u)}function qE(){return Ed().map}const GE=UE(function({center:s,children:i,...l},u){const c=new Sd.CircleMarker(s,l);return mh(c,RE(u,{overlayContainer:c}))},PE);function F0(){return F0=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var i=arguments[s];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(n[l]=i[l])}return n},F0.apply(this,arguments)}function $E({bounds:n,boundsOptions:s,center:i,children:l,className:u,id:c,placeholder:h,style:d,whenReady:g,zoom:m,...x},v){const[C]=N.useState({className:u,id:c,style:d}),[P,M]=N.useState(null);N.useImperativeHandle(v,()=>(P==null?void 0:P.map)??null,[P]);const k=N.useCallback(B=>{if(B!==null&&P===null){const b=new Sd.Map(B,x);i!=null&&m!=null?b.setView(i,m):n!=null&&b.fitBounds(n,s),g!=null&&b.whenReady(g),M(DE(b))}},[]);N.useEffect(()=>()=>{P==null||P.map.remove()},[P]);const w=P?De.createElement(kA,{value:P},l):h??null;return De.createElement("div",F0({},C,{ref:k}),w)}const KE=N.forwardRef($E),QE=VE(function(s,i){const l=new Sd.Popup(s,i.overlayContainer);return mh(l,i)},function(s,i,{position:l},u){N.useEffect(function(){const{instance:h}=s;function d(m){m.popup===h&&(h.update(),u(!0))}function g(m){m.popup===h&&u(!1)}return i.map.on({popupopen:d,popupclose:g}),i.overlayContainer==null?(l!=null&&h.setLatLng(l),h.openOn(i.map)):i.overlayContainer.bindPopup(h),function(){var x;i.map.off({popupopen:d,popupclose:g}),(x=i.overlayContainer)==null||x.unbindPopup(),i.map.removeLayer(h)}},[s,i,u,l])}),YE=ZE(function({url:s,...i},l){const u=new Sd.TileLayer(s,kd(i,l));return mh(u,l)},function(s,i,l){WE(s,i,l);const{url:u}=i;u!=null&&u!==l.url&&s.setUrl(u)});function XE(n){const i=Date.now()/1e3-n,l=3600,u=86400;return i<l?"#22c55e":i<u?"#4ade80":i<3*u?"#a3e635":"#9ca3af"}function JE({contacts:n,focusedContact:s}){const i=qE(),[l,u]=N.useState(!1);return N.useEffect(()=>{if(s&&s.lat!=null&&s.lon!=null){i.setView([s.lat,s.lon],12),u(!0);return}if(l)return;const c=()=>{if(n.length===0){i.setView([20,0],2),u(!0);return}if(n.length===1){i.setView([n[0].lat,n[0].lon],10),u(!0);return}const h=n.map(d=>[d.lat,d.lon]);i.fitBounds(h,{padding:[50,50],maxZoom:12}),u(!0)};"geolocation"in navigator?navigator.geolocation.getCurrentPosition(h=>{i.setView([h.coords.latitude,h.coords.longitude],8),u(!0)},()=>{c()},{timeout:5e3,maximumAge:3e5}):c()},[i,n,l,s]),null}function ek({contacts:n,focusedKey:s}){const i=N.useMemo(()=>{const h=Date.now()/1e3-604800;return n.filter(d=>d.lat!=null&&d.lon!=null&&d.last_seen!=null&&d.last_seen>h)},[n]),l=N.useMemo(()=>s&&i.find(h=>h.public_key===s)||null,[s,i]),u=N.useRef({}),c=N.useCallback((h,d)=>{u.current[h]=d},[]);return N.useEffect(()=>{if(l&&u.current[l.public_key]){const h=setTimeout(()=>{var d;(d=u.current[l.public_key])==null||d.openPopup()},100);return()=>clearTimeout(h)}},[l]),_.jsxs("div",{className:"flex flex-col h-full",children:[_.jsxs("div",{className:"px-4 py-2 bg-muted/50 text-xs text-muted-foreground flex items-center justify-between",children:[_.jsxs("span",{children:["Showing ",i.length," contact",i.length!==1?"s":""," heard in the last 7 days"]}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsxs("span",{className:"flex items-center gap-1",children:[_.jsx("span",{className:"w-3 h-3 rounded-full bg-[#22c55e]"})," <1h"]}),_.jsxs("span",{className:"flex items-center gap-1",children:[_.jsx("span",{className:"w-3 h-3 rounded-full bg-[#4ade80]"})," <1d"]}),_.jsxs("span",{className:"flex items-center gap-1",children:[_.jsx("span",{className:"w-3 h-3 rounded-full bg-[#a3e635]"})," <3d"]}),_.jsxs("span",{className:"flex items-center gap-1",children:[_.jsx("span",{className:"w-3 h-3 rounded-full bg-[#9ca3af]"})," older"]})]})]}),_.jsx("div",{className:"flex-1 relative",style:{zIndex:0},children:_.jsxs(KE,{center:[20,0],zoom:2,className:"h-full w-full",style:{background:"#1a1a2e"},children:[_.jsx(YE,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),_.jsx(JE,{contacts:i,focusedContact:l}),i.map(h=>{const d=h.type===ad,g=XE(h.last_seen),m=h.name||h.public_key.slice(0,12);return _.jsx(GE,{ref:x=>c(h.public_key,x),center:[h.lat,h.lon],radius:d?10:7,pathOptions:{color:d?g:"#000",fillColor:g,fillOpacity:.8,weight:d?0:1},children:_.jsx(QE,{children:_.jsxs("div",{className:"text-sm",children:[_.jsxs("div",{className:"font-medium flex items-center gap-1",children:[d&&_.jsx("span",{title:"Repeater",children:""}),m]}),_.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Last heard: ",oa(h.last_seen)]}),_.jsxs("div",{className:"text-xs text-gray-400 mt-1 font-mono",children:[h.lat.toFixed(5),", ",h.lon.toFixed(5)]})]})})},h.public_key)})]})})]})}function ox(n,s){var i,l=1;n==null&&(n=0),s==null&&(s=0);function u(){var c,h=i.length,d,g=0,m=0;for(c=0;c<h;++c)d=i[c],g+=d.x,m+=d.y;for(g=(g/h-n)*l,m=(m/h-s)*l,c=0;c<h;++c)d=i[c],d.x-=g,d.y-=m}return u.initialize=function(c){i=c},u.x=function(c){return arguments.length?(n=+c,u):n},u.y=function(c){return arguments.length?(s=+c,u):s},u.strength=function(c){return arguments.length?(l=+c,u):l},u}function tk(n){const s=+this._x.call(null,n),i=+this._y.call(null,n);return BA(this.cover(s,i),s,i,n)}function BA(n,s,i,l){if(isNaN(s)||isNaN(i))return n;var u,c=n._root,h={data:l},d=n._x0,g=n._y0,m=n._x1,x=n._y1,v,C,P,M,k,w,B,b;if(!c)return n._root=h,n;for(;c.length;)if((k=s>=(v=(d+m)/2))?d=v:m=v,(w=i>=(C=(g+x)/2))?g=C:x=C,u=c,!(c=c[B=w<<1|k]))return u[B]=h,n;if(P=+n._x.call(null,c.data),M=+n._y.call(null,c.data),s===P&&i===M)return h.next=c,u?u[B]=h:n._root=h,n;do u=u?u[B]=new Array(4):n._root=new Array(4),(k=s>=(v=(d+m)/2))?d=v:m=v,(w=i>=(C=(g+x)/2))?g=C:x=C;while((B=w<<1|k)===(b=(M>=C)<<1|P>=v));return u[b]=c,u[B]=h,n}function nk(n){var s,i,l=n.length,u,c,h=new Array(l),d=new Array(l),g=1/0,m=1/0,x=-1/0,v=-1/0;for(i=0;i<l;++i)isNaN(u=+this._x.call(null,s=n[i]))||isNaN(c=+this._y.call(null,s))||(h[i]=u,d[i]=c,u<g&&(g=u),u>x&&(x=u),c<m&&(m=c),c>v&&(v=c));if(g>x||m>v)return this;for(this.cover(g,m).cover(x,v),i=0;i<l;++i)BA(this,h[i],d[i],n[i]);return this}function rk(n,s){if(isNaN(n=+n)||isNaN(s=+s))return this;var i=this._x0,l=this._y0,u=this._x1,c=this._y1;if(isNaN(i))u=(i=Math.floor(n))+1,c=(l=Math.floor(s))+1;else{for(var h=u-i||1,d=this._root,g,m;i>n||n>=u||l>s||s>=c;)switch(m=(s<l)<<1|n<i,g=new Array(4),g[m]=d,d=g,h*=2,m){case 0:u=i+h,c=l+h;break;case 1:i=u-h,c=l+h;break;case 2:u=i+h,l=c-h;break;case 3:i=u-h,l=c-h;break}this._root&&this._root.length&&(this._root=d)}return this._x0=i,this._y0=l,this._x1=u,this._y1=c,this}function ik(){var n=[];return this.visit(function(s){if(!s.length)do n.push(s.data);while(s=s.next)}),n}function ok(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Hn(n,s,i,l,u){this.node=n,this.x0=s,this.y0=i,this.x1=l,this.y1=u}function sk(n,s,i){var l,u=this._x0,c=this._y0,h,d,g,m,x=this._x1,v=this._y1,C=[],P=this._root,M,k;for(P&&C.push(new Hn(P,u,c,x,v)),i==null?i=1/0:(u=n-i,c=s-i,x=n+i,v=s+i,i*=i);M=C.pop();)if(!(!(P=M.node)||(h=M.x0)>x||(d=M.y0)>v||(g=M.x1)<u||(m=M.y1)<c))if(P.length){var w=(h+g)/2,B=(d+m)/2;C.push(new Hn(P[3],w,B,g,m),new Hn(P[2],h,B,w,m),new Hn(P[1],w,d,g,B),new Hn(P[0],h,d,w,B)),(k=(s>=B)<<1|n>=w)&&(M=C[C.length-1],C[C.length-1]=C[C.length-1-k],C[C.length-1-k]=M)}else{var b=n-+this._x.call(null,P.data),E=s-+this._y.call(null,P.data),T=b*b+E*E;if(T<i){var F=Math.sqrt(i=T);u=n-F,c=s-F,x=n+F,v=s+F,l=P.data}}return l}function ak(n){if(isNaN(x=+this._x.call(null,n))||isNaN(v=+this._y.call(null,n)))return this;var s,i=this._root,l,u,c,h=this._x0,d=this._y0,g=this._x1,m=this._y1,x,v,C,P,M,k,w,B;if(!i)return this;if(i.length)for(;;){if((M=x>=(C=(h+g)/2))?h=C:g=C,(k=v>=(P=(d+m)/2))?d=P:m=P,s=i,!(i=i[w=k<<1|M]))return this;if(!i.length)break;(s[w+1&3]||s[w+2&3]||s[w+3&3])&&(l=s,B=w)}for(;i.data!==n;)if(u=i,!(i=i.next))return this;return(c=i.next)&&delete i.next,u?(c?u.next=c:delete u.next,this):s?(c?s[w]=c:delete s[w],(i=s[0]||s[1]||s[2]||s[3])&&i===(s[3]||s[2]||s[1]||s[0])&&!i.length&&(l?l[B]=i:this._root=i),this):(this._root=c,this)}function lk(n){for(var s=0,i=n.length;s<i;++s)this.remove(n[s]);return this}function uk(){return this._root}function ck(){var n=0;return this.visit(function(s){if(!s.length)do++n;while(s=s.next)}),n}function dk(n){var s=[],i,l=this._root,u,c,h,d,g;for(l&&s.push(new Hn(l,this._x0,this._y0,this._x1,this._y1));i=s.pop();)if(!n(l=i.node,c=i.x0,h=i.y0,d=i.x1,g=i.y1)&&l.length){var m=(c+d)/2,x=(h+g)/2;(u=l[3])&&s.push(new Hn(u,m,x,d,g)),(u=l[2])&&s.push(new Hn(u,c,x,m,g)),(u=l[1])&&s.push(new Hn(u,m,h,d,x)),(u=l[0])&&s.push(new Hn(u,c,h,m,x))}return this}function fk(n){var s=[],i=[],l;for(this._root&&s.push(new Hn(this._root,this._x0,this._y0,this._x1,this._y1));l=s.pop();){var u=l.node;if(u.length){var c,h=l.x0,d=l.y0,g=l.x1,m=l.y1,x=(h+g)/2,v=(d+m)/2;(c=u[0])&&s.push(new Hn(c,h,d,x,v)),(c=u[1])&&s.push(new Hn(c,x,d,g,v)),(c=u[2])&&s.push(new Hn(c,h,v,x,m)),(c=u[3])&&s.push(new Hn(c,x,v,g,m))}i.push(l)}for(;l=i.pop();)n(l.node,l.x0,l.y0,l.x1,l.y1);return this}function hk(n){return n[0]}function pk(n){return arguments.length?(this._x=n,this):this._x}function mk(n){return n[1]}function gk(n){return arguments.length?(this._y=n,this):this._y}function xh(n,s,i){var l=new vh(s??hk,i??mk,NaN,NaN,NaN,NaN);return n==null?l:l.addAll(n)}function vh(n,s,i,l,u,c){this._x=n,this._y=s,this._x0=i,this._y0=l,this._x1=u,this._y1=c,this._root=void 0}function sx(n){for(var s={data:n.data},i=s;n=n.next;)i=i.next={data:n.data};return s}var Un=xh.prototype=vh.prototype;Un.copy=function(){var n=new vh(this._x,this._y,this._x0,this._y0,this._x1,this._y1),s=this._root,i,l;if(!s)return n;if(!s.length)return n._root=sx(s),n;for(i=[{source:s,target:n._root=new Array(4)}];s=i.pop();)for(var u=0;u<4;++u)(l=s.source[u])&&(l.length?i.push({source:l,target:s.target[u]=new Array(4)}):s.target[u]=sx(l));return n};Un.add=tk;Un.addAll=nk;Un.cover=rk;Un.data=ik;Un.extent=ok;Un.find=sk;Un.remove=ak;Un.removeAll=lk;Un.root=uk;Un.size=ck;Un.visit=dk;Un.visitAfter=fk;Un.x=pk;Un.y=gk;function Vn(n){return function(){return n}}function Ao(n){return(n()-.5)*1e-6}function xk(n){return n.x+n.vx}function vk(n){return n.y+n.vy}function Ak(n){var s,i,l,u=1,c=1;typeof n!="function"&&(n=Vn(n==null?1:+n));function h(){for(var m,x=s.length,v,C,P,M,k,w,B=0;B<c;++B)for(v=xh(s,xk,vk).visitAfter(d),m=0;m<x;++m)C=s[m],k=i[C.index],w=k*k,P=C.x+C.vx,M=C.y+C.vy,v.visit(b);function b(E,T,F,I,j){var O=E.data,G=E.r,U=k+G;if(O){if(O.index>C.index){var K=P-O.x-O.vx,J=M-O.y-O.vy,Y=K*K+J*J;Y<U*U&&(K===0&&(K=Ao(l),Y+=K*K),J===0&&(J=Ao(l),Y+=J*J),Y=(U-(Y=Math.sqrt(Y)))/Y*u,C.vx+=(K*=Y)*(U=(G*=G)/(w+G)),C.vy+=(J*=Y)*U,O.vx-=K*(U=1-U),O.vy-=J*U)}return}return T>P+U||I<P-U||F>M+U||j<M-U}}function d(m){if(m.data)return m.r=i[m.data.index];for(var x=m.r=0;x<4;++x)m[x]&&m[x].r>m.r&&(m.r=m[x].r)}function g(){if(s){var m,x=s.length,v;for(i=new Array(x),m=0;m<x;++m)v=s[m],i[v.index]=+n(v,m,s)}}return h.initialize=function(m,x){s=m,l=x,g()},h.iterations=function(m){return arguments.length?(c=+m,h):c},h.strength=function(m){return arguments.length?(u=+m,h):u},h.radius=function(m){return arguments.length?(n=typeof m=="function"?m:Vn(+m),g(),h):n},h}function yk(n){return n.index}function ax(n,s){var i=n.get(s);if(!i)throw new Error("node not found: "+s);return i}function nc(n){var s=yk,i=v,l,u=Vn(30),c,h,d,g,m,x=1;n==null&&(n=[]);function v(w){return 1/Math.min(d[w.source.index],d[w.target.index])}function C(w){for(var B=0,b=n.length;B<x;++B)for(var E=0,T,F,I,j,O,G,U;E<b;++E)T=n[E],F=T.source,I=T.target,j=I.x+I.vx-F.x-F.vx||Ao(m),O=I.y+I.vy-F.y-F.vy||Ao(m),G=Math.sqrt(j*j+O*O),G=(G-c[E])/G*w*l[E],j*=G,O*=G,I.vx-=j*(U=g[E]),I.vy-=O*U,F.vx+=j*(U=1-U),F.vy+=O*U}function P(){if(h){var w,B=h.length,b=n.length,E=new Map(h.map((F,I)=>[s(F,I,h),F])),T;for(w=0,d=new Array(B);w<b;++w)T=n[w],T.index=w,typeof T.source!="object"&&(T.source=ax(E,T.source)),typeof T.target!="object"&&(T.target=ax(E,T.target)),d[T.source.index]=(d[T.source.index]||0)+1,d[T.target.index]=(d[T.target.index]||0)+1;for(w=0,g=new Array(b);w<b;++w)T=n[w],g[w]=d[T.source.index]/(d[T.source.index]+d[T.target.index]);l=new Array(b),M(),c=new Array(b),k()}}function M(){if(h)for(var w=0,B=n.length;w<B;++w)l[w]=+i(n[w],w,n)}function k(){if(h)for(var w=0,B=n.length;w<B;++w)c[w]=+u(n[w],w,n)}return C.initialize=function(w,B){h=w,m=B,P()},C.links=function(w){return arguments.length?(n=w,P(),C):n},C.id=function(w){return arguments.length?(s=w,C):s},C.iterations=function(w){return arguments.length?(x=+w,C):x},C.strength=function(w){return arguments.length?(i=typeof w=="function"?w:Vn(+w),M(),C):i},C.distance=function(w){return arguments.length?(u=typeof w=="function"?w:Vn(+w),k(),C):u},C}var _k={value:()=>{}};function PA(){for(var n=0,s=arguments.length,i={},l;n<s;++n){if(!(l=arguments[n]+"")||l in i||/[\s.]/.test(l))throw new Error("illegal type: "+l);i[l]=[]}return new qc(i)}function qc(n){this._=n}function wk(n,s){return n.trim().split(/^|\s+/).map(function(i){var l="",u=i.indexOf(".");if(u>=0&&(l=i.slice(u+1),i=i.slice(0,u)),i&&!s.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:l}})}qc.prototype=PA.prototype={constructor:qc,on:function(n,s){var i=this._,l=wk(n+"",i),u,c=-1,h=l.length;if(arguments.length<2){for(;++c<h;)if((u=(n=l[c]).type)&&(u=bk(i[u],n.name)))return u;return}if(s!=null&&typeof s!="function")throw new Error("invalid callback: "+s);for(;++c<h;)if(u=(n=l[c]).type)i[u]=lx(i[u],n.name,s);else if(s==null)for(u in i)i[u]=lx(i[u],n.name,null);return this},copy:function(){var n={},s=this._;for(var i in s)n[i]=s[i].slice();return new qc(n)},call:function(n,s){if((u=arguments.length-2)>0)for(var i=new Array(u),l=0,u,c;l<u;++l)i[l]=arguments[l+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(c=this._[n],l=0,u=c.length;l<u;++l)c[l].value.apply(s,i)},apply:function(n,s,i){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var l=this._[n],u=0,c=l.length;u<c;++u)l[u].value.apply(s,i)}};function bk(n,s){for(var i=0,l=n.length,u;i<l;++i)if((u=n[i]).name===s)return u.value}function lx(n,s,i){for(var l=0,u=n.length;l<u;++l)if(n[l].name===s){n[l]=_k,n=n.slice(0,l).concat(n.slice(l+1));break}return i!=null&&n.push({name:s,value:i}),n}var la=0,vl=0,gl=0,TA=1e3,id,Al,od=0,as=0,Bd=0,kl=typeof performance=="object"&&performance.now?performance:Date,DA=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function RA(){return as||(DA(Ck),as=kl.now()+Bd)}function Ck(){as=0}function N0(){this._call=this._time=this._next=null}N0.prototype=FA.prototype={constructor:N0,restart:function(n,s,i){if(typeof n!="function")throw new TypeError("callback is not a function");i=(i==null?RA():+i)+(s==null?0:+s),!this._next&&Al!==this&&(Al?Al._next=this:id=this,Al=this),this._call=n,this._time=i,L0()},stop:function(){this._call&&(this._call=null,this._time=1/0,L0())}};function FA(n,s,i){var l=new N0;return l.restart(n,s,i),l}function Ek(){RA(),++la;for(var n=id,s;n;)(s=as-n._time)>=0&&n._call.call(void 0,s),n=n._next;--la}function ux(){as=(od=kl.now())+Bd,la=vl=0;try{Ek()}finally{la=0,Sk(),as=0}}function kk(){var n=kl.now(),s=n-od;s>TA&&(Bd-=s,od=n)}function Sk(){for(var n,s=id,i,l=1/0;s;)s._call?(l>s._time&&(l=s._time),n=s,s=s._next):(i=s._next,s._next=null,s=n?n._next=i:id=i);Al=n,L0(l)}function L0(n){if(!la){vl&&(vl=clearTimeout(vl));var s=n-as;s>24?(n<1/0&&(vl=setTimeout(ux,n-kl.now()-Bd)),gl&&(gl=clearInterval(gl))):(gl||(od=kl.now(),gl=setInterval(kk,TA)),la=1,DA(ux))}}const Bk=1664525,Pk=1013904223,cx=4294967296;function Tk(){let n=1;return()=>(n=(Bk*n+Pk)%cx)/cx}function Dk(n){return n.x}function Rk(n){return n.y}var Fk=10,Nk=Math.PI*(3-Math.sqrt(5));function Lk(n){var s,i=1,l=.001,u=1-Math.pow(l,1/300),c=0,h=.6,d=new Map,g=FA(v),m=PA("tick","end"),x=Tk();n==null&&(n=[]);function v(){C(),m.call("tick",s),i<l&&(g.stop(),m.call("end",s))}function C(k){var w,B=n.length,b;k===void 0&&(k=1);for(var E=0;E<k;++E)for(i+=(c-i)*u,d.forEach(function(T){T(i)}),w=0;w<B;++w)b=n[w],b.fx==null?b.x+=b.vx*=h:(b.x=b.fx,b.vx=0),b.fy==null?b.y+=b.vy*=h:(b.y=b.fy,b.vy=0);return s}function P(){for(var k=0,w=n.length,B;k<w;++k){if(B=n[k],B.index=k,B.fx!=null&&(B.x=B.fx),B.fy!=null&&(B.y=B.fy),isNaN(B.x)||isNaN(B.y)){var b=Fk*Math.sqrt(.5+k),E=k*Nk;B.x=b*Math.cos(E),B.y=b*Math.sin(E)}(isNaN(B.vx)||isNaN(B.vy))&&(B.vx=B.vy=0)}}function M(k){return k.initialize&&k.initialize(n,x),k}return P(),s={tick:C,restart:function(){return g.restart(v),s},stop:function(){return g.stop(),s},nodes:function(k){return arguments.length?(n=k,P(),d.forEach(M),s):n},alpha:function(k){return arguments.length?(i=+k,s):i},alphaMin:function(k){return arguments.length?(l=+k,s):l},alphaDecay:function(k){return arguments.length?(u=+k,s):+u},alphaTarget:function(k){return arguments.length?(c=+k,s):c},velocityDecay:function(k){return arguments.length?(h=1-k,s):1-h},randomSource:function(k){return arguments.length?(x=k,d.forEach(M),s):x},force:function(k,w){return arguments.length>1?(w==null?d.delete(k):d.set(k,M(w)),s):d.get(k)},find:function(k,w,B){var b=0,E=n.length,T,F,I,j,O;for(B==null?B=1/0:B*=B,b=0;b<E;++b)j=n[b],T=k-j.x,F=w-j.y,I=T*T+F*F,I<B&&(O=j,B=I);return O},on:function(k,w){return arguments.length>1?(m.on(k,w),s):m.on(k)}}}function rc(){var n,s,i,l,u=Vn(-30),c,h=1,d=1/0,g=.81;function m(P){var M,k=n.length,w=xh(n,Dk,Rk).visitAfter(v);for(l=P,M=0;M<k;++M)s=n[M],w.visit(C)}function x(){if(n){var P,M=n.length,k;for(c=new Array(M),P=0;P<M;++P)k=n[P],c[k.index]=+u(k,P,n)}}function v(P){var M=0,k,w,B=0,b,E,T;if(P.length){for(b=E=T=0;T<4;++T)(k=P[T])&&(w=Math.abs(k.value))&&(M+=k.value,B+=w,b+=w*k.x,E+=w*k.y);P.x=b/B,P.y=E/B}else{k=P,k.x=k.data.x,k.y=k.data.y;do M+=c[k.data.index];while(k=k.next)}P.value=M}function C(P,M,k,w){if(!P.value)return!0;var B=P.x-s.x,b=P.y-s.y,E=w-M,T=B*B+b*b;if(E*E/g<T)return T<d&&(B===0&&(B=Ao(i),T+=B*B),b===0&&(b=Ao(i),T+=b*b),T<h&&(T=Math.sqrt(h*T)),s.vx+=B*P.value*l/T,s.vy+=b*P.value*l/T),!0;if(P.length||T>=d)return;(P.data!==s||P.next)&&(B===0&&(B=Ao(i),T+=B*B),b===0&&(b=Ao(i),T+=b*b),T<h&&(T=Math.sqrt(h*T)));do P.data!==s&&(E=c[P.data.index]*l/T,s.vx+=B*E,s.vy+=b*E);while(P=P.next)}return m.initialize=function(P,M){n=P,i=M,x()},m.strength=function(P){return arguments.length?(u=typeof P=="function"?P:Vn(+P),x(),m):u},m.distanceMin=function(P){return arguments.length?(h=P*P,m):Math.sqrt(h)},m.distanceMax=function(P){return arguments.length?(d=P*P,m):Math.sqrt(d)},m.theta=function(P){return arguments.length?(g=P*P,m):Math.sqrt(g)},m}function dx(n){var s=Vn(.1),i,l,u;typeof n!="function"&&(n=Vn(n==null?0:+n));function c(d){for(var g=0,m=i.length,x;g<m;++g)x=i[g],x.vx+=(u[g]-x.x)*l[g]*d}function h(){if(i){var d,g=i.length;for(l=new Array(g),u=new Array(g),d=0;d<g;++d)l[d]=isNaN(u[d]=+n(i[d],d,i))?0:+s(i[d],d,i)}}return c.initialize=function(d){i=d,h()},c.strength=function(d){return arguments.length?(s=typeof d=="function"?d:Vn(+d),h(),c):s},c.x=function(d){return arguments.length?(n=typeof d=="function"?d:Vn(+d),h(),c):n},c}function fx(n){var s=Vn(.1),i,l,u;typeof n!="function"&&(n=Vn(n==null?0:+n));function c(d){for(var g=0,m=i.length,x;g<m;++g)x=i[g],x.vy+=(u[g]-x.y)*l[g]*d}function h(){if(i){var d,g=i.length;for(l=new Array(g),u=new Array(g),d=0;d<g;++d)l[d]=isNaN(u[d]=+n(i[d],d,i))?0:+s(i[d],d,i)}}return c.initialize=function(d){i=d,h()},c.strength=function(d){return arguments.length?(s=typeof d=="function"?d:Vn(+d),h(),c):s},c.y=function(d){return arguments.length?(n=typeof d=="function"?d:Vn(+d),h(),c):n},c}const gn={background:"#0a0a0a",link:"#4b5563",ambiguous:"#9ca3af",particleAD:"#f59e0b",particleGT:"#06b6d4",particleDM:"#8b5cf6",particleACK:"#22c55e",particleTR:"#f97316",particleRQ:"#ec4899",particleRS:"#14b8a6",particleUnknown:"#6b7280"},Mk={AD:gn.particleAD,GT:gn.particleGT,DM:gn.particleDM,ACK:gn.particleACK,TR:gn.particleTR,RQ:gn.particleRQ,RS:gn.particleRS,"?":gn.particleUnknown},Ik=.008,Ok=15,jk=2880*60*1e3,zk=20,hx=200,NA=1800*1e3,Hk=[{emoji:"",label:"You",size:"text-xl"},{emoji:"",label:"Repeater",size:"text-base"},{emoji:"",label:"Node",size:"text-base"},{emoji:"",label:"Unknown",size:"text-base"}],Vk=[{label:"AD",color:gn.particleAD,description:"Advertisement"},{label:"GT",color:gn.particleGT,description:"Group Text"},{label:"DM",color:gn.particleDM,description:"Direct Message"},{label:"ACK",color:gn.particleACK,description:"Acknowledgment"},{label:"TR",color:gn.particleTR,description:"Trace"},{label:"RQ",color:gn.particleRQ,description:"Request"},{label:"RS",color:gn.particleRS,description:"Response"},{label:"?",color:gn.particleUnknown,description:"Other"}];function Uk(n){let s=0;for(let i=0;i<n.length;i++)s=(s<<5)-s+n.charCodeAt(i),s=s&s;return Math.abs(s).toString(16).padStart(8,"0")}function Zk(n){var s;try{const i=bt.MeshCoreDecoder.decode(n);if(!i.isValid)return null;const l={payloadType:i.payloadType,pathBytes:i.path||[],srcHash:null,dstHash:null,advertPubkey:null,groupTextSender:null,anonRequestPubkey:null};if(i.payloadType===bt.PayloadType.TextMessage&&i.payload.decoded){const u=i.payload.decoded;l.srcHash=u.sourceHash||null,l.dstHash=u.destinationHash||null}else if(i.payloadType===bt.PayloadType.Advert&&i.payload.decoded)l.advertPubkey=i.payload.decoded.publicKey||null;else if(i.payloadType===bt.PayloadType.GroupText&&i.payload.decoded){const u=i.payload.decoded;l.groupTextSender=((s=u.decrypted)==null?void 0:s.sender)||null}else if(i.payloadType===bt.PayloadType.AnonRequest&&i.payload.decoded){const u=i.payload.decoded;l.anonRequestPubkey=u.senderPublicKey||null}return l}catch{return null}}function Wk(n){switch(n){case bt.PayloadType.Advert:return"AD";case bt.PayloadType.GroupText:return"GT";case bt.PayloadType.TextMessage:return"DM";case bt.PayloadType.Ack:return"ACK";case bt.PayloadType.Trace:return"TR";case bt.PayloadType.Request:case bt.PayloadType.AnonRequest:return"RQ";case bt.PayloadType.Response:return"RS";default:return"?"}}function qk(n,s){var l,u;const i=Uk(s.data).slice(0,8);if(n.payloadType===bt.PayloadType.Advert&&n.advertPubkey)return`ad:${n.advertPubkey.slice(0,12)}`;if(n.payloadType===bt.PayloadType.GroupText){const c=n.groupTextSender||((l=s.decrypted_info)==null?void 0:l.sender)||"?";return`gt:${((u=s.decrypted_info)==null?void 0:u.channel_name)||"?"}:${c}:${i}`}return n.payloadType===bt.PayloadType.TextMessage?`dm:${n.srcHash||"?"}:${n.dstHash||"?"}:${i}`:n.payloadType===bt.PayloadType.AnonRequest&&n.anonRequestPubkey?`rq:${n.anonRequestPubkey.slice(0,12)}:${i}`:`other:${i}`}function LA(n){return{sourceId:typeof n.source=="string"?n.source:n.source.id,targetId:typeof n.target=="string"?n.target:n.target.id}}function Gk(n,s){const i=n.toLowerCase(),l=s.filter(u=>u.public_key.toLowerCase().startsWith(i));return l.length===1?l[0]:null}function $k(n,s){const i=n.toLowerCase();return s.filter(l=>l.public_key.toLowerCase().startsWith(i))}function Kk(n,s){return s.find(i=>i.name===n)||null}function ic(n){return(n==null?void 0:n.type)===ia?"repeater":"client"}function px(n){return n.filter((s,i)=>i===0||s!==n[i-1])}function Qk(n){const s=Date.now(),i=n.observations.filter(c=>s-c.timestamp<NA),l=new Map;for(const c of i){const h=c.nextHop??"self";l.has(h)||l.set(h,new Set),l.get(h).add(c.source)}if(l.size<=1)return{shouldSplit:!1,disjointGroups:null};const u=new Map;for(const[c,h]of l)for(const d of h)u.has(d)||u.set(d,[]),u.get(d).push(c);for(const[,c]of u)if(c.length>1)return{shouldSplit:!1,disjointGroups:null};for(const[,c]of l)if(c.size<zk)return{shouldSplit:!1,disjointGroups:null};return{shouldSplit:!0,disjointGroups:l}}function Yk(n,s,i,l){const u=s.toLowerCase(),c=Date.now();n.has(u)||n.set(u,{prefix:u,observations:[]});const h=n.get(u);h.observations.push({source:i,nextHop:l,timestamp:c}),h.observations=h.observations.filter(d=>c-d.timestamp<NA),h.observations.length>hx&&(h.observations=h.observations.slice(-hx))}function Xk({packets:n,contacts:s,config:i,showAmbiguousPaths:l,showAmbiguousNodes:u,splitAmbiguousByTraffic:c,chargeStrength:h,letEmDrift:d,particleSpeedMultiplier:g,observationWindowSec:m,dimensions:x}){const v=N.useRef(new Map),C=N.useRef(new Map),P=N.useRef([]),M=N.useRef(null),k=N.useRef(new Set),w=N.useRef(new Map),B=N.useRef(new Map),b=N.useRef(new Map),E=N.useRef(g),T=N.useRef(m*1e3),[F,I]=N.useState({processed:0,animated:0,nodes:0,links:0});N.useEffect(()=>{E.current=g},[g]),N.useEffect(()=>{T.current=m*1e3},[m]),N.useEffect(()=>{const $=Lk([]).force("link",nc([]).id(se=>se.id).distance(80).strength(.3)).force("charge",rc().strength(se=>se.id==="self"?-1200:-200).distanceMax(500)).force("center",ox(x.width/2,x.height/2)).force("collide",Ak(40)).force("selfX",dx(x.width/2).strength(se=>se.id==="self"?.1:0)).force("selfY",fx(x.height/2).strength(se=>se.id==="self"?.1:0)).alphaDecay(.02).velocityDecay(.5).alphaTarget(.03);return M.current=$,()=>{$.stop()}},[]),N.useEffect(()=>{const $=M.current;$&&($.force("center",ox(x.width/2,x.height/2)),$.force("selfX",dx(x.width/2).strength(se=>se.id==="self"?.1:0)),$.force("selfY",fx(x.height/2).strength(se=>se.id==="self"?.1:0)),$.force("charge",rc().strength(se=>se.id==="self"?h*6:h).distanceMax(500)),$.alpha(.3).restart())},[x,h]),N.useEffect(()=>{const $=M.current;$&&$.alphaTarget(d?.05:0)},[d]),N.useEffect(()=>{v.current.has("self")||(v.current.set("self",{id:"self",name:(i==null?void 0:i.name)||"Me",type:"self",isAmbiguous:!1,lastActivity:Date.now(),x:x.width/2,y:x.height/2}),j())},[i,x]),N.useEffect(()=>{k.current.clear();const $=v.current.get("self");v.current.clear(),$&&v.current.set("self",$),C.current.clear(),P.current=[],w.current.clear(),B.current.forEach(se=>clearTimeout(se)),B.current.clear(),b.current.clear(),I({processed:0,animated:0,nodes:$?1:0,links:0})},[l,u,c]);const j=N.useCallback(()=>{const $=M.current;if(!$)return;const se=Array.from(v.current.values()),W=Array.from(C.current.values());$.nodes(se);const te=$.force("link");te==null||te.links(W),$.alpha(.15).restart(),I(Z=>({...Z,nodes:se.length,links:W.length}))},[]),O=N.useCallback(($,se,W,te,Z,D)=>{const H=v.current.get($);if(H)H.lastActivity=Date.now(),se&&!H.name&&(H.name=se),Z&&(H.ambiguousNames=Z),D!==void 0&&(H.lastSeen=D);else{const q=v.current.get("self");v.current.set($,{id:$,name:se,type:W,isAmbiguous:te,lastActivity:Date.now(),lastSeen:D,ambiguousNames:Z,x:((q==null?void 0:q.x)??400)+(Math.random()-.5)*100,y:((q==null?void 0:q.y)??300)+(Math.random()-.5)*100})}},[]),G=N.useCallback(($,se)=>{const W=[$,se].sort().join("->"),te=C.current.get(W);te?te.lastActivity=Date.now():C.current.set(W,{source:$,target:se,lastActivity:Date.now()})},[]),U=N.useCallback($=>{const se=w.current.get($);if(se){w.current.delete($),B.current.delete($);for(const W of se.paths){const te=px(W.nodes);if(!(te.length<2))for(let Z=0;Z<te.length-1;Z++)P.current.push({linkKey:[te[Z],te[Z+1]].sort().join("->"),progress:-Z,speed:Ik*E.current,color:Mk[se.label],label:se.label,fromNodeId:te[Z],toNodeId:te[Z+1]})}}},[]),K=N.useCallback(($,se,W,te,Z)=>{if($.type==="pubkey"){if($.value.length<12)return null;const H=$.value.slice(0,12).toLowerCase();if(te&&H===te)return"self";const q=s.find(Q=>Q.public_key.toLowerCase().startsWith(H));return O(H,(q==null?void 0:q.name)||null,ic(q),!1,void 0,q==null?void 0:q.last_seen),H}if($.type==="name"){const H=Kk($.value,s);if(H){const Q=H.public_key.slice(0,12).toLowerCase();return te&&Q===te?"self":(O(Q,H.name,ic(H),!1,void 0,H.last_seen),Q)}const q=`name:${$.value}`;return O(q,$.value,"client",!1),q}const D=Gk($.value,s);if(D){const H=D.public_key.slice(0,12).toLowerCase();return te&&H===te?"self":(O(H,D.name,ic(D),!1,void 0,D.last_seen),H)}if(W){const H=$k($.value,s),q=se?H.filter(Q=>Q.type===ia):H.filter(Q=>Q.type!==ia);if(q.length===1){const Q=q[0],ae=Q.public_key.slice(0,12).toLowerCase();return O(ae,Q.name,ic(Q),!1,void 0,Q.last_seen),ae}if(q.length>1||q.length===0&&se){const Q=q.map(pe=>pe.name||pe.public_key.slice(0,8)),ae=q.reduce((pe,xe)=>xe.last_seen&&(!pe||xe.last_seen>pe)?xe.last_seen:pe,null);let ce=`?${$.value.toLowerCase()}`,Ae=$.value.toUpperCase();if(c&&se&&Z){const pe=$.value.toLowerCase();Z.packetSource&&Yk(b.current,pe,Z.packetSource,Z.nextPrefix);const xe=b.current.get(pe);if(xe&&Qk(xe).shouldSplit&&Z.nextPrefix){const Oe=Z.nextPrefix.slice(0,2).toLowerCase();ce=`?${pe}:>${Oe}`,Ae=`${$.value.toUpperCase()}:>${Oe}`}}return O(ce,Ae,se?"repeater":"client",!0,Q.length>0?Q:void 0,ae),ce}}return null},[s,O,c]),J=N.useCallback(($,se,W)=>{var D;const te=[];let Z=null;if($.payloadType===bt.PayloadType.Advert&&$.advertPubkey){const H=K({type:"pubkey",value:$.advertPubkey},!1,!1,W);H&&(te.push(H),Z=H)}else if($.payloadType===bt.PayloadType.AnonRequest&&$.anonRequestPubkey){const H=K({type:"pubkey",value:$.anonRequestPubkey},!1,!1,W);H&&(te.push(H),Z=H)}else if($.payloadType===bt.PayloadType.TextMessage&&$.srcHash)if(W&&$.srcHash.toLowerCase()===W)te.push("self"),Z="self";else{const H=K({type:"prefix",value:$.srcHash},!1,u,W);H&&(te.push(H),Z=H)}else if($.payloadType===bt.PayloadType.GroupText){const H=$.groupTextSender||((D=se.decrypted_info)==null?void 0:D.sender);if(H){const q=K({type:"name",value:H},!1,!1,W);q&&(te.push(q),Z=q)}}for(let H=0;H<$.pathBytes.length;H++){const q=$.pathBytes[H],Q=$.pathBytes[H+1]||null,ae=K({type:"prefix",value:q},!0,l,W,{packetSource:Z,nextPrefix:Q});ae&&te.push(ae)}if($.payloadType===bt.PayloadType.TextMessage&&$.dstHash)if(W&&$.dstHash.toLowerCase()===W)te.push("self");else{const H=K({type:"prefix",value:$.dstHash},!1,u,W);H?te.push(H):te.push("self")}else te.length>0&&te.push("self");return te.length>0&&te[te.length-1]!=="self"&&te.push("self"),px(te)},[K,l,u]);N.useEffect(()=>{var Z;let $=0,se=0,W=!1;const te=((Z=i==null?void 0:i.public_key)==null?void 0:Z.slice(0,12).toLowerCase())||null;for(const D of n){if(k.current.has(D.id))continue;k.current.add(D.id),$++,k.current.size>1e3&&(k.current=new Set(Array.from(k.current).slice(-500)));const H=Zk(D.data);if(!H)continue;const q=J(H,D,te);if(q.length<2)continue;for(let Ae=0;Ae<q.length-1;Ae++)q[Ae]!==q[Ae+1]&&(G(q[Ae],q[Ae+1]),W=!0);const Q=qk(H,D),ae=Date.now(),ce=w.current.get(Q);if(ce&&ae<ce.expiresAt)ce.paths.push({nodes:q,snr:D.snr??null,timestamp:ae});else{B.current.has(Q)&&clearTimeout(B.current.get(Q));const Ae=T.current;w.current.set(Q,{key:Q,label:Wk(H.payloadType),paths:[{nodes:q,snr:D.snr??null,timestamp:ae}],firstSeen:ae,expiresAt:ae+Ae}),B.current.set(Q,setTimeout(()=>U(Q),Ae))}if(w.current.size>100){const Ae=Array.from(w.current.entries()).sort((pe,xe)=>pe[1].firstSeen-xe[1].firstSeen).slice(0,50);for(const[pe]of Ae)clearTimeout(B.current.get(pe)),B.current.delete(pe),w.current.delete(pe)}se++}W&&j(),$>0&&I(D=>({...D,processed:D.processed+$,animated:D.animated+se}))},[n,i,J,G,j,U]);const Y=N.useCallback(()=>{const $=M.current;if(!$)return;const se=x.width/2,W=x.height/2,te=Math.min(x.width,x.height)*.4;for(const Z of v.current.values()){if(Z.id==="self")Z.x=se,Z.y=W;else{const D=Math.random()*2*Math.PI,H=Math.random()*te;Z.x=se+H*Math.cos(D),Z.y=W+H*Math.sin(D)}Z.vx=0,Z.vy=0}$.alpha(1).restart()},[x]),ie=N.useCallback(()=>{const $=M.current;if(!$)return;const se=h,W=-5e3,te=.3,Z=.02,D=1e3,H=2e3,q=1e3,Q=performance.now(),ae=ce=>{const Ae=ce-Q;let pe,xe;if(Ae<D){const Be=Ae/D;pe=se+(W-se)*Be,xe=te+(Z-te)*Be}else if(Ae<D+H)pe=W,xe=Z;else if(Ae<D+H+q){const Be=(Ae-D-H)/q;pe=W+(se-W)*Be,xe=Z+(te-Z)*Be}else{$.force("charge",rc().strength(Be=>Be.id==="self"?se*6:se).distanceMax(500)),$.force("link",nc(Array.from(C.current.values())).id(Be=>Be.id).distance(80).strength(te)),$.alpha(.3).restart();return}$.force("charge",rc().strength(Be=>Be.id==="self"?pe*6:pe).distanceMax(500)),$.force("link",nc(Array.from(C.current.values())).id(Be=>Be.id).distance(80).strength(xe)),$.alpha(.5).restart(),requestAnimationFrame(ae)};requestAnimationFrame(ae)},[h]),ge=N.useCallback(()=>{for(const W of B.current.values())clearTimeout(W);B.current.clear(),w.current.clear(),k.current.clear(),b.current.clear(),P.current.length=0,C.current.clear();const $=v.current.get("self");v.current.clear(),$&&($.x=x.width/2,$.y=x.height/2,$.vx=0,$.vy=0,$.lastActivity=Date.now(),v.current.set("self",$));const se=M.current;se&&(se.nodes(Array.from(v.current.values())),se.force("link",nc([]).id(W=>W.id).distance(80).strength(.3)),se.alpha(.3).restart()),I({processed:0,animated:0,nodes:1,links:0})},[x]);return{nodes:v.current,links:C.current,particles:P.current,simulation:M.current,stats:F,randomizePositions:Y,expandContract:ie,clearAndReset:ge}}function Jk(n,s,i){n.strokeStyle=gn.link,n.lineWidth=2;for(const l of s){const{sourceId:u,targetId:c}=LA(l),h=i.get(u),d=i.get(c);(h==null?void 0:h.x)!=null&&(h==null?void 0:h.y)!=null&&(d==null?void 0:d.x)!=null&&(d==null?void 0:d.y)!=null&&(n.beginPath(),n.moveTo(h.x,h.y),n.lineTo(d.x,d.y),n.stroke())}}function eS(n,s,i,l){const u=[];for(const c of s){const h=i.get(c.fromNodeId),d=i.get(c.toNodeId),g=l.has(c.fromNodeId)&&l.has(c.toNodeId);if(c.progress+=c.speed,c.progress>1||(u.push(c),!g||!(h!=null&&h.x)||!(d!=null&&d.x)||h.y==null||d.y==null)||c.progress<0)continue;const m=c.progress,x=h.x+(d.x-h.x)*m,v=h.y+(d.y-h.y)*m;n.fillStyle=c.color+"40",n.beginPath(),n.arc(x,v,14,0,Math.PI*2),n.fill(),n.fillStyle=c.color,n.beginPath(),n.arc(x,v,10,0,Math.PI*2),n.fill(),n.fillStyle="#ffffff",n.font="bold 8px sans-serif",n.textAlign="center",n.textBaseline="middle",n.fillText(c.label,x,v)}return u}function tS(n,s,i){var l;for(const u of s){if(u.x==null||u.y==null)continue;const c=u.type==="self"?"":u.type==="repeater"?"":u.isAmbiguous?"":"",h=u.type==="self"?36:18;n.font=`${h}px sans-serif`,n.textAlign="center",n.textBaseline="middle",n.fillText(c,u.x,u.y);const d=u.isAmbiguous?u.id:u.name||(u.type==="self"?"Me":u.id.slice(0,8));if(n.font="11px sans-serif",n.textBaseline="top",n.fillStyle=u.isAmbiguous?gn.ambiguous:"#e5e7eb",n.fillText(d,u.x,u.y+h/2+4),u.isAmbiguous&&((l=u.ambiguousNames)!=null&&l.length)){n.font="9px sans-serif",n.fillStyle="#6b7280";let g=u.y+h/2+18;if(i===u.id)for(const m of u.ambiguousNames)n.fillText(m,u.x,g),g+=11;else u.ambiguousNames.length===1?n.fillText(u.ambiguousNames[0],u.x,g):n.fillText(`${u.ambiguousNames[0]} +${u.ambiguousNames.length-1} more`,u.x,g)}}}function mx({packets:n,contacts:s,config:i,fullScreen:l,onFullScreenChange:u,onClearPackets:c}){const h=N.useRef(null),d=N.useRef(null),[g,m]=N.useState({width:800,height:600}),[x,v]=N.useState(!0),[C,P]=N.useState(!1),[M,k]=N.useState(!1),[w,B]=N.useState(-200),[b,E]=N.useState(!1),[T,F]=N.useState(Ok),[I,j]=N.useState(!0),[O,G]=N.useState(2),[U,K]=N.useState(!1),[J,Y]=N.useState({x:0,y:0,scale:1}),ie=N.useRef(!1),ge=N.useRef({x:0,y:0}),$=N.useRef(null),[se,W]=N.useState(null),te=Xk({packets:n,contacts:s,config:i,showAmbiguousPaths:x,showAmbiguousNodes:C,splitAmbiguousByTraffic:M,chargeStrength:w,letEmDrift:I,particleSpeedMultiplier:O,observationWindowSec:T,dimensions:g});N.useEffect(()=>{const xe=()=>{if(d.current){const Oe=d.current.getBoundingClientRect();m({width:Oe.width,height:Oe.height})}};xe();const Be=new ResizeObserver(xe);return d.current&&Be.observe(d.current),()=>Be.disconnect()},[]);const Z=N.useCallback(()=>{const xe=h.current,Be=xe==null?void 0:xe.getContext("2d");if(!xe||!Be)return;const{width:Oe,height:Xe}=g,Ee=window.devicePixelRatio||1;xe.width=Oe*Ee,xe.height=Xe*Ee,xe.style.width=`${Oe}px`,xe.style.height=`${Xe}px`,Be.scale(Ee,Ee),Be.fillStyle=gn.background,Be.fillRect(0,0,Oe,Xe),Be.save(),Be.translate(Oe/2,Xe/2),Be.scale(J.scale,J.scale),Be.translate(J.x-Oe/2,J.y-Xe/2);const je=Date.now(),at=Array.from(te.nodes.values()),mt=new Set,ot=at.filter(Qe=>{if(Qe.type==="self"||Qe.type==="client")return mt.add(Qe.id),!0;if(b&&Qe.type==="repeater"){const rt=Qe.lastSeen?Qe.lastSeen*1e3:Qe.lastActivity;if(je-rt>jk)return!1}return mt.add(Qe.id),!0}),Ke=Array.from(te.links.values()).filter(Qe=>{const{sourceId:rt,targetId:He}=LA(Qe);return mt.has(rt)&&mt.has(He)});Jk(Be,Ke,te.nodes),te.particles.splice(0,te.particles.length,...eS(Be,te.particles,te.nodes,mt)),tS(Be,ot,se),Be.restore()},[g,J,te,se,b]);N.useEffect(()=>{let xe=!0;const Be=()=>{xe&&(Z(),requestAnimationFrame(Be))};return Be(),()=>{xe=!1}},[Z]);const D=N.useCallback((xe,Be)=>{const{width:Oe,height:Xe}=g,Ee=(xe-Oe/2)/J.scale-J.x+Oe/2,je=(Be-Xe/2)/J.scale-J.y+Xe/2;return{x:Ee,y:je}},[g,J]),H=N.useCallback((xe,Be)=>{for(const Oe of te.nodes.values())if(!(Oe.x==null||Oe.y==null)&&Math.hypot(xe-Oe.x,Be-Oe.y)<20)return Oe;return null},[te.nodes]),q=N.useCallback(xe=>{var je;const Be=h.current;if(!Be)return;const Oe=Be.getBoundingClientRect(),Xe=D(xe.clientX-Oe.left,xe.clientY-Oe.top),Ee=H(Xe.x,Xe.y);Ee?($.current=Ee,Ee.fx=Ee.x,Ee.fy=Ee.y,(je=te.simulation)==null||je.alpha(.3).restart()):ie.current=!0,ge.current={x:xe.clientX,y:xe.clientY}},[D,H,te.simulation]),Q=N.useCallback(xe=>{var at;const Be=h.current;if(!Be)return;const Oe=Be.getBoundingClientRect(),Xe=D(xe.clientX-Oe.left,xe.clientY-Oe.top);if(W(((at=H(Xe.x,Xe.y))==null?void 0:at.id)||null),$.current){$.current.fx=Xe.x,$.current.fy=Xe.y;return}if(!ie.current)return;const Ee=xe.clientX-ge.current.x,je=xe.clientY-ge.current.y;ge.current={x:xe.clientX,y:xe.clientY},Y(mt=>({...mt,x:mt.x+Ee/mt.scale,y:mt.y+je/mt.scale}))},[D,H]),ae=N.useCallback(()=>{$.current&&($.current.fx=null,$.current.fy=null,$.current=null),ie.current=!1},[]),ce=N.useCallback(()=>{$.current&&($.current.fx=null,$.current.fy=null,$.current=null),ie.current=!1,W(null)},[]),Ae=N.useCallback(xe=>{xe.preventDefault();const Be=xe.deltaY>0?1/1.1:1.1;Y(Oe=>({...Oe,scale:Math.min(Math.max(Oe.scale*Be,.1),5)}))},[]);N.useEffect(()=>{const xe=h.current;if(xe)return xe.addEventListener("wheel",Ae,{passive:!1}),()=>xe.removeEventListener("wheel",Ae)},[Ae]);const pe=()=>$.current?"grabbing":se?"pointer":"grab";return _.jsxs("div",{ref:d,className:"w-full h-full bg-background relative overflow-hidden",children:[_.jsx("canvas",{ref:h,className:"w-full h-full",style:{display:"block",cursor:pe()},onMouseDown:q,onMouseMove:Q,onMouseUp:ae,onMouseLeave:ce}),!U&&_.jsx("div",{className:"absolute bottom-4 left-4 bg-background/80 backdrop-blur-sm rounded-lg p-3 text-xs border border-border",children:_.jsxs("div",{className:"flex gap-6",children:[_.jsxs("div",{className:"flex flex-col gap-1.5",children:[_.jsx("div",{className:"text-muted-foreground font-medium mb-1",children:"Nodes"}),Hk.map(xe=>_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:xe.size,children:xe.emoji}),_.jsx("span",{children:xe.label})]},xe.label))]}),_.jsxs("div",{className:"flex flex-col gap-1.5",children:[_.jsx("div",{className:"text-muted-foreground font-medium mb-1",children:"Packets"}),Vk.map(xe=>_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center text-[8px] font-bold text-white",style:{backgroundColor:xe.color},children:xe.label}),_.jsx("span",{children:xe.description})]},xe.label))]})]})}),_.jsx("div",{className:"absolute top-4 right-4 bg-background/80 backdrop-blur-sm rounded-lg p-3 text-xs border border-border",children:_.jsxs("div",{className:"flex flex-col gap-2",children:[!U&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{children:["Nodes: ",te.stats.nodes]}),_.jsxs("div",{children:["Links: ",te.stats.links]}),_.jsxs("div",{className:"border-t border-border pt-2 mt-1 flex flex-col gap-2",children:[_.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[_.jsx(Fi,{checked:x,onCheckedChange:xe=>v(xe===!0)}),_.jsx("span",{title:"Show placeholder nodes for repeaters when the 1-byte prefix matches multiple contacts",children:"Ambiguous repeaters"})]}),_.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[_.jsx(Fi,{checked:C,onCheckedChange:xe=>P(xe===!0)}),_.jsx("span",{title:"Show placeholder nodes for senders/recipients when only a 1-byte prefix is known",children:"Ambiguous sender/recipient"})]}),_.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[_.jsx(Fi,{checked:M,onCheckedChange:xe=>k(xe===!0),disabled:!x}),_.jsx("span",{title:"Split ambiguous repeaters into separate nodes based on traffic patterns (prevnext). Helps identify colliding prefixes representing different physical nodes.",className:x?"":"text-muted-foreground",children:"Hueristically group repeaters by traffic pattern"})]}),_.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[_.jsx(Fi,{checked:b,onCheckedChange:xe=>E(xe===!0)}),_.jsx("span",{title:"Hide repeaters not heard within the last 48 hours",children:"Hide repeaters >48hrs heard"})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("label",{className:"text-muted-foreground",title:"How long to wait for duplicate packets via different paths before animating",children:"Observation window:"}),_.jsx("input",{type:"number",min:"1",max:"60",value:T,onChange:xe=>F(Math.max(1,Math.min(60,parseInt(xe.target.value)||1))),className:"w-12 px-1 py-0.5 bg-background border border-border rounded text-xs text-center"}),_.jsx("span",{className:"text-muted-foreground",children:"sec"})]}),_.jsxs("div",{className:"border-t border-border pt-2 mt-1 flex flex-col gap-2",children:[_.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[_.jsx(Fi,{checked:I,onCheckedChange:xe=>j(xe===!0)}),_.jsx("span",{title:"When enabled, the graph continuously reorganizes itself into a better layout",children:"Let 'em drift"})]}),_.jsxs("div",{className:"flex flex-col gap-1 mt-1",children:[_.jsxs("label",{className:"text-muted-foreground",title:"How strongly nodes repel each other. Higher values spread nodes out more.",children:["Repulsion: ",Math.abs(w)]}),_.jsx("input",{type:"range",min:"50",max:"2500",value:Math.abs(w),onChange:xe=>B(-parseInt(xe.target.value)),className:"w-full h-2 bg-border rounded-lg appearance-none cursor-pointer accent-primary"})]}),_.jsxs("div",{className:"flex flex-col gap-1 mt-1",children:[_.jsxs("label",{className:"text-muted-foreground",title:"How fast particles travel along links. Higher values make packets move faster.",children:["Packet speed: ",O,"x"]}),_.jsx("input",{type:"range",min:"1",max:"5",step:"0.5",value:O,onChange:xe=>G(parseFloat(xe.target.value)),className:"w-full h-2 bg-border rounded-lg appearance-none cursor-pointer accent-primary"})]})]}),_.jsx("button",{onClick:te.randomizePositions,className:"mt-2 px-3 py-1.5 bg-primary/20 hover:bg-primary/30 text-primary rounded text-xs transition-colors",title:"Randomize node positions and let the simulation settle into a new layout",children:"Shuffle layout"}),_.jsx("button",{onClick:te.expandContract,className:"mt-1 px-3 py-1.5 bg-primary/20 hover:bg-primary/30 text-primary rounded text-xs transition-colors",title:"Expand nodes apart then contract back - can help untangle the graph",children:"Oooh Big Stretch!"}),_.jsx("button",{onClick:()=>{te.clearAndReset(),c==null||c()},className:"mt-1 px-3 py-1.5 bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-500 rounded text-xs transition-colors",title:"Clear all nodes, links, and packets - reset to initial state",children:"Clear & Reset"})]})]}),_.jsxs("div",{className:U?"":"border-t border-border pt-2 mt-1 flex flex-col gap-2",children:[_.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[_.jsx(Fi,{checked:U,onCheckedChange:xe=>K(xe===!0)}),_.jsx("span",{title:"Hide legends and controls for a cleaner view",children:"Hide UI"})]}),u&&_.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[_.jsx(Fi,{checked:l,onCheckedChange:xe=>u(xe===!0)}),_.jsx("span",{title:"Hide the packet feed panel",children:"Full screen"})]})]})]})})]})}function nS({packets:n,contacts:s,config:i,onClearPackets:l}){const[u,c]=N.useState(!1);return _.jsxs("div",{className:"flex flex-col h-full",children:[_.jsx("div",{className:"flex justify-between items-center px-4 py-3 border-b border-border font-medium text-lg",children:_.jsx("span",{children:"Mesh Visualizer"})}),_.jsx("div",{className:"flex-1 overflow-hidden md:hidden",children:_.jsxs(J0,{defaultValue:"visualizer",className:"h-full flex flex-col",children:[_.jsxs(yd,{className:"mx-4 mt-2 grid grid-cols-2",children:[_.jsx(dr,{value:"visualizer",children:"Visualizer"}),_.jsx(dr,{value:"packets",children:"Packet Feed"})]}),_.jsx(fr,{value:"visualizer",className:"flex-1 m-0 overflow-hidden",children:_.jsx(mx,{packets:n,contacts:s,config:i,onClearPackets:l})}),_.jsx(fr,{value:"packets",className:"flex-1 m-0 overflow-hidden",children:_.jsx(R0,{packets:n})})]})}),_.jsxs("div",{className:"hidden md:flex flex-1 overflow-hidden",children:[_.jsx("div",{className:pt("overflow-hidden transition-all duration-200",u?"flex-1":"flex-1 border-r border-border"),children:_.jsx(mx,{packets:n,contacts:s,config:i,fullScreen:u,onFullScreenChange:c,onClearPackets:l})}),_.jsx("div",{className:pt("overflow-hidden transition-all duration-200",u?"w-0":"w-[31rem] lg:w-[38rem]"),children:_.jsxs("div",{className:"h-full flex flex-col",children:[_.jsx("div",{className:"px-3 py-2 border-b border-border text-sm font-medium text-muted-foreground",children:"Packet Feed"}),_.jsx("div",{className:"flex-1 overflow-hidden",children:_.jsx(R0,{packets:n})})]})})]})]})}const rS="modulepreload",iS=function(n){return"/"+n},gx={},oS=function(s,i,l){let u=Promise.resolve();if(i&&i.length>0){let h=function(m){return Promise.all(m.map(x=>Promise.resolve(x).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),g=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));u=h(i.map(m=>{if(m=iS(m),m in gx)return;gx[m]=!0;const x=m.endsWith(".css"),v=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${v}`))return;const C=document.createElement("link");if(C.rel=x?"stylesheet":rS,x||(C.as="script"),C.crossOrigin="",C.href=m,g&&C.setAttribute("nonce",g),document.head.appendChild(C),x)return new Promise((P,M)=>{C.addEventListener("load",P),C.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${m}`)))})}))}function c(h){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=h,window.dispatchEvent(d),!d.defaultPrevented)throw h}return u.then(h=>{for(const d of h||[])d.status==="rejected"&&c(d.reason);return s().catch(c)})};var sS=Tl();const MA=ls(sS);var Gc={exports:{}},aS=Gc.exports,xx;function lS(){return xx||(xx=1,(function(n,s){(function(i,l,u){n.exports=l(_t(),Tl(),bd())})(aS,function(i){return i.HmacSHA256})})(Gc)),Gc.exports}var uS=lS();const cS=ls(uS);var $c={exports:{}},dS=$c.exports,vx;function fS(){return vx||(vx=1,(function(n,s){(function(i,l){n.exports=l(_t())})(dS,function(i){return i.enc.Hex})})($c)),$c.exports}var hS=fS();const ra=ls(hS),IA="abcdefghijklmnopqrstuvwxyz0123456789",es=IA.length,OA=IA+"-",M0="[[public room]]",Kc="8b3387e9c5cdea6ac9e5edbaa115cd72",I0=720*60*60;function pS(n){if(!n||n.length===0)return null;const s=n.length;let i=0,l=1;for(let u=0;u<s;u++){const c=n[u],h=OA.indexOf(c);if(h===-1)return null;const d=u===0,g=u===s-1,m=d||g?36:37;if((d||g)&&h===36)return null;i+=h*l,l*=m}return{length:s,index:i}}function ns(n,s){if(n<=0)return null;let i="",l=s,u=!1;for(let c=0;c<n;c++){const h=c===0,d=c===n-1,g=h||d?36:37,m=l%g;l=Math.floor(l/g);const x=m===36;if(x&&u)return null;u=x,i+=OA[m]}return i}function O0(n){return n===M0?Kc:MA(n).toString(ra).substring(0,32)}function j0(n){return MA(ra.parse(n)).toString(ra).substring(0,2)}function jA(n,s,i){const l=i.padEnd(64,"0");return cS(ra.parse(n),ra.parse(l)).toString(ra).substring(0,4).toLowerCase()===s.toLowerCase()}function yl(n){if(n===1)return es;if(n===2)return es*es;let s=es,i=1;for(let u=2;u<=n-2;u++){const c=(s+i)*es,h=s;s=c,i=h}const l=n>2?s+i:1;return es*l*es}function mS(n,s=I0,i){const l=Math.floor(Date.now()/1e3);return n<=l&&n>=l-s}function gS(n){return!n.includes("")}class Pd{constructor(){this.device=null,this.pipeline=null,this.bindGroupLayout=null,this.paramsBuffer=null,this.matchCountBuffer=null,this.matchIndicesBuffer=null,this.ciphertextBuffer=null,this.ciphertextBufferSize=0,this.matchCountReadBuffers=[null,null],this.matchIndicesReadBuffers=[null,null],this.currentReadBufferIndex=0,this.bindGroup=null,this.bindGroupDirty=!0,this.shaderCode=`
// SHA256 round constants
const K: array<u32, 64> = array<u32, 64>(
  0x428a2f98u, 0x71374491u, 0xb5c0fbcfu, 0xe9b5dba5u, 0x3956c25bu, 0x59f111f1u, 0x923f82a4u, 0xab1c5ed5u,
  0xd807aa98u, 0x12835b01u, 0x243185beu, 0x550c7dc3u, 0x72be5d74u, 0x80deb1feu, 0x9bdc06a7u, 0xc19bf174u,
  0xe49b69c1u, 0xefbe4786u, 0x0fc19dc6u, 0x240ca1ccu, 0x2de92c6fu, 0x4a7484aau, 0x5cb0a9dcu, 0x76f988dau,
  0x983e5152u, 0xa831c66du, 0xb00327c8u, 0xbf597fc7u, 0xc6e00bf3u, 0xd5a79147u, 0x06ca6351u, 0x14292967u,
  0x27b70a85u, 0x2e1b2138u, 0x4d2c6dfcu, 0x53380d13u, 0x650a7354u, 0x766a0abbu, 0x81c2c92eu, 0x92722c85u,
  0xa2bfe8a1u, 0xa81a664bu, 0xc24b8b70u, 0xc76c51a3u, 0xd192e819u, 0xd6990624u, 0xf40e3585u, 0x106aa070u,
  0x19a4c116u, 0x1e376c08u, 0x2748774cu, 0x34b0bcb5u, 0x391c0cb3u, 0x4ed8aa4au, 0x5b9cca4fu, 0x682e6ff3u,
  0x748f82eeu, 0x78a5636fu, 0x84c87814u, 0x8cc70208u, 0x90befffau, 0xa4506cebu, 0xbef9a3f7u, 0xc67178f2u
);

// Character lookup table (a-z = 0-25, 0-9 = 26-35, dash = 36)
const CHARS: array<u32, 37> = array<u32, 37>(
  0x61u, 0x62u, 0x63u, 0x64u, 0x65u, 0x66u, 0x67u, 0x68u, 0x69u, 0x6au, // a-j
  0x6bu, 0x6cu, 0x6du, 0x6eu, 0x6fu, 0x70u, 0x71u, 0x72u, 0x73u, 0x74u, // k-t
  0x75u, 0x76u, 0x77u, 0x78u, 0x79u, 0x7au,                             // u-z
  0x30u, 0x31u, 0x32u, 0x33u, 0x34u, 0x35u, 0x36u, 0x37u, 0x38u, 0x39u, // 0-9
  0x2du                                                                  // dash
);

struct Params {
  target_channel_hash: u32,
  batch_offset: u32,
  name_length: u32,
  batch_size: u32,
  target_mac: u32,           // First 2 bytes of target MAC (in high 16 bits)
  ciphertext_words: u32,     // Number of 32-bit words in ciphertext
  ciphertext_len_bits: u32,  // Length of ciphertext in bits
  verify_mac: u32,           // 1 to verify MAC, 0 to skip
}

@group(0) @binding(0) var<uniform> params: Params;
@group(0) @binding(1) var<storage, read_write> match_count: atomic<u32>;
@group(0) @binding(2) var<storage, read_write> match_indices: array<u32>;
@group(0) @binding(3) var<storage, read> ciphertext: array<u32>; // Ciphertext data

fn rotr(x: u32, n: u32) -> u32 {
  return (x >> n) | (x << (32u - n));
}

fn ch(x: u32, y: u32, z: u32) -> u32 {
  return (x & y) ^ (~x & z);
}

fn maj(x: u32, y: u32, z: u32) -> u32 {
  return (x & y) ^ (x & z) ^ (y & z);
}

fn sigma0(x: u32) -> u32 {
  return rotr(x, 2u) ^ rotr(x, 13u) ^ rotr(x, 22u);
}

fn sigma1(x: u32) -> u32 {
  return rotr(x, 6u) ^ rotr(x, 11u) ^ rotr(x, 25u);
}

fn gamma0(x: u32) -> u32 {
  return rotr(x, 7u) ^ rotr(x, 18u) ^ (x >> 3u);
}

fn gamma1(x: u32) -> u32 {
  return rotr(x, 17u) ^ rotr(x, 19u) ^ (x >> 10u);
}

// Convert index to room name bytes, returns the hash as a u32 for the first byte check
fn index_to_room_name(idx: u32, length: u32, msg: ptr<function, array<u32, 16>>) -> bool {
  // Message starts with '#' (0x23)
  var byte_pos = 0u;
  var word_idx = 0u;
  var current_word = 0x23000000u; // '#' in big-endian position 0
  byte_pos = 1u;

  var remaining = idx;
  var prev_was_dash = false;

  // Generate room name from index
  for (var i = 0u; i < length; i++) {
    let char_count = select(37u, 36u, i == 0u || i == length - 1u); // no dash at start/end
    var char_idx = remaining % char_count;
    remaining = remaining / char_count;

    // Check for consecutive dashes (invalid)
    let is_dash = char_idx == 36u && i > 0u && i < length - 1u;
    if (is_dash && prev_was_dash) {
      return false; // Invalid: consecutive dashes
    }
    prev_was_dash = is_dash;

    // Map char index to actual character
    let c = CHARS[char_idx];

    // Pack byte into current word (big-endian)
    let shift = (3u - byte_pos % 4u) * 8u;
    if (byte_pos % 4u == 0u && byte_pos > 0u) {
      (*msg)[word_idx] = current_word;
      word_idx = word_idx + 1u;
      current_word = 0u;
    }
    current_word = current_word | (c << shift);
    byte_pos = byte_pos + 1u;
  }

  // Add padding: 0x80 followed by zeros, then length in bits
  let msg_len_bits = (length + 1u) * 8u; // +1 for '#'

  // Add 0x80 padding byte
  let shift = (3u - byte_pos % 4u) * 8u;
  if (byte_pos % 4u == 0u) {
    (*msg)[word_idx] = current_word;
    word_idx = word_idx + 1u;
    current_word = 0x80000000u;
  } else {
    current_word = current_word | (0x80u << shift);
  }
  byte_pos = byte_pos + 1u;

  // Store current word
  if (byte_pos % 4u == 0u || word_idx < 14u) {
    (*msg)[word_idx] = current_word;
    word_idx = word_idx + 1u;
  }

  // Zero-fill until word 14
  for (var i = word_idx; i < 14u; i++) {
    (*msg)[i] = 0u;
  }

  // Length in bits (64-bit, but we only use lower 32 bits for short messages)
  (*msg)[14u] = 0u;
  (*msg)[15u] = msg_len_bits;

  return true;
}

fn sha256_block(msg: ptr<function, array<u32, 16>>) -> array<u32, 8> {
  // Initialize hash values
  var h: array<u32, 8> = array<u32, 8>(
    0x6a09e667u, 0xbb67ae85u, 0x3c6ef372u, 0xa54ff53au,
    0x510e527fu, 0x9b05688cu, 0x1f83d9abu, 0x5be0cd19u
  );

  // Message schedule
  var w: array<u32, 64>;
  for (var i = 0u; i < 16u; i++) {
    w[i] = (*msg)[i];
  }
  for (var i = 16u; i < 64u; i++) {
    w[i] = gamma1(w[i-2u]) + w[i-7u] + gamma0(w[i-15u]) + w[i-16u];
  }

  // Compression
  var a = h[0]; var b = h[1]; var c = h[2]; var d = h[3];
  var e = h[4]; var f = h[5]; var g = h[6]; var hh = h[7];

  for (var i = 0u; i < 64u; i++) {
    let t1 = hh + sigma1(e) + ch(e, f, g) + K[i] + w[i];
    let t2 = sigma0(a) + maj(a, b, c);
    hh = g; g = f; f = e; e = d + t1;
    d = c; c = b; b = a; a = t1 + t2;
  }

  h[0] = h[0] + a; h[1] = h[1] + b; h[2] = h[2] + c; h[3] = h[3] + d;
  h[4] = h[4] + e; h[5] = h[5] + f; h[6] = h[6] + g; h[7] = h[7] + hh;

  return h;
}

// Compute SHA256 of the key (16 bytes) to get channel hash
fn sha256_key(key: array<u32, 4>) -> u32 {
  var msg: array<u32, 16>;

  // Key bytes (16 bytes = 4 words)
  msg[0] = key[0];
  msg[1] = key[1];
  msg[2] = key[2];
  msg[3] = key[3];

  // Padding: 0x80 followed by zeros
  msg[4] = 0x80000000u;
  for (var i = 5u; i < 14u; i++) {
    msg[i] = 0u;
  }

  // Length: 128 bits
  msg[14] = 0u;
  msg[15] = 128u;

  let hash = sha256_block(&msg);

  // Return first byte of hash (big-endian)
  return hash[0] >> 24u;
}

// HMAC-SHA256 for MAC verification
// Key is 16 bytes (4 words), padded to 32 bytes with zeros for MeshCore
// Returns first 2 bytes of HMAC (as u32 in high 16 bits)
fn hmac_sha256_mac(key: array<u32, 4>, ciphertext_len: u32) -> u32 {
  // HMAC: H((K' ^ opad) || H((K' ^ ipad) || message))
  // K' is 64 bytes (32 bytes key + 32 bytes zero padding for MeshCore, then padded to 64)
  // ipad = 0x36 repeated, opad = 0x5c repeated

  // Build padded key (64 bytes = 16 words)
  // MeshCore uses 32-byte secret: 16-byte key + 16 zero bytes
  var k_pad: array<u32, 16>;
  k_pad[0] = key[0];
  k_pad[1] = key[1];
  k_pad[2] = key[2];
  k_pad[3] = key[3];
  for (var i = 4u; i < 16u; i++) {
    k_pad[i] = 0u;
  }

  // Inner hash: SHA256((K' ^ ipad) || message)
  // First block: K' ^ ipad (64 bytes)
  var inner_block: array<u32, 16>;
  for (var i = 0u; i < 16u; i++) {
    inner_block[i] = k_pad[i] ^ 0x36363636u;
  }

  // Initialize hash state with first block
  var h: array<u32, 8> = sha256_block(&inner_block);

  // Process ciphertext blocks (continuing from h state)
  let ciphertext_words = params.ciphertext_words;
  var word_idx = 0u;

  // Process full 64-byte blocks of ciphertext
  while (word_idx + 16u <= ciphertext_words) {
    var block: array<u32, 16>;
    for (var i = 0u; i < 16u; i++) {
      block[i] = ciphertext[word_idx + i];
    }
    h = sha256_block_continue(&block, h);
    word_idx = word_idx + 16u;
  }

  // Final block with remaining ciphertext + padding
  var final_block: array<u32, 16>;
  var remaining = ciphertext_words - word_idx;
  for (var i = 0u; i < 16u; i++) {
    if (i < remaining) {
      final_block[i] = ciphertext[word_idx + i];
    } else if (i == remaining) {
      // Add 0x80 padding
      final_block[i] = 0x80000000u;
    } else {
      final_block[i] = 0u;
    }
  }

  // Add length (64 bytes of ipad + ciphertext length)
  let total_bits = 512u + params.ciphertext_len_bits;
  if (remaining < 14u) {
    final_block[14] = 0u;
    final_block[15] = total_bits;
    h = sha256_block_continue(&final_block, h);
  } else {
    // Need extra block for length
    h = sha256_block_continue(&final_block, h);
    var len_block: array<u32, 16>;
    for (var i = 0u; i < 14u; i++) {
      len_block[i] = 0u;
    }
    len_block[14] = 0u;
    len_block[15] = total_bits;
    h = sha256_block_continue(&len_block, h);
  }

  let inner_hash = h;

  // Outer hash: SHA256((K' ^ opad) || inner_hash)
  var outer_block: array<u32, 16>;
  for (var i = 0u; i < 16u; i++) {
    outer_block[i] = k_pad[i] ^ 0x5c5c5c5cu;
  }
  h = sha256_block(&outer_block);

  // Second block: inner_hash (32 bytes) + padding
  var hash_block: array<u32, 16>;
  for (var i = 0u; i < 8u; i++) {
    hash_block[i] = inner_hash[i];
  }
  hash_block[8] = 0x80000000u;
  for (var i = 9u; i < 14u; i++) {
    hash_block[i] = 0u;
  }
  hash_block[14] = 0u;
  hash_block[15] = 512u + 256u; // 64 bytes opad + 32 bytes inner hash

  h = sha256_block_continue(&hash_block, h);

  // Return first 2 bytes (high 16 bits of first word)
  return h[0] & 0xFFFF0000u;
}

// SHA256 block computation continuing from existing state
fn sha256_block_continue(msg: ptr<function, array<u32, 16>>, h_in: array<u32, 8>) -> array<u32, 8> {
  var h = h_in;

  // Message schedule
  var w: array<u32, 64>;
  for (var i = 0u; i < 16u; i++) {
    w[i] = (*msg)[i];
  }
  for (var i = 16u; i < 64u; i++) {
    w[i] = gamma1(w[i-2u]) + w[i-7u] + gamma0(w[i-15u]) + w[i-16u];
  }

  // Compression
  var a = h[0]; var b = h[1]; var c = h[2]; var d = h[3];
  var e = h[4]; var f = h[5]; var g = h[6]; var hh = h[7];

  for (var i = 0u; i < 64u; i++) {
    let t1 = hh + sigma1(e) + ch(e, f, g) + K[i] + w[i];
    let t2 = sigma0(a) + maj(a, b, c);
    hh = g; g = f; f = e; e = d + t1;
    d = c; c = b; b = a; a = t1 + t2;
  }

  h[0] = h[0] + a; h[1] = h[1] + b; h[2] = h[2] + c; h[3] = h[3] + d;
  h[4] = h[4] + e; h[5] = h[5] + f; h[6] = h[6] + g; h[7] = h[7] + hh;

  return h;
}

// Process a single candidate and record match if found
fn process_candidate(name_idx: u32) {
  // Generate message for this room name
  var msg: array<u32, 16>;
  let valid = index_to_room_name(name_idx, params.name_length, &msg);

  if (!valid) {
    return;
  }

  // Compute SHA256("#roomname") - this gives us the key
  let key_hash = sha256_block(&msg);

  // Take first 16 bytes (4 words) as the key
  var key: array<u32, 4>;
  key[0] = key_hash[0];
  key[1] = key_hash[1];
  key[2] = key_hash[2];
  key[3] = key_hash[3];

  // Compute SHA256(key) to get channel hash
  let channel_hash = sha256_key(key);

  // Check if channel hash matches target
  if (channel_hash != params.target_channel_hash) {
    return;
  }

  // Channel hash matches - verify MAC if enabled
  if (params.verify_mac == 1u) {
    let computed_mac = hmac_sha256_mac(key, params.ciphertext_len_bits);
    if (computed_mac != params.target_mac) {
      return;
    }
  }

  // Found a match - record the index
  let match_idx = atomicAdd(&match_count, 1u);
  if (match_idx < 1024u) { // Limit stored matches
    match_indices[match_idx] = name_idx;
  }
}

// Each thread processes 32 candidates to amortize thread overhead
const CANDIDATES_PER_THREAD: u32 = 32u;

@compute @workgroup_size(256)
fn main(@builtin(global_invocation_id) global_id: vec3<u32>) {
  let base_idx = global_id.x * CANDIDATES_PER_THREAD;

  for (var i = 0u; i < CANDIDATES_PER_THREAD; i++) {
    let idx = base_idx + i;
    if (idx >= params.batch_size) {
      return;
    }
    let name_idx = params.batch_offset + idx;
    process_candidate(name_idx);
  }
}
`}async init(){if(!navigator.gpu)return console.warn("WebGPU not supported"),!1;try{const s=await navigator.gpu.requestAdapter();if(!s)return console.warn("No GPU adapter found"),!1;this.device=await s.requestDevice(),this.bindGroupLayout=this.device.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}}]}),this.paramsBuffer=this.device.createBuffer({size:32,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.matchCountBuffer=this.device.createBuffer({size:4,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST}),this.matchIndicesBuffer=this.device.createBuffer({size:1024*4,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC});for(let u=0;u<2;u++)this.matchCountReadBuffers[u]=this.device.createBuffer({size:4,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST}),this.matchIndicesReadBuffers[u]=this.device.createBuffer({size:1024*4,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST});const i=this.device.createShaderModule({code:this.shaderCode}),l=this.device.createPipelineLayout({bindGroupLayouts:[this.bindGroupLayout]});return this.pipeline=this.device.createComputePipeline({layout:l,compute:{module:i,entryPoint:"main"}}),!0}catch(s){return console.error("WebGPU initialization failed:",s),!1}}isAvailable(){return this.device!==null&&this.pipeline!==null}indexToRoomName(s,i){return ns(i,s)}countNamesForLength(s){return yl(s)}async runBatch(s,i,l,u,c,h){if(!this.device||!this.pipeline||!this.bindGroupLayout||!this.paramsBuffer||!this.matchCountBuffer||!this.matchIndicesBuffer||!this.matchCountReadBuffers[0]||!this.matchCountReadBuffers[1]||!this.matchIndicesReadBuffers[0]||!this.matchIndicesReadBuffers[1])throw new Error("GPU not initialized");const d=this.currentReadBufferIndex;this.currentReadBufferIndex=1-this.currentReadBufferIndex;const g=this.matchCountReadBuffers[d],m=this.matchIndicesReadBuffers[d],x=c&&h?1:0;let v,C=0,P=0;if(x){const F=new Uint8Array(c.length/2);for(let U=0;U<F.length;U++)F[U]=parseInt(c.substr(U*2,2),16);C=F.length*8;const I=Math.ceil(F.length/4)*4,j=new Uint8Array(I);j.set(F),v=new Uint32Array(I/4);for(let U=0;U<v.length;U++)v[U]=j[U*4]<<24|j[U*4+1]<<16|j[U*4+2]<<8|j[U*4+3];const O=parseInt(h.substr(0,2),16),G=parseInt(h.substr(2,2),16);P=O<<24|G<<16}else v=new Uint32Array([0]);const M=Math.max(v.length*4,4);(!this.ciphertextBuffer||this.ciphertextBufferSize<M)&&(this.ciphertextBuffer&&this.ciphertextBuffer.destroy(),this.ciphertextBuffer=this.device.createBuffer({size:M,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST}),this.ciphertextBufferSize=M,this.bindGroupDirty=!0);const k=new Uint32Array([s,l,i,u,P,v.length,C,x]);this.device.queue.writeBuffer(this.paramsBuffer,0,k),this.device.queue.writeBuffer(this.ciphertextBuffer,0,v),this.device.queue.writeBuffer(this.matchCountBuffer,0,Pd.ZERO_DATA),(this.bindGroupDirty||!this.bindGroup)&&(this.bindGroup=this.device.createBindGroup({layout:this.bindGroupLayout,entries:[{binding:0,resource:{buffer:this.paramsBuffer}},{binding:1,resource:{buffer:this.matchCountBuffer}},{binding:2,resource:{buffer:this.matchIndicesBuffer}},{binding:3,resource:{buffer:this.ciphertextBuffer}}]}),this.bindGroupDirty=!1);const w=this.device.createCommandEncoder(),B=w.beginComputePass();B.setPipeline(this.pipeline),B.setBindGroup(0,this.bindGroup),B.dispatchWorkgroups(Math.ceil(u/(256*32))),B.end(),w.copyBufferToBuffer(this.matchCountBuffer,0,g,0,4),w.copyBufferToBuffer(this.matchIndicesBuffer,0,m,0,1024*4),this.device.queue.submit([w.finish()]),await g.mapAsync(GPUMapMode.READ);const E=new Uint32Array(g.getMappedRange())[0];g.unmap();const T=[];if(E>0){await m.mapAsync(GPUMapMode.READ);const F=new Uint32Array(m.getMappedRange());for(let I=0;I<Math.min(E,1024);I++)T.push(F[I]);m.unmap()}return T}destroy(){var s,i,l,u,c,h,d,g;(s=this.paramsBuffer)==null||s.destroy(),(i=this.matchCountBuffer)==null||i.destroy(),(l=this.matchIndicesBuffer)==null||l.destroy(),(u=this.ciphertextBuffer)==null||u.destroy(),(c=this.matchCountReadBuffers[0])==null||c.destroy(),(h=this.matchCountReadBuffers[1])==null||h.destroy(),(d=this.matchIndicesReadBuffers[0])==null||d.destroy(),(g=this.matchIndicesReadBuffers[1])==null||g.destroy(),this.paramsBuffer=null,this.matchCountBuffer=null,this.matchIndicesBuffer=null,this.ciphertextBuffer=null,this.ciphertextBufferSize=0,this.matchCountReadBuffers=[null,null],this.matchIndicesReadBuffers=[null,null],this.currentReadBufferIndex=0,this.bindGroup=null,this.bindGroupDirty=!0,this.device&&(this.device.destroy(),this.device=null),this.pipeline=null,this.bindGroupLayout=null}}Pd.ZERO_DATA=new Uint32Array([0]);function xS(){return typeof navigator<"u"&&"gpu"in navigator}class Ax{runBatch(s,i,l,u,c,h){const d=[],g=s.toString(16).padStart(2,"0"),m=!!(c&&h);for(let x=0;x<u;x++){const v=l+x,C=ns(i,v);if(!C)continue;const P=O0("#"+C);j0(P)===g&&(m&&!jA(c,h,P)||d.push(v))}return d}destroy(){}}const vS=/^[a-z0-9-]+$/,AS=/^[a-z0-9].*[a-z0-9]$|^[a-z0-9]$/,yS=/--/;function yx(n){return!(!n||n.length===0||!vS.test(n)||n.length>1&&!AS.test(n)||yS.test(n))}class _S{constructor(){this.gpuInstance=null,this.cpuInstance=null,this.wordlist=[],this.abortFlag=!1,this.useTimestampFilter=!0,this.useUtf8Filter=!0,this.useSenderFilter=!0,this.validSeconds=I0,this.useCpu=!1}async loadWordlist(s){const i=await fetch(s);if(!i.ok)throw new Error(`Failed to load wordlist: ${i.status} ${i.statusText}`);const u=(await i.text()).split(`
`).map(c=>c.trim().toLowerCase()).filter(c=>c.length>0);this.wordlist=u.filter(yx)}setWordlist(s){this.wordlist=s.map(i=>i.trim().toLowerCase()).filter(yx)}abort(){this.abortFlag=!0}isGpuAvailable(){return xS()}async decodePacket(s){var l;const i=s.trim().replace(/\s+/g,"").replace(/^0x/i,"");if(!i||!/^[0-9a-fA-F]+$/.test(i))return null;try{const c=(l=(await bt.MeshCorePacketDecoder.decodeWithVerification(i,{})).payload)==null?void 0:l.decoded;return!(c!=null&&c.channelHash)||!(c!=null&&c.ciphertext)||!(c!=null&&c.cipherMac)?null:{channelHash:c.channelHash,ciphertext:c.ciphertext,cipherMac:c.cipherMac,isGroupText:!0}}catch{return null}}async crack(s,i,l){this.abortFlag=!1,this.useTimestampFilter=(i==null?void 0:i.useTimestampFilter)??!0,this.useUtf8Filter=(i==null?void 0:i.useUtf8Filter)??!0,this.useSenderFilter=(i==null?void 0:i.useSenderFilter)??!0,this.validSeconds=(i==null?void 0:i.validSeconds)??I0,this.useCpu=(i==null?void 0:i.forceCpu)??!1;const u=(i==null?void 0:i.maxLength)??8,c=(i==null?void 0:i.startingLength)??1,h=(i==null?void 0:i.useDictionary)??!0,d=(i==null?void 0:i.startFromType)??"bruteforce",g=s.toLowerCase(),m=await this.decodePacket(g);if(!m)return{found:!1,error:"Invalid packet or not a GroupText packet"};const{channelHash:x,ciphertext:v,cipherMac:C}=m,P=parseInt(x,16);this.useCpu?this.cpuInstance||(this.cpuInstance=new Ax):this.gpuInstance||(this.gpuInstance=new Pd,await this.gpuInstance.init()||(this.useCpu=!0,this.cpuInstance=new Ax));const M=performance.now();let k=0,w=performance.now(),B=c,b=0,E=0,T=!1;if(i!=null&&i.startFrom){const Y=i.startFrom.toLowerCase();if(d==="dictionary"){const ie=this.wordlist.indexOf(Y);ie>=0&&(E=ie+1)}else{T=!0;const ie=pS(Y);ie&&(B=Math.max(c,ie.length),b=ie.index+1,b>=yl(B)&&(B++,b=0))}}let F=0;h&&!T&&this.wordlist.length>0&&(F+=this.wordlist.length-E);for(let Y=B;Y<=u;Y++)F+=yl(Y);F-=b;const I=(Y,ie,ge)=>{if(!l)return;const se=(performance.now()-M)/1e3,W=se>0?Math.round(k/se):0,te=F-k,Z=W>0?te/W:0;l({checked:k,total:F,percent:F>0?Math.min(100,k/F*100):0,rateKeysPerSec:W,etaSeconds:Z,elapsedSeconds:se,currentLength:ie,currentPosition:ge,phase:Y})},j=Y=>{if(!jA(v,C,Y))return{valid:!1};const ie=bt.ChannelCrypto.decryptGroupTextMessage(v,C,Y);return!ie.success||!ie.data?{valid:!1}:this.useTimestampFilter&&!mS(ie.data.timestamp,this.validSeconds)?{valid:!1}:this.useUtf8Filter&&!gS(ie.data.message)?{valid:!1}:this.useSenderFilter&&!ie.data.sender?{valid:!1}:{valid:!0,message:ie.data.sender?`${ie.data.sender}: ${ie.data.message}`:ie.data.message}};if(!T&&E===0&&B===c&&b===0){I("public-key",0,M0);const Y=j0(Kc);if(x===Y){const ie=j(Kc);if(ie.valid)return{found:!0,roomName:M0,key:Kc,decryptedMessage:ie.message}}}if(h&&!T&&this.wordlist.length>0)for(let Y=E;Y<this.wordlist.length;Y++){if(this.abortFlag)return{found:!1,aborted:!0,resumeFrom:this.wordlist[Y],resumeType:"dictionary"};const ie=this.wordlist[Y],ge=O0("#"+ie),$=j0(ge);if(parseInt($,16)===P){const W=j(ge);if(W.valid)return{found:!0,roomName:ie,key:ge,decryptedMessage:W.message,resumeFrom:ie,resumeType:"dictionary"}}k++;const se=performance.now();se-w>=200&&(I("wordlist",ie.length,ie),w=se,await new Promise(W=>setTimeout(W,0)))}const O=this.useCpu?1024:32768,G=(i==null?void 0:i.gpuDispatchMs)??1e3;let U=O,K=!1;for(let Y=B;Y<=u;Y++){if(this.abortFlag)return{found:!1,aborted:!0,resumeFrom:ns(Y,0)||void 0,resumeType:"bruteforce"};const ie=yl(Y);let ge=Y===B?b:0;for(;ge<ie;){if(this.abortFlag)return{found:!1,aborted:!0,resumeFrom:ns(Y,ge)||void 0,resumeType:"bruteforce"};const $=Math.min(U,ie-ge),se=performance.now();let W;this.useCpu?W=this.cpuInstance.runBatch(P,Y,ge,$,v,C):W=await this.gpuInstance.runBatch(P,Y,ge,$,v,C);const te=performance.now()-se;if(k+=$,!this.useCpu&&!K&&$>=O&&te>0){const D=G/te,H=Math.round($*D),q=Math.pow(2,Math.round(Math.log2(Math.max(O,H))));U=Math.max(O,q),K=!0}for(const D of W){const H=ns(Y,D);if(!H)continue;const q=O0("#"+H),Q=j(q);if(Q.valid)return{found:!0,roomName:H,key:q,decryptedMessage:Q.message,resumeFrom:H,resumeType:"bruteforce"}}ge+=$;const Z=performance.now();if(Z-w>=200){const D=ns(Y,Math.min(ge,ie-1))||"";I("bruteforce",Y,D),w=Z,await new Promise(H=>setTimeout(H,0))}}}return{found:!1,resumeFrom:ns(u,yl(u)-1)||void 0,resumeType:"bruteforce"}}destroy(){this.gpuInstance&&(this.gpuInstance.destroy(),this.gpuInstance=null),this.cpuInstance&&(this.cpuInstance.destroy(),this.cpuInstance=null)}}var y0,_x;function wS(){return _x||(_x=1,y0={webm:"data:video/webm;base64,GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4EEQoWBAhhTgGcBAAAAAAAVkhFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsghV17AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU1LjMzLjEwMFdBjUxhdmY1NS4zMy4xMDBzpJBlrrXf3DCDVB8KcgbMpcr+RImIQJBgAAAAAAAWVK5rAQAAAAAAD++uAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDiDgQEj44OEAmJaAOABAAAAAAAABrCBsLqBkK4BAAAAAAAPq9eBAnPFgQKcgQAitZyDdW5khohBX1ZPUkJJU4OBAuEBAAAAAAAAEZ+BArWIQOdwAAAAAABiZIEgY6JPbwIeVgF2b3JiaXMAAAAAAoC7AAAAAAAAgLUBAAAAAAC4AQN2b3JiaXMtAAAAWGlwaC5PcmcgbGliVm9yYmlzIEkgMjAxMDExMDEgKFNjaGF1ZmVudWdnZXQpAQAAABUAAABlbmNvZGVyPUxhdmM1NS41Mi4xMDIBBXZvcmJpcyVCQ1YBAEAAACRzGCpGpXMWhBAaQlAZ4xxCzmvsGUJMEYIcMkxbyyVzkCGkoEKIWyiB0JBVAABAAACHQXgUhIpBCCGEJT1YkoMnPQghhIg5eBSEaUEIIYQQQgghhBBCCCGERTlokoMnQQgdhOMwOAyD5Tj4HIRFOVgQgydB6CCED0K4moOsOQghhCQ1SFCDBjnoHITCLCiKgsQwuBaEBDUojILkMMjUgwtCiJqDSTX4GoRnQXgWhGlBCCGEJEFIkIMGQcgYhEZBWJKDBjm4FITLQagahCo5CB+EIDRkFQCQAACgoiiKoigKEBqyCgDIAAAQQFEUx3EcyZEcybEcCwgNWQUAAAEACAAAoEiKpEiO5EiSJFmSJVmSJVmS5omqLMuyLMuyLMsyEBqyCgBIAABQUQxFcRQHCA1ZBQBkAAAIoDiKpViKpWiK54iOCISGrAIAgAAABAAAEDRDUzxHlETPVFXXtm3btm3btm3btm3btm1blmUZCA1ZBQBAAAAQ0mlmqQaIMAMZBkJDVgEACAAAgBGKMMSA0JBVAABAAACAGEoOogmtOd+c46BZDppKsTkdnEi1eZKbirk555xzzsnmnDHOOeecopxZDJoJrTnnnMSgWQqaCa0555wnsXnQmiqtOeeccc7pYJwRxjnnnCateZCajbU555wFrWmOmkuxOeecSLl5UptLtTnnnHPOOeecc84555zqxekcnBPOOeecqL25lpvQxTnnnE/G6d6cEM4555xzzjnnnHPOOeecIDRkFQAABABAEIaNYdwpCNLnaCBGEWIaMulB9+gwCRqDnELq0ehopJQ6CCWVcVJKJwgNWQUAAAIAQAghhRRSSCGFFFJIIYUUYoghhhhyyimnoIJKKqmooowyyyyzzDLLLLPMOuyssw47DDHEEEMrrcRSU2011lhr7jnnmoO0VlprrbVSSimllFIKQkNWAQAgAAAEQgYZZJBRSCGFFGKIKaeccgoqqIDQkFUAACAAgAAAAABP8hzRER3RER3RER3RER3R8RzPESVREiVREi3TMjXTU0VVdWXXlnVZt31b2IVd933d933d+HVhWJZlWZZlWZZlWZZlWZZlWZYgNGQVAAACAAAghBBCSCGFFFJIKcYYc8w56CSUEAgNWQUAAAIACAAAAHAUR3EcyZEcSbIkS9IkzdIsT/M0TxM9URRF0zRV0RVdUTdtUTZl0zVdUzZdVVZtV5ZtW7Z125dl2/d93/d93/d93/d93/d9XQdCQ1YBABIAADqSIymSIimS4ziOJElAaMgqAEAGAEAAAIriKI7jOJIkSZIlaZJneZaomZrpmZ4qqkBoyCoAABAAQAAAAAAAAIqmeIqpeIqoeI7oiJJomZaoqZoryqbsuq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq4LhIasAgAkAAB0JEdyJEdSJEVSJEdygNCQVQCADACAAAAcwzEkRXIsy9I0T/M0TxM90RM901NFV3SB0JBVAAAgAIAAAAAAAAAMybAUy9EcTRIl1VItVVMt1VJF1VNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVN0zRNEwgNWQkAkAEAkBBTLS3GmgmLJGLSaqugYwxS7KWxSCpntbfKMYUYtV4ah5RREHupJGOKQcwtpNApJq3WVEKFFKSYYyoVUg5SIDRkhQAQmgHgcBxAsixAsiwAAAAAAAAAkDQN0DwPsDQPAAAAAAAAACRNAyxPAzTPAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAA0DwP8DwR8EQRAAAAAAAAACzPAzTRAzxRBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAAsDwP8EQR0DwRAAAAAAAAACzPAzxRBDzRAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAEOAAABBgIRQasiIAiBMAcEgSJAmSBM0DSJYFTYOmwTQBkmVB06BpME0AAAAAAAAAAAAAJE2DpkHTIIoASdOgadA0iCIAAAAAAAAAAAAAkqZB06BpEEWApGnQNGgaRBEAAAAAAAAAAAAAzzQhihBFmCbAM02IIkQRpgkAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAGHAAAAgwoQwUGrIiAIgTAHA4imUBAIDjOJYFAACO41gWAABYliWKAABgWZooAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAYcAAACDChDBQashIAiAIAcCiKZQHHsSzgOJYFJMmyAJYF0DyApgFEEQAIAAAocAAACLBBU2JxgEJDVgIAUQAABsWxLE0TRZKkaZoniiRJ0zxPFGma53meacLzPM80IYqiaJoQRVE0TZimaaoqME1VFQAAUOAAABBgg6bE4gCFhqwEAEICAByKYlma5nmeJ4qmqZokSdM8TxRF0TRNU1VJkqZ5niiKommapqqyLE3zPFEURdNUVVWFpnmeKIqiaaqq6sLzPE8URdE0VdV14XmeJ4qiaJqq6roQRVE0TdNUTVV1XSCKpmmaqqqqrgtETxRNU1Vd13WB54miaaqqq7ouEE3TVFVVdV1ZBpimaaqq68oyQFVV1XVdV5YBqqqqruu6sgxQVdd1XVmWZQCu67qyLMsCAAAOHAAAAoygk4wqi7DRhAsPQKEhKwKAKAAAwBimFFPKMCYhpBAaxiSEFEImJaXSUqogpFJSKRWEVEoqJaOUUmopVRBSKamUCkIqJZVSAADYgQMA2IGFUGjISgAgDwCAMEYpxhhzTiKkFGPOOScRUoox55yTSjHmnHPOSSkZc8w556SUzjnnnHNSSuacc845KaVzzjnnnJRSSuecc05KKSWEzkEnpZTSOeecEwAAVOAAABBgo8jmBCNBhYasBABSAQAMjmNZmuZ5omialiRpmud5niiapiZJmuZ5nieKqsnzPE8URdE0VZXneZ4oiqJpqirXFUXTNE1VVV2yLIqmaZqq6rowTdNUVdd1XZimaaqq67oubFtVVdV1ZRm2raqq6rqyDFzXdWXZloEsu67s2rIAAPAEBwCgAhtWRzgpGgssNGQlAJABAEAYg5BCCCFlEEIKIYSUUggJAAAYcAAACDChDBQashIASAUAAIyx1lprrbXWQGettdZaa62AzFprrbXWWmuttdZaa6211lJrrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmstpZRSSimllFJKKaWUUkoppZRSSgUA+lU4APg/2LA6wknRWGChISsBgHAAAMAYpRhzDEIppVQIMeacdFRai7FCiDHnJKTUWmzFc85BKCGV1mIsnnMOQikpxVZjUSmEUlJKLbZYi0qho5JSSq3VWIwxqaTWWoutxmKMSSm01FqLMRYjbE2ptdhqq7EYY2sqLbQYY4zFCF9kbC2m2moNxggjWywt1VprMMYY3VuLpbaaizE++NpSLDHWXAAAd4MDAESCjTOsJJ0VjgYXGrISAAgJACAQUooxxhhzzjnnpFKMOeaccw5CCKFUijHGnHMOQgghlIwx5pxzEEIIIYRSSsaccxBCCCGEkFLqnHMQQgghhBBKKZ1zDkIIIYQQQimlgxBCCCGEEEoopaQUQgghhBBCCKmklEIIIYRSQighlZRSCCGEEEIpJaSUUgohhFJCCKGElFJKKYUQQgillJJSSimlEkoJJYQSUikppRRKCCGUUkpKKaVUSgmhhBJKKSWllFJKIYQQSikFAAAcOAAABBhBJxlVFmGjCRcegEJDVgIAZAAAkKKUUiktRYIipRikGEtGFXNQWoqocgxSzalSziDmJJaIMYSUk1Qy5hRCDELqHHVMKQYtlRhCxhik2HJLoXMOAAAAQQCAgJAAAAMEBTMAwOAA4XMQdAIERxsAgCBEZohEw0JweFAJEBFTAUBigkIuAFRYXKRdXECXAS7o4q4DIQQhCEEsDqCABByccMMTb3jCDU7QKSp1IAAAAAAADADwAACQXAAREdHMYWRobHB0eHyAhIiMkAgAAAAAABcAfAAAJCVAREQ0cxgZGhscHR4fICEiIyQBAIAAAgAAAAAggAAEBAQAAAAAAAIAAAAEBB9DtnUBAAAAAAAEPueBAKOFggAAgACjzoEAA4BwBwCdASqwAJAAAEcIhYWIhYSIAgIABhwJ7kPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99YAD+/6tQgKOFggADgAqjhYIAD4AOo4WCACSADqOZgQArADECAAEQEAAYABhYL/QACIBDmAYAAKOFggA6gA6jhYIAT4AOo5mBAFMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAGSADqOFggB6gA6jmYEAewAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAj4AOo5mBAKMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAKSADqOFggC6gA6jmYEAywAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAz4AOo4WCAOSADqOZgQDzADECAAEQEAAYABhYL/QACIBDmAYAAKOFggD6gA6jhYIBD4AOo5iBARsAEQIAARAQFGAAYWC/0AAiAQ5gGACjhYIBJIAOo4WCATqADqOZgQFDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggFPgA6jhYIBZIAOo5mBAWsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAXqADqOFggGPgA6jmYEBkwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIBpIAOo4WCAbqADqOZgQG7ADECAAEQEAAYABhYL/QACIBDmAYAAKOFggHPgA6jmYEB4wAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIB5IAOo4WCAfqADqOZgQILADECAAEQEAAYABhYL/QACIBDmAYAAKOFggIPgA6jhYICJIAOo5mBAjMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAjqADqOFggJPgA6jmYECWwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYICZIAOo4WCAnqADqOZgQKDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggKPgA6jhYICpIAOo5mBAqsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCArqADqOFggLPgA6jmIEC0wARAgABEBAUYABhYL/QACIBDmAYAKOFggLkgA6jhYIC+oAOo5mBAvsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAw+ADqOZgQMjADECAAEQEAAYABhYL/QACIBDmAYAAKOFggMkgA6jhYIDOoAOo5mBA0sAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA0+ADqOFggNkgA6jmYEDcwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIDeoAOo4WCA4+ADqOZgQObADECAAEQEAAYABhYL/QACIBDmAYAAKOFggOkgA6jhYIDuoAOo5mBA8MAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA8+ADqOFggPkgA6jhYID+oAOo4WCBA+ADhxTu2sBAAAAAAAAEbuPs4EDt4r3gQHxghEr8IEK",mp4:"data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"}),y0}var _0,wx;function bS(){if(wx)return _0;wx=1;const{webm:n,mp4:s}=wS(),i=()=>typeof navigator<"u"&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,l=()=>"wakeLock"in navigator;class u{constructor(){if(this.enabled=!1,l()){this._wakeLock=null;const h=()=>{this._wakeLock!==null&&document.visibilityState==="visible"&&this.enable()};document.addEventListener("visibilitychange",h),document.addEventListener("fullscreenchange",h)}else i()?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("title","No Sleep"),this.noSleepVideo.setAttribute("playsinline",""),this._addSourceToVideo(this.noSleepVideo,"webm",n),this._addSourceToVideo(this.noSleepVideo,"mp4",s),this.noSleepVideo.addEventListener("loadedmetadata",()=>{this.noSleepVideo.duration<=1?this.noSleepVideo.setAttribute("loop",""):this.noSleepVideo.addEventListener("timeupdate",()=>{this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())})}))}_addSourceToVideo(h,d,g){var m=document.createElement("source");m.src=g,m.type=`video/${d}`,h.appendChild(m)}get isEnabled(){return this.enabled}enable(){return l()?navigator.wakeLock.request("screen").then(h=>{this._wakeLock=h,this.enabled=!0,console.log("Wake Lock active."),this._wakeLock.addEventListener("release",()=>{console.log("Wake Lock released.")})}).catch(h=>{throw this.enabled=!1,console.error(`${h.name}, ${h.message}`),h}):i()?(this.disable(),console.warn(`
        NoSleep enabled for older iOS devices. This can interrupt
        active or long-running network requests from completing successfully.
        See https://github.com/richtr/NoSleep.js/issues/15 for more details.
      `),this.noSleepTimer=window.setInterval(()=>{document.hidden||(window.location.href=window.location.href.split("#")[0],window.setTimeout(window.stop,0))},15e3),this.enabled=!0,Promise.resolve()):this.noSleepVideo.play().then(d=>(this.enabled=!0,d)).catch(d=>{throw this.enabled=!1,d})}disable(){l()?(this._wakeLock&&this._wakeLock.release(),this._wakeLock=null):i()?this.noSleepTimer&&(console.warn(`
          NoSleep now disabled for older iOS devices.
        `),window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause(),this.enabled=!1}}return _0=u,_0}var CS=bS();const ES=ls(CS);function kS(n){if(n.length<4)return null;try{const i=parseInt(n.slice(0,2),16)&3;let l=2;if(i===0||i===3){if(n.length<l+8)return null;l+=8}if(n.length<l+2)return null;const u=parseInt(n.slice(l,l+2),16);l+=2;const c=u*2;return n.length<l+c?null:(l+=c,n.slice(l))}catch{return null}}function SS({packets:n,channels:s,onChannelCreate:i,onRunningChange:l,visible:u=!1}){const[c,h]=N.useState(!1),[d,g]=N.useState(6),[m,x]=N.useState(!1),[v,C]=N.useState(!0),[P,M]=N.useState(!1),[k,w]=N.useState(null),[B,b]=N.useState(new Map),[E,T]=N.useState([]),[F,I]=N.useState(!1),[j,O]=N.useState(null),[G,U]=N.useState(null),[K,J]=N.useState(0),Y=N.useRef(null),ie=N.useRef(null),ge=N.useRef(!1),$=N.useRef(!1),se=N.useRef(!1),W=N.useRef(new Map),te=N.useRef(!1),Z=N.useRef(6),D=N.useRef(!0),H=N.useRef(!1),q=N.useRef(new Set),Q=N.useRef(new Set);N.useEffect(()=>{const Ee=new _S;Y.current=Ee,O(Ee.isGpuAvailable());const je=new ES;return ie.current=je,()=>{Ee.destroy(),Y.current=null,je.disable(),ie.current=null}},[]),N.useEffect(()=>{!u||F||oS(async()=>{const{ENGLISH_WORDLIST:Ee}=await import("./wordlist-BtmChKSf.js");return{ENGLISH_WORDLIST:Ee}},[]).then(({ENGLISH_WORDLIST:Ee})=>{Y.current&&(Y.current.setWordlist(Ee),I(!0))}).catch(Ee=>{console.error("Failed to load wordlist:",Ee),At.error("Failed to load wordlist",{description:"Cracking will not be available"})})},[u,F]),N.useEffect(()=>{const Ee=()=>{ut.getUndecryptedPacketCount().then(({count:at})=>U(at)).catch(()=>U(null))};Ee();const je=setInterval(Ee,36e5);return()=>clearInterval(je)},[]);const ae=N.useMemo(()=>new Set(s.map(Ee=>Ee.key.toUpperCase())),[s]),ce=n.filter(Ee=>Ee.payload_type==="GROUP_TEXT"&&!Ee.decrypted);N.useEffect(()=>{let Ee=0;b(je=>{const at=new Map(je);let mt=!1;for(const ot of ce)if(!at.has(ot.id)){const qe=kS(ot.data);if(qe&&Q.current.has(qe)){Ee++;continue}qe&&Q.current.add(qe),at.set(ot.id,{packet:ot,attempts:0,lastAttemptLength:0,status:"pending"}),mt=!0}return mt?(W.current=at,at):je}),Ee>0&&J(je=>je+Ee)},[ce.length]),N.useEffect(()=>{W.current=B},[B]),N.useEffect(()=>{te.current=m},[m]),N.useEffect(()=>{Z.current=d},[d]),N.useEffect(()=>{D.current=v},[v]),N.useEffect(()=>{H.current=P},[P]),N.useEffect(()=>{q.current=new Set(ce.map(Ee=>Ee.id))},[ce]),N.useEffect(()=>{l==null||l(c)},[c,l]);const Ae=Array.from(B.values()).filter(Ee=>Ee.status==="pending").length,pe=Array.from(B.values()).filter(Ee=>Ee.status==="cracked").length,xe=Array.from(B.values()).filter(Ee=>Ee.status==="failed").length,Be=N.useCallback(async()=>{if(se.current||!Y.current||!ge.current)return;const Ee=W.current;let je=null,at=null;for(const[Ke,Qe]of Ee.entries())if(Qe.status==="pending"){je=Qe,at=Ke;break}if(!je&&te.current){const Ke=Array.from(Ee.entries()).filter(([,Qe])=>Qe.status==="failed"&&Qe.lastAttemptLength<10);Ke.length>0&&(Ke.sort((Qe,rt)=>Qe[1].lastAttemptLength-rt[1].lastAttemptLength),[at,je]=Ke[0])}if(!je||at===null){ge.current&&setTimeout(()=>Be(),1e3);return}if(!q.current.has(at)){b(Ke=>{const Qe=new Map(Ke);return Qe.delete(at),Qe}),ge.current&&setTimeout(()=>Be(),10);return}se.current=!0;const mt=Z.current,ot=je.lastAttemptLength>0,qe=ot?je.lastAttemptLength+1:mt;try{const Ke=await Y.current.crack(je.packet.data,{maxLength:qe,useSenderFilter:!0,useTimestampFilter:!0,useUtf8Filter:!0,...H.current&&{gpuDispatchMs:1e4},...ot&&{useDictionary:!1,startingLength:qe}},Qe=>{w(Qe)});if($.current){$.current=!1,se.current=!1,w(null);return}if(Ke.found&&Ke.roomName&&Ke.key){b(He=>{const Et=new Map(He),zt=Et.get(at);return zt&&Et.set(at,{...zt,status:"cracked",attempts:zt.attempts+1,lastAttemptLength:qe}),Et});const Qe={roomName:Ke.roomName,key:Ke.key,packetId:at,message:Ke.decryptedMessage||"",crackedAt:Date.now()};T(He=>[...He,Qe]);const rt=Ke.key.toUpperCase();if(!ae.has(rt))try{const He="#"+Ke.roomName;await i(He,Ke.key),D.current&&await ut.decryptHistoricalPackets({key_type:"channel",channel_name:He})}catch(He){console.error("Failed to create channel or decrypt historical:",He),At.error("Failed to save cracked channel",{description:He instanceof Error?He.message:"Channel discovered but could not be saved"})}}else b(Qe=>{const rt=new Map(Qe),He=rt.get(at);return He&&rt.set(at,{...He,status:"failed",attempts:He.attempts+1,lastAttemptLength:qe}),rt})}catch(Ke){console.error("Cracking error:",Ke),b(Qe=>{const rt=new Map(Qe),He=rt.get(at);return He&&rt.set(at,{...He,status:"failed",attempts:He.attempts+1,lastAttemptLength:qe}),rt})}se.current=!1,w(null),ge.current&&setTimeout(()=>Be(),100)},[ae,i]),Oe=()=>{var Ee;if(!j){At.error("WebGPU not available",{description:"Cracking requires Chrome 113+ or Edge 113+ with WebGPU support."});return}h(!0),ge.current=!0,$.current=!1,(Ee=ie.current)==null||Ee.enable(),Be()},Xe=()=>{var Ee,je;h(!1),ge.current=!1,$.current=!0,(Ee=Y.current)==null||Ee.abort(),(je=ie.current)==null||je.disable()};return _.jsxs("div",{className:"flex flex-col h-full p-3 gap-3 bg-background border-t border-border overflow-auto",children:[_.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("label",{className:"text-sm text-muted-foreground",children:"Max Length:"}),_.jsx("input",{type:"number",min:1,max:10,value:d,onChange:Ee=>g(Math.min(10,Math.max(1,parseInt(Ee.target.value)||6))),className:"w-14 px-2 py-1 text-sm bg-muted border border-border rounded"})]}),_.jsxs("label",{className:"flex items-center gap-2 text-sm text-muted-foreground cursor-pointer",children:[_.jsx("input",{type:"checkbox",checked:m,onChange:Ee=>x(Ee.target.checked),className:"rounded"}),"Retry failed at n+1"]}),_.jsxs("label",{className:"flex items-center gap-2 text-sm text-muted-foreground cursor-pointer",children:[_.jsx("input",{type:"checkbox",checked:v,onChange:Ee=>C(Ee.target.checked),className:"rounded"}),"Decrypt historical packets if key found"]}),v&&_.jsx("span",{className:"text-xs text-muted-foreground",children:G!==null&&G>0?`(${G.toLocaleString()} packets; messages will stream in as decrypted)`:"(messages will stream in as decrypted)"}),_.jsxs("label",{className:"flex items-center gap-2 text-sm text-muted-foreground cursor-pointer",children:[_.jsx("input",{type:"checkbox",checked:P,onChange:Ee=>M(Ee.target.checked),className:"rounded"}),"Turbo mode (experimental)"]})]}),_.jsx("button",{onClick:c?Xe:Oe,disabled:!F||j===!1,className:pt("w-48 px-4 py-1.5 rounded text-sm font-medium",c?"bg-destructive text-destructive-foreground hover:bg-destructive/90":"bg-primary text-primary-foreground hover:bg-primary/90","disabled:opacity-50 disabled:cursor-not-allowed"),children:c?"Stop Search":j===!1?"GPU Not Available":F?"Find Rooms":"Loading dictionary..."}),_.jsxs("div",{className:"flex gap-4 text-sm",children:[_.jsxs("span",{className:"text-muted-foreground",children:["Pending: ",_.jsx("span",{className:"text-foreground font-medium",children:Ae})]}),_.jsxs("span",{className:"text-muted-foreground",children:["Cracked: ",_.jsx("span",{className:"text-green-500 font-medium",children:pe})]}),_.jsxs("span",{className:"text-muted-foreground",children:["Failed: ",_.jsx("span",{className:"text-destructive font-medium",children:xe})]}),K>0&&_.jsxs("span",{className:"text-muted-foreground",children:["Skipped (dup):"," ",_.jsx("span",{className:"text-muted-foreground font-medium",children:K})]})]}),k&&_.jsxs("div",{className:"space-y-1",children:[_.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[_.jsxs("span",{children:[k.phase==="wordlist"?"Dictionary":k.phase==="bruteforce"?"Bruteforce":"Public Key",k.phase==="bruteforce"&&` - Length ${k.currentLength}`,":"," ",k.currentPosition]}),_.jsxs("span",{children:[k.rateKeysPerSec>=1e9?`${(k.rateKeysPerSec/1e9).toFixed(2)} Gkeys/s`:`${(k.rateKeysPerSec/1e6).toFixed(1)} Mkeys/s`," "," ETA:"," ",k.etaSeconds<60?`${Math.round(k.etaSeconds)}s`:`${Math.round(k.etaSeconds/60)}m`]})]}),_.jsx("div",{className:"h-2 bg-muted rounded overflow-hidden",children:_.jsx("div",{className:"h-full bg-primary transition-all duration-200",style:{width:`${k.percent}%`}})})]}),j===!1&&_.jsx("div",{className:"text-sm text-destructive",children:"WebGPU not available. Cracking requires Chrome 113+ or Edge 113+."}),!F&&j!==!1&&_.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading wordlist..."}),E.length>0&&_.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0",children:[_.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Cracked Rooms:"}),_.jsx("div",{className:"space-y-1",children:E.map((Ee,je)=>_.jsxs("div",{className:"text-sm bg-green-950/30 border border-green-900/50 rounded px-2 py-1",children:[_.jsxs("span",{className:"text-green-400 font-medium",children:["#",Ee.roomName]}),_.jsxs("span",{className:"text-muted-foreground ml-2 text-xs",children:['"',Ee.message.slice(0,50),Ee.message.length>50?"...":"",'"']})]},je))})]}),_.jsx("hr",{className:"border-border"}),_.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:["For unknown-keyed GroupText packets, this will attempt to dictionary attack, then brute force payloads as they arrive, testing room names up to the specified length to discover active rooms on the local mesh (GroupText packets may not be hashtag messages; we have no way of knowing but try as if they are).",_.jsx("strong",{children:" Retry failed at n+1"})," will let the cracker return to the failed queue and pick up messages it couldn't crack, attempting them at one longer length.",_.jsx("strong",{children:" Decrypt historical"})," will run an async job on any room name it finds to see if any historically captured packets will decrypt with that key.",_.jsx("strong",{children:" Turbo mode"})," will push your GPU to the max (target dispatch time of 10s) and may allow accelerated cracking and/or system instability."]})]})}const BS=bv,PS=Cv,zA=N.forwardRef(({className:n,...s},i)=>_.jsx(dd,{className:pt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...s,ref:i}));zA.displayName=dd.displayName;const TS=q0("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),HA=N.forwardRef(({side:n="right",className:s,children:i,hideCloseButton:l=!1,...u},c)=>_.jsxs(PS,{children:[_.jsx(zA,{}),_.jsxs(fd,{ref:c,className:pt(TS({side:n}),s),...u,children:[!l&&_.jsxs(Ev,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[_.jsx(Tx,{className:"h-4 w-4"}),_.jsx("span",{className:"sr-only",children:"Close"})]}),i]})]}));HA.displayName=fd.displayName;const VA=({className:n,...s})=>_.jsx("div",{className:pt("flex flex-col space-y-2 text-center sm:text-left",n),...s});VA.displayName="SheetHeader";const UA=N.forwardRef(({className:n,...s},i)=>_.jsx(hd,{ref:i,className:pt("text-lg font-semibold text-foreground",n),...s}));UA.displayName=hd.displayName;const DS=N.forwardRef(({className:n,...s},i)=>_.jsx(pd,{ref:i,className:pt("text-sm text-muted-foreground",n),...s}));DS.displayName=pd.displayName;const bx=500;function RS(){const n=N.useRef(null),s=N.useRef(null),i=N.useRef(new Set),[l,u]=N.useState(null),[c,h]=N.useState(null),[d,g]=N.useState(null),[m,x]=N.useState([]),[v,C]=N.useState([]),[P,M]=N.useState([]),[k,w]=N.useState(null),[B,b]=N.useState(!1),[E,T]=N.useState(!1),[F,I]=N.useState(!1),[j,O]=N.useState(0),[G,U]=N.useState(!1),[K,J]=N.useState(!1),Y=(d==null?void 0:d.favorites)??[],ie=N.useRef(null),ge=N.useRef(null);N.useEffect(()=>{ge.current=(c==null?void 0:c.name)??null},[c==null?void 0:c.name]);const $=N.useCallback(re=>{const ye=ge.current;if(!ye)return!1;const Ce=ye.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return new RegExp(`@\\[${Ce}\\]`,"i").test(re)},[]),{messages:se,messagesLoading:W,loadingOlder:te,hasOlderMessages:Z,setMessages:D,fetchMessages:H,fetchOlderMessages:q,addMessageIfNew:Q,updateMessageAck:ae}=C_(k),{unreadCounts:ce,mentions:Ae,lastMessageTimes:pe,incrementUnread:xe,markAllRead:Be,trackNewMessage:Oe}=Ky(v,m,k,c==null?void 0:c.name),{repeaterLoggedIn:Xe,activeContactIsRepeater:Ee,handleTelemetryRequest:je,handleRepeaterCommand:at}=qy(k,m,D),mt=N.useMemo(()=>({onHealth:re=>{const ye=ie.current;ie.current=re,u(re),ye!==null&&ye.radio_connected!==re.radio_connected&&(re.radio_connected?(At.success("Radio connected",{description:re.serial_port?`Connected to ${re.serial_port}`:void 0}),ut.getRadioConfig().then(h).catch(console.error)):At.error("Radio disconnected",{description:"Check radio connection and power"}))},onError:re=>{At.error(re.message,{description:re.details})},onSuccess:re=>{At.success(re.message,{description:re.details})},onContacts:re=>x(re),onChannels:re=>C(re),onMessage:re=>{const ye=s.current,Ce=ye&&(re.type==="CHAN"&&ye.type==="channel"||re.type==="PRIV"&&ye.type==="contact")?re.conversation_key===ye.id:!1;if(Ce&&Q(re),Oe(re),!re.outgoing&&!Ce){const Ne=sc(re);if(i.current.has(Ne))return;if(i.current.add(Ne),i.current.size>1e3){const Fe=Array.from(i.current);i.current=new Set(Fe.slice(-500))}let Je=null;if(re.type==="CHAN"&&re.conversation_key?Je=Hr("channel",re.conversation_key):re.type==="PRIV"&&re.conversation_key&&(Je=Hr("contact",re.conversation_key)),Je){const Fe=$(re.text);xe(Je,Fe)}}},onContact:re=>{x(ye=>{const Ce=ye.findIndex(Ne=>Ne.public_key===re.public_key);if(Ce>=0){const Ne=[...ye],Je=ye[Ce];return Ne[Ce]={...Je,...re,name:re.name??Je.name,last_path:re.last_path??Je.last_path,lat:re.lat??Je.lat,lon:re.lon??Je.lon},Ne}return[...ye,re]})},onRawPacket:re=>{M(ye=>{if(ye.some(Ne=>Ne.id===re.id))return ye;const Ce=[...ye,re];return Ce.length>bx?Ce.slice(-bx):Ce})},onMessageAcked:(re,ye,Ce)=>{ae(re,ye,Ce)}}),[Q,Oe,xe,ae,$]);Oy(mt);const ot=N.useCallback(async()=>{try{const re=await ut.getRadioConfig();h(re)}catch(re){console.error("Failed to fetch config:",re)}},[]),qe=N.useCallback(async()=>{try{const re=await ut.getSettings();g(re),am(re.last_message_times??{})}catch(re){console.error("Failed to fetch app settings:",re)}},[]),Ke=N.useCallback(async()=>{try{const re=await ut.getUndecryptedPacketCount();O(re.count)}catch(re){console.error("Failed to fetch undecrypted count:",re)}},[]);N.useEffect(()=>{ot(),qe(),Ke()},[ot,qe,Ke]);const Qe=N.useRef(!1);N.useEffect(()=>{if(!d||Qe.current)return;if(d.preferences_migrated){pm(),um(),Qe.current=!0;return}const re=Z_(),ye=$y(),Ce=Gy();if(!(re.length>0||ye!=="recent"||Object.keys(Ce).length>0)){Qe.current=!0;return}Qe.current=!0,(async()=>{try{const Fe=await ut.migratePreferences({favorites:re,sort_order:ye,last_message_times:Ce});Fe.migrated&&At.success("Preferences migrated",{description:`Migrated ${re.length} favorites to server`}),g(Fe.settings),am(Fe.settings.last_message_times??{}),pm(),um()}catch(Fe){console.error("Failed to migrate preferences:",Fe)}})()},[d]);const rt=N.useCallback(()=>{const re=Nb();if(!re)return null;if(re.type==="raw")return{type:"raw",id:"raw",name:"Raw Packet Feed"};if(re.type==="map")return{type:"map",id:"map",name:"Node Map",mapFocusKey:re.mapFocusKey};if(re.type==="visualizer")return{type:"visualizer",id:"visualizer",name:"Mesh Visualizer"};if(re.type==="channel"){const ye=v.find(Ce=>Ce.name===re.name||Ce.name===`#${re.name}`);if(ye)return{type:"channel",id:ye.key,name:ye.name}}if(re.type==="contact"){const ye=m.find(Ce=>Ni(Ce.name,Ce.public_key)===re.name);if(ye)return{type:"contact",id:ye.public_key,name:Ni(ye.name,ye.public_key)}}return null},[v,m]),He=N.useRef(!1);N.useEffect(()=>{if(He.current||k||v.length===0&&m.length===0)return;const re=rt();if(re){w(re),He.current=!0;return}const ye=v.find(Ce=>Ce.name==="Public");ye&&(w({type:"channel",id:ye.key,name:ye.name}),He.current=!0)},[v,m,k,rt]),N.useEffect(()=>{s.current=k,k&&Mb(k)},[k]);const Et=N.useCallback(async re=>{k&&(k.type==="channel"?await ut.sendChannelMessage(k.id,re):await ut.sendDirectMessage(k.id,re),await H())},[k,H]),zt=N.useCallback(async re=>{await ut.updateRadioConfig(re),await ot()},[ot]),Qt=N.useCallback(async re=>{await ut.updateSettings(re),await qe()},[qe]),Dt=N.useCallback(async re=>{await ut.setPrivateKey(re),await ot()},[ot]),Gt=N.useCallback(async()=>{await ut.rebootRadio(),u(ye=>ye&&{...ye,radio_connected:!1}),(async()=>{for(let ye=0;ye<30;ye++){await new Promise(Ce=>setTimeout(Ce,1e3));try{const Ce=await ut.getHealth();if(u(Ce),Ce.radio_connected){ot();return}}catch{}}})()},[ot]),Yt=N.useCallback(async()=>{try{await ut.sendAdvertisement(!0),At.success("Advertisement sent")}catch(re){console.error("Failed to send advertisement:",re),At.error("Failed to send advertisement",{description:re instanceof Error?re.message:"Check radio connection"})}},[]),$t=N.useCallback(re=>{var ye;(ye=n.current)==null||ye.appendText(`@[${re}] `)},[]),Ht=N.useCallback(re=>{w(re),I(!1)},[]),Rt=N.useCallback(async(re,ye)=>{const Ne=rs(Y,re,ye)?Y.filter(Je=>!(Je.type===re&&Je.id===ye)):[...Y,{type:re,id:ye}];g(Je=>Je&&{...Je,favorites:Ne});try{const Je=await ut.toggleFavorite(re,ye);g(Je)}catch(Je){console.error("Failed to toggle favorite:",Je),g(Fe=>Fe&&{...Fe,favorites:Y}),At.error("Failed to update favorite")}},[Y]),Vt=N.useCallback(async re=>{if(confirm("Delete this channel? Message history will be preserved."))try{await ut.deleteChannel(re),C(ye=>ye.filter(Ce=>Ce.key!==re)),w(null),At.success("Channel deleted")}catch(ye){console.error("Failed to delete channel:",ye),At.error("Failed to delete channel",{description:ye instanceof Error?ye.message:void 0})}},[]),Pe=N.useCallback(async re=>{if(confirm("Delete this contact? Message history will be preserved."))try{await ut.deleteContact(re),x(ye=>ye.filter(Ce=>Ce.public_key!==re)),w(null),At.success("Contact deleted")}catch(ye){console.error("Failed to delete contact:",ye),At.error("Failed to delete contact",{description:ye instanceof Error?ye.message:void 0})}},[]),_e=N.useCallback(async(re,ye,Ce)=>{const Ne=await ut.createContact(ye,re||void 0,Ce),Je=await ut.getContacts();x(Je),w({type:"contact",id:Ne.public_key,name:Ni(Ne.name,Ne.public_key)})},[]),fe=N.useCallback(async(re,ye,Ce)=>{const Ne=await ut.createChannel(re,ye),Je=await ut.getChannels();C(Je),w({type:"channel",id:Ne.key,name:re}),Ce&&(await ut.decryptHistoricalPackets({key_type:"channel",channel_key:Ne.key}),Ke())},[Ke]),ve=N.useCallback(async(re,ye)=>{const Ce=re.startsWith("#")?re:`#${re}`,Ne=await ut.createChannel(Ce),Je=await ut.getChannels();C(Je),w({type:"channel",id:Ne.key,name:Ce}),ye&&(await ut.decryptHistoricalPackets({key_type:"channel",channel_name:Ce}),Ke())},[Ke]),we=N.useCallback(async re=>{const ye=(d==null?void 0:d.sidebar_sort_order)??"recent";g(Ce=>Ce&&{...Ce,sidebar_sort_order:re});try{const Ce=await ut.updateSettings({sidebar_sort_order:re});g(Ce)}catch(Ce){console.error("Failed to update sort order:",Ce),g(Ne=>Ne&&{...Ne,sidebar_sort_order:ye}),At.error("Failed to save sort preference")}},[d==null?void 0:d.sidebar_sort_order]),Ge=_.jsx(V1,{contacts:m,channels:v,activeConversation:k,onSelectConversation:Ht,onNewMessage:()=>{b(!0),I(!1)},lastMessageTimes:pe,unreadCounts:ce,mentions:Ae,showCracker:G,crackerRunning:K,onToggleCracker:()=>U(re=>!re),onMarkAllRead:Be,favorites:Y,sortOrder:(d==null?void 0:d.sidebar_sort_order)??"recent",onSortOrderChange:we});return _.jsxs("div",{className:"flex flex-col h-dvh",children:[_.jsx(L_,{health:l,config:c,onSettingsClick:()=>T(!0),onMenuClick:()=>I(!0)}),_.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[_.jsx("div",{className:"hidden md:block",children:Ge}),_.jsx(BS,{open:F,onOpenChange:I,children:_.jsxs(HA,{side:"left",className:"w-[280px] p-0 flex flex-col",hideCloseButton:!0,children:[_.jsx(VA,{className:"sr-only",children:_.jsx(UA,{children:"Navigation"})}),_.jsx("div",{className:"flex-1 overflow-hidden",children:Ge})]})}),_.jsx("div",{className:"flex-1 flex flex-col bg-background min-w-0",children:k?k.type==="map"?_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"flex justify-between items-center px-4 py-3 border-b border-border font-medium text-lg",children:"Node Map"}),_.jsx("div",{className:"flex-1 overflow-hidden",children:_.jsx(ek,{contacts:m,focusedKey:k.mapFocusKey})})]}):k.type==="visualizer"?_.jsx(nS,{packets:P,contacts:m,config:c,onClearPackets:()=>M([])}):k.type==="raw"?_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"flex justify-between items-center px-4 py-3 border-b border-border font-medium text-lg",children:"Raw Packet Feed"}),_.jsx("div",{className:"flex-1 overflow-hidden",children:_.jsx(R0,{packets:P})})]}):_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-border font-medium text-lg gap-2",children:[_.jsxs("span",{className:"flex flex-wrap items-baseline gap-x-2 min-w-0 flex-1",children:[_.jsxs("span",{className:"flex-shrink-0",children:[k.type==="channel"&&!k.name.startsWith("#")&&k.name!=="Public"?"#":"",k.name]}),_.jsx("span",{className:"font-normal text-sm text-muted-foreground font-mono truncate cursor-pointer hover:text-primary",onClick:re=>{re.stopPropagation(),navigator.clipboard.writeText(k.id),At.success(k.type==="channel"?"Room key copied!":"Contact key copied!")},title:"Click to copy",children:k.type==="channel"?k.id.toLowerCase():k.id}),k.type==="contact"&&(()=>{const re=m.find(Ce=>Ce.public_key===k.id);if(!re)return null;const ye=[];if(re.last_seen&&ye.push(`Last heard: ${oa(re.last_seen)}`),re.last_path_len===-1?ye.push("flood"):re.last_path_len===0?ye.push("direct"):re.last_path_len>0&&ye.push(`${re.last_path_len} hop${re.last_path_len>1?"s":""}`),Lt(re.lat,re.lon)){const Ce=c&&Lt(c.lat,c.lon)?Vr(c.lat,c.lon,re.lat,re.lon):null;ye.push(_.jsxs("span",{children:[_.jsxs("span",{className:"font-mono cursor-pointer hover:text-primary hover:underline",onClick:Ne=>{Ne.stopPropagation();const Je=window.location.origin+window.location.pathname+Sv(re.public_key);window.open(Je,"_blank")},title:"View on map",children:[re.lat.toFixed(3),", ",re.lon.toFixed(3)]}),Ce!==null&&` (${is(Ce)})`]},"coords"))}return ye.length>0?_.jsxs("span",{className:"font-normal text-sm text-muted-foreground flex-shrink-0",children:["(",ye.map((Ce,Ne)=>_.jsxs("span",{children:[Ne>0&&", ",Ce]},Ne)),")"]}):null})()]}),_.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(k.type==="channel"||k.type==="contact")&&_.jsx("button",{className:"p-1.5 rounded hover:bg-accent text-xl leading-none",onClick:()=>Rt(k.type,k.id),title:rs(Y,k.type,k.id)?"Remove from favorites":"Add to favorites",children:rs(Y,k.type,k.id)?_.jsx("span",{className:"text-yellow-500",children:""}):_.jsx("span",{className:"text-muted-foreground",children:""})}),!(k.type==="channel"&&k.name==="Public")&&_.jsx("button",{className:"p-1.5 rounded hover:bg-destructive/20 text-destructive text-xl leading-none",onClick:()=>{k.type==="channel"?Vt(k.id):Pe(k.id)},title:"Delete",children:""})]})]}),_.jsx(Vb,{messages:se,contacts:m,loading:W,loadingOlder:te,hasOlderMessages:Z,onSenderClick:k.type==="channel"?$t:void 0,onLoadOlder:q,radioName:c==null?void 0:c.name,config:c}),_.jsx(Gb,{ref:n,onSend:Ee?Xe?at:je:Et,disabled:!(l!=null&&l.radio_connected),isRepeaterMode:Ee&&!Xe,conversationType:k.type,senderName:c==null?void 0:c.name,placeholder:l!=null&&l.radio_connected?Ee?Xe?"Send CLI command (requires admin login)...":`Enter password for ${k.name} (or . for none)...`:`Message ${k.name}...`:"Radio not connected"})]}):_.jsx("div",{className:"flex-1 flex items-center justify-center text-muted-foreground",children:"Select a conversation or start a new one"})})]}),_.jsx("div",{className:pt("border-t border-border bg-background transition-all duration-200 overflow-hidden",G?"h-[275px]":"h-0"),children:_.jsx(SS,{packets:P,channels:v,visible:G,onChannelCreate:async(re,ye)=>{const Ce=await ut.createChannel(re,ye),Ne=await ut.getChannels();C(Ne),await ut.decryptHistoricalPackets({key_type:"channel",channel_key:Ce.key}),Ke()},onRunningChange:J})}),_.jsx(k2,{open:B,contacts:m,undecryptedCount:j,onClose:()=>b(!1),onSelectConversation:re=>{w(re),b(!1)},onCreateContact:_e,onCreateChannel:fe,onCreateHashtagChannel:ve}),_.jsx(I2,{open:E,config:c,health:l,appSettings:d,onClose:()=>T(!1),onSave:zt,onSaveAppSettings:Qt,onSetPrivateKey:Dt,onReboot:Gt,onAdvertise:Yt,onHealthRefresh:async()=>{const re=await ut.getHealth();u(re)},onRefreshAppSettings:qe}),_.jsx(b_,{position:"top-right"})]})}Ly.createRoot(document.getElementById("root")).render(_.jsx(N.StrictMode,{children:_.jsx(RS,{})}));
//# sourceMappingURL=index-B3-iYEDN.js.map
